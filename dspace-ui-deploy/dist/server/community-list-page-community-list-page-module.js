exports.ids=[12],exports.modules={"5sao":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return CommunityListService}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),_ngrx_store__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("l7P3"),rxjs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("itXk"),rxjs__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("LRne"),rxjs_operators__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("lJxs"),rxjs_operators__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("pLZG"),rxjs_operators__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("eIep"),_core_data_community_data_service__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("mrqg"),_core_data_request_models__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("B/au"),_core_shared_community_model__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("YLTE"),_core_shared_page_info_model__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("oBfO"),_shared_empty_util__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("J3qs"),_core_data_paginated_list_model__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("f+Ev"),_core_data_collection_data_service__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("DNva"),_community_list_actions__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("yGEw"),_community_page_community_page_routing_paths__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("krCT"),_collection_page_collection_page_routing_paths__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("Obj/"),_core_shared_operators__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("1QIV"),_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("84Zn");class ShowMoreFlatNode{}const combineAndFlatten=obsList=>Object(rxjs__WEBPACK_IMPORTED_MODULE_2__.a)([...obsList]).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.a)((matrix=>[].concat(...matrix))),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.a)((arr=>arr.every((e=>Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_11__.b)(e)))))),toFlatNode=(c,isExpandable,level,isExpanded,parent)=>({isExpandable$:isExpandable,name:c.name,id:c.id,level:level,isExpanded:isExpanded,parent:parent,payload:c,isShowMoreNode:!1,route:c instanceof _core_shared_community_model__WEBPACK_IMPORTED_MODULE_9__.a?Object(_community_page_community_page_routing_paths__WEBPACK_IMPORTED_MODULE_15__.h)(c.id):Object(_collection_page_collection_page_routing_paths__WEBPACK_IMPORTED_MODULE_16__.j)(c.id)}),showMoreFlatNode=(id,level,parent)=>({isExpandable$:Object(rxjs__WEBPACK_IMPORTED_MODULE_3__.a)(!1),name:"Show More Flatnode",id:id,level:level,isExpanded:!1,parent:parent,payload:new ShowMoreFlatNode,isShowMoreNode:!0}),communityListStateSelector=state=>state.communityList,expandedNodesSelector=Object(_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.r)(communityListStateSelector,(communityList=>communityList.expandedNodes)),loadingNodeSelector=Object(_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.r)(communityListStateSelector,(communityList=>communityList.loadingNode));class CommunityListService{constructor(communityDataService,collectionDataService,store){this.communityDataService=communityDataService,this.collectionDataService=collectionDataService,this.store=store,this.configOnePage=Object.assign(new _core_data_request_models__WEBPACK_IMPORTED_MODULE_8__.f,{elementsPerPage:1})}saveCommunityListStateToStore(expandedNodes,loadingNode){this.store.dispatch(new _community_list_actions__WEBPACK_IMPORTED_MODULE_14__.b(expandedNodes,loadingNode))}getExpandedNodesFromStore(){return this.store.select(expandedNodesSelector)}getLoadingNodeFromStore(){return this.store.select(loadingNodeSelector)}loadCommunities(findOptions,expandedNodes){const currentPage=findOptions.currentPage,topCommunities=[];for(let i=1;i<=currentPage;i++){const pagination=Object.assign({},findOptions,{currentPage:i});topCommunities.push(this.getTopCommunities(pagination))}return Object(rxjs__WEBPACK_IMPORTED_MODULE_2__.a)([...topCommunities]).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.a)((coms=>{const newPages=coms.map((unit=>unit.page)),newPage=[].concat(...newPages);let newPageInfo=new _core_shared_page_info_model__WEBPACK_IMPORTED_MODULE_10__.a;return coms&&coms.length>0&&(newPageInfo=Object.assign({},coms[0].pageInfo,{currentPage:currentPage})),Object(_core_data_paginated_list_model__WEBPACK_IMPORTED_MODULE_12__.b)(newPageInfo,newPage)}))).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.a)((topComs=>this.transformListOfCommunities(topComs,0,null,expandedNodes))))}getTopCommunities(options){return this.communityDataService.findTop({currentPage:options.currentPage,elementsPerPage:20,sort:{field:options.sort.field,direction:options.sort.direction}},Object(_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_18__.a)("subcommunities",{findListOptions:this.configOnePage}),Object(_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_18__.a)("collections",{findListOptions:this.configOnePage})).pipe(Object(_core_shared_operators__WEBPACK_IMPORTED_MODULE_17__.i)(),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.a)((results=>results.payload)))}transformListOfCommunities(listOfPaginatedCommunities,level,parent,expandedNodes){if(Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_11__.e)(listOfPaginatedCommunities.page)){let currentPage=listOfPaginatedCommunities.currentPage;Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_11__.e)(parent)&&(currentPage=expandedNodes.find((node=>node.id===parent.id)).currentCommunityPage);let obsList=listOfPaginatedCommunities.page.map((community=>this.transformCommunity(community,level,parent,expandedNodes)));return currentPage<listOfPaginatedCommunities.totalPages&&currentPage===listOfPaginatedCommunities.currentPage&&(obsList=[...obsList,Object(rxjs__WEBPACK_IMPORTED_MODULE_3__.a)([showMoreFlatNode("community",level,parent)])]),combineAndFlatten(obsList)}return Object(rxjs__WEBPACK_IMPORTED_MODULE_3__.a)([])}transformCommunity(community,level,parent,expandedNodes){let isExpanded=!1;Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_11__.e)(expandedNodes)&&(isExpanded=Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_11__.b)(expandedNodes.find((node=>node.id===community.id))));const isExpandable$=this.getIsExpandable(community),communityFlatNode=toFlatNode(community,isExpandable$,level,isExpanded,parent);let obsList=[Object(rxjs__WEBPACK_IMPORTED_MODULE_3__.a)([communityFlatNode])];if(isExpanded){const currentCommunityPage=expandedNodes.find((node=>node.id===community.id)).currentCommunityPage;let subcoms=[];for(let i=1;i<=currentCommunityPage;i++){const nextSetOfSubcommunitiesPage=this.communityDataService.findByParent(community.uuid,{elementsPerPage:20,currentPage:i},Object(_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_18__.a)("subcommunities",{findListOptions:this.configOnePage}),Object(_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_18__.a)("collections",{findListOptions:this.configOnePage})).pipe(Object(_core_shared_operators__WEBPACK_IMPORTED_MODULE_17__.g)(),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.a)((rd=>Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_11__.b)(rd)&&Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_11__.b)(rd.payload)?this.transformListOfCommunities(rd.payload,level+1,communityFlatNode,expandedNodes):Object(rxjs__WEBPACK_IMPORTED_MODULE_3__.a)([]))));subcoms=[...subcoms,nextSetOfSubcommunitiesPage]}obsList=[...obsList,combineAndFlatten(subcoms)];const currentCollectionPage=expandedNodes.find((node=>node.id===community.id)).currentCollectionPage;let collections=[];for(let i=1;i<=currentCollectionPage;i++){const nextSetOfCollectionsPage=this.collectionDataService.findByParent(community.uuid,{elementsPerPage:20,currentPage:i}).pipe(Object(_core_shared_operators__WEBPACK_IMPORTED_MODULE_17__.g)(),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.a)((rd=>{if(Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_11__.b)(rd)&&Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_11__.b)(rd.payload)){let nodes=rd.payload.page.map((collection=>toFlatNode(collection,Object(rxjs__WEBPACK_IMPORTED_MODULE_3__.a)(!1),level+1,!1,communityFlatNode)));return currentCollectionPage<rd.payload.totalPages&&currentCollectionPage===rd.payload.currentPage&&(nodes=[...nodes,showMoreFlatNode("collection",level+1,communityFlatNode)]),nodes}return[]})));collections=[...collections,nextSetOfCollectionsPage]}obsList=[...obsList,combineAndFlatten(collections)]}return combineAndFlatten(obsList)}getIsExpandable(community){let hasSubcoms$,hasColls$,hasChildren$;return hasSubcoms$=this.communityDataService.findByParent(community.uuid,this.configOnePage).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.a)((rd=>!(!Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_11__.b)(rd)||!Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_11__.b)(rd.payload))&&rd.payload.totalElements>0))),hasColls$=this.collectionDataService.findByParent(community.uuid,this.configOnePage).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.a)((rd=>!(!Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_11__.b)(rd)||!Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_11__.b)(rd.payload))&&rd.payload.totalElements>0))),hasChildren$=Object(rxjs__WEBPACK_IMPORTED_MODULE_2__.a)(hasSubcoms$,hasColls$).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.a)((([hasSubcoms,hasColls])=>hasSubcoms||hasColls))),hasChildren$}}CommunityListService.\u0275fac=function CommunityListService_Factory(t){return new(t||CommunityListService)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275inject"](_core_data_community_data_service__WEBPACK_IMPORTED_MODULE_7__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275inject"](_core_data_collection_data_service__WEBPACK_IMPORTED_MODULE_13__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275inject"](_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.i))},CommunityListService.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineInjectable"]({token:CommunityListService,factory:CommunityListService.\u0275fac})},"A/qm":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return community_list_component_CommunityListComponent}));var core=__webpack_require__("fXoL"),take=__webpack_require__("IzEk"),sort_options_model=__webpack_require__("qc8P"),request_models=__webpack_require__("B/au"),community_list_service=__webpack_require__("5sao"),empty_util=__webpack_require__("J3qs"),BehaviorSubject=__webpack_require__("2Vo4"),finalize=__webpack_require__("nYR2");class community_list_datasource_CommunityListDatasource{constructor(communityListService){this.communityListService=communityListService,this.communityList$=new BehaviorSubject.a([]),this.loading$=new BehaviorSubject.a(!1)}connect(collectionViewer){return this.communityList$.asObservable()}loadCommunities(findOptions,expandedNodes){this.loading$.next(!0),Object(empty_util.b)(this.subLoadCommunities)&&this.subLoadCommunities.unsubscribe(),this.subLoadCommunities=this.communityListService.loadCommunities(findOptions,expandedNodes).pipe(Object(finalize.a)((()=>this.loading$.next(!1)))).subscribe((flatNodes=>{this.communityList$.next(flatNodes)}))}disconnect(collectionViewer){this.communityList$.complete(),this.loading$.complete()}}var tree=__webpack_require__("FvrZ"),common=__webpack_require__("ofXK"),loading_component=__webpack_require__("Frqi"),router=__webpack_require__("tyNb"),truncatable_component=__webpack_require__("y/PT"),truncatable_part_component=__webpack_require__("Ybtn"),ngx_translate_core=__webpack_require__("sYmb");function CommunityListComponent_ds_loading_0_Template(rf,ctx){1&rf&&core["\u0275\u0275element"](0,"ds-loading",5)}function CommunityListComponent_cdk_tree_node_6_a_11_Template(rf,ctx){if(1&rf){const _r9=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementStart"](0,"a",14),core["\u0275\u0275listener"]("click",(function CommunityListComponent_cdk_tree_node_6_a_11_Template_a_click_0_listener(){core["\u0275\u0275restoreView"](_r9);const node_r4=core["\u0275\u0275nextContext"]().$implicit;return core["\u0275\u0275nextContext"]().getNextPage(node_r4)})),core["\u0275\u0275text"](1,"\n           "),core["\u0275\u0275element"](2,"i",15),core["\u0275\u0275text"](3),core["\u0275\u0275pipe"](4,"translate"),core["\u0275\u0275elementEnd"]()}2&rf&&(core["\u0275\u0275advance"](3),core["\u0275\u0275textInterpolate1"](" ",core["\u0275\u0275pipeBind1"](4,1,"communityList.showMore"),"\n        "))}function CommunityListComponent_cdk_tree_node_6_ds_loading_13_Template(rf,ctx){1&rf&&core["\u0275\u0275element"](0,"ds-loading",5)}function CommunityListComponent_cdk_tree_node_6_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"cdk-tree-node",6),core["\u0275\u0275text"](1,"\n    "),core["\u0275\u0275elementStart"](2,"div",7),core["\u0275\u0275text"](3,"\n      "),core["\u0275\u0275elementStart"](4,"button",8),core["\u0275\u0275text"](5,"\n        "),core["\u0275\u0275element"](6,"span",9),core["\u0275\u0275text"](7,"\n      "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](8,"\n      "),core["\u0275\u0275elementStart"](9,"div",10),core["\u0275\u0275text"](10,"\n        "),core["\u0275\u0275template"](11,CommunityListComponent_cdk_tree_node_6_a_11_Template,5,3,"a",11),core["\u0275\u0275text"](12,"\n        "),core["\u0275\u0275template"](13,CommunityListComponent_cdk_tree_node_6_ds_loading_13_Template,1,0,"ds-loading",0),core["\u0275\u0275pipe"](14,"async"),core["\u0275\u0275text"](15,"\n      "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](16,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](17,"\n    "),core["\u0275\u0275elementStart"](18,"div",12),core["\u0275\u0275text"](19,"\n      "),core["\u0275\u0275elementStart"](20,"div",13),core["\u0275\u0275text"](21,"\n      "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](22,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](23,"\n  "),core["\u0275\u0275elementEnd"]()),2&rf){const node_r4=ctx.$implicit,ctx_r1=core["\u0275\u0275nextContext"]();core["\u0275\u0275advance"](11),core["\u0275\u0275property"]("ngIf",node_r4!==ctx_r1.loadingNode),core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",core["\u0275\u0275pipeBind1"](14,2,node_r4===ctx_r1.loadingNode&&ctx_r1.dataSource.loading$))}}function CommunityListComponent_cdk_tree_node_9_div_21_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"div",13),core["\u0275\u0275text"](1,"\n          "),core["\u0275\u0275elementStart"](2,"button",23),core["\u0275\u0275text"](3,"\n            "),core["\u0275\u0275element"](4,"span",18),core["\u0275\u0275text"](5,"\n          "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](6,"\n          "),core["\u0275\u0275elementStart"](7,"ds-truncatable-part",24),core["\u0275\u0275text"](8,"\n            "),core["\u0275\u0275elementStart"](9,"span"),core["\u0275\u0275text"](10),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](11,"\n          "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](12,"\n        "),core["\u0275\u0275elementEnd"]()),2&rf){const node_r10=core["\u0275\u0275nextContext"]().$implicit;core["\u0275\u0275advance"](4),core["\u0275\u0275classMap"](node_r10.isExpanded?"fa fa-chevron-down":"fa fa-chevron-right"),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("id",node_r10.id)("minLines",3),core["\u0275\u0275advance"](3),core["\u0275\u0275textInterpolate"](node_r10.payload.shortDescription)}}function CommunityListComponent_cdk_tree_node_9_div_25_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"div",25),core["\u0275\u0275text"](1,"\n      "),core["\u0275\u0275elementStart"](2,"button",23),core["\u0275\u0275text"](3,"\n        "),core["\u0275\u0275element"](4,"span",18),core["\u0275\u0275text"](5,"\n      "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](6,"\n      "),core["\u0275\u0275element"](7,"ds-loading",5),core["\u0275\u0275text"](8,"\n    "),core["\u0275\u0275elementEnd"]()),2&rf){const node_r10=core["\u0275\u0275nextContext"]().$implicit;core["\u0275\u0275advance"](4),core["\u0275\u0275classMap"](node_r10.isExpanded?"fa fa-chevron-down":"fa fa-chevron-right")}}function CommunityListComponent_cdk_tree_node_9_Template(rf,ctx){if(1&rf){const _r16=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementStart"](0,"cdk-tree-node",16),core["\u0275\u0275text"](1,"\n    "),core["\u0275\u0275elementStart"](2,"div",7),core["\u0275\u0275text"](3,"\n      "),core["\u0275\u0275elementStart"](4,"button",17),core["\u0275\u0275listener"]("click",(function CommunityListComponent_cdk_tree_node_9_Template_button_click_4_listener(){core["\u0275\u0275restoreView"](_r16);const node_r10=ctx.$implicit;return core["\u0275\u0275nextContext"]().toggleExpanded(node_r10)})),core["\u0275\u0275pipe"](5,"async"),core["\u0275\u0275text"](6,"\n        "),core["\u0275\u0275element"](7,"span",18),core["\u0275\u0275text"](8,"\n      "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](9,"\n      "),core["\u0275\u0275elementStart"](10,"h5",10),core["\u0275\u0275text"](11,"\n        "),core["\u0275\u0275elementStart"](12,"a",19),core["\u0275\u0275text"](13),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](14,"\n      "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](15,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](16,"\n    "),core["\u0275\u0275elementStart"](17,"ds-truncatable",20),core["\u0275\u0275text"](18,"\n      "),core["\u0275\u0275elementStart"](19,"div",12),core["\u0275\u0275text"](20,"\n        "),core["\u0275\u0275template"](21,CommunityListComponent_cdk_tree_node_9_div_21_Template,13,6,"div",21),core["\u0275\u0275text"](22,"\n      "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](23,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](24,"\n    "),core["\u0275\u0275template"](25,CommunityListComponent_cdk_tree_node_9_div_25_Template,9,3,"div",22),core["\u0275\u0275pipe"](26,"async"),core["\u0275\u0275text"](27,"\n  "),core["\u0275\u0275elementEnd"]()}if(2&rf){const node_r10=ctx.$implicit,ctx_r2=core["\u0275\u0275nextContext"]();core["\u0275\u0275advance"](4),core["\u0275\u0275property"]("title","toggle "+node_r10.name)("ngClass",core["\u0275\u0275pipeBind1"](5,11,ctx_r2.hasChild(null,node_r10))?"visible":"invisible"),core["\u0275\u0275attribute"]("aria-label","toggle "+node_r10.name),core["\u0275\u0275advance"](3),core["\u0275\u0275classMap"](node_r10.isExpanded?"fa fa-chevron-down":"fa fa-chevron-right"),core["\u0275\u0275advance"](5),core["\u0275\u0275property"]("routerLink",node_r10.route),core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate1"]("\n          ",node_r10.name,"\n        "),core["\u0275\u0275advance"](4),core["\u0275\u0275property"]("id",node_r10.id),core["\u0275\u0275advance"](4),core["\u0275\u0275property"]("ngIf",node_r10.payload.shortDescription),core["\u0275\u0275advance"](4),core["\u0275\u0275property"]("ngIf",core["\u0275\u0275pipeBind1"](26,13,node_r10===ctx_r2.loadingNode&&ctx_r2.dataSource.loading$))}}function CommunityListComponent_cdk_tree_node_12_div_20_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"div",13),core["\u0275\u0275text"](1,"\n          "),core["\u0275\u0275elementStart"](2,"button",23),core["\u0275\u0275text"](3,"\n            "),core["\u0275\u0275element"](4,"span",18),core["\u0275\u0275text"](5,"\n          "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](6,"\n          "),core["\u0275\u0275elementStart"](7,"ds-truncatable-part",24),core["\u0275\u0275text"](8,"\n            "),core["\u0275\u0275elementStart"](9,"span"),core["\u0275\u0275text"](10),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](11,"\n          "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](12,"\n        "),core["\u0275\u0275elementEnd"]()),2&rf){const node_r17=core["\u0275\u0275nextContext"]().$implicit;core["\u0275\u0275advance"](4),core["\u0275\u0275classMap"](node_r17.isExpanded?"fa fa-chevron-down":"fa fa-chevron-right"),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("id",node_r17.id)("minLines",3),core["\u0275\u0275advance"](3),core["\u0275\u0275textInterpolate"](node_r17.payload.shortDescription)}}function CommunityListComponent_cdk_tree_node_12_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"cdk-tree-node",26),core["\u0275\u0275text"](1,"\n    "),core["\u0275\u0275elementStart"](2,"div",7),core["\u0275\u0275text"](3,"\n      "),core["\u0275\u0275elementStart"](4,"button",8),core["\u0275\u0275text"](5,"\n                "),core["\u0275\u0275element"](6,"span",9),core["\u0275\u0275text"](7,"\n      "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](8,"\n      "),core["\u0275\u0275elementStart"](9,"h6",10),core["\u0275\u0275text"](10,"\n        "),core["\u0275\u0275elementStart"](11,"a",19),core["\u0275\u0275text"](12),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](13,"\n      "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](14,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](15,"\n    "),core["\u0275\u0275elementStart"](16,"ds-truncatable",20),core["\u0275\u0275text"](17,"\n      "),core["\u0275\u0275elementStart"](18,"div",12),core["\u0275\u0275text"](19,"\n        "),core["\u0275\u0275template"](20,CommunityListComponent_cdk_tree_node_12_div_20_Template,13,6,"div",21),core["\u0275\u0275text"](21,"\n      "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](22,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](23,"\n  "),core["\u0275\u0275elementEnd"]()),2&rf){const node_r17=ctx.$implicit;core["\u0275\u0275advance"](11),core["\u0275\u0275property"]("routerLink",node_r17.route),core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate1"]("\n          ",node_r17.name,"\n        "),core["\u0275\u0275advance"](4),core["\u0275\u0275property"]("id",node_r17.id),core["\u0275\u0275advance"](4),core["\u0275\u0275property"]("ngIf",node_r17.payload.shortDescription)}}class community_list_component_CommunityListComponent{constructor(communityListService){this.communityListService=communityListService,this.expandedNodes=[],this.treeControl=new tree.g((node=>node.level),(node=>!0)),this.paginationConfig=new request_models.f,this.paginationConfig.elementsPerPage=2,this.paginationConfig.currentPage=1,this.paginationConfig.sort=new sort_options_model.b("dc.title",sort_options_model.a.ASC)}ngOnInit(){this.dataSource=new community_list_datasource_CommunityListDatasource(this.communityListService),this.communityListService.getLoadingNodeFromStore().pipe(Object(take.a)(1)).subscribe((result=>{this.loadingNode=result})),this.communityListService.getExpandedNodesFromStore().pipe(Object(take.a)(1)).subscribe((result=>{this.expandedNodes=[...result],this.dataSource.loadCommunities(this.paginationConfig,this.expandedNodes)}))}ngOnDestroy(){this.communityListService.saveCommunityListStateToStore(this.expandedNodes,this.loadingNode)}hasChild(_,node){return node.isExpandable$}isShowMore(_,node){return node.isShowMoreNode}toggleExpanded(node){this.loadingNode=node,node.isExpanded?(this.expandedNodes=this.expandedNodes.filter((node2=>node2.name!==node.name)),node.isExpanded=!1):(this.expandedNodes.push(node),node.isExpanded=!0,Object(empty_util.d)(node.currentCollectionPage)&&(node.currentCollectionPage=1),Object(empty_util.d)(node.currentCommunityPage)&&(node.currentCommunityPage=1)),this.dataSource.loadCommunities(this.paginationConfig,this.expandedNodes)}getNextPage(node){if(this.loadingNode=node,null!=node.parent){if("collection"===node.id){this.expandedNodes.find((node2=>node.parent.id===node2.id)).currentCollectionPage++}if("community"===node.id){this.expandedNodes.find((node2=>node.parent.id===node2.id)).currentCommunityPage++}this.dataSource.loadCommunities(this.paginationConfig,this.expandedNodes)}else this.paginationConfig.currentPage++,this.dataSource.loadCommunities(this.paginationConfig,this.expandedNodes)}}community_list_component_CommunityListComponent.\u0275fac=function CommunityListComponent_Factory(t){return new(t||community_list_component_CommunityListComponent)(core["\u0275\u0275directiveInject"](community_list_service.a))},community_list_component_CommunityListComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:community_list_component_CommunityListComponent,selectors:[["ds-community-list"]],decls:15,vars:8,consts:[["class","ds-loading",4,"ngIf"],[3,"dataSource","treeControl"],["cdkTreeNodePadding","","class","example-tree-node show-more-node",4,"cdkTreeNodeDef","cdkTreeNodeDefWhen"],["cdkTreeNodePadding","","class","example-tree-node expandable-node",4,"cdkTreeNodeDef","cdkTreeNodeDefWhen"],["cdkTreeNodePadding","","class","example-tree-node childless-node",4,"cdkTreeNodeDef","cdkTreeNodeDefWhen"],[1,"ds-loading"],["cdkTreeNodePadding","",1,"example-tree-node","show-more-node"],[1,"btn-group"],["type","button","cdkTreeNodeToggle","",1,"btn","btn-default"],["aria-hidden","true",1,"fa","fa-chevron-right","invisible"],[1,"align-middle","pt-2"],["class","btn btn-outline-primary btn-sm","role","button",3,"routerLink","click",4,"ngIf"],["cdkTreeNodePadding","",1,"text-muted"],[1,"d-flex"],["role","button",1,"btn","btn-outline-primary","btn-sm",3,"routerLink","click"],[1,"fas","fa-angle-down"],["cdkTreeNodePadding","",1,"example-tree-node","expandable-node"],["type","button","cdkTreeNodeToggle","",1,"btn","btn-default",3,"title","ngClass","click"],["aria-hidden","true"],[1,"lead",3,"routerLink"],[3,"id"],["class","d-flex",4,"ngIf"],["class","d-flex","cdkTreeNodePadding","",4,"ngIf"],["type","button",1,"btn","btn-default","invisible"],[3,"id","minLines"],["cdkTreeNodePadding","",1,"d-flex"],["cdkTreeNodePadding","",1,"example-tree-node","childless-node"]],template:function CommunityListComponent_Template(rf,ctx){1&rf&&(core["\u0275\u0275template"](0,CommunityListComponent_ds_loading_0_Template,1,0,"ds-loading",0),core["\u0275\u0275pipe"](1,"async"),core["\u0275\u0275text"](2,"\n"),core["\u0275\u0275elementStart"](3,"cdk-tree",1),core["\u0275\u0275text"](4,"\n  "),core["\u0275\u0275text"](5,"\n  "),core["\u0275\u0275template"](6,CommunityListComponent_cdk_tree_node_6_Template,24,4,"cdk-tree-node",2),core["\u0275\u0275text"](7,"\n  "),core["\u0275\u0275text"](8,"\n  "),core["\u0275\u0275template"](9,CommunityListComponent_cdk_tree_node_9_Template,28,15,"cdk-tree-node",3),core["\u0275\u0275text"](10,"\n  "),core["\u0275\u0275text"](11,"\n  "),core["\u0275\u0275template"](12,CommunityListComponent_cdk_tree_node_12_Template,24,4,"cdk-tree-node",4),core["\u0275\u0275text"](13,"\n"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](14,"\n")),2&rf&&(core["\u0275\u0275property"]("ngIf",core["\u0275\u0275pipeBind1"](1,6,ctx.dataSource.loading$)&&!ctx.loadingNode),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("dataSource",ctx.dataSource)("treeControl",ctx.treeControl),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("cdkTreeNodeDefWhen",ctx.isShowMore),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("cdkTreeNodeDefWhen",ctx.hasChild),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("cdkTreeNodeDefWhen",!(ctx.hasChild&&ctx.isShowMore)))},directives:[common.NgIf,tree.a,tree.d,loading_component.a,tree.c,tree.e,tree.f,router.j,common.NgClass,truncatable_component.a,truncatable_part_component.a],pipes:[common.AsyncPipe,ngx_translate_core.d],encapsulation:2})},A0IO:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return I18nBreadcrumbResolver}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),_i18n_breadcrumbs_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("tv3Y"),_shared_empty_util__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("J3qs"),_shared_utils_route_utils__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("q5u1");class I18nBreadcrumbResolver{constructor(breadcrumbService){this.breadcrumbService=breadcrumbService}resolve(route,state){const key=route.data.breadcrumbKey;if(Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_2__.a)(key))throw new Error('You provided an i18nBreadcrumbResolver for url "'+route.url+"\" but no breadcrumbKey in the route's data");const fullPath=Object(_shared_utils_route_utils__WEBPACK_IMPORTED_MODULE_3__.b)(route);return{provider:this.breadcrumbService,key:key,url:fullPath}}}I18nBreadcrumbResolver.\u0275fac=function I18nBreadcrumbResolver_Factory(t){return new(t||I18nBreadcrumbResolver)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275inject"](_i18n_breadcrumbs_service__WEBPACK_IMPORTED_MODULE_1__.a))},I18nBreadcrumbResolver.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineInjectable"]({token:I18nBreadcrumbResolver,factory:I18nBreadcrumbResolver.\u0275fac,providedIn:"root"})},KzCY:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"CommunityListPageModule",(function(){return CommunityListPageModule}));var common=__webpack_require__("ofXK"),core=__webpack_require__("fXoL"),shared_module=__webpack_require__("PCNd"),community_list_page_component=__webpack_require__("d0aS"),router=__webpack_require__("tyNb"),tree=__webpack_require__("FvrZ"),community_list_service=__webpack_require__("5sao"),themed_component=__webpack_require__("JTKQ");function ThemedCommunityListPageComponent_ng_template_0_Template(rf,ctx){}class themed_community_list_page_component_ThemedCommunityListPageComponent extends themed_component.a{getComponentName(){return"CommunityListPageComponent"}importThemedComponent(themeName){return __webpack_require__("exEh")(`./${themeName}/app/community-list-page/community-list-page.component`)}importUnthemedComponent(){return Promise.resolve().then(__webpack_require__.bind(null,"d0aS"))}}themed_community_list_page_component_ThemedCommunityListPageComponent.\u0275fac=function ThemedCommunityListPageComponent_Factory(t){return \u0275ThemedCommunityListPageComponent_BaseFactory(t||themed_community_list_page_component_ThemedCommunityListPageComponent)},themed_community_list_page_component_ThemedCommunityListPageComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:themed_community_list_page_component_ThemedCommunityListPageComponent,selectors:[["ds-themed-community-list-page"]],features:[core["\u0275\u0275InheritDefinitionFeature"]],decls:3,vars:0,consts:[["vcr",""]],template:function ThemedCommunityListPageComponent_Template(rf,ctx){1&rf&&(core["\u0275\u0275template"](0,ThemedCommunityListPageComponent_ng_template_0_Template,0,0,"ng-template",null,0,core["\u0275\u0275templateRefExtractor"]),core["\u0275\u0275text"](2,"\n"))},encapsulation:2});const \u0275ThemedCommunityListPageComponent_BaseFactory=core["\u0275\u0275getInheritedFactory"](themed_community_list_page_component_ThemedCommunityListPageComponent);var i18n_breadcrumb_resolver=__webpack_require__("A0IO");class CommunityListPageRoutingModule{}CommunityListPageRoutingModule.\u0275fac=function CommunityListPageRoutingModule_Factory(t){return new(t||CommunityListPageRoutingModule)},CommunityListPageRoutingModule.\u0275mod=core["\u0275\u0275defineNgModule"]({type:CommunityListPageRoutingModule}),CommunityListPageRoutingModule.\u0275inj=core["\u0275\u0275defineInjector"]({providers:[community_list_service.a],imports:[[router.k.forChild([{path:"",component:themed_community_list_page_component_ThemedCommunityListPageComponent,pathMatch:"full",resolve:{breadcrumb:i18n_breadcrumb_resolver.a},data:{title:"communityList.tabTitle",breadcrumbKey:"communityList"}}]),tree.b]]});var community_list_component=__webpack_require__("A/qm");community_list_page_component.CommunityListPageComponent,community_list_component.a;class CommunityListPageModule{}CommunityListPageModule.\u0275fac=function CommunityListPageModule_Factory(t){return new(t||CommunityListPageModule)},CommunityListPageModule.\u0275mod=core["\u0275\u0275defineNgModule"]({type:CommunityListPageModule}),CommunityListPageModule.\u0275inj=core["\u0275\u0275defineInjector"]({imports:[[common.CommonModule,shared_module.a,CommunityListPageRoutingModule]]})},d0aS:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"CommunityListPageComponent",(function(){return CommunityListPageComponent}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),_community_list_community_list_component__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("A/qm"),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("sYmb");class CommunityListPageComponent{}CommunityListPageComponent.\u0275fac=function CommunityListPageComponent_Factory(t){return new(t||CommunityListPageComponent)},CommunityListPageComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineComponent"]({type:CommunityListPageComponent,selectors:[["ds-community-list-page"]],decls:9,vars:3,consts:[[1,"container"]],template:function CommunityListPageComponent_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div",0),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](2,"h2"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](4,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](5,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](6,"ds-community-list"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](7,"\n"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](8,"\n")),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](4,1,"communityList.title")))},directives:[_community_list_community_list_component__WEBPACK_IMPORTED_MODULE_1__.a],pipes:[_ngx_translate_core__WEBPACK_IMPORTED_MODULE_2__.d],encapsulation:2})},exEh:function(module,exports,__webpack_require__){var map={"./custom/app/community-list-page/community-list-page.component":["hVQ3",37]};function webpackAsyncContext(req){if(!__webpack_require__.o(map,req))return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}));var ids=map[req],id=ids[0];return __webpack_require__.e(ids[1]).then((function(){return __webpack_require__(id)}))}webpackAsyncContext.keys=function webpackAsyncContextKeys(){return Object.keys(map)},webpackAsyncContext.id="exEh",module.exports=webpackAsyncContext},tv3Y:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return I18nBreadcrumbsService}));var _breadcrumbs_breadcrumb_breadcrumb_model__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("zr/d"),rxjs__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("LRne"),_angular_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("fXoL");class I18nBreadcrumbsService{getBreadcrumbs(key,url){return Object(rxjs__WEBPACK_IMPORTED_MODULE_1__.a)([new _breadcrumbs_breadcrumb_breadcrumb_model__WEBPACK_IMPORTED_MODULE_0__.a(key+".breadcrumbs",url)])}}I18nBreadcrumbsService.\u0275fac=function I18nBreadcrumbsService_Factory(t){return new(t||I18nBreadcrumbsService)},I18nBreadcrumbsService.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275defineInjectable"]({token:I18nBreadcrumbsService,factory:I18nBreadcrumbsService.\u0275fac,providedIn:"root"})},"zr/d":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return Breadcrumb}));class Breadcrumb{constructor(text,url){this.text=text,this.url=url}}}};