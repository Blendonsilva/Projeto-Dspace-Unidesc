exports.ids=[7],exports.modules={A0IO:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return I18nBreadcrumbResolver}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),_i18n_breadcrumbs_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("tv3Y"),_shared_empty_util__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("J3qs"),_shared_utils_route_utils__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("q5u1");class I18nBreadcrumbResolver{constructor(breadcrumbService){this.breadcrumbService=breadcrumbService}resolve(route,state){const key=route.data.breadcrumbKey;if(Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_2__.a)(key))throw new Error('You provided an i18nBreadcrumbResolver for url "'+route.url+"\" but no breadcrumbKey in the route's data");const fullPath=Object(_shared_utils_route_utils__WEBPACK_IMPORTED_MODULE_3__.b)(route);return{provider:this.breadcrumbService,key:key,url:fullPath}}}I18nBreadcrumbResolver.\u0275fac=function I18nBreadcrumbResolver_Factory(t){return new(t||I18nBreadcrumbResolver)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275inject"](_i18n_breadcrumbs_service__WEBPACK_IMPORTED_MODULE_1__.a))},I18nBreadcrumbResolver.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineInjectable"]({token:I18nBreadcrumbResolver,factory:I18nBreadcrumbResolver.\u0275fac,providedIn:"root"})},Ssd4:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return eperson_registration_service_EpersonRegistrationService}));var core=__webpack_require__("fXoL"),request_service=__webpack_require__("X/78"),hal_endpoint_service=__webpack_require__("uLZQ"),request_models=__webpack_require__("B/au"),filter=__webpack_require__("pLZG"),map=__webpack_require__("lJxs"),find=__webpack_require__("cBqT"),skipWhile=__webpack_require__("32Ea"),empty_util=__webpack_require__("J3qs"),registration_model=__webpack_require__("zBnI"),operators=__webpack_require__("1QIV"),response_models=__webpack_require__("Kvit");class registration_response_parsing_service_RegistrationResponseParsingService{parse(request,data){const payload=data.payload,registration=Object.assign(new registration_model.a,payload);return new response_models.c(data.statusCode,void 0,registration)}}registration_response_parsing_service_RegistrationResponseParsingService.\u0275fac=function RegistrationResponseParsingService_Factory(t){return new(t||registration_response_parsing_service_RegistrationResponseParsingService)},registration_response_parsing_service_RegistrationResponseParsingService.\u0275prov=core["\u0275\u0275defineInjectable"]({token:registration_response_parsing_service_RegistrationResponseParsingService,factory:registration_response_parsing_service_RegistrationResponseParsingService.\u0275fac,providedIn:"root"});var remote_data_build_service=__webpack_require__("7vy/");class eperson_registration_service_EpersonRegistrationService{constructor(requestService,rdbService,halService){this.requestService=requestService,this.rdbService=rdbService,this.halService=halService,this.linkPath="registrations",this.searchByTokenPath="/search/findByToken?token="}getRegistrationEndpoint(){return this.halService.getEndpoint(this.linkPath)}getTokenSearchEndpoint(token){return this.halService.getEndpoint(this.linkPath).pipe(Object(filter.a)((href=>Object(empty_util.e)(href))),Object(map.a)((href=>`${href}${this.searchByTokenPath}${token}`)))}registerEmail(email){const registration=new registration_model.a;registration.email=email;const requestId=this.requestService.generateRequestId();return this.getRegistrationEndpoint().pipe(Object(find.a)((href=>Object(empty_util.b)(href))),Object(map.a)((href=>{const request=new request_models.l(requestId,href,registration);this.requestService.send(request)}))).subscribe(),this.rdbService.buildFromRequestUUID(requestId).pipe(Object(operators.g)())}searchByToken(token){const requestId=this.requestService.generateRequestId(),href$=this.getTokenSearchEndpoint(token).pipe(Object(find.a)((href=>Object(empty_util.b)(href))));return href$.subscribe((href=>{const request=new request_models.g(requestId,href);Object.assign(request,{getResponseParser:()=>registration_response_parsing_service_RegistrationResponseParsingService}),this.requestService.send(request,!0)})),this.rdbService.buildSingle(href$).pipe(Object(skipWhile.a)((rd=>rd.isStale)),Object(operators.i)(),Object(map.a)((restResponse=>Object.assign(new registration_model.a,{email:restResponse.payload.email,token:token,user:restResponse.payload.user}))))}}eperson_registration_service_EpersonRegistrationService.\u0275fac=function EpersonRegistrationService_Factory(t){return new(t||eperson_registration_service_EpersonRegistrationService)(core["\u0275\u0275inject"](request_service.a),core["\u0275\u0275inject"](remote_data_build_service.a),core["\u0275\u0275inject"](hal_endpoint_service.a))},eperson_registration_service_EpersonRegistrationService.\u0275prov=core["\u0275\u0275defineInjectable"]({token:eperson_registration_service_EpersonRegistrationService,factory:eperson_registration_service_EpersonRegistrationService.\u0275fac,providedIn:"root"})},esCw:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"AccessControlModule",(function(){return AccessControlModule}));var common=__webpack_require__("ofXK"),core=__webpack_require__("fXoL"),fesm2015_router=__webpack_require__("tyNb"),shared_module=__webpack_require__("PCNd"),BehaviorSubject=__webpack_require__("2Vo4"),combineLatest=__webpack_require__("itXk"),switchMap=__webpack_require__("eIep"),map=__webpack_require__("lJxs"),take=__webpack_require__("IzEk"),paginated_list_model=__webpack_require__("f+Ev"),eperson_data_service=__webpack_require__("wLgS"),empty_util=__webpack_require__("J3qs"),notifications_service=__webpack_require__("lI3o"),pagination_component_options_model=__webpack_require__("7DXY");class EpersonDtoModel{}var feature_id=__webpack_require__("FU+A"),authorization_data_service=__webpack_require__("1mcE"),operators=__webpack_require__("1QIV"),confirmation_modal_component=__webpack_require__("Q8wr"),request_service=__webpack_require__("X/78"),page_info_model=__webpack_require__("oBfO"),pagination_service=__webpack_require__("MFUF"),ngx_translate_core=__webpack_require__("sYmb"),fesm2015_forms=__webpack_require__("3Pt+"),ng_bootstrap=__webpack_require__("1kSV"),fesm2015_core=__webpack_require__("e+Av"),of=__webpack_require__("LRne"),debounceTime=__webpack_require__("Kj3r"),group_data_service=__webpack_require__("YIpg"),eperson_model=__webpack_require__("Anbb"),form_builder_service=__webpack_require__("Q5/L"),auth_service=__webpack_require__("Vurf"),follow_link_config_model=__webpack_require__("84Zn");var eperson_registration_service=__webpack_require__("Ssd4"),form_component=__webpack_require__("hqmO"),loading_component=__webpack_require__("Frqi"),pagination_component=__webpack_require__("Exvd");function EPersonFormComponent_div_0_Template(rf,ctx){1&rf&&core["\u0275\u0275element"](0,"div")}function EPersonFormComponent_ng_template_3_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275text"](0,"\n  "),core["\u0275\u0275elementStart"](1,"h4"),core["\u0275\u0275text"](2),core["\u0275\u0275pipe"](3,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](4,"\n")),2&rf){const ctx_r2=core["\u0275\u0275nextContext"]();core["\u0275\u0275advance"](2),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](3,1,ctx_r2.messagePrefix+".create"))}}function EPersonFormComponent_ng_template_6_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275text"](0,"\n  "),core["\u0275\u0275elementStart"](1,"h4"),core["\u0275\u0275text"](2),core["\u0275\u0275pipe"](3,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](4,"\n")),2&rf){const ctx_r4=core["\u0275\u0275nextContext"]();core["\u0275\u0275advance"](2),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](3,1,ctx_r4.messagePrefix+".edit"))}}const _c0=function(a0){return{"d-none":a0}};function EPersonFormComponent_button_31_Template(rf,ctx){if(1&rf){const _r10=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementStart"](0,"button",17),core["\u0275\u0275listener"]("click",(function EPersonFormComponent_button_31_Template_button_click_0_listener(){core["\u0275\u0275restoreView"](_r10);return core["\u0275\u0275nextContext"]().impersonate()})),core["\u0275\u0275pipe"](1,"async"),core["\u0275\u0275text"](2,"\n      "),core["\u0275\u0275element"](3,"i",18),core["\u0275\u0275text"](4),core["\u0275\u0275pipe"](5,"translate"),core["\u0275\u0275elementEnd"]()}if(2&rf){const ctx_r5=core["\u0275\u0275nextContext"]();core["\u0275\u0275property"]("ngClass",core["\u0275\u0275pureFunction1"](6,_c0,!core["\u0275\u0275pipeBind1"](1,2,ctx_r5.canImpersonate$))),core["\u0275\u0275advance"](4),core["\u0275\u0275textInterpolate1"](" ",core["\u0275\u0275pipeBind1"](5,4,"admin.access-control.epeople.actions.impersonate"),"\n    ")}}function EPersonFormComponent_button_33_Template(rf,ctx){if(1&rf){const _r12=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementStart"](0,"button",19),core["\u0275\u0275listener"]("click",(function EPersonFormComponent_button_33_Template_button_click_0_listener(){core["\u0275\u0275restoreView"](_r12);return core["\u0275\u0275nextContext"]().stopImpersonating()})),core["\u0275\u0275text"](1,"\n      "),core["\u0275\u0275element"](2,"i",18),core["\u0275\u0275text"](3),core["\u0275\u0275pipe"](4,"translate"),core["\u0275\u0275elementEnd"]()}2&rf&&(core["\u0275\u0275advance"](3),core["\u0275\u0275textInterpolate1"](" ",core["\u0275\u0275pipeBind1"](4,1,"admin.access-control.epeople.actions.stop-impersonating"),"\n    "))}function EPersonFormComponent_ds_loading_44_Template(rf,ctx){1&rf&&core["\u0275\u0275element"](0,"ds-loading",20),2&rf&&core["\u0275\u0275property"]("showMessage",!1)}function EPersonFormComponent_div_46_ds_loading_6_Template(rf,ctx){1&rf&&core["\u0275\u0275element"](0,"ds-loading",20),2&rf&&core["\u0275\u0275property"]("showMessage",!1)}const _c1=function(a0){return[a0]};function EPersonFormComponent_div_46_ds_pagination_9_tr_28_Template(rf,ctx){if(1&rf){const _r19=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementStart"](0,"tr"),core["\u0275\u0275text"](1,"\n          "),core["\u0275\u0275elementStart"](2,"td",28),core["\u0275\u0275text"](3),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](4,"\n          "),core["\u0275\u0275elementStart"](5,"td",28),core["\u0275\u0275elementStart"](6,"a",29),core["\u0275\u0275listener"]("click",(function EPersonFormComponent_div_46_ds_pagination_9_tr_28_Template_a_click_6_listener(){core["\u0275\u0275restoreView"](_r19);const group_r17=ctx.$implicit;return core["\u0275\u0275nextContext"](3).groupsDataService.startEditingNewGroup(group_r17)})),core["\u0275\u0275text"](7),core["\u0275\u0275elementEnd"](),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](8,"\n          "),core["\u0275\u0275elementStart"](9,"td",28),core["\u0275\u0275text"](10),core["\u0275\u0275pipe"](11,"async"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](12,"\n        "),core["\u0275\u0275elementEnd"]()}if(2&rf){const group_r17=ctx.$implicit,ctx_r16=core["\u0275\u0275nextContext"](3);let tmp_3_0=null;core["\u0275\u0275advance"](3),core["\u0275\u0275textInterpolate"](group_r17.id),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("routerLink",core["\u0275\u0275pureFunction1"](6,_c1,ctx_r16.groupsDataService.getGroupEditPageRouterLink(group_r17))),core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate"](group_r17.name),core["\u0275\u0275advance"](3),core["\u0275\u0275textInterpolate"](null==(tmp_3_0=core["\u0275\u0275pipeBind1"](11,4,group_r17.object))||null==tmp_3_0.payload?null:tmp_3_0.payload.name)}}function EPersonFormComponent_div_46_ds_pagination_9_Template(rf,ctx){if(1&rf){const _r21=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementStart"](0,"ds-pagination",23),core["\u0275\u0275listener"]("pageChange",(function EPersonFormComponent_div_46_ds_pagination_9_Template_ds_pagination_pageChange_0_listener($event){core["\u0275\u0275restoreView"](_r21);return core["\u0275\u0275nextContext"](2).onPageChange($event)})),core["\u0275\u0275pipe"](1,"async"),core["\u0275\u0275pipe"](2,"async"),core["\u0275\u0275text"](3,"\n\n    "),core["\u0275\u0275elementStart"](4,"div",24),core["\u0275\u0275text"](5,"\n      "),core["\u0275\u0275elementStart"](6,"table",25),core["\u0275\u0275text"](7,"\n        "),core["\u0275\u0275elementStart"](8,"thead"),core["\u0275\u0275text"](9,"\n        "),core["\u0275\u0275elementStart"](10,"tr"),core["\u0275\u0275text"](11,"\n          "),core["\u0275\u0275elementStart"](12,"th",26),core["\u0275\u0275text"](13),core["\u0275\u0275pipe"](14,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](15,"\n          "),core["\u0275\u0275elementStart"](16,"th",26),core["\u0275\u0275text"](17),core["\u0275\u0275pipe"](18,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](19,"\n          "),core["\u0275\u0275elementStart"](20,"th",26),core["\u0275\u0275text"](21),core["\u0275\u0275pipe"](22,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](23,"\n        "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](24,"\n        "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](25,"\n        "),core["\u0275\u0275elementStart"](26,"tbody"),core["\u0275\u0275text"](27,"\n        "),core["\u0275\u0275template"](28,EPersonFormComponent_div_46_ds_pagination_9_tr_28_Template,13,8,"tr",27),core["\u0275\u0275pipe"](29,"async"),core["\u0275\u0275text"](30,"\n        "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](31,"\n      "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](32,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](33,"\n\n  "),core["\u0275\u0275elementEnd"]()}if(2&rf){const ctx_r14=core["\u0275\u0275nextContext"](2);let tmp_1_0=null,tmp_2_0=null,tmp_8_0=null;core["\u0275\u0275property"]("paginationOptions",ctx_r14.config)("pageInfoState",null==(tmp_1_0=core["\u0275\u0275pipeBind1"](1,9,ctx_r14.groups))?null:tmp_1_0.payload)("collectionSize",null==(tmp_2_0=core["\u0275\u0275pipeBind1"](2,11,ctx_r14.groups))||null==tmp_2_0.payload?null:tmp_2_0.payload.totalElements)("hideGear",!0)("hidePagerWhenSinglePage",!0),core["\u0275\u0275advance"](13),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](14,13,ctx_r14.messagePrefix+".table.id")),core["\u0275\u0275advance"](4),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](18,15,ctx_r14.messagePrefix+".table.name")),core["\u0275\u0275advance"](4),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](22,17,ctx_r14.messagePrefix+".table.collectionOrCommunity")),core["\u0275\u0275advance"](7),core["\u0275\u0275property"]("ngForOf",null==(tmp_8_0=core["\u0275\u0275pipeBind1"](29,19,ctx_r14.groups))||null==tmp_8_0.payload?null:tmp_8_0.payload.page)}}function EPersonFormComponent_div_46_div_12_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"div",30),core["\u0275\u0275text"](1,"\n    "),core["\u0275\u0275elementStart"](2,"div"),core["\u0275\u0275text"](3),core["\u0275\u0275pipe"](4,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](5,"\n    "),core["\u0275\u0275elementStart"](6,"div"),core["\u0275\u0275text"](7,"\n      "),core["\u0275\u0275elementStart"](8,"button",31),core["\u0275\u0275text"](9),core["\u0275\u0275pipe"](10,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](11,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](12,"\n  "),core["\u0275\u0275elementEnd"]()),2&rf){const ctx_r15=core["\u0275\u0275nextContext"](2);core["\u0275\u0275advance"](3),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](4,3,ctx_r15.messagePrefix+".memberOfNoGroups")),core["\u0275\u0275advance"](5),core["\u0275\u0275property"]("routerLink",core["\u0275\u0275pureFunction1"](7,_c1,ctx_r15.groupsDataService.getGroupRegistryRouterLink())),core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](10,5,ctx_r15.messagePrefix+".goToGroups"))}}function EPersonFormComponent_div_46_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"div"),core["\u0275\u0275text"](1,"\n  "),core["\u0275\u0275elementStart"](2,"h5"),core["\u0275\u0275text"](3),core["\u0275\u0275pipe"](4,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](5,"\n\n  "),core["\u0275\u0275template"](6,EPersonFormComponent_div_46_ds_loading_6_Template,1,1,"ds-loading",15),core["\u0275\u0275pipe"](7,"async"),core["\u0275\u0275text"](8,"\n\n  "),core["\u0275\u0275template"](9,EPersonFormComponent_div_46_ds_pagination_9_Template,34,21,"ds-pagination",21),core["\u0275\u0275pipe"](10,"async"),core["\u0275\u0275text"](11,"\n\n  "),core["\u0275\u0275template"](12,EPersonFormComponent_div_46_div_12_Template,13,9,"div",22),core["\u0275\u0275pipe"](13,"async"),core["\u0275\u0275text"](14,"\n"),core["\u0275\u0275elementEnd"]()),2&rf){const ctx_r8=core["\u0275\u0275nextContext"]();let tmp_2_0=null,tmp_3_0=null;core["\u0275\u0275advance"](3),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](4,4,ctx_r8.messagePrefix+".groupsEPersonIsMemberOf")),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("ngIf",!core["\u0275\u0275pipeBind1"](7,6,ctx_r8.groups)),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("ngIf",(null==(tmp_2_0=core["\u0275\u0275pipeBind1"](10,8,ctx_r8.groups))||null==tmp_2_0.payload?null:tmp_2_0.payload.totalElements)>0),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("ngIf",0==(null==(tmp_3_0=core["\u0275\u0275pipeBind1"](13,10,ctx_r8.groups))||null==tmp_3_0.payload?null:tmp_3_0.payload.totalElements))}}class eperson_form_component_EPersonFormComponent{constructor(changeDetectorRef,epersonService,groupsDataService,formBuilderService,translateService,notificationsService,authService,authorizationService,modalService,paginationService,requestService,epersonRegistrationService){this.changeDetectorRef=changeDetectorRef,this.epersonService=epersonService,this.groupsDataService=groupsDataService,this.formBuilderService=formBuilderService,this.translateService=translateService,this.notificationsService=notificationsService,this.authService=authService,this.authorizationService=authorizationService,this.modalService=modalService,this.paginationService=paginationService,this.requestService=requestService,this.epersonRegistrationService=epersonRegistrationService,this.labelPrefix="admin.access-control.epeople.form.",this.formId="eperson-form",this.messagePrefix="admin.access-control.epeople.form",this.formLayout={firstName:{grid:{host:"row"}},lastName:{grid:{host:"row"}},email:{grid:{host:"row"}},canLogIn:{grid:{host:"col col-sm-6 d-inline-block"}},requireCertificate:{grid:{host:"col col-sm-6 d-inline-block"}}},this.submitForm=new core.EventEmitter,this.cancelForm=new core.EventEmitter,this.subs=[],this.config=Object.assign(new pagination_component_options_model.a,{id:"gem",pageSize:5,currentPage:1}),this.isImpersonated=!1,this.subs.push(this.epersonService.getActiveEPerson().subscribe((eperson=>{this.epersonInitial=eperson,Object(empty_util.b)(eperson)&&(this.isImpersonated=this.authService.isImpersonatingUser(eperson.id))})))}ngOnInit(){this.initialisePage()}initialisePage(){Object(combineLatest.a)(this.translateService.get(`${this.messagePrefix}.firstName`),this.translateService.get(`${this.messagePrefix}.lastName`),this.translateService.get(`${this.messagePrefix}.email`),this.translateService.get(`${this.messagePrefix}.canLogIn`),this.translateService.get(`${this.messagePrefix}.requireCertificate`),this.translateService.get(`${this.messagePrefix}.emailHint`)).subscribe((([firstName,lastName,email,canLogIn,requireCertificate,emailHint])=>{this.firstName=new fesm2015_core.J({id:"firstName",label:firstName,name:"firstName",validators:{required:null},required:!0}),this.lastName=new fesm2015_core.J({id:"lastName",label:lastName,name:"lastName",validators:{required:null},required:!0}),this.email=new fesm2015_core.J({id:"email",label:email,name:"email",validators:{required:null,pattern:"^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$"},required:!0,errorMessages:{emailTaken:"error.validation.emailTaken",pattern:"error.validation.NotValidEmail"},hint:emailHint}),this.canLogIn=new fesm2015_core.r({id:"canLogIn",label:canLogIn,name:"canLogIn",value:null==this.epersonInitial||this.epersonInitial.canLogIn}),this.requireCertificate=new fesm2015_core.r({id:"requireCertificate",label:requireCertificate,name:"requireCertificate",value:null!=this.epersonInitial&&this.epersonInitial.requireCertificate}),this.formModel=[this.firstName,this.lastName,this.email,this.canLogIn,this.requireCertificate],this.formGroup=this.formBuilderService.createFormGroup(this.formModel),this.subs.push(this.epersonService.getActiveEPerson().subscribe((eperson=>{null!=eperson&&(this.groups=this.groupsDataService.findAllByHref(eperson._links.groups.href,{currentPage:1,elementsPerPage:this.config.pageSize})),this.formGroup.patchValue({firstName:null!=eperson?eperson.firstMetadataValue("eperson.firstname"):"",lastName:null!=eperson?eperson.firstMetadataValue("eperson.lastname"):"",email:null!=eperson?eperson.email:"",canLogIn:null==eperson||eperson.canLogIn,requireCertificate:null!=eperson&&eperson.requireCertificate}),null===eperson&&this.formGroup.controls.email&&(this.formGroup.controls.email.setAsyncValidators(class{static createValidator(ePersonDataService){return control=>ePersonDataService.getEPersonByEmail(control.value).pipe(Object(operators.i)(),Object(map.a)((res=>res.payload?{emailTaken:!0}:null)))}}.createValidator(this.epersonService)),this.emailValueChangeSubscribe=this.email.valueChanges.pipe(Object(debounceTime.a)(300)).subscribe((()=>{this.changeDetectorRef.detectChanges()})))})));const activeEPerson$=this.epersonService.getActiveEPerson();this.groups=activeEPerson$.pipe(Object(switchMap.a)((eperson=>Object(combineLatest.a)([Object(of.a)(eperson),this.paginationService.getFindListOptions(this.config.id,{currentPage:1,elementsPerPage:this.config.pageSize})]))),Object(switchMap.a)((([eperson,findListOptions])=>null!=eperson?this.groupsDataService.findAllByHref(eperson._links.groups.href,findListOptions,!0,!0,Object(follow_link_config_model.a)("object")):Object(of.a)(void 0)))),this.canImpersonate$=activeEPerson$.pipe(Object(switchMap.a)((eperson=>Object(empty_util.b)(eperson)?this.authorizationService.isAuthorized(feature_id.a.LoginOnBehalfOf,eperson.self):Object(of.a)(!1)))),this.canDelete$=activeEPerson$.pipe(Object(switchMap.a)((eperson=>this.authorizationService.isAuthorized(feature_id.a.CanDelete,Object(empty_util.b)(eperson)?eperson.self:void 0)))),this.canReset$=Object(of.a)(!0)}))}onCancel(){this.epersonService.cancelEditEPerson(),this.cancelForm.emit()}onSubmit(){this.epersonService.getActiveEPerson().pipe(Object(take.a)(1)).subscribe((ePerson=>{const values={metadata:{"eperson.firstname":[{value:this.firstName.value}],"eperson.lastname":[{value:this.lastName.value}]},email:this.email.value,canLogIn:this.canLogIn.value,requireCertificate:this.requireCertificate.value};null==ePerson?this.createNewEPerson(values):this.editEPerson(ePerson,values)}))}createNewEPerson(values){const ePersonToCreate=Object.assign(new eperson_model.a,values);this.epersonService.create(ePersonToCreate).pipe(Object(operators.g)()).subscribe((rd=>{rd.hasSucceeded?(this.notificationsService.success(this.translateService.get(this.labelPrefix+"notification.created.success",{name:ePersonToCreate.name})),this.submitForm.emit(ePersonToCreate)):(this.notificationsService.error(this.translateService.get(this.labelPrefix+"notification.created.failure",{name:ePersonToCreate.name})),this.cancelForm.emit())})),this.showNotificationIfEmailInUse(ePersonToCreate,"created")}editEPerson(ePerson,values){const editedEperson=Object.assign(new eperson_model.a,{id:ePerson.id,metadata:{"eperson.firstname":[{value:this.firstName.value?this.firstName.value:ePerson.firstMetadataValue("eperson.firstname")}],"eperson.lastname":[{value:this.lastName.value?this.lastName.value:ePerson.firstMetadataValue("eperson.lastname")}]},email:Object(empty_util.b)(values.email)?values.email:ePerson.email,canLogIn:Object(empty_util.b)(values.canLogIn)?values.canLogIn:ePerson.canLogIn,requireCertificate:Object(empty_util.b)(values.requireCertificate)?values.requireCertificate:ePerson.requireCertificate,_links:ePerson._links});this.epersonService.updateEPerson(editedEperson).pipe(Object(operators.g)()).subscribe((rd=>{rd.hasSucceeded?(this.notificationsService.success(this.translateService.get(this.labelPrefix+"notification.edited.success",{name:editedEperson.name})),this.submitForm.emit(editedEperson)):(this.notificationsService.error(this.translateService.get(this.labelPrefix+"notification.edited.failure",{name:editedEperson.name})),this.cancelForm.emit())})),null!=values.email&&values.email!==ePerson.email&&this.showNotificationIfEmailInUse(editedEperson,"edited")}onPageChange(event){this.updateGroups({currentPage:event,elementsPerPage:this.config.pageSize})}impersonate(){this.authService.impersonate(this.epersonInitial.id),this.isImpersonated=!0}delete(){this.epersonService.getActiveEPerson().pipe(Object(take.a)(1)).subscribe((eperson=>{const modalRef=this.modalService.open(confirmation_modal_component.a);modalRef.componentInstance.dso=eperson,modalRef.componentInstance.headerLabel="confirmation-modal.delete-eperson.header",modalRef.componentInstance.infoLabel="confirmation-modal.delete-eperson.info",modalRef.componentInstance.cancelLabel="confirmation-modal.delete-eperson.cancel",modalRef.componentInstance.confirmLabel="confirmation-modal.delete-eperson.confirm",modalRef.componentInstance.brandColor="danger",modalRef.componentInstance.confirmIcon="fas fa-trash",modalRef.componentInstance.response.pipe(Object(take.a)(1)).subscribe((confirm=>{confirm&&Object(empty_util.b)(eperson.id)&&this.epersonService.deleteEPerson(eperson).pipe(Object(operators.g)()).subscribe((restResponse=>{restResponse.hasSucceeded?(this.notificationsService.success(this.translateService.get(this.labelPrefix+"notification.deleted.success",{name:eperson.name})),this.submitForm.emit()):this.notificationsService.error("Error occured when trying to delete EPerson with id: "+eperson.id+" with code: "+restResponse.statusCode+" and message: "+restResponse.errorMessage),this.cancelForm.emit()}))}))}))}stopImpersonating(){this.authService.stopImpersonatingAndRefresh(),this.isImpersonated=!1}resetPassword(){Object(empty_util.b)(this.epersonInitial.email)&&this.epersonRegistrationService.registerEmail(this.epersonInitial.email).pipe(Object(operators.g)()).subscribe((response=>{response.hasSucceeded?this.notificationsService.success(this.translateService.get("admin.access-control.epeople.actions.reset"),this.translateService.get("forgot-email.form.success.content",{email:this.epersonInitial.email})):this.notificationsService.error(this.translateService.get("forgot-email.form.error.head"),this.translateService.get("forgot-email.form.error.content",{email:this.epersonInitial.email}))}))}ngOnDestroy(){this.onCancel(),this.subs.filter((sub=>Object(empty_util.b)(sub))).forEach((sub=>sub.unsubscribe())),this.paginationService.clearPagination(this.config.id),Object(empty_util.b)(this.emailValueChangeSubscribe)&&this.emailValueChangeSubscribe.unsubscribe()}reset(){this.epersonService.getActiveEPerson().pipe(Object(take.a)(1)).subscribe((eperson=>{this.requestService.removeByHrefSubstring(eperson.self)})),this.initialisePage()}showNotificationIfEmailInUse(ePerson,notificationSection){this.subs.push(this.epersonService.searchByScope("email",ePerson.email,{currentPage:1,elementsPerPage:0}).pipe(Object(operators.i)(),Object(operators.o)()).subscribe((list=>{list.totalElements>0&&this.notificationsService.error(this.translateService.get(this.labelPrefix+"notification."+notificationSection+".failure.emailInUse",{name:ePerson.name,email:ePerson.email}))})))}updateGroups(options){this.subs.push(this.epersonService.getActiveEPerson().subscribe((eperson=>{this.groups=this.groupsDataService.findAllByHref(eperson._links.groups.href,options)})))}}function EPeopleRegistryComponent_div_12_Template(rf,ctx){if(1&rf){const _r4=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementStart"](0,"div"),core["\u0275\u0275text"](1,"\n          "),core["\u0275\u0275elementStart"](2,"button",7),core["\u0275\u0275listener"]("click",(function EPeopleRegistryComponent_div_12_Template_button_click_2_listener(){core["\u0275\u0275restoreView"](_r4);return core["\u0275\u0275nextContext"]().isEPersonFormShown=!0})),core["\u0275\u0275text"](3,"\n            "),core["\u0275\u0275element"](4,"i",8),core["\u0275\u0275text"](5,"\n            "),core["\u0275\u0275elementStart"](6,"span",9),core["\u0275\u0275text"](7),core["\u0275\u0275pipe"](8,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](9,"\n          "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](10,"\n        "),core["\u0275\u0275elementEnd"]()}if(2&rf){const ctx_r0=core["\u0275\u0275nextContext"]();core["\u0275\u0275advance"](7),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](8,1,ctx_r0.labelPrefix+"button.add"))}}function EPeopleRegistryComponent_ds_eperson_form_15_Template(rf,ctx){if(1&rf){const _r6=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementStart"](0,"ds-eperson-form",10),core["\u0275\u0275listener"]("submitForm",(function EPeopleRegistryComponent_ds_eperson_form_15_Template_ds_eperson_form_submitForm_0_listener(){core["\u0275\u0275restoreView"](_r6);return core["\u0275\u0275nextContext"]().reset()}))("cancelForm",(function EPeopleRegistryComponent_ds_eperson_form_15_Template_ds_eperson_form_cancelForm_0_listener(){core["\u0275\u0275restoreView"](_r6);return core["\u0275\u0275nextContext"]().isEPersonFormShown=!1})),core["\u0275\u0275elementEnd"]()}}function EPeopleRegistryComponent_div_17_ds_loading_49_Template(rf,ctx){1&rf&&core["\u0275\u0275element"](0,"ds-loading")}eperson_form_component_EPersonFormComponent.\u0275fac=function EPersonFormComponent_Factory(t){return new(t||eperson_form_component_EPersonFormComponent)(core["\u0275\u0275directiveInject"](core.ChangeDetectorRef),core["\u0275\u0275directiveInject"](eperson_data_service.a),core["\u0275\u0275directiveInject"](group_data_service.a),core["\u0275\u0275directiveInject"](form_builder_service.a),core["\u0275\u0275directiveInject"](ngx_translate_core.e),core["\u0275\u0275directiveInject"](notifications_service.a),core["\u0275\u0275directiveInject"](auth_service.a),core["\u0275\u0275directiveInject"](authorization_data_service.a),core["\u0275\u0275directiveInject"](ng_bootstrap.q),core["\u0275\u0275directiveInject"](pagination_service.a),core["\u0275\u0275directiveInject"](request_service.a),core["\u0275\u0275directiveInject"](eperson_registration_service.a))},eperson_form_component_EPersonFormComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:eperson_form_component_EPersonFormComponent,selectors:[["ds-eperson-form"]],outputs:{submitForm:"submitForm",cancelForm:"cancelForm"},decls:49,vars:31,consts:[[4,"ngIf","ngIfThen","ngIfElse"],["createHeader",""],["editheader",""],[3,"formId","formModel","formGroup","formLayout","displayCancel","submitForm"],["before","",1,"btn-group"],[1,"btn","btn-outline-secondary",3,"click"],[1,"fas","fa-arrow-left"],["between","",1,"btn-group"],[1,"btn","btn-primary",3,"disabled","click"],[1,"fa","fa-key"],["between","",1,"btn-group","ml-1"],["class","btn btn-primary",3,"ngClass","click",4,"ngIf"],["class","btn btn-primary",3,"click",4,"ngIf"],["after","",1,"btn","btn-danger","delete-button",3,"disabled","click"],[1,"fas","fa-trash"],[3,"showMessage",4,"ngIf"],[4,"ngIf"],[1,"btn","btn-primary",3,"ngClass","click"],[1,"fa","fa-user-secret"],[1,"btn","btn-primary",3,"click"],[3,"showMessage"],[3,"paginationOptions","pageInfoState","collectionSize","hideGear","hidePagerWhenSinglePage","pageChange",4,"ngIf"],["class","alert alert-info w-100 mb-2","role","alert",4,"ngIf"],[3,"paginationOptions","pageInfoState","collectionSize","hideGear","hidePagerWhenSinglePage","pageChange"],[1,"table-responsive"],["id","groups",1,"table","table-striped","table-hover","table-bordered"],["scope","col",1,"align-middle"],[4,"ngFor","ngForOf"],[1,"align-middle"],[3,"routerLink","click"],["role","alert",1,"alert","alert-info","w-100","mb-2"],[1,"btn","btn-primary",3,"routerLink"]],template:function EPersonFormComponent_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275template"](0,EPersonFormComponent_div_0_Template,1,0,"div",0),core["\u0275\u0275pipe"](1,"async"),core["\u0275\u0275text"](2,"\n\n"),core["\u0275\u0275template"](3,EPersonFormComponent_ng_template_3_Template,5,3,"ng-template",null,1,core["\u0275\u0275templateRefExtractor"]),core["\u0275\u0275text"](5,"\n\n"),core["\u0275\u0275template"](6,EPersonFormComponent_ng_template_6_Template,5,3,"ng-template",null,2,core["\u0275\u0275templateRefExtractor"]),core["\u0275\u0275text"](8,"\n\n"),core["\u0275\u0275elementStart"](9,"ds-form",3),core["\u0275\u0275listener"]("submitForm",(function EPersonFormComponent_Template_ds_form_submitForm_9_listener(){return ctx.onSubmit()})),core["\u0275\u0275text"](10,"\n  "),core["\u0275\u0275elementStart"](11,"div",4),core["\u0275\u0275text"](12,"\n    "),core["\u0275\u0275elementStart"](13,"button",5),core["\u0275\u0275listener"]("click",(function EPersonFormComponent_Template_button_click_13_listener(){return ctx.onCancel()})),core["\u0275\u0275element"](14,"i",6),core["\u0275\u0275text"](15),core["\u0275\u0275pipe"](16,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](17,"\n  "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](18,"\n  "),core["\u0275\u0275elementStart"](19,"div",7),core["\u0275\u0275text"](20,"\n    "),core["\u0275\u0275elementStart"](21,"button",8),core["\u0275\u0275listener"]("click",(function EPersonFormComponent_Template_button_click_21_listener(){return ctx.resetPassword()})),core["\u0275\u0275pipe"](22,"async"),core["\u0275\u0275text"](23,"\n      "),core["\u0275\u0275element"](24,"i",9),core["\u0275\u0275text"](25),core["\u0275\u0275pipe"](26,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](27,"\n  "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](28,"\n  "),core["\u0275\u0275elementStart"](29,"div",10),core["\u0275\u0275text"](30,"\n    "),core["\u0275\u0275template"](31,EPersonFormComponent_button_31_Template,6,8,"button",11),core["\u0275\u0275text"](32,"\n    "),core["\u0275\u0275template"](33,EPersonFormComponent_button_33_Template,5,3,"button",12),core["\u0275\u0275text"](34,"\n  "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](35,"\n  "),core["\u0275\u0275elementStart"](36,"button",13),core["\u0275\u0275listener"]("click",(function EPersonFormComponent_Template_button_click_36_listener(){return ctx.delete()})),core["\u0275\u0275pipe"](37,"async"),core["\u0275\u0275text"](38,"\n    "),core["\u0275\u0275element"](39,"i",14),core["\u0275\u0275text"](40),core["\u0275\u0275pipe"](41,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](42,"\n"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](43,"\n\n"),core["\u0275\u0275template"](44,EPersonFormComponent_ds_loading_44_Template,1,1,"ds-loading",15),core["\u0275\u0275text"](45,"\n\n"),core["\u0275\u0275template"](46,EPersonFormComponent_div_46_Template,15,12,"div",16),core["\u0275\u0275pipe"](47,"async"),core["\u0275\u0275text"](48,"\n")),2&rf){const _r1=core["\u0275\u0275reference"](4),_r3=core["\u0275\u0275reference"](7);core["\u0275\u0275property"]("ngIf",core["\u0275\u0275pipeBind1"](1,17,ctx.epersonService.getActiveEPerson()))("ngIfThen",_r3)("ngIfElse",_r1),core["\u0275\u0275advance"](9),core["\u0275\u0275property"]("formId",ctx.formId)("formModel",ctx.formModel)("formGroup",ctx.formGroup)("formLayout",ctx.formLayout)("displayCancel",!1),core["\u0275\u0275advance"](6),core["\u0275\u0275textInterpolate1"](" ",core["\u0275\u0275pipeBind1"](16,19,ctx.messagePrefix+".return"),""),core["\u0275\u0275advance"](6),core["\u0275\u0275property"]("disabled",!core["\u0275\u0275pipeBind1"](22,21,ctx.canReset$)),core["\u0275\u0275advance"](4),core["\u0275\u0275textInterpolate1"](" ",core["\u0275\u0275pipeBind1"](26,23,"admin.access-control.epeople.actions.reset"),"\n    "),core["\u0275\u0275advance"](6),core["\u0275\u0275property"]("ngIf",!ctx.isImpersonated),core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",ctx.isImpersonated),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("disabled",!core["\u0275\u0275pipeBind1"](37,25,ctx.canDelete$)),core["\u0275\u0275advance"](4),core["\u0275\u0275textInterpolate1"](" ",core["\u0275\u0275pipeBind1"](41,27,"admin.access-control.epeople.actions.delete"),"\n  "),core["\u0275\u0275advance"](4),core["\u0275\u0275property"]("ngIf",!ctx.formGroup),core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",core["\u0275\u0275pipeBind1"](47,29,ctx.epersonService.getActiveEPerson()))}},directives:[common.NgIf,form_component.a,fesm2015_forms.NgControlStatusGroup,fesm2015_forms.FormGroupDirective,common.NgClass,loading_component.a,pagination_component.a,common.NgForOf,fesm2015_router.j,fesm2015_router.h],pipes:[common.AsyncPipe,ngx_translate_core.d],encapsulation:2});const epeople_registry_component_c0=function(a0){return{"table-primary":a0}},epeople_registry_component_c1=function(a0){return{name:a0}};function EPeopleRegistryComponent_div_17_ds_pagination_52_tr_31_Template(rf,ctx){if(1&rf){const _r14=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementStart"](0,"tr",30),core["\u0275\u0275pipe"](1,"async"),core["\u0275\u0275text"](2,"\n                "),core["\u0275\u0275elementStart"](3,"td"),core["\u0275\u0275text"](4),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](5,"\n                "),core["\u0275\u0275elementStart"](6,"td"),core["\u0275\u0275text"](7),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](8,"\n                "),core["\u0275\u0275elementStart"](9,"td"),core["\u0275\u0275text"](10),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](11,"\n                "),core["\u0275\u0275elementStart"](12,"td"),core["\u0275\u0275text"](13,"\n                  "),core["\u0275\u0275elementStart"](14,"div",31),core["\u0275\u0275text"](15,"\n                    "),core["\u0275\u0275elementStart"](16,"button",32),core["\u0275\u0275listener"]("click",(function EPeopleRegistryComponent_div_17_ds_pagination_52_tr_31_Template_button_click_16_listener(){core["\u0275\u0275restoreView"](_r14);const epersonDto_r12=ctx.$implicit;return core["\u0275\u0275nextContext"](3).toggleEditEPerson(epersonDto_r12.eperson)})),core["\u0275\u0275pipe"](17,"translate"),core["\u0275\u0275text"](18,"\n                      "),core["\u0275\u0275element"](19,"i",33),core["\u0275\u0275text"](20,"\n                    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](21,"\n                    "),core["\u0275\u0275elementStart"](22,"button",34),core["\u0275\u0275listener"]("click",(function EPeopleRegistryComponent_div_17_ds_pagination_52_tr_31_Template_button_click_22_listener(){core["\u0275\u0275restoreView"](_r14);const epersonDto_r12=ctx.$implicit;return core["\u0275\u0275nextContext"](3).deleteEPerson(epersonDto_r12.eperson)})),core["\u0275\u0275pipe"](23,"translate"),core["\u0275\u0275text"](24,"\n                      "),core["\u0275\u0275element"](25,"i",35),core["\u0275\u0275text"](26,"\n                    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](27,"\n                  "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](28,"\n                "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](29,"\n              "),core["\u0275\u0275elementEnd"]()}if(2&rf){const epersonDto_r12=ctx.$implicit,ctx_r11=core["\u0275\u0275nextContext"](3);core["\u0275\u0275property"]("ngClass",core["\u0275\u0275pureFunction1"](15,epeople_registry_component_c0,core["\u0275\u0275pipeBind1"](1,7,ctx_r11.isActive(epersonDto_r12.eperson)))),core["\u0275\u0275advance"](4),core["\u0275\u0275textInterpolate"](epersonDto_r12.eperson.id),core["\u0275\u0275advance"](3),core["\u0275\u0275textInterpolate"](epersonDto_r12.eperson.name),core["\u0275\u0275advance"](3),core["\u0275\u0275textInterpolate"](epersonDto_r12.eperson.email),core["\u0275\u0275advance"](6),core["\u0275\u0275propertyInterpolate"]("title",core["\u0275\u0275pipeBind2"](17,9,ctx_r11.labelPrefix+"table.edit.buttons.edit",core["\u0275\u0275pureFunction1"](17,epeople_registry_component_c1,epersonDto_r12.eperson.name))),core["\u0275\u0275advance"](6),core["\u0275\u0275propertyInterpolate"]("title",core["\u0275\u0275pipeBind2"](23,12,ctx_r11.labelPrefix+"table.edit.buttons.remove",core["\u0275\u0275pureFunction1"](19,epeople_registry_component_c1,epersonDto_r12.eperson.name))),core["\u0275\u0275property"]("disabled",!epersonDto_r12.ableToDelete)}}function EPeopleRegistryComponent_div_17_ds_pagination_52_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"ds-pagination",25),core["\u0275\u0275pipe"](1,"async"),core["\u0275\u0275text"](2,"\n\n          "),core["\u0275\u0275elementStart"](3,"div",26),core["\u0275\u0275text"](4,"\n            "),core["\u0275\u0275elementStart"](5,"table",27),core["\u0275\u0275text"](6,"\n              "),core["\u0275\u0275elementStart"](7,"thead"),core["\u0275\u0275text"](8,"\n              "),core["\u0275\u0275elementStart"](9,"tr"),core["\u0275\u0275text"](10,"\n                "),core["\u0275\u0275elementStart"](11,"th",28),core["\u0275\u0275text"](12),core["\u0275\u0275pipe"](13,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](14,"\n                "),core["\u0275\u0275elementStart"](15,"th",28),core["\u0275\u0275text"](16),core["\u0275\u0275pipe"](17,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](18,"\n                "),core["\u0275\u0275elementStart"](19,"th",28),core["\u0275\u0275text"](20),core["\u0275\u0275pipe"](21,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](22,"\n                "),core["\u0275\u0275elementStart"](23,"th"),core["\u0275\u0275text"](24),core["\u0275\u0275pipe"](25,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](26,"\n              "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](27,"\n              "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](28,"\n              "),core["\u0275\u0275elementStart"](29,"tbody"),core["\u0275\u0275text"](30,"\n              "),core["\u0275\u0275template"](31,EPeopleRegistryComponent_div_17_ds_pagination_52_tr_31_Template,30,21,"tr",29),core["\u0275\u0275pipe"](32,"async"),core["\u0275\u0275text"](33,"\n              "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](34,"\n            "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](35,"\n          "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](36,"\n\n        "),core["\u0275\u0275elementEnd"]()),2&rf){const ctx_r9=core["\u0275\u0275nextContext"](2);let tmp_2_0=null,tmp_9_0=null;core["\u0275\u0275property"]("paginationOptions",ctx_r9.config)("pageInfoState",ctx_r9.pageInfoState$)("collectionSize",null==(tmp_2_0=core["\u0275\u0275pipeBind1"](1,10,ctx_r9.pageInfoState$))?null:tmp_2_0.totalElements)("hideGear",!0)("hidePagerWhenSinglePage",!0),core["\u0275\u0275advance"](12),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](13,12,ctx_r9.labelPrefix+"table.id")),core["\u0275\u0275advance"](4),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](17,14,ctx_r9.labelPrefix+"table.name")),core["\u0275\u0275advance"](4),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](21,16,ctx_r9.labelPrefix+"table.email")),core["\u0275\u0275advance"](4),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](25,18,ctx_r9.labelPrefix+"table.edit")),core["\u0275\u0275advance"](7),core["\u0275\u0275property"]("ngForOf",null==(tmp_9_0=core["\u0275\u0275pipeBind1"](32,20,ctx_r9.ePeopleDto$))?null:tmp_9_0.page)}}function EPeopleRegistryComponent_div_17_div_56_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"div",36),core["\u0275\u0275text"](1),core["\u0275\u0275pipe"](2,"translate"),core["\u0275\u0275elementEnd"]()),2&rf){const ctx_r10=core["\u0275\u0275nextContext"](2);core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate1"]("\n          ",core["\u0275\u0275pipeBind1"](2,1,ctx_r10.labelPrefix+"no-items"),"\n        ")}}function EPeopleRegistryComponent_div_17_Template(rf,ctx){if(1&rf){const _r17=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementStart"](0,"div"),core["\u0275\u0275text"](1,"\n        "),core["\u0275\u0275elementStart"](2,"h3",11),core["\u0275\u0275text"](3),core["\u0275\u0275pipe"](4,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](5,"\n        "),core["\u0275\u0275elementStart"](6,"form",12),core["\u0275\u0275listener"]("ngSubmit",(function EPeopleRegistryComponent_div_17_Template_form_ngSubmit_6_listener(){core["\u0275\u0275restoreView"](_r17);const ctx_r16=core["\u0275\u0275nextContext"]();return ctx_r16.search(ctx_r16.searchForm.value)})),core["\u0275\u0275text"](7,"\n          "),core["\u0275\u0275elementStart"](8,"div"),core["\u0275\u0275text"](9,"\n            "),core["\u0275\u0275elementStart"](10,"select",13),core["\u0275\u0275text"](11,"\n              "),core["\u0275\u0275elementStart"](12,"option",14),core["\u0275\u0275text"](13),core["\u0275\u0275pipe"](14,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](15,"\n              "),core["\u0275\u0275elementStart"](16,"option",15),core["\u0275\u0275text"](17),core["\u0275\u0275pipe"](18,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](19,"\n            "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](20,"\n          "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](21,"\n          "),core["\u0275\u0275elementStart"](22,"div",16),core["\u0275\u0275text"](23,"\n            "),core["\u0275\u0275elementStart"](24,"div",17),core["\u0275\u0275text"](25,"\n              "),core["\u0275\u0275element"](26,"input",18),core["\u0275\u0275pipe"](27,"translate"),core["\u0275\u0275pipe"](28,"translate"),core["\u0275\u0275text"](29,"\n              "),core["\u0275\u0275elementStart"](30,"span",19),core["\u0275\u0275text"](31,"\n                "),core["\u0275\u0275elementStart"](32,"button",20),core["\u0275\u0275text"](33,"\n                  "),core["\u0275\u0275element"](34,"i",21),core["\u0275\u0275text"](35),core["\u0275\u0275pipe"](36,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](37,"\n              "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](38,"\n            "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](39,"\n          "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](40,"\n          "),core["\u0275\u0275elementStart"](41,"div"),core["\u0275\u0275text"](42,"\n            "),core["\u0275\u0275elementStart"](43,"button",22),core["\u0275\u0275listener"]("click",(function EPeopleRegistryComponent_div_17_Template_button_click_43_listener(){core["\u0275\u0275restoreView"](_r17);return core["\u0275\u0275nextContext"]().clearFormAndResetResult()})),core["\u0275\u0275text"](44),core["\u0275\u0275pipe"](45,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](46,"\n          "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](47,"\n        "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](48,"\n\n        "),core["\u0275\u0275template"](49,EPeopleRegistryComponent_div_17_ds_loading_49_Template,1,0,"ds-loading",5),core["\u0275\u0275pipe"](50,"async"),core["\u0275\u0275text"](51,"\n        "),core["\u0275\u0275template"](52,EPeopleRegistryComponent_div_17_ds_pagination_52_Template,37,22,"ds-pagination",23),core["\u0275\u0275pipe"](53,"async"),core["\u0275\u0275pipe"](54,"async"),core["\u0275\u0275text"](55,"\n\n        "),core["\u0275\u0275template"](56,EPeopleRegistryComponent_div_17_div_56_Template,3,3,"div",24),core["\u0275\u0275pipe"](57,"async"),core["\u0275\u0275text"](58,"\n      "),core["\u0275\u0275elementEnd"]()}if(2&rf){const ctx_r2=core["\u0275\u0275nextContext"]();let tmp_9_0=null,tmp_10_0=null;core["\u0275\u0275advance"](3),core["\u0275\u0275textInterpolate1"]("",core["\u0275\u0275pipeBind1"](4,11,ctx_r2.labelPrefix+"search.head"),"\n\n        "),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("formGroup",ctx_r2.searchForm),core["\u0275\u0275advance"](7),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](14,13,ctx_r2.labelPrefix+"search.scope.metadata")),core["\u0275\u0275advance"](4),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](18,15,ctx_r2.labelPrefix+"search.scope.email")),core["\u0275\u0275advance"](9),core["\u0275\u0275property"]("placeholder",core["\u0275\u0275pipeBind1"](28,19,ctx_r2.labelPrefix+"search.placeholder")),core["\u0275\u0275attribute"]("aria-label",core["\u0275\u0275pipeBind1"](27,17,ctx_r2.labelPrefix+"search.placeholder")),core["\u0275\u0275advance"](9),core["\u0275\u0275textInterpolate1"](" ",core["\u0275\u0275pipeBind1"](36,21,ctx_r2.labelPrefix+"search.button"),"\n                "),core["\u0275\u0275advance"](9),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](45,23,ctx_r2.labelPrefix+"button.see-all")),core["\u0275\u0275advance"](5),core["\u0275\u0275property"]("ngIf",core["\u0275\u0275pipeBind1"](50,25,ctx_r2.searching$)),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("ngIf",(null==(tmp_9_0=core["\u0275\u0275pipeBind1"](53,27,ctx_r2.pageInfoState$))?null:tmp_9_0.totalElements)>0&&!core["\u0275\u0275pipeBind1"](54,29,ctx_r2.searching$)),core["\u0275\u0275advance"](4),core["\u0275\u0275property"]("ngIf",0==(null==(tmp_10_0=core["\u0275\u0275pipeBind1"](57,31,ctx_r2.pageInfoState$))?null:tmp_10_0.totalElements))}}class epeople_registry_component_EPeopleRegistryComponent{constructor(epersonService,translateService,notificationsService,authorizationService,formBuilder,router,modalService,paginationService,requestService){this.epersonService=epersonService,this.translateService=translateService,this.notificationsService=notificationsService,this.authorizationService=authorizationService,this.formBuilder=formBuilder,this.router=router,this.modalService=modalService,this.paginationService=paginationService,this.requestService=requestService,this.labelPrefix="admin.access-control.epeople.",this.ePeople$=new BehaviorSubject.a(Object(paginated_list_model.b)(new page_info_model.a,[])),this.ePeopleDto$=new BehaviorSubject.a({}),this.pageInfoState$=new BehaviorSubject.a(void 0),this.searching$=new BehaviorSubject.a(!1),this.config=Object.assign(new pagination_component_options_model.a,{id:"elp",pageSize:5,currentPage:1}),this.subs=[],this.currentSearchQuery="",this.currentSearchScope="metadata",this.searchForm=this.formBuilder.group({scope:"metadata",query:""})}ngOnInit(){this.initialisePage()}initialisePage(){this.searching$.next(!0),this.isEPersonFormShown=!1,this.search({scope:this.currentSearchScope,query:this.currentSearchQuery}),this.subs.push(this.epersonService.getActiveEPerson().subscribe((eperson=>{null!=eperson&&eperson.id&&(this.isEPersonFormShown=!0)}))),this.subs.push(this.ePeople$.pipe(Object(switchMap.a)((epeople=>epeople.pageInfo.totalElements>0?Object(combineLatest.a)(...epeople.page.map((eperson=>this.authorizationService.isAuthorized(feature_id.a.CanDelete,Object(empty_util.b)(eperson)?eperson.self:void 0).pipe(Object(map.a)((authorized=>{const epersonDtoModel=new EpersonDtoModel;return epersonDtoModel.ableToDelete=authorized,epersonDtoModel.eperson=eperson,epersonDtoModel})))))).pipe(Object(map.a)((dtos=>Object(paginated_list_model.b)(epeople.pageInfo,dtos)))):[epeople]))).subscribe((value=>{this.searching$.next(!1),this.ePeopleDto$.next(value),this.pageInfoState$.next(value.pageInfo)})))}search(data){this.searching$.next(!0),Object(empty_util.b)(this.findListOptionsSub)&&this.findListOptionsSub.unsubscribe(),this.findListOptionsSub=this.paginationService.getCurrentPagination(this.config.id,this.config).pipe(Object(switchMap.a)((findListOptions=>{const query=data.query,scope=data.scope;return null!=query&&this.currentSearchQuery!==query&&(this.router.navigate([this.epersonService.getEPeoplePageRouterLink()],{queryParamsHandling:"merge"}),this.currentSearchQuery=query,this.paginationService.resetPage(this.config.id)),null!=scope&&this.currentSearchScope!==scope&&(this.router.navigate([this.epersonService.getEPeoplePageRouterLink()],{queryParamsHandling:"merge"}),this.currentSearchScope=scope,this.paginationService.resetPage(this.config.id)),this.epersonService.searchByScope(this.currentSearchScope,this.currentSearchQuery,{currentPage:findListOptions.currentPage,elementsPerPage:findListOptions.pageSize})})),Object(operators.c)()).subscribe((peopleRD=>{this.ePeople$.next(peopleRD.payload),this.pageInfoState$.next(peopleRD.payload.pageInfo)}))}isActive(eperson){return this.getActiveEPerson().pipe(Object(map.a)((activeEPerson=>eperson===activeEPerson)))}getActiveEPerson(){return this.epersonService.getActiveEPerson()}toggleEditEPerson(ePerson){this.getActiveEPerson().pipe(Object(take.a)(1)).subscribe((activeEPerson=>{ePerson===activeEPerson?(this.epersonService.cancelEditEPerson(),this.isEPersonFormShown=!1):(this.epersonService.editEPerson(ePerson),this.isEPersonFormShown=!0)})),this.scrollToTop()}deleteEPerson(ePerson){if(Object(empty_util.b)(ePerson.id)){const modalRef=this.modalService.open(confirmation_modal_component.a);modalRef.componentInstance.dso=ePerson,modalRef.componentInstance.headerLabel="confirmation-modal.delete-eperson.header",modalRef.componentInstance.infoLabel="confirmation-modal.delete-eperson.info",modalRef.componentInstance.cancelLabel="confirmation-modal.delete-eperson.cancel",modalRef.componentInstance.confirmLabel="confirmation-modal.delete-eperson.confirm",modalRef.componentInstance.brandColor="danger",modalRef.componentInstance.confirmIcon="fas fa-trash",modalRef.componentInstance.response.pipe(Object(take.a)(1)).subscribe((confirm=>{confirm&&Object(empty_util.b)(ePerson.id)&&this.epersonService.deleteEPerson(ePerson).pipe(Object(operators.g)()).subscribe((restResponse=>{restResponse.hasSucceeded?(this.notificationsService.success(this.translateService.get(this.labelPrefix+"notification.deleted.success",{name:ePerson.name})),this.reset()):this.notificationsService.error("Error occured when trying to delete EPerson with id: "+ePerson.id+" with code: "+restResponse.statusCode+" and message: "+restResponse.errorMessage)}))}))}}ngOnDestroy(){this.cleanupSubscribes(),this.paginationService.clearPagination(this.config.id)}cleanupSubscribes(){this.subs.filter((sub=>Object(empty_util.b)(sub))).forEach((sub=>sub.unsubscribe()))}scrollToTop(){!function smoothscroll(){const currentScroll=document.documentElement.scrollTop||document.body.scrollTop;currentScroll>0&&(window.requestAnimationFrame(smoothscroll),window.scrollTo(0,currentScroll-currentScroll/8))}()}clearFormAndResetResult(){this.searchForm.patchValue({query:""}),this.search({query:""})}reset(){this.epersonService.getBrowseEndpoint().pipe(Object(take.a)(1)).subscribe((href=>{this.requestService.setStaleByHrefSubstring(href).pipe(Object(take.a)(1)).subscribe((()=>{this.epersonService.cancelEditEPerson(),this.isEPersonFormShown=!1}))}))}}epeople_registry_component_EPeopleRegistryComponent.\u0275fac=function EPeopleRegistryComponent_Factory(t){return new(t||epeople_registry_component_EPeopleRegistryComponent)(core["\u0275\u0275directiveInject"](eperson_data_service.a),core["\u0275\u0275directiveInject"](ngx_translate_core.e),core["\u0275\u0275directiveInject"](notifications_service.a),core["\u0275\u0275directiveInject"](authorization_data_service.a),core["\u0275\u0275directiveInject"](fesm2015_forms.FormBuilder),core["\u0275\u0275directiveInject"](fesm2015_router.g),core["\u0275\u0275directiveInject"](ng_bootstrap.q),core["\u0275\u0275directiveInject"](pagination_service.a),core["\u0275\u0275directiveInject"](request_service.a))},epeople_registry_component_EPeopleRegistryComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:epeople_registry_component_EPeopleRegistryComponent,selectors:[["ds-epeople-registry"]],decls:22,vars:6,consts:[[1,"container"],[1,"epeople-registry","row"],[1,"col-12"],[1,"d-flex","justify-content-between","border-bottom","mb-3"],["id","header",1,"pb-2"],[4,"ngIf"],[3,"submitForm","cancelForm",4,"ngIf"],[1,"mr-auto","btn","btn-success","addEPerson-button",3,"click"],[1,"fas","fa-plus"],[1,"d-none","d-sm-inline"],[3,"submitForm","cancelForm"],["id","search",1,"border-bottom","pb-2"],[1,"d-flex","justify-content-between",3,"formGroup","ngSubmit"],["name","scope","id","scope","formControlName","scope","aria-label","Search scope",1,"form-control"],["value","metadata"],["value","email"],[1,"flex-grow-1","mr-3","ml-3"],[1,"form-group","input-group"],["type","text","name","query","id","query","formControlName","query",1,"form-control",3,"placeholder"],[1,"input-group-append"],["type","submit",1,"search-button","btn","btn-primary"],[1,"fas","fa-search"],[1,"search-button","btn","btn-secondary",3,"click"],[3,"paginationOptions","pageInfoState","collectionSize","hideGear","hidePagerWhenSinglePage",4,"ngIf"],["class","alert alert-info w-100 mb-2","role","alert",4,"ngIf"],[3,"paginationOptions","pageInfoState","collectionSize","hideGear","hidePagerWhenSinglePage"],[1,"table-responsive"],["id","epeople",1,"table","table-striped","table-hover","table-bordered"],["scope","col"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[1,"btn-group","edit-field"],[1,"btn","btn-outline-primary","btn-sm","access-control-editEPersonButton",3,"title","click"],[1,"fas","fa-edit","fa-fw"],[1,"btn","btn-outline-danger","btn-sm","access-control-deleteEPersonButton",3,"disabled","title","click"],[1,"fas","fa-trash-alt","fa-fw"],["role","alert",1,"alert","alert-info","w-100","mb-2"]],template:function EPeopleRegistryComponent_Template(rf,ctx){1&rf&&(core["\u0275\u0275elementStart"](0,"div",0),core["\u0275\u0275text"](1,"\n  "),core["\u0275\u0275elementStart"](2,"div",1),core["\u0275\u0275text"](3,"\n    "),core["\u0275\u0275elementStart"](4,"div",2),core["\u0275\u0275text"](5,"\n      "),core["\u0275\u0275elementStart"](6,"div",3),core["\u0275\u0275text"](7,"\n        "),core["\u0275\u0275elementStart"](8,"h2",4),core["\u0275\u0275text"](9),core["\u0275\u0275pipe"](10,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](11,"\n\n        "),core["\u0275\u0275template"](12,EPeopleRegistryComponent_div_12_Template,11,3,"div",5),core["\u0275\u0275text"](13,"\n      "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](14,"\n\n      "),core["\u0275\u0275template"](15,EPeopleRegistryComponent_ds_eperson_form_15_Template,1,0,"ds-eperson-form",6),core["\u0275\u0275text"](16,"\n\n      "),core["\u0275\u0275template"](17,EPeopleRegistryComponent_div_17_Template,59,33,"div",5),core["\u0275\u0275text"](18,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](19,"\n  "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](20,"\n"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](21,"\n")),2&rf&&(core["\u0275\u0275advance"](9),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](10,4,ctx.labelPrefix+"head")),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("ngIf",!ctx.isEPersonFormShown),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("ngIf",ctx.isEPersonFormShown),core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",!ctx.isEPersonFormShown))},directives:[common.NgIf,eperson_form_component_EPersonFormComponent,fesm2015_forms["\u0275angular_packages_forms_forms_ba"],fesm2015_forms.NgControlStatusGroup,fesm2015_forms.FormGroupDirective,fesm2015_forms.SelectControlValueAccessor,fesm2015_forms.NgControlStatus,fesm2015_forms.FormControlName,fesm2015_forms.NgSelectOption,fesm2015_forms["\u0275angular_packages_forms_forms_z"],fesm2015_forms.DefaultValueAccessor,loading_component.a,pagination_component.a,common.NgForOf,common.NgClass],pipes:[ngx_translate_core.d,common.AsyncPipe],encapsulation:2});var filter=__webpack_require__("pLZG"),catchError=__webpack_require__("JIr8"),collection_page_routing_paths=__webpack_require__("Obj/"),community_page_routing_paths=__webpack_require__("krCT"),dspace_object_data_service=__webpack_require__("/O7Z"),group_model=__webpack_require__("ArZ3"),collection_model=__webpack_require__("ye/0"),community_model=__webpack_require__("YLTE"),aletr_type=__webpack_require__("ac5F");var alert_component=__webpack_require__("VYMa"),mergeMap=__webpack_require__("5+tZ");const members_list_component_c0=function(a0){return{name:a0}};function MembersListComponent_ds_pagination_51_tr_32_button_20_Template(rf,ctx){if(1&rf){const _r10=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementStart"](0,"button",25),core["\u0275\u0275listener"]("click",(function MembersListComponent_ds_pagination_51_tr_32_button_20_Template_button_click_0_listener(){core["\u0275\u0275restoreView"](_r10);const ePerson_r5=core["\u0275\u0275nextContext"]().$implicit;return core["\u0275\u0275nextContext"](2).deleteMemberFromGroup(ePerson_r5)})),core["\u0275\u0275pipe"](1,"translate"),core["\u0275\u0275text"](2,"\n                "),core["\u0275\u0275element"](3,"i",26),core["\u0275\u0275text"](4,"\n              "),core["\u0275\u0275elementEnd"]()}if(2&rf){const ePerson_r5=core["\u0275\u0275nextContext"]().$implicit,ctx_r6=core["\u0275\u0275nextContext"](2);core["\u0275\u0275propertyInterpolate"]("title",core["\u0275\u0275pipeBind2"](1,1,ctx_r6.messagePrefix+".table.edit.buttons.remove",core["\u0275\u0275pureFunction1"](4,members_list_component_c0,ePerson_r5.eperson.name)))}}function MembersListComponent_ds_pagination_51_tr_32_button_22_Template(rf,ctx){if(1&rf){const _r14=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementStart"](0,"button",27),core["\u0275\u0275listener"]("click",(function MembersListComponent_ds_pagination_51_tr_32_button_22_Template_button_click_0_listener(){core["\u0275\u0275restoreView"](_r14);const ePerson_r5=core["\u0275\u0275nextContext"]().$implicit;return core["\u0275\u0275nextContext"](2).addMemberToGroup(ePerson_r5)})),core["\u0275\u0275pipe"](1,"translate"),core["\u0275\u0275text"](2,"\n                "),core["\u0275\u0275element"](3,"i",28),core["\u0275\u0275text"](4,"\n              "),core["\u0275\u0275elementEnd"]()}if(2&rf){const ePerson_r5=core["\u0275\u0275nextContext"]().$implicit,ctx_r7=core["\u0275\u0275nextContext"](2);core["\u0275\u0275propertyInterpolate"]("title",core["\u0275\u0275pipeBind2"](1,1,ctx_r7.messagePrefix+".table.edit.buttons.add",core["\u0275\u0275pureFunction1"](4,members_list_component_c0,ePerson_r5.eperson.name)))}}const members_list_component_c1=function(a0){return[a0]};function MembersListComponent_ds_pagination_51_tr_32_Template(rf,ctx){if(1&rf){const _r17=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementStart"](0,"tr"),core["\u0275\u0275text"](1,"\n          "),core["\u0275\u0275elementStart"](2,"td",19),core["\u0275\u0275text"](3),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](4,"\n          "),core["\u0275\u0275elementStart"](5,"td",19),core["\u0275\u0275elementStart"](6,"a",21),core["\u0275\u0275listener"]("click",(function MembersListComponent_ds_pagination_51_tr_32_Template_a_click_6_listener(){core["\u0275\u0275restoreView"](_r17);const ePerson_r5=ctx.$implicit;return core["\u0275\u0275nextContext"](2).ePersonDataService.startEditingNewEPerson(ePerson_r5.eperson)})),core["\u0275\u0275text"](7),core["\u0275\u0275elementEnd"](),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](8,"\n          "),core["\u0275\u0275elementStart"](9,"td",19),core["\u0275\u0275text"](10),core["\u0275\u0275pipe"](11,"translate"),core["\u0275\u0275element"](12,"br"),core["\u0275\u0275text"](13),core["\u0275\u0275pipe"](14,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](15,"\n          "),core["\u0275\u0275elementStart"](16,"td",19),core["\u0275\u0275text"](17,"\n            "),core["\u0275\u0275elementStart"](18,"div",22),core["\u0275\u0275text"](19,"\n              "),core["\u0275\u0275template"](20,MembersListComponent_ds_pagination_51_tr_32_button_20_Template,5,6,"button",23),core["\u0275\u0275text"](21,"\n\n              "),core["\u0275\u0275template"](22,MembersListComponent_ds_pagination_51_tr_32_button_22_Template,5,6,"button",24),core["\u0275\u0275text"](23,"\n            "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](24,"\n          "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](25,"\n        "),core["\u0275\u0275elementEnd"]()}if(2&rf){const ePerson_r5=ctx.$implicit,ctx_r4=core["\u0275\u0275nextContext"](2);core["\u0275\u0275advance"](3),core["\u0275\u0275textInterpolate"](ePerson_r5.eperson.id),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("routerLink",core["\u0275\u0275pureFunction1"](13,members_list_component_c1,ctx_r4.ePersonDataService.getEPeoplePageRouterLink())),core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate"](ePerson_r5.eperson.name),core["\u0275\u0275advance"](3),core["\u0275\u0275textInterpolate2"]("\n            ",core["\u0275\u0275pipeBind1"](11,9,ctx_r4.messagePrefix+".table.email"),": ",ePerson_r5.eperson.email?ePerson_r5.eperson.email:"-",""),core["\u0275\u0275advance"](3),core["\u0275\u0275textInterpolate2"]("\n            ",core["\u0275\u0275pipeBind1"](14,11,ctx_r4.messagePrefix+".table.netid"),": ",ePerson_r5.eperson.netid?ePerson_r5.eperson.netid:"-","\n          "),core["\u0275\u0275advance"](7),core["\u0275\u0275property"]("ngIf",ePerson_r5.memberOfGroup),core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",!ePerson_r5.memberOfGroup)}}function MembersListComponent_ds_pagination_51_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"ds-pagination",15),core["\u0275\u0275pipe"](1,"async"),core["\u0275\u0275pipe"](2,"async"),core["\u0275\u0275text"](3,"\n\n    "),core["\u0275\u0275elementStart"](4,"div",16),core["\u0275\u0275text"](5,"\n      "),core["\u0275\u0275elementStart"](6,"table",17),core["\u0275\u0275text"](7,"\n        "),core["\u0275\u0275elementStart"](8,"thead"),core["\u0275\u0275text"](9,"\n        "),core["\u0275\u0275elementStart"](10,"tr"),core["\u0275\u0275text"](11,"\n          "),core["\u0275\u0275elementStart"](12,"th",18),core["\u0275\u0275text"](13),core["\u0275\u0275pipe"](14,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](15,"\n          "),core["\u0275\u0275elementStart"](16,"th",18),core["\u0275\u0275text"](17),core["\u0275\u0275pipe"](18,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](19,"\n          "),core["\u0275\u0275elementStart"](20,"th",18),core["\u0275\u0275text"](21),core["\u0275\u0275pipe"](22,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](23,"\n          "),core["\u0275\u0275elementStart"](24,"th",19),core["\u0275\u0275text"](25),core["\u0275\u0275pipe"](26,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](27,"\n        "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](28,"\n        "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](29,"\n        "),core["\u0275\u0275elementStart"](30,"tbody"),core["\u0275\u0275text"](31,"\n        "),core["\u0275\u0275template"](32,MembersListComponent_ds_pagination_51_tr_32_Template,26,15,"tr",20),core["\u0275\u0275pipe"](33,"async"),core["\u0275\u0275text"](34,"\n        "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](35,"\n      "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](36,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](37,"\n\n  "),core["\u0275\u0275elementEnd"]()),2&rf){const ctx_r0=core["\u0275\u0275nextContext"]();let tmp_2_0=null,tmp_9_0=null;core["\u0275\u0275property"]("paginationOptions",ctx_r0.configSearch)("pageInfoState",core["\u0275\u0275pipeBind1"](1,10,ctx_r0.ePeopleSearchDtos))("collectionSize",null==(tmp_2_0=core["\u0275\u0275pipeBind1"](2,12,ctx_r0.ePeopleSearchDtos))?null:tmp_2_0.totalElements)("hideGear",!0)("hidePagerWhenSinglePage",!0),core["\u0275\u0275advance"](13),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](14,14,ctx_r0.messagePrefix+".table.id")),core["\u0275\u0275advance"](4),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](18,16,ctx_r0.messagePrefix+".table.name")),core["\u0275\u0275advance"](4),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](22,18,ctx_r0.messagePrefix+".table.identity")),core["\u0275\u0275advance"](4),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](26,20,ctx_r0.messagePrefix+".table.edit")),core["\u0275\u0275advance"](7),core["\u0275\u0275property"]("ngForOf",null==(tmp_9_0=core["\u0275\u0275pipeBind1"](33,22,ctx_r0.ePeopleSearchDtos))?null:tmp_9_0.page)}}function MembersListComponent_div_54_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"div",29),core["\u0275\u0275text"](1),core["\u0275\u0275pipe"](2,"translate"),core["\u0275\u0275elementEnd"]()),2&rf){const ctx_r1=core["\u0275\u0275nextContext"]();core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate1"]("\n    ",core["\u0275\u0275pipeBind1"](2,1,ctx_r1.messagePrefix+".no-items"),"\n  ")}}function MembersListComponent_ds_pagination_61_tr_32_Template(rf,ctx){if(1&rf){const _r21=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementStart"](0,"tr"),core["\u0275\u0275text"](1,"\n          "),core["\u0275\u0275elementStart"](2,"td",19),core["\u0275\u0275text"](3),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](4,"\n          "),core["\u0275\u0275elementStart"](5,"td",19),core["\u0275\u0275elementStart"](6,"a",21),core["\u0275\u0275listener"]("click",(function MembersListComponent_ds_pagination_61_tr_32_Template_a_click_6_listener(){core["\u0275\u0275restoreView"](_r21);const ePerson_r19=ctx.$implicit;return core["\u0275\u0275nextContext"](2).ePersonDataService.startEditingNewEPerson(ePerson_r19.eperson)})),core["\u0275\u0275text"](7),core["\u0275\u0275elementEnd"](),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](8,"\n          "),core["\u0275\u0275elementStart"](9,"td",19),core["\u0275\u0275text"](10),core["\u0275\u0275pipe"](11,"translate"),core["\u0275\u0275element"](12,"br"),core["\u0275\u0275text"](13),core["\u0275\u0275pipe"](14,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](15,"\n          "),core["\u0275\u0275elementStart"](16,"td",19),core["\u0275\u0275text"](17,"\n            "),core["\u0275\u0275elementStart"](18,"div",22),core["\u0275\u0275text"](19,"\n              "),core["\u0275\u0275elementStart"](20,"button",25),core["\u0275\u0275listener"]("click",(function MembersListComponent_ds_pagination_61_tr_32_Template_button_click_20_listener(){core["\u0275\u0275restoreView"](_r21);const ePerson_r19=ctx.$implicit;return core["\u0275\u0275nextContext"](2).deleteMemberFromGroup(ePerson_r19)})),core["\u0275\u0275pipe"](21,"translate"),core["\u0275\u0275text"](22,"\n                "),core["\u0275\u0275element"](23,"i",26),core["\u0275\u0275text"](24,"\n              "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](25,"\n            "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](26,"\n          "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](27,"\n        "),core["\u0275\u0275elementEnd"]()}if(2&rf){const ePerson_r19=ctx.$implicit,ctx_r18=core["\u0275\u0275nextContext"](2);core["\u0275\u0275advance"](3),core["\u0275\u0275textInterpolate"](ePerson_r19.eperson.id),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("routerLink",core["\u0275\u0275pureFunction1"](15,members_list_component_c1,ctx_r18.ePersonDataService.getEPeoplePageRouterLink())),core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate"](ePerson_r19.eperson.name),core["\u0275\u0275advance"](3),core["\u0275\u0275textInterpolate2"]("\n            ",core["\u0275\u0275pipeBind1"](11,8,ctx_r18.messagePrefix+".table.email"),": ",ePerson_r19.eperson.email?ePerson_r19.eperson.email:"-",""),core["\u0275\u0275advance"](3),core["\u0275\u0275textInterpolate2"]("\n            ",core["\u0275\u0275pipeBind1"](14,10,ctx_r18.messagePrefix+".table.netid"),": ",ePerson_r19.eperson.netid?ePerson_r19.eperson.netid:"-","\n          "),core["\u0275\u0275advance"](7),core["\u0275\u0275propertyInterpolate"]("title",core["\u0275\u0275pipeBind2"](21,12,ctx_r18.messagePrefix+".table.edit.buttons.remove",core["\u0275\u0275pureFunction1"](17,members_list_component_c0,ePerson_r19.eperson.name)))}}function MembersListComponent_ds_pagination_61_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"ds-pagination",15),core["\u0275\u0275pipe"](1,"async"),core["\u0275\u0275pipe"](2,"async"),core["\u0275\u0275text"](3,"\n\n    "),core["\u0275\u0275elementStart"](4,"div",16),core["\u0275\u0275text"](5,"\n      "),core["\u0275\u0275elementStart"](6,"table",30),core["\u0275\u0275text"](7,"\n        "),core["\u0275\u0275elementStart"](8,"thead"),core["\u0275\u0275text"](9,"\n        "),core["\u0275\u0275elementStart"](10,"tr"),core["\u0275\u0275text"](11,"\n          "),core["\u0275\u0275elementStart"](12,"th",18),core["\u0275\u0275text"](13),core["\u0275\u0275pipe"](14,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](15,"\n          "),core["\u0275\u0275elementStart"](16,"th",18),core["\u0275\u0275text"](17),core["\u0275\u0275pipe"](18,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](19,"\n          "),core["\u0275\u0275elementStart"](20,"th",18),core["\u0275\u0275text"](21),core["\u0275\u0275pipe"](22,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](23,"\n          "),core["\u0275\u0275elementStart"](24,"th",19),core["\u0275\u0275text"](25),core["\u0275\u0275pipe"](26,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](27,"\n        "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](28,"\n        "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](29,"\n        "),core["\u0275\u0275elementStart"](30,"tbody"),core["\u0275\u0275text"](31,"\n        "),core["\u0275\u0275template"](32,MembersListComponent_ds_pagination_61_tr_32_Template,28,19,"tr",20),core["\u0275\u0275pipe"](33,"async"),core["\u0275\u0275text"](34,"\n        "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](35,"\n      "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](36,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](37,"\n\n  "),core["\u0275\u0275elementEnd"]()),2&rf){const ctx_r2=core["\u0275\u0275nextContext"]();let tmp_2_0=null,tmp_9_0=null;core["\u0275\u0275property"]("paginationOptions",ctx_r2.config)("pageInfoState",core["\u0275\u0275pipeBind1"](1,10,ctx_r2.ePeopleMembersOfGroupDtos))("collectionSize",null==(tmp_2_0=core["\u0275\u0275pipeBind1"](2,12,ctx_r2.ePeopleMembersOfGroupDtos))?null:tmp_2_0.totalElements)("hideGear",!0)("hidePagerWhenSinglePage",!0),core["\u0275\u0275advance"](13),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](14,14,ctx_r2.messagePrefix+".table.id")),core["\u0275\u0275advance"](4),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](18,16,ctx_r2.messagePrefix+".table.name")),core["\u0275\u0275advance"](4),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](22,18,ctx_r2.messagePrefix+".table.identity")),core["\u0275\u0275advance"](4),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](26,20,ctx_r2.messagePrefix+".table.edit")),core["\u0275\u0275advance"](7),core["\u0275\u0275property"]("ngForOf",null==(tmp_9_0=core["\u0275\u0275pipeBind1"](33,22,ctx_r2.ePeopleMembersOfGroupDtos))?null:tmp_9_0.page)}}function MembersListComponent_div_64_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"div",29),core["\u0275\u0275text"](1),core["\u0275\u0275pipe"](2,"translate"),core["\u0275\u0275elementEnd"]()),2&rf){const ctx_r3=core["\u0275\u0275nextContext"]();core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate1"]("\n    ",core["\u0275\u0275pipeBind1"](2,1,ctx_r3.messagePrefix+".no-members-yet"),"\n  ")}}var SubKey;!function(SubKey){SubKey[SubKey.ActiveGroup=0]="ActiveGroup",SubKey[SubKey.MembersDTO=1]="MembersDTO",SubKey[SubKey.SearchResultsDTO=2]="SearchResultsDTO"}(SubKey||(SubKey={}));class members_list_component_MembersListComponent{constructor(groupDataService,ePersonDataService,translateService,notificationsService,formBuilder,paginationService,router){this.groupDataService=groupDataService,this.ePersonDataService=ePersonDataService,this.translateService=translateService,this.notificationsService=notificationsService,this.formBuilder=formBuilder,this.paginationService=paginationService,this.router=router,this.ePeopleSearchDtos=new BehaviorSubject.a(void 0),this.ePeopleMembersOfGroupDtos=new BehaviorSubject.a(void 0),this.configSearch=Object.assign(new pagination_component_options_model.a,{id:"sml",pageSize:5,currentPage:1}),this.config=Object.assign(new pagination_component_options_model.a,{id:"ml",pageSize:5,currentPage:1}),this.subs=new Map,this.currentSearchQuery="",this.currentSearchScope="metadata"}ngOnInit(){this.searchForm=this.formBuilder.group({scope:"metadata",query:""}),this.subs.set(SubKey.ActiveGroup,this.groupDataService.getActiveGroup().subscribe((activeGroup=>{null!=activeGroup&&(this.groupBeingEdited=activeGroup,this.retrieveMembers(this.config.currentPage))})))}retrieveMembers(page){this.unsubFrom(SubKey.MembersDTO),this.subs.set(SubKey.MembersDTO,this.paginationService.getCurrentPagination(this.config.id,this.config).pipe(Object(switchMap.a)((currentPagination=>this.ePersonDataService.findAllByHref(this.groupBeingEdited._links.epersons.href,{currentPage:currentPagination.currentPage,elementsPerPage:currentPagination.pageSize}))),Object(operators.b)(),Object(map.a)((rd=>{if(!rd.hasFailed)return rd;this.notificationsService.error(this.translateService.get(this.messagePrefix+".notification.failure",{cause:rd.errorMessage}))})),Object(switchMap.a)((epersonListRD=>Object(combineLatest.a)(...epersonListRD.payload.page.map((member=>Object(combineLatest.a)(this.isMemberOfGroup(member),(isMember=>{const epersonDtoModel=new EpersonDtoModel;return epersonDtoModel.eperson=member,epersonDtoModel.memberOfGroup=isMember,epersonDtoModel}))))).pipe(Object(map.a)((dtos=>Object(paginated_list_model.b)(epersonListRD.payload.pageInfo,dtos))))))).subscribe((paginatedListOfDTOs=>{this.ePeopleMembersOfGroupDtos.next(paginatedListOfDTOs)})))}isMemberOfGroup(possibleMember){return this.groupDataService.getActiveGroup().pipe(Object(take.a)(1),Object(mergeMap.a)((group=>null!=group?this.ePersonDataService.findAllByHref(group._links.epersons.href,{currentPage:1,elementsPerPage:9999},!1).pipe(Object(operators.i)(),Object(operators.o)(),Object(map.a)((listEPeopleInGroup=>listEPeopleInGroup.page.filter((ePersonInList=>ePersonInList.id===possibleMember.id)))),Object(map.a)((epeople=>epeople.length>0))):Object(of.a)(!1))))}unsubFrom(key){this.subs.has(key)&&(this.subs.get(key).unsubscribe(),this.subs.delete(key))}deleteMemberFromGroup(ePerson){this.groupDataService.getActiveGroup().pipe(Object(take.a)(1)).subscribe((activeGroup=>{if(null!=activeGroup){const response=this.groupDataService.deleteMemberFromGroup(activeGroup,ePerson.eperson);this.showNotifications("deleteMember",response,ePerson.eperson.name,activeGroup),this.search({scope:this.currentSearchScope,query:this.currentSearchQuery})}else this.notificationsService.error(this.translateService.get(this.messagePrefix+".notification.failure.noActiveGroup"))}))}addMemberToGroup(ePerson){ePerson.memberOfGroup=!0,this.groupDataService.getActiveGroup().pipe(Object(take.a)(1)).subscribe((activeGroup=>{if(null!=activeGroup){const response=this.groupDataService.addMemberToGroup(activeGroup,ePerson.eperson);this.showNotifications("addMember",response,ePerson.eperson.name,activeGroup)}else this.notificationsService.error(this.translateService.get(this.messagePrefix+".notification.failure.noActiveGroup"))}))}search(data){this.unsubFrom(SubKey.SearchResultsDTO),this.subs.set(SubKey.SearchResultsDTO,this.paginationService.getCurrentPagination(this.configSearch.id,this.configSearch).pipe(Object(switchMap.a)((paginationOptions=>{const query=data.query,scope=data.scope;return null!=query&&this.currentSearchQuery!==query&&this.groupBeingEdited&&(this.router.navigate([],{queryParamsHandling:"merge"}),this.currentSearchQuery=query,this.paginationService.resetPage(this.configSearch.id)),null!=scope&&this.currentSearchScope!==scope&&this.groupBeingEdited&&(this.router.navigate([],{queryParamsHandling:"merge"}),this.currentSearchScope=scope,this.paginationService.resetPage(this.configSearch.id)),this.searchDone=!0,this.ePersonDataService.searchByScope(this.currentSearchScope,this.currentSearchQuery,{currentPage:paginationOptions.currentPage,elementsPerPage:paginationOptions.pageSize})})),Object(operators.b)(),Object(map.a)((rd=>{if(!rd.hasFailed)return rd;this.notificationsService.error(this.translateService.get(this.messagePrefix+".notification.failure",{cause:rd.errorMessage}))})),Object(switchMap.a)((epersonListRD=>Object(combineLatest.a)(...epersonListRD.payload.page.map((member=>Object(combineLatest.a)(this.isMemberOfGroup(member),(isMember=>{const epersonDtoModel=new EpersonDtoModel;return epersonDtoModel.eperson=member,epersonDtoModel.memberOfGroup=isMember,epersonDtoModel}))))).pipe(Object(map.a)((dtos=>Object(paginated_list_model.b)(epersonListRD.payload.pageInfo,dtos))))))).subscribe((paginatedListOfDTOs=>{this.ePeopleSearchDtos.next(paginatedListOfDTOs)})))}ngOnDestroy(){for(const key of this.subs.keys())this.unsubFrom(key);this.paginationService.clearPagination(this.config.id),this.paginationService.clearPagination(this.configSearch.id)}showNotifications(messageSuffix,response,nameObject,activeGroup){response.pipe(Object(operators.g)()).subscribe((rd=>{rd.hasSucceeded?(this.notificationsService.success(this.translateService.get(this.messagePrefix+".notification.success."+messageSuffix,{name:nameObject})),this.ePersonDataService.clearLinkRequests(activeGroup._links.epersons.href)):this.notificationsService.error(this.translateService.get(this.messagePrefix+".notification.failure."+messageSuffix,{name:nameObject}))}))}clearFormAndResetResult(){this.searchForm.patchValue({query:""}),this.search({query:""})}}members_list_component_MembersListComponent.\u0275fac=function MembersListComponent_Factory(t){return new(t||members_list_component_MembersListComponent)(core["\u0275\u0275directiveInject"](group_data_service.a),core["\u0275\u0275directiveInject"](eperson_data_service.a),core["\u0275\u0275directiveInject"](ngx_translate_core.e),core["\u0275\u0275directiveInject"](notifications_service.a),core["\u0275\u0275directiveInject"](fesm2015_forms.FormBuilder),core["\u0275\u0275directiveInject"](pagination_service.a),core["\u0275\u0275directiveInject"](fesm2015_router.g))},members_list_component_MembersListComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:members_list_component_MembersListComponent,selectors:[["ds-members-list"]],inputs:{messagePrefix:"messagePrefix"},decls:69,vars:36,consts:[[1,"border-bottom","pb-2"],["id","search",1,"border-bottom","pb-2"],[1,"d-flex","justify-content-between",3,"formGroup","ngSubmit"],["name","scope","id","scope","formControlName","scope","aria-label","Search scope",1,"form-control"],["value","metadata"],["value","email"],[1,"flex-grow-1","mr-3","ml-3"],[1,"form-group","input-group"],["type","text","name","query","id","query","formControlName","query","aria-label","Search input",1,"form-control"],[1,"input-group-append"],["type","submit",1,"search-button","btn","btn-primary"],[1,"fas","fa-search"],[1,"btn","btn-secondary",3,"click"],[3,"paginationOptions","pageInfoState","collectionSize","hideGear","hidePagerWhenSinglePage",4,"ngIf"],["class","alert alert-info w-100 mb-2","role","alert",4,"ngIf"],[3,"paginationOptions","pageInfoState","collectionSize","hideGear","hidePagerWhenSinglePage"],[1,"table-responsive"],["id","epersonsSearch",1,"table","table-striped","table-hover","table-bordered"],["scope","col",1,"align-middle"],[1,"align-middle"],[4,"ngFor","ngForOf"],[3,"routerLink","click"],[1,"btn-group","edit-field"],["class","btn btn-outline-danger btn-sm",3,"title","click",4,"ngIf"],["class","btn btn-outline-primary btn-sm",3,"title","click",4,"ngIf"],[1,"btn","btn-outline-danger","btn-sm",3,"title","click"],[1,"fas","fa-trash-alt","fa-fw"],[1,"btn","btn-outline-primary","btn-sm",3,"title","click"],[1,"fas","fa-plus","fa-fw"],["role","alert",1,"alert","alert-info","w-100","mb-2"],["id","ePeopleMembersOfGroup",1,"table","table-striped","table-hover","table-bordered"]],template:function MembersListComponent_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementContainerStart"](0),core["\u0275\u0275text"](1,"\n  "),core["\u0275\u0275elementStart"](2,"h3",0),core["\u0275\u0275text"](3),core["\u0275\u0275pipe"](4,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](5,"\n\n  "),core["\u0275\u0275elementStart"](6,"h4",1),core["\u0275\u0275text"](7),core["\u0275\u0275pipe"](8,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](9,"\n  "),core["\u0275\u0275elementStart"](10,"form",2),core["\u0275\u0275listener"]("ngSubmit",(function MembersListComponent_Template_form_ngSubmit_10_listener(){return ctx.search(ctx.searchForm.value)})),core["\u0275\u0275text"](11,"\n    "),core["\u0275\u0275elementStart"](12,"div"),core["\u0275\u0275text"](13,"\n      "),core["\u0275\u0275elementStart"](14,"select",3),core["\u0275\u0275text"](15,"\n        "),core["\u0275\u0275elementStart"](16,"option",4),core["\u0275\u0275text"](17),core["\u0275\u0275pipe"](18,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](19,"\n        "),core["\u0275\u0275elementStart"](20,"option",5),core["\u0275\u0275text"](21),core["\u0275\u0275pipe"](22,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](23,"\n      "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](24,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](25,"\n    "),core["\u0275\u0275elementStart"](26,"div",6),core["\u0275\u0275text"](27,"\n      "),core["\u0275\u0275elementStart"](28,"div",7),core["\u0275\u0275text"](29,"\n        "),core["\u0275\u0275element"](30,"input",8),core["\u0275\u0275text"](31,"\n        "),core["\u0275\u0275elementStart"](32,"span",9),core["\u0275\u0275text"](33,"\n            "),core["\u0275\u0275elementStart"](34,"button",10),core["\u0275\u0275text"](35,"\n              "),core["\u0275\u0275element"](36,"i",11),core["\u0275\u0275text"](37),core["\u0275\u0275pipe"](38,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](39,"\n        "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](40,"\n      "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](41,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](42,"\n    "),core["\u0275\u0275elementStart"](43,"div"),core["\u0275\u0275text"](44,"\n      "),core["\u0275\u0275elementStart"](45,"button",12),core["\u0275\u0275listener"]("click",(function MembersListComponent_Template_button_click_45_listener(){return ctx.clearFormAndResetResult()})),core["\u0275\u0275text"](46),core["\u0275\u0275pipe"](47,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](48,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](49,"\n  "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](50,"\n\n  "),core["\u0275\u0275template"](51,MembersListComponent_ds_pagination_51_Template,38,24,"ds-pagination",13),core["\u0275\u0275pipe"](52,"async"),core["\u0275\u0275text"](53,"\n\n  "),core["\u0275\u0275template"](54,MembersListComponent_div_54_Template,3,3,"div",14),core["\u0275\u0275pipe"](55,"async"),core["\u0275\u0275text"](56,"\n\n  "),core["\u0275\u0275elementStart"](57,"h4"),core["\u0275\u0275text"](58),core["\u0275\u0275pipe"](59,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](60,"\n\n  "),core["\u0275\u0275template"](61,MembersListComponent_ds_pagination_61_Template,38,24,"ds-pagination",13),core["\u0275\u0275pipe"](62,"async"),core["\u0275\u0275text"](63,"\n\n  "),core["\u0275\u0275template"](64,MembersListComponent_div_64_Template,3,3,"div",14),core["\u0275\u0275pipe"](65,"async"),core["\u0275\u0275pipe"](66,"async"),core["\u0275\u0275text"](67,"\n\n"),core["\u0275\u0275elementContainerEnd"](),core["\u0275\u0275text"](68,"\n")),2&rf){let tmp_7_0=null,tmp_8_0=null,tmp_10_0=null,tmp_11_0=null;core["\u0275\u0275advance"](3),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](4,12,ctx.messagePrefix+".head")),core["\u0275\u0275advance"](4),core["\u0275\u0275textInterpolate1"]("",core["\u0275\u0275pipeBind1"](8,14,ctx.messagePrefix+".search.head"),"\n\n  "),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("formGroup",ctx.searchForm),core["\u0275\u0275advance"](7),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](18,16,ctx.messagePrefix+".search.scope.metadata")),core["\u0275\u0275advance"](4),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](22,18,ctx.messagePrefix+".search.scope.email")),core["\u0275\u0275advance"](16),core["\u0275\u0275textInterpolate1"](" ",core["\u0275\u0275pipeBind1"](38,20,ctx.messagePrefix+".search.button"),""),core["\u0275\u0275advance"](9),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](47,22,ctx.messagePrefix+".button.see-all")),core["\u0275\u0275advance"](5),core["\u0275\u0275property"]("ngIf",(null==(tmp_7_0=core["\u0275\u0275pipeBind1"](52,24,ctx.ePeopleSearchDtos))?null:tmp_7_0.totalElements)>0),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("ngIf",0==(null==(tmp_8_0=core["\u0275\u0275pipeBind1"](55,26,ctx.ePeopleSearchDtos))?null:tmp_8_0.totalElements)&&ctx.searchDone),core["\u0275\u0275advance"](4),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](59,28,ctx.messagePrefix+".headMembers")),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("ngIf",(null==(tmp_10_0=core["\u0275\u0275pipeBind1"](62,30,ctx.ePeopleMembersOfGroupDtos))?null:tmp_10_0.totalElements)>0),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("ngIf",null==core["\u0275\u0275pipeBind1"](65,32,ctx.ePeopleMembersOfGroupDtos)||0==(null==(tmp_11_0=core["\u0275\u0275pipeBind1"](66,34,ctx.ePeopleMembersOfGroupDtos))?null:tmp_11_0.totalElements))}},directives:[fesm2015_forms["\u0275angular_packages_forms_forms_ba"],fesm2015_forms.NgControlStatusGroup,fesm2015_forms.FormGroupDirective,fesm2015_forms.SelectControlValueAccessor,fesm2015_forms.NgControlStatus,fesm2015_forms.FormControlName,fesm2015_forms.NgSelectOption,fesm2015_forms["\u0275angular_packages_forms_forms_z"],fesm2015_forms.DefaultValueAccessor,common.NgIf,pagination_component.a,common.NgForOf,fesm2015_router.j],pipes:[ngx_translate_core.d,common.AsyncPipe],encapsulation:2});const subgroups_list_component_c0=function(a0){return{name:a0}};function SubgroupsListComponent_ds_pagination_37_tr_32_button_17_Template(rf,ctx){if(1&rf){const _r11=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementStart"](0,"button",23),core["\u0275\u0275listener"]("click",(function SubgroupsListComponent_ds_pagination_37_tr_32_button_17_Template_button_click_0_listener(){core["\u0275\u0275restoreView"](_r11);const group_r5=core["\u0275\u0275nextContext"]().$implicit;return core["\u0275\u0275nextContext"](2).deleteSubgroupFromGroup(group_r5)})),core["\u0275\u0275pipe"](1,"translate"),core["\u0275\u0275text"](2,"\n                "),core["\u0275\u0275element"](3,"i",24),core["\u0275\u0275text"](4,"\n              "),core["\u0275\u0275elementEnd"]()}if(2&rf){const group_r5=core["\u0275\u0275nextContext"]().$implicit,ctx_r6=core["\u0275\u0275nextContext"](2);core["\u0275\u0275propertyInterpolate"]("title",core["\u0275\u0275pipeBind2"](1,1,ctx_r6.messagePrefix+".table.edit.buttons.remove",core["\u0275\u0275pureFunction1"](4,subgroups_list_component_c0,group_r5.name)))}}function SubgroupsListComponent_ds_pagination_37_tr_32_p_21_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"p"),core["\u0275\u0275text"](1),core["\u0275\u0275pipe"](2,"translate"),core["\u0275\u0275elementEnd"]()),2&rf){const ctx_r7=core["\u0275\u0275nextContext"](3);core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](2,1,ctx_r7.messagePrefix+".table.edit.currentGroup"))}}function SubgroupsListComponent_ds_pagination_37_tr_32_button_24_Template(rf,ctx){if(1&rf){const _r15=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementStart"](0,"button",25),core["\u0275\u0275listener"]("click",(function SubgroupsListComponent_ds_pagination_37_tr_32_button_24_Template_button_click_0_listener(){core["\u0275\u0275restoreView"](_r15);const group_r5=core["\u0275\u0275nextContext"]().$implicit;return core["\u0275\u0275nextContext"](2).addSubgroupToGroup(group_r5)})),core["\u0275\u0275pipe"](1,"translate"),core["\u0275\u0275text"](2,"\n                "),core["\u0275\u0275element"](3,"i",26),core["\u0275\u0275text"](4,"\n              "),core["\u0275\u0275elementEnd"]()}if(2&rf){const group_r5=core["\u0275\u0275nextContext"]().$implicit,ctx_r8=core["\u0275\u0275nextContext"](2);core["\u0275\u0275propertyInterpolate"]("title",core["\u0275\u0275pipeBind2"](1,1,ctx_r8.messagePrefix+".table.edit.buttons.add",core["\u0275\u0275pureFunction1"](4,subgroups_list_component_c0,group_r5.name)))}}const subgroups_list_component_c1=function(a0){return[a0]};function SubgroupsListComponent_ds_pagination_37_tr_32_Template(rf,ctx){if(1&rf){const _r18=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementStart"](0,"tr"),core["\u0275\u0275text"](1,"\n          "),core["\u0275\u0275elementStart"](2,"td",16),core["\u0275\u0275text"](3),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](4,"\n          "),core["\u0275\u0275elementStart"](5,"td",16),core["\u0275\u0275elementStart"](6,"a",18),core["\u0275\u0275listener"]("click",(function SubgroupsListComponent_ds_pagination_37_tr_32_Template_a_click_6_listener(){core["\u0275\u0275restoreView"](_r18);const group_r5=ctx.$implicit;return core["\u0275\u0275nextContext"](2).groupDataService.startEditingNewGroup(group_r5)})),core["\u0275\u0275text"](7),core["\u0275\u0275elementEnd"](),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](8,"\n          "),core["\u0275\u0275elementStart"](9,"td",16),core["\u0275\u0275text"](10),core["\u0275\u0275pipe"](11,"async"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](12,"\n          "),core["\u0275\u0275elementStart"](13,"td",16),core["\u0275\u0275text"](14,"\n            "),core["\u0275\u0275elementStart"](15,"div",19),core["\u0275\u0275text"](16,"\n              "),core["\u0275\u0275template"](17,SubgroupsListComponent_ds_pagination_37_tr_32_button_17_Template,5,6,"button",20),core["\u0275\u0275pipe"](18,"async"),core["\u0275\u0275pipe"](19,"async"),core["\u0275\u0275text"](20,"\n\n              "),core["\u0275\u0275template"](21,SubgroupsListComponent_ds_pagination_37_tr_32_p_21_Template,3,3,"p",21),core["\u0275\u0275pipe"](22,"async"),core["\u0275\u0275text"](23,"\n\n              "),core["\u0275\u0275template"](24,SubgroupsListComponent_ds_pagination_37_tr_32_button_24_Template,5,6,"button",22),core["\u0275\u0275pipe"](25,"async"),core["\u0275\u0275pipe"](26,"async"),core["\u0275\u0275text"](27,"\n            "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](28,"\n          "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](29,"\n        "),core["\u0275\u0275elementEnd"]()}if(2&rf){const group_r5=ctx.$implicit,ctx_r4=core["\u0275\u0275nextContext"](2);let tmp_3_0=null;core["\u0275\u0275advance"](3),core["\u0275\u0275textInterpolate"](group_r5.id),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("routerLink",core["\u0275\u0275pureFunction1"](19,subgroups_list_component_c1,ctx_r4.groupDataService.getGroupEditPageRouterLink(group_r5))),core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate"](group_r5.name),core["\u0275\u0275advance"](3),core["\u0275\u0275textInterpolate"](null==(tmp_3_0=core["\u0275\u0275pipeBind1"](11,7,group_r5.object))||null==tmp_3_0.payload?null:tmp_3_0.payload.name),core["\u0275\u0275advance"](7),core["\u0275\u0275property"]("ngIf",core["\u0275\u0275pipeBind1"](18,9,ctx_r4.isSubgroupOfGroup(group_r5))&&!core["\u0275\u0275pipeBind1"](19,11,ctx_r4.isActiveGroup(group_r5))),core["\u0275\u0275advance"](4),core["\u0275\u0275property"]("ngIf",core["\u0275\u0275pipeBind1"](22,13,ctx_r4.isActiveGroup(group_r5))),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("ngIf",!core["\u0275\u0275pipeBind1"](25,15,ctx_r4.isSubgroupOfGroup(group_r5))&&!core["\u0275\u0275pipeBind1"](26,17,ctx_r4.isActiveGroup(group_r5)))}}function SubgroupsListComponent_ds_pagination_37_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"ds-pagination",12),core["\u0275\u0275pipe"](1,"async"),core["\u0275\u0275pipe"](2,"async"),core["\u0275\u0275text"](3,"\n\n    "),core["\u0275\u0275elementStart"](4,"div",13),core["\u0275\u0275text"](5,"\n      "),core["\u0275\u0275elementStart"](6,"table",14),core["\u0275\u0275text"](7,"\n        "),core["\u0275\u0275elementStart"](8,"thead"),core["\u0275\u0275text"](9,"\n        "),core["\u0275\u0275elementStart"](10,"tr"),core["\u0275\u0275text"](11,"\n          "),core["\u0275\u0275elementStart"](12,"th",15),core["\u0275\u0275text"](13),core["\u0275\u0275pipe"](14,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](15,"\n          "),core["\u0275\u0275elementStart"](16,"th",15),core["\u0275\u0275text"](17),core["\u0275\u0275pipe"](18,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](19,"\n          "),core["\u0275\u0275elementStart"](20,"th",15),core["\u0275\u0275text"](21),core["\u0275\u0275pipe"](22,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](23,"\n          "),core["\u0275\u0275elementStart"](24,"th",16),core["\u0275\u0275text"](25),core["\u0275\u0275pipe"](26,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](27,"\n        "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](28,"\n        "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](29,"\n        "),core["\u0275\u0275elementStart"](30,"tbody"),core["\u0275\u0275text"](31,"\n        "),core["\u0275\u0275template"](32,SubgroupsListComponent_ds_pagination_37_tr_32_Template,30,21,"tr",17),core["\u0275\u0275pipe"](33,"async"),core["\u0275\u0275text"](34,"\n        "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](35,"\n      "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](36,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](37,"\n  "),core["\u0275\u0275elementEnd"]()),2&rf){const ctx_r0=core["\u0275\u0275nextContext"]();let tmp_1_0=null,tmp_2_0=null,tmp_9_0=null;core["\u0275\u0275property"]("paginationOptions",ctx_r0.configSearch)("pageInfoState",null==(tmp_1_0=core["\u0275\u0275pipeBind1"](1,10,ctx_r0.searchResults$))?null:tmp_1_0.payload)("collectionSize",null==(tmp_2_0=core["\u0275\u0275pipeBind1"](2,12,ctx_r0.searchResults$))||null==tmp_2_0.payload?null:tmp_2_0.payload.totalElements)("hideGear",!0)("hidePagerWhenSinglePage",!0),core["\u0275\u0275advance"](13),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](14,14,ctx_r0.messagePrefix+".table.id")),core["\u0275\u0275advance"](4),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](18,16,ctx_r0.messagePrefix+".table.name")),core["\u0275\u0275advance"](4),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](22,18,ctx_r0.messagePrefix+".table.collectionOrCommunity")),core["\u0275\u0275advance"](4),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](26,20,ctx_r0.messagePrefix+".table.edit")),core["\u0275\u0275advance"](7),core["\u0275\u0275property"]("ngForOf",null==(tmp_9_0=core["\u0275\u0275pipeBind1"](33,22,ctx_r0.searchResults$))||null==tmp_9_0.payload?null:tmp_9_0.payload.page)}}function SubgroupsListComponent_div_40_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"div",27),core["\u0275\u0275text"](1),core["\u0275\u0275pipe"](2,"translate"),core["\u0275\u0275elementEnd"]()),2&rf){const ctx_r1=core["\u0275\u0275nextContext"]();core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate1"]("\n    ",core["\u0275\u0275pipeBind1"](2,1,ctx_r1.messagePrefix+".no-items"),"\n  ")}}function SubgroupsListComponent_ds_pagination_47_tr_32_Template(rf,ctx){if(1&rf){const _r22=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementStart"](0,"tr"),core["\u0275\u0275text"](1,"\n          "),core["\u0275\u0275elementStart"](2,"td",16),core["\u0275\u0275text"](3),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](4,"\n          "),core["\u0275\u0275elementStart"](5,"td",16),core["\u0275\u0275elementStart"](6,"a",18),core["\u0275\u0275listener"]("click",(function SubgroupsListComponent_ds_pagination_47_tr_32_Template_a_click_6_listener(){core["\u0275\u0275restoreView"](_r22);const group_r20=ctx.$implicit;return core["\u0275\u0275nextContext"](2).groupDataService.startEditingNewGroup(group_r20)})),core["\u0275\u0275text"](7),core["\u0275\u0275elementEnd"](),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](8,"\n          "),core["\u0275\u0275elementStart"](9,"td",16),core["\u0275\u0275text"](10),core["\u0275\u0275pipe"](11,"async"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](12,"\n          "),core["\u0275\u0275elementStart"](13,"td",16),core["\u0275\u0275text"](14,"\n            "),core["\u0275\u0275elementStart"](15,"div",19),core["\u0275\u0275text"](16,"\n              "),core["\u0275\u0275elementStart"](17,"button",23),core["\u0275\u0275listener"]("click",(function SubgroupsListComponent_ds_pagination_47_tr_32_Template_button_click_17_listener(){core["\u0275\u0275restoreView"](_r22);const group_r20=ctx.$implicit;return core["\u0275\u0275nextContext"](2).deleteSubgroupFromGroup(group_r20)})),core["\u0275\u0275pipe"](18,"translate"),core["\u0275\u0275text"](19,"\n                "),core["\u0275\u0275element"](20,"i",24),core["\u0275\u0275text"](21,"\n              "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](22,"\n            "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](23,"\n          "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](24,"\n        "),core["\u0275\u0275elementEnd"]()}if(2&rf){const group_r20=ctx.$implicit,ctx_r19=core["\u0275\u0275nextContext"](2);let tmp_3_0=null;core["\u0275\u0275advance"](3),core["\u0275\u0275textInterpolate"](group_r20.id),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("routerLink",core["\u0275\u0275pureFunction1"](10,subgroups_list_component_c1,ctx_r19.groupDataService.getGroupEditPageRouterLink(group_r20))),core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate"](group_r20.name),core["\u0275\u0275advance"](3),core["\u0275\u0275textInterpolate"](null==(tmp_3_0=core["\u0275\u0275pipeBind1"](11,5,group_r20.object))||null==tmp_3_0.payload?null:tmp_3_0.payload.name),core["\u0275\u0275advance"](7),core["\u0275\u0275propertyInterpolate"]("title",core["\u0275\u0275pipeBind2"](18,7,ctx_r19.messagePrefix+".table.edit.buttons.remove",core["\u0275\u0275pureFunction1"](12,subgroups_list_component_c0,group_r20.name)))}}function SubgroupsListComponent_ds_pagination_47_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"ds-pagination",12),core["\u0275\u0275pipe"](1,"async"),core["\u0275\u0275pipe"](2,"async"),core["\u0275\u0275text"](3,"\n\n    "),core["\u0275\u0275elementStart"](4,"div",13),core["\u0275\u0275text"](5,"\n      "),core["\u0275\u0275elementStart"](6,"table",28),core["\u0275\u0275text"](7,"\n        "),core["\u0275\u0275elementStart"](8,"thead"),core["\u0275\u0275text"](9,"\n        "),core["\u0275\u0275elementStart"](10,"tr"),core["\u0275\u0275text"](11,"\n          "),core["\u0275\u0275elementStart"](12,"th",15),core["\u0275\u0275text"](13),core["\u0275\u0275pipe"](14,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](15,"\n          "),core["\u0275\u0275elementStart"](16,"th",15),core["\u0275\u0275text"](17),core["\u0275\u0275pipe"](18,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](19,"\n          "),core["\u0275\u0275elementStart"](20,"th",15),core["\u0275\u0275text"](21),core["\u0275\u0275pipe"](22,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](23,"\n          "),core["\u0275\u0275elementStart"](24,"th"),core["\u0275\u0275text"](25),core["\u0275\u0275pipe"](26,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](27,"\n        "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](28,"\n        "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](29,"\n        "),core["\u0275\u0275elementStart"](30,"tbody"),core["\u0275\u0275text"](31,"\n        "),core["\u0275\u0275template"](32,SubgroupsListComponent_ds_pagination_47_tr_32_Template,25,14,"tr",17),core["\u0275\u0275pipe"](33,"async"),core["\u0275\u0275text"](34,"\n        "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](35,"\n      "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](36,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](37,"\n  "),core["\u0275\u0275elementEnd"]()),2&rf){const ctx_r2=core["\u0275\u0275nextContext"]();let tmp_1_0=null,tmp_2_0=null,tmp_9_0=null;core["\u0275\u0275property"]("paginationOptions",ctx_r2.config)("pageInfoState",null==(tmp_1_0=core["\u0275\u0275pipeBind1"](1,10,ctx_r2.subGroups$))?null:tmp_1_0.payload)("collectionSize",null==(tmp_2_0=core["\u0275\u0275pipeBind1"](2,12,ctx_r2.subGroups$))||null==tmp_2_0.payload?null:tmp_2_0.payload.totalElements)("hideGear",!0)("hidePagerWhenSinglePage",!0),core["\u0275\u0275advance"](13),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](14,14,ctx_r2.messagePrefix+".table.id")),core["\u0275\u0275advance"](4),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](18,16,ctx_r2.messagePrefix+".table.name")),core["\u0275\u0275advance"](4),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](22,18,ctx_r2.messagePrefix+".table.collectionOrCommunity")),core["\u0275\u0275advance"](4),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](26,20,ctx_r2.messagePrefix+".table.edit")),core["\u0275\u0275advance"](7),core["\u0275\u0275property"]("ngForOf",null==(tmp_9_0=core["\u0275\u0275pipeBind1"](33,22,ctx_r2.subGroups$))||null==tmp_9_0.payload?null:tmp_9_0.payload.page)}}function SubgroupsListComponent_div_50_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"div",27),core["\u0275\u0275text"](1),core["\u0275\u0275pipe"](2,"translate"),core["\u0275\u0275elementEnd"]()),2&rf){const ctx_r3=core["\u0275\u0275nextContext"]();core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate1"]("\n    ",core["\u0275\u0275pipeBind1"](2,1,ctx_r3.messagePrefix+".no-subgroups-yet"),"\n  ")}}var subgroups_list_component_SubKey;!function(SubKey){SubKey[SubKey.Members=0]="Members",SubKey[SubKey.ActiveGroup=1]="ActiveGroup",SubKey[SubKey.SearchResults=2]="SearchResults"}(subgroups_list_component_SubKey||(subgroups_list_component_SubKey={}));class subgroups_list_component_SubgroupsListComponent{constructor(groupDataService,translateService,notificationsService,formBuilder,paginationService,router){this.groupDataService=groupDataService,this.translateService=translateService,this.notificationsService=notificationsService,this.formBuilder=formBuilder,this.paginationService=paginationService,this.router=router,this.searchResults$=new BehaviorSubject.a(void 0),this.subGroups$=new BehaviorSubject.a(void 0),this.subs=new Map,this.configSearch=Object.assign(new pagination_component_options_model.a,{id:"ssgl",pageSize:5,currentPage:1}),this.config=Object.assign(new pagination_component_options_model.a,{id:"sgl",pageSize:5,currentPage:1}),this.currentSearchQuery=""}ngOnInit(){this.searchForm=this.formBuilder.group({query:""}),this.subs.set(subgroups_list_component_SubKey.ActiveGroup,this.groupDataService.getActiveGroup().subscribe((activeGroup=>{null!=activeGroup&&(this.groupBeingEdited=activeGroup,this.retrieveSubGroups())})))}retrieveSubGroups(){this.unsubFrom(subgroups_list_component_SubKey.Members),this.subs.set(subgroups_list_component_SubKey.Members,this.paginationService.getCurrentPagination(this.config.id,this.config).pipe(Object(switchMap.a)((config=>this.groupDataService.findAllByHref(this.groupBeingEdited._links.subgroups.href,{currentPage:config.currentPage,elementsPerPage:config.pageSize},!0,!0,Object(follow_link_config_model.a)("object"))))).subscribe((rd=>{this.subGroups$.next(rd)})))}isSubgroupOfGroup(possibleSubgroup){return this.groupDataService.getActiveGroup().pipe(Object(take.a)(1),Object(mergeMap.a)((activeGroup=>null!=activeGroup?activeGroup.uuid===possibleSubgroup.uuid?Object(of.a)(!1):this.groupDataService.findAllByHref(activeGroup._links.subgroups.href,{currentPage:1,elementsPerPage:9999}).pipe(Object(operators.i)(),Object(operators.o)(),Object(map.a)((listTotalGroups=>listTotalGroups.page.filter((groupInList=>groupInList.id===possibleSubgroup.id)))),Object(map.a)((groups=>groups.length>0))):Object(of.a)(!1))))}isActiveGroup(group){return this.groupDataService.getActiveGroup().pipe(Object(take.a)(1),Object(mergeMap.a)((activeGroup=>null!=activeGroup&&activeGroup.uuid===group.uuid?Object(of.a)(!0):Object(of.a)(!1))))}deleteSubgroupFromGroup(subgroup){this.groupDataService.getActiveGroup().pipe(Object(take.a)(1)).subscribe((activeGroup=>{if(null!=activeGroup){const response=this.groupDataService.deleteSubGroupFromGroup(activeGroup,subgroup);this.showNotifications("deleteSubgroup",response,subgroup.name,activeGroup)}else this.notificationsService.error(this.translateService.get(this.messagePrefix+".notification.failure.noActiveGroup"))}))}addSubgroupToGroup(subgroup){this.groupDataService.getActiveGroup().pipe(Object(take.a)(1)).subscribe((activeGroup=>{if(null!=activeGroup)if(activeGroup.uuid!==subgroup.uuid){const response=this.groupDataService.addSubGroupToGroup(activeGroup,subgroup);this.showNotifications("addSubgroup",response,subgroup.name,activeGroup)}else this.notificationsService.error(this.translateService.get(this.messagePrefix+".notification.failure.subgroupToAddIsActiveGroup"));else this.notificationsService.error(this.translateService.get(this.messagePrefix+".notification.failure.noActiveGroup"))}))}search(data){const query=data.query;null!=query&&this.currentSearchQuery!==query&&(this.router.navigateByUrl(this.groupDataService.getGroupEditPageRouterLink(this.groupBeingEdited)),this.currentSearchQuery=query,this.configSearch.currentPage=1),this.searchDone=!0,this.unsubFrom(subgroups_list_component_SubKey.SearchResults),this.subs.set(subgroups_list_component_SubKey.SearchResults,this.paginationService.getCurrentPagination(this.configSearch.id,this.configSearch).pipe(Object(switchMap.a)((config=>this.groupDataService.searchGroups(this.currentSearchQuery,{currentPage:config.currentPage,elementsPerPage:config.pageSize},!0,!0,Object(follow_link_config_model.a)("object"))))).subscribe((rd=>{this.searchResults$.next(rd)})))}unsubFrom(key){this.subs.has(key)&&(this.subs.get(key).unsubscribe(),this.subs.delete(key))}ngOnDestroy(){for(const key of this.subs.keys())this.unsubFrom(key);this.paginationService.clearPagination(this.config.id),this.paginationService.clearPagination(this.configSearch.id)}showNotifications(messageSuffix,response,nameObject,activeGroup){response.pipe(Object(operators.g)()).subscribe((rd=>{rd.hasSucceeded?(this.notificationsService.success(this.translateService.get(this.messagePrefix+".notification.success."+messageSuffix,{name:nameObject})),this.groupDataService.clearGroupLinkRequests(activeGroup._links.subgroups.href)):this.notificationsService.error(this.translateService.get(this.messagePrefix+".notification.failure."+messageSuffix,{name:nameObject}))}))}clearFormAndResetResult(){this.searchForm.patchValue({query:""}),this.search({query:""})}}function GroupFormComponent_div_6_Template(rf,ctx){1&rf&&core["\u0275\u0275element"](0,"div")}function GroupFormComponent_ng_template_9_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275text"](0,"\n        "),core["\u0275\u0275elementStart"](1,"h2",14),core["\u0275\u0275text"](2),core["\u0275\u0275pipe"](3,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](4,"\n      ")),2&rf){const ctx_r2=core["\u0275\u0275nextContext"]();core["\u0275\u0275advance"](2),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](3,1,ctx_r2.messagePrefix+".head.create"))}}function GroupFormComponent_ng_template_12_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275text"](0,"\n        "),core["\u0275\u0275elementStart"](1,"h2",14),core["\u0275\u0275text"](2),core["\u0275\u0275pipe"](3,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](4,"\n      ")),2&rf){const ctx_r4=core["\u0275\u0275nextContext"]();core["\u0275\u0275advance"](2),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](3,1,ctx_r4.messagePrefix+".head.edit"))}}function GroupFormComponent_ds_alert_15_Template(rf,ctx){if(1&rf&&core["\u0275\u0275element"](0,"ds-alert",15),2&rf){const ctx_r5=core["\u0275\u0275nextContext"]();core["\u0275\u0275property"]("type",ctx_r5.AlertTypeEnum.Warning)("content",ctx_r5.messagePrefix+".alert.permanent")}}subgroups_list_component_SubgroupsListComponent.\u0275fac=function SubgroupsListComponent_Factory(t){return new(t||subgroups_list_component_SubgroupsListComponent)(core["\u0275\u0275directiveInject"](group_data_service.a),core["\u0275\u0275directiveInject"](ngx_translate_core.e),core["\u0275\u0275directiveInject"](notifications_service.a),core["\u0275\u0275directiveInject"](fesm2015_forms.FormBuilder),core["\u0275\u0275directiveInject"](pagination_service.a),core["\u0275\u0275directiveInject"](fesm2015_router.g))},subgroups_list_component_SubgroupsListComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:subgroups_list_component_SubgroupsListComponent,selectors:[["ds-subgroups-list"]],inputs:{messagePrefix:"messagePrefix"},decls:54,vars:28,consts:[[1,"border-bottom","pb-2"],["id","search",1,"border-bottom","pb-2"],[1,"d-flex","justify-content-between",3,"formGroup","ngSubmit"],[1,"flex-grow-1","mr-3"],[1,"form-group","input-group","mr-3"],["type","text","name","query","id","query","formControlName","query","aria-label","Search input",1,"form-control"],[1,"input-group-append"],["type","submit",1,"search-button","btn","btn-primary"],[1,"fas","fa-search"],[1,"btn","btn-secondary","float-right",3,"click"],[3,"paginationOptions","pageInfoState","collectionSize","hideGear","hidePagerWhenSinglePage",4,"ngIf"],["class","alert alert-info w-100 mb-2","role","alert",4,"ngIf"],[3,"paginationOptions","pageInfoState","collectionSize","hideGear","hidePagerWhenSinglePage"],[1,"table-responsive"],["id","groupsSearch",1,"table","table-striped","table-hover","table-bordered"],["scope","col",1,"align-middle"],[1,"align-middle"],[4,"ngFor","ngForOf"],[3,"routerLink","click"],[1,"btn-group","edit-field"],["class","btn btn-outline-danger btn-sm deleteButton",3,"title","click",4,"ngIf"],[4,"ngIf"],["class","btn btn-outline-primary btn-sm addButton",3,"title","click",4,"ngIf"],[1,"btn","btn-outline-danger","btn-sm","deleteButton",3,"title","click"],[1,"fas","fa-trash-alt","fa-fw"],[1,"btn","btn-outline-primary","btn-sm","addButton",3,"title","click"],[1,"fas","fa-plus","fa-fw"],["role","alert",1,"alert","alert-info","w-100","mb-2"],["id","subgroupsOfGroup",1,"table","table-striped","table-hover","table-bordered"]],template:function SubgroupsListComponent_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementContainerStart"](0),core["\u0275\u0275text"](1,"\n  "),core["\u0275\u0275elementStart"](2,"h3",0),core["\u0275\u0275text"](3),core["\u0275\u0275pipe"](4,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](5,"\n\n  "),core["\u0275\u0275elementStart"](6,"h4",1),core["\u0275\u0275text"](7),core["\u0275\u0275pipe"](8,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](9,"\n  "),core["\u0275\u0275elementStart"](10,"form",2),core["\u0275\u0275listener"]("ngSubmit",(function SubgroupsListComponent_Template_form_ngSubmit_10_listener(){return ctx.search(ctx.searchForm.value)})),core["\u0275\u0275text"](11,"\n    "),core["\u0275\u0275elementStart"](12,"div",3),core["\u0275\u0275text"](13,"\n      "),core["\u0275\u0275elementStart"](14,"div",4),core["\u0275\u0275text"](15,"\n        "),core["\u0275\u0275element"](16,"input",5),core["\u0275\u0275text"](17,"\n        "),core["\u0275\u0275elementStart"](18,"span",6),core["\u0275\u0275text"](19,"\n            "),core["\u0275\u0275elementStart"](20,"button",7),core["\u0275\u0275text"](21,"\n              "),core["\u0275\u0275element"](22,"i",8),core["\u0275\u0275text"](23),core["\u0275\u0275pipe"](24,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](25,"\n        "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](26,"\n\n      "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](27,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](28,"\n    "),core["\u0275\u0275elementStart"](29,"div"),core["\u0275\u0275text"](30,"\n      "),core["\u0275\u0275elementStart"](31,"button",9),core["\u0275\u0275listener"]("click",(function SubgroupsListComponent_Template_button_click_31_listener(){return ctx.clearFormAndResetResult()})),core["\u0275\u0275text"](32),core["\u0275\u0275pipe"](33,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](34,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](35,"\n  "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](36,"\n\n  "),core["\u0275\u0275template"](37,SubgroupsListComponent_ds_pagination_37_Template,38,24,"ds-pagination",10),core["\u0275\u0275pipe"](38,"async"),core["\u0275\u0275text"](39,"\n\n  "),core["\u0275\u0275template"](40,SubgroupsListComponent_div_40_Template,3,3,"div",11),core["\u0275\u0275pipe"](41,"async"),core["\u0275\u0275text"](42,"\n\n  "),core["\u0275\u0275elementStart"](43,"h4"),core["\u0275\u0275text"](44),core["\u0275\u0275pipe"](45,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](46,"\n\n  "),core["\u0275\u0275template"](47,SubgroupsListComponent_ds_pagination_47_Template,38,24,"ds-pagination",10),core["\u0275\u0275pipe"](48,"async"),core["\u0275\u0275text"](49,"\n\n  "),core["\u0275\u0275template"](50,SubgroupsListComponent_div_50_Template,3,3,"div",11),core["\u0275\u0275pipe"](51,"async"),core["\u0275\u0275text"](52,"\n\n"),core["\u0275\u0275elementContainerEnd"](),core["\u0275\u0275text"](53,"\n")),2&rf){let tmp_5_0=null,tmp_6_0=null,tmp_8_0=null,tmp_9_0=null;core["\u0275\u0275advance"](3),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](4,10,ctx.messagePrefix+".head")),core["\u0275\u0275advance"](4),core["\u0275\u0275textInterpolate1"]("",core["\u0275\u0275pipeBind1"](8,12,ctx.messagePrefix+".search.head"),"\n\n  "),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("formGroup",ctx.searchForm),core["\u0275\u0275advance"](13),core["\u0275\u0275textInterpolate1"](" ",core["\u0275\u0275pipeBind1"](24,14,ctx.messagePrefix+".search.button"),"\n            "),core["\u0275\u0275advance"](9),core["\u0275\u0275textInterpolate1"]("\n        ",core["\u0275\u0275pipeBind1"](33,16,ctx.messagePrefix+".button.see-all"),"\n      "),core["\u0275\u0275advance"](5),core["\u0275\u0275property"]("ngIf",(null==(tmp_5_0=core["\u0275\u0275pipeBind1"](38,18,ctx.searchResults$))||null==tmp_5_0.payload?null:tmp_5_0.payload.totalElements)>0),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("ngIf",0==(null==(tmp_6_0=core["\u0275\u0275pipeBind1"](41,20,ctx.searchResults$))||null==tmp_6_0.payload?null:tmp_6_0.payload.totalElements)&&ctx.searchDone),core["\u0275\u0275advance"](4),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](45,22,ctx.messagePrefix+".headSubgroups")),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("ngIf",(null==(tmp_8_0=core["\u0275\u0275pipeBind1"](48,24,ctx.subGroups$))||null==tmp_8_0.payload?null:tmp_8_0.payload.totalElements)>0),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("ngIf",0==(null==(tmp_9_0=core["\u0275\u0275pipeBind1"](51,26,ctx.subGroups$))||null==tmp_9_0.payload?null:tmp_9_0.payload.totalElements))}},directives:[fesm2015_forms["\u0275angular_packages_forms_forms_ba"],fesm2015_forms.NgControlStatusGroup,fesm2015_forms.FormGroupDirective,fesm2015_forms.DefaultValueAccessor,fesm2015_forms.NgControlStatus,fesm2015_forms.FormControlName,common.NgIf,pagination_component.a,common.NgForOf,fesm2015_router.j],pipes:[ngx_translate_core.d,common.AsyncPipe],encapsulation:2});const group_form_component_c0=function(a0,a1,a2){return{name:a0,comcol:a1,comcolEditRolesRoute:a2}};function GroupFormComponent_ds_alert_17_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"ds-alert",15),core["\u0275\u0275pipe"](1,"translate"),core["\u0275\u0275pipe"](2,"async"),core["\u0275\u0275pipe"](3,"async"),core["\u0275\u0275pipe"](4,"async"),core["\u0275\u0275text"](5,"\n      "),core["\u0275\u0275elementEnd"]()),2&rf){const ctx_r6=core["\u0275\u0275nextContext"]();let tmp_1_0=null;core["\u0275\u0275property"]("type",ctx_r6.AlertTypeEnum.Warning)("content",core["\u0275\u0275pipeBind2"](1,2,ctx_r6.messagePrefix+".alert.workflowGroup",core["\u0275\u0275pureFunction3"](11,group_form_component_c0,null==(tmp_1_0=core["\u0275\u0275pipeBind1"](2,5,ctx_r6.getLinkedDSO(ctx_r6.groupBeingEdited)))||null==tmp_1_0.payload?null:tmp_1_0.payload.name,null==(tmp_1_0=core["\u0275\u0275pipeBind1"](3,7,ctx_r6.getLinkedDSO(ctx_r6.groupBeingEdited)))||null==tmp_1_0.payload?null:tmp_1_0.payload.type,core["\u0275\u0275pipeBind1"](4,9,ctx_r6.getLinkedEditRolesRoute(ctx_r6.groupBeingEdited)))))}}function GroupFormComponent_div_31_Template(rf,ctx){if(1&rf){const _r11=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementStart"](0,"div",16),core["\u0275\u0275text"](1,"\n          "),core["\u0275\u0275elementStart"](2,"button",17),core["\u0275\u0275listener"]("click",(function GroupFormComponent_div_31_Template_button_click_2_listener(){core["\u0275\u0275restoreView"](_r11);return core["\u0275\u0275nextContext"]().delete()})),core["\u0275\u0275pipe"](3,"async"),core["\u0275\u0275text"](4,"\n            "),core["\u0275\u0275element"](5,"i",18),core["\u0275\u0275text"](6),core["\u0275\u0275pipe"](7,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](8,"\n        "),core["\u0275\u0275elementEnd"]()}if(2&rf){const ctx_r7=core["\u0275\u0275nextContext"]();core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("disabled",!core["\u0275\u0275pipeBind1"](3,2,ctx_r7.canEdit$)||ctx_r7.groupBeingEdited.permanent),core["\u0275\u0275advance"](4),core["\u0275\u0275textInterpolate1"](" ",core["\u0275\u0275pipeBind1"](7,4,ctx_r7.messagePrefix+".actions.delete"),"\n          ")}}function GroupFormComponent_ds_members_list_36_Template(rf,ctx){if(1&rf&&core["\u0275\u0275element"](0,"ds-members-list",19),2&rf){const ctx_r8=core["\u0275\u0275nextContext"]();core["\u0275\u0275property"]("messagePrefix",ctx_r8.messagePrefix+".members-list")}}function GroupFormComponent_ds_subgroups_list_39_Template(rf,ctx){if(1&rf&&core["\u0275\u0275element"](0,"ds-subgroups-list",19),2&rf){const ctx_r9=core["\u0275\u0275nextContext"]();core["\u0275\u0275property"]("messagePrefix",ctx_r9.messagePrefix+".subgroups-list")}}class group_form_component_GroupFormComponent{constructor(groupDataService,ePersonDataService,dSpaceObjectDataService,formBuilderService,translateService,notificationsService,route,router,authorizationService,modalService,requestService,changeDetectorRef){this.groupDataService=groupDataService,this.ePersonDataService=ePersonDataService,this.dSpaceObjectDataService=dSpaceObjectDataService,this.formBuilderService=formBuilderService,this.translateService=translateService,this.notificationsService=notificationsService,this.route=route,this.router=router,this.authorizationService=authorizationService,this.modalService=modalService,this.requestService=requestService,this.changeDetectorRef=changeDetectorRef,this.messagePrefix="admin.access-control.groups.form",this.formId="group-form",this.formLayout={groupName:{grid:{host:"row"}},groupDescription:{grid:{host:"row"}}},this.submitForm=new core.EventEmitter,this.cancelForm=new core.EventEmitter,this.subs=[],this.AlertTypeEnum=aletr_type.a}ngOnInit(){this.initialisePage()}initialisePage(){this.subs.push(this.route.params.subscribe((params=>{"newGroup"!==params.groupId&&this.setActiveGroup(params.groupId)}))),this.canEdit$=this.groupDataService.getActiveGroup().pipe(Object(empty_util.c)(),Object(switchMap.a)((group=>Object(combineLatest.a)(this.authorizationService.isAuthorized(feature_id.a.CanDelete,Object(empty_util.e)(group)?group.self:void 0),this.hasLinkedDSO(group),((isAuthorized,hasLinkedDSO)=>isAuthorized&&!hasLinkedDSO))))),Object(combineLatest.a)(this.translateService.get(`${this.messagePrefix}.groupName`),this.translateService.get(`${this.messagePrefix}.groupCommunity`),this.translateService.get(`${this.messagePrefix}.groupDescription`)).subscribe((([groupName,groupCommunity,groupDescription])=>{this.groupName=new fesm2015_core.J({id:"groupName",label:groupName,name:"groupName",validators:{required:null},required:!0}),this.groupCommunity=new fesm2015_core.J({id:"groupCommunity",label:groupCommunity,name:"groupCommunity",required:!1,readOnly:!0}),this.groupDescription=new fesm2015_core.P({id:"groupDescription",label:groupDescription,name:"groupDescription",required:!1}),this.formModel=[this.groupName,this.groupDescription],this.formGroup=this.formBuilderService.createFormGroup(this.formModel),this.formGroup.controls.groupName&&(this.formGroup.controls.groupName.setAsyncValidators(class{static createValidator(groupDataService){return control=>groupDataService.searchGroups(control.value,{currentPage:1,elementsPerPage:100}).pipe(Object(operators.l)(),Object(map.a)((groups=>groups.filter((group=>group.name===control.value)))),Object(map.a)((groups=>groups.length>0?{groupExists:!0}:null)))}}.createValidator(this.groupDataService)),this.groupNameValueChangeSubscribe=this.groupName.valueChanges.pipe(Object(debounceTime.a)(300)).subscribe((()=>{this.changeDetectorRef.detectChanges()}))),this.subs.push(Object(combineLatest.a)(this.groupDataService.getActiveGroup(),this.canEdit$,this.groupDataService.getActiveGroup().pipe(Object(filter.a)((activeGroup=>Object(empty_util.b)(activeGroup))),Object(switchMap.a)((activeGroup=>this.getLinkedDSO(activeGroup).pipe(Object(operators.j)()))))).subscribe((([activeGroup,canEdit,linkedObject])=>{var _a;null!=activeGroup&&(this.formGroup.controls.groupName.clearAsyncValidators(),this.groupBeingEdited=activeGroup,(null==linkedObject?void 0:linkedObject.name)?(this.formBuilderService.insertFormGroupControl(1,this.formGroup,this.formModel,this.groupCommunity),this.formGroup.patchValue({groupName:activeGroup.name,groupCommunity:null!==(_a=null==linkedObject?void 0:linkedObject.name)&&void 0!==_a?_a:"",groupDescription:activeGroup.firstMetadataValue("dc.description")})):(this.formModel=[this.groupName,this.groupDescription],this.formGroup.patchValue({groupName:activeGroup.name,groupDescription:activeGroup.firstMetadataValue("dc.description")})),setTimeout((()=>{canEdit&&!activeGroup.permanent||this.formGroup.disable()}),200))})))}))}onCancel(){this.groupDataService.cancelEditGroup(),this.cancelForm.emit(),this.router.navigate([this.groupDataService.getGroupRegistryRouterLink()])}onSubmit(){this.groupDataService.getActiveGroup().pipe(Object(take.a)(1)).subscribe((group=>{const values={name:this.groupName.value,metadata:{"dc.description":[{value:this.groupDescription.value}]}};null===group?this.createNewGroup(values):this.editGroup(group)}))}createNewGroup(values){const groupToCreate=Object.assign(new group_model.a,values);this.groupDataService.create(groupToCreate).pipe(Object(operators.g)()).subscribe((rd=>{if(rd.hasSucceeded){if(this.notificationsService.success(this.translateService.get(this.messagePrefix+".notification.created.success",{name:groupToCreate.name})),this.submitForm.emit(groupToCreate),Object(empty_util.e)(rd.payload)){const groupSelfLink=rd.payload._links.self.href;this.setActiveGroupWithLink(groupSelfLink),this.groupDataService.clearGroupsRequests(),this.router.navigateByUrl(this.groupDataService.getGroupEditPageRouterLinkWithID(rd.payload.uuid))}}else this.notificationsService.error(this.translateService.get(this.messagePrefix+".notification.created.failure",{name:groupToCreate.name})),this.showNotificationIfNameInUse(groupToCreate,"created"),this.cancelForm.emit()}))}showNotificationIfNameInUse(group,notificationSection){this.subs.push(this.groupDataService.searchGroups(group.name,{currentPage:1,elementsPerPage:0}).pipe(Object(operators.i)(),Object(operators.o)()).subscribe((list=>{list.totalElements>0&&this.notificationsService.error(this.translateService.get(this.messagePrefix+".notification."+notificationSection+".failure.groupNameInUse",{name:group.name}))})))}editGroup(group){let operations=[];Object(empty_util.b)(this.groupDescription.value)&&(operations=[...operations,{op:"replace",path:"/metadata/dc.description/0/value",value:this.groupDescription.value}]),Object(empty_util.b)(this.groupName.value)&&(operations=[...operations,{op:"replace",path:"/name",value:this.groupName.value}]),this.groupDataService.patch(group,operations).pipe(Object(operators.g)()).subscribe((rd=>{rd.hasSucceeded?(this.notificationsService.success(this.translateService.get(this.messagePrefix+".notification.edited.success",{name:rd.payload.name})),this.submitForm.emit(rd.payload)):(this.notificationsService.error(this.translateService.get(this.messagePrefix+".notification.edited.failure",{name:group.name})),this.cancelForm.emit())}))}setActiveGroup(groupId){this.groupDataService.cancelEditGroup(),this.groupDataService.findById(groupId).pipe(Object(operators.i)(),Object(operators.o)()).subscribe((group=>{this.groupDataService.editGroup(group)}))}setActiveGroupWithLink(groupSelfLink){this.groupDataService.getActiveGroup().pipe(Object(take.a)(1)).subscribe((activeGroup=>{null===activeGroup&&(this.groupDataService.cancelEditGroup(),this.groupDataService.findByHref(groupSelfLink,!1,!1,Object(follow_link_config_model.a)("subgroups"),Object(follow_link_config_model.a)("epersons"),Object(follow_link_config_model.a)("object")).pipe(Object(operators.i)(),Object(operators.o)()).subscribe((group=>{this.groupDataService.editGroup(group)})))}))}delete(){this.groupDataService.getActiveGroup().pipe(Object(take.a)(1)).subscribe((group=>{const modalRef=this.modalService.open(confirmation_modal_component.a);modalRef.componentInstance.dso=group,modalRef.componentInstance.headerLabel=this.messagePrefix+".delete-group.modal.header",modalRef.componentInstance.infoLabel=this.messagePrefix+".delete-group.modal.info",modalRef.componentInstance.cancelLabel=this.messagePrefix+".delete-group.modal.cancel",modalRef.componentInstance.confirmLabel=this.messagePrefix+".delete-group.modal.confirm",modalRef.componentInstance.brandColor="danger",modalRef.componentInstance.confirmIcon="fas fa-trash",modalRef.componentInstance.response.pipe(Object(take.a)(1)).subscribe((confirm=>{confirm&&Object(empty_util.b)(group.id)&&this.groupDataService.delete(group.id).pipe(Object(operators.g)()).subscribe((rd=>{rd.hasSucceeded?(this.notificationsService.success(this.translateService.get(this.messagePrefix+".notification.deleted.success",{name:group.name})),this.reset()):this.notificationsService.error(this.translateService.get(this.messagePrefix+".notification.deleted.failure.title",{name:group.name}),this.translateService.get(this.messagePrefix+".notification.deleted.failure.content",{cause:rd.errorMessage}))}))}))}))}reset(){this.groupDataService.getBrowseEndpoint().pipe(Object(take.a)(1)).subscribe((href=>{this.requestService.removeByHrefSubstring(href)})),this.onCancel()}ngOnDestroy(){this.groupDataService.cancelEditGroup(),this.subs.filter((sub=>Object(empty_util.b)(sub))).forEach((sub=>sub.unsubscribe())),Object(empty_util.b)(this.groupNameValueChangeSubscribe)&&this.groupNameValueChangeSubscribe.unsubscribe()}hasLinkedDSO(group){if(Object(empty_util.b)(group)&&Object(empty_util.b)(group._links.object.href))return this.getLinkedDSO(group).pipe(Object(map.a)((rd=>Object(empty_util.b)(rd)&&Object(empty_util.b)(rd.payload))),Object(catchError.a)((()=>Object(of.a)(!1))))}getLinkedDSO(group){if(Object(empty_util.b)(group)&&Object(empty_util.b)(group._links.object.href))return void 0===group.object?this.dSpaceObjectDataService.findByHref(group._links.object.href):group.object}getLinkedEditRolesRoute(group){if(Object(empty_util.b)(group)&&Object(empty_util.b)(group._links.object.href))return this.getLinkedDSO(group).pipe(Object(map.a)((rd=>{if(Object(empty_util.b)(rd)&&Object(empty_util.b)(rd.payload)){switch(rd.payload.type){case community_model.a.type.value:return Object(community_page_routing_paths.f)(rd.payload.id);case collection_model.a.type.value:return Object(collection_page_routing_paths.g)(rd.payload.id)}}})))}}group_form_component_GroupFormComponent.\u0275fac=function GroupFormComponent_Factory(t){return new(t||group_form_component_GroupFormComponent)(core["\u0275\u0275directiveInject"](group_data_service.a),core["\u0275\u0275directiveInject"](eperson_data_service.a),core["\u0275\u0275directiveInject"](dspace_object_data_service.a),core["\u0275\u0275directiveInject"](form_builder_service.a),core["\u0275\u0275directiveInject"](ngx_translate_core.e),core["\u0275\u0275directiveInject"](notifications_service.a),core["\u0275\u0275directiveInject"](fesm2015_router.a),core["\u0275\u0275directiveInject"](fesm2015_router.g),core["\u0275\u0275directiveInject"](authorization_data_service.a),core["\u0275\u0275directiveInject"](ng_bootstrap.q),core["\u0275\u0275directiveInject"](request_service.a),core["\u0275\u0275directiveInject"](core.ChangeDetectorRef))},group_form_component_GroupFormComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:group_form_component_GroupFormComponent,selectors:[["ds-group-form"]],hostBindings:function GroupFormComponent_HostBindings(rf,ctx){1&rf&&core["\u0275\u0275listener"]("beforeunload",(function GroupFormComponent_beforeunload_HostBindingHandler(){return ctx.ngOnDestroy()}),!1,core["\u0275\u0275resolveWindow"])},outputs:{submitForm:"submitForm",cancelForm:"cancelForm"},decls:44,vars:22,consts:[[1,"container"],[1,"group-form","row"],[1,"col-12"],[4,"ngIf","ngIfThen","ngIfElse"],["createHeader",""],["editheader",""],[3,"type","content",4,"ngIf"],[3,"formId","formModel","formGroup","formLayout","displayCancel","submitForm"],["before","",1,"btn-group"],[1,"btn","btn-outline-secondary",3,"click"],[1,"fas","fa-arrow-left"],["after","","class","btn-group",4,"ngIf"],[1,"mb-5"],[3,"messagePrefix",4,"ngIf"],[1,"border-bottom","pb-2"],[3,"type","content"],["after","",1,"btn-group"],[1,"btn","btn-danger","delete-button",3,"disabled","click"],[1,"fa","fa-trash"],[3,"messagePrefix"]],template:function GroupFormComponent_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"div",0),core["\u0275\u0275text"](1,"\n  "),core["\u0275\u0275elementStart"](2,"div",1),core["\u0275\u0275text"](3,"\n    "),core["\u0275\u0275elementStart"](4,"div",2),core["\u0275\u0275text"](5,"\n\n      "),core["\u0275\u0275template"](6,GroupFormComponent_div_6_Template,1,0,"div",3),core["\u0275\u0275pipe"](7,"async"),core["\u0275\u0275text"](8,"\n\n      "),core["\u0275\u0275template"](9,GroupFormComponent_ng_template_9_Template,5,3,"ng-template",null,4,core["\u0275\u0275templateRefExtractor"]),core["\u0275\u0275text"](11,"\n\n      "),core["\u0275\u0275template"](12,GroupFormComponent_ng_template_12_Template,5,3,"ng-template",null,5,core["\u0275\u0275templateRefExtractor"]),core["\u0275\u0275text"](14,"\n\n      "),core["\u0275\u0275template"](15,GroupFormComponent_ds_alert_15_Template,1,2,"ds-alert",6),core["\u0275\u0275text"](16,"\n      "),core["\u0275\u0275template"](17,GroupFormComponent_ds_alert_17_Template,6,15,"ds-alert",6),core["\u0275\u0275pipe"](18,"async"),core["\u0275\u0275pipe"](19,"async"),core["\u0275\u0275text"](20,"\n\n      "),core["\u0275\u0275elementStart"](21,"ds-form",7),core["\u0275\u0275listener"]("submitForm",(function GroupFormComponent_Template_ds_form_submitForm_21_listener(){return ctx.onSubmit()})),core["\u0275\u0275text"](22,"\n        "),core["\u0275\u0275elementStart"](23,"div",8),core["\u0275\u0275text"](24,"\n          "),core["\u0275\u0275elementStart"](25,"button",9),core["\u0275\u0275listener"]("click",(function GroupFormComponent_Template_button_click_25_listener(){return ctx.onCancel()})),core["\u0275\u0275element"](26,"i",10),core["\u0275\u0275text"](27),core["\u0275\u0275pipe"](28,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](29,"\n        "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](30,"\n        "),core["\u0275\u0275template"](31,GroupFormComponent_div_31_Template,9,6,"div",11),core["\u0275\u0275text"](32,"\n      "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](33,"\n\n      "),core["\u0275\u0275elementStart"](34,"div",12),core["\u0275\u0275text"](35,"\n        "),core["\u0275\u0275template"](36,GroupFormComponent_ds_members_list_36_Template,1,1,"ds-members-list",13),core["\u0275\u0275text"](37,"\n      "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](38,"\n      "),core["\u0275\u0275template"](39,GroupFormComponent_ds_subgroups_list_39_Template,1,1,"ds-subgroups-list",13),core["\u0275\u0275text"](40,"\n\n\n\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](41,"\n  "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](42,"\n"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](43,"\n")),2&rf){const _r1=core["\u0275\u0275reference"](10),_r3=core["\u0275\u0275reference"](13);core["\u0275\u0275advance"](6),core["\u0275\u0275property"]("ngIf",core["\u0275\u0275pipeBind1"](7,14,ctx.groupDataService.getActiveGroup()))("ngIfThen",_r3)("ngIfElse",_r1),core["\u0275\u0275advance"](9),core["\u0275\u0275property"]("ngIf",null==ctx.groupBeingEdited?null:ctx.groupBeingEdited.permanent),core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",!core["\u0275\u0275pipeBind1"](18,16,ctx.canEdit$)&&core["\u0275\u0275pipeBind1"](19,18,ctx.groupDataService.getActiveGroup())),core["\u0275\u0275advance"](4),core["\u0275\u0275property"]("formId",ctx.formId)("formModel",ctx.formModel)("formGroup",ctx.formGroup)("formLayout",ctx.formLayout)("displayCancel",!1),core["\u0275\u0275advance"](6),core["\u0275\u0275textInterpolate1"](" ",core["\u0275\u0275pipeBind1"](28,20,ctx.messagePrefix+".return"),""),core["\u0275\u0275advance"](4),core["\u0275\u0275property"]("ngIf",null!=ctx.groupBeingEdited),core["\u0275\u0275advance"](5),core["\u0275\u0275property"]("ngIf",null!=ctx.groupBeingEdited),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("ngIf",null!=ctx.groupBeingEdited)}},directives:[common.NgIf,form_component.a,fesm2015_forms.NgControlStatusGroup,fesm2015_forms.FormGroupDirective,alert_component.a,members_list_component_MembersListComponent,subgroups_list_component_SubgroupsListComponent],pipes:[common.AsyncPipe,ngx_translate_core.d],encapsulation:2});var tap=__webpack_require__("vkgz");class GroupDtoModel{}var route_service=__webpack_require__("ppE2");function GroupsRegistryComponent_ds_loading_58_Template(rf,ctx){1&rf&&core["\u0275\u0275element"](0,"ds-loading")}const groups_registry_component_c0=function(a0){return{name:a0}};function GroupsRegistryComponent_ds_pagination_61_tr_35_button_21_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"button",30),core["\u0275\u0275pipe"](1,"translate"),core["\u0275\u0275text"](2,"\n                      "),core["\u0275\u0275element"](3,"i",31),core["\u0275\u0275text"](4,"\n                    "),core["\u0275\u0275elementEnd"]()),2&rf){const groupDto_r4=core["\u0275\u0275nextContext"]().$implicit,ctx_r5=core["\u0275\u0275nextContext"](2);core["\u0275\u0275propertyInterpolate"]("title",core["\u0275\u0275pipeBind2"](1,2,ctx_r5.messagePrefix+"table.edit.buttons.edit",core["\u0275\u0275pureFunction1"](5,groups_registry_component_c0,groupDto_r4.group.name))),core["\u0275\u0275property"]("routerLink",ctx_r5.groupService.getGroupEditPageRouterLink(groupDto_r4.group))}}function GroupsRegistryComponent_ds_pagination_61_tr_35_button_23_Template(rf,ctx){1&rf&&(core["\u0275\u0275elementStart"](0,"button",32),core["\u0275\u0275pipe"](1,"translate"),core["\u0275\u0275text"](2,"\n                      "),core["\u0275\u0275element"](3,"i",31),core["\u0275\u0275text"](4,"\n                    "),core["\u0275\u0275elementEnd"]()),2&rf&&core["\u0275\u0275property"]("disabled",!0)("ngbTooltip",core["\u0275\u0275pipeBind1"](1,2,"admin.access-control.epeople.table.edit.buttons.edit-disabled"))}function GroupsRegistryComponent_ds_pagination_61_tr_35_button_26_Template(rf,ctx){if(1&rf){const _r11=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementStart"](0,"button",33),core["\u0275\u0275listener"]("click",(function GroupsRegistryComponent_ds_pagination_61_tr_35_button_26_Template_button_click_0_listener(){core["\u0275\u0275restoreView"](_r11);const groupDto_r4=core["\u0275\u0275nextContext"]().$implicit;return core["\u0275\u0275nextContext"](2).deleteGroup(groupDto_r4)})),core["\u0275\u0275pipe"](1,"translate"),core["\u0275\u0275text"](2,"\n                    "),core["\u0275\u0275element"](3,"i",34),core["\u0275\u0275text"](4,"\n                  "),core["\u0275\u0275elementEnd"]()}if(2&rf){const groupDto_r4=core["\u0275\u0275nextContext"]().$implicit,ctx_r7=core["\u0275\u0275nextContext"](2);core["\u0275\u0275propertyInterpolate"]("title",core["\u0275\u0275pipeBind2"](1,1,ctx_r7.messagePrefix+"table.edit.buttons.remove",core["\u0275\u0275pureFunction1"](4,groups_registry_component_c0,groupDto_r4.group.name)))}}function GroupsRegistryComponent_ds_pagination_61_tr_35_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"tr"),core["\u0275\u0275text"](1,"\n              "),core["\u0275\u0275elementStart"](2,"td"),core["\u0275\u0275text"](3),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](4,"\n              "),core["\u0275\u0275elementStart"](5,"td"),core["\u0275\u0275text"](6),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](7,"\n              "),core["\u0275\u0275elementStart"](8,"td"),core["\u0275\u0275text"](9),core["\u0275\u0275pipe"](10,"async"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](11,"\n              "),core["\u0275\u0275elementStart"](12,"td"),core["\u0275\u0275text"](13),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](14,"\n              "),core["\u0275\u0275elementStart"](15,"td"),core["\u0275\u0275text"](16,"\n                "),core["\u0275\u0275elementStart"](17,"div",25),core["\u0275\u0275text"](18,"\n                  "),core["\u0275\u0275elementContainerStart"](19,26),core["\u0275\u0275text"](20,"\n                    "),core["\u0275\u0275template"](21,GroupsRegistryComponent_ds_pagination_61_tr_35_button_21_Template,5,7,"button",27),core["\u0275\u0275text"](22,"\n                    "),core["\u0275\u0275template"](23,GroupsRegistryComponent_ds_pagination_61_tr_35_button_23_Template,5,4,"button",28),core["\u0275\u0275text"](24,"\n                  "),core["\u0275\u0275elementContainerEnd"](),core["\u0275\u0275text"](25,"\n                  "),core["\u0275\u0275template"](26,GroupsRegistryComponent_ds_pagination_61_tr_35_button_26_Template,5,6,"button",29),core["\u0275\u0275text"](27,"\n                "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](28,"\n              "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](29,"\n            "),core["\u0275\u0275elementEnd"]()),2&rf){const groupDto_r4=ctx.$implicit;let tmp_2_0=null;core["\u0275\u0275advance"](3),core["\u0275\u0275textInterpolate"](groupDto_r4.group.id),core["\u0275\u0275advance"](3),core["\u0275\u0275textInterpolate"](groupDto_r4.group.name),core["\u0275\u0275advance"](3),core["\u0275\u0275textInterpolate"](null==(tmp_2_0=core["\u0275\u0275pipeBind1"](10,8,groupDto_r4.group.object))||null==tmp_2_0.payload?null:tmp_2_0.payload.name),core["\u0275\u0275advance"](4),core["\u0275\u0275textInterpolate"]((null==groupDto_r4.epersons?null:groupDto_r4.epersons.totalElements)+(null==groupDto_r4.subgroups?null:groupDto_r4.subgroups.totalElements)),core["\u0275\u0275advance"](6),core["\u0275\u0275property"]("ngSwitch",groupDto_r4.ableToEdit),core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngSwitchCase",!0),core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngSwitchCase",!1),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("ngIf",!(null!=groupDto_r4.group&&groupDto_r4.group.permanent)&&groupDto_r4.ableToDelete)}}function GroupsRegistryComponent_ds_pagination_61_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"ds-pagination",20),core["\u0275\u0275pipe"](1,"async"),core["\u0275\u0275text"](2,"\n\n        "),core["\u0275\u0275elementStart"](3,"div",21),core["\u0275\u0275text"](4,"\n          "),core["\u0275\u0275elementStart"](5,"table",22),core["\u0275\u0275text"](6,"\n            "),core["\u0275\u0275elementStart"](7,"thead"),core["\u0275\u0275text"](8,"\n            "),core["\u0275\u0275elementStart"](9,"tr"),core["\u0275\u0275text"](10,"\n              "),core["\u0275\u0275elementStart"](11,"th",23),core["\u0275\u0275text"](12),core["\u0275\u0275pipe"](13,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](14,"\n              "),core["\u0275\u0275elementStart"](15,"th",23),core["\u0275\u0275text"](16),core["\u0275\u0275pipe"](17,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](18,"\n              "),core["\u0275\u0275elementStart"](19,"th",23),core["\u0275\u0275text"](20),core["\u0275\u0275pipe"](21,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](22,"\n              "),core["\u0275\u0275elementStart"](23,"th",23),core["\u0275\u0275text"](24),core["\u0275\u0275pipe"](25,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](26,"\n              "),core["\u0275\u0275elementStart"](27,"th"),core["\u0275\u0275text"](28),core["\u0275\u0275pipe"](29,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](30,"\n            "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](31,"\n            "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](32,"\n            "),core["\u0275\u0275elementStart"](33,"tbody"),core["\u0275\u0275text"](34,"\n            "),core["\u0275\u0275template"](35,GroupsRegistryComponent_ds_pagination_61_tr_35_Template,30,10,"tr",24),core["\u0275\u0275pipe"](36,"async"),core["\u0275\u0275text"](37,"\n            "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](38,"\n          "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](39,"\n        "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](40,"\n      "),core["\u0275\u0275elementEnd"]()),2&rf){const ctx_r1=core["\u0275\u0275nextContext"]();let tmp_2_0=null,tmp_10_0=null;core["\u0275\u0275property"]("paginationOptions",ctx_r1.config)("pageInfoState",ctx_r1.pageInfoState$)("collectionSize",null==(tmp_2_0=core["\u0275\u0275pipeBind1"](1,11,ctx_r1.pageInfoState$))?null:tmp_2_0.totalElements)("hideGear",!0)("hidePagerWhenSinglePage",!0),core["\u0275\u0275advance"](12),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](13,13,ctx_r1.messagePrefix+"table.id")),core["\u0275\u0275advance"](4),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](17,15,ctx_r1.messagePrefix+"table.name")),core["\u0275\u0275advance"](4),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](21,17,ctx_r1.messagePrefix+"table.collectionOrCommunity")),core["\u0275\u0275advance"](4),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](25,19,ctx_r1.messagePrefix+"table.members")),core["\u0275\u0275advance"](4),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](29,21,ctx_r1.messagePrefix+"table.edit")),core["\u0275\u0275advance"](7),core["\u0275\u0275property"]("ngForOf",null==(tmp_10_0=core["\u0275\u0275pipeBind1"](36,23,ctx_r1.groupsDto$))?null:tmp_10_0.page)}}function GroupsRegistryComponent_div_65_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"div",35),core["\u0275\u0275text"](1),core["\u0275\u0275pipe"](2,"translate"),core["\u0275\u0275elementEnd"]()),2&rf){const ctx_r2=core["\u0275\u0275nextContext"]();core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate1"]("\n        ",core["\u0275\u0275pipeBind1"](2,1,ctx_r2.messagePrefix+"no-items"),"\n      ")}}const groups_registry_component_c1=function(){return["newGroup"]};class groups_registry_component_GroupsRegistryComponent{constructor(groupService,ePersonDataService,dSpaceObjectDataService,translateService,notificationsService,formBuilder,routeService,router,authorizationService,paginationService,requestService){this.groupService=groupService,this.ePersonDataService=ePersonDataService,this.dSpaceObjectDataService=dSpaceObjectDataService,this.translateService=translateService,this.notificationsService=notificationsService,this.formBuilder=formBuilder,this.routeService=routeService,this.router=router,this.authorizationService=authorizationService,this.paginationService=paginationService,this.requestService=requestService,this.messagePrefix="admin.access-control.groups.",this.config=Object.assign(new pagination_component_options_model.a,{id:"gl",pageSize:5,currentPage:1}),this.groupsDto$=new BehaviorSubject.a({}),this.deletedGroupsIds=[],this.pageInfoState$=new BehaviorSubject.a(void 0),this.loading$=new BehaviorSubject.a(!1),this.subs=[],this.currentSearchQuery="",this.searchForm=this.formBuilder.group({query:this.currentSearchQuery})}ngOnInit(){this.search({query:this.currentSearchQuery})}search(data){Object(empty_util.b)(this.searchSub)&&(this.searchSub.unsubscribe(),this.subs=this.subs.filter((sub=>sub!==this.searchSub))),this.searchSub=this.paginationService.getCurrentPagination(this.config.id,this.config).pipe(Object(tap.a)((()=>this.loading$.next(!0))),Object(switchMap.a)((paginationOptions=>{const query=data.query;return null!=query&&this.currentSearchQuery!==query&&(this.currentSearchQuery=query,this.paginationService.updateRouteWithUrl(this.config.id,[],{page:1})),this.groupService.searchGroups(this.currentSearchQuery.trim(),{currentPage:paginationOptions.currentPage,elementsPerPage:paginationOptions.pageSize},!0,!0,Object(follow_link_config_model.a)("object"))})),Object(operators.c)(),Object(operators.o)(),Object(switchMap.a)((groups=>0===groups.page.length?Object(of.a)(Object(paginated_list_model.b)(groups.pageInfo,[])):this.authorizationService.isAuthorized(feature_id.a.AdministratorOf).pipe(Object(switchMap.a)((isSiteAdmin=>Object(combineLatest.a)(groups.page.map((group=>{if(Object(empty_util.b)(group)&&!this.deletedGroupsIds.includes(group.id))return Object(combineLatest.a)([this.authorizationService.isAuthorized(feature_id.a.CanDelete,group.self),this.canManageGroup$(isSiteAdmin,group),this.hasLinkedDSO(group),this.getSubgroups(group),this.getMembers(group)]).pipe(Object(map.a)((([canDelete,canManageGroup,hasLinkedDSO,subgroups,members])=>{const groupDtoModel=new GroupDtoModel;return groupDtoModel.ableToDelete=canDelete&&!hasLinkedDSO,groupDtoModel.ableToEdit=canManageGroup,groupDtoModel.group=group,groupDtoModel.subgroups=subgroups.payload,groupDtoModel.epersons=members.payload,groupDtoModel})))}))).pipe(Object(map.a)((dtos=>Object(paginated_list_model.b)(groups.pageInfo,dtos)))))))))).subscribe((value=>{this.groupsDto$.next(value),this.pageInfoState$.next(value.pageInfo),this.loading$.next(!1)})),this.subs.push(this.searchSub)}canManageGroup$(isSiteAdmin,group){return isSiteAdmin?Object(of.a)(!0):this.authorizationService.isAuthorized(feature_id.a.CanManageGroup,group.self)}deleteGroup(group){Object(empty_util.b)(group.group.id)&&this.groupService.delete(group.group.id).pipe(Object(operators.g)()).subscribe((rd=>{rd.hasSucceeded?(this.deletedGroupsIds=[...this.deletedGroupsIds,group.group.id],this.notificationsService.success(this.translateService.get(this.messagePrefix+"notification.deleted.success",{name:group.group.name})),this.reset()):this.notificationsService.error(this.translateService.get(this.messagePrefix+"notification.deleted.failure.title",{name:group.group.name}),this.translateService.get(this.messagePrefix+"notification.deleted.failure.content",{cause:rd.errorMessage}))}))}reset(){this.groupService.getBrowseEndpoint().pipe(Object(take.a)(1)).subscribe((href=>{this.requestService.setStaleByHrefSubstring(href)}))}getMembers(group){return this.ePersonDataService.findAllByHref(group._links.epersons.href).pipe(Object(operators.i)())}getSubgroups(group){return this.groupService.findAllByHref(group._links.subgroups.href).pipe(Object(operators.i)())}hasLinkedDSO(group){return this.dSpaceObjectDataService.findByHref(group._links.object.href).pipe(Object(operators.i)(),Object(map.a)((rd=>Object(empty_util.b)(rd)&&Object(empty_util.b)(rd.payload))),Object(catchError.a)((()=>Object(of.a)(!1))))}clearFormAndResetResult(){this.searchForm.patchValue({query:""}),this.search({query:""})}ngOnDestroy(){this.cleanupSubscribes(),this.paginationService.clearPagination(this.config.id)}cleanupSubscribes(){Object(empty_util.b)(this.paginationSub)&&this.paginationSub.unsubscribe(),this.subs.filter((sub=>Object(empty_util.b)(sub))).forEach((sub=>sub.unsubscribe())),this.paginationService.clearPagination(this.config.id)}}groups_registry_component_GroupsRegistryComponent.\u0275fac=function GroupsRegistryComponent_Factory(t){return new(t||groups_registry_component_GroupsRegistryComponent)(core["\u0275\u0275directiveInject"](group_data_service.a),core["\u0275\u0275directiveInject"](eperson_data_service.a),core["\u0275\u0275directiveInject"](dspace_object_data_service.a),core["\u0275\u0275directiveInject"](ngx_translate_core.e),core["\u0275\u0275directiveInject"](notifications_service.a),core["\u0275\u0275directiveInject"](fesm2015_forms.FormBuilder),core["\u0275\u0275directiveInject"](route_service.a),core["\u0275\u0275directiveInject"](fesm2015_router.g),core["\u0275\u0275directiveInject"](authorization_data_service.a),core["\u0275\u0275directiveInject"](pagination_service.a),core["\u0275\u0275directiveInject"](request_service.a))},groups_registry_component_GroupsRegistryComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:groups_registry_component_GroupsRegistryComponent,selectors:[["ds-groups-registry"]],decls:71,vars:35,consts:[[1,"container"],[1,"groups-registry","row"],[1,"col-12"],[1,"d-flex","justify-content-between","border-bottom","mb-3"],["id","header",1,"pb-2"],[1,"mr-auto","btn","btn-success",3,"routerLink"],[1,"fas","fa-plus"],[1,"d-none","d-sm-inline"],["id","search",1,"border-bottom","pb-2"],[1,"d-flex","justify-content-between",3,"formGroup","ngSubmit"],[1,"flex-grow-1","mr-3"],[1,"form-group","input-group"],["type","text","name","query","id","query","formControlName","query",1,"form-control",3,"placeholder"],[1,"input-group-append"],["type","submit",1,"search-button","btn","btn-primary"],[1,"fas","fa-search"],[1,"btn","btn-secondary",3,"click"],[4,"ngIf"],[3,"paginationOptions","pageInfoState","collectionSize","hideGear","hidePagerWhenSinglePage",4,"ngIf"],["class","alert alert-info w-100 mb-2","role","alert",4,"ngIf"],[3,"paginationOptions","pageInfoState","collectionSize","hideGear","hidePagerWhenSinglePage"],[1,"table-responsive"],["id","groups",1,"table","table-striped","table-hover","table-bordered"],["scope","col"],[4,"ngFor","ngForOf"],[1,"btn-group","edit-field"],[3,"ngSwitch"],["class","btn btn-outline-primary btn-sm btn-edit",3,"routerLink","title",4,"ngSwitchCase"],["class","btn btn-outline-primary btn-sm btn-edit","placement","left",3,"disabled","ngbTooltip",4,"ngSwitchCase"],["class","btn btn-outline-danger btn-sm",3,"title","click",4,"ngIf"],[1,"btn","btn-outline-primary","btn-sm","btn-edit",3,"routerLink","title"],[1,"fas","fa-edit","fa-fw"],["placement","left",1,"btn","btn-outline-primary","btn-sm","btn-edit",3,"disabled","ngbTooltip"],[1,"btn","btn-outline-danger","btn-sm",3,"title","click"],[1,"fas","fa-trash-alt","fa-fw"],["role","alert",1,"alert","alert-info","w-100","mb-2"]],template:function GroupsRegistryComponent_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"div",0),core["\u0275\u0275text"](1,"\n  "),core["\u0275\u0275elementStart"](2,"div",1),core["\u0275\u0275text"](3,"\n    "),core["\u0275\u0275elementStart"](4,"div",2),core["\u0275\u0275text"](5,"\n      "),core["\u0275\u0275elementStart"](6,"div",3),core["\u0275\u0275text"](7,"\n        "),core["\u0275\u0275elementStart"](8,"h2",4),core["\u0275\u0275text"](9),core["\u0275\u0275pipe"](10,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](11,"\n        "),core["\u0275\u0275elementStart"](12,"div"),core["\u0275\u0275text"](13,"\n          "),core["\u0275\u0275elementStart"](14,"button",5),core["\u0275\u0275text"](15,"\n            "),core["\u0275\u0275element"](16,"i",6),core["\u0275\u0275text"](17,"\n            "),core["\u0275\u0275elementStart"](18,"span",7),core["\u0275\u0275text"](19),core["\u0275\u0275pipe"](20,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](21,"\n          "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](22,"\n        "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](23,"\n      "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](24,"\n\n      "),core["\u0275\u0275elementStart"](25,"h3",8),core["\u0275\u0275text"](26),core["\u0275\u0275pipe"](27,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](28,"\n      "),core["\u0275\u0275elementStart"](29,"form",9),core["\u0275\u0275listener"]("ngSubmit",(function GroupsRegistryComponent_Template_form_ngSubmit_29_listener(){return ctx.search(ctx.searchForm.value)})),core["\u0275\u0275text"](30,"\n        "),core["\u0275\u0275elementStart"](31,"div",10),core["\u0275\u0275text"](32,"\n          "),core["\u0275\u0275elementStart"](33,"div",11),core["\u0275\u0275text"](34,"\n            "),core["\u0275\u0275element"](35,"input",12),core["\u0275\u0275pipe"](36,"translate"),core["\u0275\u0275pipe"](37,"translate"),core["\u0275\u0275text"](38,"\n            "),core["\u0275\u0275elementStart"](39,"span",13),core["\u0275\u0275text"](40,"\n              "),core["\u0275\u0275elementStart"](41,"button",14),core["\u0275\u0275text"](42,"\n                "),core["\u0275\u0275element"](43,"i",15),core["\u0275\u0275text"](44),core["\u0275\u0275pipe"](45,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](46,"\n            "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](47,"\n          "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](48,"\n        "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](49,"\n        "),core["\u0275\u0275elementStart"](50,"div"),core["\u0275\u0275text"](51,"\n          "),core["\u0275\u0275elementStart"](52,"button",16),core["\u0275\u0275listener"]("click",(function GroupsRegistryComponent_Template_button_click_52_listener(){return ctx.clearFormAndResetResult()})),core["\u0275\u0275text"](53),core["\u0275\u0275pipe"](54,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](55,"\n        "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](56,"\n      "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](57,"\n\n      "),core["\u0275\u0275template"](58,GroupsRegistryComponent_ds_loading_58_Template,1,0,"ds-loading",17),core["\u0275\u0275pipe"](59,"async"),core["\u0275\u0275text"](60,"\n      "),core["\u0275\u0275template"](61,GroupsRegistryComponent_ds_pagination_61_Template,41,25,"ds-pagination",18),core["\u0275\u0275pipe"](62,"async"),core["\u0275\u0275pipe"](63,"async"),core["\u0275\u0275text"](64,"\n\n      "),core["\u0275\u0275template"](65,GroupsRegistryComponent_div_65_Template,3,3,"div",19),core["\u0275\u0275pipe"](66,"async"),core["\u0275\u0275text"](67,"\n\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](68,"\n  "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](69,"\n"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](70,"\n")),2&rf){let tmp_10_0=null,tmp_11_0=null;core["\u0275\u0275advance"](9),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](10,12,ctx.messagePrefix+"head")),core["\u0275\u0275advance"](5),core["\u0275\u0275property"]("routerLink",core["\u0275\u0275pureFunction0"](34,groups_registry_component_c1)),core["\u0275\u0275advance"](5),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](20,14,ctx.messagePrefix+"button.add")),core["\u0275\u0275advance"](7),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](27,16,ctx.messagePrefix+"search.head")),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("formGroup",ctx.searchForm),core["\u0275\u0275advance"](6),core["\u0275\u0275property"]("placeholder",core["\u0275\u0275pipeBind1"](37,20,ctx.messagePrefix+"search.placeholder")),core["\u0275\u0275attribute"]("aria-label",core["\u0275\u0275pipeBind1"](36,18,ctx.messagePrefix+"search.placeholder")),core["\u0275\u0275advance"](9),core["\u0275\u0275textInterpolate1"](" ",core["\u0275\u0275pipeBind1"](45,22,ctx.messagePrefix+"search.button"),"\n              "),core["\u0275\u0275advance"](9),core["\u0275\u0275textInterpolate1"]("\n            ",core["\u0275\u0275pipeBind1"](54,24,ctx.messagePrefix+"button.see-all"),"\n          "),core["\u0275\u0275advance"](5),core["\u0275\u0275property"]("ngIf",core["\u0275\u0275pipeBind1"](59,26,ctx.loading$)),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("ngIf",(null==(tmp_10_0=core["\u0275\u0275pipeBind1"](62,28,ctx.pageInfoState$))?null:tmp_10_0.totalElements)>0&&!core["\u0275\u0275pipeBind1"](63,30,ctx.loading$)),core["\u0275\u0275advance"](4),core["\u0275\u0275property"]("ngIf",0==(null==(tmp_11_0=core["\u0275\u0275pipeBind1"](66,32,ctx.pageInfoState$))?null:tmp_11_0.totalElements))}},directives:[fesm2015_router.h,fesm2015_forms["\u0275angular_packages_forms_forms_ba"],fesm2015_forms.NgControlStatusGroup,fesm2015_forms.FormGroupDirective,fesm2015_forms.DefaultValueAccessor,fesm2015_forms.NgControlStatus,fesm2015_forms.FormControlName,common.NgIf,loading_component.a,pagination_component.a,common.NgForOf,common.NgSwitch,common.NgSwitchCase,ng_bootstrap.O],pipes:[ngx_translate_core.d,common.AsyncPipe],encapsulation:2});var access_control_routing_paths=__webpack_require__("mOAm"),i18n_breadcrumb_resolver=__webpack_require__("A0IO"),some_feature_authorization_guard=__webpack_require__("a8lL"),hal_endpoint_service=__webpack_require__("uLZQ");class group_page_guard_GroupPageGuard extends some_feature_authorization_guard.a{constructor(halEndpointService,authorizationService,router,authService){super(authorizationService,router,authService),this.halEndpointService=halEndpointService,this.authorizationService=authorizationService,this.router=router,this.authService=authService,this.groupsEndpoint="groups"}getFeatureIDs(route,state){return Object(of.a)([feature_id.a.CanManageGroup])}getObjectUrl(route,state){return this.halEndpointService.getEndpoint(this.groupsEndpoint).pipe(Object(map.a)((groupsUrl=>{var _a;return`${groupsUrl}/${null===(_a=null==route?void 0:route.params)||void 0===_a?void 0:_a.groupId}`})))}}group_page_guard_GroupPageGuard.\u0275fac=function GroupPageGuard_Factory(t){return new(t||group_page_guard_GroupPageGuard)(core["\u0275\u0275inject"](hal_endpoint_service.a),core["\u0275\u0275inject"](authorization_data_service.a),core["\u0275\u0275inject"](fesm2015_router.g),core["\u0275\u0275inject"](auth_service.a))},group_page_guard_GroupPageGuard.\u0275prov=core["\u0275\u0275defineInjectable"]({token:group_page_guard_GroupPageGuard,factory:group_page_guard_GroupPageGuard.\u0275fac,providedIn:"root"});var group_administrator_guard=__webpack_require__("hcYp"),site_administrator_guard=__webpack_require__("Vm9x");class AccessControlRoutingModule{}AccessControlRoutingModule.\u0275fac=function AccessControlRoutingModule_Factory(t){return new(t||AccessControlRoutingModule)},AccessControlRoutingModule.\u0275mod=core["\u0275\u0275defineNgModule"]({type:AccessControlRoutingModule}),AccessControlRoutingModule.\u0275inj=core["\u0275\u0275defineInjector"]({imports:[[fesm2015_router.k.forChild([{path:"epeople",component:epeople_registry_component_EPeopleRegistryComponent,resolve:{breadcrumb:i18n_breadcrumb_resolver.a},data:{title:"admin.access-control.epeople.title",breadcrumbKey:"admin.access-control.epeople"},canActivate:[site_administrator_guard.a]},{path:access_control_routing_paths.a,component:groups_registry_component_GroupsRegistryComponent,resolve:{breadcrumb:i18n_breadcrumb_resolver.a},data:{title:"admin.access-control.groups.title",breadcrumbKey:"admin.access-control.groups"},canActivate:[group_administrator_guard.a]},{path:`${access_control_routing_paths.a}/newGroup`,component:group_form_component_GroupFormComponent,resolve:{breadcrumb:i18n_breadcrumb_resolver.a},data:{title:"admin.access-control.groups.title.addGroup",breadcrumbKey:"admin.access-control.groups.addGroup"},canActivate:[group_administrator_guard.a]},{path:`${access_control_routing_paths.a}/:groupId`,component:group_form_component_GroupFormComponent,resolve:{breadcrumb:i18n_breadcrumb_resolver.a},data:{title:"admin.access-control.groups.title.singleGroup",breadcrumbKey:"admin.access-control.groups.singleGroup"},canActivate:[group_page_guard_GroupPageGuard]}])]]});var form_module=__webpack_require__("kcqd");class AccessControlModule{}AccessControlModule.\u0275fac=function AccessControlModule_Factory(t){return new(t||AccessControlModule)},AccessControlModule.\u0275mod=core["\u0275\u0275defineNgModule"]({type:AccessControlModule}),AccessControlModule.\u0275inj=core["\u0275\u0275defineInjector"]({imports:[[common.CommonModule,shared_module.a,fesm2015_router.k,AccessControlRoutingModule,form_module.a]]})},kcqd:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return FormModule}));var core=__webpack_require__("fXoL"),common=__webpack_require__("ofXK"),form_component=__webpack_require__("hqmO"),fesm2015_core=__webpack_require__("e+Av"),ds_dynamic_form_control_container_component=__webpack_require__("NvTF");function DsDynamicFormComponent_ds_dynamic_form_control_container_0_Template(rf,ctx){if(1&rf){const _r3=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementStart"](0,"ds-dynamic-form-control-container",1),core["\u0275\u0275listener"]("dfBlur",(function DsDynamicFormComponent_ds_dynamic_form_control_container_0_Template_ds_dynamic_form_control_container_dfBlur_0_listener($event){core["\u0275\u0275restoreView"](_r3);const ctx_r2=core["\u0275\u0275nextContext"]();return ctx_r2.onCustomEvent($event,ctx_r2.blur)}))("dfChange",(function DsDynamicFormComponent_ds_dynamic_form_control_container_0_Template_ds_dynamic_form_control_container_dfChange_0_listener($event){core["\u0275\u0275restoreView"](_r3);const ctx_r4=core["\u0275\u0275nextContext"]();return ctx_r4.onCustomEvent($event,ctx_r4.change)}))("dfFocus",(function DsDynamicFormComponent_ds_dynamic_form_control_container_0_Template_ds_dynamic_form_control_container_dfFocus_0_listener($event){core["\u0275\u0275restoreView"](_r3);const ctx_r5=core["\u0275\u0275nextContext"]();return ctx_r5.onCustomEvent($event,ctx_r5.focus)}))("ngbEvent",(function DsDynamicFormComponent_ds_dynamic_form_control_container_0_Template_ds_dynamic_form_control_container_ngbEvent_0_listener($event){core["\u0275\u0275restoreView"](_r3);const ctx_r6=core["\u0275\u0275nextContext"]();return ctx_r6.onCustomEvent($event,ctx_r6.ngbEvent)})),core["\u0275\u0275elementEnd"]()}if(2&rf){const model_r1=ctx.$implicit,ctx_r0=core["\u0275\u0275nextContext"]();core["\u0275\u0275property"]("formId",ctx_r0.formId)("group",ctx_r0.formGroup)("hasErrorMessaging",model_r1.hasErrorMessages)("hidden",model_r1.hidden)("layout",ctx_r0.formLayout)("model",model_r1)("templates",ctx_r0.templates)("asBootstrapFormGroup",!0)}}class ds_dynamic_form_component_DsDynamicFormComponent extends fesm2015_core.x{constructor(changeDetectorRef,componentService){super(changeDetectorRef,componentService),this.blur=new core.EventEmitter,this.change=new core.EventEmitter,this.focus=new core.EventEmitter,this.ngbEvent=new core.EventEmitter}}ds_dynamic_form_component_DsDynamicFormComponent.\u0275fac=function DsDynamicFormComponent_Factory(t){return new(t||ds_dynamic_form_component_DsDynamicFormComponent)(core["\u0275\u0275directiveInject"](core.ChangeDetectorRef),core["\u0275\u0275directiveInject"](fesm2015_core.y))},ds_dynamic_form_component_DsDynamicFormComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:ds_dynamic_form_component_DsDynamicFormComponent,selectors:[["ds-dynamic-form"]],contentQueries:function DsDynamicFormComponent_ContentQueries(rf,ctx,dirIndex){if(1&rf&&core["\u0275\u0275contentQuery"](dirIndex,fesm2015_core.O,0),2&rf){let _t;core["\u0275\u0275queryRefresh"](_t=core["\u0275\u0275loadQuery"]())&&(ctx.templates=_t)}},viewQuery:function DsDynamicFormComponent_Query(rf,ctx){if(1&rf&&core["\u0275\u0275viewQuery"](ds_dynamic_form_control_container_component.a,1),2&rf){let _t;core["\u0275\u0275queryRefresh"](_t=core["\u0275\u0275loadQuery"]())&&(ctx.components=_t)}},inputs:{formId:"formId",formGroup:"formGroup",formModel:"formModel",formLayout:"formLayout"},outputs:{blur:"dfBlur",change:"dfChange",focus:"dfFocus",ngbEvent:"ngbEvent"},features:[core["\u0275\u0275InheritDefinitionFeature"]],decls:2,vars:2,consts:[[3,"formId","group","hasErrorMessaging","hidden","layout","model","templates","asBootstrapFormGroup","dfBlur","dfChange","dfFocus","ngbEvent",4,"ngFor","ngForOf","ngForTrackBy"],[3,"formId","group","hasErrorMessaging","hidden","layout","model","templates","asBootstrapFormGroup","dfBlur","dfChange","dfFocus","ngbEvent"]],template:function DsDynamicFormComponent_Template(rf,ctx){1&rf&&(core["\u0275\u0275template"](0,DsDynamicFormComponent_ds_dynamic_form_control_container_0_Template,1,8,"ds-dynamic-form-control-container",0),core["\u0275\u0275text"](1,"\n")),2&rf&&core["\u0275\u0275property"]("ngForOf",ctx.formModel)("ngForTrackBy",ctx.trackByFn)},directives:[common.NgForOf,ds_dynamic_form_control_container_component.a],encapsulation:2});var dynamic_list_component=__webpack_require__("ZO65"),dynamic_lookup_component=__webpack_require__("0pnk"),dynamic_disabled_component=__webpack_require__("sw+l"),dynamic_lookup_relation_modal_component=__webpack_require__("1Pbu"),dynamic_scrollable_dropdown_component=__webpack_require__("bPV6"),dynamic_tag_component=__webpack_require__("Gu/b"),dynamic_onebox_component=__webpack_require__("A/iK"),dynamic_relation_group_components=__webpack_require__("KKO+"),date_picker_component=__webpack_require__("Ysrn"),dynamic_form_group_component=__webpack_require__("tqJZ"),dynamic_form_array_component=__webpack_require__("ZTun"),dynamic_date_picker_inline_component=__webpack_require__("uyTL"),dynamic_lookup_relation_search_tab_component=__webpack_require__("Ui2r"),dynamic_lookup_relation_selection_tab_component=__webpack_require__("8HnP"),dynamic_lookup_relation_external_source_tab_component=__webpack_require__("zVKZ"),shared_module=__webpack_require__("PCNd"),ngx_translate_core=__webpack_require__("sYmb"),search_module=__webpack_require__("kMeL"),existing_metadata_list_element_component=__webpack_require__("yXJd"),existing_relation_list_element_component=__webpack_require__("/Vzl"),external_source_entry_import_modal_component=__webpack_require__("zGzN"),custom_switch_component=__webpack_require__("xjoE"),ui_ng_bootstrap=__webpack_require__("n7Wa"),fesm2015_forms=__webpack_require__("3Pt+"),drag_drop=__webpack_require__("5+WD");custom_switch_component.a,ds_dynamic_form_control_container_component.a,dynamic_list_component.a,dynamic_lookup_component.a,dynamic_lookup_relation_search_tab_component.a,dynamic_lookup_relation_selection_tab_component.a,dynamic_lookup_relation_external_source_tab_component.a,dynamic_disabled_component.a,dynamic_lookup_relation_modal_component.a,dynamic_scrollable_dropdown_component.a,dynamic_tag_component.a,dynamic_onebox_component.a,dynamic_relation_group_components.a,date_picker_component.b,dynamic_form_group_component.a,dynamic_form_array_component.a,dynamic_date_picker_inline_component.a,existing_metadata_list_element_component.a,existing_relation_list_element_component.a,external_source_entry_import_modal_component.a,form_component.a;class FormModule{}FormModule.\u0275fac=function FormModule_Factory(t){return new(t||FormModule)},FormModule.\u0275mod=core["\u0275\u0275defineNgModule"]({type:FormModule}),FormModule.\u0275inj=core["\u0275\u0275defineInjector"]({providers:[{provide:fesm2015_core.c,useValue:ds_dynamic_form_control_container_component.b}],imports:[[common.CommonModule,fesm2015_core.I,ui_ng_bootstrap.a,search_module.a,shared_module.a,ngx_translate_core.c]]}),core["\u0275\u0275setComponentScope"](dynamic_form_group_component.a,[fesm2015_forms.NgControlStatusGroup,fesm2015_forms.FormGroupDirective,fesm2015_forms.FormGroupName,common.NgClass,common.NgForOf,ds_dynamic_form_control_container_component.a],[]),core["\u0275\u0275setComponentScope"](dynamic_form_array_component.a,[fesm2015_forms.NgControlStatusGroup,fesm2015_forms.FormGroupDirective,fesm2015_forms.FormArrayName,common.NgClass,drag_drop.c,common.NgForOf,drag_drop.a,drag_drop.b,fesm2015_forms.FormGroupName,common.NgTemplateOutlet,ds_dynamic_form_control_container_component.a],[]),core["\u0275\u0275setComponentScope"](form_component.a,[fesm2015_forms["\u0275angular_packages_forms_forms_ba"],fesm2015_forms.NgControlStatusGroup,fesm2015_forms.FormGroupDirective,ds_dynamic_form_component_DsDynamicFormComponent,fesm2015_core.O,common.NgIf],[ngx_translate_core.d,common.AsyncPipe])},mOAm:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return GROUP_EDIT_PATH})),__webpack_require__.d(__webpack_exports__,"b",(function(){return getGroupEditRoute}));var _core_url_combiner_url_combiner__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("zZO8"),_app_routing_paths__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("TVZh");const GROUP_EDIT_PATH="groups";function getGroupEditRoute(id){return new _core_url_combiner_url_combiner__WEBPACK_IMPORTED_MODULE_0__.a(Object(_app_routing_paths__WEBPACK_IMPORTED_MODULE_1__.m)(),GROUP_EDIT_PATH,id).toString()}},tv3Y:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return I18nBreadcrumbsService}));var _breadcrumbs_breadcrumb_breadcrumb_model__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("zr/d"),rxjs__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("LRne"),_angular_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("fXoL");class I18nBreadcrumbsService{getBreadcrumbs(key,url){return Object(rxjs__WEBPACK_IMPORTED_MODULE_1__.a)([new _breadcrumbs_breadcrumb_breadcrumb_model__WEBPACK_IMPORTED_MODULE_0__.a(key+".breadcrumbs",url)])}}I18nBreadcrumbsService.\u0275fac=function I18nBreadcrumbsService_Factory(t){return new(t||I18nBreadcrumbsService)},I18nBreadcrumbsService.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275defineInjectable"]({token:I18nBreadcrumbsService,factory:I18nBreadcrumbsService.\u0275fac,providedIn:"root"})},"zr/d":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return Breadcrumb}));class Breadcrumb{constructor(text,url){this.text=text,this.url=url}}}};