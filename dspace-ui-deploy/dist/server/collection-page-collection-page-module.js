exports.ids=[11,5,6],exports.modules={"+6qv":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return collection_form_component_CollectionFormComponent}));var core=__webpack_require__("fXoL"),fesm2015_core=__webpack_require__("e+Av"),collection_model=__webpack_require__("ye/0"),comcol_form_component=__webpack_require__("XntB"),notifications_service=__webpack_require__("lI3o"),community_data_service=__webpack_require__("mrqg"),auth_service=__webpack_require__("Vurf"),request_service=__webpack_require__("X/78"),object_cache_service=__webpack_require__("mycY"),entity_type_service=__webpack_require__("bxbP"),operators=__webpack_require__("1QIV");const collectionFormEntityTypeSelectionConfig={id:"entityType",name:"dspace.entity.type",disabled:!1},collectionFormModels=[new fesm2015_core.J({id:"title",name:"dc.title",required:!0,validators:{required:null},errorMessages:{required:"Please enter a name for this title"}}),new fesm2015_core.P({id:"description",name:"dc.description"}),new fesm2015_core.P({id:"abstract",name:"dc.description.abstract"}),new fesm2015_core.P({id:"rights",name:"dc.rights"}),new fesm2015_core.P({id:"tableofcontents",name:"dc.description.tableofcontents"}),new fesm2015_core.P({id:"license",name:"dc.rights.license"})];var item_type_resource_type=__webpack_require__("dnwH"),ngx_translate_core=__webpack_require__("sYmb"),var_directive=__webpack_require__("O/5o"),common=__webpack_require__("ofXK"),comcol_page_logo_component=__webpack_require__("ivcV"),uploader_component=__webpack_require__("4zj/"),form_component=__webpack_require__("hqmO");function CollectionFormComponent_ng_container_11_div_2_div_11_button_2_Template(rf,ctx){if(1&rf){const _r9=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementStart"](0,"button",15),core["\u0275\u0275listener"]("click",(function CollectionFormComponent_ng_container_11_div_2_div_11_button_2_Template_button_click_0_listener(){core["\u0275\u0275restoreView"](_r9);return core["\u0275\u0275nextContext"](4).deleteLogo()})),core["\u0275\u0275pipe"](1,"translate"),core["\u0275\u0275text"](2,"\n                "),core["\u0275\u0275element"](3,"i",16),core["\u0275\u0275text"](4,"\n              "),core["\u0275\u0275elementEnd"]()}if(2&rf){const ctx_r6=core["\u0275\u0275nextContext"](4);core["\u0275\u0275propertyInterpolate"]("title",core["\u0275\u0275pipeBind1"](1,1,ctx_r6.type.value+".edit.logo.delete.title"))}}function CollectionFormComponent_ng_container_11_div_2_div_11_button_4_Template(rf,ctx){if(1&rf){const _r11=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementStart"](0,"button",17),core["\u0275\u0275listener"]("click",(function CollectionFormComponent_ng_container_11_div_2_div_11_button_4_Template_button_click_0_listener(){core["\u0275\u0275restoreView"](_r11);return core["\u0275\u0275nextContext"](4).undoDeleteLogo()})),core["\u0275\u0275pipe"](1,"translate"),core["\u0275\u0275text"](2,"\n                "),core["\u0275\u0275element"](3,"i",18),core["\u0275\u0275text"](4,"\n              "),core["\u0275\u0275elementEnd"]()}if(2&rf){const ctx_r7=core["\u0275\u0275nextContext"](4);core["\u0275\u0275propertyInterpolate"]("title",core["\u0275\u0275pipeBind1"](1,1,ctx_r7.type.value+".edit.logo.delete-undo.title"))}}function CollectionFormComponent_ng_container_11_div_2_div_11_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"div",12),core["\u0275\u0275text"](1,"\n              "),core["\u0275\u0275template"](2,CollectionFormComponent_ng_container_11_div_2_div_11_button_2_Template,5,3,"button",13),core["\u0275\u0275text"](3,"\n              "),core["\u0275\u0275template"](4,CollectionFormComponent_ng_container_11_div_2_div_11_button_4_Template,5,3,"button",14),core["\u0275\u0275text"](5,"\n            "),core["\u0275\u0275elementEnd"]()),2&rf){const ctx_r5=core["\u0275\u0275nextContext"](3);core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",!ctx_r5.markLogoForDeletion),core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",ctx_r5.markLogoForDeletion)}}const _c0=function(a0){return{"alert-danger":a0}};function CollectionFormComponent_ng_container_11_div_2_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"div",7),core["\u0275\u0275text"](1,"\n        "),core["\u0275\u0275elementStart"](2,"div",1),core["\u0275\u0275text"](3,"\n          "),core["\u0275\u0275elementStart"](4,"div",8),core["\u0275\u0275text"](5,"\n            "),core["\u0275\u0275element"](6,"ds-comcol-page-logo",9),core["\u0275\u0275text"](7,"\n          "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](8,"\n          "),core["\u0275\u0275elementStart"](9,"div",10),core["\u0275\u0275text"](10,"\n            "),core["\u0275\u0275template"](11,CollectionFormComponent_ng_container_11_div_2_div_11_Template,6,2,"div",11),core["\u0275\u0275text"](12,"\n          "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](13,"\n        "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](14,"\n      "),core["\u0275\u0275elementEnd"]()),2&rf){const logo_r2=core["\u0275\u0275nextContext"]().ngVar,ctx_r3=core["\u0275\u0275nextContext"]();core["\u0275\u0275property"]("ngClass",core["\u0275\u0275pureFunction1"](3,_c0,ctx_r3.markLogoForDeletion)),core["\u0275\u0275advance"](6),core["\u0275\u0275property"]("logo",logo_r2),core["\u0275\u0275advance"](5),core["\u0275\u0275property"]("ngIf",logo_r2)}}function CollectionFormComponent_ng_container_11_div_4_ds_uploader_2_Template(rf,ctx){if(1&rf){const _r15=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementStart"](0,"ds-uploader",20),core["\u0275\u0275listener"]("onCompleteItem",(function CollectionFormComponent_ng_container_11_div_4_ds_uploader_2_Template_ds_uploader_onCompleteItem_0_listener(){core["\u0275\u0275restoreView"](_r15);return core["\u0275\u0275nextContext"](3).onCompleteItem()}))("onUploadError",(function CollectionFormComponent_ng_container_11_div_4_ds_uploader_2_Template_ds_uploader_onUploadError_0_listener(){core["\u0275\u0275restoreView"](_r15);return core["\u0275\u0275nextContext"](3).onUploadError()})),core["\u0275\u0275elementEnd"]()}if(2&rf){const ctx_r13=core["\u0275\u0275nextContext"](3);core["\u0275\u0275property"]("dropMsg",ctx_r13.type.value+".edit.logo.upload")("dropOverDocumentMsg",ctx_r13.type.value+".edit.logo.upload")("enableDragOverDocument",!0)("uploadFilesOptions",ctx_r13.uploadFilesOptions)}}function CollectionFormComponent_ng_container_11_div_4_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"div",2),core["\u0275\u0275text"](1,"\n        "),core["\u0275\u0275template"](2,CollectionFormComponent_ng_container_11_div_4_ds_uploader_2_Template,1,4,"ds-uploader",19),core["\u0275\u0275pipe"](3,"async"),core["\u0275\u0275text"](4,"\n      "),core["\u0275\u0275elementEnd"]()),2&rf){const ctx_r4=core["\u0275\u0275nextContext"](2);core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",core["\u0275\u0275pipeBind1"](3,1,ctx_r4.initializedUploaderOptions))}}function CollectionFormComponent_ng_container_11_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementContainerStart"](0),core["\u0275\u0275text"](1,"\n      "),core["\u0275\u0275template"](2,CollectionFormComponent_ng_container_11_div_2_Template,15,5,"div",5),core["\u0275\u0275text"](3,"\n      "),core["\u0275\u0275template"](4,CollectionFormComponent_ng_container_11_div_4_Template,5,3,"div",6),core["\u0275\u0275text"](5,"\n    "),core["\u0275\u0275elementContainerEnd"]()),2&rf){const logo_r2=ctx.ngVar;core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",logo_r2),core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",!logo_r2)}}function CollectionFormComponent_ds_form_16_Template(rf,ctx){if(1&rf){const _r18=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementStart"](0,"ds-form",21),core["\u0275\u0275listener"]("submitForm",(function CollectionFormComponent_ds_form_16_Template_ds_form_submitForm_0_listener(){core["\u0275\u0275restoreView"](_r18);return core["\u0275\u0275nextContext"]().onSubmit()})),core["\u0275\u0275text"](1,"\n  "),core["\u0275\u0275elementStart"](2,"button",22),core["\u0275\u0275listener"]("click",(function CollectionFormComponent_ds_form_16_Template_button_click_2_listener(){core["\u0275\u0275restoreView"](_r18);return core["\u0275\u0275nextContext"]().back.emit()})),core["\u0275\u0275text"](3,"\n    "),core["\u0275\u0275element"](4,"i",23),core["\u0275\u0275text"](5),core["\u0275\u0275pipe"](6,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](7,"\n"),core["\u0275\u0275elementEnd"]()}if(2&rf){const ctx_r1=core["\u0275\u0275nextContext"]();core["\u0275\u0275property"]("formId","comcol-form-id")("formModel",ctx_r1.formModel)("displayCancel",!1),core["\u0275\u0275advance"](5),core["\u0275\u0275textInterpolate1"](" ",core["\u0275\u0275pipeBind1"](6,4,ctx_r1.type.value+".edit.return"),"\n  ")}}class collection_form_component_CollectionFormComponent extends comcol_form_component.a{constructor(formService,translate,notificationsService,authService,dsoService,requestService,objectCache,entityTypeService){super(formService,translate,notificationsService,authService,requestService,objectCache),this.formService=formService,this.translate=translate,this.notificationsService=notificationsService,this.authService=authService,this.dsoService=dsoService,this.requestService=requestService,this.objectCache=objectCache,this.entityTypeService=entityTypeService,this.dso=new collection_model.a,this.type=collection_model.a.type,this.entityTypeSelection=new fesm2015_core.N(collectionFormEntityTypeSelectionConfig)}ngOnInit(){let currentRelationshipValue;this.dso&&this.dso.metadata&&(currentRelationshipValue=this.dso.metadata["dspace.entity.type"]);this.entityTypeService.findAll({elementsPerPage:100,currentPage:1}).pipe(Object(operators.l)()).subscribe((entityTypes=>{entityTypes.filter((type=>type.label!==item_type_resource_type.b)).forEach(((type,index)=>{this.entityTypeSelection.add({disabled:!1,label:type.label,value:type.label}),currentRelationshipValue&&currentRelationshipValue.length>0&&currentRelationshipValue[0].value===type.label&&(this.entityTypeSelection.select(index),this.entityTypeSelection.disabled=!0)})),this.formModel=[...collectionFormModels,this.entityTypeSelection],super.ngOnInit()}))}}collection_form_component_CollectionFormComponent.\u0275fac=function CollectionFormComponent_Factory(t){return new(t||collection_form_component_CollectionFormComponent)(core["\u0275\u0275directiveInject"](fesm2015_core.G),core["\u0275\u0275directiveInject"](ngx_translate_core.e),core["\u0275\u0275directiveInject"](notifications_service.a),core["\u0275\u0275directiveInject"](auth_service.a),core["\u0275\u0275directiveInject"](community_data_service.a),core["\u0275\u0275directiveInject"](request_service.a),core["\u0275\u0275directiveInject"](object_cache_service.a),core["\u0275\u0275directiveInject"](entity_type_service.a))},collection_form_component_CollectionFormComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:collection_form_component_CollectionFormComponent,selectors:[["ds-collection-form"]],inputs:{dso:"dso"},features:[core["\u0275\u0275InheritDefinitionFeature"]],decls:18,vars:7,consts:[[1,"container-fluid"],[1,"row"],[1,"col-12","d-inline-block"],[4,"ngVar"],[3,"formId","formModel","displayCancel","submitForm",4,"ngIf"],["class","col-12 d-inline-block alert","id","logo-section",3,"ngClass",4,"ngIf"],["class","col-12 d-inline-block",4,"ngIf"],["id","logo-section",1,"col-12","d-inline-block","alert",3,"ngClass"],[1,"col-8","d-inline-block"],[3,"logo"],[1,"col-4","d-inline-block"],["class","btn-group btn-group-sm float-right","role","group",4,"ngIf"],["role","group",1,"btn-group","btn-group-sm","float-right"],["type","button","class","btn btn-danger",3,"title","click",4,"ngIf"],["type","button","class","btn btn-warning",3,"title","click",4,"ngIf"],["type","button",1,"btn","btn-danger",3,"title","click"],["aria-hidden","true",1,"fas","fa-trash"],["type","button",1,"btn","btn-warning",3,"title","click"],["aria-hidden","true",1,"fas","fa-undo"],[3,"dropMsg","dropOverDocumentMsg","enableDragOverDocument","uploadFilesOptions","onCompleteItem","onUploadError",4,"ngIf"],[3,"dropMsg","dropOverDocumentMsg","enableDragOverDocument","uploadFilesOptions","onCompleteItem","onUploadError"],[3,"formId","formModel","displayCancel","submitForm"],["before","",1,"btn","btn-outline-secondary",3,"click"],[1,"fas","fa-arrow-left"]],template:function CollectionFormComponent_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"div",0),core["\u0275\u0275text"](1,"\n  "),core["\u0275\u0275elementStart"](2,"div",1),core["\u0275\u0275text"](3,"\n    "),core["\u0275\u0275elementStart"](4,"div",2),core["\u0275\u0275text"](5,"\n      "),core["\u0275\u0275elementStart"](6,"label"),core["\u0275\u0275text"](7),core["\u0275\u0275pipe"](8,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](9,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](10,"\n    "),core["\u0275\u0275template"](11,CollectionFormComponent_ng_container_11_Template,6,2,"ng-container",3),core["\u0275\u0275pipe"](12,"async"),core["\u0275\u0275text"](13,"\n  "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](14,"\n"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](15,"\n"),core["\u0275\u0275template"](16,CollectionFormComponent_ds_form_16_Template,8,6,"ds-form",4),core["\u0275\u0275text"](17,"\n")),2&rf){let tmp_1_0=null;core["\u0275\u0275advance"](7),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](8,3,ctx.type.value+".edit.logo.label")),core["\u0275\u0275advance"](4),core["\u0275\u0275property"]("ngVar",null==(tmp_1_0=core["\u0275\u0275pipeBind1"](12,5,null==ctx.dso?null:ctx.dso.logo))?null:tmp_1_0.payload),core["\u0275\u0275advance"](5),core["\u0275\u0275property"]("ngIf",ctx.formModel)}},directives:[var_directive.a,common.NgIf,common.NgClass,comcol_page_logo_component.a,uploader_component.a,form_component.a],pipes:[ngx_translate_core.d,common.AsyncPipe],styles:[""]})},"+Bs4":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ResourcePoliciesComponent}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),rxjs__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("2Vo4"),rxjs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("Cfvw"),rxjs_operators__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("pLZG"),rxjs_operators__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("128B"),rxjs_operators__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("lJxs"),rxjs_operators__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("/uUt"),rxjs_operators__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("bOdf"),rxjs_operators__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("Kqap"),rxjs_operators__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("IzEk"),rxjs_operators__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("JX91"),_core_resource_policy_resource_policy_service__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("8a3C"),_core_shared_operators__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("1QIV"),_core_breadcrumbs_dso_name_service__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("C765"),_core_eperson_group_data_service__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("YIpg"),_empty_util__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("J3qs"),_core_eperson_eperson_data_service__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("wLgS"),_core_data_request_service__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("X/78"),_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("lI3o"),_date_util__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("fM99"),_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("84Zn"),_app_routing_paths__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("TVZh"),_access_control_access_control_routing_paths__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__("mOAm"),_angular_router__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__("tyNb"),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__("sYmb"),_angular_common__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__("ofXK"),_ng_for_track_by_id_directive__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__("xPuV"),_angular_forms__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__("3Pt+");function ResourcePoliciesComponent_div_0_span_20_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"span"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n                  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](2,"i",14),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](4,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate1"](" ",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](4,1,"submission.workflow.tasks.generic.processing"),"\n                "))}function ResourcePoliciesComponent_div_0_span_23_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"span"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n                  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](2,"i",15),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](4,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate1"]("\n                  ",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](4,1,"resource-policies.delete.btn"),"\n                "))}function ResourcePoliciesComponent_div_0_tr_91_td_24_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"td"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](2,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()),2&rf){const entry_r4=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]().$implicit,ctx_r5=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"](2);_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate1"]("\n          ",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](2,1,ctx_r5.getEPersonName(entry_r4.policy)),"\n        ")}}function ResourcePoliciesComponent_div_0_tr_91_td_27_Template(rf,ctx){1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](0,"td")}function ResourcePoliciesComponent_div_0_tr_91_td_30_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"td"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](2,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()),2&rf){const entry_r4=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]().$implicit,ctx_r7=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"](2);_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate1"]("\n          ",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](2,1,ctx_r7.getGroupName(entry_r4.policy)),"\n        ")}}function ResourcePoliciesComponent_div_0_tr_91_td_33_Template(rf,ctx){1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](0,"td")}function ResourcePoliciesComponent_div_0_tr_91_button_52_Template(rf,ctx){if(1&rf){const _r14=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275getCurrentView"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"button",19),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("click",(function ResourcePoliciesComponent_div_0_tr_91_button_52_Template_button_click_0_listener(){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r14);const entry_r4=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]().$implicit;return _angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"](2).redirectToGroupEditPage(entry_r4.policy)})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](1,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](2,"\n              "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](3,"i",22),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](4,"\n            "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()}2&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("title",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](1,1,"resource-policies.table.headers.edit.group"))}function ResourcePoliciesComponent_div_0_tr_91_Template(rf,ctx){if(1&rf){const _r16=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275getCurrentView"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"tr"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](2,"td",9),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3,"\n          "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](4,"div",10),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](5,"\n            "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](6,"input",16),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("ngModelChange",(function ResourcePoliciesComponent_div_0_tr_91_Template_input_ngModelChange_6_listener($event){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r16);const entry_r4=ctx.$implicit;return _angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"](2).selectCheckbox(entry_r4,$event)})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](7,"\n            "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](8,"label",12),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](9,"\n          "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](10,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](11,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](12,"th",17),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](13),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](14,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](15,"td"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](16),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](17,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](18,"td"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](19),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](20,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](21,"td"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](22),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](23,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](24,ResourcePoliciesComponent_div_0_tr_91_td_24_Template,3,3,"td",6),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](25,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](26,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](27,ResourcePoliciesComponent_div_0_tr_91_td_27_Template,1,0,"td",6),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](28,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](29,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](30,ResourcePoliciesComponent_div_0_tr_91_td_30_Template,3,3,"td",6),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](31,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](32,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](33,ResourcePoliciesComponent_div_0_tr_91_td_33_Template,1,0,"td",6),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](34,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](35,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](36,"td"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](37),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](38,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](39,"td"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](40),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](41,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](42,"td",9),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](43,"\n\n          "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](44,"div",18),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](45,"\n            "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](46,"button",19),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("click",(function ResourcePoliciesComponent_div_0_tr_91_Template_button_click_46_listener(){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r16);const entry_r4=ctx.$implicit;return _angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"](2).redirectToResourcePolicyEditPage(entry_r4.policy)})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](47,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](48,"\n              "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](49,"i",20),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](50,"\n            "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](51,"\n            "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](52,ResourcePoliciesComponent_div_0_tr_91_button_52_Template,5,3,"button",21),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](53,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](54,"\n          "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](55,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](56,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()}if(2&rf){const entry_r4=ctx.$implicit,ctx_r3=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"](2);_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](6),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("id",entry_r4.id)("ngModel",entry_r4.checked),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("for",entry_r4.id),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](5),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate1"]("\n          ",entry_r4.id,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](entry_r4.policy.name),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](entry_r4.policy.policyType),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](entry_r4.policy.action),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](25,15,ctx_r3.hasEPerson(entry_r4.policy))),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",!_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](28,17,ctx_r3.hasEPerson(entry_r4.policy))),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](31,19,ctx_r3.hasGroup(entry_r4.policy))),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",!_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](34,21,ctx_r3.hasGroup(entry_r4.policy))),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](ctx_r3.formatDate(entry_r4.policy.startDate)),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](ctx_r3.formatDate(entry_r4.policy.endDate)),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](6),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("title",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](47,23,"resource-policies.table.headers.edit.policy")),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](6),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](53,25,ctx_r3.hasGroup(entry_r4.policy)))}}function ResourcePoliciesComponent_div_0_Template(rf,ctx){if(1&rf){const _r19=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275getCurrentView"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div",1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](2,"table",2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](4,"thead"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](5,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](6,"tr"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](7,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](8,"th",3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](9,"\n          "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](10,"div",4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](11),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](12,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](13,"div"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](14,"\n              "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](15,"button",5),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("click",(function ResourcePoliciesComponent_div_0_Template_button_click_15_listener(){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r19);return _angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]().deleteSelectedResourcePolicies()})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](16,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](17,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](18,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](19,"\n                "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](20,ResourcePoliciesComponent_div_0_span_20_Template,5,3,"span",6),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](21,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](22,"\n                "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](23,ResourcePoliciesComponent_div_0_span_23_Template,5,3,"span",6),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](24,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](25,"\n              "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](26,"\n              "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](27,"button",7),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("click",(function ResourcePoliciesComponent_div_0_Template_button_click_27_listener(){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r19);return _angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]().redirectToResourcePolicyCreatePage()})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](28,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](29,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](30,"\n                "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](31,"i",8),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](32),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](33,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](34,"\n            "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](35,"\n          "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](36,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](37,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](38,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](39,"tr",9),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](40,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](41,"th"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](42,"\n          "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](43,"div",10),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](44,"\n            "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](45,"input",11),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("change",(function ResourcePoliciesComponent_div_0_Template_input_change_45_listener($event){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r19);return _angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]().selectAllCheckbox($event)})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](46,"\n            "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](47,"label",12),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](48,"\n          "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](49,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](50,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](51,"th"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](52),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](53,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](54,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](55,"th"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](56),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](57,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](58,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](59,"th"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](60),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](61,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](62,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](63,"th"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](64),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](65,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](66,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](67,"th"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](68),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](69,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](70,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](71,"th"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](72),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](73,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](74,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](75,"th"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](76),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](77,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](78,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](79,"th"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](80),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](81,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](82,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](83,"th"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](84),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](85,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](86,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](87,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](88,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](89,"tbody"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](90,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](91,ResourcePoliciesComponent_div_0_tr_91_Template,57,27,"tr",13),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](92,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](93,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](94,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](95,"\n"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()}if(2&rf){const ctx_r0=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](11),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate2"]("\n            ",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](12,21,"resource-policies.table.headers.title.for."+ctx_r0.resourceType)," ",ctx_r0.resourceUUID,"\n            "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("disabled",!_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](16,23,ctx_r0.canDelete())||_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](17,25,ctx_r0.isProcessingDelete()))("title",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](18,27,"resource-policies.delete.btn.title")),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](5),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](21,29,ctx_r0.isProcessingDelete())),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",!_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](24,31,ctx_r0.isProcessingDelete())),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("disabled",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](28,33,ctx_r0.isProcessingDelete()))("title",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](29,35,"resource-policies.add.for."+ctx_r0.resourceType)),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](5),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate1"]("\n                ",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](33,37,"resource-policies.add.button"),"\n              "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](13),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("id","selectAll_"+ctx_r0.resourceUUID),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("for","selectAll_"+ctx_r0.resourceUUID),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](5),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](53,39,"resource-policies.table.headers.id")),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](57,41,"resource-policies.table.headers.name")),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](61,43,"resource-policies.table.headers.policyType")),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](65,45,"resource-policies.table.headers.action")),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](69,47,"resource-policies.table.headers.eperson")),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](73,49,"resource-policies.table.headers.group")),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](77,51,"resource-policies.table.headers.date.start")),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](81,53,"resource-policies.table.headers.date.end")),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](85,55,"resource-policies.table.headers.edit")),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](7),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngForOf",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](92,57,ctx_r0.getResourcePolicies()))}}class ResourcePoliciesComponent{constructor(cdr,dsoNameService,ePersonService,groupService,notificationsService,requestService,resourcePolicyService,route,router,translate){this.cdr=cdr,this.dsoNameService=dsoNameService,this.ePersonService=ePersonService,this.groupService=groupService,this.notificationsService=notificationsService,this.requestService=requestService,this.resourcePolicyService=resourcePolicyService,this.route=route,this.router=router,this.translate=translate,this.processingDelete$=new rxjs__WEBPACK_IMPORTED_MODULE_1__.a(!1),this.resourcePoliciesEntries$=new rxjs__WEBPACK_IMPORTED_MODULE_1__.a([]),this.subs=[]}ngOnInit(){this.isActive=!0,this.initResourcePolicyLIst()}canDelete(){return Object(rxjs__WEBPACK_IMPORTED_MODULE_2__.a)(this.resourcePoliciesEntries$.value).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.a)((entry=>entry.checked)),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.a)(((acc,value)=>[...acc,value]),[]),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.a)((entries=>Object(_empty_util__WEBPACK_IMPORTED_MODULE_15__.e)(entries))),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.a)())}deleteSelectedResourcePolicies(){this.processingDelete$.next(!0);const policiesToDelete=this.resourcePoliciesEntries$.value.filter((entry=>entry.checked));this.subs.push(Object(rxjs__WEBPACK_IMPORTED_MODULE_2__.a)(policiesToDelete).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.a)((entry=>this.resourcePolicyService.delete(entry.policy.id))),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.a)(((acc,value)=>[...acc,value]),[]),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.a)((results=>results.length===policiesToDelete.length)),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.a)(1)).subscribe((results=>{const failureResults=results.filter((result=>!result));Object(_empty_util__WEBPACK_IMPORTED_MODULE_15__.d)(failureResults)?this.notificationsService.success(null,this.translate.get("resource-policies.delete.success.content")):this.notificationsService.error(null,this.translate.get("resource-policies.delete.failure.content")),this.requestService.setStaleByHrefSubstring(this.resourceUUID),this.processingDelete$.next(!1)})))}formatDate(date){return Object(_empty_util__WEBPACK_IMPORTED_MODULE_15__.e)(date)?Object(_date_util__WEBPACK_IMPORTED_MODULE_19__.b)(Object(_date_util__WEBPACK_IMPORTED_MODULE_19__.d)(date)):""}getEPersonName(policy){return policy.eperson.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.a)((()=>this.isActive)),Object(_core_shared_operators__WEBPACK_IMPORTED_MODULE_12__.k)(),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.a)((eperson=>this.dsoNameService.getName(eperson))),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.a)(""))}getGroupName(policy){return policy.group.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.a)((()=>this.isActive)),Object(_core_shared_operators__WEBPACK_IMPORTED_MODULE_12__.k)(),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.a)((group=>this.dsoNameService.getName(group))),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.a)(""))}getResourcePolicies(){return this.resourcePoliciesEntries$.asObservable()}hasEPerson(policy){return policy.eperson.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.a)((()=>this.isActive)),Object(_core_shared_operators__WEBPACK_IMPORTED_MODULE_12__.j)(),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.a)((eperson=>Object(_empty_util__WEBPACK_IMPORTED_MODULE_15__.e)(eperson))),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.a)(!1))}hasGroup(policy){return policy.group.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.a)((()=>this.isActive)),Object(_core_shared_operators__WEBPACK_IMPORTED_MODULE_12__.j)(),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.a)((group=>Object(_empty_util__WEBPACK_IMPORTED_MODULE_15__.e)(group))),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.a)(!1))}initResourcePolicyLIst(){this.subs.push(this.resourcePolicyService.searchByResource(this.resourceUUID,null,!1,!0,Object(_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_20__.a)("eperson"),Object(_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_20__.a)("group")).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.a)((()=>this.isActive)),Object(_core_shared_operators__WEBPACK_IMPORTED_MODULE_12__.c)()).subscribe((result=>{const entries=result.payload.page.map((policy=>({id:policy.id,policy:policy,checked:!1})));this.resourcePoliciesEntries$.next(entries),this.cdr.detectChanges()})))}isProcessingDelete(){return this.processingDelete$.asObservable()}redirectToResourcePolicyCreatePage(){this.router.navigate(["./create"],{relativeTo:this.route,queryParams:{policyTargetId:this.resourceUUID,targetType:this.resourceType}})}redirectToResourcePolicyEditPage(policy){this.router.navigate(["./edit"],{relativeTo:this.route,queryParams:{policyId:policy.id}})}redirectToGroupEditPage(policy){this.subs.push(this.groupService.findByHref(policy._links.group.href,!1).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.a)((()=>this.isActive)),Object(_core_shared_operators__WEBPACK_IMPORTED_MODULE_12__.j)(),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.a)((group=>group.id))).subscribe((groupUUID=>{this.router.navigate([_app_routing_paths__WEBPACK_IMPORTED_MODULE_21__.a,_access_control_access_control_routing_paths__WEBPACK_IMPORTED_MODULE_22__.a,groupUUID])})))}selectAllCheckbox(event){const checked=event.target.checked;this.resourcePoliciesEntries$.value.forEach((entry=>entry.checked=checked))}selectCheckbox(policyEntry,checked){policyEntry.checked=checked}ngOnDestroy(){this.isActive=!1,this.resourcePoliciesEntries$=null,this.subs.filter((subscription=>Object(_empty_util__WEBPACK_IMPORTED_MODULE_15__.b)(subscription))).forEach((subscription=>subscription.unsubscribe()))}}ResourcePoliciesComponent.\u0275fac=function ResourcePoliciesComponent_Factory(t){return new(t||ResourcePoliciesComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__.ChangeDetectorRef),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_core_breadcrumbs_dso_name_service__WEBPACK_IMPORTED_MODULE_13__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_core_eperson_eperson_data_service__WEBPACK_IMPORTED_MODULE_16__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_core_eperson_group_data_service__WEBPACK_IMPORTED_MODULE_14__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_18__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_core_data_request_service__WEBPACK_IMPORTED_MODULE_17__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_core_resource_policy_resource_policy_service__WEBPACK_IMPORTED_MODULE_11__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_23__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_23__.g),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_ngx_translate_core__WEBPACK_IMPORTED_MODULE_24__.e))},ResourcePoliciesComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineComponent"]({type:ResourcePoliciesComponent,selectors:[["ds-resource-policies"]],inputs:{resourceUUID:"resourceUUID",resourceType:"resourceType"},decls:3,vars:3,consts:[["class","table-responsive",4,"ngIf"],[1,"table-responsive"],[1,"table","table-striped","table-bordered","table-hover"],["colspan","10"],[1,"d-flex","justify-content-between","align-items-center","m-0"],[1,"btn","btn-danger","float-right","ml-1",3,"disabled","title","click"],[4,"ngIf"],[1,"btn","btn-success","float-right",3,"disabled","title","click"],[1,"fas","fa-plus"],[1,"text-center"],[1,"custom-control","custom-checkbox"],["type","checkbox",1,"custom-control-input",3,"id","change"],[1,"custom-control-label",3,"for"],[4,"ngFor","ngForTrackById","ngForOf"],[1,"fas","fa-circle-notch","fa-spin"],[1,"fas","fa-trash-alt","fa-fw"],["type","checkbox",1,"custom-control-input",3,"id","ngModel","ngModelChange"],["scope","row"],[1,"btn-group","edit-field"],[1,"btn","btn-outline-primary","btn-sm",3,"title","click"],[1,"fas","fa-edit","fa-fw"],["class","btn btn-outline-primary btn-sm",3,"title","click",4,"ngIf"],[1,"fas","fa-users","fa-fw"]],template:function ResourcePoliciesComponent_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](0,ResourcePoliciesComponent_div_0_Template,96,59,"div",0),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](1,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](2,"\n")),2&rf){let tmp_0_0=null;_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",(null==(tmp_0_0=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](1,1,ctx.getResourcePolicies()))?null:tmp_0_0.length)>0)}},directives:[_angular_common__WEBPACK_IMPORTED_MODULE_25__.NgIf,_angular_common__WEBPACK_IMPORTED_MODULE_25__.NgForOf,_ng_for_track_by_id_directive__WEBPACK_IMPORTED_MODULE_26__.a,_angular_forms__WEBPACK_IMPORTED_MODULE_27__.CheckboxControlValueAccessor,_angular_forms__WEBPACK_IMPORTED_MODULE_27__.NgControlStatus,_angular_forms__WEBPACK_IMPORTED_MODULE_27__.NgModel],pipes:[_angular_common__WEBPACK_IMPORTED_MODULE_25__.AsyncPipe,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_24__.d],styles:["td[_ngcontent-%COMP%]   .btn-link[_ngcontent-%COMP%]:focus{-webkit-box-shadow:none!important;box-shadow:none!important}"]})},"/I7b":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ComcolPageContentComponent}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),_angular_common__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("ofXK"),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("sYmb");function ComcolPageContentComponent_div_0_h2_2_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"h2"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](2,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()),2&rf){const ctx_r1=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"](2);_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](2,1,ctx_r1.title))}}function ComcolPageContentComponent_div_0_div_4_Template(rf,ctx){if(1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](0,"div",4),2&rf){const ctx_r2=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"](2);_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("innerHtml",ctx_r2.content,_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275sanitizeHtml"])}}function ComcolPageContentComponent_div_0_div_6_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()),2&rf){const ctx_r3=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"](2);_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](ctx_r3.content)}}function ComcolPageContentComponent_div_0_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div",1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](2,ComcolPageContentComponent_div_0_h2_2_Template,3,3,"h2",2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](4,ComcolPageContentComponent_div_0_div_4_Template,1,1,"div",3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](5,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](6,ComcolPageContentComponent_div_0_div_6_Template,2,1,"div",2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](7,"\n"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()),2&rf){const ctx_r0=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",ctx_r0.title),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",ctx_r0.hasInnerHtml),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",!ctx_r0.hasInnerHtml)}}class ComcolPageContentComponent{}ComcolPageContentComponent.\u0275fac=function ComcolPageContentComponent_Factory(t){return new(t||ComcolPageContentComponent)},ComcolPageContentComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineComponent"]({type:ComcolPageContentComponent,selectors:[["ds-comcol-page-content"]],inputs:{title:"title",content:"content",hasInnerHtml:"hasInnerHtml"},decls:2,vars:1,consts:[["class","content-with-optional-title mb-2",4,"ngIf"],[1,"content-with-optional-title","mb-2"],[4,"ngIf"],[3,"innerHtml",4,"ngIf"],[3,"innerHtml"]],template:function ComcolPageContentComponent_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](0,ComcolPageContentComponent_div_0_Template,8,3,"div",0),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n")),2&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",ctx.content)},directives:[_angular_common__WEBPACK_IMPORTED_MODULE_1__.NgIf],pipes:[_ngx_translate_core__WEBPACK_IMPORTED_MODULE_2__.d],styles:[""]})},"0EDX":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return comcol_role_component_ComcolRoleComponent}));var core=__webpack_require__("fXoL"),BehaviorSubject=__webpack_require__("2Vo4"),group_data_service=__webpack_require__("YIpg"),filter=__webpack_require__("pLZG"),switchMap=__webpack_require__("eIep"),map=__webpack_require__("lJxs"),operators=__webpack_require__("1QIV"),request_service=__webpack_require__("X/78");var access_control_routing_paths=__webpack_require__("mOAm"),empty_util=__webpack_require__("J3qs"),var_directive=__webpack_require__("O/5o"),alert_component=__webpack_require__("VYMa"),common=__webpack_require__("ofXK"),loading_component=__webpack_require__("Frqi"),router=__webpack_require__("tyNb"),ngx_translate_core=__webpack_require__("sYmb");function ComcolRoleComponent_div_3_ds_loading_19_Template(rf,ctx){1&rf&&core["\u0275\u0275element"](0,"ds-loading")}function ComcolRoleComponent_div_3_div_22_Template(rf,ctx){1&rf&&(core["\u0275\u0275elementStart"](0,"div"),core["\u0275\u0275text"](1),core["\u0275\u0275pipe"](2,"translate"),core["\u0275\u0275elementEnd"]()),2&rf&&(core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate1"]("\n          ",core["\u0275\u0275pipeBind1"](2,1,"comcol-role.edit.no-group"),"\n        "))}function ComcolRoleComponent_div_3_div_25_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"div"),core["\u0275\u0275text"](1),core["\u0275\u0275pipe"](2,"translate"),core["\u0275\u0275pipe"](3,"async"),core["\u0275\u0275elementEnd"]()),2&rf){const ctx_r4=core["\u0275\u0275nextContext"](2);let tmp_0_0=null;core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate1"]("\n          ",core["\u0275\u0275pipeBind1"](2,1,"comcol-role.edit."+(null==(tmp_0_0=core["\u0275\u0275pipeBind1"](3,3,ctx_r4.comcolRole$))?null:tmp_0_0.name)+".anonymous-group"),"\n        ")}}function ComcolRoleComponent_div_3_a_28_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"a",13),core["\u0275\u0275pipe"](1,"async"),core["\u0275\u0275text"](2),core["\u0275\u0275elementEnd"]()),2&rf){const group_r1=core["\u0275\u0275nextContext"]().ngVar,ctx_r5=core["\u0275\u0275nextContext"]();core["\u0275\u0275propertyInterpolate"]("routerLink",core["\u0275\u0275pipeBind1"](1,2,ctx_r5.editGroupLink$)),core["\u0275\u0275advance"](2),core["\u0275\u0275textInterpolate1"]("\n          ",group_r1.name,"\n        ")}}function ComcolRoleComponent_div_3_button_34_Template(rf,ctx){if(1&rf){const _r11=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementStart"](0,"button",14),core["\u0275\u0275listener"]("click",(function ComcolRoleComponent_div_3_button_34_Template_button_click_0_listener(){core["\u0275\u0275restoreView"](_r11);return core["\u0275\u0275nextContext"](2).create()})),core["\u0275\u0275text"](1,"\n          "),core["\u0275\u0275element"](2,"i",15),core["\u0275\u0275text"](3),core["\u0275\u0275pipe"](4,"translate"),core["\u0275\u0275elementEnd"]()}2&rf&&(core["\u0275\u0275advance"](3),core["\u0275\u0275textInterpolate1"](" ",core["\u0275\u0275pipeBind1"](4,1,"comcol-role.edit.create"),"\n        "))}function ComcolRoleComponent_div_3_button_37_Template(rf,ctx){if(1&rf){const _r13=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementStart"](0,"button",16),core["\u0275\u0275listener"]("click",(function ComcolRoleComponent_div_3_button_37_Template_button_click_0_listener(){core["\u0275\u0275restoreView"](_r13);return core["\u0275\u0275nextContext"](2).create()})),core["\u0275\u0275text"](1),core["\u0275\u0275pipe"](2,"translate"),core["\u0275\u0275elementEnd"]()}2&rf&&(core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate1"]("\n          ",core["\u0275\u0275pipeBind1"](2,1,"comcol-role.edit.restrict"),"\n        "))}function ComcolRoleComponent_div_3_button_40_Template(rf,ctx){if(1&rf){const _r15=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementStart"](0,"button",17),core["\u0275\u0275listener"]("click",(function ComcolRoleComponent_div_3_button_40_Template_button_click_0_listener(){core["\u0275\u0275restoreView"](_r15);return core["\u0275\u0275nextContext"](2).delete()})),core["\u0275\u0275text"](1,"\n          "),core["\u0275\u0275element"](2,"i",18),core["\u0275\u0275text"](3),core["\u0275\u0275pipe"](4,"translate"),core["\u0275\u0275elementEnd"]()}2&rf&&(core["\u0275\u0275advance"](3),core["\u0275\u0275textInterpolate1"](" ",core["\u0275\u0275pipeBind1"](4,1,"comcol-role.edit.delete"),"\n        "))}function ComcolRoleComponent_div_3_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"div",1),core["\u0275\u0275text"](1,"\n\n    "),core["\u0275\u0275elementStart"](2,"h5",2),core["\u0275\u0275text"](3),core["\u0275\u0275pipe"](4,"translate"),core["\u0275\u0275pipe"](5,"async"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](6,"\n\n    "),core["\u0275\u0275elementStart"](7,"div",3),core["\u0275\u0275text"](8,"\n      "),core["\u0275\u0275elementStart"](9,"ds-alert",4),core["\u0275\u0275text"](10),core["\u0275\u0275pipe"](11,"translate"),core["\u0275\u0275pipe"](12,"async"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](13,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](14,"\n\n    "),core["\u0275\u0275elementStart"](15,"div",5),core["\u0275\u0275text"](16,"\n      "),core["\u0275\u0275elementStart"](17,"div",6),core["\u0275\u0275text"](18,"\n        "),core["\u0275\u0275template"](19,ComcolRoleComponent_div_3_ds_loading_19_Template,1,0,"ds-loading",7),core["\u0275\u0275pipe"](20,"async"),core["\u0275\u0275text"](21,"\n        "),core["\u0275\u0275template"](22,ComcolRoleComponent_div_3_div_22_Template,3,3,"div",7),core["\u0275\u0275pipe"](23,"async"),core["\u0275\u0275text"](24,"\n        "),core["\u0275\u0275template"](25,ComcolRoleComponent_div_3_div_25_Template,4,5,"div",7),core["\u0275\u0275pipe"](26,"async"),core["\u0275\u0275text"](27,"\n        "),core["\u0275\u0275template"](28,ComcolRoleComponent_div_3_a_28_Template,3,4,"a",8),core["\u0275\u0275pipe"](29,"async"),core["\u0275\u0275text"](30,"\n      "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](31,"\n\n      "),core["\u0275\u0275elementStart"](32,"div",9),core["\u0275\u0275text"](33,"\n        "),core["\u0275\u0275template"](34,ComcolRoleComponent_div_3_button_34_Template,5,3,"button",10),core["\u0275\u0275pipe"](35,"async"),core["\u0275\u0275text"](36,"\n        "),core["\u0275\u0275template"](37,ComcolRoleComponent_div_3_button_37_Template,3,3,"button",11),core["\u0275\u0275pipe"](38,"async"),core["\u0275\u0275text"](39,"\n        "),core["\u0275\u0275template"](40,ComcolRoleComponent_div_3_button_40_Template,5,3,"button",12),core["\u0275\u0275pipe"](41,"async"),core["\u0275\u0275text"](42,"\n      "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](43,"\n\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](44,"\n\n\n  "),core["\u0275\u0275elementEnd"]()),2&rf){const ctx_r0=core["\u0275\u0275nextContext"]();let tmp_0_0=null,tmp_2_0=null;core["\u0275\u0275advance"](3),core["\u0275\u0275textInterpolate1"]("\n      ",core["\u0275\u0275pipeBind1"](4,10,"comcol-role.edit."+(null==(tmp_0_0=core["\u0275\u0275pipeBind1"](5,12,ctx_r0.comcolRole$))?null:tmp_0_0.name)+".name"),"\n    "),core["\u0275\u0275advance"](6),core["\u0275\u0275property"]("type","alert-info"),core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](11,14,"comcol-role.edit."+(null==(tmp_2_0=core["\u0275\u0275pipeBind1"](12,16,ctx_r0.comcolRole$))?null:tmp_2_0.name)+".description")),core["\u0275\u0275advance"](9),core["\u0275\u0275property"]("ngIf",!core["\u0275\u0275pipeBind1"](20,18,ctx_r0.groupRD$)),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("ngIf",core["\u0275\u0275pipeBind1"](23,20,ctx_r0.hasNoGroup$)),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("ngIf",core["\u0275\u0275pipeBind1"](26,22,ctx_r0.hasAnonymousGroup$)),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("ngIf",core["\u0275\u0275pipeBind1"](29,24,ctx_r0.hasCustomGroup$)),core["\u0275\u0275advance"](6),core["\u0275\u0275property"]("ngIf",core["\u0275\u0275pipeBind1"](35,26,ctx_r0.hasNoGroup$)),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("ngIf",core["\u0275\u0275pipeBind1"](38,28,ctx_r0.hasAnonymousGroup$)),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("ngIf",core["\u0275\u0275pipeBind1"](41,30,ctx_r0.hasCustomGroup$))}}class comcol_role_component_ComcolRoleComponent{constructor(requestService,groupService){this.requestService=requestService,this.groupService=groupService,this.comcolRole$=new BehaviorSubject.a(void 0)}get groupLink(){return this.comcolRole.href}set comcolRole(newRole){this.comcolRole$.next(newRole)}get comcolRole(){return this.comcolRole$.getValue()}create(){this.groupService.createComcolGroup(this.dso,this.comcolRole.name,this.groupLink).pipe(Object(operators.g)()).subscribe((rd=>{rd.hasSucceeded&&(this.groupService.clearGroupsRequests(),this.requestService.setStaleByHrefSubstring(this.comcolRole.href))}))}delete(){this.groupService.deleteComcolGroup(this.groupLink).pipe(Object(operators.g)()).subscribe((rd=>{rd.hasSucceeded&&(this.groupService.clearGroupsRequests(),this.requestService.setStaleByHrefSubstring(this.comcolRole.href))}))}ngOnInit(){this.groupRD$=this.comcolRole$.pipe(Object(filter.a)((role=>Object(empty_util.b)(role))),Object(switchMap.a)((role=>this.groupService.findByHref(role.href))),Object(operators.b)()),this.group$=this.groupRD$.pipe(Object(map.a)((rd=>Object(empty_util.b)(rd.payload)?rd.payload:void 0))),this.editGroupLink$=this.group$.pipe(Object(map.a)((group=>Object(empty_util.b)(group)?Object(access_control_routing_paths.b)(group.id):void 0))),this.hasNoGroup$=this.group$.pipe(Object(map.a)((group=>Object(empty_util.a)(group)))),this.hasAnonymousGroup$=this.group$.pipe(Object(map.a)((group=>Object(empty_util.b)(group)&&"Anonymous"===group.name))),this.hasCustomGroup$=this.group$.pipe(Object(map.a)((group=>Object(empty_util.b)(group)&&"Anonymous"!==group.name)))}}comcol_role_component_ComcolRoleComponent.\u0275fac=function ComcolRoleComponent_Factory(t){return new(t||comcol_role_component_ComcolRoleComponent)(core["\u0275\u0275directiveInject"](request_service.a),core["\u0275\u0275directiveInject"](group_data_service.a))},comcol_role_component_ComcolRoleComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:comcol_role_component_ComcolRoleComponent,selectors:[["ds-comcol-role"]],inputs:{dso:"dso",comcolRole:"comcolRole"},decls:7,vars:8,consts:[["class","card-body d-flex flex-column",4,"ngVar"],[1,"card-body","d-flex","flex-column"],[1,"w-100"],[1,"mt-2","mb-2"],[3,"type"],[1,"d-flex","flex-md-row","justify-content-between","flex-column"],[1,"w-100","d-flex","align-items-center"],[4,"ngIf"],[3,"routerLink",4,"ngIf"],[1,"flex-shrink-0"],["class","btn btn-primary create",3,"click",4,"ngIf"],["class","btn btn-primary restrict",3,"click",4,"ngIf"],["class","btn btn-danger delete",3,"click",4,"ngIf"],[3,"routerLink"],[1,"btn","btn-primary","create",3,"click"],["aria-hidden","true",1,"fas","fa-plus"],[1,"btn","btn-primary","restrict",3,"click"],[1,"btn","btn-danger","delete",3,"click"],["aria-hidden","true",1,"fas","fa-trash"]],template:function ComcolRoleComponent_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"div"),core["\u0275\u0275pipe"](1,"async"),core["\u0275\u0275text"](2,"\n\n  "),core["\u0275\u0275template"](3,ComcolRoleComponent_div_3_Template,45,32,"div",0),core["\u0275\u0275pipe"](4,"async"),core["\u0275\u0275text"](5,"\n\n"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](6,"\n")),2&rf){let tmp_0_0=null;core["\u0275\u0275classMapInterpolate1"]("card p-2 m-3 ",null==(tmp_0_0=core["\u0275\u0275pipeBind1"](1,4,ctx.comcolRole$))?null:tmp_0_0.name,""),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("ngVar",core["\u0275\u0275pipeBind1"](4,6,ctx.group$))}},directives:[var_directive.a,alert_component.a,common.NgIf,loading_component.a,router.j],pipes:[common.AsyncPipe,ngx_translate_core.d],styles:[""]})},"0TMo":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return DsoPageSingleFeatureGuard}));var _dso_page_some_feature_guard__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("HENg"),rxjs_operators__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("lJxs");class DsoPageSingleFeatureGuard extends _dso_page_some_feature_guard__WEBPACK_IMPORTED_MODULE_0__.a{getFeatureIDs(route,state){return this.getFeatureID(route,state).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_1__.a)((featureID=>[featureID])))}}},"0qNx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ComcolPageHandleComponent}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),_angular_common__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("ofXK"),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("sYmb");function ComcolPageHandleComponent_div_0_h2_2_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"h2",5),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](2,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()),2&rf){const ctx_r1=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"](2);_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](2,1,ctx_r1.title))}}function ComcolPageHandleComponent_div_0_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div",1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](2,ComcolPageHandleComponent_div_0_h2_2_Template,3,3,"h2",2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](4,"div",3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](5,"a",4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](6),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](7,"\n"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()),2&rf){const ctx_r0=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",ctx_r0.title),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275propertyInterpolate"]("href",ctx_r0.getHandle(),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275sanitizeUrl"]),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](ctx_r0.getHandle())}}class ComcolPageHandleComponent{getHandle(){return this.content}}ComcolPageHandleComponent.\u0275fac=function ComcolPageHandleComponent_Factory(t){return new(t||ComcolPageHandleComponent)},ComcolPageHandleComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineComponent"]({type:ComcolPageHandleComponent,selectors:[["ds-comcol-page-handle"]],inputs:{title:"title",content:"content"},decls:2,vars:1,consts:[["class","content-with-optional-title mb-2",4,"ngIf"],[1,"content-with-optional-title","mb-2"],["class","d-inline-block h6",4,"ngIf"],[1,"d-inline-block"],[3,"href"],[1,"d-inline-block","h6"]],template:function ComcolPageHandleComponent_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](0,ComcolPageHandleComponent_div_0_Template,8,3,"div",0),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n")),2&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",ctx.content)},directives:[_angular_common__WEBPACK_IMPORTED_MODULE_1__.NgIf],pipes:[_ngx_translate_core__WEBPACK_IMPORTED_MODULE_2__.d],styles:["div[_ngcontent-%COMP%]{word-break:break-word;word-wrap:break-word}"]}),ComcolPageHandleComponent.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineInjectable"]({token:ComcolPageHandleComponent,factory:ComcolPageHandleComponent.\u0275fac})},"0qhl":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ConfigurationSearchPageGuard}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL");class ConfigurationSearchPageGuard{canActivate(route,state){const newTitle=route.params.configuration+".search.title";return route.data={title:newTitle},!0}}ConfigurationSearchPageGuard.\u0275fac=function ConfigurationSearchPageGuard_Factory(t){return new(t||ConfigurationSearchPageGuard)},ConfigurationSearchPageGuard.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineInjectable"]({token:ConfigurationSearchPageGuard,factory:ConfigurationSearchPageGuard.\u0275fac})},"4vdZ":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return item_metadata_component_ItemMetadataComponent}));var core=__webpack_require__("fXoL"),item_data_service=__webpack_require__("iqTE"),object_updates_service=__webpack_require__("loKC"),lodash=__webpack_require__("LvDl"),first=__webpack_require__("SxV6"),switchMap=__webpack_require__("eIep"),operators=__webpack_require__("1QIV"),notifications_service=__webpack_require__("lI3o"),metadata_models=__webpack_require__("cBt8"),abstract_item_update_component=__webpack_require__("GsQf"),empty_util=__webpack_require__("J3qs"),aletr_type=__webpack_require__("ac5F"),object_updates_actions=__webpack_require__("X8f1");class MetadataPatchOperation{constructor(op,field){this.op=op,this.field=field}}class metadata_patch_add_operation_model_MetadataPatchAddOperation extends MetadataPatchOperation{constructor(field,value){super(metadata_patch_add_operation_model_MetadataPatchAddOperation.operationType,field),this.value=value}toOperation(){return{op:this.op,path:`/metadata/${this.field}/-`,value:this.value}}}metadata_patch_add_operation_model_MetadataPatchAddOperation.operationType="add";class metadata_patch_remove_operation_model_MetadataPatchRemoveOperation extends MetadataPatchOperation{constructor(field,place){super(metadata_patch_remove_operation_model_MetadataPatchRemoveOperation.operationType,field),this.place=place}toOperation(){return{op:this.op,path:`/metadata/${this.field}/${this.place}`}}}metadata_patch_remove_operation_model_MetadataPatchRemoveOperation.operationType="remove";class metadata_patch_replace_operation_model_MetadataPatchReplaceOperation extends MetadataPatchOperation{constructor(field,place,value){super(metadata_patch_replace_operation_model_MetadataPatchReplaceOperation.operationType,field),this.place=place,this.value=value}toOperation(){return{op:this.op,path:`/metadata/${this.field}/${this.place}`,value:this.value}}}metadata_patch_replace_operation_model_MetadataPatchReplaceOperation.operationType="replace";class metadata_patch_operation_service_MetadataPatchOperationService{fieldUpdatesToPatchOperations(fieldUpdates){const metadataPatch=this.fieldUpdatesToMetadataPatchOperations(fieldUpdates),metadataRemoveMap=new Map,patch=[];return metadataPatch.forEach((operation=>{operation.op!==metadata_patch_remove_operation_model_MetadataPatchRemoveOperation.operationType&&operation.op!==metadata_patch_replace_operation_model_MetadataPatchReplaceOperation.operationType||!Object(empty_util.b)(operation.place)||metadataRemoveMap.has(operation.field)&&metadataRemoveMap.get(operation.field).forEach((index=>{index<operation.place&&operation.place--})),operation.op===metadata_patch_remove_operation_model_MetadataPatchRemoveOperation.operationType&&Object(empty_util.b)(operation.place)&&(metadataRemoveMap.has(operation.field)||metadataRemoveMap.set(operation.field,[]),metadataRemoveMap.get(operation.field).push(operation.place)),patch.push(operation.toOperation())})),patch}fieldUpdatesToMetadataPatchOperations(fieldUpdates){const metadataPatch=[];return Object.keys(fieldUpdates).forEach((uuid=>{const update=fieldUpdates[uuid],metadatum=update.field,val={value:metadatum.value,language:metadatum.language};let operation;switch(update.changeType){case object_updates_actions.c.ADD:operation=new metadata_patch_add_operation_model_MetadataPatchAddOperation(metadatum.key,[val]);break;case object_updates_actions.c.REMOVE:operation=new metadata_patch_remove_operation_model_MetadataPatchRemoveOperation(metadatum.key,metadatum.place);break;case object_updates_actions.c.UPDATE:operation=new metadata_patch_replace_operation_model_MetadataPatchReplaceOperation(metadatum.key,metadatum.place,val)}metadataPatch.push(operation)})),metadataPatch}}metadata_patch_operation_service_MetadataPatchOperationService.\u0275fac=function MetadataPatchOperationService_Factory(t){return new(t||metadata_patch_operation_service_MetadataPatchOperationService)},metadata_patch_operation_service_MetadataPatchOperationService.\u0275prov=core["\u0275\u0275defineInjectable"]({token:metadata_patch_operation_service_MetadataPatchOperationService,factory:metadata_patch_operation_service_MetadataPatchOperationService.\u0275fac,providedIn:"root"});var fesm2015_router=__webpack_require__("tyNb"),ngx_translate_core=__webpack_require__("sYmb"),common=__webpack_require__("ofXK"),edit_in_place_field_component=__webpack_require__("mo41"),alert_component=__webpack_require__("VYMa"),object_values_pipe=__webpack_require__("snSO");function ItemMetadataComponent_button_12_Template(rf,ctx){if(1&rf){const _r7=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementStart"](0,"button",14),core["\u0275\u0275listener"]("click",(function ItemMetadataComponent_button_12_Template_button_click_0_listener(){core["\u0275\u0275restoreView"](_r7);return core["\u0275\u0275nextContext"]().reinstate()})),core["\u0275\u0275element"](1,"i",15),core["\u0275\u0275text"](2,"\n      "),core["\u0275\u0275elementStart"](3,"span",4),core["\u0275\u0275text"](4),core["\u0275\u0275pipe"](5,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](6,"\n    "),core["\u0275\u0275elementEnd"]()}2&rf&&(core["\u0275\u0275advance"](4),core["\u0275\u0275textInterpolate1"]("\xa0",core["\u0275\u0275pipeBind1"](5,1,"item.edit.metadata.reinstate-button"),""))}function ItemMetadataComponent_button_25_Template(rf,ctx){if(1&rf){const _r9=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementStart"](0,"button",16),core["\u0275\u0275listener"]("click",(function ItemMetadataComponent_button_25_Template_button_click_0_listener(){core["\u0275\u0275restoreView"](_r9);return core["\u0275\u0275nextContext"]().discard()})),core["\u0275\u0275pipe"](1,"async"),core["\u0275\u0275element"](2,"i",17),core["\u0275\u0275text"](3,"\n      "),core["\u0275\u0275elementStart"](4,"span",4),core["\u0275\u0275text"](5),core["\u0275\u0275pipe"](6,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](7,"\n    "),core["\u0275\u0275elementEnd"]()}if(2&rf){const ctx_r1=core["\u0275\u0275nextContext"]();core["\u0275\u0275property"]("disabled",!core["\u0275\u0275pipeBind1"](1,2,ctx_r1.hasChanges())),core["\u0275\u0275advance"](5),core["\u0275\u0275textInterpolate1"]("\xa0",core["\u0275\u0275pipeBind1"](6,4,"item.edit.metadata.discard-button"),"")}}const _c0=function(){return{}},_c1=function(a0,a1,a2){return{"table-warning":a0,"table-danger":a1,"table-success":a2}};function ItemMetadataComponent_table_29_tr_29_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"tr",24),core["\u0275\u0275text"](1,"\n\n    "),core["\u0275\u0275elementEnd"]()),2&rf){const updateValue_r11=ctx.$implicit,ctx_r10=core["\u0275\u0275nextContext"](2);core["\u0275\u0275property"]("fieldUpdate",updateValue_r11||core["\u0275\u0275pureFunction0"](3,_c0))("url",ctx_r10.url)("ngClass",core["\u0275\u0275pureFunction3"](4,_c1,0===updateValue_r11.changeType,2===updateValue_r11.changeType,1===updateValue_r11.changeType))}}function ItemMetadataComponent_table_29_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"table",18),core["\u0275\u0275text"](1,"\n    "),core["\u0275\u0275elementStart"](2,"thead"),core["\u0275\u0275text"](3,"\n    "),core["\u0275\u0275elementStart"](4,"tr"),core["\u0275\u0275text"](5,"\n      "),core["\u0275\u0275elementStart"](6,"th"),core["\u0275\u0275elementStart"](7,"span",19),core["\u0275\u0275text"](8),core["\u0275\u0275pipe"](9,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](10,"\n      "),core["\u0275\u0275elementStart"](11,"th"),core["\u0275\u0275elementStart"](12,"span",20),core["\u0275\u0275text"](13),core["\u0275\u0275pipe"](14,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](15,"\n      "),core["\u0275\u0275elementStart"](16,"th",21),core["\u0275\u0275elementStart"](17,"span",22),core["\u0275\u0275text"](18),core["\u0275\u0275pipe"](19,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](20,"\n      "),core["\u0275\u0275elementStart"](21,"th",21),core["\u0275\u0275text"](22),core["\u0275\u0275pipe"](23,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](24,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](25,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](26,"\n    "),core["\u0275\u0275elementStart"](27,"tbody"),core["\u0275\u0275text"](28,"\n    "),core["\u0275\u0275template"](29,ItemMetadataComponent_table_29_tr_29_Template,2,8,"tr",23),core["\u0275\u0275pipe"](30,"dsObjectValues"),core["\u0275\u0275pipe"](31,"async"),core["\u0275\u0275text"](32,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](33,"\n  "),core["\u0275\u0275elementEnd"]()),2&rf){const ctx_r2=core["\u0275\u0275nextContext"]();core["\u0275\u0275advance"](8),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](9,6,"item.edit.metadata.headers.field")),core["\u0275\u0275advance"](5),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](14,8,"item.edit.metadata.headers.value")),core["\u0275\u0275advance"](5),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](19,10,"item.edit.metadata.headers.language")),core["\u0275\u0275advance"](4),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](23,12,"item.edit.metadata.headers.edit")),core["\u0275\u0275advance"](7),core["\u0275\u0275property"]("ngForOf",core["\u0275\u0275pipeBind1"](30,14,core["\u0275\u0275pipeBind1"](31,16,ctx_r2.updates$)))("ngForTrackBy",ctx_r2.trackUpdate)}}function ItemMetadataComponent_div_33_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"div"),core["\u0275\u0275text"](1,"\n    "),core["\u0275\u0275element"](2,"ds-alert",25),core["\u0275\u0275text"](3,"\n  "),core["\u0275\u0275elementEnd"]()),2&rf){const ctx_r3=core["\u0275\u0275nextContext"]();core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("content","item.edit.metadata.empty")("type",ctx_r3.AlertTypeEnum.Info)}}function ItemMetadataComponent_button_41_Template(rf,ctx){if(1&rf){const _r13=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementStart"](0,"button",14),core["\u0275\u0275listener"]("click",(function ItemMetadataComponent_button_41_Template_button_click_0_listener(){core["\u0275\u0275restoreView"](_r13);return core["\u0275\u0275nextContext"]().reinstate()})),core["\u0275\u0275element"](1,"i",15),core["\u0275\u0275text"](2),core["\u0275\u0275pipe"](3,"translate"),core["\u0275\u0275elementEnd"]()}2&rf&&(core["\u0275\u0275advance"](2),core["\u0275\u0275textInterpolate1"](" ",core["\u0275\u0275pipeBind1"](3,1,"item.edit.metadata.reinstate-button"),"\n      "))}function ItemMetadataComponent_button_50_Template(rf,ctx){if(1&rf){const _r15=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementStart"](0,"button",16),core["\u0275\u0275listener"]("click",(function ItemMetadataComponent_button_50_Template_button_click_0_listener(){core["\u0275\u0275restoreView"](_r15);return core["\u0275\u0275nextContext"]().discard()})),core["\u0275\u0275pipe"](1,"async"),core["\u0275\u0275element"](2,"i",17),core["\u0275\u0275text"](3),core["\u0275\u0275pipe"](4,"translate"),core["\u0275\u0275elementEnd"]()}if(2&rf){const ctx_r5=core["\u0275\u0275nextContext"]();core["\u0275\u0275property"]("disabled",!core["\u0275\u0275pipeBind1"](1,2,ctx_r5.hasChanges())),core["\u0275\u0275advance"](3),core["\u0275\u0275textInterpolate1"](" ",core["\u0275\u0275pipeBind1"](4,4,"item.edit.metadata.discard-button"),"\n      ")}}class item_metadata_component_ItemMetadataComponent extends abstract_item_update_component.a{constructor(itemService,objectUpdatesService,router,notificationsService,translateService,route){super(itemService,objectUpdatesService,router,notificationsService,translateService,route),this.itemService=itemService,this.objectUpdatesService=objectUpdatesService,this.router=router,this.notificationsService=notificationsService,this.translateService=translateService,this.route=route,this.AlertTypeEnum=aletr_type.a}ngOnInit(){super.ngOnInit(),Object(empty_util.a)(this.updateService)&&(this.updateService=this.itemService)}initializeUpdates(){this.updates$=this.objectUpdatesService.getFieldUpdates(this.url,this.item.metadataAsList)}initializeNotificationsPrefix(){this.notificationsPrefix="item.edit.metadata.notifications."}add(metadata=new metadata_models.d){this.objectUpdatesService.saveAddFieldUpdate(this.url,metadata)}initializeOriginalFields(){this.objectUpdatesService.initialize(this.url,this.item.metadataAsList,this.item.lastModified,metadata_patch_operation_service_MetadataPatchOperationService)}submit(){this.isValid().pipe(Object(first.a)()).subscribe((isValid=>{isValid?this.objectUpdatesService.createPatch(this.url).pipe(Object(first.a)(),Object(switchMap.a)((patch=>this.updateService.patch(this.item,patch).pipe(Object(operators.g)())))).subscribe((rd=>{rd.hasFailed?this.notificationsService.error(this.getNotificationTitle("error"),rd.errorMessage):(this.item=rd.payload,this.checkAndFixMetadataUUIDs(),this.initializeOriginalFields(),this.updates$=this.objectUpdatesService.getFieldUpdates(this.url,this.item.metadataAsList),this.notificationsService.success(this.getNotificationTitle("saved"),this.getNotificationContent("saved")))})):this.notificationsService.error(this.getNotificationTitle("invalid"),this.getNotificationContent("invalid"))}))}checkAndFixMetadataUUIDs(){const metadata=Object(lodash.cloneDeep)(this.item.metadata);Object.keys(this.item.metadata).forEach((key=>{metadata[key]=this.item.metadata[key].map((value=>Object(empty_util.b)(value.uuid)?value:Object.assign(new metadata_models.c,value)))})),this.item.metadata=metadata}}item_metadata_component_ItemMetadataComponent.\u0275fac=function ItemMetadataComponent_Factory(t){return new(t||item_metadata_component_ItemMetadataComponent)(core["\u0275\u0275directiveInject"](item_data_service.a),core["\u0275\u0275directiveInject"](object_updates_service.a),core["\u0275\u0275directiveInject"](fesm2015_router.g),core["\u0275\u0275directiveInject"](notifications_service.a),core["\u0275\u0275directiveInject"](ngx_translate_core.e),core["\u0275\u0275directiveInject"](fesm2015_router.a))},item_metadata_component_ItemMetadataComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:item_metadata_component_ItemMetadataComponent,selectors:[["ds-item-metadata"]],inputs:{updateService:"updateService"},features:[core["\u0275\u0275InheritDefinitionFeature"]],decls:56,vars:39,consts:[[1,"item-metadata"],[1,"button-row","top","d-flex","mb-2"],[1,"mr-auto","btn","btn-success",3,"click"],[1,"fas","fa-plus"],[1,"d-none","d-sm-inline"],["class","btn btn-warning",3,"click",4,"ngIf"],[1,"btn","btn-primary",3,"disabled","click"],[1,"fas","fa-save"],["class","btn btn-danger",3,"disabled","click",4,"ngIf"],["class","table table-responsive table-striped table-bordered",4,"ngIf"],[4,"ngIf"],[1,"button-row","bottom"],[1,"mt-2","float-right"],[1,"btn","btn-primary","mr-0",3,"disabled","click"],[1,"btn","btn-warning",3,"click"],[1,"fas","fa-undo-alt"],[1,"btn","btn-danger",3,"disabled","click"],[1,"fas","fa-times"],[1,"table","table-responsive","table-striped","table-bordered"],["id","fieldName"],["id","fieldValue"],[1,"text-center"],["id","fieldLang"],["ds-edit-in-place-field","",3,"fieldUpdate","url","ngClass",4,"ngFor","ngForOf","ngForTrackBy"],["ds-edit-in-place-field","",3,"fieldUpdate","url","ngClass"],[3,"content","type"]],template:function ItemMetadataComponent_Template(rf,ctx){1&rf&&(core["\u0275\u0275elementStart"](0,"div",0),core["\u0275\u0275text"](1,"\n  "),core["\u0275\u0275elementStart"](2,"div",1),core["\u0275\u0275text"](3,"\n    "),core["\u0275\u0275elementStart"](4,"button",2),core["\u0275\u0275listener"]("click",(function ItemMetadataComponent_Template_button_click_4_listener(){return ctx.add()})),core["\u0275\u0275element"](5,"i",3),core["\u0275\u0275text"](6,"\n      "),core["\u0275\u0275elementStart"](7,"span",4),core["\u0275\u0275text"](8),core["\u0275\u0275pipe"](9,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](10,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](11,"\n    "),core["\u0275\u0275template"](12,ItemMetadataComponent_button_12_Template,7,3,"button",5),core["\u0275\u0275pipe"](13,"async"),core["\u0275\u0275text"](14,"\n    "),core["\u0275\u0275elementStart"](15,"button",6),core["\u0275\u0275listener"]("click",(function ItemMetadataComponent_Template_button_click_15_listener(){return ctx.submit()})),core["\u0275\u0275pipe"](16,"async"),core["\u0275\u0275pipe"](17,"async"),core["\u0275\u0275element"](18,"i",7),core["\u0275\u0275text"](19,"\n      "),core["\u0275\u0275elementStart"](20,"span",4),core["\u0275\u0275text"](21),core["\u0275\u0275pipe"](22,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](23,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](24,"\n    "),core["\u0275\u0275template"](25,ItemMetadataComponent_button_25_Template,8,6,"button",8),core["\u0275\u0275pipe"](26,"async"),core["\u0275\u0275text"](27,"\n  "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](28,"\n  "),core["\u0275\u0275template"](29,ItemMetadataComponent_table_29_Template,34,18,"table",9),core["\u0275\u0275pipe"](30,"dsObjectValues"),core["\u0275\u0275pipe"](31,"async"),core["\u0275\u0275text"](32,"\n  "),core["\u0275\u0275template"](33,ItemMetadataComponent_div_33_Template,4,2,"div",10),core["\u0275\u0275pipe"](34,"dsObjectValues"),core["\u0275\u0275pipe"](35,"async"),core["\u0275\u0275text"](36,"\n  "),core["\u0275\u0275elementStart"](37,"div",11),core["\u0275\u0275text"](38,"\n    "),core["\u0275\u0275elementStart"](39,"div",12),core["\u0275\u0275text"](40,"\n      "),core["\u0275\u0275template"](41,ItemMetadataComponent_button_41_Template,4,3,"button",5),core["\u0275\u0275pipe"](42,"async"),core["\u0275\u0275text"](43,"\n      "),core["\u0275\u0275elementStart"](44,"button",13),core["\u0275\u0275listener"]("click",(function ItemMetadataComponent_Template_button_click_44_listener(){return ctx.submit()})),core["\u0275\u0275pipe"](45,"async"),core["\u0275\u0275element"](46,"i",7),core["\u0275\u0275text"](47),core["\u0275\u0275pipe"](48,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](49,"\n      "),core["\u0275\u0275template"](50,ItemMetadataComponent_button_50_Template,5,6,"button",8),core["\u0275\u0275pipe"](51,"async"),core["\u0275\u0275text"](52,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](53,"\n  "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](54,"\n"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](55,"\n")),2&rf&&(core["\u0275\u0275advance"](8),core["\u0275\u0275textInterpolate1"]("\xa0",core["\u0275\u0275pipeBind1"](9,11,"item.edit.metadata.add-button"),""),core["\u0275\u0275advance"](4),core["\u0275\u0275property"]("ngIf",core["\u0275\u0275pipeBind1"](13,13,ctx.isReinstatable())),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("disabled",!core["\u0275\u0275pipeBind1"](16,15,ctx.hasChanges())||!core["\u0275\u0275pipeBind1"](17,17,ctx.isValid())),core["\u0275\u0275advance"](6),core["\u0275\u0275textInterpolate1"]("\xa0",core["\u0275\u0275pipeBind1"](22,19,"item.edit.metadata.save-button"),""),core["\u0275\u0275advance"](4),core["\u0275\u0275property"]("ngIf",!core["\u0275\u0275pipeBind1"](26,21,ctx.isReinstatable())),core["\u0275\u0275advance"](4),core["\u0275\u0275property"]("ngIf",core["\u0275\u0275pipeBind1"](30,23,core["\u0275\u0275pipeBind1"](31,25,ctx.updates$)).length>0),core["\u0275\u0275advance"](4),core["\u0275\u0275property"]("ngIf",0==core["\u0275\u0275pipeBind1"](34,27,core["\u0275\u0275pipeBind1"](35,29,ctx.updates$)).length),core["\u0275\u0275advance"](8),core["\u0275\u0275property"]("ngIf",core["\u0275\u0275pipeBind1"](42,31,ctx.isReinstatable())),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("disabled",!core["\u0275\u0275pipeBind1"](45,33,ctx.hasChanges())),core["\u0275\u0275advance"](3),core["\u0275\u0275textInterpolate1"](" ",core["\u0275\u0275pipeBind1"](48,35,"item.edit.metadata.save-button"),"\n      "),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("ngIf",!core["\u0275\u0275pipeBind1"](51,37,ctx.isReinstatable())))},directives:[common.NgIf,common.NgForOf,edit_in_place_field_component.a,common.NgClass,alert_component.a],pipes:[ngx_translate_core.d,common.AsyncPipe,object_values_pipe.a],styles:[".button-row[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-right:calc(.5 * var(--bs-spacer))}.button-row[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:last-child{margin-right:0}@media screen and (min-width:576px){.button-row[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{min-width:var(--ds-edit-item-button-min-width)}}.button-row.top[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-top:calc(var(--bs-spacer) / 2);margin-bottom:calc(var(--bs-spacer) / 2)}"]})},"539a":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return EpersonGroupListComponent}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),rxjs__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("2Vo4"),rxjs_operators__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("lJxs"),lodash__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("LvDl"),_pagination_pagination_component_options_model__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("7DXY"),_empty_util__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("J3qs"),_core_data_request_models__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("B/au"),_core_breadcrumbs_dso_name_service__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("C765"),_core_cache_builders_build_decorators__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("zQ+x"),_core_eperson_models_eperson_resource_type__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("qFpP"),_core_eperson_models_group_resource_type__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("Rulr"),_animations_fade__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("mEo1"),_core_shared_operators__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("1QIV"),_core_pagination_pagination_service__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("MFUF");function EpersonGroupListComponent_ds_eperson_search_box_2_Template(rf,ctx){if(1&rf){const _r4=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275getCurrentView"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"ds-eperson-search-box",3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("search",(function EpersonGroupListComponent_ds_eperson_search_box_2_Template_ds_eperson_search_box_search_0_listener($event){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r4);return _angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]().onSearch($event)})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()}}function EpersonGroupListComponent_ds_group_search_box_4_Template(rf,ctx){if(1&rf){const _r6=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275getCurrentView"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"ds-group-search-box",3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("search",(function EpersonGroupListComponent_ds_group_search_box_4_Template_ds_group_search_box_search_0_listener($event){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r6);return _angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]().onSearch($event)})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()}}function EpersonGroupListComponent_ds_pagination_6_tr_27_Template(rf,ctx){if(1&rf){const _r10=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275getCurrentView"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"tr"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](1,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](2,"\n          "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](3,"td"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](5,"\n          "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](6,"td"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](7),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](8,"\n          "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](9,"td",7),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](10,"\n            "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](11,"button",9),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("click",(function EpersonGroupListComponent_ds_pagination_6_tr_27_Template_button_click_11_listener(){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r10);const entry_r8=ctx.$implicit;return _angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"](2).emitSelect(entry_r8)})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](12),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](13,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](14,"\n          "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](15,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()}if(2&rf){const entry_r8=ctx.$implicit,ctx_r7=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"](2);_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275classProp"]("table-primary",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](1,5,ctx_r7.isSelected(entry_r8))),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](entry_r8.id),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](ctx_r7.dsoNameService.getName(entry_r8)),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](5),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate1"]("\n              ",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](13,7,"resource-policies.form.eperson-group-list.select.btn"),"\n            ")}}function EpersonGroupListComponent_ds_pagination_6_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"ds-pagination",4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](1,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](2,"\n\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](3,"div",5),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](4,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](5,"table",6),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](6,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](7,"thead"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](8,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](9,"tr",7),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](10,"\n          "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](11,"th"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](12),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](13,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](14,"\n          "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](15,"th"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](16),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](17,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](18,"\n          "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](19,"th"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](20),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](21,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](22,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](23,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](24,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](25,"tbody"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](26,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](27,EpersonGroupListComponent_ds_pagination_6_tr_27_Template,16,9,"tr",8),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](28,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](29,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](30,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](31,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](32,"\n\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()),2&rf){const ctx_r2=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]();let tmp_1_0=null,tmp_7_0=null;_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("paginationOptions",ctx_r2.paginationOptions)("collectionSize",null==(tmp_1_0=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](1,8,ctx_r2.getList()))||null==tmp_1_0.payload?null:tmp_1_0.payload.totalElements)("retainScrollPosition",!0)("hideGear",!0),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](12),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](13,10,"resource-policies.form.eperson-group-list.table.headers.id")),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](17,12,"resource-policies.form.eperson-group-list.table.headers.name")),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](21,14,"resource-policies.form.eperson-group-list.table.headers.action")),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](7),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngForOf",null==(tmp_7_0=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](28,16,ctx_r2.getList()))||null==tmp_7_0.payload?null:tmp_7_0.payload.page)}}class EpersonGroupListComponent{constructor(dsoNameService,parentInjector,paginationService){this.dsoNameService=dsoNameService,this.parentInjector=parentInjector,this.paginationService=paginationService,this.isListOfEPerson=!0,this.select=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.EventEmitter,this.currentSearchQuery="",this.currentSearchScope="metadata",this.paginationOptions=new _pagination_pagination_component_options_model__WEBPACK_IMPORTED_MODULE_4__.a,this.list$=new rxjs__WEBPACK_IMPORTED_MODULE_1__.a({}),this.entrySelectedId=new rxjs__WEBPACK_IMPORTED_MODULE_1__.a(""),this.subs=[]}ngOnInit(){const resourceType=this.isListOfEPerson?_core_eperson_models_eperson_resource_type__WEBPACK_IMPORTED_MODULE_9__.a:_core_eperson_models_group_resource_type__WEBPACK_IMPORTED_MODULE_10__.a,provider=Object(_core_cache_builders_build_decorators__WEBPACK_IMPORTED_MODULE_8__.f)(resourceType);this.dataService=_angular_core__WEBPACK_IMPORTED_MODULE_0__.Injector.create({providers:[],parent:this.parentInjector}).get(provider),this.paginationOptions.id=Object(lodash__WEBPACK_IMPORTED_MODULE_3__.uniqueId)("egl"),this.paginationOptions.pageSize=5,this.initSelected&&this.entrySelectedId.next(this.initSelected),this.updateList(this.currentSearchScope,this.currentSearchQuery)}emitSelect(entry){this.select.emit(entry),this.entrySelectedId.next(entry.id)}getList(){return this.list$.asObservable()}isSelected(entry){return this.entrySelectedId.asObservable().pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.a)((selectedId=>Object(_empty_util__WEBPACK_IMPORTED_MODULE_5__.e)(selectedId)&&selectedId===entry.id)))}onSearch(searchEvent){this.currentSearchQuery=searchEvent.query,this.currentSearchScope=searchEvent.scope,this.paginationService.resetPage(this.paginationOptions.id),this.updateList(this.currentSearchScope,this.currentSearchQuery)}updateList(scope,query){Object(_empty_util__WEBPACK_IMPORTED_MODULE_5__.b)(this.pageConfigSub)&&this.pageConfigSub.unsubscribe(),this.pageConfigSub=this.paginationService.getCurrentPagination(this.paginationOptions.id,this.paginationOptions).subscribe((paginationOptions=>{const options=Object.assign({},new _core_data_request_models__WEBPACK_IMPORTED_MODULE_6__.f,{elementsPerPage:paginationOptions.pageSize,currentPage:paginationOptions.currentPage}),search$=this.isListOfEPerson?this.dataService.searchByScope(scope,query,options):this.dataService.searchGroups(query,options);this.subs.push(search$.pipe(Object(_core_shared_operators__WEBPACK_IMPORTED_MODULE_12__.g)()).subscribe((list=>{Object(_empty_util__WEBPACK_IMPORTED_MODULE_5__.b)(this.list$)&&this.list$.next(list)})))}))}ngOnDestroy(){this.list$=null,this.subs.filter((subscription=>Object(_empty_util__WEBPACK_IMPORTED_MODULE_5__.b)(subscription))).forEach((subscription=>subscription.unsubscribe())),this.paginationService.clearPagination(this.paginationOptions.id)}}EpersonGroupListComponent.\u0275fac=function EpersonGroupListComponent_Factory(t){return new(t||EpersonGroupListComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_core_breadcrumbs_dso_name_service__WEBPACK_IMPORTED_MODULE_7__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__.Injector),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_core_pagination_pagination_service__WEBPACK_IMPORTED_MODULE_13__.a))},EpersonGroupListComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineComponent"]({type:EpersonGroupListComponent,selectors:[["ds-eperson-group-list"]],inputs:{isListOfEPerson:"isListOfEPerson",initSelected:"initSelected"},outputs:{select:"select"},decls:10,vars:6,consts:[[1,"mt-3"],[3,"search",4,"ngIf"],[3,"paginationOptions","collectionSize","retainScrollPosition","hideGear",4,"ngIf"],[3,"search"],[3,"paginationOptions","collectionSize","retainScrollPosition","hideGear"],[1,"table-responsive"],["id","groups",1,"table","table-sm","table-striped","table-hover","table-bordered"],[1,"text-center"],[3,"table-primary",4,"ngFor","ngForOf"],[1,"btn","btn-sm","btn-outline-primary",3,"click"]],template:function EpersonGroupListComponent_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div",0),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](2,EpersonGroupListComponent_ds_eperson_search_box_2_Template,1,0,"ds-eperson-search-box",1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](4,EpersonGroupListComponent_ds_group_search_box_4_Template,1,0,"ds-group-search-box",1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](5,"\n\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](6,EpersonGroupListComponent_ds_pagination_6_Template,33,18,"ds-pagination",2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](7,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](8,"\n"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](9,"\n")),2&rf){let tmp_2_0=null;_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("@fadeInOut",void 0),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",ctx.isListOfEPerson),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",!ctx.isListOfEPerson),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",(null==(tmp_2_0=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](7,4,ctx.getList()))||null==tmp_2_0.payload?null:tmp_2_0.payload.totalElements)>0)}},styles:[""],data:{animation:[_animations_fade__WEBPACK_IMPORTED_MODULE_11__.c]}})},"8jtY":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ResolvedAction}));var _shared_ngrx_type__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("WL0R");const ResolverActionTypes={RESOLVED:Object(_shared_ngrx_type__WEBPACK_IMPORTED_MODULE_0__.a)("dspace/resolver/RESOLVED")};class ResolvedAction{constructor(url,dso){this.type=ResolverActionTypes.RESOLVED,this.payload={url:url,dso:dso}}}},"920W":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ItemPageAdministratorGuard}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),_core_data_feature_authorization_authorization_data_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("1mcE"),_item_page_resolver__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("z3/6"),_core_data_feature_authorization_feature_authorization_guard_dso_page_single_feature_guard__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("0TMo"),rxjs__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("LRne"),_core_data_feature_authorization_feature_id__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("FU+A"),_core_auth_auth_service__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("Vurf"),_angular_router__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("tyNb");class ItemPageAdministratorGuard extends _core_data_feature_authorization_feature_authorization_guard_dso_page_single_feature_guard__WEBPACK_IMPORTED_MODULE_3__.a{constructor(resolver,authorizationService,router,authService){super(resolver,authorizationService,router,authService),this.resolver=resolver,this.authorizationService=authorizationService,this.router=router,this.authService=authService}getFeatureID(next,state){return Object(rxjs__WEBPACK_IMPORTED_MODULE_4__.a)(_core_data_feature_authorization_feature_id__WEBPACK_IMPORTED_MODULE_5__.a.AdministratorOf)}}ItemPageAdministratorGuard.\u0275fac=function ItemPageAdministratorGuard_Factory(t){return new(t||ItemPageAdministratorGuard)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275inject"](_item_page_resolver__WEBPACK_IMPORTED_MODULE_2__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275inject"](_core_data_feature_authorization_authorization_data_service__WEBPACK_IMPORTED_MODULE_1__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275inject"](_angular_router__WEBPACK_IMPORTED_MODULE_7__.g),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275inject"](_core_auth_auth_service__WEBPACK_IMPORTED_MODULE_6__.a))},ItemPageAdministratorGuard.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineInjectable"]({token:ItemPageAdministratorGuard,factory:ItemPageAdministratorGuard.\u0275fac,providedIn:"root"})},"9i+i":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return StatisticsModule}));var core=__webpack_require__("fXoL"),common=__webpack_require__("ofXK"),core_module=__webpack_require__("pKmL"),shared_module=__webpack_require__("PCNd"),tslib=(__webpack_require__("mXNY"),__webpack_require__("zOht")),build_decorators=__webpack_require__("zQ+x"),equals_decorators=__webpack_require__("0HXA"),cerialize=__webpack_require__("6VZE"),resource_type=__webpack_require__("+1Sv");const STATISTICS_ENDPOINT=new resource_type.a("statistics");let StatisticsEndpoint=class{};StatisticsEndpoint.type=STATISTICS_ENDPOINT,Object(tslib.__decorate)([equals_decorators.a,cerialize.autoserialize,Object(tslib.__metadata)("design:type",resource_type.a)],StatisticsEndpoint.prototype,"type",void 0),Object(tslib.__decorate)([cerialize.deserialize,Object(tslib.__metadata)("design:type",Object)],StatisticsEndpoint.prototype,"_links",void 0),StatisticsEndpoint=Object(tslib.__decorate)([build_decorators.i],StatisticsEndpoint);class StatisticsModule{static forRoot(){return{ngModule:StatisticsModule}}}StatisticsModule.\u0275fac=function StatisticsModule_Factory(t){return new(t||StatisticsModule)},StatisticsModule.\u0275mod=core["\u0275\u0275defineNgModule"]({type:StatisticsModule}),StatisticsModule.\u0275inj=core["\u0275\u0275defineInjector"]({imports:[[common.CommonModule,core_module.a.forRoot(),shared_module.a]]})},A0IO:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return I18nBreadcrumbResolver}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),_i18n_breadcrumbs_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("tv3Y"),_shared_empty_util__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("J3qs"),_shared_utils_route_utils__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("q5u1");class I18nBreadcrumbResolver{constructor(breadcrumbService){this.breadcrumbService=breadcrumbService}resolve(route,state){const key=route.data.breadcrumbKey;if(Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_2__.a)(key))throw new Error('You provided an i18nBreadcrumbResolver for url "'+route.url+"\" but no breadcrumbKey in the route's data");const fullPath=Object(_shared_utils_route_utils__WEBPACK_IMPORTED_MODULE_3__.b)(route);return{provider:this.breadcrumbService,key:key,url:fullPath}}}I18nBreadcrumbResolver.\u0275fac=function I18nBreadcrumbResolver_Factory(t){return new(t||I18nBreadcrumbResolver)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275inject"](_i18n_breadcrumbs_service__WEBPACK_IMPORTED_MODULE_1__.a))},I18nBreadcrumbResolver.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineInjectable"]({token:I18nBreadcrumbResolver,factory:I18nBreadcrumbResolver.\u0275fac,providedIn:"root"})},ALMP:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ResourcePolicyEditComponent}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),rxjs__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("2Vo4"),rxjs_operators__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("lJxs"),rxjs_operators__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("IzEk"),_core_resource_policy_resource_policy_service__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("8a3C"),_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("lI3o"),_core_resource_policy_models_resource_policy_resource_type__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("TLL5"),_item_page_edit_item_page_edit_item_page_routing_paths__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("jrTz"),_core_shared_operators__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("1QIV"),_angular_router__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("tyNb"),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("sYmb"),_form_resource_policy_form_component__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("O/Ly");class ResourcePolicyEditComponent{constructor(notificationsService,resourcePolicyService,route,router,translate){this.notificationsService=notificationsService,this.resourcePolicyService=resourcePolicyService,this.route=route,this.router=router,this.translate=translate,this.processing$=new rxjs__WEBPACK_IMPORTED_MODULE_1__.a(!1)}ngOnInit(){this.route.data.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.a)((data=>data)),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.a)(1)).subscribe((data=>{this.resourcePolicy=data.resourcePolicy.payload}))}isProcessing(){return this.processing$.asObservable()}redirectToAuthorizationsPage(){this.router.navigate([`../../${_item_page_edit_item_page_edit_item_page_routing_paths__WEBPACK_IMPORTED_MODULE_7__.a}`],{relativeTo:this.route})}updateResourcePolicy(event){this.processing$.next(!0);const updatedObject=Object.assign({},event.object,{id:this.resourcePolicy.id,type:_core_resource_policy_models_resource_policy_resource_type__WEBPACK_IMPORTED_MODULE_6__.a.value,_links:this.resourcePolicy._links});this.resourcePolicyService.update(updatedObject).pipe(Object(_core_shared_operators__WEBPACK_IMPORTED_MODULE_8__.g)()).subscribe((responseRD=>{this.processing$.next(!1),responseRD&&responseRD.hasSucceeded?(this.notificationsService.success(null,this.translate.get("resource-policies.edit.page.success.content")),this.redirectToAuthorizationsPage()):this.notificationsService.error(null,this.translate.get("resource-policies.edit.page.failure.content"))}))}}ResourcePolicyEditComponent.\u0275fac=function ResourcePolicyEditComponent_Factory(t){return new(t||ResourcePolicyEditComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_5__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_core_resource_policy_resource_policy_service__WEBPACK_IMPORTED_MODULE_4__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_9__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_9__.g),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_ngx_translate_core__WEBPACK_IMPORTED_MODULE_10__.e))},ResourcePolicyEditComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineComponent"]({type:ResourcePolicyEditComponent,selectors:[["ds-resource-policy-edit"]],decls:9,vars:6,consts:[[1,"container"],[1,"mb-3"],[3,"resourcePolicy","isProcessing","reset","submit"]],template:function ResourcePolicyEditComponent_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div",0),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](2,"h4",1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](4,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](5,"\n\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](6,"ds-resource-policy-form",2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("reset",(function ResourcePolicyEditComponent_Template_ds_resource_policy_form_reset_6_listener(){return ctx.redirectToAuthorizationsPage()}))("submit",(function ResourcePolicyEditComponent_Template_ds_resource_policy_form_submit_6_listener($event){return ctx.updateResourcePolicy($event)})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](7,"\n"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](8,"\n")),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate2"]("",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](4,4,"resource-policies.edit.page.heading")," ",ctx.resourcePolicy.id,""),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("resourcePolicy",ctx.resourcePolicy)("isProcessing",ctx.isProcessing()))},directives:[_form_resource_policy_form_component__WEBPACK_IMPORTED_MODULE_11__.a],pipes:[_ngx_translate_core__WEBPACK_IMPORTED_MODULE_10__.d],encapsulation:2})},BZkK:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"EditItemPageModule",(function(){return EditItemPageModule}));var core=__webpack_require__("fXoL"),common=__webpack_require__("ofXK"),ng_bootstrap=__webpack_require__("1kSV"),shared_module=__webpack_require__("PCNd"),fesm2015_router=__webpack_require__("tyNb"),fade=__webpack_require__("mEo1"),of=__webpack_require__("LRne"),combineLatest=__webpack_require__("itXk"),map=__webpack_require__("lJxs"),empty_util=__webpack_require__("J3qs"),item_page_routing_paths=__webpack_require__("Xioo"),ngx_translate_core=__webpack_require__("sYmb");const _c0=function(a0){return{active:a0}},_c1=function(a0){return[a0]};function EditItemPageComponent_li_14_a_2_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"a",17),core["\u0275\u0275text"](1),core["\u0275\u0275pipe"](2,"translate"),core["\u0275\u0275elementEnd"]()),2&rf){const page_r1=core["\u0275\u0275nextContext"]().$implicit,ctx_r2=core["\u0275\u0275nextContext"]();core["\u0275\u0275property"]("ngClass",core["\u0275\u0275pureFunction1"](5,_c0,page_r1.page===ctx_r2.currentPage))("routerLink",core["\u0275\u0275pureFunction1"](7,_c1,"./"+page_r1.page)),core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate1"]("\n                            ",core["\u0275\u0275pipeBind1"](2,3,"item.edit.tabs."+page_r1.page+".head"),"\n                        ")}}function EditItemPageComponent_li_14_button_8_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"button",18),core["\u0275\u0275text"](1),core["\u0275\u0275pipe"](2,"translate"),core["\u0275\u0275elementEnd"]()),2&rf){const page_r1=core["\u0275\u0275nextContext"]().$implicit;core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate1"]("\n                                ",core["\u0275\u0275pipeBind1"](2,1,"item.edit.tabs."+page_r1.page+".head"),"\n                            ")}}function EditItemPageComponent_li_14_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"li",13),core["\u0275\u0275text"](1,"\n                        "),core["\u0275\u0275template"](2,EditItemPageComponent_li_14_a_2_Template,3,9,"a",14),core["\u0275\u0275pipe"](3,"async"),core["\u0275\u0275text"](4,"\n                        "),core["\u0275\u0275elementStart"](5,"span",15),core["\u0275\u0275pipe"](6,"translate"),core["\u0275\u0275text"](7,"\n                            "),core["\u0275\u0275template"](8,EditItemPageComponent_li_14_button_8_Template,3,3,"button",16),core["\u0275\u0275pipe"](9,"async"),core["\u0275\u0275text"](10,"\n                        "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](11,"\n                    "),core["\u0275\u0275elementEnd"]()),2&rf){const page_r1=ctx.$implicit;core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",core["\u0275\u0275pipeBind1"](3,3,page_r1.enabled)),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("ngbTooltip",core["\u0275\u0275pipeBind1"](6,5,"item.edit.tabs.disabled.tooltip")),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("ngIf",!core["\u0275\u0275pipeBind1"](9,7,page_r1.enabled))}}class edit_item_page_component_EditItemPageComponent{constructor(route,router,injector){this.route=route,this.router=router,this.injector=injector,this.router.events.subscribe((()=>this.initPageParamsByRoute()))}ngOnInit(){this.initPageParamsByRoute(),this.pages=this.route.routeConfig.children.filter((child=>Object(empty_util.e)(child.path))).map((child=>{let enabled=Object(of.a)(!0);return Object(empty_util.e)(child.canActivate)&&(enabled=Object(combineLatest.a)(child.canActivate.map((guardConstructor=>this.injector.get(guardConstructor).canActivate(this.route.snapshot,this.router.routerState.snapshot)))).pipe(Object(map.a)((canActivateOutcomes=>canActivateOutcomes.every((e=>!0===e)))))),{page:child.path,enabled:enabled}})),this.itemRD$=this.route.data.pipe(Object(map.a)((data=>data.dso)))}getItemPage(item){return Object(item_page_routing_paths.h)(item)}initPageParamsByRoute(){this.currentPage=this.route.snapshot.firstChild.routeConfig.path}}edit_item_page_component_EditItemPageComponent.\u0275fac=function EditItemPageComponent_Factory(t){return new(t||edit_item_page_component_EditItemPageComponent)(core["\u0275\u0275directiveInject"](fesm2015_router.a),core["\u0275\u0275directiveInject"](fesm2015_router.g),core["\u0275\u0275directiveInject"](core.Injector))},edit_item_page_component_EditItemPageComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:edit_item_page_component_EditItemPageComponent,selectors:[["ds-edit-item-page"]],decls:41,vars:10,consts:[[1,"container"],[1,"row"],[1,"col-12"],[1,"border-bottom"],[1,"pt-2"],[1,"nav","nav-tabs","justify-content-start"],["class","nav-item",4,"ngFor","ngForOf"],[1,"tab-pane","active"],[1,"mb-4"],[1,"button-row","bottom"],[1,"text-right"],["role","button",1,"btn","btn-outline-secondary","mr-1",3,"routerLink"],[1,"fas","fa-arrow-left"],[1,"nav-item"],["class","nav-link",3,"ngClass","routerLink",4,"ngIf"],[3,"ngbTooltip"],["class","nav-link disabled",4,"ngIf"],[1,"nav-link",3,"ngClass","routerLink"],[1,"nav-link","disabled"]],template:function EditItemPageComponent_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"div",0),core["\u0275\u0275text"](1,"\n    "),core["\u0275\u0275elementStart"](2,"div",1),core["\u0275\u0275text"](3,"\n        "),core["\u0275\u0275elementStart"](4,"div",2),core["\u0275\u0275text"](5,"\n            "),core["\u0275\u0275elementStart"](6,"h2",3),core["\u0275\u0275text"](7),core["\u0275\u0275pipe"](8,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](9,"\n            "),core["\u0275\u0275elementStart"](10,"div",4),core["\u0275\u0275text"](11,"\n                "),core["\u0275\u0275elementStart"](12,"ul",5),core["\u0275\u0275text"](13,"\n                    "),core["\u0275\u0275template"](14,EditItemPageComponent_li_14_Template,12,9,"li",6),core["\u0275\u0275text"](15,"\n                "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](16,"\n                "),core["\u0275\u0275elementStart"](17,"div",7),core["\u0275\u0275text"](18,"\n                    "),core["\u0275\u0275elementStart"](19,"div",8),core["\u0275\u0275text"](20,"\n                        "),core["\u0275\u0275element"](21,"router-outlet"),core["\u0275\u0275text"](22,"\n                    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](23,"\n                    "),core["\u0275\u0275elementStart"](24,"div",9),core["\u0275\u0275text"](25,"\n                      "),core["\u0275\u0275elementStart"](26,"div",10),core["\u0275\u0275text"](27,"\n                        "),core["\u0275\u0275elementStart"](28,"a",11),core["\u0275\u0275pipe"](29,"async"),core["\u0275\u0275element"](30,"i",12),core["\u0275\u0275text"](31),core["\u0275\u0275pipe"](32,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](33,"\n                      "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](34,"\n                    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](35,"\n                "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](36,"\n            "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](37,"\n        "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](38,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](39,"\n"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](40,"\n")),2&rf){let tmp_2_0=null;core["\u0275\u0275advance"](7),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](8,4,"item.edit.head")),core["\u0275\u0275advance"](7),core["\u0275\u0275property"]("ngForOf",ctx.pages),core["\u0275\u0275advance"](14),core["\u0275\u0275property"]("routerLink",ctx.getItemPage(null==(tmp_2_0=core["\u0275\u0275pipeBind1"](29,6,ctx.itemRD$))?null:tmp_2_0.payload)),core["\u0275\u0275advance"](3),core["\u0275\u0275textInterpolate1"](" ",core["\u0275\u0275pipeBind1"](32,8,"item.edit.return"),"")}},directives:[common.NgForOf,fesm2015_router.l,fesm2015_router.j,common.NgIf,ng_bootstrap.O,common.NgClass],pipes:[ngx_translate_core.d,common.AsyncPipe],encapsulation:2,data:{animation:[fade.a,fade.c]},changeDetection:0});var notifications_service=__webpack_require__("lI3o"),item_data_service=__webpack_require__("iqTE"),operators=__webpack_require__("1QIV"),first=__webpack_require__("SxV6");var modify_item_overview_component=__webpack_require__("aCx6");const abstract_simple_item_action_component_c0=function(a0){return{id:a0}},abstract_simple_item_action_component_c1=function(a0){return[a0,"edit"]};class abstract_simple_item_action_component_AbstractSimpleItemActionComponent{constructor(route,router,notificationsService,itemDataService,translateService){this.route=route,this.router=router,this.notificationsService=notificationsService,this.itemDataService=itemDataService,this.translateService=translateService}ngOnInit(){this.itemRD$=this.route.data.pipe(Object(map.a)((data=>data.dso)),Object(operators.i)()),this.itemRD$.pipe(Object(first.a)()).subscribe((rd=>{this.item=rd.payload,this.itemPageRoute=Object(item_page_routing_paths.h)(this.item)})),this.confirmMessage="item.edit."+this.messageKey+".confirm",this.cancelMessage="item.edit."+this.messageKey+".cancel",this.headerMessage="item.edit."+this.messageKey+".header",this.descriptionMessage="item.edit."+this.messageKey+".description"}performAction(){}processRestResponse(response){var predicate;response.hasSucceeded?this.itemDataService.findById(this.item.id).pipe((predicate=this.predicate,source=>source.pipe(Object(operators.c)(),Object(first.a)(predicate)))).subscribe((()=>{this.notificationsService.success(this.translateService.get("item.edit."+this.messageKey+".success")),this.router.navigate([Object(item_page_routing_paths.e)(this.item)])})):(this.notificationsService.error(this.translateService.get("item.edit."+this.messageKey+".error")),this.router.navigate([Object(item_page_routing_paths.e)(this.item)]))}}abstract_simple_item_action_component_AbstractSimpleItemActionComponent.\u0275fac=function AbstractSimpleItemActionComponent_Factory(t){return new(t||abstract_simple_item_action_component_AbstractSimpleItemActionComponent)(core["\u0275\u0275directiveInject"](fesm2015_router.a),core["\u0275\u0275directiveInject"](fesm2015_router.g),core["\u0275\u0275directiveInject"](notifications_service.a),core["\u0275\u0275directiveInject"](item_data_service.a),core["\u0275\u0275directiveInject"](ngx_translate_core.e))},abstract_simple_item_action_component_AbstractSimpleItemActionComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:abstract_simple_item_action_component_AbstractSimpleItemActionComponent,selectors:[["ds-simple-action"]],decls:27,vars:19,consts:[[1,"container"],[1,"row"],[1,"col-12"],[3,"item"],[1,"btn","btn-outline-secondary","perform-action",3,"click"],[1,"btn","btn-outline-secondary","cancel",3,"routerLink"]],template:function AbstractSimpleItemActionComponent_Template(rf,ctx){1&rf&&(core["\u0275\u0275elementStart"](0,"div",0),core["\u0275\u0275text"](1,"\n    "),core["\u0275\u0275elementStart"](2,"div",1),core["\u0275\u0275text"](3,"\n        "),core["\u0275\u0275elementStart"](4,"div",2),core["\u0275\u0275text"](5,"\n            "),core["\u0275\u0275elementStart"](6,"h2"),core["\u0275\u0275text"](7),core["\u0275\u0275pipe"](8,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](9,"\n            "),core["\u0275\u0275elementStart"](10,"p"),core["\u0275\u0275text"](11),core["\u0275\u0275pipe"](12,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](13,"\n            "),core["\u0275\u0275element"](14,"ds-modify-item-overview",3),core["\u0275\u0275text"](15,"\n            "),core["\u0275\u0275elementStart"](16,"button",4),core["\u0275\u0275listener"]("click",(function AbstractSimpleItemActionComponent_Template_button_click_16_listener(){return ctx.performAction()})),core["\u0275\u0275text"](17),core["\u0275\u0275pipe"](18,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](19,"\n            "),core["\u0275\u0275elementStart"](20,"button",5),core["\u0275\u0275text"](21),core["\u0275\u0275pipe"](22,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](23,"\n\n        "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](24,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](25,"\n\n"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](26,"\n")),2&rf&&(core["\u0275\u0275advance"](7),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind2"](8,6,ctx.headerMessage,core["\u0275\u0275pureFunction1"](15,abstract_simple_item_action_component_c0,ctx.item.handle))),core["\u0275\u0275advance"](4),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](12,9,ctx.descriptionMessage)),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("item",ctx.item),core["\u0275\u0275advance"](3),core["\u0275\u0275textInterpolate1"]("",core["\u0275\u0275pipeBind1"](18,11,ctx.confirmMessage),"\n            "),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("routerLink",core["\u0275\u0275pureFunction1"](17,abstract_simple_item_action_component_c1,ctx.itemPageRoute)),core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate1"]("\n                ",core["\u0275\u0275pipeBind1"](22,13,ctx.cancelMessage),"\n            "))},directives:[modify_item_overview_component.a,fesm2015_router.h],pipes:[ngx_translate_core.d],encapsulation:2});const item_withdraw_component_c0=function(a0){return{id:a0}},item_withdraw_component_c1=function(a0){return[a0,"edit"]};class item_withdraw_component_ItemWithdrawComponent extends abstract_simple_item_action_component_AbstractSimpleItemActionComponent{constructor(route,router,notificationsService,itemDataService,translateService){super(route,router,notificationsService,itemDataService,translateService),this.route=route,this.router=router,this.notificationsService=notificationsService,this.itemDataService=itemDataService,this.translateService=translateService,this.messageKey="withdraw",this.predicate=rd=>rd.payload.isWithdrawn}performAction(){this.itemDataService.setWithDrawn(this.item,!0).pipe(Object(operators.g)()).subscribe((response=>{this.processRestResponse(response)}))}}item_withdraw_component_ItemWithdrawComponent.\u0275fac=function ItemWithdrawComponent_Factory(t){return new(t||item_withdraw_component_ItemWithdrawComponent)(core["\u0275\u0275directiveInject"](fesm2015_router.a),core["\u0275\u0275directiveInject"](fesm2015_router.g),core["\u0275\u0275directiveInject"](notifications_service.a),core["\u0275\u0275directiveInject"](item_data_service.a),core["\u0275\u0275directiveInject"](ngx_translate_core.e))},item_withdraw_component_ItemWithdrawComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:item_withdraw_component_ItemWithdrawComponent,selectors:[["ds-item-withdraw"]],features:[core["\u0275\u0275InheritDefinitionFeature"]],decls:27,vars:19,consts:[[1,"container"],[1,"row"],[1,"col-12"],[3,"item"],[1,"btn","btn-outline-secondary","perform-action",3,"click"],[1,"btn","btn-outline-secondary","cancel",3,"routerLink"]],template:function ItemWithdrawComponent_Template(rf,ctx){1&rf&&(core["\u0275\u0275elementStart"](0,"div",0),core["\u0275\u0275text"](1,"\n    "),core["\u0275\u0275elementStart"](2,"div",1),core["\u0275\u0275text"](3,"\n        "),core["\u0275\u0275elementStart"](4,"div",2),core["\u0275\u0275text"](5,"\n            "),core["\u0275\u0275elementStart"](6,"h2"),core["\u0275\u0275text"](7),core["\u0275\u0275pipe"](8,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](9,"\n            "),core["\u0275\u0275elementStart"](10,"p"),core["\u0275\u0275text"](11),core["\u0275\u0275pipe"](12,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](13,"\n            "),core["\u0275\u0275element"](14,"ds-modify-item-overview",3),core["\u0275\u0275text"](15,"\n            "),core["\u0275\u0275elementStart"](16,"button",4),core["\u0275\u0275listener"]("click",(function ItemWithdrawComponent_Template_button_click_16_listener(){return ctx.performAction()})),core["\u0275\u0275text"](17),core["\u0275\u0275pipe"](18,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](19,"\n            "),core["\u0275\u0275elementStart"](20,"button",5),core["\u0275\u0275text"](21),core["\u0275\u0275pipe"](22,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](23,"\n\n        "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](24,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](25,"\n\n"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](26,"\n")),2&rf&&(core["\u0275\u0275advance"](7),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind2"](8,6,ctx.headerMessage,core["\u0275\u0275pureFunction1"](15,item_withdraw_component_c0,ctx.item.handle))),core["\u0275\u0275advance"](4),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](12,9,ctx.descriptionMessage)),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("item",ctx.item),core["\u0275\u0275advance"](3),core["\u0275\u0275textInterpolate1"]("",core["\u0275\u0275pipeBind1"](18,11,ctx.confirmMessage),"\n            "),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("routerLink",core["\u0275\u0275pureFunction1"](17,item_withdraw_component_c1,ctx.itemPageRoute)),core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate1"]("\n                ",core["\u0275\u0275pipeBind1"](22,13,ctx.cancelMessage),"\n            "))},directives:[modify_item_overview_component.a,fesm2015_router.h],pipes:[ngx_translate_core.d],encapsulation:2});const item_reinstate_component_c0=function(a0){return{id:a0}},item_reinstate_component_c1=function(a0){return[a0,"edit"]};class item_reinstate_component_ItemReinstateComponent extends abstract_simple_item_action_component_AbstractSimpleItemActionComponent{constructor(route,router,notificationsService,itemDataService,translateService){super(route,router,notificationsService,itemDataService,translateService),this.route=route,this.router=router,this.notificationsService=notificationsService,this.itemDataService=itemDataService,this.translateService=translateService,this.messageKey="reinstate",this.predicate=rd=>!rd.payload.isWithdrawn}performAction(){this.itemDataService.setWithDrawn(this.item,!1).pipe(Object(operators.g)()).subscribe((response=>{this.processRestResponse(response)}))}}item_reinstate_component_ItemReinstateComponent.\u0275fac=function ItemReinstateComponent_Factory(t){return new(t||item_reinstate_component_ItemReinstateComponent)(core["\u0275\u0275directiveInject"](fesm2015_router.a),core["\u0275\u0275directiveInject"](fesm2015_router.g),core["\u0275\u0275directiveInject"](notifications_service.a),core["\u0275\u0275directiveInject"](item_data_service.a),core["\u0275\u0275directiveInject"](ngx_translate_core.e))},item_reinstate_component_ItemReinstateComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:item_reinstate_component_ItemReinstateComponent,selectors:[["ds-item-reinstate"]],features:[core["\u0275\u0275InheritDefinitionFeature"]],decls:27,vars:19,consts:[[1,"container"],[1,"row"],[1,"col-12"],[3,"item"],[1,"btn","btn-outline-secondary","perform-action",3,"click"],[1,"btn","btn-outline-secondary","cancel",3,"routerLink"]],template:function ItemReinstateComponent_Template(rf,ctx){1&rf&&(core["\u0275\u0275elementStart"](0,"div",0),core["\u0275\u0275text"](1,"\n    "),core["\u0275\u0275elementStart"](2,"div",1),core["\u0275\u0275text"](3,"\n        "),core["\u0275\u0275elementStart"](4,"div",2),core["\u0275\u0275text"](5,"\n            "),core["\u0275\u0275elementStart"](6,"h2"),core["\u0275\u0275text"](7),core["\u0275\u0275pipe"](8,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](9,"\n            "),core["\u0275\u0275elementStart"](10,"p"),core["\u0275\u0275text"](11),core["\u0275\u0275pipe"](12,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](13,"\n            "),core["\u0275\u0275element"](14,"ds-modify-item-overview",3),core["\u0275\u0275text"](15,"\n            "),core["\u0275\u0275elementStart"](16,"button",4),core["\u0275\u0275listener"]("click",(function ItemReinstateComponent_Template_button_click_16_listener(){return ctx.performAction()})),core["\u0275\u0275text"](17),core["\u0275\u0275pipe"](18,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](19,"\n            "),core["\u0275\u0275elementStart"](20,"button",5),core["\u0275\u0275text"](21),core["\u0275\u0275pipe"](22,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](23,"\n\n        "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](24,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](25,"\n\n"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](26,"\n")),2&rf&&(core["\u0275\u0275advance"](7),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind2"](8,6,ctx.headerMessage,core["\u0275\u0275pureFunction1"](15,item_reinstate_component_c0,ctx.item.handle))),core["\u0275\u0275advance"](4),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](12,9,ctx.descriptionMessage)),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("item",ctx.item),core["\u0275\u0275advance"](3),core["\u0275\u0275textInterpolate1"]("",core["\u0275\u0275pipeBind1"](18,11,ctx.confirmMessage),"\n            "),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("routerLink",core["\u0275\u0275pureFunction1"](17,item_reinstate_component_c1,ctx.itemPageRoute)),core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate1"]("\n                ",core["\u0275\u0275pipeBind1"](22,13,ctx.cancelMessage),"\n            "))},directives:[modify_item_overview_component.a,fesm2015_router.h],pipes:[ngx_translate_core.d],encapsulation:2});const item_private_component_c0=function(a0){return{id:a0}},item_private_component_c1=function(a0){return[a0,"edit"]};class item_private_component_ItemPrivateComponent extends abstract_simple_item_action_component_AbstractSimpleItemActionComponent{constructor(route,router,notificationsService,itemDataService,translateService){super(route,router,notificationsService,itemDataService,translateService),this.route=route,this.router=router,this.notificationsService=notificationsService,this.itemDataService=itemDataService,this.translateService=translateService,this.messageKey="private",this.predicate=rd=>!rd.payload.isDiscoverable}performAction(){this.itemDataService.setDiscoverable(this.item,!1).pipe(Object(operators.g)()).subscribe((rd=>{this.processRestResponse(rd)}))}}item_private_component_ItemPrivateComponent.\u0275fac=function ItemPrivateComponent_Factory(t){return new(t||item_private_component_ItemPrivateComponent)(core["\u0275\u0275directiveInject"](fesm2015_router.a),core["\u0275\u0275directiveInject"](fesm2015_router.g),core["\u0275\u0275directiveInject"](notifications_service.a),core["\u0275\u0275directiveInject"](item_data_service.a),core["\u0275\u0275directiveInject"](ngx_translate_core.e))},item_private_component_ItemPrivateComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:item_private_component_ItemPrivateComponent,selectors:[["ds-item-private"]],features:[core["\u0275\u0275InheritDefinitionFeature"]],decls:27,vars:19,consts:[[1,"container"],[1,"row"],[1,"col-12"],[3,"item"],[1,"btn","btn-outline-secondary","perform-action",3,"click"],[1,"btn","btn-outline-secondary","cancel",3,"routerLink"]],template:function ItemPrivateComponent_Template(rf,ctx){1&rf&&(core["\u0275\u0275elementStart"](0,"div",0),core["\u0275\u0275text"](1,"\n    "),core["\u0275\u0275elementStart"](2,"div",1),core["\u0275\u0275text"](3,"\n        "),core["\u0275\u0275elementStart"](4,"div",2),core["\u0275\u0275text"](5,"\n            "),core["\u0275\u0275elementStart"](6,"h2"),core["\u0275\u0275text"](7),core["\u0275\u0275pipe"](8,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](9,"\n            "),core["\u0275\u0275elementStart"](10,"p"),core["\u0275\u0275text"](11),core["\u0275\u0275pipe"](12,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](13,"\n            "),core["\u0275\u0275element"](14,"ds-modify-item-overview",3),core["\u0275\u0275text"](15,"\n            "),core["\u0275\u0275elementStart"](16,"button",4),core["\u0275\u0275listener"]("click",(function ItemPrivateComponent_Template_button_click_16_listener(){return ctx.performAction()})),core["\u0275\u0275text"](17),core["\u0275\u0275pipe"](18,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](19,"\n            "),core["\u0275\u0275elementStart"](20,"button",5),core["\u0275\u0275text"](21),core["\u0275\u0275pipe"](22,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](23,"\n\n        "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](24,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](25,"\n\n"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](26,"\n")),2&rf&&(core["\u0275\u0275advance"](7),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind2"](8,6,ctx.headerMessage,core["\u0275\u0275pureFunction1"](15,item_private_component_c0,ctx.item.handle))),core["\u0275\u0275advance"](4),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](12,9,ctx.descriptionMessage)),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("item",ctx.item),core["\u0275\u0275advance"](3),core["\u0275\u0275textInterpolate1"]("",core["\u0275\u0275pipeBind1"](18,11,ctx.confirmMessage),"\n            "),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("routerLink",core["\u0275\u0275pureFunction1"](17,item_private_component_c1,ctx.itemPageRoute)),core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate1"]("\n                ",core["\u0275\u0275pipeBind1"](22,13,ctx.cancelMessage),"\n            "))},directives:[modify_item_overview_component.a,fesm2015_router.h],pipes:[ngx_translate_core.d],encapsulation:2});const item_public_component_c0=function(a0){return{id:a0}},item_public_component_c1=function(a0){return[a0,"edit"]};class item_public_component_ItemPublicComponent extends abstract_simple_item_action_component_AbstractSimpleItemActionComponent{constructor(route,router,notificationsService,itemDataService,translateService){super(route,router,notificationsService,itemDataService,translateService),this.route=route,this.router=router,this.notificationsService=notificationsService,this.itemDataService=itemDataService,this.translateService=translateService,this.messageKey="public",this.predicate=rd=>rd.payload.isDiscoverable}performAction(){this.itemDataService.setDiscoverable(this.item,!0).pipe(Object(operators.g)()).subscribe((response=>{this.processRestResponse(response)}))}}item_public_component_ItemPublicComponent.\u0275fac=function ItemPublicComponent_Factory(t){return new(t||item_public_component_ItemPublicComponent)(core["\u0275\u0275directiveInject"](fesm2015_router.a),core["\u0275\u0275directiveInject"](fesm2015_router.g),core["\u0275\u0275directiveInject"](notifications_service.a),core["\u0275\u0275directiveInject"](item_data_service.a),core["\u0275\u0275directiveInject"](ngx_translate_core.e))},item_public_component_ItemPublicComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:item_public_component_ItemPublicComponent,selectors:[["ds-item-public"]],features:[core["\u0275\u0275InheritDefinitionFeature"]],decls:27,vars:19,consts:[[1,"container"],[1,"row"],[1,"col-12"],[3,"item"],[1,"btn","btn-outline-secondary","perform-action",3,"click"],[1,"btn","btn-outline-secondary","cancel",3,"routerLink"]],template:function ItemPublicComponent_Template(rf,ctx){1&rf&&(core["\u0275\u0275elementStart"](0,"div",0),core["\u0275\u0275text"](1,"\n    "),core["\u0275\u0275elementStart"](2,"div",1),core["\u0275\u0275text"](3,"\n        "),core["\u0275\u0275elementStart"](4,"div",2),core["\u0275\u0275text"](5,"\n            "),core["\u0275\u0275elementStart"](6,"h2"),core["\u0275\u0275text"](7),core["\u0275\u0275pipe"](8,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](9,"\n            "),core["\u0275\u0275elementStart"](10,"p"),core["\u0275\u0275text"](11),core["\u0275\u0275pipe"](12,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](13,"\n            "),core["\u0275\u0275element"](14,"ds-modify-item-overview",3),core["\u0275\u0275text"](15,"\n            "),core["\u0275\u0275elementStart"](16,"button",4),core["\u0275\u0275listener"]("click",(function ItemPublicComponent_Template_button_click_16_listener(){return ctx.performAction()})),core["\u0275\u0275text"](17),core["\u0275\u0275pipe"](18,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](19,"\n            "),core["\u0275\u0275elementStart"](20,"button",5),core["\u0275\u0275text"](21),core["\u0275\u0275pipe"](22,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](23,"\n\n        "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](24,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](25,"\n\n"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](26,"\n")),2&rf&&(core["\u0275\u0275advance"](7),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind2"](8,6,ctx.headerMessage,core["\u0275\u0275pureFunction1"](15,item_public_component_c0,ctx.item.handle))),core["\u0275\u0275advance"](4),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](12,9,ctx.descriptionMessage)),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("item",ctx.item),core["\u0275\u0275advance"](3),core["\u0275\u0275textInterpolate1"]("",core["\u0275\u0275pipeBind1"](18,11,ctx.confirmMessage),"\n            "),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("routerLink",core["\u0275\u0275pureFunction1"](17,item_public_component_c1,ctx.itemPageRoute)),core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate1"]("\n                ",core["\u0275\u0275pipeBind1"](22,13,ctx.cancelMessage),"\n            "))},directives:[modify_item_overview_component.a,fesm2015_router.h],pipes:[ngx_translate_core.d],encapsulation:2});var switchMap=__webpack_require__("eIep"),take=__webpack_require__("IzEk"),defaultIfEmpty=__webpack_require__("xbPD"),filter=__webpack_require__("pLZG"),view_mode_model=__webpack_require__("3jCq"),object_updates_service=__webpack_require__("loKC"),relationship_service=__webpack_require__("kN8A"),entity_type_service=__webpack_require__("bxbP"),link_service=__webpack_require__("sfEo"),follow_link_config_model=__webpack_require__("84Zn"),BehaviorSubject=__webpack_require__("7RJT"),var_directive=__webpack_require__("O/5o"),listable_object_component_loader_component=__webpack_require__("1aCu");function ItemDeleteComponent_ng_container_16_div_2_div_3_div_2_div_17_ng_container_2_ds_listable_object_component_loader_2_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"ds-listable-object-component-loader",23),core["\u0275\u0275text"](1,"\n                                        "),core["\u0275\u0275elementEnd"]()),2&rf){const relatedItem_r10=core["\u0275\u0275nextContext"]().ngVar,ctx_r11=core["\u0275\u0275nextContext"](6);core["\u0275\u0275property"]("object",relatedItem_r10)("viewMode",ctx_r11.viewMode)}}function ItemDeleteComponent_ng_container_16_div_2_div_3_div_2_div_17_ng_container_2_ng_template_15_ds_listable_object_component_loader_15_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"ds-listable-object-component-loader",23),core["\u0275\u0275text"](1,"\n                                                    "),core["\u0275\u0275elementEnd"]()),2&rf){const relatedItem_r10=core["\u0275\u0275nextContext"](2).ngVar,ctx_r15=core["\u0275\u0275nextContext"](6);core["\u0275\u0275property"]("object",relatedItem_r10)("viewMode",ctx_r15.viewMode)}}function ItemDeleteComponent_ng_container_16_div_2_div_3_div_2_div_17_ng_container_2_ng_template_15_div_17_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"div"),core["\u0275\u0275text"](1,"\n                                                        "),core["\u0275\u0275elementStart"](2,"div"),core["\u0275\u0275text"](3,"\n                                                            "),core["\u0275\u0275elementStart"](4,"div",29),core["\u0275\u0275text"](5),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](6,"\n                                                            "),core["\u0275\u0275elementStart"](7,"div"),core["\u0275\u0275text"](8),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](9,"\n                                                        "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](10,"\n                                                    "),core["\u0275\u0275elementEnd"]()),2&rf){const metadata_r18=ctx.$implicit;core["\u0275\u0275advance"](5),core["\u0275\u0275textInterpolate1"]("\n                                                                ",metadata_r18.metadataField,"\n                                                            "),core["\u0275\u0275advance"](3),core["\u0275\u0275textInterpolate1"]("\n                                                                ",metadata_r18.metadataValue.value,"\n                                                            ")}}function ItemDeleteComponent_ng_container_16_div_2_div_3_div_2_div_17_ng_container_2_ng_template_15_Template(rf,ctx){if(1&rf){const _r20=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275text"](0,"\n                                            "),core["\u0275\u0275elementStart"](1,"div"),core["\u0275\u0275text"](2,"\n                                                "),core["\u0275\u0275elementStart"](3,"div",24),core["\u0275\u0275text"](4),core["\u0275\u0275pipe"](5,"translate"),core["\u0275\u0275elementStart"](6,"button",25),core["\u0275\u0275listener"]("click",(function ItemDeleteComponent_ng_container_16_div_2_div_3_div_2_div_17_ng_container_2_ng_template_15_Template_button_click_6_listener(){core["\u0275\u0275restoreView"](_r20);return core["\u0275\u0275nextContext"](7).closeVirtualMetadataModal()})),core["\u0275\u0275text"](7,"\n                                                        "),core["\u0275\u0275elementStart"](8,"span",26),core["\u0275\u0275text"](9,"\xd7"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](10,"\n                                                    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](11,"\n                                                "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](12,"\n                                                "),core["\u0275\u0275elementStart"](13,"div",27),core["\u0275\u0275text"](14,"\n                                                    "),core["\u0275\u0275template"](15,ItemDeleteComponent_ng_container_16_div_2_div_3_div_2_div_17_ng_container_2_ng_template_15_ds_listable_object_component_loader_15_Template,2,2,"ds-listable-object-component-loader",17),core["\u0275\u0275text"](16,"\n                                                    "),core["\u0275\u0275template"](17,ItemDeleteComponent_ng_container_16_div_2_div_3_div_2_div_17_ng_container_2_ng_template_15_div_17_Template,11,2,"div",28),core["\u0275\u0275pipe"](18,"async"),core["\u0275\u0275text"](19,"\n                                                "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](20,"\n                                            "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](21,"\n                                        ")}if(2&rf){const relatedItem_r10=core["\u0275\u0275nextContext"]().ngVar,relationship_r8=core["\u0275\u0275nextContext"]().$implicit,ctx_r13=core["\u0275\u0275nextContext"](5);core["\u0275\u0275advance"](4),core["\u0275\u0275textInterpolate1"]("\n                                                    ",core["\u0275\u0275pipeBind1"](5,3,"virtual-metadata.delete-item.modal-head"),"\n                                                    "),core["\u0275\u0275advance"](11),core["\u0275\u0275property"]("ngIf",relatedItem_r10),core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngForOf",core["\u0275\u0275pipeBind1"](18,5,ctx_r13.getVirtualMetadata(relationship_r8)))}}function ItemDeleteComponent_ng_container_16_div_2_div_3_div_2_div_17_ng_container_2_Template(rf,ctx){if(1&rf){const _r24=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementContainerStart"](0),core["\u0275\u0275text"](1,"\n\n                                        "),core["\u0275\u0275template"](2,ItemDeleteComponent_ng_container_16_div_2_div_3_div_2_div_17_ng_container_2_ds_listable_object_component_loader_2_Template,2,2,"ds-listable-object-component-loader",17),core["\u0275\u0275text"](3,"\n                                        "),core["\u0275\u0275elementStart"](4,"div",18),core["\u0275\u0275text"](5,"\n                                            "),core["\u0275\u0275elementStart"](6,"div",19),core["\u0275\u0275text"](7,"\n                                                "),core["\u0275\u0275elementStart"](8,"button",20),core["\u0275\u0275listener"]("click",(function ItemDeleteComponent_ng_container_16_div_2_div_3_div_2_div_17_ng_container_2_Template_button_click_8_listener(){core["\u0275\u0275restoreView"](_r24);const _r12=core["\u0275\u0275reference"](16);return core["\u0275\u0275nextContext"](6).openVirtualMetadataModal(_r12)})),core["\u0275\u0275text"](9,"\n                                                    "),core["\u0275\u0275element"](10,"i",21),core["\u0275\u0275text"](11,"\n                                                "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](12,"\n                                            "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](13,"\n                                        "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](14,"\n\n                                        "),core["\u0275\u0275template"](15,ItemDeleteComponent_ng_container_16_div_2_div_3_div_2_div_17_ng_container_2_ng_template_15_Template,22,7,"ng-template",null,22,core["\u0275\u0275templateRefExtractor"]),core["\u0275\u0275text"](17,"\n\n                                    "),core["\u0275\u0275elementContainerEnd"]()}if(2&rf){const relatedItem_r10=ctx.ngVar;core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",relatedItem_r10)}}function ItemDeleteComponent_ng_container_16_div_2_div_3_div_2_div_17_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"div",11),core["\u0275\u0275text"](1,"\n                                    "),core["\u0275\u0275template"](2,ItemDeleteComponent_ng_container_16_div_2_div_3_div_2_div_17_ng_container_2_Template,18,1,"ng-container",4),core["\u0275\u0275pipe"](3,"async"),core["\u0275\u0275text"](4,"\n                                "),core["\u0275\u0275elementEnd"]()),2&rf){const relationship_r8=ctx.$implicit,ctx_r7=core["\u0275\u0275nextContext"](5);core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngVar",core["\u0275\u0275pipeBind1"](3,1,ctx_r7.getRelatedItem(relationship_r8)))}}function ItemDeleteComponent_ng_container_16_div_2_div_3_div_2_Template(rf,ctx){if(1&rf){const _r27=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementStart"](0,"div",11),core["\u0275\u0275text"](1,"\n\n                            "),core["\u0275\u0275elementStart"](2,"div",12),core["\u0275\u0275listener"]("click",(function ItemDeleteComponent_ng_container_16_div_2_div_3_div_2_Template_div_click_2_listener(){core["\u0275\u0275restoreView"](_r27);const selected_r6=ctx.ngVar,type_r4=core["\u0275\u0275nextContext"]().$implicit;return core["\u0275\u0275nextContext"](3).setSelected(type_r4,!selected_r6)})),core["\u0275\u0275text"](3,"\n                                "),core["\u0275\u0275elementStart"](4,"label"),core["\u0275\u0275text"](5,"\n                                    "),core["\u0275\u0275element"](6,"input",13),core["\u0275\u0275text"](7,"\n                                "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](8,"\n                            "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](9,"\n\n                            "),core["\u0275\u0275elementStart"](10,"div",14),core["\u0275\u0275text"](11,"\n                                "),core["\u0275\u0275elementStart"](12,"h5",15),core["\u0275\u0275listener"]("click",(function ItemDeleteComponent_ng_container_16_div_2_div_3_div_2_Template_h5_click_12_listener(){core["\u0275\u0275restoreView"](_r27);const selected_r6=ctx.ngVar,type_r4=core["\u0275\u0275nextContext"]().$implicit;return core["\u0275\u0275nextContext"](3).setSelected(type_r4,!selected_r6)})),core["\u0275\u0275text"](13),core["\u0275\u0275pipe"](14,"translate"),core["\u0275\u0275pipe"](15,"async"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](16,"\n                                "),core["\u0275\u0275template"](17,ItemDeleteComponent_ng_container_16_div_2_div_3_div_2_div_17_Template,5,3,"div",16),core["\u0275\u0275pipe"](18,"async"),core["\u0275\u0275text"](19,"\n                            "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](20,"\n\n                        "),core["\u0275\u0275elementEnd"]()}if(2&rf){const selected_r6=ctx.ngVar,type_r4=core["\u0275\u0275nextContext"]().$implicit,ctx_r5=core["\u0275\u0275nextContext"](3);core["\u0275\u0275advance"](6),core["\u0275\u0275property"]("checked",selected_r6),core["\u0275\u0275advance"](7),core["\u0275\u0275textInterpolate1"]("\n                                    ",core["\u0275\u0275pipeBind1"](14,3,ctx_r5.getRelationshipMessageKey(core["\u0275\u0275pipeBind1"](15,5,ctx_r5.getLabel(type_r4)))),"\n                                "),core["\u0275\u0275advance"](4),core["\u0275\u0275property"]("ngForOf",core["\u0275\u0275pipeBind1"](18,7,ctx_r5.getRelationships(type_r4)))}}function ItemDeleteComponent_ng_container_16_div_2_div_3_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"div",8),core["\u0275\u0275text"](1,"\n\n                        "),core["\u0275\u0275template"](2,ItemDeleteComponent_ng_container_16_div_2_div_3_div_2_Template,21,9,"div",10),core["\u0275\u0275pipe"](3,"async"),core["\u0275\u0275text"](4,"\n\n                    "),core["\u0275\u0275elementEnd"]()),2&rf){const type_r4=ctx.$implicit,ctx_r3=core["\u0275\u0275nextContext"](3);core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngVar",core["\u0275\u0275pipeBind1"](3,1,ctx_r3.isSelected(type_r4)))}}function ItemDeleteComponent_ng_container_16_div_2_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"div",8),core["\u0275\u0275text"](1),core["\u0275\u0275pipe"](2,"translate"),core["\u0275\u0275template"](3,ItemDeleteComponent_ng_container_16_div_2_div_3_Template,5,3,"div",9),core["\u0275\u0275text"](4,"\n\n                "),core["\u0275\u0275elementEnd"]()),2&rf){const types_r1=core["\u0275\u0275nextContext"]().ngVar;core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate1"]("\n\n                    ",core["\u0275\u0275pipeBind1"](2,2,"virtual-metadata.delete-item.info"),"\n\n                    "),core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngForOf",types_r1)}}function ItemDeleteComponent_ng_container_16_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementContainerStart"](0),core["\u0275\u0275text"](1,"\n\n                "),core["\u0275\u0275template"](2,ItemDeleteComponent_ng_container_16_div_2_Template,5,4,"div",7),core["\u0275\u0275text"](3,"\n\n            "),core["\u0275\u0275elementContainerEnd"]()),2&rf){const types_r1=ctx.ngVar;core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",types_r1&&types_r1.length>0)}}const item_delete_component_c0=function(a0){return{id:a0}},item_delete_component_c1=function(a0){return[a0,"edit"]};class item_delete_component_ItemDeleteComponent extends abstract_simple_item_action_component_AbstractSimpleItemActionComponent{constructor(route,router,notificationsService,itemDataService,translateService,modalService,objectUpdatesService,relationshipService,entityTypeService,linkService){super(route,router,notificationsService,itemDataService,translateService),this.route=route,this.router=router,this.notificationsService=notificationsService,this.itemDataService=itemDataService,this.translateService=translateService,this.modalService=modalService,this.objectUpdatesService=objectUpdatesService,this.relationshipService=relationshipService,this.entityTypeService=entityTypeService,this.linkService=linkService,this.messageKey="delete",this.viewMode=view_mode_model.a.ListElement,this.types$=new BehaviorSubject.BehaviorSubject([]),this.relationships$=new Map,this.relatedItems$=new Map,this.virtualMetadata$=new Map,this.subs=[]}ngOnInit(){super.ngOnInit(),this.url=this.router.url;const label=this.item.firstMetadataValue("dspace.entity.type");Object(empty_util.e)(label)&&this.subs.push(this.entityTypeService.getEntityTypeByLabel(label).pipe(Object(operators.i)(),Object(operators.o)(),Object(switchMap.a)((entityType=>this.entityTypeService.getEntityTypeRelationships(entityType.id))),Object(operators.i)(),Object(operators.o)(),Object(map.a)((relationshipTypes=>relationshipTypes.page)),Object(switchMap.a)((types=>0===types.length?Object(of.a)(types):Object(combineLatest.a)(types.map((type=>this.getRelationships(type)))).pipe(Object(map.a)((relationships=>types.reduce(((includedTypes,type,index)=>includedTypes.some((includedType=>includedType.id===type.id))||0===relationships[index].length?includedTypes:[...includedTypes,type]),[]))))))).subscribe((types=>this.types$.next(types)))),this.subs.push(this.types$.pipe(Object(take.a)(1)).subscribe((types=>this.objectUpdatesService.initialize(this.url,types,this.item.lastModified))))}openVirtualMetadataModal(content){this.modalRef=this.modalService.open(content)}closeVirtualMetadataModal(){this.modalRef.close()}getRelationshipMessageKey(label){return Object(empty_util.b)(label)&&label.indexOf("Of")>-1?`relationships.${label.substring(0,label.indexOf("Of")+2)}`:label}getLabel(relationshipType){return this.getRelationships(relationshipType).pipe(Object(switchMap.a)((relationships=>this.isLeftItem(relationships[0]).pipe(Object(map.a)((isLeftItem=>isLeftItem?relationshipType.leftwardType:relationshipType.rightwardType))))))}getRelationships(relationshipType){return this.relationships$.has(relationshipType)||this.relationships$.set(relationshipType,this.relationshipService.getItemRelationshipsArray(this.item).pipe(Object(switchMap.a)((relationships=>Object(combineLatest.a)(relationships.map((relationship=>this.getRelationshipType(relationship)))).pipe(Object(defaultIfEmpty.a)([]),Object(map.a)((types=>relationships.filter(((relationship,index)=>relationshipType.id===types[index].id))))))))),this.relationships$.get(relationshipType)}getRelationshipType(relationship){return this.linkService.resolveLinks(relationship,Object(follow_link_config_model.a)("relationshipType"),Object(follow_link_config_model.a)("leftItem"),Object(follow_link_config_model.a)("rightItem")),relationship.relationshipType.pipe(Object(operators.i)(),Object(operators.o)(),Object(filter.a)((relationshipType=>Object(empty_util.b)(relationshipType)&&Object(empty_util.e)(relationshipType.uuid))))}getRelatedItem(relationship){return this.relatedItems$.has(relationship)||this.relatedItems$.set(relationship,this.isLeftItem(relationship).pipe(Object(switchMap.a)((isLeftItem=>isLeftItem?relationship.rightItem:relationship.leftItem)),Object(operators.i)(),Object(operators.o)())),this.relatedItems$.get(relationship)}getVirtualMetadata(relationship){return this.virtualMetadata$.has(relationship)||this.virtualMetadata$.set(relationship,this.getRelatedItem(relationship).pipe(Object(map.a)((relatedItem=>Object.entries(relatedItem.metadata).map((([key,value])=>value.filter((metadata=>metadata.authority&&metadata.authority.endsWith(relationship.id))).map((metadata=>({metadataField:key,metadataValue:metadata}))))).reduce(((previous,current)=>previous.concat(current))))))),this.virtualMetadata$.get(relationship)}isLeftItem(relationship){return relationship.leftItem.pipe(Object(operators.i)(),Object(operators.o)(),Object(filter.a)((item=>Object(empty_util.b)(item)&&Object(empty_util.e)(item.uuid))),Object(map.a)((leftItem=>leftItem.uuid===this.item.uuid)))}isSelected(type){return this.objectUpdatesService.isSelectedVirtualMetadata(this.url,this.item.uuid,type.uuid)}setSelected(type,selected){this.objectUpdatesService.setSelectedVirtualMetadata(this.url,this.item.uuid,type.uuid,selected)}performAction(){this.subs.push(this.types$.pipe(Object(switchMap.a)((types=>Object(combineLatest.a)(types.map((type=>this.isSelected(type)))).pipe(Object(defaultIfEmpty.a)([]),Object(map.a)((selection=>types.filter(((type,index)=>selection[index])))),Object(map.a)((selectedTypes=>selectedTypes.map((type=>type.id))))))),Object(switchMap.a)((types=>this.itemDataService.delete(this.item.id,types).pipe(Object(operators.g)())))).subscribe((rd=>{this.notify(rd.hasSucceeded)})))}notify(succeeded){succeeded?(this.notificationsService.success(this.translateService.get("item.edit."+this.messageKey+".success")),this.router.navigate([""])):(this.notificationsService.error(this.translateService.get("item.edit."+this.messageKey+".error")),this.router.navigate([Object(item_page_routing_paths.e)(this.item)]))}ngOnDestroy(){this.subs.filter((sub=>Object(empty_util.b)(sub))).forEach((sub=>sub.unsubscribe()))}}item_delete_component_ItemDeleteComponent.\u0275fac=function ItemDeleteComponent_Factory(t){return new(t||item_delete_component_ItemDeleteComponent)(core["\u0275\u0275directiveInject"](fesm2015_router.a),core["\u0275\u0275directiveInject"](fesm2015_router.g),core["\u0275\u0275directiveInject"](notifications_service.a),core["\u0275\u0275directiveInject"](item_data_service.a),core["\u0275\u0275directiveInject"](ngx_translate_core.e),core["\u0275\u0275directiveInject"](ng_bootstrap.q),core["\u0275\u0275directiveInject"](object_updates_service.a),core["\u0275\u0275directiveInject"](relationship_service.a),core["\u0275\u0275directiveInject"](entity_type_service.a),core["\u0275\u0275directiveInject"](link_service.a))},item_delete_component_ItemDeleteComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:item_delete_component_ItemDeleteComponent,selectors:[["ds-item-delete"]],inputs:{url:"url"},features:[core["\u0275\u0275InheritDefinitionFeature"]],decls:30,vars:22,consts:[[1,"container"],[1,"row"],[1,"col-12"],[3,"item"],[4,"ngVar"],[1,"btn","btn-outline-secondary","perform-action",3,"click"],[1,"btn","btn-outline-secondary","cancel",3,"routerLink"],["class","mb-4",4,"ngIf"],[1,"mb-4"],["class","mb-4",4,"ngFor","ngForOf"],["class","d-flex flex-row",4,"ngVar"],[1,"d-flex","flex-row"],[1,"m-2",3,"click"],["type","checkbox",3,"checked"],[1,"flex-column","flex-grow-1"],[3,"click"],["class","d-flex flex-row",4,"ngFor","ngForOf"],[3,"object","viewMode",4,"ngIf"],[1,"ml-auto"],[1,"btn-group"],[1,"btn","btn-outline-info","btn-sm",3,"click"],[1,"fas","fa-info","fa-fw"],["virtualMetadataModal",""],[3,"object","viewMode"],[1,"modal-header"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[4,"ngFor","ngForOf"],[1,"font-weight-bold"]],template:function ItemDeleteComponent_Template(rf,ctx){1&rf&&(core["\u0275\u0275elementStart"](0,"div",0),core["\u0275\u0275text"](1,"\n    "),core["\u0275\u0275elementStart"](2,"div",1),core["\u0275\u0275text"](3,"\n        "),core["\u0275\u0275elementStart"](4,"div",2),core["\u0275\u0275text"](5,"\n\n            "),core["\u0275\u0275elementStart"](6,"h2"),core["\u0275\u0275text"](7),core["\u0275\u0275pipe"](8,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](9,"\n            "),core["\u0275\u0275elementStart"](10,"p"),core["\u0275\u0275text"](11),core["\u0275\u0275pipe"](12,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](13,"\n            "),core["\u0275\u0275element"](14,"ds-modify-item-overview",3),core["\u0275\u0275text"](15,"\n\n            "),core["\u0275\u0275template"](16,ItemDeleteComponent_ng_container_16_Template,4,1,"ng-container",4),core["\u0275\u0275pipe"](17,"async"),core["\u0275\u0275text"](18,"\n\n            "),core["\u0275\u0275elementStart"](19,"button",5),core["\u0275\u0275listener"]("click",(function ItemDeleteComponent_Template_button_click_19_listener(){return ctx.performAction()})),core["\u0275\u0275text"](20),core["\u0275\u0275pipe"](21,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](22,"\n            "),core["\u0275\u0275elementStart"](23,"button",6),core["\u0275\u0275text"](24),core["\u0275\u0275pipe"](25,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](26,"\n\n        "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](27,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](28,"\n"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](29,"\n")),2&rf&&(core["\u0275\u0275advance"](7),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind2"](8,7,ctx.headerMessage,core["\u0275\u0275pureFunction1"](18,item_delete_component_c0,ctx.item.handle))),core["\u0275\u0275advance"](4),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](12,10,ctx.descriptionMessage)),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("item",ctx.item),core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngVar",core["\u0275\u0275pipeBind1"](17,12,ctx.types$)),core["\u0275\u0275advance"](4),core["\u0275\u0275textInterpolate1"]("",core["\u0275\u0275pipeBind1"](21,14,ctx.confirmMessage),"\n            "),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("routerLink",core["\u0275\u0275pureFunction1"](20,item_delete_component_c1,ctx.itemPageRoute)),core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate1"]("\n                ",core["\u0275\u0275pipeBind1"](25,16,ctx.cancelMessage),"\n            "))},directives:[modify_item_overview_component.a,var_directive.a,fesm2015_router.h,common.NgIf,common.NgForOf,listable_object_component_loader_component.a],pipes:[ngx_translate_core.d,common.AsyncPipe],encapsulation:2});class ItemOperation{constructor(operationKey,operationUrl,featureID,disabled=!1,authorized=!0){this.operationKey=operationKey,this.operationUrl=operationUrl,this.featureID=featureID,this.authorized=authorized,this.setDisabled(disabled)}setDisabled(disabled){this.disabled=disabled}}var mergeMap=__webpack_require__("5+tZ"),distinctUntilChanged=__webpack_require__("/uUt"),toArray=__webpack_require__("IAdc"),internal_BehaviorSubject=__webpack_require__("2Vo4"),from=__webpack_require__("Cfvw"),authorization_data_service=__webpack_require__("1mcE"),feature_id=__webpack_require__("FU+A");function ItemOperationComponent_span_9_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"span"),core["\u0275\u0275text"](1,"\n    "),core["\u0275\u0275elementStart"](2,"button",5),core["\u0275\u0275text"](3),core["\u0275\u0275pipe"](4,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](5,"\n  "),core["\u0275\u0275elementEnd"]()),2&rf){const ctx_r0=core["\u0275\u0275nextContext"]();core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("disabled",ctx_r0.operation.disabled)("routerLink",ctx_r0.operation.operationUrl),core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate1"]("\n      ",core["\u0275\u0275pipeBind1"](4,3,"item.edit.tabs.status.buttons."+ctx_r0.operation.operationKey+".button"),"\n    ")}}function ItemOperationComponent_span_11_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"span",6),core["\u0275\u0275pipe"](1,"translate"),core["\u0275\u0275text"](2,"\n    "),core["\u0275\u0275elementStart"](3,"button",7),core["\u0275\u0275text"](4),core["\u0275\u0275pipe"](5,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](6,"\n  "),core["\u0275\u0275elementEnd"]()),2&rf){const ctx_r1=core["\u0275\u0275nextContext"]();core["\u0275\u0275property"]("ngbTooltip",core["\u0275\u0275pipeBind1"](1,3,"item.edit.tabs.status.buttons.unauthorized")),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("disabled",!0),core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate1"]("\n      ",core["\u0275\u0275pipeBind1"](5,5,"item.edit.tabs.status.buttons."+ctx_r1.operation.operationKey+".button"),"\n    ")}}class ItemOperationComponent{}function ItemStatusComponent_div_6_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"div",7),core["\u0275\u0275text"](1,"\n    "),core["\u0275\u0275elementStart"](2,"div",3),core["\u0275\u0275text"](3),core["\u0275\u0275pipe"](4,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](5,"\n    "),core["\u0275\u0275elementStart"](6,"div",8),core["\u0275\u0275text"](7),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](8,"\n  "),core["\u0275\u0275elementEnd"]()),2&rf){const statusKey_r2=ctx.$implicit,ctx_r0=core["\u0275\u0275nextContext"]();core["\u0275\u0275advance"](3),core["\u0275\u0275textInterpolate1"]("\n      ",core["\u0275\u0275pipeBind1"](4,3,"item.edit.tabs.status.labels."+statusKey_r2),":\n    "),core["\u0275\u0275advance"](3),core["\u0275\u0275propertyInterpolate1"]("id","status-",statusKey_r2,""),core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate1"]("\n      ",ctx_r0.statusData[statusKey_r2],"\n    ")}}function ItemStatusComponent_div_20_ds_item_operation_2_Template(rf,ctx){if(1&rf&&core["\u0275\u0275element"](0,"ds-item-operation",11),2&rf){const operation_r3=core["\u0275\u0275nextContext"]().$implicit;core["\u0275\u0275property"]("operation",operation_r3)}}ItemOperationComponent.\u0275fac=function ItemOperationComponent_Factory(t){return new(t||ItemOperationComponent)},ItemOperationComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:ItemOperationComponent,selectors:[["ds-item-operation"]],inputs:{operation:"operation"},decls:14,vars:5,consts:[[1,"col-3","float-left","d-flex","h-100","action-label"],[1,"justify-content-center","align-self-center"],[1,"col-9","float-left","action-button"],[4,"ngIf"],[3,"ngbTooltip",4,"ngIf"],[1,"btn","btn-outline-primary",3,"disabled","routerLink"],[3,"ngbTooltip"],[1,"btn","btn-outline-primary",3,"disabled"]],template:function ItemOperationComponent_Template(rf,ctx){1&rf&&(core["\u0275\u0275elementStart"](0,"div",0),core["\u0275\u0275text"](1,"\n      "),core["\u0275\u0275elementStart"](2,"span",1),core["\u0275\u0275text"](3),core["\u0275\u0275pipe"](4,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](5,"\n"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](6,"\n"),core["\u0275\u0275elementStart"](7,"div",2),core["\u0275\u0275text"](8,"\n  "),core["\u0275\u0275template"](9,ItemOperationComponent_span_9_Template,6,5,"span",3),core["\u0275\u0275text"](10,"\n  "),core["\u0275\u0275template"](11,ItemOperationComponent_span_11_Template,7,7,"span",4),core["\u0275\u0275text"](12,"\n"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](13,"\n")),2&rf&&(core["\u0275\u0275advance"](3),core["\u0275\u0275textInterpolate1"]("\n        ",core["\u0275\u0275pipeBind1"](4,3,"item.edit.tabs.status.buttons."+ctx.operation.operationKey+".label"),"\n      "),core["\u0275\u0275advance"](6),core["\u0275\u0275property"]("ngIf",ctx.operation.authorized),core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",!ctx.operation.authorized))},directives:[common.NgIf,fesm2015_router.h,ng_bootstrap.O],pipes:[ngx_translate_core.d],encapsulation:2});const item_status_component_c0=function(a0){return{"pt-3":a0}};function ItemStatusComponent_div_20_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"div",9),core["\u0275\u0275text"](1,"\n    "),core["\u0275\u0275template"](2,ItemStatusComponent_div_20_ds_item_operation_2_Template,1,1,"ds-item-operation",10),core["\u0275\u0275text"](3,"\n  "),core["\u0275\u0275elementEnd"]()),2&rf){const operation_r3=ctx.$implicit;core["\u0275\u0275property"]("ngClass",core["\u0275\u0275pureFunction1"](2,item_status_component_c0,operation_r3)),core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",operation_r3)}}class item_status_component_ItemStatusComponent{constructor(route,authorizationService){this.route=route,this.authorizationService=authorizationService,this.operations$=new internal_BehaviorSubject.a([])}ngOnInit(){this.itemRD$=this.route.parent.data.pipe(Object(map.a)((data=>data.dso))),this.itemRD$.pipe(Object(first.a)(),Object(map.a)((data=>data.payload))).subscribe((item=>{this.statusData=Object.assign({id:item.id,handle:item.handle,lastModified:item.lastModified}),this.statusDataKeys=Object.keys(this.statusData);const operations=[];operations.push(new ItemOperation("authorizations",this.getCurrentUrl(item)+"/authorizations",feature_id.a.CanManagePolicies,!0)),operations.push(new ItemOperation("mappedCollections",this.getCurrentUrl(item)+"/mapper",feature_id.a.CanManageMappings,!0)),item.isWithdrawn?operations.push(new ItemOperation("reinstate",this.getCurrentUrl(item)+"/reinstate",feature_id.a.ReinstateItem,!0)):operations.push(new ItemOperation("withdraw",this.getCurrentUrl(item)+"/withdraw",feature_id.a.WithdrawItem,!0)),item.isDiscoverable?operations.push(new ItemOperation("private",this.getCurrentUrl(item)+"/private",feature_id.a.CanMakePrivate,!0)):operations.push(new ItemOperation("public",this.getCurrentUrl(item)+"/public",feature_id.a.CanMakePrivate,!0)),operations.push(new ItemOperation("delete",this.getCurrentUrl(item)+"/delete",feature_id.a.CanDelete,!0)),operations.push(new ItemOperation("move",this.getCurrentUrl(item)+"/move",feature_id.a.CanMove,!0)),this.operations$.next(operations),Object(from.a)(operations).pipe(Object(mergeMap.a)((operation=>Object(empty_util.b)(operation.featureID)?this.authorizationService.isAuthorized(operation.featureID,item.self).pipe(Object(distinctUntilChanged.a)(),Object(map.a)((authorized=>new ItemOperation(operation.operationKey,operation.operationUrl,operation.featureID,!authorized,authorized)))):[operation])),Object(toArray.a)()).subscribe((ops=>this.operations$.next(ops)))})),this.itemPageRoute$=this.itemRD$.pipe(Object(operators.d)(),Object(map.a)((item=>Object(item_page_routing_paths.h)(item))))}getCurrentUrl(item){return Object(item_page_routing_paths.e)(item)}trackOperation(index,operation){return Object(empty_util.b)(operation)?operation.operationKey:void 0}}item_status_component_ItemStatusComponent.\u0275fac=function ItemStatusComponent_Factory(t){return new(t||item_status_component_ItemStatusComponent)(core["\u0275\u0275directiveInject"](fesm2015_router.a),core["\u0275\u0275directiveInject"](authorization_data_service.a))},item_status_component_ItemStatusComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:item_status_component_ItemStatusComponent,selectors:[["ds-item-status"]],decls:24,vars:16,consts:[[1,"mt-2"],[1,"row"],["class","w-100",4,"ngFor","ngForOf"],[1,"col-3","float-left","status-label"],["id","status-itemPage",1,"col-9","float-left","status-data"],[3,"routerLink"],["class","w-100",3,"ngClass",4,"ngFor","ngForOf"],[1,"w-100"],[1,"col-9","float-left","status-data",3,"id"],[1,"w-100",3,"ngClass"],[3,"operation",4,"ngIf"],[3,"operation"]],template:function ItemStatusComponent_Template(rf,ctx){1&rf&&(core["\u0275\u0275elementStart"](0,"p",0),core["\u0275\u0275text"](1),core["\u0275\u0275pipe"](2,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](3,"\n"),core["\u0275\u0275elementStart"](4,"div",1),core["\u0275\u0275text"](5,"\n  "),core["\u0275\u0275template"](6,ItemStatusComponent_div_6_Template,9,5,"div",2),core["\u0275\u0275text"](7,"\n  "),core["\u0275\u0275elementStart"](8,"div",3),core["\u0275\u0275text"](9),core["\u0275\u0275pipe"](10,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](11,"\n  "),core["\u0275\u0275elementStart"](12,"div",4),core["\u0275\u0275text"](13,"\n    "),core["\u0275\u0275elementStart"](14,"a",5),core["\u0275\u0275pipe"](15,"async"),core["\u0275\u0275text"](16),core["\u0275\u0275pipe"](17,"async"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](18,"\n  "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](19,"\n\n  "),core["\u0275\u0275template"](20,ItemStatusComponent_div_20_Template,4,4,"div",6),core["\u0275\u0275pipe"](21,"async"),core["\u0275\u0275text"](22,"\n"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](23,"\n")),2&rf&&(core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](2,6,"item.edit.tabs.status.description")),core["\u0275\u0275advance"](5),core["\u0275\u0275property"]("ngForOf",ctx.statusDataKeys),core["\u0275\u0275advance"](3),core["\u0275\u0275textInterpolate1"]("\n    ",core["\u0275\u0275pipeBind1"](10,8,"item.edit.tabs.status.labels.itemPage"),":\n  "),core["\u0275\u0275advance"](5),core["\u0275\u0275property"]("routerLink",core["\u0275\u0275pipeBind1"](15,10,ctx.itemPageRoute$)),core["\u0275\u0275advance"](2),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](17,12,ctx.itemPageRoute$)),core["\u0275\u0275advance"](4),core["\u0275\u0275property"]("ngForOf",core["\u0275\u0275pipeBind1"](21,14,ctx.operations$)))},directives:[common.NgForOf,fesm2015_router.j,common.NgClass,common.NgIf,ItemOperationComponent],pipes:[ngx_translate_core.d,common.AsyncPipe],encapsulation:2,data:{animation:[fade.a,fade.c]}});var item_metadata_component=__webpack_require__("4vdZ"),abstract_item_update_component=__webpack_require__("GsQf"),zip=__webpack_require__("1uah"),bitstream_data_service=__webpack_require__("PCBh"),object_cache_service=__webpack_require__("mycY"),request_service=__webpack_require__("X/78"),object_updates_actions=__webpack_require__("X8f1"),bundle_data_service=__webpack_require__("yhw/"),paginated_search_options_model=__webpack_require__("R7cy");class ResponsiveColumnSizes{constructor(xs,sm,md,lg,xl){this.xs=xs,this.sm=sm,this.md=md,this.lg=lg,this.xl=xl}buildClasses(){return`col-${this.xs} col-sm-${this.sm} col-md-${this.md} col-lg-${this.lg} col-xl-${this.xl}`}}class responsive_table_sizes_ResponsiveTableSizes{constructor(columns){this.columns=columns}combineColumns(start,end){if(start<end&&Object(empty_util.b)(this.columns[start])&&Object(empty_util.b)(this.columns[end])){let xs=this.columns[start].xs,sm=this.columns[start].sm,md=this.columns[start].md,lg=this.columns[start].lg,xl=this.columns[start].xl;for(let i=start+1;i<end+1;i++)xs+=this.columns[i].xs,sm+=this.columns[i].sm,md+=this.columns[i].md,lg+=this.columns[i].lg,xl+=this.columns[i].xl;return new ResponsiveColumnSizes(xs,sm,md,lg,xl)}}}const item_edit_bitstream_drag_handle_component_c0=["handleView"];function ItemEditBitstreamDragHandleComponent_ng_template_0_Template(rf,ctx){1&rf&&(core["\u0275\u0275text"](0,"\n  "),core["\u0275\u0275elementStart"](1,"div",1),core["\u0275\u0275text"](2,"\n    "),core["\u0275\u0275element"](3,"i",2),core["\u0275\u0275pipe"](4,"translate"),core["\u0275\u0275text"](5,"\n  "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](6,"\n")),2&rf&&(core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("title",core["\u0275\u0275pipeBind1"](4,1,"item.edit.bitstreams.edit.buttons.drag")))}class ItemEditBitstreamDragHandleComponent{constructor(viewContainerRef){this.viewContainerRef=viewContainerRef}ngOnInit(){this.viewContainerRef.createEmbeddedView(this.handleView)}}ItemEditBitstreamDragHandleComponent.\u0275fac=function ItemEditBitstreamDragHandleComponent_Factory(t){return new(t||ItemEditBitstreamDragHandleComponent)(core["\u0275\u0275directiveInject"](core.ViewContainerRef))},ItemEditBitstreamDragHandleComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:ItemEditBitstreamDragHandleComponent,selectors:[["ds-item-edit-bitstream-drag-handle"]],viewQuery:function ItemEditBitstreamDragHandleComponent_Query(rf,ctx){if(1&rf&&core["\u0275\u0275viewQuery"](item_edit_bitstream_drag_handle_component_c0,3),2&rf){let _t;core["\u0275\u0275queryRefresh"](_t=core["\u0275\u0275loadQuery"]())&&(ctx.handleView=_t.first)}},decls:3,vars:0,consts:[["handleView",""],["tabindex","0",1,"drag-handle","text-muted","float-left","p-1","mr-2"],[1,"fas","fa-grip-vertical","fa-fw",3,"title"]],template:function ItemEditBitstreamDragHandleComponent_Template(rf,ctx){1&rf&&(core["\u0275\u0275template"](0,ItemEditBitstreamDragHandleComponent_ng_template_0_Template,7,3,"ng-template",null,0,core["\u0275\u0275templateRefExtractor"]),core["\u0275\u0275text"](2,"\n"))},pipes:[ngx_translate_core.d],styles:[".header-row[_ngcontent-%COMP%]{color:var(--bs-table-dark-color);background-color:var(--bs-table-dark-bg);border-color:var(--bs-table-dark-border-color)}.bundle-row[_ngcontent-%COMP%]{color:var(--bs-table-head-color);background-color:var(--bs-table-head-bg);border-color:var(--bs-table-border-color)}.row-element[_ngcontent-%COMP%]{padding:.75em;border-bottom:var(--bs-table-border-width) solid var(--bs-table-border-color)}.drag-handle[_ngcontent-%COMP%]{visibility:hidden}.bitstream-row-drag-handle[_ngcontent-%COMP%]:hover, .drag-handle[_ngcontent-%COMP%]:hover{cursor:move}[_nghost-%COMP%]     .bitstream-row-drag-handle:focus .drag-handle, [_nghost-%COMP%]     .bitstream-row:hover .drag-handle{visibility:visible!important}.cdk-drag-preview[_ngcontent-%COMP%]{margin-left:0;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12);box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%]{-webkit-transition:-webkit-transform .25s cubic-bezier(0,0,.2,1);transition:-webkit-transform .25s cubic-bezier(0,0,.2,1);transition:transform .25s cubic-bezier(0,0,.2,1);transition:transform .25s cubic-bezier(0,0,.2,1),-webkit-transform .25s cubic-bezier(0,0,.2,1)}.cdk-drop-list-dragging[_ngcontent-%COMP%]   .bitstream-row-drag-handle[_ngcontent-%COMP%], .cdk-drop-list-dragging[_ngcontent-%COMP%]   .drag-handle[_ngcontent-%COMP%]{cursor:-webkit-grabbing;cursor:grabbing}"]});__webpack_require__("kBGy"),__webpack_require__("PN+Z");var pagination_component_options_model=__webpack_require__("7DXY"),drag_drop=__webpack_require__("5+WD"),pagination_component=__webpack_require__("Exvd"),object_values_pipe=__webpack_require__("snSO"),item_relationships_utils=__webpack_require__("ysan"),pagination_service=__webpack_require__("MFUF");class abstract_paginated_drag_and_drop_list_component_AbstractPaginatedDragAndDropListComponent{constructor(objectUpdatesService,elRef,objectValuesPipe,paginationService){this.objectUpdatesService=objectUpdatesService,this.elRef=elRef,this.objectValuesPipe=objectValuesPipe,this.paginationService=paginationService,this.dropObject=new core.EventEmitter,this.pageSize=10,this.options=Object.assign(new pagination_component_options_model.a,{id:"dad",currentPage:1,pageSize:this.pageSize}),this.currentPage$=new internal_BehaviorSubject.a(this.options),this.loading$=new internal_BehaviorSubject.a(!1),this.subs=[]}ngOnInit(){this.initializeObjectsRD(),this.initializeURL(),this.initializeUpdates(),this.initializePagination()}initializePagination(){this.paginationService.getCurrentPagination(this.options.id,this.options).subscribe((currentPagination=>{this.currentPage$.next(currentPagination)}))}initializeUpdates(){this.objectsRD$.pipe(Object(operators.i)(),Object(operators.s)()).subscribe((objects=>{this.objectUpdatesService.initialize(this.url,objects,new Date)})),this.updates$=this.objectsRD$.pipe(Object(operators.c)(),Object(operators.s)(),Object(switchMap.a)((objects=>this.objectUpdatesService.getFieldUpdatesExclusive(this.url,objects)))),this.subs.push(this.updates$.pipe(Object(map.a)((fieldUpdates=>this.objectValuesPipe.transform(fieldUpdates))),Object(distinctUntilChanged.a)(Object(item_relationships_utils.b)((fieldUpdate=>Object(empty_util.b)(fieldUpdate)&&Object(empty_util.b)(fieldUpdate.field)?fieldUpdate.field.uuid:void 0)))).subscribe((updateValues=>{this.customOrder=updateValues.map((fieldUpdate=>fieldUpdate.field.uuid)),this.loading$.next(!1)})),this.loading$.subscribe((loading=>this.options.disabled=loading)))}drop(event){const dragIndex=event.previousIndex;let dropIndex=event.currentIndex;const dragPage=this.currentPage$.value.currentPage-1;let dropPage=this.currentPage$.value.currentPage-1;const droppedOnElement=this.elRef.nativeElement.querySelector(".page-item:hover");if(Object(empty_util.b)(droppedOnElement)&&Object(empty_util.b)(droppedOnElement.textContent)){const droppedPage=Number(droppedOnElement.textContent);Object(empty_util.b)(droppedPage)&&!Number.isNaN(droppedPage)&&(dropPage=droppedPage-1,dropIndex=0)}const isNewPage=dragPage!==dropPage;isNewPage||dragIndex===dropIndex||Object(drag_drop.e)(this.customOrder,dragIndex,dropIndex);const redirectPage=dropPage+1,fromIndex=dragPage*this.pageSize+dragIndex,toIndex=dropPage*this.pageSize+dropIndex;fromIndex!==toIndex&&(isNewPage&&this.loading$.next(!0),this.dropObject.emit(Object.assign({fromIndex:fromIndex,toIndex:toIndex,finish:()=>{isNewPage&&this.paginationComponent.doPageChange(redirectPage)}})))}ngOnDestroy(){this.subs.filter((sub=>Object(empty_util.b)(sub))).forEach((sub=>sub.unsubscribe())),this.paginationService.clearPagination(this.options.id)}}abstract_paginated_drag_and_drop_list_component_AbstractPaginatedDragAndDropListComponent.\u0275fac=function AbstractPaginatedDragAndDropListComponent_Factory(t){return new(t||abstract_paginated_drag_and_drop_list_component_AbstractPaginatedDragAndDropListComponent)(core["\u0275\u0275directiveInject"](object_updates_service.a),core["\u0275\u0275directiveInject"](core.ElementRef),core["\u0275\u0275directiveInject"](object_values_pipe.a),core["\u0275\u0275directiveInject"](pagination_service.a))},abstract_paginated_drag_and_drop_list_component_AbstractPaginatedDragAndDropListComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:abstract_paginated_drag_and_drop_list_component_AbstractPaginatedDragAndDropListComponent,selectors:[["ds-paginated-drag-drop-abstract"]],viewQuery:function AbstractPaginatedDragAndDropListComponent_Query(rf,ctx){if(1&rf&&core["\u0275\u0275viewQuery"](pagination_component.a,1),2&rf){let _t;core["\u0275\u0275queryRefresh"](_t=core["\u0275\u0275loadQuery"]())&&(ctx.paginationComponent=_t.first)}},outputs:{dropObject:"dropObject"},decls:0,vars:0,template:function AbstractPaginatedDragAndDropListComponent_Template(rf,ctx){},encapsulation:2});var lodash=__webpack_require__("LvDl"),dso_name_service=__webpack_require__("C765");const item_edit_bitstream_component_c0=["bitstreamView"],item_edit_bitstream_component_c1=function(a1){return["/bitstreams/",a1,"edit"]};function ItemEditBitstreamComponent_ng_template_0_Template(rf,ctx){if(1&rf){const _r3=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275text"](0,"\n  "),core["\u0275\u0275elementStart"](1,"div"),core["\u0275\u0275text"](2,"\n    "),core["\u0275\u0275projection"](3),core["\u0275\u0275text"](4,"\n    "),core["\u0275\u0275elementStart"](5,"div",1),core["\u0275\u0275text"](6,"\n      "),core["\u0275\u0275elementStart"](7,"span",2),core["\u0275\u0275text"](8),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](9,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](10,"\n  "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](11,"\n  "),core["\u0275\u0275elementStart"](12,"div"),core["\u0275\u0275text"](13,"\n    "),core["\u0275\u0275elementStart"](14,"div",3),core["\u0275\u0275text"](15,"\n      "),core["\u0275\u0275elementStart"](16,"span",2),core["\u0275\u0275text"](17),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](18,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](19,"\n  "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](20,"\n  "),core["\u0275\u0275elementStart"](21,"div"),core["\u0275\u0275text"](22,"\n    "),core["\u0275\u0275elementStart"](23,"div",4),core["\u0275\u0275text"](24,"\n        "),core["\u0275\u0275elementStart"](25,"span",2),core["\u0275\u0275text"](26),core["\u0275\u0275pipe"](27,"async"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](28,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](29,"\n  "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](30,"\n  "),core["\u0275\u0275elementStart"](31,"div"),core["\u0275\u0275text"](32,"\n    "),core["\u0275\u0275elementStart"](33,"div",4),core["\u0275\u0275text"](34,"\n      "),core["\u0275\u0275elementStart"](35,"div",5),core["\u0275\u0275text"](36,"\n        "),core["\u0275\u0275elementStart"](37,"a",6),core["\u0275\u0275pipe"](38,"translate"),core["\u0275\u0275text"](39,"\n          "),core["\u0275\u0275element"](40,"i",7),core["\u0275\u0275text"](41,"\n        "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](42,"\n        "),core["\u0275\u0275elementStart"](43,"button",8),core["\u0275\u0275pipe"](44,"translate"),core["\u0275\u0275text"](45,"\n          "),core["\u0275\u0275element"](46,"i",9),core["\u0275\u0275text"](47,"\n        "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](48,"\n        "),core["\u0275\u0275elementStart"](49,"button",10),core["\u0275\u0275listener"]("click",(function ItemEditBitstreamComponent_ng_template_0_Template_button_click_49_listener(){core["\u0275\u0275restoreView"](_r3);return core["\u0275\u0275nextContext"]().remove()})),core["\u0275\u0275pipe"](50,"translate"),core["\u0275\u0275text"](51,"\n          "),core["\u0275\u0275element"](52,"i",11),core["\u0275\u0275text"](53,"\n        "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](54,"\n        "),core["\u0275\u0275elementStart"](55,"button",12),core["\u0275\u0275listener"]("click",(function ItemEditBitstreamComponent_ng_template_0_Template_button_click_55_listener(){core["\u0275\u0275restoreView"](_r3);return core["\u0275\u0275nextContext"]().undo()})),core["\u0275\u0275pipe"](56,"translate"),core["\u0275\u0275text"](57,"\n          "),core["\u0275\u0275element"](58,"i",13),core["\u0275\u0275text"](59,"\n        "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](60,"\n      "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](61,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](62,"\n  "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](63,"\n")}if(2&rf){const ctx_r1=core["\u0275\u0275nextContext"]();let tmp_5_0=null;core["\u0275\u0275advance"](1),core["\u0275\u0275classMapInterpolate1"]("",ctx_r1.columnSizes.columns[0].buildClasses()," row-element d-flex"),core["\u0275\u0275advance"](7),core["\u0275\u0275textInterpolate1"]("\n        ",ctx_r1.bitstreamName,"\n      "),core["\u0275\u0275advance"](4),core["\u0275\u0275classMapInterpolate1"]("",ctx_r1.columnSizes.columns[1].buildClasses()," row-element d-flex align-items-center"),core["\u0275\u0275advance"](5),core["\u0275\u0275textInterpolate1"]("\n      ",null==ctx_r1.bitstream?null:ctx_r1.bitstream.firstMetadataValue("dc.description"),"\n      "),core["\u0275\u0275advance"](4),core["\u0275\u0275classMapInterpolate1"]("",ctx_r1.columnSizes.columns[2].buildClasses()," row-element d-flex align-items-center"),core["\u0275\u0275advance"](5),core["\u0275\u0275textInterpolate1"]("\n            ",null==(tmp_5_0=core["\u0275\u0275pipeBind1"](27,23,ctx_r1.format$))?null:tmp_5_0.shortDescription,"\n        "),core["\u0275\u0275advance"](5),core["\u0275\u0275classMapInterpolate1"]("",ctx_r1.columnSizes.columns[3].buildClasses()," row-element d-flex align-items-center"),core["\u0275\u0275advance"](6),core["\u0275\u0275propertyInterpolate"]("title",core["\u0275\u0275pipeBind1"](38,25,"item.edit.bitstreams.edit.buttons.download")),core["\u0275\u0275property"]("href",null==ctx_r1.bitstream||null==ctx_r1.bitstream._links||null==ctx_r1.bitstream._links.content?null:ctx_r1.bitstream._links.content.href,core["\u0275\u0275sanitizeUrl"]),core["\u0275\u0275advance"](6),core["\u0275\u0275propertyInterpolate"]("title",core["\u0275\u0275pipeBind1"](44,27,"item.edit.bitstreams.edit.buttons.edit")),core["\u0275\u0275property"]("routerLink",core["\u0275\u0275pureFunction1"](33,item_edit_bitstream_component_c1,ctx_r1.bitstream.id)),core["\u0275\u0275advance"](6),core["\u0275\u0275propertyInterpolate"]("title",core["\u0275\u0275pipeBind1"](50,29,"item.edit.bitstreams.edit.buttons.remove")),core["\u0275\u0275property"]("disabled",!ctx_r1.canRemove()),core["\u0275\u0275advance"](6),core["\u0275\u0275propertyInterpolate"]("title",core["\u0275\u0275pipeBind1"](56,31,"item.edit.bitstreams.edit.buttons.undo")),core["\u0275\u0275property"]("disabled",!ctx_r1.canUndo())}}const _c2=[[["","slot","drag-handle"]]];class item_edit_bitstream_component_ItemEditBitstreamComponent{constructor(objectUpdatesService,dsoNameService,viewContainerRef){this.objectUpdatesService=objectUpdatesService,this.dsoNameService=dsoNameService,this.viewContainerRef=viewContainerRef}ngOnInit(){this.viewContainerRef.createEmbeddedView(this.bitstreamView)}ngOnChanges(changes){this.bitstream=Object(lodash.cloneDeep)(this.fieldUpdate.field),this.bitstreamName=this.dsoNameService.getName(this.bitstream),this.format$=this.bitstream.format.pipe(Object(operators.i)(),Object(operators.o)())}remove(){this.objectUpdatesService.saveRemoveFieldUpdate(this.bundleUrl,this.bitstream)}undo(){this.objectUpdatesService.removeSingleFieldUpdate(this.bundleUrl,this.bitstream.uuid)}canRemove(){return this.fieldUpdate.changeType!==object_updates_actions.c.REMOVE}canUndo(){return this.fieldUpdate.changeType>=0}}item_edit_bitstream_component_ItemEditBitstreamComponent.\u0275fac=function ItemEditBitstreamComponent_Factory(t){return new(t||item_edit_bitstream_component_ItemEditBitstreamComponent)(core["\u0275\u0275directiveInject"](object_updates_service.a),core["\u0275\u0275directiveInject"](dso_name_service.a),core["\u0275\u0275directiveInject"](core.ViewContainerRef))},item_edit_bitstream_component_ItemEditBitstreamComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:item_edit_bitstream_component_ItemEditBitstreamComponent,selectors:[["ds-item-edit-bitstream"]],viewQuery:function ItemEditBitstreamComponent_Query(rf,ctx){if(1&rf&&core["\u0275\u0275viewQuery"](item_edit_bitstream_component_c0,3),2&rf){let _t;core["\u0275\u0275queryRefresh"](_t=core["\u0275\u0275loadQuery"]())&&(ctx.bitstreamView=_t.first)}},inputs:{fieldUpdate:"fieldUpdate",bundleUrl:"bundleUrl",columnSizes:"columnSizes"},features:[core["\u0275\u0275NgOnChangesFeature"]],ngContentSelectors:["[slot=drag-handle]"],decls:3,vars:0,consts:[["bitstreamView",""],[1,"float-left","d-flex","align-items-center","overflow-hidden"],[1,"text-truncate"],[1,"w-100"],[1,"text-center","w-100"],[1,"btn-group","relationship-action-buttons"],[1,"btn","btn-outline-primary","btn-sm",3,"href","title"],[1,"fas","fa-download","fa-fw"],[1,"btn","btn-outline-primary","btn-sm",3,"routerLink","title"],[1,"fas","fa-edit","fa-fw"],[1,"btn","btn-outline-danger","btn-sm",3,"disabled","title","click"],[1,"fas","fa-trash-alt","fa-fw"],[1,"btn","btn-outline-warning","btn-sm",3,"disabled","title","click"],[1,"fas","fa-undo-alt","fa-fw"]],template:function ItemEditBitstreamComponent_Template(rf,ctx){1&rf&&(core["\u0275\u0275projectionDef"](_c2),core["\u0275\u0275template"](0,ItemEditBitstreamComponent_ng_template_0_Template,64,35,"ng-template",null,0,core["\u0275\u0275templateRefExtractor"]),core["\u0275\u0275text"](2,"\n"))},directives:[fesm2015_router.h],pipes:[common.AsyncPipe,ngx_translate_core.d],styles:[".header-row[_ngcontent-%COMP%]{color:var(--bs-table-dark-color);background-color:var(--bs-table-dark-bg);border-color:var(--bs-table-dark-border-color)}.bundle-row[_ngcontent-%COMP%]{color:var(--bs-table-head-color);background-color:var(--bs-table-head-bg);border-color:var(--bs-table-border-color)}.row-element[_ngcontent-%COMP%]{padding:.75em;border-bottom:var(--bs-table-border-width) solid var(--bs-table-border-color)}.drag-handle[_ngcontent-%COMP%]{visibility:hidden}.bitstream-row-drag-handle[_ngcontent-%COMP%]:hover, .drag-handle[_ngcontent-%COMP%]:hover{cursor:move}[_nghost-%COMP%]     .bitstream-row-drag-handle:focus .drag-handle, [_nghost-%COMP%]     .bitstream-row:hover .drag-handle{visibility:visible!important}.cdk-drag-preview[_ngcontent-%COMP%]{margin-left:0;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12);box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%]{-webkit-transition:-webkit-transform .25s cubic-bezier(0,0,.2,1);transition:-webkit-transform .25s cubic-bezier(0,0,.2,1);transition:transform .25s cubic-bezier(0,0,.2,1);transition:transform .25s cubic-bezier(0,0,.2,1),-webkit-transform .25s cubic-bezier(0,0,.2,1)}.cdk-drop-list-dragging[_ngcontent-%COMP%]   .bitstream-row-drag-handle[_ngcontent-%COMP%], .cdk-drop-list-dragging[_ngcontent-%COMP%]   .drag-handle[_ngcontent-%COMP%]{cursor:-webkit-grabbing;cursor:grabbing}"]});var loading_component=__webpack_require__("Frqi");const paginated_drag_and_drop_bitstream_list_component_c0=function(a0,a1,a2,a3){return{"table-warning":a0,"table-danger":a1,"table-success":a2,"bg-white":a3}};function PaginatedDragAndDropBitstreamListComponent_ds_pagination_0_ng_container_4_div_2_ng_container_3_div_2_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"div",7),core["\u0275\u0275text"](1,"\n          "),core["\u0275\u0275elementStart"](2,"ds-item-edit-bitstream",8),core["\u0275\u0275text"](3,"\n            "),core["\u0275\u0275elementStart"](4,"div",9),core["\u0275\u0275text"](5,"\n              "),core["\u0275\u0275element"](6,"ds-item-edit-bitstream-drag-handle"),core["\u0275\u0275text"](7,"\n            "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](8,"\n          "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](9,"\n        "),core["\u0275\u0275elementEnd"]()),2&rf){const uuid_r7=ctx.$implicit,updates_r4=core["\u0275\u0275nextContext"](2).ngVar,ctx_r6=core["\u0275\u0275nextContext"](3);core["\u0275\u0275property"]("id",uuid_r7)("ngClass",core["\u0275\u0275pureFunction4"](5,paginated_drag_and_drop_bitstream_list_component_c0,0===updates_r4[uuid_r7].changeType,2===updates_r4[uuid_r7].changeType,1===updates_r4[uuid_r7].changeType,void 0===updates_r4[uuid_r7].changeType)),core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("fieldUpdate",updates_r4[uuid_r7])("bundleUrl",ctx_r6.bundle.self)("columnSizes",ctx_r6.columnSizes)}}function PaginatedDragAndDropBitstreamListComponent_ds_pagination_0_ng_container_4_div_2_ng_container_3_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementContainerStart"](0),core["\u0275\u0275text"](1,"\n        "),core["\u0275\u0275template"](2,PaginatedDragAndDropBitstreamListComponent_ds_pagination_0_ng_container_4_div_2_ng_container_3_div_2_Template,10,10,"div",6),core["\u0275\u0275text"](3,"\n      "),core["\u0275\u0275elementContainerEnd"]()),2&rf){const ctx_r5=core["\u0275\u0275nextContext"](4);core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngForOf",ctx_r5.customOrder)}}const paginated_drag_and_drop_bitstream_list_component_c1=function(a0){return{"mb-3":a0}};function PaginatedDragAndDropBitstreamListComponent_ds_pagination_0_ng_container_4_div_2_Template(rf,ctx){if(1&rf){const _r10=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementStart"](0,"div",5),core["\u0275\u0275listener"]("cdkDropListDropped",(function PaginatedDragAndDropBitstreamListComponent_ds_pagination_0_ng_container_4_div_2_Template_div_cdkDropListDropped_0_listener($event){core["\u0275\u0275restoreView"](_r10);return core["\u0275\u0275nextContext"](3).drop($event)})),core["\u0275\u0275pipe"](1,"async"),core["\u0275\u0275text"](2,"\n      "),core["\u0275\u0275template"](3,PaginatedDragAndDropBitstreamListComponent_ds_pagination_0_ng_container_4_div_2_ng_container_3_Template,4,1,"ng-container",2),core["\u0275\u0275text"](4,"\n    "),core["\u0275\u0275elementEnd"]()}if(2&rf){const updates_r4=ctx.ngVar,ctx_r3=core["\u0275\u0275nextContext"](3);let tmp_1_0=null;core["\u0275\u0275property"]("id",ctx_r3.bundle.id)("ngClass",core["\u0275\u0275pureFunction1"](5,paginated_drag_and_drop_bitstream_list_component_c1,(null==(tmp_1_0=core["\u0275\u0275pipeBind1"](1,3,ctx_r3.objectsRD$))||null==tmp_1_0.payload?null:tmp_1_0.payload.totalElements)>ctx_r3.pageSize)),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("ngIf",updates_r4)}}function PaginatedDragAndDropBitstreamListComponent_ds_pagination_0_ng_container_4_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementContainerStart"](0),core["\u0275\u0275text"](1,"\n    "),core["\u0275\u0275template"](2,PaginatedDragAndDropBitstreamListComponent_ds_pagination_0_ng_container_4_div_2_Template,5,7,"div",4),core["\u0275\u0275pipe"](3,"async"),core["\u0275\u0275text"](4,"\n  "),core["\u0275\u0275elementContainerEnd"]()),2&rf){const ctx_r1=core["\u0275\u0275nextContext"](2);core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngVar",core["\u0275\u0275pipeBind1"](3,1,ctx_r1.updates$))}}function PaginatedDragAndDropBitstreamListComponent_ds_pagination_0_ds_loading_7_Template(rf,ctx){1&rf&&(core["\u0275\u0275element"](0,"ds-loading",10),core["\u0275\u0275pipe"](1,"translate")),2&rf&&core["\u0275\u0275property"]("message",core["\u0275\u0275pipeBind1"](1,1,"loading.bitstreams"))}function PaginatedDragAndDropBitstreamListComponent_ds_pagination_0_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"ds-pagination",1),core["\u0275\u0275pipe"](1,"async"),core["\u0275\u0275pipe"](2,"async"),core["\u0275\u0275text"](3,"\n  "),core["\u0275\u0275template"](4,PaginatedDragAndDropBitstreamListComponent_ds_pagination_0_ng_container_4_Template,5,3,"ng-container",2),core["\u0275\u0275pipe"](5,"async"),core["\u0275\u0275text"](6,"\n  "),core["\u0275\u0275template"](7,PaginatedDragAndDropBitstreamListComponent_ds_pagination_0_ds_loading_7_Template,2,3,"ds-loading",3),core["\u0275\u0275pipe"](8,"async"),core["\u0275\u0275text"](9,"\n"),core["\u0275\u0275elementEnd"]()),2&rf){const ctx_r0=core["\u0275\u0275nextContext"]();let tmp_4_0=null,tmp_5_0=null;core["\u0275\u0275property"]("hideGear",!0)("hidePagerWhenSinglePage",!0)("hidePaginationDetail",!0)("paginationOptions",ctx_r0.options)("pageInfoState",null==(tmp_4_0=core["\u0275\u0275pipeBind1"](1,8,ctx_r0.objectsRD$))?null:tmp_4_0.payload)("collectionSize",null==(tmp_5_0=core["\u0275\u0275pipeBind1"](2,10,ctx_r0.objectsRD$))||null==tmp_5_0.payload?null:tmp_5_0.payload.totalElements),core["\u0275\u0275advance"](4),core["\u0275\u0275property"]("ngIf",!core["\u0275\u0275pipeBind1"](5,12,ctx_r0.loading$)),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("ngIf",core["\u0275\u0275pipeBind1"](8,14,ctx_r0.loading$))}}class paginated_drag_and_drop_bitstream_list_component_PaginatedDragAndDropBitstreamListComponent extends abstract_paginated_drag_and_drop_list_component_AbstractPaginatedDragAndDropListComponent{constructor(objectUpdatesService,elRef,objectValuesPipe,bundleService,paginationService,requestService){super(objectUpdatesService,elRef,objectValuesPipe,paginationService),this.objectUpdatesService=objectUpdatesService,this.elRef=elRef,this.objectValuesPipe=objectValuesPipe,this.bundleService=bundleService,this.paginationService=paginationService,this.requestService=requestService}ngOnInit(){super.ngOnInit()}initializeObjectsRD(){this.objectsRD$=this.currentPage$.pipe(Object(switchMap.a)((page=>{const paginatedOptions=new paginated_search_options_model.a({pagination:Object.assign({},page)});return this.bundleService.getBitstreamsEndpoint(this.bundle.id,paginatedOptions).pipe(Object(switchMap.a)((href=>this.requestService.hasByHref$(href))),Object(switchMap.a)((()=>this.bundleService.getBitstreams(this.bundle.id,paginatedOptions,Object(follow_link_config_model.a)("format")))))})))}initializeURL(){this.url=this.bundle.self}}paginated_drag_and_drop_bitstream_list_component_PaginatedDragAndDropBitstreamListComponent.\u0275fac=function PaginatedDragAndDropBitstreamListComponent_Factory(t){return new(t||paginated_drag_and_drop_bitstream_list_component_PaginatedDragAndDropBitstreamListComponent)(core["\u0275\u0275directiveInject"](object_updates_service.a),core["\u0275\u0275directiveInject"](core.ElementRef),core["\u0275\u0275directiveInject"](object_values_pipe.a),core["\u0275\u0275directiveInject"](bundle_data_service.a),core["\u0275\u0275directiveInject"](pagination_service.a),core["\u0275\u0275directiveInject"](request_service.a))},paginated_drag_and_drop_bitstream_list_component_PaginatedDragAndDropBitstreamListComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:paginated_drag_and_drop_bitstream_list_component_PaginatedDragAndDropBitstreamListComponent,selectors:[["ds-paginated-drag-and-drop-bitstream-list"]],inputs:{bundle:"bundle",columnSizes:"columnSizes"},features:[core["\u0275\u0275InheritDefinitionFeature"]],decls:3,vars:3,consts:[[3,"hideGear","hidePagerWhenSinglePage","hidePaginationDetail","paginationOptions","pageInfoState","collectionSize",4,"ngIf"],[3,"hideGear","hidePagerWhenSinglePage","hidePaginationDetail","paginationOptions","pageInfoState","collectionSize"],[4,"ngIf"],[3,"message",4,"ngIf"],["class","bundle-bitstreams-list","cdkDropList","",3,"id","ngClass","cdkDropListDropped",4,"ngVar"],["cdkDropList","",1,"bundle-bitstreams-list",3,"id","ngClass","cdkDropListDropped"],["class","row bitstream-row","cdkDrag","",3,"id","ngClass",4,"ngFor","ngForOf"],["cdkDrag","",1,"row","bitstream-row",3,"id","ngClass"],[3,"fieldUpdate","bundleUrl","columnSizes"],["slot","drag-handle","cdkDragHandle","","tabindex","0",1,"d-flex","align-items-center","bitstream-row-drag-handle"],[3,"message"]],template:function PaginatedDragAndDropBitstreamListComponent_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275template"](0,PaginatedDragAndDropBitstreamListComponent_ds_pagination_0_Template,10,16,"ds-pagination",0),core["\u0275\u0275pipe"](1,"async"),core["\u0275\u0275text"](2,"\n")),2&rf){let tmp_0_0=null;core["\u0275\u0275property"]("ngIf",null==(tmp_0_0=core["\u0275\u0275pipeBind1"](1,1,ctx.objectsRD$))?null:tmp_0_0.payload)}},directives:[common.NgIf,pagination_component.a,var_directive.a,drag_drop.c,common.NgClass,common.NgForOf,drag_drop.a,item_edit_bitstream_component_ItemEditBitstreamComponent,drag_drop.b,ItemEditBitstreamDragHandleComponent,loading_component.a],pipes:[common.AsyncPipe,ngx_translate_core.d],styles:[".header-row[_ngcontent-%COMP%]{color:var(--bs-table-dark-color);background-color:var(--bs-table-dark-bg);border-color:var(--bs-table-dark-border-color)}.bundle-row[_ngcontent-%COMP%]{color:var(--bs-table-head-color);background-color:var(--bs-table-head-bg);border-color:var(--bs-table-border-color)}.row-element[_ngcontent-%COMP%]{padding:.75em;border-bottom:var(--bs-table-border-width) solid var(--bs-table-border-color)}.drag-handle[_ngcontent-%COMP%]{visibility:hidden}.bitstream-row-drag-handle[_ngcontent-%COMP%]:hover, .drag-handle[_ngcontent-%COMP%]:hover{cursor:move}[_nghost-%COMP%]     .bitstream-row-drag-handle:focus .drag-handle, [_nghost-%COMP%]     .bitstream-row:hover .drag-handle{visibility:visible!important}.cdk-drag-preview[_ngcontent-%COMP%]{margin-left:0;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12);box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%]{-webkit-transition:-webkit-transform .25s cubic-bezier(0,0,.2,1);transition:-webkit-transform .25s cubic-bezier(0,0,.2,1);transition:transform .25s cubic-bezier(0,0,.2,1);transition:transform .25s cubic-bezier(0,0,.2,1),-webkit-transform .25s cubic-bezier(0,0,.2,1)}.cdk-drop-list-dragging[_ngcontent-%COMP%]   .bitstream-row-drag-handle[_ngcontent-%COMP%], .cdk-drop-list-dragging[_ngcontent-%COMP%]   .drag-handle[_ngcontent-%COMP%]{cursor:-webkit-grabbing;cursor:grabbing}"]});const item_edit_bitstream_bundle_component_c0=["bundleView"],item_edit_bitstream_bundle_component_c1=function(a0){return{name:a0}},item_edit_bitstream_bundle_component_c2=function(a0){return[a0,"bitstreams","new"]},item_edit_bitstream_bundle_component_c3=function(a0){return{bundle:a0}};function ItemEditBitstreamBundleComponent_ng_template_0_Template(rf,ctx){if(1&rf){const _r3=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275text"](0,"\n  "),core["\u0275\u0275elementStart"](1,"div",1),core["\u0275\u0275text"](2,"\n    "),core["\u0275\u0275elementStart"](3,"div"),core["\u0275\u0275text"](4,"\n      "),core["\u0275\u0275element"](5,"ds-item-edit-bitstream-drag-handle"),core["\u0275\u0275text"](6,"\n      "),core["\u0275\u0275elementStart"](7,"div",2),core["\u0275\u0275text"](8),core["\u0275\u0275pipe"](9,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](10,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](11,"\n    "),core["\u0275\u0275elementStart"](12,"div"),core["\u0275\u0275text"](13,"\n      "),core["\u0275\u0275elementStart"](14,"div",3),core["\u0275\u0275text"](15,"\n        "),core["\u0275\u0275elementStart"](16,"button",4),core["\u0275\u0275pipe"](17,"translate"),core["\u0275\u0275text"](18,"\n          "),core["\u0275\u0275element"](19,"i",5),core["\u0275\u0275text"](20,"\n        "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](21,"\n      "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](22,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](23,"\n  "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](24,"\n  "),core["\u0275\u0275elementStart"](25,"ds-paginated-drag-and-drop-bitstream-list",6),core["\u0275\u0275listener"]("dropObject",(function ItemEditBitstreamBundleComponent_ng_template_0_Template_ds_paginated_drag_and_drop_bitstream_list_dropObject_25_listener($event){core["\u0275\u0275restoreView"](_r3);return core["\u0275\u0275nextContext"]().dropObject.emit($event)})),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](26,"\n")}if(2&rf){const ctx_r1=core["\u0275\u0275nextContext"]();core["\u0275\u0275advance"](3),core["\u0275\u0275classMapInterpolate1"]("",ctx_r1.bundleNameColumn.buildClasses()," font-weight-bold row-element d-flex"),core["\u0275\u0275advance"](5),core["\u0275\u0275textInterpolate1"]("\n        ",core["\u0275\u0275pipeBind2"](9,12,"item.edit.bitstreams.bundle.name",core["\u0275\u0275pureFunction1"](17,item_edit_bitstream_bundle_component_c1,ctx_r1.bundle.name)),"\n      "),core["\u0275\u0275advance"](4),core["\u0275\u0275classMapInterpolate1"]("",ctx_r1.columnSizes.columns[3].buildClasses()," text-center row-element"),core["\u0275\u0275advance"](4),core["\u0275\u0275propertyInterpolate"]("title",core["\u0275\u0275pipeBind1"](17,15,"item.edit.bitstreams.bundle.edit.buttons.upload")),core["\u0275\u0275property"]("routerLink",core["\u0275\u0275pureFunction1"](19,item_edit_bitstream_bundle_component_c2,ctx_r1.itemPageRoute))("queryParams",core["\u0275\u0275pureFunction1"](21,item_edit_bitstream_bundle_component_c3,ctx_r1.bundle.id)),core["\u0275\u0275advance"](9),core["\u0275\u0275property"]("bundle",ctx_r1.bundle)("columnSizes",ctx_r1.columnSizes)}}class item_edit_bitstream_bundle_component_ItemEditBitstreamBundleComponent{constructor(viewContainerRef){this.viewContainerRef=viewContainerRef,this.dropObject=new core.EventEmitter}ngOnInit(){this.bundleNameColumn=this.columnSizes.combineColumns(0,2),this.viewContainerRef.createEmbeddedView(this.bundleView),this.itemPageRoute=Object(item_page_routing_paths.h)(this.item)}}function ItemBitstreamsComponent_div_0_button_12_Template(rf,ctx){if(1&rf){const _r10=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementStart"](0,"button",17),core["\u0275\u0275listener"]("click",(function ItemBitstreamsComponent_div_0_button_12_Template_button_click_0_listener(){core["\u0275\u0275restoreView"](_r10);return core["\u0275\u0275nextContext"](2).reinstate()})),core["\u0275\u0275element"](1,"i",18),core["\u0275\u0275text"](2,"\n      "),core["\u0275\u0275elementStart"](3,"span",5),core["\u0275\u0275text"](4),core["\u0275\u0275pipe"](5,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](6,"\n    "),core["\u0275\u0275elementEnd"]()}2&rf&&(core["\u0275\u0275advance"](4),core["\u0275\u0275textInterpolate1"]("\xa0",core["\u0275\u0275pipeBind1"](5,1,"item.edit.bitstreams.reinstate-button"),""))}function ItemBitstreamsComponent_div_0_button_24_Template(rf,ctx){if(1&rf){const _r12=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementStart"](0,"button",19),core["\u0275\u0275listener"]("click",(function ItemBitstreamsComponent_div_0_button_24_Template_button_click_0_listener(){core["\u0275\u0275restoreView"](_r12);return core["\u0275\u0275nextContext"](2).discard()})),core["\u0275\u0275pipe"](1,"async"),core["\u0275\u0275element"](2,"i",20),core["\u0275\u0275text"](3,"\n      "),core["\u0275\u0275elementStart"](4,"span",5),core["\u0275\u0275text"](5),core["\u0275\u0275pipe"](6,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](7,"\n    "),core["\u0275\u0275elementEnd"]()}if(2&rf){const ctx_r3=core["\u0275\u0275nextContext"](2);core["\u0275\u0275property"]("disabled",!core["\u0275\u0275pipeBind1"](1,2,ctx_r3.hasChanges())||ctx_r3.submitting),core["\u0275\u0275advance"](5),core["\u0275\u0275textInterpolate1"]("\xa0",core["\u0275\u0275pipeBind1"](6,4,"item.edit.bitstreams.discard-button"),"")}}function ItemBitstreamsComponent_div_0_div_28_ds_item_edit_bitstream_bundle_23_Template(rf,ctx){if(1&rf){const _r16=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementStart"](0,"ds-item-edit-bitstream-bundle",24),core["\u0275\u0275listener"]("dropObject",(function ItemBitstreamsComponent_div_0_div_28_ds_item_edit_bitstream_bundle_23_Template_ds_item_edit_bitstream_bundle_dropObject_0_listener($event){core["\u0275\u0275restoreView"](_r16);const bundle_r14=ctx.$implicit;return core["\u0275\u0275nextContext"](3).dropBitstream(bundle_r14,$event)})),core["\u0275\u0275text"](1,"\n    "),core["\u0275\u0275elementEnd"]()}if(2&rf){const bundle_r14=ctx.$implicit,ctx_r13=core["\u0275\u0275nextContext"](3);core["\u0275\u0275property"]("bundle",bundle_r14)("item",ctx_r13.item)("columnSizes",ctx_r13.columnSizes)}}function ItemBitstreamsComponent_div_0_div_28_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"div",21),core["\u0275\u0275text"](1,"\n    "),core["\u0275\u0275elementStart"](2,"div",22),core["\u0275\u0275text"](3,"\n      "),core["\u0275\u0275elementStart"](4,"div"),core["\u0275\u0275text"](5,"\n        "),core["\u0275\u0275element"](6,"ds-item-edit-bitstream-drag-handle"),core["\u0275\u0275text"](7),core["\u0275\u0275pipe"](8,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](9,"\n      "),core["\u0275\u0275elementStart"](10,"div"),core["\u0275\u0275text"](11),core["\u0275\u0275pipe"](12,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](13,"\n      "),core["\u0275\u0275elementStart"](14,"div"),core["\u0275\u0275text"](15),core["\u0275\u0275pipe"](16,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](17,"\n      "),core["\u0275\u0275elementStart"](18,"div"),core["\u0275\u0275text"](19),core["\u0275\u0275pipe"](20,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](21,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](22,"\n    "),core["\u0275\u0275template"](23,ItemBitstreamsComponent_div_0_div_28_ds_item_edit_bitstream_bundle_23_Template,2,3,"ds-item-edit-bitstream-bundle",23),core["\u0275\u0275text"](24,"\n  "),core["\u0275\u0275elementEnd"]()),2&rf){const bundles_r1=core["\u0275\u0275nextContext"]().ngVar,ctx_r4=core["\u0275\u0275nextContext"]();core["\u0275\u0275advance"](4),core["\u0275\u0275classMapInterpolate1"]("",ctx_r4.columnSizes.columns[0].buildClasses()," row-element"),core["\u0275\u0275advance"](3),core["\u0275\u0275textInterpolate1"]("\n        ",core["\u0275\u0275pipeBind1"](8,17,"item.edit.bitstreams.headers.name"),"\n      "),core["\u0275\u0275advance"](3),core["\u0275\u0275classMapInterpolate1"]("",ctx_r4.columnSizes.columns[1].buildClasses()," row-element"),core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](12,19,"item.edit.bitstreams.headers.description")),core["\u0275\u0275advance"](3),core["\u0275\u0275classMapInterpolate1"]("",ctx_r4.columnSizes.columns[2].buildClasses()," text-center row-element"),core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](16,21,"item.edit.bitstreams.headers.format")),core["\u0275\u0275advance"](3),core["\u0275\u0275classMapInterpolate1"]("",ctx_r4.columnSizes.columns[3].buildClasses()," text-center row-element"),core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](20,23,"item.edit.bitstreams.headers.actions")),core["\u0275\u0275advance"](4),core["\u0275\u0275property"]("ngForOf",bundles_r1)}}function ItemBitstreamsComponent_div_0_div_30_Template(rf,ctx){1&rf&&(core["\u0275\u0275elementStart"](0,"div",25),core["\u0275\u0275text"](1),core["\u0275\u0275pipe"](2,"translate"),core["\u0275\u0275elementEnd"]()),2&rf&&(core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate1"]("\n    ",core["\u0275\u0275pipeBind1"](2,1,"item.edit.bitstreams.empty"),"\n  "))}function ItemBitstreamsComponent_div_0_ds_loading_32_Template(rf,ctx){1&rf&&(core["\u0275\u0275element"](0,"ds-loading",26),core["\u0275\u0275pipe"](1,"translate")),2&rf&&core["\u0275\u0275propertyInterpolate"]("message",core["\u0275\u0275pipeBind1"](1,1,"loading.bitstreams"))}function ItemBitstreamsComponent_div_0_button_38_Template(rf,ctx){if(1&rf){const _r19=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementStart"](0,"button",27),core["\u0275\u0275listener"]("click",(function ItemBitstreamsComponent_div_0_button_38_Template_button_click_0_listener(){core["\u0275\u0275restoreView"](_r19);return core["\u0275\u0275nextContext"](2).reinstate()})),core["\u0275\u0275element"](1,"i",18),core["\u0275\u0275text"](2,"\n        "),core["\u0275\u0275elementStart"](3,"span",5),core["\u0275\u0275text"](4),core["\u0275\u0275pipe"](5,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](6,"\n      "),core["\u0275\u0275elementEnd"]()}2&rf&&(core["\u0275\u0275advance"](4),core["\u0275\u0275textInterpolate1"]("\xa0",core["\u0275\u0275pipeBind1"](5,1,"item.edit.bitstreams.reinstate-button"),""))}function ItemBitstreamsComponent_div_0_button_50_Template(rf,ctx){if(1&rf){const _r21=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementStart"](0,"button",19),core["\u0275\u0275listener"]("click",(function ItemBitstreamsComponent_div_0_button_50_Template_button_click_0_listener(){core["\u0275\u0275restoreView"](_r21);return core["\u0275\u0275nextContext"](2).discard()})),core["\u0275\u0275pipe"](1,"async"),core["\u0275\u0275element"](2,"i",20),core["\u0275\u0275text"](3,"\n        "),core["\u0275\u0275elementStart"](4,"span",5),core["\u0275\u0275text"](5),core["\u0275\u0275pipe"](6,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](7,"\n      "),core["\u0275\u0275elementEnd"]()}if(2&rf){const ctx_r8=core["\u0275\u0275nextContext"](2);core["\u0275\u0275property"]("disabled",!core["\u0275\u0275pipeBind1"](1,2,ctx_r8.hasChanges())||ctx_r8.submitting),core["\u0275\u0275advance"](5),core["\u0275\u0275textInterpolate1"]("\xa0",core["\u0275\u0275pipeBind1"](6,4,"item.edit.bitstreams.discard-button"),"")}}item_edit_bitstream_bundle_component_ItemEditBitstreamBundleComponent.\u0275fac=function ItemEditBitstreamBundleComponent_Factory(t){return new(t||item_edit_bitstream_bundle_component_ItemEditBitstreamBundleComponent)(core["\u0275\u0275directiveInject"](core.ViewContainerRef))},item_edit_bitstream_bundle_component_ItemEditBitstreamBundleComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:item_edit_bitstream_bundle_component_ItemEditBitstreamBundleComponent,selectors:[["ds-item-edit-bitstream-bundle"]],viewQuery:function ItemEditBitstreamBundleComponent_Query(rf,ctx){if(1&rf&&core["\u0275\u0275viewQuery"](item_edit_bitstream_bundle_component_c0,3),2&rf){let _t;core["\u0275\u0275queryRefresh"](_t=core["\u0275\u0275loadQuery"]())&&(ctx.bundleView=_t.first)}},inputs:{bundle:"bundle",item:"item",columnSizes:"columnSizes"},outputs:{dropObject:"dropObject"},decls:3,vars:0,consts:[["bundleView",""],[1,"row","bundle-row"],[1,"float-left","d-flex","align-items-center"],[1,"btn-group","bundle-action-buttons"],[1,"btn","btn-outline-success","btn-sm",3,"routerLink","queryParams","title"],[1,"fas","fa-upload","fa-fw"],[3,"bundle","columnSizes","dropObject"]],template:function ItemEditBitstreamBundleComponent_Template(rf,ctx){1&rf&&(core["\u0275\u0275template"](0,ItemEditBitstreamBundleComponent_ng_template_0_Template,27,23,"ng-template",null,0,core["\u0275\u0275templateRefExtractor"]),core["\u0275\u0275text"](2,"\n"))},directives:[ItemEditBitstreamDragHandleComponent,fesm2015_router.h,paginated_drag_and_drop_bitstream_list_component_PaginatedDragAndDropBitstreamListComponent],pipes:[ngx_translate_core.d],styles:[".header-row[_ngcontent-%COMP%]{color:var(--bs-table-dark-color);background-color:var(--bs-table-dark-bg);border-color:var(--bs-table-dark-border-color)}.bundle-row[_ngcontent-%COMP%]{color:var(--bs-table-head-color);background-color:var(--bs-table-head-bg);border-color:var(--bs-table-border-color)}.row-element[_ngcontent-%COMP%]{padding:.75em;border-bottom:var(--bs-table-border-width) solid var(--bs-table-border-color)}.drag-handle[_ngcontent-%COMP%]{visibility:hidden}.bitstream-row-drag-handle[_ngcontent-%COMP%]:hover, .drag-handle[_ngcontent-%COMP%]:hover{cursor:move}[_nghost-%COMP%]     .bitstream-row-drag-handle:focus .drag-handle, [_nghost-%COMP%]     .bitstream-row:hover .drag-handle{visibility:visible!important}.cdk-drag-preview[_ngcontent-%COMP%]{margin-left:0;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12);box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%]{-webkit-transition:-webkit-transform .25s cubic-bezier(0,0,.2,1);transition:-webkit-transform .25s cubic-bezier(0,0,.2,1);transition:transform .25s cubic-bezier(0,0,.2,1);transition:transform .25s cubic-bezier(0,0,.2,1),-webkit-transform .25s cubic-bezier(0,0,.2,1)}.cdk-drop-list-dragging[_ngcontent-%COMP%]   .bitstream-row-drag-handle[_ngcontent-%COMP%], .cdk-drop-list-dragging[_ngcontent-%COMP%]   .drag-handle[_ngcontent-%COMP%]{cursor:-webkit-grabbing;cursor:grabbing}"]});const item_bitstreams_component_c0=function(a0){return[a0,"bitstreams","new"]};function ItemBitstreamsComponent_div_0_Template(rf,ctx){if(1&rf){const _r23=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementStart"](0,"div",1),core["\u0275\u0275text"](1,"\n  "),core["\u0275\u0275elementStart"](2,"div",2),core["\u0275\u0275text"](3,"\n    "),core["\u0275\u0275elementStart"](4,"button",3),core["\u0275\u0275element"](5,"i",4),core["\u0275\u0275text"](6,"\n      "),core["\u0275\u0275elementStart"](7,"span",5),core["\u0275\u0275text"](8),core["\u0275\u0275pipe"](9,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](10,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](11,"\n    "),core["\u0275\u0275template"](12,ItemBitstreamsComponent_div_0_button_12_Template,7,3,"button",6),core["\u0275\u0275pipe"](13,"async"),core["\u0275\u0275text"](14,"\n    "),core["\u0275\u0275elementStart"](15,"button",7),core["\u0275\u0275listener"]("click",(function ItemBitstreamsComponent_div_0_Template_button_click_15_listener(){core["\u0275\u0275restoreView"](_r23);return core["\u0275\u0275nextContext"]().submit()})),core["\u0275\u0275pipe"](16,"async"),core["\u0275\u0275element"](17,"i",8),core["\u0275\u0275text"](18,"\n      "),core["\u0275\u0275elementStart"](19,"span",5),core["\u0275\u0275text"](20),core["\u0275\u0275pipe"](21,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](22,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](23,"\n    "),core["\u0275\u0275template"](24,ItemBitstreamsComponent_div_0_button_24_Template,8,6,"button",9),core["\u0275\u0275pipe"](25,"async"),core["\u0275\u0275text"](26,"\n  "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](27,"\n\n  "),core["\u0275\u0275template"](28,ItemBitstreamsComponent_div_0_div_28_Template,25,25,"div",10),core["\u0275\u0275text"](29,"\n  "),core["\u0275\u0275template"](30,ItemBitstreamsComponent_div_0_div_30_Template,3,3,"div",11),core["\u0275\u0275text"](31,"\n  "),core["\u0275\u0275template"](32,ItemBitstreamsComponent_div_0_ds_loading_32_Template,2,3,"ds-loading",12),core["\u0275\u0275text"](33,"\n\n  "),core["\u0275\u0275elementStart"](34,"div",13),core["\u0275\u0275text"](35,"\n    "),core["\u0275\u0275elementStart"](36,"div",14),core["\u0275\u0275text"](37,"\n      "),core["\u0275\u0275template"](38,ItemBitstreamsComponent_div_0_button_38_Template,7,3,"button",15),core["\u0275\u0275pipe"](39,"async"),core["\u0275\u0275text"](40,"\n      "),core["\u0275\u0275elementStart"](41,"button",16),core["\u0275\u0275listener"]("click",(function ItemBitstreamsComponent_div_0_Template_button_click_41_listener(){core["\u0275\u0275restoreView"](_r23);return core["\u0275\u0275nextContext"]().submit()})),core["\u0275\u0275pipe"](42,"async"),core["\u0275\u0275element"](43,"i",8),core["\u0275\u0275text"](44,"\n        "),core["\u0275\u0275elementStart"](45,"span",5),core["\u0275\u0275text"](46),core["\u0275\u0275pipe"](47,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](48,"\n      "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](49,"\n      "),core["\u0275\u0275template"](50,ItemBitstreamsComponent_div_0_button_50_Template,8,6,"button",9),core["\u0275\u0275pipe"](51,"async"),core["\u0275\u0275text"](52,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](53,"\n  "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](54,"\n"),core["\u0275\u0275elementEnd"]()}if(2&rf){const bundles_r1=ctx.ngVar,ctx_r0=core["\u0275\u0275nextContext"]();core["\u0275\u0275advance"](4),core["\u0275\u0275property"]("routerLink",core["\u0275\u0275pureFunction1"](31,item_bitstreams_component_c0,ctx_r0.itemPageRoute)),core["\u0275\u0275advance"](4),core["\u0275\u0275textInterpolate1"]("\xa0",core["\u0275\u0275pipeBind1"](9,13,"item.edit.bitstreams.upload-button"),""),core["\u0275\u0275advance"](4),core["\u0275\u0275property"]("ngIf",core["\u0275\u0275pipeBind1"](13,15,ctx_r0.isReinstatable())),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("disabled",!core["\u0275\u0275pipeBind1"](16,17,ctx_r0.hasChanges())||ctx_r0.submitting),core["\u0275\u0275advance"](5),core["\u0275\u0275textInterpolate1"]("\xa0",core["\u0275\u0275pipeBind1"](21,19,"item.edit.bitstreams.save-button"),""),core["\u0275\u0275advance"](4),core["\u0275\u0275property"]("ngIf",!core["\u0275\u0275pipeBind1"](25,21,ctx_r0.isReinstatable())),core["\u0275\u0275advance"](4),core["\u0275\u0275property"]("ngIf",ctx_r0.item&&(null==bundles_r1?null:bundles_r1.length)>0),core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",0===(null==bundles_r1?null:bundles_r1.length)),core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",!bundles_r1),core["\u0275\u0275advance"](6),core["\u0275\u0275property"]("ngIf",core["\u0275\u0275pipeBind1"](39,23,ctx_r0.isReinstatable())),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("disabled",!core["\u0275\u0275pipeBind1"](42,25,ctx_r0.hasChanges())||ctx_r0.submitting),core["\u0275\u0275advance"](5),core["\u0275\u0275textInterpolate1"]("\xa0",core["\u0275\u0275pipeBind1"](47,27,"item.edit.bitstreams.save-button"),""),core["\u0275\u0275advance"](4),core["\u0275\u0275property"]("ngIf",!core["\u0275\u0275pipeBind1"](51,29,ctx_r0.isReinstatable()))}}class item_bitstreams_component_ItemBitstreamsComponent extends abstract_item_update_component.a{constructor(itemService,objectUpdatesService,router,notificationsService,translateService,route,bitstreamService,objectCache,requestService,cdRef,bundleService,zone){super(itemService,objectUpdatesService,router,notificationsService,translateService,route),this.itemService=itemService,this.objectUpdatesService=objectUpdatesService,this.router=router,this.notificationsService=notificationsService,this.translateService=translateService,this.route=route,this.bitstreamService=bitstreamService,this.objectCache=objectCache,this.requestService=requestService,this.cdRef=cdRef,this.bundleService=bundleService,this.zone=zone,this.bundlesOptions={id:"bundles-pagination-options",currentPage:1,pageSize:9999},this.columnSizes=new responsive_table_sizes_ResponsiveTableSizes([new ResponsiveColumnSizes(2,2,3,4,4),new ResponsiveColumnSizes(2,3,3,3,3),new ResponsiveColumnSizes(2,2,2,2,2),new ResponsiveColumnSizes(6,5,4,3,3)]),this.submitting=!1}postItemInit(){this.bundles$=this.itemService.getBundles(this.item.id,new paginated_search_options_model.a({pagination:this.bundlesOptions})).pipe(Object(operators.i)(),Object(operators.o)(),Object(map.a)((bundlePage=>bundlePage.page)))}initializeNotificationsPrefix(){this.notificationsPrefix="item.edit.bitstreams.notifications."}submit(){this.submitting=!0;this.bundles$.pipe(Object(take.a)(1)).pipe(Object(switchMap.a)((bundles=>Object(zip.a)(...bundles.map((bundle=>this.objectUpdatesService.getFieldUpdates(bundle.self,[],!0)))))),Object(map.a)((fieldUpdates=>[].concat(...fieldUpdates.map((updates=>Object.values(updates).filter((fieldUpdate=>fieldUpdate.changeType===object_updates_actions.c.REMOVE))))))),Object(map.a)((fieldUpdates=>fieldUpdates.map((fieldUpdate=>fieldUpdate.field))))).pipe(Object(take.a)(1),Object(switchMap.a)((removedBistreams=>Object(empty_util.e)(removedBistreams)?Object(zip.a)(...removedBistreams.map((bitstream=>this.bitstreamService.delete(bitstream.id)))):Object(of.a)(void 0)))).pipe(Object(take.a)(1)).subscribe((responses=>{this.displayNotifications("item.edit.bitstreams.notifications.remove",responses),this.reset(),this.submitting=!1}))}dropBitstream(bundle,event){this.zone.runOutsideAngular((()=>{if(Object(empty_util.b)(event)&&Object(empty_util.b)(event.fromIndex)&&Object(empty_util.b)(event.toIndex)&&Object(empty_util.b)(event.finish)){const moveOperation={op:"move",from:`/_links/bitstreams/${event.fromIndex}/href`,path:`/_links/bitstreams/${event.toIndex}/href`};this.bundleService.patch(bundle,[moveOperation]).pipe(Object(take.a)(1)).subscribe((response=>{this.zone.run((()=>{this.displayNotifications("item.edit.bitstreams.notifications.move",[response]),this.requestService.removeByHrefSubstring(bundle.self).pipe(Object(filter.a)((isCached=>isCached)),Object(take.a)(1)).subscribe((()=>event.finish()))}))}))}}))}displayNotifications(key,responses){if(Object(empty_util.e)(responses)){const failedResponses=responses.filter((response=>Object(empty_util.b)(response)&&response.hasFailed)),successfulResponses=responses.filter((response=>Object(empty_util.b)(response)&&response.hasSucceeded));failedResponses.forEach((response=>{this.notificationsService.error(this.translateService.instant(`${key}.failed.title`),response.errorMessage)})),successfulResponses.length>0&&this.notificationsService.success(this.translateService.instant(`${key}.saved.title`),this.translateService.instant(`${key}.saved.content`))}}discard(){const undoNotification=this.notificationsService.info(this.getNotificationTitle("discarded"),this.getNotificationContent("discarded"),{timeOut:this.discardTimeOut});this.objectUpdatesService.discardAllFieldUpdates(this.url,undoNotification)}reinstate(){this.bundles$.pipe(Object(take.a)(1)).subscribe((bundles=>{bundles.forEach((bundle=>{this.objectUpdatesService.reinstateFieldUpdates(bundle.self)}))}))}isReinstatable(){return this.bundles$.pipe(Object(switchMap.a)((bundles=>Object(zip.a)(...bundles.map((bundle=>this.objectUpdatesService.isReinstatable(bundle.self)))))),Object(map.a)((reinstatable=>reinstatable.includes(!0))))}hasChanges(){return this.bundles$.pipe(Object(switchMap.a)((bundles=>Object(zip.a)(...bundles.map((bundle=>this.objectUpdatesService.hasUpdates(bundle.self)))))),Object(map.a)((hasChanges=>hasChanges.includes(!0))))}reset(){this.refreshItemCache()}refreshItemCache(){this.bundles$.pipe(Object(take.a)(1)).subscribe((bundles=>{bundles.forEach((bundle=>{this.objectCache.remove(bundle.self),this.requestService.removeByHrefSubstring(bundle.self)})),this.objectCache.remove(this.item.self),this.requestService.removeByHrefSubstring(this.item.self)}))}ngOnDestroy(){this.itemUpdateSubscription&&this.itemUpdateSubscription.unsubscribe()}}item_bitstreams_component_ItemBitstreamsComponent.\u0275fac=function ItemBitstreamsComponent_Factory(t){return new(t||item_bitstreams_component_ItemBitstreamsComponent)(core["\u0275\u0275directiveInject"](item_data_service.a),core["\u0275\u0275directiveInject"](object_updates_service.a),core["\u0275\u0275directiveInject"](fesm2015_router.g),core["\u0275\u0275directiveInject"](notifications_service.a),core["\u0275\u0275directiveInject"](ngx_translate_core.e),core["\u0275\u0275directiveInject"](fesm2015_router.a),core["\u0275\u0275directiveInject"](bitstream_data_service.a),core["\u0275\u0275directiveInject"](object_cache_service.a),core["\u0275\u0275directiveInject"](request_service.a),core["\u0275\u0275directiveInject"](core.ChangeDetectorRef),core["\u0275\u0275directiveInject"](bundle_data_service.a),core["\u0275\u0275directiveInject"](core.NgZone))},item_bitstreams_component_ItemBitstreamsComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:item_bitstreams_component_ItemBitstreamsComponent,selectors:[["ds-item-bitstreams"]],features:[core["\u0275\u0275InheritDefinitionFeature"]],decls:3,vars:3,consts:[["class","item-bitstreams",4,"ngVar"],[1,"item-bitstreams"],[1,"button-row","top","d-flex","mt-2"],[1,"mr-auto","btn","btn-success",3,"routerLink"],[1,"fas","fa-upload"],[1,"d-none","d-sm-inline"],["class","btn btn-warning mr-1",3,"click",4,"ngIf"],[1,"btn","btn-primary","mr-1",3,"disabled","click"],[1,"fas","fa-save"],["class","btn btn-danger",3,"disabled","click",4,"ngIf"],["class","container table-bordered mt-4",4,"ngIf"],["class","alert alert-info w-100 d-inline-block mt-4","role","alert",4,"ngIf"],[3,"message",4,"ngIf"],[1,"button-row","bottom"],[1,"mt-4","float-right"],["class","btn btn-warning",3,"click",4,"ngIf"],[1,"btn","btn-primary",3,"disabled","click"],[1,"btn","btn-warning","mr-1",3,"click"],[1,"fas","fa-undo-alt"],[1,"btn","btn-danger",3,"disabled","click"],[1,"fas","fa-times"],[1,"container","table-bordered","mt-4"],[1,"row","header-row","font-weight-bold"],[3,"bundle","item","columnSizes","dropObject",4,"ngFor","ngForOf"],[3,"bundle","item","columnSizes","dropObject"],["role","alert",1,"alert","alert-info","w-100","d-inline-block","mt-4"],[3,"message"],[1,"btn","btn-warning",3,"click"]],template:function ItemBitstreamsComponent_Template(rf,ctx){1&rf&&(core["\u0275\u0275template"](0,ItemBitstreamsComponent_div_0_Template,55,33,"div",0),core["\u0275\u0275pipe"](1,"async"),core["\u0275\u0275text"](2,"\n")),2&rf&&core["\u0275\u0275property"]("ngVar",core["\u0275\u0275pipeBind1"](1,1,ctx.bundles$))},directives:[var_directive.a,fesm2015_router.h,common.NgIf,ItemEditBitstreamDragHandleComponent,common.NgForOf,item_edit_bitstream_bundle_component_ItemEditBitstreamBundleComponent,loading_component.a],pipes:[common.AsyncPipe,ngx_translate_core.d],styles:[".header-row[_ngcontent-%COMP%]{color:var(--bs-table-dark-color);background-color:var(--bs-table-dark-bg);border-color:var(--bs-table-dark-border-color)}.bundle-row[_ngcontent-%COMP%]{color:var(--bs-table-head-color);background-color:var(--bs-table-head-bg);border-color:var(--bs-table-border-color)}.row-element[_ngcontent-%COMP%]{padding:.75em;border-bottom:var(--bs-table-border-width) solid var(--bs-table-border-color)}.drag-handle[_ngcontent-%COMP%]{visibility:hidden}.bitstream-row-drag-handle[_ngcontent-%COMP%]:hover, .drag-handle[_ngcontent-%COMP%]:hover{cursor:move}[_nghost-%COMP%]     .bitstream-row-drag-handle:focus .drag-handle, [_nghost-%COMP%]     .bitstream-row:hover .drag-handle{visibility:visible!important}.cdk-drag-preview[_ngcontent-%COMP%]{margin-left:0;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12);box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%]{-webkit-transition:-webkit-transform .25s cubic-bezier(0,0,.2,1);transition:-webkit-transform .25s cubic-bezier(0,0,.2,1);transition:transform .25s cubic-bezier(0,0,.2,1);transition:transform .25s cubic-bezier(0,0,.2,1),-webkit-transform .25s cubic-bezier(0,0,.2,1)}.cdk-drop-list-dragging[_ngcontent-%COMP%]   .bitstream-row-drag-handle[_ngcontent-%COMP%], .cdk-drop-list-dragging[_ngcontent-%COMP%]   .drag-handle[_ngcontent-%COMP%]{cursor:-webkit-grabbing;cursor:grabbing}"]});var collection_data_service=__webpack_require__("DNva"),startWith=__webpack_require__("JX91"),dspace_object_type_model=__webpack_require__("QhmN"),search_configuration_service=__webpack_require__("joI/"),search_service=__webpack_require__("gWc+"),collection_select_component=__webpack_require__("f7iX"),search_form_component=__webpack_require__("DdXh");const item_collection_mapper_component_c0=["tabs"];function ItemCollectionMapperComponent_ng_template_27_Template(rf,ctx){if(1&rf){const _r4=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275text"](0,"\n            "),core["\u0275\u0275elementStart"](1,"div",10),core["\u0275\u0275text"](2,"\n              "),core["\u0275\u0275elementStart"](3,"ds-collection-select",11),core["\u0275\u0275listener"]("confirm",(function ItemCollectionMapperComponent_ng_template_27_Template_ds_collection_select_confirm_3_listener($event){core["\u0275\u0275restoreView"](_r4);return core["\u0275\u0275nextContext"]().removeMappings($event)}))("cancel",(function ItemCollectionMapperComponent_ng_template_27_Template_ds_collection_select_cancel_3_listener(){core["\u0275\u0275restoreView"](_r4);return core["\u0275\u0275nextContext"]().onCancel()})),core["\u0275\u0275pipe"](4,"async"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](5,"\n            "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](6,"\n          ")}if(2&rf){const ctx_r1=core["\u0275\u0275nextContext"]();let tmp_2_0=null;core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("key","browse")("dsoRD$",ctx_r1.itemCollectionsRD$)("paginationOptions",null==(tmp_2_0=core["\u0275\u0275pipeBind1"](4,6,ctx_r1.searchOptions$))?null:tmp_2_0.pagination)("confirmButton","item.edit.item-mapper.buttons.remove")("cancelButton","item.edit.item-mapper.cancel")("dangerConfirm",!0)}}function ItemCollectionMapperComponent_ng_template_36_div_12_Template(rf,ctx){if(1&rf){const _r9=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementStart"](0,"div"),core["\u0275\u0275text"](1,"\n              "),core["\u0275\u0275elementStart"](2,"ds-collection-select",17),core["\u0275\u0275listener"]("confirm",(function ItemCollectionMapperComponent_ng_template_36_div_12_Template_ds_collection_select_confirm_2_listener($event){core["\u0275\u0275restoreView"](_r9);return core["\u0275\u0275nextContext"](2).mapCollections($event)}))("cancel",(function ItemCollectionMapperComponent_ng_template_36_div_12_Template_ds_collection_select_cancel_2_listener(){core["\u0275\u0275restoreView"](_r9);return core["\u0275\u0275nextContext"](2).onCancel()})),core["\u0275\u0275pipe"](3,"async"),core["\u0275\u0275pipe"](4,"async"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](5,"\n            "),core["\u0275\u0275elementEnd"]()}if(2&rf){const ctx_r6=core["\u0275\u0275nextContext"](2);let tmp_2_0=null,tmp_3_0=null;core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("key","map")("dsoRD$",ctx_r6.mappedCollectionsRD$)("paginationOptions",null==(tmp_2_0=core["\u0275\u0275pipeBind1"](3,6,ctx_r6.searchOptions$))?null:tmp_2_0.pagination)("sortOptions",null==(tmp_3_0=core["\u0275\u0275pipeBind1"](4,8,ctx_r6.searchOptions$))?null:tmp_3_0.sort)("confirmButton","item.edit.item-mapper.buttons.add")("cancelButton","item.edit.item-mapper.cancel")}}function ItemCollectionMapperComponent_ng_template_36_div_14_Template(rf,ctx){1&rf&&(core["\u0275\u0275elementStart"](0,"div",18),core["\u0275\u0275text"](1),core["\u0275\u0275pipe"](2,"translate"),core["\u0275\u0275elementEnd"]()),2&rf&&(core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate1"]("\n              ",core["\u0275\u0275pipeBind1"](2,1,"item.edit.item-mapper.no-search"),"\n            "))}function ItemCollectionMapperComponent_ng_template_36_Template(rf,ctx){if(1&rf){const _r12=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275text"](0,"\n            "),core["\u0275\u0275elementStart"](1,"div",12),core["\u0275\u0275text"](2,"\n              "),core["\u0275\u0275elementStart"](3,"div",13),core["\u0275\u0275text"](4,"\n                "),core["\u0275\u0275elementStart"](5,"ds-search-form",14),core["\u0275\u0275listener"]("submitSearch",(function ItemCollectionMapperComponent_ng_template_36_Template_ds_search_form_submitSearch_5_listener(){core["\u0275\u0275restoreView"](_r12);return core["\u0275\u0275nextContext"]().performedSearch=!0})),core["\u0275\u0275pipe"](6,"async"),core["\u0275\u0275pipe"](7,"translate"),core["\u0275\u0275text"](8,"\n                "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](9,"\n              "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](10,"\n            "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](11,"\n\n            "),core["\u0275\u0275template"](12,ItemCollectionMapperComponent_ng_template_36_div_12_Template,6,10,"div",15),core["\u0275\u0275text"](13,"\n            "),core["\u0275\u0275template"](14,ItemCollectionMapperComponent_ng_template_36_div_14_Template,3,3,"div",16),core["\u0275\u0275text"](15,"\n          ")}if(2&rf){const ctx_r2=core["\u0275\u0275nextContext"]();let tmp_0_0=null;core["\u0275\u0275advance"](5),core["\u0275\u0275property"]("query",null==(tmp_0_0=core["\u0275\u0275pipeBind1"](6,6,ctx_r2.searchOptions$))?null:tmp_0_0.query)("currentUrl","./")("inPlaceSearch",!0)("searchPlaceholder",core["\u0275\u0275pipeBind1"](7,8,"item.edit.item-mapper.search-form.placeholder")),core["\u0275\u0275advance"](7),core["\u0275\u0275property"]("ngIf",ctx_r2.performedSearch),core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",!ctx_r2.performedSearch)}}const item_collection_mapper_component_c1=function(a0){return{name:a0}};class item_collection_mapper_component_ItemCollectionMapperComponent{constructor(route,router,searchConfigService,searchService,notificationsService,itemDataService,collectionDataService,translateService,dsoNameService){this.route=route,this.router=router,this.searchConfigService=searchConfigService,this.searchService=searchService,this.notificationsService=notificationsService,this.itemDataService=itemDataService,this.collectionDataService=collectionDataService,this.translateService=translateService,this.dsoNameService=dsoNameService,this.performedSearch=!1}ngOnInit(){this.itemRD$=this.route.parent.data.pipe(Object(take.a)(1),Object(map.a)((data=>data.dso))),this.itemName$=this.itemRD$.pipe(Object(filter.a)((rd=>Object(empty_util.b)(rd))),Object(map.a)((rd=>this.dsoNameService.getName(rd.payload)))),this.searchOptions$=this.searchConfigService.paginatedSearchOptions,this.loadCollectionLists()}loadCollectionLists(){console.log("loadCollectionLists"),this.shouldUpdate$=new internal_BehaviorSubject.a(!0),this.itemCollectionsRD$=Object(combineLatest.a)(this.itemRD$.pipe(Object(operators.j)()),this.shouldUpdate$).pipe(Object(switchMap.a)((([item,shouldUpdate])=>(!0===shouldUpdate&&this.shouldUpdate$.next(!1),this.collectionDataService.findAllByHref(this.itemDataService.getMappedCollectionsEndpoint(item.id),void 0,!shouldUpdate,!1).pipe(Object(operators.c)())))));const owningCollectionRD$=this.itemRD$.pipe(Object(operators.j)(),Object(switchMap.a)((item=>this.collectionDataService.findOwningCollectionFor(item))),Object(operators.c)()),itemCollectionsAndOptions$=Object(combineLatest.a)(this.itemCollectionsRD$,owningCollectionRD$,this.searchOptions$);this.mappedCollectionsRD$=itemCollectionsAndOptions$.pipe(Object(switchMap.a)((([itemCollectionsRD,owningCollectionRD,searchOptions])=>this.searchService.search(Object.assign(new paginated_search_options_model.a(searchOptions),{query:this.buildQuery([...itemCollectionsRD.payload.page,owningCollectionRD.payload],searchOptions.query),dsoTypes:[dspace_object_type_model.a.COLLECTION]}),1e4).pipe(Object(operators.y)(),Object(startWith.a)(void 0)))))}mapCollections(ids){const responses$=Object(combineLatest.a)([this.itemRD$.pipe(Object(operators.i)(),Object(map.a)((rd=>rd.payload)),Object(map.a)((item=>item.id))),this.itemCollectionsRD$.pipe(Object(operators.i)(),Object(map.a)((rd=>rd.payload.page)),Object(map.a)((collections=>collections.map((collection=>collection.id)))))]).pipe(Object(switchMap.a)((([itemId,excludingIds])=>Object(combineLatest.a)(this.filterIds(ids,excludingIds).map((id=>this.itemDataService.mapToCollection(itemId,id).pipe(Object(operators.g)())))))));this.showNotifications(responses$,"item.edit.item-mapper.notifications.add")}removeMappings(ids){const responses$=this.itemRD$.pipe(Object(operators.i)(),Object(map.a)((itemRD=>itemRD.payload.id)),Object(switchMap.a)((itemId=>Object(combineLatest.a)(ids.map((id=>this.itemDataService.removeMappingFromCollection(itemId,id).pipe(Object(operators.g)())))))));this.showNotifications(responses$,"item.edit.item-mapper.notifications.remove")}filterIds(ids,excluding){return ids.filter((id=>excluding.indexOf(id)<0))}showNotifications(responses$,messagePrefix){responses$.subscribe((responses=>{const successful=responses.filter((response=>response.hasSucceeded)),unsuccessful=responses.filter((response=>response.hasFailed));if(successful.length>0){Object(combineLatest.a)([this.translateService.get(`${messagePrefix}.success.head`),this.translateService.get(`${messagePrefix}.success.content`,{amount:successful.length})]).subscribe((([head,content])=>{this.notificationsService.success(head,content)})),this.shouldUpdate$.next(!0)}if(unsuccessful.length>0){Object(combineLatest.a)([this.translateService.get(`${messagePrefix}.error.head`),this.translateService.get(`${messagePrefix}.error.content`,{amount:unsuccessful.length})]).subscribe((([head,content])=>{this.notificationsService.error(head,content)}))}this.switchToFirstTab()}))}tabChange(event){this.performedSearch=!1,this.router.navigateByUrl(this.getCurrentUrl())}getCurrentUrl(){return this.router.url.indexOf("?")>-1?this.router.url.substring(0,this.router.url.indexOf("?")):this.router.url}buildQuery(collections,query){let result=query;for(const collection of collections)result=this.addExcludeCollection(collection.id,result);return result}addExcludeCollection(collectionId,query){const excludeQuery=`-search.resourceid:${collectionId}`;return Object(empty_util.e)(query)?`${query} AND ${excludeQuery}`:excludeQuery}switchToFirstTab(){this.tabs.select("browseTab")}onCancel(){this.itemRD$.pipe(Object(operators.i)(),Object(operators.o)(),Object(take.a)(1)).subscribe((item=>{this.router.navigate([Object(item_page_routing_paths.h)(item)])}))}}item_collection_mapper_component_ItemCollectionMapperComponent.\u0275fac=function ItemCollectionMapperComponent_Factory(t){return new(t||item_collection_mapper_component_ItemCollectionMapperComponent)(core["\u0275\u0275directiveInject"](fesm2015_router.a),core["\u0275\u0275directiveInject"](fesm2015_router.g),core["\u0275\u0275directiveInject"](search_configuration_service.a),core["\u0275\u0275directiveInject"](search_service.a),core["\u0275\u0275directiveInject"](notifications_service.a),core["\u0275\u0275directiveInject"](item_data_service.a),core["\u0275\u0275directiveInject"](collection_data_service.a),core["\u0275\u0275directiveInject"](ngx_translate_core.e),core["\u0275\u0275directiveInject"](dso_name_service.a))},item_collection_mapper_component_ItemCollectionMapperComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:item_collection_mapper_component_ItemCollectionMapperComponent,selectors:[["ds-item-collection-mapper"]],viewQuery:function ItemCollectionMapperComponent_Query(rf,ctx){if(1&rf&&core["\u0275\u0275viewQuery"](item_collection_mapper_component_c0,1),2&rf){let _t;core["\u0275\u0275queryRefresh"](_t=core["\u0275\u0275loadQuery"]())&&(ctx.tabs=_t.first)}},decls:45,vars:24,consts:[[1,"container"],[1,"row"],[1,"col-12"],["id","item-name",3,"innerHTML"],["ngbNav","",1,"nav-tabs",3,"destroyOnHide","navChange"],["tabs","ngbNav"],[3,"ngbNavItem"],["ngbNavLink",""],["ngbNavContent",""],[3,"ngbNavOutlet"],[1,"mt-2"],[1,"mt-2",3,"key","dsoRD$","paginationOptions","confirmButton","cancelButton","dangerConfirm","confirm","cancel"],[1,"row","mt-2"],[1,"col-12","col-lg-6"],["id","search-form",3,"query","currentUrl","inPlaceSearch","searchPlaceholder","submitSearch"],[4,"ngIf"],["class","alert alert-info w-100","role","alert",4,"ngIf"],[1,"mt-2",3,"key","dsoRD$","paginationOptions","sortOptions","confirmButton","cancelButton","confirm","cancel"],["role","alert",1,"alert","alert-info","w-100"]],template:function ItemCollectionMapperComponent_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"div",0),core["\u0275\u0275text"](1,"\n  "),core["\u0275\u0275elementStart"](2,"div",1),core["\u0275\u0275text"](3,"\n    "),core["\u0275\u0275elementStart"](4,"div",2),core["\u0275\u0275text"](5,"\n      "),core["\u0275\u0275elementStart"](6,"h2"),core["\u0275\u0275text"](7),core["\u0275\u0275pipe"](8,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](9,"\n      "),core["\u0275\u0275element"](10,"p",3),core["\u0275\u0275pipe"](11,"translate"),core["\u0275\u0275pipe"](12,"async"),core["\u0275\u0275text"](13,"\n      "),core["\u0275\u0275elementStart"](14,"p"),core["\u0275\u0275text"](15),core["\u0275\u0275pipe"](16,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](17,"\n\n      "),core["\u0275\u0275elementStart"](18,"ul",4,5),core["\u0275\u0275listener"]("navChange",(function ItemCollectionMapperComponent_Template_ul_navChange_18_listener($event){return ctx.tabChange($event)})),core["\u0275\u0275text"](20,"\n        "),core["\u0275\u0275elementStart"](21,"li",6),core["\u0275\u0275text"](22,"\n          "),core["\u0275\u0275elementStart"](23,"a",7),core["\u0275\u0275text"](24),core["\u0275\u0275pipe"](25,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](26,"\n          "),core["\u0275\u0275template"](27,ItemCollectionMapperComponent_ng_template_27_Template,7,8,"ng-template",8),core["\u0275\u0275text"](28,"\n        "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](29,"\n        "),core["\u0275\u0275elementStart"](30,"li",6),core["\u0275\u0275text"](31,"\n          "),core["\u0275\u0275elementStart"](32,"a",7),core["\u0275\u0275text"](33),core["\u0275\u0275pipe"](34,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](35,"\n          "),core["\u0275\u0275template"](36,ItemCollectionMapperComponent_ng_template_36_Template,16,10,"ng-template",8),core["\u0275\u0275text"](37,"\n        "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](38,"\n      "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](39,"\n      "),core["\u0275\u0275element"](40,"div",9),core["\u0275\u0275text"](41,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](42,"\n  "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](43,"\n"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](44,"\n")),2&rf){const _r0=core["\u0275\u0275reference"](19);core["\u0275\u0275advance"](7),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](8,9,"item.edit.item-mapper.head")),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("innerHTML",core["\u0275\u0275pipeBind2"](11,11,"item.edit.item-mapper.item",core["\u0275\u0275pureFunction1"](22,item_collection_mapper_component_c1,core["\u0275\u0275pipeBind1"](12,14,ctx.itemName$))),core["\u0275\u0275sanitizeHtml"]),core["\u0275\u0275advance"](5),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](16,16,"item.edit.item-mapper.description")),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("destroyOnHide",!0),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("ngbNavItem","browseTab"),core["\u0275\u0275advance"](3),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](25,18,"item.edit.item-mapper.tabs.browse")),core["\u0275\u0275advance"](6),core["\u0275\u0275property"]("ngbNavItem","mapTab"),core["\u0275\u0275advance"](3),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](34,20,"item.edit.item-mapper.tabs.map")),core["\u0275\u0275advance"](7),core["\u0275\u0275property"]("ngbNavOutlet",_r0)}},directives:[ng_bootstrap.t,ng_bootstrap.v,ng_bootstrap.w,ng_bootstrap.u,ng_bootstrap.y,collection_select_component.a,search_form_component.a,common.NgIf],pipes:[ngx_translate_core.d,common.AsyncPipe],styles:[""],data:{animation:[fade.a,fade.c]},changeDetection:0});var authorized_collection_selector_component=__webpack_require__("zdyR"),fesm2015_forms=__webpack_require__("3Pt+");function ItemMoveComponent_span_68_Template(rf,ctx){1&rf&&(core["\u0275\u0275elementStart"](0,"span"),core["\u0275\u0275text"](1,"\n                "),core["\u0275\u0275element"](2,"i",17),core["\u0275\u0275text"](3),core["\u0275\u0275pipe"](4,"translate"),core["\u0275\u0275elementEnd"]()),2&rf&&(core["\u0275\u0275advance"](3),core["\u0275\u0275textInterpolate1"](" ",core["\u0275\u0275pipeBind1"](4,1,"item.edit.move.save-button"),"\n              "))}function ItemMoveComponent_span_70_Template(rf,ctx){1&rf&&(core["\u0275\u0275elementStart"](0,"span"),core["\u0275\u0275text"](1,"\n                "),core["\u0275\u0275element"](2,"i",18),core["\u0275\u0275text"](3),core["\u0275\u0275pipe"](4,"translate"),core["\u0275\u0275elementEnd"]()),2&rf&&(core["\u0275\u0275advance"](3),core["\u0275\u0275textInterpolate1"](" ",core["\u0275\u0275pipeBind1"](4,1,"item.edit.move.processing"),"\n              "))}const item_move_component_c0=function(a0){return{id:a0}},item_move_component_c1=function(){return{type:"collection"}},item_move_component_c2=function(a0){return[a0,"edit"]};class item_move_component_ItemMoveComponent{constructor(route,router,notificationsService,itemDataService,searchService,translateService,requestService){this.route=route,this.router=router,this.notificationsService=notificationsService,this.itemDataService=itemDataService,this.searchService=searchService,this.translateService=translateService,this.requestService=requestService,this.selectorType=dspace_object_type_model.a.COLLECTION,this.inheritPolicies=!1,this.canSubmit=!1,this.processing=!1,this.COLLECTIONS=[dspace_object_type_model.a.COLLECTION]}ngOnInit(){this.itemRD$=this.route.data.pipe(Object(map.a)((data=>data.dso)),Object(operators.i)()),this.itemPageRoute$=this.itemRD$.pipe(Object(operators.d)(),Object(map.a)((item=>Object(item_page_routing_paths.h)(item)))),this.itemRD$.subscribe((rd=>{this.item=rd.payload})),this.itemRD$.pipe(Object(operators.i)(),Object(operators.o)(),Object(switchMap.a)((item=>item.owningCollection)),Object(operators.i)(),Object(operators.o)()).subscribe((collection=>{this.originalCollection=collection}))}selectDso(data){this.selectedCollection=data,this.selectedCollectionName=data.name,this.canSubmit=!0}getCurrentUrl(){return this.router.url}moveToCollection(){this.processing=!0;const move$=this.itemDataService.moveToCollection(this.item.id,this.selectedCollection).pipe(Object(operators.g)());move$.subscribe((response=>{response.hasSucceeded?this.notificationsService.success(this.translateService.get("item.edit.move.success")):this.notificationsService.error(this.translateService.get("item.edit.move.error"))})),move$.pipe(Object(switchMap.a)((()=>this.requestService.setStaleByHrefSubstring(this.item.id))),Object(switchMap.a)((()=>this.itemDataService.findById(this.item.id,!1,!0,Object(follow_link_config_model.a)("owningCollection")))),Object(operators.g)()).subscribe((()=>{this.processing=!1,this.router.navigate([Object(item_page_routing_paths.e)(this.item)])}))}discard(){this.selectedCollection=null,this.canSubmit=!1}get canMove(){var _a;return this.canSubmit&&(null===(_a=this.selectedCollection)||void 0===_a?void 0:_a.id)!==this.originalCollection.id}}item_move_component_ItemMoveComponent.\u0275fac=function ItemMoveComponent_Factory(t){return new(t||item_move_component_ItemMoveComponent)(core["\u0275\u0275directiveInject"](fesm2015_router.a),core["\u0275\u0275directiveInject"](fesm2015_router.g),core["\u0275\u0275directiveInject"](notifications_service.a),core["\u0275\u0275directiveInject"](item_data_service.a),core["\u0275\u0275directiveInject"](search_service.a),core["\u0275\u0275directiveInject"](ngx_translate_core.e),core["\u0275\u0275directiveInject"](request_service.a))},item_move_component_ItemMoveComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:item_move_component_ItemMoveComponent,selectors:[["ds-item-move"]],decls:84,vars:40,consts:[[1,"container"],[1,"row"],[1,"col-12"],[1,"card","mb-3"],[1,"card-header"],[1,"card-body"],[3,"types","currentDSOId","onSelect"],["type","checkbox","name","tc","id","inheritPoliciesCheckbox",3,"ngModel","ngModelChange"],["for","inheritPoliciesCheckbox"],[1,"button-row","bottom"],[1,"float-right"],[1,"btn","btn-outline-secondary",3,"routerLink"],[1,"fas","fa-arrow-left"],[1,"btn","btn-primary","mr-0",3,"disabled","click"],[4,"ngIf"],[1,"btn","btn-danger",3,"disabled","click"],[1,"fas","fa-times"],[1,"fas","fa-save"],[1,"fas","fa-circle-notch","fa-spin"]],template:function ItemMoveComponent_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"div",0),core["\u0275\u0275text"](1,"\n    "),core["\u0275\u0275elementStart"](2,"div",1),core["\u0275\u0275text"](3,"\n        "),core["\u0275\u0275elementStart"](4,"div",2),core["\u0275\u0275text"](5,"\n            "),core["\u0275\u0275elementStart"](6,"h2"),core["\u0275\u0275text"](7),core["\u0275\u0275pipe"](8,"translate"),core["\u0275\u0275pipe"](9,"async"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](10,"\n            "),core["\u0275\u0275elementStart"](11,"p"),core["\u0275\u0275text"](12),core["\u0275\u0275pipe"](13,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](14,"\n            "),core["\u0275\u0275elementStart"](15,"div",1),core["\u0275\u0275text"](16,"\n                "),core["\u0275\u0275elementStart"](17,"div",2),core["\u0275\u0275text"](18,"\n                  "),core["\u0275\u0275elementStart"](19,"div",3),core["\u0275\u0275text"](20,"\n                    "),core["\u0275\u0275elementStart"](21,"div",4),core["\u0275\u0275text"](22),core["\u0275\u0275pipe"](23,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](24,"\n                    "),core["\u0275\u0275elementStart"](25,"div",5),core["\u0275\u0275text"](26,"\n                      "),core["\u0275\u0275elementStart"](27,"ds-authorized-collection-selector",6),core["\u0275\u0275listener"]("onSelect",(function ItemMoveComponent_Template_ds_authorized_collection_selector_onSelect_27_listener($event){return ctx.selectDso($event)})),core["\u0275\u0275text"](28,"\n                      "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](29,"\n                    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](30,"\n                    "),core["\u0275\u0275element"](31,"div"),core["\u0275\u0275text"](32,"\n                  "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](33,"\n                "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](34,"\n            "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](35,"\n            "),core["\u0275\u0275elementStart"](36,"div",1),core["\u0275\u0275text"](37,"\n                "),core["\u0275\u0275elementStart"](38,"div",2),core["\u0275\u0275text"](39,"\n                    "),core["\u0275\u0275elementStart"](40,"p"),core["\u0275\u0275text"](41,"\n                        "),core["\u0275\u0275elementStart"](42,"input",7),core["\u0275\u0275listener"]("ngModelChange",(function ItemMoveComponent_Template_input_ngModelChange_42_listener($event){return ctx.inheritPolicies=$event})),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](43,"\n                        "),core["\u0275\u0275elementStart"](44,"label",8),core["\u0275\u0275text"](45),core["\u0275\u0275pipe"](46,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](47,"\n                    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](48,"\n                    "),core["\u0275\u0275elementStart"](49,"p"),core["\u0275\u0275text"](50),core["\u0275\u0275pipe"](51,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](52,"\n                "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](53,"\n            "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](54,"\n\n          "),core["\u0275\u0275elementStart"](55,"div",9),core["\u0275\u0275text"](56,"\n            "),core["\u0275\u0275elementStart"](57,"div",10),core["\u0275\u0275text"](58,"\n              "),core["\u0275\u0275elementStart"](59,"button",11),core["\u0275\u0275pipe"](60,"async"),core["\u0275\u0275text"](61,"\n                "),core["\u0275\u0275element"](62,"i",12),core["\u0275\u0275text"](63),core["\u0275\u0275pipe"](64,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](65,"\n              "),core["\u0275\u0275elementStart"](66,"button",13),core["\u0275\u0275listener"]("click",(function ItemMoveComponent_Template_button_click_66_listener(){return ctx.moveToCollection()})),core["\u0275\u0275text"](67,"\n              "),core["\u0275\u0275template"](68,ItemMoveComponent_span_68_Template,5,3,"span",14),core["\u0275\u0275text"](69,"\n                "),core["\u0275\u0275template"](70,ItemMoveComponent_span_70_Template,5,3,"span",14),core["\u0275\u0275text"](71,"\n              "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](72,"\n              "),core["\u0275\u0275elementStart"](73,"button",15),core["\u0275\u0275listener"]("click",(function ItemMoveComponent_Template_button_click_73_listener(){return ctx.discard()})),core["\u0275\u0275text"](74,"\n                "),core["\u0275\u0275element"](75,"i",16),core["\u0275\u0275text"](76),core["\u0275\u0275pipe"](77,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](78,"\n            "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](79,"\n          "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](80,"\n        "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](81,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](82,"\n"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](83,"\n")),2&rf){let tmp_0_0=null;core["\u0275\u0275advance"](7),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind2"](8,15,"item.edit.move.head",core["\u0275\u0275pureFunction1"](35,item_move_component_c0,null==(tmp_0_0=core["\u0275\u0275pipeBind1"](9,18,ctx.itemRD$))||null==tmp_0_0.payload?null:tmp_0_0.payload.handle))),core["\u0275\u0275advance"](5),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](13,20,"item.edit.move.description")),core["\u0275\u0275advance"](10),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind2"](23,22,"dso-selector.placeholder",core["\u0275\u0275pureFunction0"](37,item_move_component_c1))),core["\u0275\u0275advance"](5),core["\u0275\u0275property"]("types",ctx.COLLECTIONS)("currentDSOId",ctx.selectedCollection?ctx.selectedCollection.id:ctx.originalCollection.id),core["\u0275\u0275advance"](15),core["\u0275\u0275property"]("ngModel",ctx.inheritPolicies),core["\u0275\u0275advance"](3),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](46,25,"item.edit.move.inheritpolicies.checkbox")),core["\u0275\u0275advance"](5),core["\u0275\u0275textInterpolate1"]("\n                        ",core["\u0275\u0275pipeBind1"](51,27,"item.edit.move.inheritpolicies.description"),"\n                    "),core["\u0275\u0275advance"](9),core["\u0275\u0275property"]("routerLink",core["\u0275\u0275pureFunction1"](38,item_move_component_c2,core["\u0275\u0275pipeBind1"](60,29,ctx.itemPageRoute$))),core["\u0275\u0275advance"](4),core["\u0275\u0275textInterpolate1"](" ",core["\u0275\u0275pipeBind1"](64,31,"item.edit.move.cancel"),"\n              "),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("disabled",!ctx.canMove),core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",!ctx.processing),core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",ctx.processing),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("disabled",!ctx.canSubmit),core["\u0275\u0275advance"](3),core["\u0275\u0275textInterpolate1"](" ",core["\u0275\u0275pipeBind1"](77,33,"item.edit.move.discard-button"),"\n              ")}},directives:[authorized_collection_selector_component.a,fesm2015_forms.CheckboxControlValueAccessor,fesm2015_forms.NgControlStatus,fesm2015_forms.NgModel,fesm2015_router.h,common.NgIf],pipes:[ngx_translate_core.d,common.AsyncPipe],encapsulation:2});var relationship_model=__webpack_require__("aFKe"),relationship_type_service=__webpack_require__("BK0m"),tap=__webpack_require__("vkgz"),dynamic_lookup_relation_modal_component=(__webpack_require__("e3cm"),__webpack_require__("rqai"),__webpack_require__("1Pbu")),relationship_options_model=__webpack_require__("kcku"),selectable_list_service=__webpack_require__("EGek");function VirtualMetadataComponent_ng_container_14_div_2_div_15_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"div"),core["\u0275\u0275text"](1,"\n                        "),core["\u0275\u0275elementStart"](2,"div",15),core["\u0275\u0275text"](3),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](4,"\n                        "),core["\u0275\u0275elementStart"](5,"div"),core["\u0275\u0275text"](6),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](7,"\n                    "),core["\u0275\u0275elementEnd"]()),2&rf){const metadata_r5=ctx.$implicit;core["\u0275\u0275advance"](3),core["\u0275\u0275textInterpolate1"]("\n                            ",metadata_r5.metadataField,"\n                        "),core["\u0275\u0275advance"](3),core["\u0275\u0275textInterpolate1"]("\n                            ",metadata_r5.metadataValue.value,"\n                        ")}}function VirtualMetadataComponent_ng_container_14_div_2_Template(rf,ctx){if(1&rf){const _r8=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementStart"](0,"div",9),core["\u0275\u0275listener"]("click",(function VirtualMetadataComponent_ng_container_14_div_2_Template_div_click_0_listener(){core["\u0275\u0275restoreView"](_r8);const selected_r3=ctx.ngVar,item_r1=core["\u0275\u0275nextContext"]().$implicit;return core["\u0275\u0275nextContext"]().setSelectedVirtualMetadataItem(item_r1,!selected_r3)})),core["\u0275\u0275text"](1,"\n                "),core["\u0275\u0275elementStart"](2,"div",10),core["\u0275\u0275text"](3,"\n                    "),core["\u0275\u0275elementStart"](4,"label"),core["\u0275\u0275text"](5,"\n                        "),core["\u0275\u0275element"](6,"input",11),core["\u0275\u0275text"](7,"\n                    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](8,"\n                "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](9,"\n                "),core["\u0275\u0275elementStart"](10,"div",12),core["\u0275\u0275text"](11,"\n                    "),core["\u0275\u0275elementStart"](12,"ds-listable-object-component-loader",13),core["\u0275\u0275text"](13,"\n                    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](14,"\n                    "),core["\u0275\u0275template"](15,VirtualMetadataComponent_ng_container_14_div_2_div_15_Template,8,2,"div",14),core["\u0275\u0275text"](16,"\n                "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](17,"\n            "),core["\u0275\u0275elementEnd"]()}if(2&rf){const selected_r3=ctx.ngVar,item_r1=core["\u0275\u0275nextContext"]().$implicit,ctx_r2=core["\u0275\u0275nextContext"]();core["\u0275\u0275advance"](6),core["\u0275\u0275property"]("checked",selected_r3),core["\u0275\u0275advance"](6),core["\u0275\u0275property"]("object",item_r1),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("ngForOf",ctx_r2.virtualMetadata.get(item_r1.uuid))}}function VirtualMetadataComponent_ng_container_14_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementContainerStart"](0),core["\u0275\u0275text"](1,"\n            "),core["\u0275\u0275template"](2,VirtualMetadataComponent_ng_container_14_div_2_Template,18,3,"div",8),core["\u0275\u0275pipe"](3,"async"),core["\u0275\u0275text"](4,"\n        "),core["\u0275\u0275elementContainerEnd"]()),2&rf){const item_r1=ctx.$implicit,ctx_r0=core["\u0275\u0275nextContext"]();core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngVar",core["\u0275\u0275pipeBind1"](3,1,ctx_r0.isSelectedVirtualMetadataItem(item_r1)))}}class virtual_metadata_component_VirtualMetadataComponent{constructor(objectUpdatesService){this.objectUpdatesService=objectUpdatesService,this.close=new core.EventEmitter,this.save=new core.EventEmitter,this.virtualMetadata=new Map}get items(){return[this.leftItem,this.rightItem]}getVirtualMetadata(item){return Object.entries(item.metadata).map((([key,value])=>value.filter((metadata=>!key.startsWith("relation")&&metadata.authority&&metadata.authority.endsWith(this.relationshipId))).map((metadata=>({metadataField:key,metadataValue:metadata}))))).reduce(((previous,current)=>previous.concat(current)),[])}setSelectedVirtualMetadataItem(item,selected){this.objectUpdatesService.setSelectedVirtualMetadata(this.url,this.relationshipId,item.uuid,selected)}isSelectedVirtualMetadataItem(item){return this.objectUpdatesService.isSelectedVirtualMetadata(this.url,this.relationshipId,item.uuid)}trackItem(index,item){return item&&item.uuid}ngOnInit(){this.items.forEach((item=>{this.virtualMetadata.set(item.uuid,this.getVirtualMetadata(item))}))}}function EditRelationshipComponent_div_0_Template(rf,ctx){if(1&rf){const _r4=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementStart"](0,"div",2),core["\u0275\u0275text"](1,"\n  "),core["\u0275\u0275elementStart"](2,"div",3),core["\u0275\u0275text"](3,"\n    "),core["\u0275\u0275elementStart"](4,"ds-listable-object-component-loader",4),core["\u0275\u0275pipe"](5,"async"),core["\u0275\u0275text"](6,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](7,"\n  "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](8,"\n  "),core["\u0275\u0275elementStart"](9,"div",5),core["\u0275\u0275text"](10,"\n    "),core["\u0275\u0275elementStart"](11,"div",6),core["\u0275\u0275text"](12,"\n      "),core["\u0275\u0275elementStart"](13,"button",7),core["\u0275\u0275listener"]("click",(function EditRelationshipComponent_div_0_Template_button_click_13_listener(){core["\u0275\u0275restoreView"](_r4);const ctx_r3=core["\u0275\u0275nextContext"](),_r1=core["\u0275\u0275reference"](4);return ctx_r3.openVirtualMetadataModal(_r1)})),core["\u0275\u0275pipe"](14,"translate"),core["\u0275\u0275text"](15,"\n        "),core["\u0275\u0275element"](16,"i",8),core["\u0275\u0275text"](17,"\n      "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](18,"\n      "),core["\u0275\u0275elementStart"](19,"button",9),core["\u0275\u0275listener"]("click",(function EditRelationshipComponent_div_0_Template_button_click_19_listener(){core["\u0275\u0275restoreView"](_r4);return core["\u0275\u0275nextContext"]().undo()})),core["\u0275\u0275pipe"](20,"translate"),core["\u0275\u0275text"](21,"\n        "),core["\u0275\u0275element"](22,"i",10),core["\u0275\u0275text"](23,"\n      "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](24,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](25,"\n  "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](26,"\n"),core["\u0275\u0275elementEnd"]()}if(2&rf){const ctx_r0=core["\u0275\u0275nextContext"]();core["\u0275\u0275advance"](4),core["\u0275\u0275property"]("object",core["\u0275\u0275pipeBind1"](5,7,ctx_r0.relatedItem$))("viewMode",ctx_r0.viewMode)("value",ctx_r0.nameVariant),core["\u0275\u0275advance"](9),core["\u0275\u0275propertyInterpolate"]("title",core["\u0275\u0275pipeBind1"](14,9,"item.edit.metadata.edit.buttons.remove")),core["\u0275\u0275property"]("disabled",!ctx_r0.canRemove()),core["\u0275\u0275advance"](6),core["\u0275\u0275propertyInterpolate"]("title",core["\u0275\u0275pipeBind1"](20,11,"item.edit.metadata.edit.buttons.undo")),core["\u0275\u0275property"]("disabled",!ctx_r0.canUndo())}}function EditRelationshipComponent_ng_template_3_Template(rf,ctx){if(1&rf){const _r7=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275text"](0,"\n  "),core["\u0275\u0275elementStart"](1,"ds-virtual-metadata",11),core["\u0275\u0275listener"]("close",(function EditRelationshipComponent_ng_template_3_Template_ds_virtual_metadata_close_1_listener(){core["\u0275\u0275restoreView"](_r7);return core["\u0275\u0275nextContext"]().closeVirtualMetadataModal()}))("save",(function EditRelationshipComponent_ng_template_3_Template_ds_virtual_metadata_save_1_listener(){core["\u0275\u0275restoreView"](_r7);return core["\u0275\u0275nextContext"]().remove()})),core["\u0275\u0275pipe"](2,"async"),core["\u0275\u0275pipe"](3,"async"),core["\u0275\u0275text"](4,"\n  "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](5,"\n")}if(2&rf){const ctx_r2=core["\u0275\u0275nextContext"]();core["\u0275\u0275advance"](1),core["\u0275\u0275property"]("relationshipId",ctx_r2.relationship.id)("leftItem",core["\u0275\u0275pipeBind1"](2,4,ctx_r2.leftItem$))("rightItem",core["\u0275\u0275pipeBind1"](3,6,ctx_r2.rightItem$))("url",ctx_r2.url)}}virtual_metadata_component_VirtualMetadataComponent.\u0275fac=function VirtualMetadataComponent_Factory(t){return new(t||virtual_metadata_component_VirtualMetadataComponent)(core["\u0275\u0275directiveInject"](object_updates_service.a))},virtual_metadata_component_VirtualMetadataComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:virtual_metadata_component_VirtualMetadataComponent,selectors:[["ds-virtual-metadata"]],inputs:{url:"url",relationshipId:"relationshipId",leftItem:"leftItem",rightItem:"rightItem"},outputs:{close:"close",save:"save"},decls:27,vars:8,consts:[[1,"modal-header"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"d-flex","flex-row-reverse","m-2"],[1,"btn","btn-primary","save",3,"click"],[1,"fas","fa-save"],["class","item d-flex flex-row",3,"click",4,"ngVar"],[1,"item","d-flex","flex-row",3,"click"],[1,"m-2"],["type","checkbox",1,"select",3,"checked"],[1,"flex-column"],[3,"object"],[4,"ngFor","ngForOf"],[1,"font-weight-bold"]],template:function VirtualMetadataComponent_Template(rf,ctx){1&rf&&(core["\u0275\u0275elementStart"](0,"div"),core["\u0275\u0275text"](1,"\n    "),core["\u0275\u0275elementStart"](2,"div",0),core["\u0275\u0275text"](3),core["\u0275\u0275pipe"](4,"translate"),core["\u0275\u0275elementStart"](5,"button",1),core["\u0275\u0275listener"]("click",(function VirtualMetadataComponent_Template_button_click_5_listener(){return ctx.close.emit()})),core["\u0275\u0275text"](6,"\n            "),core["\u0275\u0275elementStart"](7,"span",2),core["\u0275\u0275text"](8,"\xd7"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](9,"\n        "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](10,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](11,"\n    "),core["\u0275\u0275elementStart"](12,"div",3),core["\u0275\u0275text"](13,"\n        "),core["\u0275\u0275template"](14,VirtualMetadataComponent_ng_container_14_Template,5,3,"ng-container",4),core["\u0275\u0275text"](15,"\n        "),core["\u0275\u0275elementStart"](16,"div",5),core["\u0275\u0275text"](17,"\n            "),core["\u0275\u0275elementStart"](18,"button",6),core["\u0275\u0275listener"]("click",(function VirtualMetadataComponent_Template_button_click_18_listener(){return ctx.save.emit()})),core["\u0275\u0275text"](19,"\n                "),core["\u0275\u0275element"](20,"i",7),core["\u0275\u0275text"](21),core["\u0275\u0275pipe"](22,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](23,"\n        "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](24,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](25,"\n"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](26,"\n")),2&rf&&(core["\u0275\u0275advance"](3),core["\u0275\u0275textInterpolate1"]("",core["\u0275\u0275pipeBind1"](4,4,"virtual-metadata.delete-relationship.modal-head"),"\n        "),core["\u0275\u0275advance"](11),core["\u0275\u0275property"]("ngForOf",ctx.items)("ngForTrackBy",ctx.trackItem),core["\u0275\u0275advance"](7),core["\u0275\u0275textInterpolate1"](" ",core["\u0275\u0275pipeBind1"](22,6,"item.edit.metadata.save-button"),"\n            "))},directives:[common.NgForOf,var_directive.a,listable_object_component_loader_component.a],pipes:[ngx_translate_core.d,common.AsyncPipe],encapsulation:2});class edit_relationship_component_EditRelationshipComponent{constructor(objectUpdatesService,modalService){this.objectUpdatesService=objectUpdatesService,this.modalService=modalService,this.viewMode=view_mode_model.a.ListElement}get relationship(){return this.update.relationship}get update(){return this.fieldUpdate.field}get nameVariant(){return this.update.nameVariant}ngOnChanges(){this.relationship&&(this.relationship.leftItem||this.relationship.rightItem)?(this.leftItem$=this.relationship.leftItem.pipe(Object(operators.i)(),Object(operators.o)(),Object(filter.a)((item=>Object(empty_util.b)(item)&&Object(empty_util.e)(item.uuid)))),this.rightItem$=this.relationship.rightItem.pipe(Object(operators.i)(),Object(operators.o)(),Object(filter.a)((item=>Object(empty_util.b)(item)&&Object(empty_util.e)(item.uuid)))),this.relatedItem$=Object(combineLatest.a)(this.leftItem$,this.rightItem$).pipe(Object(map.a)((items=>items.find((item=>item.uuid!==this.editItem.uuid)))))):this.relatedItem$=Object(of.a)(this.update.relatedItem)}remove(){this.closeVirtualMetadataModal(),Object(combineLatest.a)(this.leftItem$,this.rightItem$).pipe(Object(map.a)((items=>items.map((item=>this.objectUpdatesService.isSelectedVirtualMetadata(this.url,this.relationship.id,item.uuid))))),Object(switchMap.a)((selection$=>Object(combineLatest.a)(selection$))),Object(map.a)((selection=>Object.assign({},this.fieldUpdate.field,{keepLeftVirtualMetadata:!0===selection[0],keepRightVirtualMetadata:!0===selection[1]}))),Object(take.a)(1)).subscribe((deleteRelationship=>this.objectUpdatesService.saveRemoveFieldUpdate(this.url,deleteRelationship)))}openVirtualMetadataModal(content){this.modalRef=this.modalService.open(content)}closeVirtualMetadataModal(){this.modalRef.close()}undo(){this.objectUpdatesService.removeSingleFieldUpdate(this.url,this.fieldUpdate.field.uuid)}canRemove(){return this.fieldUpdate.changeType!==object_updates_actions.c.REMOVE&&this.fieldUpdate.changeType!==object_updates_actions.c.ADD}canUndo(){return this.fieldUpdate.changeType>=0}}edit_relationship_component_EditRelationshipComponent.\u0275fac=function EditRelationshipComponent_Factory(t){return new(t||edit_relationship_component_EditRelationshipComponent)(core["\u0275\u0275directiveInject"](object_updates_service.a),core["\u0275\u0275directiveInject"](ng_bootstrap.q))},edit_relationship_component_EditRelationshipComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:edit_relationship_component_EditRelationshipComponent,selectors:[["ds-edit-relationship"]],inputs:{fieldUpdate:"fieldUpdate",url:"url",editItem:"editItem"},features:[core["\u0275\u0275NgOnChangesFeature"]],decls:6,vars:3,consts:[["class","row",4,"ngIf"],["virtualMetadataModal",""],[1,"row"],[1,"col-10","relationship"],[3,"object","viewMode","value"],[1,"col-2"],[1,"btn-group","relationship-action-buttons"],[1,"btn","btn-outline-danger","btn-sm",3,"disabled","title","click"],[1,"fas","fa-trash-alt","fa-fw"],[1,"btn","btn-outline-warning","btn-sm",3,"disabled","title","click"],[1,"fas","fa-undo-alt","fa-fw"],[3,"relationshipId","leftItem","rightItem","url","close","save"]],template:function EditRelationshipComponent_Template(rf,ctx){1&rf&&(core["\u0275\u0275template"](0,EditRelationshipComponent_div_0_Template,27,13,"div",0),core["\u0275\u0275pipe"](1,"async"),core["\u0275\u0275text"](2,"\n"),core["\u0275\u0275template"](3,EditRelationshipComponent_ng_template_3_Template,6,8,"ng-template",null,1,core["\u0275\u0275templateRefExtractor"]),core["\u0275\u0275text"](5,"\n")),2&rf&&core["\u0275\u0275property"]("ngIf",core["\u0275\u0275pipeBind1"](1,1,ctx.relatedItem$))},directives:[common.NgIf,listable_object_component_loader_component.a,virtual_metadata_component_VirtualMetadataComponent],pipes:[common.AsyncPipe,ngx_translate_core.d],styles:[".btn[disabled][_ngcontent-%COMP%]{color:var(--bs-gray-600);border-color:var(--bs-gray-600);z-index:0}.relationship-action-buttons[_ngcontent-%COMP%]{margin:0;position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}"]});const edit_relationship_list_component_c0=function(){return{}},edit_relationship_list_component_c1=function(a0,a1,a2){return{"alert-success":a0,"alert-warning":a1,"alert-danger":a2}};function EditRelationshipListComponent_ng_container_15_ng_container_2_ng_container_2_ds_edit_relationship_9_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"ds-edit-relationship",8),core["\u0275\u0275text"](1,"\n              "),core["\u0275\u0275elementEnd"]()),2&rf){const updateValue_r8=ctx.$implicit,ctx_r6=core["\u0275\u0275nextContext"](4);core["\u0275\u0275property"]("fieldUpdate",updateValue_r8||core["\u0275\u0275pureFunction0"](4,edit_relationship_list_component_c0))("url",ctx_r6.url)("editItem",ctx_r6.item)("ngClass",core["\u0275\u0275pureFunction3"](5,edit_relationship_list_component_c1,1===updateValue_r8.changeType,0===updateValue_r8.changeType,2===updateValue_r8.changeType))}}function EditRelationshipListComponent_ng_container_15_ng_container_2_ng_container_2_div_13_Template(rf,ctx){1&rf&&(core["\u0275\u0275elementStart"](0,"div"),core["\u0275\u0275text"](1),core["\u0275\u0275pipe"](2,"translate"),core["\u0275\u0275elementEnd"]()),2&rf&&(core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](2,1,"item.edit.relationships.no-relationships")))}function EditRelationshipListComponent_ng_container_15_ng_container_2_ng_container_2_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementContainerStart"](0),core["\u0275\u0275text"](1,"\n          "),core["\u0275\u0275elementStart"](2,"ds-pagination",5),core["\u0275\u0275pipe"](3,"async"),core["\u0275\u0275pipe"](4,"async"),core["\u0275\u0275pipe"](5,"async"),core["\u0275\u0275text"](6,"\n            "),core["\u0275\u0275elementStart"](7,"div",6),core["\u0275\u0275text"](8,"\n              "),core["\u0275\u0275template"](9,EditRelationshipListComponent_ng_container_15_ng_container_2_ng_container_2_ds_edit_relationship_9_Template,2,9,"ds-edit-relationship",7),core["\u0275\u0275text"](10,"\n            "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](11,"\n          "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](12,"\n          "),core["\u0275\u0275template"](13,EditRelationshipListComponent_ng_container_15_ng_container_2_ng_container_2_div_13_Template,3,3,"div",4),core["\u0275\u0275text"](14,"\n        "),core["\u0275\u0275elementContainerEnd"]()),2&rf){const updateValues_r5=ctx.ngVar,ctx_r4=core["\u0275\u0275nextContext"](3);let tmp_1_0=null,tmp_2_0=null;core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("paginationOptions",ctx_r4.paginationConfig)("pageInfoState",null==(tmp_1_0=core["\u0275\u0275pipeBind1"](3,8,ctx_r4.relationshipsRd$))||null==tmp_1_0.payload?null:tmp_1_0.payload.pageInfo)("collectionSize",(null==(tmp_2_0=core["\u0275\u0275pipeBind1"](4,10,ctx_r4.relationshipsRd$))||null==tmp_2_0.payload?null:tmp_2_0.payload.totalElements)+core["\u0275\u0275pipeBind1"](5,12,ctx_r4.nbAddedFields$))("hideGear",!0)("hidePagerWhenSinglePage",!0),core["\u0275\u0275advance"](7),core["\u0275\u0275property"]("ngForOf",updateValues_r5)("ngForTrackBy",ctx_r4.trackUpdate),core["\u0275\u0275advance"](4),core["\u0275\u0275property"]("ngIf",0===updateValues_r5.length)}}function EditRelationshipListComponent_ng_container_15_ng_container_2_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementContainerStart"](0),core["\u0275\u0275text"](1,"\n        "),core["\u0275\u0275template"](2,EditRelationshipListComponent_ng_container_15_ng_container_2_ng_container_2_Template,15,14,"ng-container",3),core["\u0275\u0275pipe"](3,"dsObjectValues"),core["\u0275\u0275text"](4,"\n    "),core["\u0275\u0275elementContainerEnd"]()),2&rf){const updates_r1=core["\u0275\u0275nextContext"]().ngVar;core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngVar",core["\u0275\u0275pipeBind1"](3,1,updates_r1))}}function EditRelationshipListComponent_ng_container_15_ds_loading_5_Template(rf,ctx){1&rf&&core["\u0275\u0275element"](0,"ds-loading")}function EditRelationshipListComponent_ng_container_15_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementContainerStart"](0),core["\u0275\u0275text"](1,"\n    "),core["\u0275\u0275template"](2,EditRelationshipListComponent_ng_container_15_ng_container_2_Template,5,3,"ng-container",4),core["\u0275\u0275pipe"](3,"async"),core["\u0275\u0275text"](4,"\n    "),core["\u0275\u0275template"](5,EditRelationshipListComponent_ng_container_15_ds_loading_5_Template,1,0,"ds-loading",4),core["\u0275\u0275pipe"](6,"async"),core["\u0275\u0275text"](7,"\n"),core["\u0275\u0275elementContainerEnd"]()),2&rf){const updates_r1=ctx.ngVar,ctx_r0=core["\u0275\u0275nextContext"]();core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",updates_r1&&!core["\u0275\u0275pipeBind1"](3,2,ctx_r0.loading$)),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("ngIf",core["\u0275\u0275pipeBind1"](6,4,ctx_r0.loading$))}}class edit_relationship_list_component_EditRelationshipListComponent{constructor(objectUpdatesService,linkService,relationshipService,relationshipTypeService,modalService,paginationService,selectableListService){this.objectUpdatesService=objectUpdatesService,this.linkService=linkService,this.relationshipService=relationshipService,this.relationshipTypeService=relationshipTypeService,this.modalService=modalService,this.paginationService=paginationService,this.selectableListService=selectableListService,this.submit=new core.EventEmitter,this.updates$=new internal_BehaviorSubject.a(void 0),this.relationshipsRd$=new internal_BehaviorSubject.a(void 0),this.isLastPage$=new internal_BehaviorSubject.a(!0),this.loading$=new internal_BehaviorSubject.a(!0),this.nbAddedFields$=new internal_BehaviorSubject.a(0),this.subs=[]}getRelationshipMessageKey(){return Object(combineLatest.a)(this.getLabel(),this.relatedEntityType$).pipe(Object(map.a)((([label,relatedEntityType])=>{if(Object(empty_util.b)(label)&&label.indexOf("is")>-1&&label.indexOf("Of")>-1){const relationshipLabel=`${label.substring(2,label.indexOf("Of"))}`;return relationshipLabel!==relatedEntityType.label?`relationships.is${relationshipLabel}Of.${relatedEntityType.label}`:`relationships.is${relationshipLabel}Of`}return label})))}getLabel(){return Object(combineLatest.a)([this.relationshipType.leftType,this.relationshipType.rightType].map((itemTypeRD=>itemTypeRD.pipe(Object(operators.i)(),Object(operators.o)())))).pipe(Object(map.a)((itemTypes=>[this.relationshipType.leftwardType,this.relationshipType.rightwardType][itemTypes.findIndex((itemType=>itemType.id===this.itemType.id))])))}trackUpdate(index,update){return update&&update.field?update.field.uuid:void 0}openLookup(){this.modalRef=this.modalService.open(dynamic_lookup_relation_modal_component.a,{size:"lg"});const modalComp=this.modalRef.componentInstance;modalComp.repeatable=!0,modalComp.isEditRelationship=!0,modalComp.listId=this.listId,modalComp.item=this.item,modalComp.relationshipType=this.relationshipType,modalComp.currentItemIsLeftItem$=this.currentItemIsLeftItem$,modalComp.toAdd=[],modalComp.toRemove=[],modalComp.isPending=!1,this.item.owningCollection.pipe(Object(operators.j)()).subscribe((collection=>{modalComp.collection=collection})),modalComp.select=(...selectableObjects)=>{selectableObjects.forEach((searchResult=>{const relatedItem=searchResult.indexableObject,foundIndex=modalComp.toRemove.findIndex((el=>el.uuid===relatedItem.uuid));-1!==foundIndex?modalComp.toRemove.splice(foundIndex,1):this.getRelationFromId(relatedItem).subscribe((relationship=>{if(relationship){const foundIndexRemove=modalComp.toRemove.findIndex((el=>el.indexableObject.uuid===relatedItem.uuid));-1!==foundIndexRemove&&modalComp.toRemove.splice(foundIndexRemove,1)}else modalComp.toAdd.push(searchResult);this.loading$.next(!0),this.relationshipsRd$.next(this.relationshipsRd$.getValue())}))}))},modalComp.deselect=(...selectableObjects)=>{selectableObjects.forEach((searchResult=>{const relatedItem=searchResult.indexableObject,foundIndex=modalComp.toAdd.findIndex((el=>el.indexableObject.uuid===relatedItem.uuid));-1!==foundIndex?modalComp.toAdd.splice(foundIndex,1):modalComp.toRemove.push(searchResult)}))},modalComp.submitEv=()=>{const subscriptions=[];modalComp.toAdd.forEach((searchResult=>{const relatedItem=searchResult.indexableObject;subscriptions.push(this.relationshipService.getNameVariant(this.listId,relatedItem.uuid).pipe(Object(map.a)((nameVariant=>{const update={uuid:this.relationshipType.id+"-"+searchResult.indexableObject.uuid,nameVariant:nameVariant,type:this.relationshipType,relatedItem:relatedItem};return this.objectUpdatesService.saveAddFieldUpdate(this.url,update),update}))))})),modalComp.toRemove.forEach((searchResult=>{subscriptions.push(this.relationshipService.getNameVariant(this.listId,searchResult.indexableObjectuuid).pipe(Object(switchMap.a)((nameVariant=>this.getRelationFromId(searchResult.indexableObject).pipe(Object(map.a)((relationship=>{const update={uuid:relationship.id,nameVariant:nameVariant,type:this.relationshipType,relationship:relationship};return this.objectUpdatesService.saveRemoveFieldUpdate(this.url,update),update})))))))})),Object(combineLatest.a)(subscriptions).subscribe((res=>{setTimeout((()=>{this.submit.emit()}),1e3),modalComp.isPending=!0}))},modalComp.discardEv=()=>{modalComp.toAdd.forEach((searchResult=>{this.selectableListService.deselectSingle(this.listId,searchResult)})),modalComp.toRemove.forEach((searchResult=>{this.selectableListService.selectSingle(this.listId,searchResult)})),modalComp.toAdd=[],modalComp.toRemove=[]},this.relatedEntityType$.pipe(Object(take.a)(1)).subscribe((relatedEntityType=>{modalComp.relationshipOptions=Object.assign(new relationship_options_model.a,{relationshipType:relatedEntityType.label,searchConfiguration:relatedEntityType.label.toLowerCase(),nameVariants:"true"})})),this.selectableListService.deselectAll(this.listId)}getRelationFromId(relatedItem){return this.currentItemIsLeftItem$.pipe(Object(take.a)(1),Object(switchMap.a)((isLeft=>{let apiCall;return apiCall=isLeft?this.relationshipService.searchByItemsAndType(this.relationshipType.id,this.item.uuid,this.relationshipType.leftwardType,[relatedItem.id]).pipe(Object(operators.i)(),Object(operators.o)()):this.relationshipService.searchByItemsAndType(this.relationshipType.id,this.item.uuid,this.relationshipType.rightwardType,[relatedItem.id]).pipe(Object(operators.i)(),Object(operators.o)()),apiCall.pipe(Object(map.a)((res=>res.page[0])))})))}getFieldUpdatesForRelatedItem(relatedItem){return this.updates$.pipe(Object(take.a)(1),Object(map.a)((updates=>Object.values(updates).map((update=>update.field)).filter((field=>field.relationship)))),Object(mergeMap.a)((identifiables=>Object(combineLatest.a)(identifiables.map((identifiable=>this.getRelatedItem(identifiable.relationship)))).pipe(Object(defaultIfEmpty.a)([]),Object(map.a)((relatedItems=>identifiables.filter(((identifiable,index)=>relatedItems[index].uuid===relatedItem.uuid))))))))}getIsRelatedItem(relatedItem){return this.currentItemIsLeftItem$.pipe(Object(take.a)(1),Object(map.a)((isLeft=>{if(isLeft){return!!this.item.allMetadataValues("relation."+this.relationshipType.leftwardType).find((uuid=>uuid===relatedItem.uuid))}return!!this.item.allMetadataValues("relation."+this.relationshipType.rightwardType).find((uuid=>uuid===relatedItem.uuid))})))}getRelatedItem(relationship){return this.relationshipService.isLeftItem(relationship,this.item).pipe(Object(switchMap.a)((isLeftItem=>isLeftItem?relationship.rightItem:relationship.leftItem)),Object(operators.i)(),Object(operators.o)())}ngOnInit(){this.relationshipLeftAndRightType$=Object(combineLatest.a)([this.relationshipType.leftType,this.relationshipType.rightType].map((type=>type.pipe(Object(operators.i)(),Object(operators.o)())))),this.relatedEntityType$=this.relationshipLeftAndRightType$.pipe(Object(map.a)((relatedTypes=>relatedTypes.find((relatedType=>relatedType.uuid!==this.itemType.uuid)))),Object(empty_util.c)()),this.relatedEntityType$.pipe(Object(take.a)(1)).subscribe((relatedEntityType=>this.listId=`edit-relationship-${this.itemType.id}-${relatedEntityType.id}`)),this.currentItemIsLeftItem$=this.relationshipLeftAndRightType$.pipe(Object(map.a)((([leftType,rightType])=>leftType.id===this.itemType.id||rightType.id!==this.itemType.id&&void console.warn(`The item ${this.item.uuid} is not on the right or the left side of relationship type ${this.relationshipType.uuid}`)))),this.paginationConfig=new pagination_component_options_model.a,this.paginationConfig.id=`er${this.relationshipType.id}`,this.paginationConfig.pageSize=5,this.paginationConfig.currentPage=1;const currentPagination$=this.paginationService.getCurrentPagination(this.paginationConfig.id,this.paginationConfig).pipe(Object(tap.a)((()=>this.loading$.next(!0))));this.subs.push(Object(combineLatest.a)([currentPagination$,this.currentItemIsLeftItem$]).pipe(Object(switchMap.a)((([currentPagination,currentItemIsLeftItem])=>this.relationshipService.getItemRelationshipsByLabel(this.item,currentItemIsLeftItem?this.relationshipType.leftwardType:this.relationshipType.rightwardType,{elementsPerPage:currentPagination.pageSize,currentPage:currentPagination.currentPage},!1,!0,Object(follow_link_config_model.a)("leftItem"),Object(follow_link_config_model.a)("rightItem"))))).subscribe((rd=>{this.relationshipsRd$.next(rd)}))),this.subs.push(this.relationshipsRd$.pipe(Object(empty_util.c)(),Object(operators.c)()).subscribe((rd=>{this.isLastPage$.next(Object(empty_util.a)(rd.payload._links.next))}))),this.subs.push(this.relationshipsRd$.pipe(Object(empty_util.c)(),Object(operators.c)(),Object(switchMap.a)((rd=>Object(from.a)(rd.payload.page).pipe(Object(mergeMap.a)((relationship=>this.relationshipService.isLeftItem(relationship,this.item).pipe(Object(map.a)((isLeftItem=>[relationship,isLeftItem]))))),Object(map.a)((([relationship,isLeftItem])=>{const nameVariant=isLeftItem?relationship.rightwardValue:relationship.leftwardValue;return{uuid:relationship.id,type:this.relationshipType,relationship:relationship,nameVariant:nameVariant}})),Object(toArray.a)(),Object(defaultIfEmpty.a)([])))),Object(switchMap.a)((nextFields=>this.objectUpdatesService.getFieldUpdates(this.url,nextFields).pipe(Object(map.a)((fieldUpdates=>{const fieldUpdatesFiltered={};return this.nbAddedFields$.next(0),Object.keys(fieldUpdates).forEach((uuid=>{if(Object(empty_util.b)(fieldUpdates[uuid])){fieldUpdates[uuid].field.type.id===this.relationshipType.id&&(fieldUpdates[uuid].changeType===object_updates_actions.c.ADD?(this.nbAddedFields$.next(this.nbAddedFields$.getValue()+1),!0===this.isLastPage$.getValue()&&(fieldUpdatesFiltered[uuid]=fieldUpdates[uuid])):fieldUpdatesFiltered[uuid]=fieldUpdates[uuid])}})),fieldUpdatesFiltered}))))),Object(startWith.a)({})).subscribe((updates=>{this.loading$.next(!1),this.updates$.next(updates)})))}ngOnDestroy(){this.subs.filter((subscription=>Object(empty_util.b)(subscription))).forEach((subscription=>subscription.unsubscribe()))}}function ItemRelationshipsComponent_ng_container_2_ng_container_2_button_4_Template(rf,ctx){if(1&rf){const _r10=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementStart"](0,"button",14),core["\u0275\u0275listener"]("click",(function ItemRelationshipsComponent_ng_container_2_ng_container_2_button_4_Template_button_click_0_listener(){core["\u0275\u0275restoreView"](_r10);return core["\u0275\u0275nextContext"](3).discard()})),core["\u0275\u0275pipe"](1,"async"),core["\u0275\u0275element"](2,"i",15),core["\u0275\u0275text"](3,"\n          "),core["\u0275\u0275elementStart"](4,"span",9),core["\u0275\u0275text"](5),core["\u0275\u0275pipe"](6,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](7,"\n        "),core["\u0275\u0275elementEnd"]()}if(2&rf){const ctx_r4=core["\u0275\u0275nextContext"](3);core["\u0275\u0275property"]("disabled",!core["\u0275\u0275pipeBind1"](1,2,ctx_r4.hasChanges())),core["\u0275\u0275advance"](5),core["\u0275\u0275textInterpolate1"]("\xa0",core["\u0275\u0275pipeBind1"](6,4,"item.edit.metadata.discard-button"),"")}}function ItemRelationshipsComponent_ng_container_2_ng_container_2_button_7_Template(rf,ctx){if(1&rf){const _r12=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementStart"](0,"button",16),core["\u0275\u0275listener"]("click",(function ItemRelationshipsComponent_ng_container_2_ng_container_2_button_7_Template_button_click_0_listener(){core["\u0275\u0275restoreView"](_r12);return core["\u0275\u0275nextContext"](3).reinstate()})),core["\u0275\u0275element"](1,"i",17),core["\u0275\u0275text"](2,"\n          "),core["\u0275\u0275elementStart"](3,"span",9),core["\u0275\u0275text"](4),core["\u0275\u0275pipe"](5,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](6,"\n        "),core["\u0275\u0275elementEnd"]()}2&rf&&(core["\u0275\u0275advance"](4),core["\u0275\u0275textInterpolate1"]("\xa0",core["\u0275\u0275pipeBind1"](5,1,"item.edit.metadata.reinstate-button"),""))}function ItemRelationshipsComponent_ng_container_2_ng_container_2_ng_container_20_ng_container_2_div_2_Template(rf,ctx){if(1&rf){const _r19=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementStart"](0,"div",19),core["\u0275\u0275text"](1,"\n            "),core["\u0275\u0275elementStart"](2,"ds-edit-relationship-list",20),core["\u0275\u0275listener"]("submit",(function ItemRelationshipsComponent_ng_container_2_ng_container_2_ng_container_20_ng_container_2_div_2_Template_ds_edit_relationship_list_submit_2_listener(){core["\u0275\u0275restoreView"](_r19);return core["\u0275\u0275nextContext"](5).submit()})),core["\u0275\u0275pipe"](3,"async"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](4,"\n          "),core["\u0275\u0275elementEnd"]()}if(2&rf){const relationshipType_r17=ctx.$implicit,ctx_r16=core["\u0275\u0275nextContext"](5);core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("url",ctx_r16.url)("item",ctx_r16.item)("itemType",core["\u0275\u0275pipeBind1"](3,5,ctx_r16.entityType$))("relationshipType",relationshipType_r17)("hasChanges",ctx_r16.hasChanges())}}function ItemRelationshipsComponent_ng_container_2_ng_container_2_ng_container_20_ng_container_2_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementContainerStart"](0),core["\u0275\u0275text"](1,"\n          "),core["\u0275\u0275template"](2,ItemRelationshipsComponent_ng_container_2_ng_container_2_ng_container_20_ng_container_2_div_2_Template,5,7,"div",18),core["\u0275\u0275text"](3,"\n        "),core["\u0275\u0275elementContainerEnd"]()),2&rf){const relationshipTypes_r13=core["\u0275\u0275nextContext"]().ngVar;core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngForOf",relationshipTypes_r13)}}function ItemRelationshipsComponent_ng_container_2_ng_container_2_ng_container_20_ds_loading_4_Template(rf,ctx){1&rf&&core["\u0275\u0275element"](0,"ds-loading")}function ItemRelationshipsComponent_ng_container_2_ng_container_2_ng_container_20_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementContainerStart"](0),core["\u0275\u0275text"](1,"\n        "),core["\u0275\u0275template"](2,ItemRelationshipsComponent_ng_container_2_ng_container_2_ng_container_20_ng_container_2_Template,4,1,"ng-container",2),core["\u0275\u0275text"](3,"\n        "),core["\u0275\u0275template"](4,ItemRelationshipsComponent_ng_container_2_ng_container_2_ng_container_20_ds_loading_4_Template,1,0,"ds-loading",2),core["\u0275\u0275text"](5,"\n      "),core["\u0275\u0275elementContainerEnd"]()),2&rf){const relationshipTypes_r13=ctx.ngVar;core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",relationshipTypes_r13),core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",!relationshipTypes_r13)}}function ItemRelationshipsComponent_ng_container_2_ng_container_2_button_27_Template(rf,ctx){if(1&rf){const _r22=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementStart"](0,"button",21),core["\u0275\u0275listener"]("click",(function ItemRelationshipsComponent_ng_container_2_ng_container_2_button_27_Template_button_click_0_listener(){core["\u0275\u0275restoreView"](_r22);return core["\u0275\u0275nextContext"](3).discard()})),core["\u0275\u0275pipe"](1,"async"),core["\u0275\u0275element"](2,"i",15),core["\u0275\u0275text"](3,"\n            "),core["\u0275\u0275elementStart"](4,"span",9),core["\u0275\u0275text"](5),core["\u0275\u0275pipe"](6,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](7,"\n          "),core["\u0275\u0275elementEnd"]()}if(2&rf){const ctx_r7=core["\u0275\u0275nextContext"](3);core["\u0275\u0275property"]("disabled",!core["\u0275\u0275pipeBind1"](1,2,ctx_r7.hasChanges())),core["\u0275\u0275advance"](5),core["\u0275\u0275textInterpolate1"]("\xa0",core["\u0275\u0275pipeBind1"](6,4,"item.edit.metadata.discard-button"),"")}}function ItemRelationshipsComponent_ng_container_2_ng_container_2_button_30_Template(rf,ctx){if(1&rf){const _r24=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementStart"](0,"button",22),core["\u0275\u0275listener"]("click",(function ItemRelationshipsComponent_ng_container_2_ng_container_2_button_30_Template_button_click_0_listener(){core["\u0275\u0275restoreView"](_r24);return core["\u0275\u0275nextContext"](3).reinstate()})),core["\u0275\u0275element"](1,"i",17),core["\u0275\u0275text"](2,"\n            "),core["\u0275\u0275elementStart"](3,"span",9),core["\u0275\u0275text"](4),core["\u0275\u0275pipe"](5,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](6,"\n          "),core["\u0275\u0275elementEnd"]()}2&rf&&(core["\u0275\u0275advance"](4),core["\u0275\u0275textInterpolate1"]("\xa0",core["\u0275\u0275pipeBind1"](5,1,"item.edit.metadata.reinstate-button"),""))}function ItemRelationshipsComponent_ng_container_2_ng_container_2_Template(rf,ctx){if(1&rf){const _r26=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementContainerStart"](0),core["\u0275\u0275text"](1,"\n      "),core["\u0275\u0275elementStart"](2,"div",4),core["\u0275\u0275text"](3,"\n        "),core["\u0275\u0275template"](4,ItemRelationshipsComponent_ng_container_2_ng_container_2_button_4_Template,8,6,"button",5),core["\u0275\u0275pipe"](5,"async"),core["\u0275\u0275text"](6,"\n        "),core["\u0275\u0275template"](7,ItemRelationshipsComponent_ng_container_2_ng_container_2_button_7_Template,7,3,"button",6),core["\u0275\u0275pipe"](8,"async"),core["\u0275\u0275text"](9,"\n        "),core["\u0275\u0275elementStart"](10,"button",7),core["\u0275\u0275listener"]("click",(function ItemRelationshipsComponent_ng_container_2_ng_container_2_Template_button_click_10_listener(){core["\u0275\u0275restoreView"](_r26);return core["\u0275\u0275nextContext"](2).submit()})),core["\u0275\u0275pipe"](11,"async"),core["\u0275\u0275element"](12,"i",8),core["\u0275\u0275text"](13,"\n          "),core["\u0275\u0275elementStart"](14,"span",9),core["\u0275\u0275text"](15),core["\u0275\u0275pipe"](16,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](17,"\n        "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](18,"\n      "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](19,"\n      "),core["\u0275\u0275template"](20,ItemRelationshipsComponent_ng_container_2_ng_container_2_ng_container_20_Template,6,2,"ng-container",1),core["\u0275\u0275pipe"](21,"async"),core["\u0275\u0275text"](22,"\n      "),core["\u0275\u0275elementStart"](23,"div",10),core["\u0275\u0275text"](24,"\n        "),core["\u0275\u0275elementStart"](25,"div",11),core["\u0275\u0275text"](26,"\n          "),core["\u0275\u0275template"](27,ItemRelationshipsComponent_ng_container_2_ng_container_2_button_27_Template,8,6,"button",12),core["\u0275\u0275pipe"](28,"async"),core["\u0275\u0275text"](29,"\n          "),core["\u0275\u0275template"](30,ItemRelationshipsComponent_ng_container_2_ng_container_2_button_30_Template,7,3,"button",13),core["\u0275\u0275pipe"](31,"async"),core["\u0275\u0275text"](32,"\n          "),core["\u0275\u0275elementStart"](33,"button",7),core["\u0275\u0275listener"]("click",(function ItemRelationshipsComponent_ng_container_2_ng_container_2_Template_button_click_33_listener(){core["\u0275\u0275restoreView"](_r26);return core["\u0275\u0275nextContext"](2).submit()})),core["\u0275\u0275pipe"](34,"async"),core["\u0275\u0275element"](35,"i",8),core["\u0275\u0275text"](36,"\n            "),core["\u0275\u0275elementStart"](37,"span",9),core["\u0275\u0275text"](38),core["\u0275\u0275pipe"](39,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](40,"\n          "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](41,"\n        "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](42,"\n      "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](43,"\n    "),core["\u0275\u0275elementContainerEnd"]()}if(2&rf){const ctx_r2=core["\u0275\u0275nextContext"](2);core["\u0275\u0275advance"](4),core["\u0275\u0275property"]("ngIf",!core["\u0275\u0275pipeBind1"](5,9,ctx_r2.isReinstatable())),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("ngIf",core["\u0275\u0275pipeBind1"](8,11,ctx_r2.isReinstatable())),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("disabled",!core["\u0275\u0275pipeBind1"](11,13,ctx_r2.hasChanges())),core["\u0275\u0275advance"](5),core["\u0275\u0275textInterpolate1"]("\xa0",core["\u0275\u0275pipeBind1"](16,15,"item.edit.metadata.save-button"),""),core["\u0275\u0275advance"](5),core["\u0275\u0275property"]("ngVar",core["\u0275\u0275pipeBind1"](21,17,ctx_r2.relationshipTypes$)),core["\u0275\u0275advance"](7),core["\u0275\u0275property"]("ngIf",!core["\u0275\u0275pipeBind1"](28,19,ctx_r2.isReinstatable())),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("ngIf",core["\u0275\u0275pipeBind1"](31,21,ctx_r2.isReinstatable())),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("disabled",!core["\u0275\u0275pipeBind1"](34,23,ctx_r2.hasChanges())),core["\u0275\u0275advance"](5),core["\u0275\u0275textInterpolate1"]("\xa0",core["\u0275\u0275pipeBind1"](39,25,"item.edit.metadata.save-button"),"")}}function ItemRelationshipsComponent_ng_container_2_div_4_Template(rf,ctx){1&rf&&(core["\u0275\u0275elementStart"](0,"div",23),core["\u0275\u0275text"](1),core["\u0275\u0275pipe"](2,"translate"),core["\u0275\u0275elementEnd"]()),2&rf&&(core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate1"]("\n      ",core["\u0275\u0275pipeBind1"](2,1,"item.edit.relationships.no-entity-type"),"\n    "))}function ItemRelationshipsComponent_ng_container_2_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementContainerStart"](0),core["\u0275\u0275text"](1,"\n    "),core["\u0275\u0275template"](2,ItemRelationshipsComponent_ng_container_2_ng_container_2_Template,44,27,"ng-container",2),core["\u0275\u0275text"](3,"\n    "),core["\u0275\u0275template"](4,ItemRelationshipsComponent_ng_container_2_div_4_Template,3,3,"div",3),core["\u0275\u0275text"](5,"\n  "),core["\u0275\u0275elementContainerEnd"]()),2&rf){const entityType_r1=ctx.ngVar;core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",entityType_r1),core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",!entityType_r1)}}edit_relationship_list_component_EditRelationshipListComponent.\u0275fac=function EditRelationshipListComponent_Factory(t){return new(t||edit_relationship_list_component_EditRelationshipListComponent)(core["\u0275\u0275directiveInject"](object_updates_service.a),core["\u0275\u0275directiveInject"](link_service.a),core["\u0275\u0275directiveInject"](relationship_service.a),core["\u0275\u0275directiveInject"](relationship_type_service.a),core["\u0275\u0275directiveInject"](ng_bootstrap.q),core["\u0275\u0275directiveInject"](pagination_service.a),core["\u0275\u0275directiveInject"](selectable_list_service.a))},edit_relationship_list_component_EditRelationshipListComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:edit_relationship_list_component_EditRelationshipListComponent,selectors:[["ds-edit-relationship-list"]],inputs:{item:"item",itemType:"itemType",url:"url",relationshipType:"relationshipType",hasChanges:"hasChanges"},outputs:{submit:"submit"},decls:18,vars:14,consts:[[1,"ml-2","btn","btn-success",3,"disabled","click"],[1,"fas","fa-plus"],[1,"d-none","d-sm-inline"],[4,"ngVar"],[4,"ngIf"],[3,"paginationOptions","pageInfoState","collectionSize","hideGear","hidePagerWhenSinglePage"],[1,"my-2"],["class","relationship-row d-block alert",3,"fieldUpdate","url","editItem","ngClass",4,"ngFor","ngForOf","ngForTrackBy"],[1,"relationship-row","d-block","alert",3,"fieldUpdate","url","editItem","ngClass"]],template:function EditRelationshipListComponent_Template(rf,ctx){1&rf&&(core["\u0275\u0275elementStart"](0,"h5"),core["\u0275\u0275text"](1),core["\u0275\u0275pipe"](2,"translate"),core["\u0275\u0275pipe"](3,"async"),core["\u0275\u0275elementStart"](4,"button",0),core["\u0275\u0275listener"]("click",(function EditRelationshipListComponent_Template_button_click_4_listener(){return ctx.openLookup()})),core["\u0275\u0275pipe"](5,"async"),core["\u0275\u0275text"](6,"\n        "),core["\u0275\u0275element"](7,"i",1),core["\u0275\u0275text"](8,"\n        "),core["\u0275\u0275elementStart"](9,"span",2),core["\u0275\u0275text"](10),core["\u0275\u0275pipe"](11,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](12,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](13,"\n"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](14,"\n"),core["\u0275\u0275template"](15,EditRelationshipListComponent_ng_container_15_Template,8,6,"ng-container",3),core["\u0275\u0275pipe"](16,"async"),core["\u0275\u0275text"](17,"\n")),2&rf&&(core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate1"]("\n    ",core["\u0275\u0275pipeBind1"](2,4,core["\u0275\u0275pipeBind1"](3,6,ctx.getRelationshipMessageKey())),"\n    "),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("disabled",core["\u0275\u0275pipeBind1"](5,8,ctx.hasChanges)),core["\u0275\u0275advance"](6),core["\u0275\u0275textInterpolate1"]("\xa0",core["\u0275\u0275pipeBind1"](11,10,"item.edit.relationships.edit.buttons.add"),""),core["\u0275\u0275advance"](5),core["\u0275\u0275property"]("ngVar",core["\u0275\u0275pipeBind1"](16,12,ctx.updates$)))},directives:[var_directive.a,common.NgIf,pagination_component.a,common.NgForOf,edit_relationship_component_EditRelationshipComponent,common.NgClass,loading_component.a],pipes:[ngx_translate_core.d,common.AsyncPipe,object_values_pipe.a],styles:[".relationship-row[_ngcontent-%COMP%]:not(.alert){padding:var(--bs-alert-padding-y) 0}.relationship-row.alert[_ngcontent-%COMP%]{margin-left:calc(-1 * var(--bs-alert-padding-x));margin-right:calc(-1 * var(--bs-alert-padding-x));margin-top:-1px;margin-bottom:-1px}"]});class item_relationships_component_ItemRelationshipsComponent extends abstract_item_update_component.a{constructor(itemService,objectUpdatesService,router,notificationsService,translateService,route,relationshipService,objectCache,requestService,entityTypeService,relationshipTypeService,cdr,modalService){super(itemService,objectUpdatesService,router,notificationsService,translateService,route),this.itemService=itemService,this.objectUpdatesService=objectUpdatesService,this.router=router,this.notificationsService=notificationsService,this.translateService=translateService,this.route=route,this.relationshipService=relationshipService,this.objectCache=objectCache,this.requestService=requestService,this.entityTypeService=entityTypeService,this.relationshipTypeService=relationshipTypeService,this.cdr=cdr,this.modalService=modalService}initializeUpdates(){const label=this.item.firstMetadataValue("dspace.entity.type");void 0!==label?(this.relationshipTypes$=this.relationshipTypeService.searchByEntityType(label,!0,!0,...this.getRelationshipTypeFollowLinks()).pipe(Object(map.a)((relationshipTypes=>relationshipTypes.page))),this.entityType$=this.entityTypeService.getEntityTypeByLabel(label).pipe(Object(operators.i)(),Object(operators.o)())):this.entityType$=Object(of.a)(void 0)}initializeNotificationsPrefix(){this.notificationsPrefix="item.edit.relationships.notifications."}submit(){const removedRelationshipIDs$=this.relationshipService.getItemRelationshipsArray(this.item).pipe(Object(startWith.a)([]),Object(map.a)((relationships=>relationships.map((relationship=>Object.assign(new relationship_model.a,relationship,{uuid:relationship.id}))))),Object(switchMap.a)((relationships=>this.objectUpdatesService.getFieldUpdatesExclusive(this.url,relationships))),Object(map.a)((fieldUpdates=>Object.values(fieldUpdates).filter((fieldUpdate=>fieldUpdate.changeType===object_updates_actions.c.REMOVE)).map((fieldUpdate=>fieldUpdate.field))))),addRelatedItems$=this.objectUpdatesService.getFieldUpdates(this.url,[]).pipe(Object(map.a)((fieldUpdates=>Object.values(fieldUpdates).filter((fieldUpdate=>Object(empty_util.b)(fieldUpdate))).filter((fieldUpdate=>fieldUpdate.changeType===object_updates_actions.c.ADD)).map((fieldUpdate=>fieldUpdate.field)))));Object(combineLatest.a)(removedRelationshipIDs$,addRelatedItems$).pipe(Object(take.a)(1)).subscribe((([removeRelationshipIDs,addRelatedItems])=>{[this.deleteRelationships(removeRelationshipIDs),this.addRelationships(addRelatedItems)].forEach((action=>action.subscribe((response=>{response.length>0&&(this.initializeOriginalFields(),this.cdr.detectChanges(),this.displayNotifications(response),this.modalService.dismissAll())}))))}))}deleteRelationships(deleteRelationshipIDs){return Object(zip.a)(...deleteRelationshipIDs.map((deleteRelationship=>{let copyVirtualMetadata;return copyVirtualMetadata=deleteRelationship.keepLeftVirtualMetadata&&deleteRelationship.keepRightVirtualMetadata?"all":deleteRelationship.keepLeftVirtualMetadata?"left":deleteRelationship.keepRightVirtualMetadata?"right":"none",this.relationshipService.deleteRelationship(deleteRelationship.uuid,copyVirtualMetadata)})))}addRelationships(addRelatedItems){return Object(zip.a)(...addRelatedItems.map((addRelationship=>this.entityType$.pipe(Object(switchMap.a)((entityType=>this.entityTypeService.isLeftType(addRelationship.type,entityType))),Object(switchMap.a)((isLeftType=>{let leftItem,rightItem,leftwardValue,rightwardValue;return isLeftType?(leftItem=this.item,rightItem=addRelationship.relatedItem,leftwardValue=null,rightwardValue=addRelationship.nameVariant):(leftItem=addRelationship.relatedItem,rightItem=this.item,leftwardValue=addRelationship.nameVariant,rightwardValue=null),this.relationshipService.addRelationship(addRelationship.type.id,leftItem,rightItem,leftwardValue,rightwardValue)}))))))}displayNotifications(responses){const failedResponses=responses.filter((response=>response.hasFailed)),successfulResponses=responses.filter((response=>response.hasSucceeded));failedResponses.forEach((response=>{this.notificationsService.error(this.getNotificationTitle("failed"),response.errorMessage)})),successfulResponses.length>0&&this.notificationsService.success(this.getNotificationTitle("saved"),this.getNotificationContent("saved"))}initializeOriginalFields(){return this.relationshipService.getRelatedItems(this.item).pipe(Object(take.a)(1)).subscribe((items=>{this.objectUpdatesService.initialize(this.url,items,this.item.lastModified)}))}getRelationshipTypeFollowLinks(){return[Object(follow_link_config_model.a)("leftType"),Object(follow_link_config_model.a)("rightType")]}}item_relationships_component_ItemRelationshipsComponent.\u0275fac=function ItemRelationshipsComponent_Factory(t){return new(t||item_relationships_component_ItemRelationshipsComponent)(core["\u0275\u0275directiveInject"](item_data_service.a),core["\u0275\u0275directiveInject"](object_updates_service.a),core["\u0275\u0275directiveInject"](fesm2015_router.g),core["\u0275\u0275directiveInject"](notifications_service.a),core["\u0275\u0275directiveInject"](ngx_translate_core.e),core["\u0275\u0275directiveInject"](fesm2015_router.a),core["\u0275\u0275directiveInject"](relationship_service.a),core["\u0275\u0275directiveInject"](object_cache_service.a),core["\u0275\u0275directiveInject"](request_service.a),core["\u0275\u0275directiveInject"](entity_type_service.a),core["\u0275\u0275directiveInject"](relationship_type_service.a),core["\u0275\u0275directiveInject"](core.ChangeDetectorRef),core["\u0275\u0275directiveInject"](ng_bootstrap.q))},item_relationships_component_ItemRelationshipsComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:item_relationships_component_ItemRelationshipsComponent,selectors:[["ds-item-relationships"]],features:[core["\u0275\u0275InheritDefinitionFeature"]],decls:6,vars:3,consts:[[1,"item-relationships"],[4,"ngVar"],[4,"ngIf"],["class","alert alert-info mt-2","role","alert",4,"ngIf"],[1,"button-row","top","d-flex"],["class","btn btn-danger ml-auto",3,"disabled","click",4,"ngIf"],["class","btn btn-warning ml-auto",3,"click",4,"ngIf"],[1,"btn","btn-primary",3,"disabled","click"],[1,"fas","fa-save"],[1,"d-none","d-sm-inline"],[1,"button-row","bottom"],[1,"float-right"],["class","btn btn-danger",3,"disabled","click",4,"ngIf"],["class","btn btn-warning",3,"click",4,"ngIf"],[1,"btn","btn-danger","ml-auto",3,"disabled","click"],[1,"fas","fa-times"],[1,"btn","btn-warning","ml-auto",3,"click"],[1,"fas","fa-undo-alt"],["class","mb-4",4,"ngFor","ngForOf"],[1,"mb-4"],[3,"url","item","itemType","relationshipType","hasChanges","submit"],[1,"btn","btn-danger",3,"disabled","click"],[1,"btn","btn-warning",3,"click"],["role","alert",1,"alert","alert-info","mt-2"]],template:function ItemRelationshipsComponent_Template(rf,ctx){1&rf&&(core["\u0275\u0275elementStart"](0,"div",0),core["\u0275\u0275text"](1,"\n  "),core["\u0275\u0275template"](2,ItemRelationshipsComponent_ng_container_2_Template,6,2,"ng-container",1),core["\u0275\u0275pipe"](3,"async"),core["\u0275\u0275text"](4,"\n"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](5,"\n")),2&rf&&(core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngVar",core["\u0275\u0275pipeBind1"](3,1,ctx.entityType$)))},directives:[var_directive.a,common.NgIf,common.NgForOf,edit_relationship_list_component_EditRelationshipListComponent,loading_component.a],pipes:[common.AsyncPipe,ngx_translate_core.d],styles:[".button-row[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-right:calc(.5 * var(--bs-spacer))}.button-row[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:last-child{margin-right:0}@media screen and (min-width:576px){.button-row[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{min-width:var(--ds-edit-item-button-min-width)}}.button-row.top[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-top:calc(var(--bs-spacer) / 2);margin-bottom:calc(var(--bs-spacer) / 2)}"]});var i18n_breadcrumb_resolver=__webpack_require__("A0IO"),aletr_type=__webpack_require__("ac5F"),item_versions_component=__webpack_require__("Y9an");function ItemVersionHistoryComponent_div_0_ds_item_versions_2_Template(rf,ctx){if(1&rf&&core["\u0275\u0275element"](0,"ds-item-versions",3),2&rf){const item_r1=core["\u0275\u0275nextContext"]().ngVar;core["\u0275\u0275property"]("item",item_r1)("displayWhenEmpty",!0)("displayTitle",!1)("displayActions",!0)}}function ItemVersionHistoryComponent_div_0_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"div",1),core["\u0275\u0275text"](1,"\n  "),core["\u0275\u0275template"](2,ItemVersionHistoryComponent_div_0_ds_item_versions_2_Template,1,4,"ds-item-versions",2),core["\u0275\u0275text"](3,"\n"),core["\u0275\u0275elementEnd"]()),2&rf){const item_r1=ctx.ngVar;core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",item_r1)}}class item_version_history_component_ItemVersionHistoryComponent{constructor(route){this.route=route,this.AlertTypeEnum=aletr_type.a}ngOnInit(){this.itemRD$=this.route.parent.parent.data.pipe(Object(map.a)((data=>data.dso))).pipe(Object(operators.i)())}}item_version_history_component_ItemVersionHistoryComponent.\u0275fac=function ItemVersionHistoryComponent_Factory(t){return new(t||item_version_history_component_ItemVersionHistoryComponent)(core["\u0275\u0275directiveInject"](fesm2015_router.a))},item_version_history_component_ItemVersionHistoryComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:item_version_history_component_ItemVersionHistoryComponent,selectors:[["ds-item-version-history"]],decls:3,vars:3,consts:[["class","mt-2",4,"ngVar"],[1,"mt-2"],[3,"item","displayWhenEmpty","displayTitle","displayActions",4,"ngIf"],[3,"item","displayWhenEmpty","displayTitle","displayActions"]],template:function ItemVersionHistoryComponent_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275template"](0,ItemVersionHistoryComponent_div_0_Template,4,1,"div",0),core["\u0275\u0275pipe"](1,"async"),core["\u0275\u0275text"](2,"\n")),2&rf){let tmp_0_0=null;core["\u0275\u0275property"]("ngVar",null==(tmp_0_0=core["\u0275\u0275pipeBind1"](1,1,ctx.itemRD$))?null:tmp_0_0.payload)}},directives:[var_directive.a,common.NgIf,item_versions_component.a],pipes:[common.AsyncPipe],encapsulation:2});var catchError=__webpack_require__("JIr8"),paginated_list_model=__webpack_require__("f+Ev"),alert_component=__webpack_require__("VYMa"),resource_policies_component=__webpack_require__("+Bs4"),ng_for_track_by_id_directive=__webpack_require__("xPuV");function ItemAuthorizationsComponent_ng_container_7_ng_container_4_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementContainerStart"](0),core["\u0275\u0275text"](1,"\n      "),core["\u0275\u0275element"](2,"ds-resource-policies",2),core["\u0275\u0275text"](3,"\n    "),core["\u0275\u0275elementContainerEnd"]()),2&rf){const bitstream_r3=ctx.$implicit;core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("resourceType","bitstream")("resourceUUID",bitstream_r3.id)}}function ItemAuthorizationsComponent_ng_container_7_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementContainerStart"](0),core["\u0275\u0275text"](1,"\n    "),core["\u0275\u0275element"](2,"ds-resource-policies",2),core["\u0275\u0275text"](3,"\n    "),core["\u0275\u0275template"](4,ItemAuthorizationsComponent_ng_container_7_ng_container_4_Template,4,2,"ng-container",3),core["\u0275\u0275pipe"](5,"async"),core["\u0275\u0275text"](6,"\n  "),core["\u0275\u0275elementContainerEnd"]()),2&rf){const bundle_r1=ctx.$implicit,ctx_r0=core["\u0275\u0275nextContext"]();let tmp_2_0=null;core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("resourceType","bundle")("resourceUUID",bundle_r1.id),core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngForOf",null==(tmp_2_0=core["\u0275\u0275pipeBind1"](5,3,ctx_r0.bundleBitstreamsMap.get(bundle_r1.id)))?null:tmp_2_0.page)}}class item_authorizations_component_ItemAuthorizationsComponent{constructor(linkService,route){this.linkService=linkService,this.route=route,this.bundleBitstreamsMap=new Map,this.bundles$=new internal_BehaviorSubject.a([]),this.subs=[]}ngOnInit(){this.item$=this.route.data.pipe(Object(map.a)((data=>data.dso)),Object(operators.k)(),Object(map.a)((item=>this.linkService.resolveLink(item,Object(follow_link_config_model.a)("bundles",{},Object(follow_link_config_model.a)("bitstreams"))))));const bundles$=this.item$.pipe(Object(filter.a)((item=>Object(empty_util.e)(item.bundles))),Object(mergeMap.a)((item=>item.bundles)),Object(operators.k)(),Object(catchError.a)((error=>(console.error(error),Object(of.a)(Object(paginated_list_model.b)(null,[]))))));this.subs.push(bundles$.pipe(Object(take.a)(1),Object(map.a)((list=>list.page))).subscribe((bundles=>{this.bundles$.next(bundles)})),bundles$.pipe(Object(take.a)(1),Object(mergeMap.a)((list=>list.page)),Object(map.a)((bundle=>({id:bundle.id,bitstreams:this.getBundleBitstreams(bundle)})))).subscribe((entry=>{this.bundleBitstreamsMap.set(entry.id,entry.bitstreams)})))}getItemUUID(){return this.item$.pipe(Object(map.a)((item=>item.id)),Object(first.a)((UUID=>Object(empty_util.e)(UUID))))}getItemBundles(){return this.bundles$.asObservable()}getBundleBitstreams(bundle){return bundle.bitstreams.pipe(Object(operators.j)(),Object(catchError.a)((error=>(console.error(error),Object(of.a)(Object(paginated_list_model.b)(null,[]))))))}ngOnDestroy(){this.subs.filter((subscription=>Object(empty_util.b)(subscription))).forEach((subscription=>subscription.unsubscribe()))}}item_authorizations_component_ItemAuthorizationsComponent.\u0275fac=function ItemAuthorizationsComponent_Factory(t){return new(t||item_authorizations_component_ItemAuthorizationsComponent)(core["\u0275\u0275directiveInject"](link_service.a),core["\u0275\u0275directiveInject"](fesm2015_router.a))},item_authorizations_component_ItemAuthorizationsComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:item_authorizations_component_ItemAuthorizationsComponent,selectors:[["ds-item-authorizations"]],decls:11,vars:9,consts:[[1,"container"],[3,"type","content"],[3,"resourceType","resourceUUID"],[4,"ngFor","ngForTrackById","ngForOf"]],template:function ItemAuthorizationsComponent_Template(rf,ctx){1&rf&&(core["\u0275\u0275elementStart"](0,"div",0),core["\u0275\u0275text"](1,"\n  "),core["\u0275\u0275element"](2,"ds-alert",1),core["\u0275\u0275text"](3,"\n  "),core["\u0275\u0275element"](4,"ds-resource-policies",2),core["\u0275\u0275pipe"](5,"async"),core["\u0275\u0275text"](6,"\n  "),core["\u0275\u0275template"](7,ItemAuthorizationsComponent_ng_container_7_Template,7,5,"ng-container",3),core["\u0275\u0275pipe"](8,"async"),core["\u0275\u0275text"](9,"\n"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](10,"\n\n")),2&rf&&(core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("type","alert-info")("content","item.edit.authorizations.heading"),core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("resourceType","item")("resourceUUID",core["\u0275\u0275pipeBind1"](5,5,ctx.getItemUUID())),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("ngForOf",core["\u0275\u0275pipeBind1"](8,7,ctx.getItemBundles())))},directives:[alert_component.a,resource_policies_component.a,common.NgForOf,ng_for_track_by_id_directive.a],pipes:[common.AsyncPipe],encapsulation:2});var resource_policy_target_resolver=__webpack_require__("n1Qy"),resource_policy_resolver=__webpack_require__("G5zm"),resource_policy_create_component=__webpack_require__("EEUA"),resource_policy_edit_component=__webpack_require__("ALMP"),i18n_breadcrumbs_service=__webpack_require__("tv3Y"),edit_item_page_routing_paths=__webpack_require__("jrTz"),dso_page_single_feature_guard=__webpack_require__("0TMo"),item_page_resolver=__webpack_require__("z3/6"),auth_service=__webpack_require__("Vurf");class item_page_reinstate_guard_ItemPageReinstateGuard extends dso_page_single_feature_guard.a{constructor(resolver,authorizationService,router,authService){super(resolver,authorizationService,router,authService),this.resolver=resolver,this.authorizationService=authorizationService,this.router=router,this.authService=authService}getFeatureID(next,state){return Object(of.a)(feature_id.a.ReinstateItem)}}item_page_reinstate_guard_ItemPageReinstateGuard.\u0275fac=function ItemPageReinstateGuard_Factory(t){return new(t||item_page_reinstate_guard_ItemPageReinstateGuard)(core["\u0275\u0275inject"](item_page_resolver.a),core["\u0275\u0275inject"](authorization_data_service.a),core["\u0275\u0275inject"](fesm2015_router.g),core["\u0275\u0275inject"](auth_service.a))},item_page_reinstate_guard_ItemPageReinstateGuard.\u0275prov=core["\u0275\u0275defineInjectable"]({token:item_page_reinstate_guard_ItemPageReinstateGuard,factory:item_page_reinstate_guard_ItemPageReinstateGuard.\u0275fac,providedIn:"root"});class item_page_withdraw_guard_ItemPageWithdrawGuard extends dso_page_single_feature_guard.a{constructor(resolver,authorizationService,router,authService){super(resolver,authorizationService,router,authService),this.resolver=resolver,this.authorizationService=authorizationService,this.router=router,this.authService=authService}getFeatureID(next,state){return Object(of.a)(feature_id.a.WithdrawItem)}}item_page_withdraw_guard_ItemPageWithdrawGuard.\u0275fac=function ItemPageWithdrawGuard_Factory(t){return new(t||item_page_withdraw_guard_ItemPageWithdrawGuard)(core["\u0275\u0275inject"](item_page_resolver.a),core["\u0275\u0275inject"](authorization_data_service.a),core["\u0275\u0275inject"](fesm2015_router.g),core["\u0275\u0275inject"](auth_service.a))},item_page_withdraw_guard_ItemPageWithdrawGuard.\u0275prov=core["\u0275\u0275defineInjectable"]({token:item_page_withdraw_guard_ItemPageWithdrawGuard,factory:item_page_withdraw_guard_ItemPageWithdrawGuard.\u0275fac,providedIn:"root"});class item_page_metadata_guard_ItemPageMetadataGuard extends dso_page_single_feature_guard.a{constructor(resolver,authorizationService,router,authService){super(resolver,authorizationService,router,authService),this.resolver=resolver,this.authorizationService=authorizationService,this.router=router,this.authService=authService}getFeatureID(next,state){return Object(of.a)(feature_id.a.CanEditMetadata)}}item_page_metadata_guard_ItemPageMetadataGuard.\u0275fac=function ItemPageMetadataGuard_Factory(t){return new(t||item_page_metadata_guard_ItemPageMetadataGuard)(core["\u0275\u0275inject"](item_page_resolver.a),core["\u0275\u0275inject"](authorization_data_service.a),core["\u0275\u0275inject"](fesm2015_router.g),core["\u0275\u0275inject"](auth_service.a))},item_page_metadata_guard_ItemPageMetadataGuard.\u0275prov=core["\u0275\u0275defineInjectable"]({token:item_page_metadata_guard_ItemPageMetadataGuard,factory:item_page_metadata_guard_ItemPageMetadataGuard.\u0275fac,providedIn:"root"});var item_page_administrator_guard=__webpack_require__("920W"),dso_page_some_feature_guard=__webpack_require__("HENg");class item_page_status_guard_ItemPageStatusGuard extends dso_page_some_feature_guard.a{constructor(resolver,authorizationService,router,authService){super(resolver,authorizationService,router,authService),this.resolver=resolver,this.authorizationService=authorizationService,this.router=router,this.authService=authService}getFeatureIDs(next,state){return Object(of.a)([feature_id.a.CanManageMappings,feature_id.a.WithdrawItem,feature_id.a.ReinstateItem,feature_id.a.CanManagePolicies,feature_id.a.CanMakePrivate,feature_id.a.CanDelete,feature_id.a.CanMove])}}item_page_status_guard_ItemPageStatusGuard.\u0275fac=function ItemPageStatusGuard_Factory(t){return new(t||item_page_status_guard_ItemPageStatusGuard)(core["\u0275\u0275inject"](item_page_resolver.a),core["\u0275\u0275inject"](authorization_data_service.a),core["\u0275\u0275inject"](fesm2015_router.g),core["\u0275\u0275inject"](auth_service.a))},item_page_status_guard_ItemPageStatusGuard.\u0275prov=core["\u0275\u0275defineInjectable"]({token:item_page_status_guard_ItemPageStatusGuard,factory:item_page_status_guard_ItemPageStatusGuard.\u0275fac,providedIn:"root"});class item_page_bitstreams_guard_ItemPageBitstreamsGuard extends dso_page_single_feature_guard.a{constructor(resolver,authorizationService,router,authService){super(resolver,authorizationService,router,authService),this.resolver=resolver,this.authorizationService=authorizationService,this.router=router,this.authService=authService}getFeatureID(next,state){return Object(of.a)(feature_id.a.CanManageBitstreamBundles)}}item_page_bitstreams_guard_ItemPageBitstreamsGuard.\u0275fac=function ItemPageBitstreamsGuard_Factory(t){return new(t||item_page_bitstreams_guard_ItemPageBitstreamsGuard)(core["\u0275\u0275inject"](item_page_resolver.a),core["\u0275\u0275inject"](authorization_data_service.a),core["\u0275\u0275inject"](fesm2015_router.g),core["\u0275\u0275inject"](auth_service.a))},item_page_bitstreams_guard_ItemPageBitstreamsGuard.\u0275prov=core["\u0275\u0275defineInjectable"]({token:item_page_bitstreams_guard_ItemPageBitstreamsGuard,factory:item_page_bitstreams_guard_ItemPageBitstreamsGuard.\u0275fac,providedIn:"root"});class item_page_relationships_guard_ItemPageRelationshipsGuard extends dso_page_single_feature_guard.a{constructor(resolver,authorizationService,router,authService){super(resolver,authorizationService,router,authService),this.resolver=resolver,this.authorizationService=authorizationService,this.router=router,this.authService=authService}getFeatureID(next,state){return Object(of.a)(feature_id.a.CanManageRelationships)}}item_page_relationships_guard_ItemPageRelationshipsGuard.\u0275fac=function ItemPageRelationshipsGuard_Factory(t){return new(t||item_page_relationships_guard_ItemPageRelationshipsGuard)(core["\u0275\u0275inject"](item_page_resolver.a),core["\u0275\u0275inject"](authorization_data_service.a),core["\u0275\u0275inject"](fesm2015_router.g),core["\u0275\u0275inject"](auth_service.a))},item_page_relationships_guard_ItemPageRelationshipsGuard.\u0275prov=core["\u0275\u0275defineInjectable"]({token:item_page_relationships_guard_ItemPageRelationshipsGuard,factory:item_page_relationships_guard_ItemPageRelationshipsGuard.\u0275fac,providedIn:"root"});class item_page_version_history_guard_ItemPageVersionHistoryGuard extends dso_page_single_feature_guard.a{constructor(resolver,authorizationService,router,authService){super(resolver,authorizationService,router,authService),this.resolver=resolver,this.authorizationService=authorizationService,this.router=router,this.authService=authService}getFeatureID(next,state){return Object(of.a)(feature_id.a.CanManageVersions)}}item_page_version_history_guard_ItemPageVersionHistoryGuard.\u0275fac=function ItemPageVersionHistoryGuard_Factory(t){return new(t||item_page_version_history_guard_ItemPageVersionHistoryGuard)(core["\u0275\u0275inject"](item_page_resolver.a),core["\u0275\u0275inject"](authorization_data_service.a),core["\u0275\u0275inject"](fesm2015_router.g),core["\u0275\u0275inject"](auth_service.a))},item_page_version_history_guard_ItemPageVersionHistoryGuard.\u0275prov=core["\u0275\u0275defineInjectable"]({token:item_page_version_history_guard_ItemPageVersionHistoryGuard,factory:item_page_version_history_guard_ItemPageVersionHistoryGuard.\u0275fac,providedIn:"root"});class item_page_collection_mapper_guard_ItemPageCollectionMapperGuard extends dso_page_single_feature_guard.a{constructor(resolver,authorizationService,router,authService){super(resolver,authorizationService,router,authService),this.resolver=resolver,this.authorizationService=authorizationService,this.router=router,this.authService=authService}getFeatureID(next,state){return Object(of.a)(feature_id.a.CanManageMappings)}}item_page_collection_mapper_guard_ItemPageCollectionMapperGuard.\u0275fac=function ItemPageCollectionMapperGuard_Factory(t){return new(t||item_page_collection_mapper_guard_ItemPageCollectionMapperGuard)(core["\u0275\u0275inject"](item_page_resolver.a),core["\u0275\u0275inject"](authorization_data_service.a),core["\u0275\u0275inject"](fesm2015_router.g),core["\u0275\u0275inject"](auth_service.a))},item_page_collection_mapper_guard_ItemPageCollectionMapperGuard.\u0275prov=core["\u0275\u0275defineInjectable"]({token:item_page_collection_mapper_guard_ItemPageCollectionMapperGuard,factory:item_page_collection_mapper_guard_ItemPageCollectionMapperGuard.\u0275fac,providedIn:"root"});class EditItemPageRoutingModule{}EditItemPageRoutingModule.\u0275fac=function EditItemPageRoutingModule_Factory(t){return new(t||EditItemPageRoutingModule)},EditItemPageRoutingModule.\u0275mod=core["\u0275\u0275defineNgModule"]({type:EditItemPageRoutingModule}),EditItemPageRoutingModule.\u0275inj=core["\u0275\u0275defineInjector"]({providers:[i18n_breadcrumb_resolver.a,i18n_breadcrumbs_service.a,resource_policy_resolver.a,resource_policy_target_resolver.a,item_page_reinstate_guard_ItemPageReinstateGuard,item_page_withdraw_guard_ItemPageWithdrawGuard,item_page_administrator_guard.a,item_page_metadata_guard_ItemPageMetadataGuard,item_page_status_guard_ItemPageStatusGuard,item_page_bitstreams_guard_ItemPageBitstreamsGuard,item_page_relationships_guard_ItemPageRelationshipsGuard,item_page_version_history_guard_ItemPageVersionHistoryGuard,item_page_collection_mapper_guard_ItemPageCollectionMapperGuard],imports:[[fesm2015_router.k.forChild([{path:"",resolve:{breadcrumb:i18n_breadcrumb_resolver.a},data:{breadcrumbKey:"item.edit"},children:[{path:"",component:edit_item_page_component_EditItemPageComponent,children:[{path:"",redirectTo:"status",pathMatch:"full"},{path:"status",component:item_status_component_ItemStatusComponent,data:{title:"item.edit.tabs.status.title",showBreadcrumbs:!0},canActivate:[item_page_status_guard_ItemPageStatusGuard]},{path:"bitstreams",component:item_bitstreams_component_ItemBitstreamsComponent,data:{title:"item.edit.tabs.bitstreams.title",showBreadcrumbs:!0},canActivate:[item_page_bitstreams_guard_ItemPageBitstreamsGuard]},{path:"metadata",component:item_metadata_component.a,data:{title:"item.edit.tabs.metadata.title",showBreadcrumbs:!0},canActivate:[item_page_metadata_guard_ItemPageMetadataGuard]},{path:"relationships",component:item_relationships_component_ItemRelationshipsComponent,data:{title:"item.edit.tabs.relationships.title",showBreadcrumbs:!0},canActivate:[item_page_relationships_guard_ItemPageRelationshipsGuard]},{path:"versionhistory",component:item_version_history_component_ItemVersionHistoryComponent,data:{title:"item.edit.tabs.versionhistory.title",showBreadcrumbs:!0},canActivate:[item_page_version_history_guard_ItemPageVersionHistoryGuard]},{path:"mapper",component:item_collection_mapper_component_ItemCollectionMapperComponent,data:{title:"item.edit.tabs.item-mapper.title",showBreadcrumbs:!0},canActivate:[item_page_collection_mapper_guard_ItemPageCollectionMapperGuard]}]},{path:"mapper",component:item_collection_mapper_component_ItemCollectionMapperComponent},{path:edit_item_page_routing_paths.g,component:item_withdraw_component_ItemWithdrawComponent,canActivate:[item_page_withdraw_guard_ItemPageWithdrawGuard]},{path:edit_item_page_routing_paths.f,component:item_reinstate_component_ItemReinstateComponent,canActivate:[item_page_reinstate_guard_ItemPageReinstateGuard]},{path:edit_item_page_routing_paths.d,component:item_private_component_ItemPrivateComponent},{path:edit_item_page_routing_paths.e,component:item_public_component_ItemPublicComponent},{path:edit_item_page_routing_paths.b,component:item_delete_component_ItemDeleteComponent},{path:edit_item_page_routing_paths.c,component:item_move_component_ItemMoveComponent,data:{title:"item.edit.move.title"}},{path:edit_item_page_routing_paths.a,children:[{path:"create",resolve:{resourcePolicyTarget:resource_policy_target_resolver.a},component:resource_policy_create_component.a,data:{title:"resource-policies.create.page.title"}},{path:"edit",resolve:{resourcePolicy:resource_policy_resolver.a},component:resource_policy_edit_component.a,data:{title:"resource-policies.edit.page.title"}},{path:"",component:item_authorizations_component_ItemAuthorizationsComponent,data:{title:"item.edit.authorizations.title"}}]}]}])]]});__webpack_require__("mo41");var search_page_module=__webpack_require__("iprd"),resource_policies_module=__webpack_require__("GFj5");class EditItemPageModule{}EditItemPageModule.\u0275fac=function EditItemPageModule_Factory(t){return new(t||EditItemPageModule)},EditItemPageModule.\u0275mod=core["\u0275\u0275defineNgModule"]({type:EditItemPageModule}),EditItemPageModule.\u0275inj=core["\u0275\u0275defineInjector"]({providers:[bundle_data_service.a,object_values_pipe.a],imports:[[common.CommonModule,shared_module.a,ng_bootstrap.P,EditItemPageRoutingModule,search_page_module.a,drag_drop.d,resource_policies_module.a]]})},EEUA:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ResourcePolicyCreateComponent}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),rxjs__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("2Vo4"),rxjs_operators__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("lJxs"),rxjs_operators__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("IzEk"),_core_resource_policy_resource_policy_service__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("8a3C"),_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("lI3o"),_core_breadcrumbs_dso_name_service__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("C765"),_item_page_edit_item_page_edit_item_page_routing_paths__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("jrTz"),_core_shared_operators__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("1QIV"),_angular_router__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("tyNb"),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("sYmb"),_form_resource_policy_form_component__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("O/Ly");class ResourcePolicyCreateComponent{constructor(dsoNameService,notificationsService,resourcePolicyService,route,router,translate){this.dsoNameService=dsoNameService,this.notificationsService=notificationsService,this.resourcePolicyService=resourcePolicyService,this.route=route,this.router=router,this.translate=translate,this.processing$=new rxjs__WEBPACK_IMPORTED_MODULE_1__.a(!1)}ngOnInit(){this.route.data.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.a)((data=>data)),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.a)(1)).subscribe((data=>{this.targetResourceUUID=data.resourcePolicyTarget.payload.id,this.targetResourceName=this.dsoNameService.getName(data.resourcePolicyTarget.payload)}))}isProcessing(){return this.processing$.asObservable()}redirectToAuthorizationsPage(){this.router.navigate([`../../${_item_page_edit_item_page_edit_item_page_routing_paths__WEBPACK_IMPORTED_MODULE_7__.a}`],{relativeTo:this.route})}createResourcePolicy(event){let response$;this.processing$.next(!0),response$="eperson"===event.target.type?this.resourcePolicyService.create(event.object,this.targetResourceUUID,event.target.uuid):this.resourcePolicyService.create(event.object,this.targetResourceUUID,null,event.target.uuid),response$.pipe(Object(_core_shared_operators__WEBPACK_IMPORTED_MODULE_8__.g)()).subscribe((responseRD=>{this.processing$.next(!1),responseRD.hasSucceeded?(this.notificationsService.success(null,this.translate.get("resource-policies.create.page.success.content")),this.redirectToAuthorizationsPage()):this.notificationsService.error(null,this.translate.get("resource-policies.create.page.failure.content"))}))}}ResourcePolicyCreateComponent.\u0275fac=function ResourcePolicyCreateComponent_Factory(t){return new(t||ResourcePolicyCreateComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_core_breadcrumbs_dso_name_service__WEBPACK_IMPORTED_MODULE_6__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_5__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_core_resource_policy_resource_policy_service__WEBPACK_IMPORTED_MODULE_4__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_9__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_9__.g),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_ngx_translate_core__WEBPACK_IMPORTED_MODULE_10__.e))},ResourcePolicyCreateComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineComponent"]({type:ResourcePolicyCreateComponent,selectors:[["ds-resource-policy-create"]],decls:9,vars:5,consts:[[1,"container"],[1,"mb-3"],[3,"isProcessing","reset","submit"]],template:function ResourcePolicyCreateComponent_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div",0),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](2,"h4",1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](4,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](5,"\n\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](6,"ds-resource-policy-form",2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("reset",(function ResourcePolicyCreateComponent_Template_ds_resource_policy_form_reset_6_listener(){return ctx.redirectToAuthorizationsPage()}))("submit",(function ResourcePolicyCreateComponent_Template_ds_resource_policy_form_submit_6_listener($event){return ctx.createResourcePolicy($event)})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](7,"\n"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](8,"\n")),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate2"]("",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](4,3,"resource-policies.create.page.heading")," ",ctx.targetResourceName,""),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("isProcessing",ctx.isProcessing()))},directives:[_form_resource_policy_form_component__WEBPACK_IMPORTED_MODULE_11__.a],pipes:[_ngx_translate_core__WEBPACK_IMPORTED_MODULE_10__.d],encapsulation:2})},G5zm:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ResourcePolicyResolver}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),_empty_util__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("J3qs"),_core_resource_policy_resource_policy_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("8a3C"),_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("84Zn"),_core_shared_operators__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("1QIV"),_angular_router__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("tyNb");class ResourcePolicyResolver{constructor(resourcePolicyService,router){this.resourcePolicyService=resourcePolicyService,this.router=router}resolve(route,state){const policyId=route.queryParamMap.get("policyId");return Object(_empty_util__WEBPACK_IMPORTED_MODULE_1__.d)(policyId)&&this.router.navigateByUrl("/404",{skipLocationChange:!0}),this.resourcePolicyService.findById(policyId,!0,!1,Object(_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_3__.a)("eperson"),Object(_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_3__.a)("group")).pipe(Object(_core_shared_operators__WEBPACK_IMPORTED_MODULE_4__.g)())}}ResourcePolicyResolver.\u0275fac=function ResourcePolicyResolver_Factory(t){return new(t||ResourcePolicyResolver)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275inject"](_core_resource_policy_resource_policy_service__WEBPACK_IMPORTED_MODULE_2__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275inject"](_angular_router__WEBPACK_IMPORTED_MODULE_5__.g))},ResourcePolicyResolver.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineInjectable"]({token:ResourcePolicyResolver,factory:ResourcePolicyResolver.\u0275fac})},GCaJ:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return DSOBreadcrumbsService}));var _breadcrumbs_breadcrumb_breadcrumb_model__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("zr/d"),_dso_name_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("C765"),rxjs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("LRne"),_cache_builders_link_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("sfEo"),_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("84Zn"),rxjs_operators__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("cBqT"),rxjs_operators__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("eIep"),rxjs_operators__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("lJxs"),_shared_empty_util__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("J3qs"),_angular_core__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("fXoL"),_app_routing_paths__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("TVZh");class DSOBreadcrumbsService{constructor(linkService,dsoNameService){this.linkService=linkService,this.dsoNameService=dsoNameService}getBreadcrumbs(key,url){const label=this.dsoNameService.getName(key),crumb=new _breadcrumbs_breadcrumb_breadcrumb_model__WEBPACK_IMPORTED_MODULE_0__.a(label,url),propertyName=key.getParentLinkKey();return this.linkService.resolveLink(key,Object(_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_4__.a)(propertyName))[propertyName].pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.a)((parentRD=>parentRD.hasSucceeded||204===parentRD.statusCode)),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.a)((parentRD=>{if(Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_8__.b)(parentRD.payload)){const parent=parentRD.payload;return this.getBreadcrumbs(parent,Object(_app_routing_paths__WEBPACK_IMPORTED_MODULE_10__.r)(parent))}return Object(rxjs__WEBPACK_IMPORTED_MODULE_2__.a)([])})),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.a)((breadcrumbs=>[...breadcrumbs,crumb])))}}DSOBreadcrumbsService.\u0275fac=function DSOBreadcrumbsService_Factory(t){return new(t||DSOBreadcrumbsService)(_angular_core__WEBPACK_IMPORTED_MODULE_9__["\u0275\u0275inject"](_cache_builders_link_service__WEBPACK_IMPORTED_MODULE_3__.a),_angular_core__WEBPACK_IMPORTED_MODULE_9__["\u0275\u0275inject"](_dso_name_service__WEBPACK_IMPORTED_MODULE_1__.a))},DSOBreadcrumbsService.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_9__["\u0275\u0275defineInjectable"]({token:DSOBreadcrumbsService,factory:DSOBreadcrumbsService.\u0275fac,providedIn:"root"})},GFj5:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ResourcePoliciesModule}));var core=__webpack_require__("fXoL"),common=__webpack_require__("ofXK"),ngx_translate_core=__webpack_require__("sYmb"),resource_policies_component=__webpack_require__("+Bs4"),resource_policy_form_component=__webpack_require__("O/Ly"),resource_policy_edit_component=__webpack_require__("ALMP"),resource_policy_create_component=__webpack_require__("EEUA"),form_module=__webpack_require__("kcqd"),resource_policy_resolver=__webpack_require__("G5zm"),resource_policy_target_resolver=__webpack_require__("n1Qy"),eperson_group_list_component=__webpack_require__("539a"),fesm2015_forms=__webpack_require__("3Pt+");class group_search_box_component_GroupSearchBoxComponent{constructor(formBuilder){this.formBuilder=formBuilder,this.labelPrefix="admin.access-control.groups.",this.subs=[],this.search=new core.EventEmitter,this.searchForm=this.formBuilder.group({query:""})}reset(){this.searchForm=this.formBuilder.group({query:""})}submit(data){const event={scope:"",query:data.query};this.search.emit(event)}}group_search_box_component_GroupSearchBoxComponent.\u0275fac=function GroupSearchBoxComponent_Factory(t){return new(t||group_search_box_component_GroupSearchBoxComponent)(core["\u0275\u0275directiveInject"](fesm2015_forms.FormBuilder))},group_search_box_component_GroupSearchBoxComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:group_search_box_component_GroupSearchBoxComponent,selectors:[["ds-group-search-box"]],outputs:{search:"search"},decls:27,vars:7,consts:[[1,"d-flex","justify-content-between",3,"formGroup","ngSubmit"],[1,"flex-grow-1","mr-3"],[1,"form-group","input-group"],["type","text","name","query","id","query","formControlName","query","aria-label","Search input",1,"form-control"],[1,"input-group-append"],["type","submit",1,"search-button","btn","btn-primary"],[1,"fas","fa-search"],["type","button",1,"search-button","btn","btn-secondary",3,"click"]],template:function GroupSearchBoxComponent_Template(rf,ctx){1&rf&&(core["\u0275\u0275elementStart"](0,"form",0),core["\u0275\u0275listener"]("ngSubmit",(function GroupSearchBoxComponent_Template_form_ngSubmit_0_listener($event){return ctx.submit(ctx.searchForm.value),$event.stopImmediatePropagation()})),core["\u0275\u0275text"](1,"\n  "),core["\u0275\u0275elementStart"](2,"div",1),core["\u0275\u0275text"](3,"\n    "),core["\u0275\u0275elementStart"](4,"div",2),core["\u0275\u0275text"](5,"\n      "),core["\u0275\u0275element"](6,"input",3),core["\u0275\u0275text"](7,"\n      "),core["\u0275\u0275elementStart"](8,"span",4),core["\u0275\u0275text"](9,"\n        "),core["\u0275\u0275elementStart"](10,"button",5),core["\u0275\u0275text"](11,"\n          "),core["\u0275\u0275element"](12,"i",6),core["\u0275\u0275text"](13),core["\u0275\u0275pipe"](14,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](15,"\n      "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](16,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](17,"\n  "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](18,"\n  "),core["\u0275\u0275elementStart"](19,"div"),core["\u0275\u0275text"](20,"\n    "),core["\u0275\u0275elementStart"](21,"button",7),core["\u0275\u0275listener"]("click",(function GroupSearchBoxComponent_Template_button_click_21_listener(){return ctx.submit(null),ctx.reset()})),core["\u0275\u0275text"](22),core["\u0275\u0275pipe"](23,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](24,"\n  "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](25,"\n"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](26,"\n")),2&rf&&(core["\u0275\u0275property"]("formGroup",ctx.searchForm),core["\u0275\u0275advance"](13),core["\u0275\u0275textInterpolate1"](" ",core["\u0275\u0275pipeBind1"](14,3,ctx.labelPrefix+"search.button"),"\n        "),core["\u0275\u0275advance"](9),core["\u0275\u0275textInterpolate1"]("\n      ",core["\u0275\u0275pipeBind1"](23,5,ctx.labelPrefix+"button.see-all"),"\n    "))},directives:[fesm2015_forms["\u0275angular_packages_forms_forms_ba"],fesm2015_forms.NgControlStatusGroup,fesm2015_forms.FormGroupDirective,fesm2015_forms.DefaultValueAccessor,fesm2015_forms.NgControlStatus,fesm2015_forms.FormControlName],pipes:[ngx_translate_core.d],encapsulation:2});var empty_util=__webpack_require__("J3qs");class eperson_search_box_component_EpersonSearchBoxComponent{constructor(formBuilder){this.formBuilder=formBuilder,this.labelPrefix="admin.access-control.epeople.",this.subs=[],this.search=new core.EventEmitter,this.searchForm=this.formBuilder.group({scope:"metadata",query:""})}reset(){this.searchForm=this.formBuilder.group({scope:"metadata",query:""})}submit(data){const event={scope:Object(empty_util.g)(data)?data.scope:"metadata",query:Object(empty_util.g)(data)?data.query:""};this.search.emit(event)}}eperson_search_box_component_EpersonSearchBoxComponent.\u0275fac=function EpersonSearchBoxComponent_Factory(t){return new(t||eperson_search_box_component_EpersonSearchBoxComponent)(core["\u0275\u0275directiveInject"](fesm2015_forms.FormBuilder))},eperson_search_box_component_EpersonSearchBoxComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:eperson_search_box_component_EpersonSearchBoxComponent,selectors:[["ds-eperson-search-box"]],outputs:{search:"search"},decls:41,vars:13,consts:[[1,"d-flex","justify-content-between",3,"formGroup","ngSubmit"],["name","scope","id","scope","formControlName","scope","aria-label","Search scope",1,"form-control"],["value","metadata"],["value","email"],[1,"flex-grow-1","mr-3","ml-3"],[1,"form-group","input-group"],["type","text","name","query","id","query","formControlName","query","aria-label","Search input",1,"form-control"],[1,"input-group-append"],["type","submit",1,"search-button","btn","btn-primary"],[1,"fas","fa-search"],["type","button",1,"search-button","btn","btn-secondary",3,"click"]],template:function EpersonSearchBoxComponent_Template(rf,ctx){1&rf&&(core["\u0275\u0275elementStart"](0,"form",0),core["\u0275\u0275listener"]("ngSubmit",(function EpersonSearchBoxComponent_Template_form_ngSubmit_0_listener($event){return ctx.submit(ctx.searchForm.value),$event.stopImmediatePropagation()})),core["\u0275\u0275text"](1,"\n  "),core["\u0275\u0275elementStart"](2,"div"),core["\u0275\u0275text"](3,"\n    "),core["\u0275\u0275elementStart"](4,"select",1),core["\u0275\u0275text"](5,"\n      "),core["\u0275\u0275elementStart"](6,"option",2),core["\u0275\u0275text"](7),core["\u0275\u0275pipe"](8,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](9,"\n      "),core["\u0275\u0275elementStart"](10,"option",3),core["\u0275\u0275text"](11),core["\u0275\u0275pipe"](12,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](13,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](14,"\n  "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](15,"\n  "),core["\u0275\u0275elementStart"](16,"div",4),core["\u0275\u0275text"](17,"\n    "),core["\u0275\u0275elementStart"](18,"div",5),core["\u0275\u0275text"](19,"\n      "),core["\u0275\u0275element"](20,"input",6),core["\u0275\u0275text"](21,"\n      "),core["\u0275\u0275elementStart"](22,"span",7),core["\u0275\u0275text"](23,"\n        "),core["\u0275\u0275elementStart"](24,"button",8),core["\u0275\u0275text"](25,"\n          "),core["\u0275\u0275element"](26,"i",9),core["\u0275\u0275text"](27),core["\u0275\u0275pipe"](28,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](29,"\n      "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](30,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](31,"\n  "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](32,"\n  "),core["\u0275\u0275elementStart"](33,"div"),core["\u0275\u0275text"](34,"\n    "),core["\u0275\u0275elementStart"](35,"button",10),core["\u0275\u0275listener"]("click",(function EpersonSearchBoxComponent_Template_button_click_35_listener(){return ctx.submit(null),ctx.reset()})),core["\u0275\u0275text"](36),core["\u0275\u0275pipe"](37,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](38,"\n  "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](39,"\n"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](40,"\n")),2&rf&&(core["\u0275\u0275property"]("formGroup",ctx.searchForm),core["\u0275\u0275advance"](7),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](8,5,ctx.labelPrefix+"search.scope.metadata")),core["\u0275\u0275advance"](4),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](12,7,ctx.labelPrefix+"search.scope.email")),core["\u0275\u0275advance"](16),core["\u0275\u0275textInterpolate1"](" ",core["\u0275\u0275pipeBind1"](28,9,ctx.labelPrefix+"search.button"),"\n        "),core["\u0275\u0275advance"](9),core["\u0275\u0275textInterpolate1"]("\n      ",core["\u0275\u0275pipeBind1"](37,11,ctx.labelPrefix+"button.see-all"),"\n    "))},directives:[fesm2015_forms["\u0275angular_packages_forms_forms_ba"],fesm2015_forms.NgControlStatusGroup,fesm2015_forms.FormGroupDirective,fesm2015_forms.SelectControlValueAccessor,fesm2015_forms.NgControlStatus,fesm2015_forms.FormControlName,fesm2015_forms.NgSelectOption,fesm2015_forms["\u0275angular_packages_forms_forms_z"],fesm2015_forms.DefaultValueAccessor],pipes:[ngx_translate_core.d],encapsulation:2});var ng_bootstrap=__webpack_require__("1kSV"),shared_module=__webpack_require__("PCNd"),pagination_component=__webpack_require__("Exvd");resource_policies_component.a,resource_policy_form_component.a,resource_policy_edit_component.a,resource_policy_create_component.a,eperson_group_list_component.a;const PROVIDERS=[resource_policy_resolver.a,resource_policy_target_resolver.a];class ResourcePoliciesModule{}ResourcePoliciesModule.\u0275fac=function ResourcePoliciesModule_Factory(t){return new(t||ResourcePoliciesModule)},ResourcePoliciesModule.\u0275mod=core["\u0275\u0275defineNgModule"]({type:ResourcePoliciesModule}),ResourcePoliciesModule.\u0275inj=core["\u0275\u0275defineInjector"]({providers:[...PROVIDERS],imports:[[ng_bootstrap.s,common.CommonModule,form_module.a,ngx_translate_core.c,shared_module.a]]}),core["\u0275\u0275setComponentScope"](eperson_group_list_component.a,[common.NgIf,eperson_search_box_component_EpersonSearchBoxComponent,group_search_box_component_GroupSearchBoxComponent,pagination_component.a,common.NgForOf],[common.AsyncPipe,ngx_translate_core.d])},GsQf:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return AbstractItemUpdateComponent}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),rxjs__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("itXk"),_core_data_item_data_service__WEBPACK_IMPORTED_MODULE_3__=(__webpack_require__("PN+Z"),__webpack_require__("iqTE")),_core_data_object_updates_object_updates_service__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("loKC"),_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("lI3o"),rxjs_operators__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("lJxs"),rxjs_operators__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("vkgz"),rxjs_operators__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("eIep"),rxjs_operators__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("SxV6"),_shared_trackable_abstract_trackable_component__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("daFX"),_environments_environment__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("AytR"),_item_page_routing_paths__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("Xioo"),_core_shared_operators__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("1QIV"),_shared_empty_util__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("J3qs"),_item_resolver__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("kGaT"),_angular_router__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("tyNb"),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("sYmb");class AbstractItemUpdateComponent extends _shared_trackable_abstract_trackable_component__WEBPACK_IMPORTED_MODULE_10__.a{constructor(itemService,objectUpdatesService,router,notificationsService,translateService,route){super(objectUpdatesService,notificationsService,translateService),this.itemService=itemService,this.objectUpdatesService=objectUpdatesService,this.router=router,this.notificationsService=notificationsService,this.translateService=translateService,this.route=route}ngOnInit(){Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_14__.b)(this.item)?this.setItem(this.item):this.itemUpdateSubscription=Object(rxjs__WEBPACK_IMPORTED_MODULE_1__.a)([this.route.data,this.route.parent.data]).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.a)((([data,parentData])=>Object.assign({},data,parentData))),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.a)((data=>data.dso)),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.a)((rd=>{this.item=rd.payload})),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.a)((rd=>this.itemService.findByHref(rd.payload._links.self.href,!0,!0,..._item_resolver__WEBPACK_IMPORTED_MODULE_15__.a))),Object(_core_shared_operators__WEBPACK_IMPORTED_MODULE_13__.c)()).subscribe((rd=>{this.setItem(rd.payload)})),this.discardTimeOut=_environments_environment__WEBPACK_IMPORTED_MODULE_11__.a.item.edit.undoTimeout,this.url=this.router.url,this.url.indexOf("?")>0&&(this.url=this.url.substr(0,this.url.indexOf("?"))),this.hasChanges().pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.a)()).subscribe((hasChanges=>{hasChanges?this.checkLastModified():this.initializeOriginalFields()})),this.initializeNotificationsPrefix(),this.initializeUpdates()}setItem(item){this.item=item,this.itemPageRoute=Object(_item_page_routing_paths__WEBPACK_IMPORTED_MODULE_12__.h)(this.item),this.postItemInit(),this.initializeUpdates()}ngOnDestroy(){Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_14__.b)(this.itemUpdateSubscription)&&this.itemUpdateSubscription.unsubscribe()}postItemInit(){}initializeUpdates(){}initializeNotificationsPrefix(){}initializeOriginalFields(){}submit(){}trackUpdate(index,update){return update&&update.field?update.field.uuid:void 0}isValid(){return this.objectUpdatesService.isValidPage(this.url)}checkLastModified(){const currentVersion=this.item.lastModified;this.objectUpdatesService.getLastModified(this.url).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.a)()).subscribe((updateVersion=>{updateVersion.getDate()!==currentVersion.getDate()&&(this.notificationsService.warning(this.getNotificationTitle("outdated"),this.getNotificationContent("outdated")),this.initializeOriginalFields())}))}}AbstractItemUpdateComponent.\u0275fac=function AbstractItemUpdateComponent_Factory(t){return new(t||AbstractItemUpdateComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_core_data_item_data_service__WEBPACK_IMPORTED_MODULE_3__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_core_data_object_updates_object_updates_service__WEBPACK_IMPORTED_MODULE_4__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_16__.g),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_5__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_ngx_translate_core__WEBPACK_IMPORTED_MODULE_17__.e),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_16__.a))},AbstractItemUpdateComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineComponent"]({type:AbstractItemUpdateComponent,selectors:[["ds-abstract-item-update"]],inputs:{item:"item"},features:[_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275InheritDefinitionFeature"]],decls:0,vars:0,template:function AbstractItemUpdateComponent_Template(rf,ctx){},encapsulation:2})},H2rt:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"CollectionPageComponent",(function(){return CollectionPageComponent}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),rxjs__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("2Vo4"),rxjs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("itXk"),rxjs_operators__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("lJxs"),rxjs_operators__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("IzEk"),rxjs_operators__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("pLZG"),rxjs_operators__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("5+tZ"),rxjs_operators__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("eIep"),rxjs_operators__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("JX91"),_shared_search_models_paginated_search_options_model__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("R7cy"),_core_shared_search_search_service__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("gWc+"),_core_cache_models_sort_options_model__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("qc8P"),_core_data_collection_data_service__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("DNva"),_core_shared_dspace_object_type_model__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("QhmN"),_core_shared_operators__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("1QIV"),_shared_animations_fade__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("mEo1"),_shared_empty_util__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("J3qs"),_shared_pagination_pagination_component_options_model__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("7DXY"),_core_auth_auth_service__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("Vurf"),_core_pagination_pagination_service__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("MFUF"),_core_data_feature_authorization_authorization_data_service__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("1mcE"),_core_data_feature_authorization_feature_id__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("FU+A"),_collection_page_routing_paths__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__("Obj/"),_angular_router__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__("tyNb"),_shared_utils_var_directive__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__("O/5o"),_angular_common__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__("ofXK"),_statistics_angulartics_dspace_view_tracker_component__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__("mXNY"),_shared_comcol_comcol_page_header_comcol_page_header_component__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__("yj7I"),_shared_comcol_comcol_page_handle_comcol_page_handle_component__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__("0qNx"),_shared_comcol_comcol_page_content_comcol_page_content_component__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__("/I7b"),_shared_comcol_comcol_page_browse_by_comcol_page_browse_by_component__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__("RD8h"),_shared_comcol_comcol_page_logo_comcol_page_logo_component__WEBPACK_IMPORTED_MODULE_31__=__webpack_require__("ivcV"),_shared_dso_page_dso_page_edit_button_dso_page_edit_button_component__WEBPACK_IMPORTED_MODULE_32__=__webpack_require__("uVW2"),_shared_object_collection_object_collection_component__WEBPACK_IMPORTED_MODULE_33__=__webpack_require__("jLV+"),_shared_error_error_component__WEBPACK_IMPORTED_MODULE_34__=__webpack_require__("HZwm"),_shared_loading_loading_component__WEBPACK_IMPORTED_MODULE_35__=__webpack_require__("Frqi"),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_36__=__webpack_require__("sYmb");function CollectionPageComponent_div_2_div_2_div_2_ds_comcol_page_logo_13_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"ds-comcol-page-logo",19),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](1,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](2,"\n                  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()),2&rf){const ctx_r7=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"](4);let tmp_0_0=null;_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("logo",null==(tmp_0_0=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](1,3,ctx_r7.logoRD$))?null:tmp_0_0.payload)("alternateText","Collection Logo")("alternateText","Collection Logo")}}function CollectionPageComponent_div_2_div_2_div_2_ds_dso_page_edit_button_30_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](0,"ds-dso-page-edit-button",20),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](1,"async")),2&rf){const collection_r6=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]().ngIf,ctx_r8=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"](3);_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("pageRoute",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](1,3,ctx_r8.collectionPageRoute$))("dso",collection_r6)("tooltipMsg","collection.page.edit")}}function CollectionPageComponent_div_2_div_2_div_2_ng_container_41_div_2_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div",23),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n                    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](2,"h3",24),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](4,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](5,"\n                    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](6,"ds-viewable-collection",25),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](7,"\n                    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](8,"\n                "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()),2&rf){const itemRD_r12=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]().ngVar,ctx_r13=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"](4);_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("@fadeIn",void 0),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](4,6,"collection.page.browse.recent.head")),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("config",ctx_r13.paginationConfig)("sortConfig",ctx_r13.sortConfig)("objects",itemRD_r12)("hideGear",!0)}}function CollectionPageComponent_div_2_div_2_div_2_ng_container_41_ds_error_4_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](0,"ds-error",26),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](1,"translate")),2&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275propertyInterpolate"]("message",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](1,1,"error.recent-submissions"))}function CollectionPageComponent_div_2_div_2_div_2_ng_container_41_ds_loading_6_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](0,"ds-loading",26),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](1,"translate")),2&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275propertyInterpolate"]("message",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](1,1,"loading.recent-submissions"))}function CollectionPageComponent_div_2_div_2_div_2_ng_container_41_div_8_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div",27),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](2,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate1"]("\n                        ",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](2,1,"collection.page.browse.recent.empty"),"\n                "))}function CollectionPageComponent_div_2_div_2_div_2_ng_container_41_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementContainerStart"](0),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n                "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](2,CollectionPageComponent_div_2_div_2_div_2_ng_container_41_div_2_Template,9,8,"div",21),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3,"\n                "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](4,CollectionPageComponent_div_2_div_2_div_2_ng_container_41_ds_error_4_Template,2,3,"ds-error",4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](5,"\n                "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](6,CollectionPageComponent_div_2_div_2_div_2_ng_container_41_ds_loading_6_Template,2,3,"ds-loading",4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](7,"\n                "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](8,CollectionPageComponent_div_2_div_2_div_2_ng_container_41_div_8_Template,3,3,"div",22),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](9,"\n            "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementContainerEnd"]()),2&rf){const itemRD_r12=ctx.ngVar;_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",null==itemRD_r12?null:itemRD_r12.hasSucceeded),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",null==itemRD_r12?null:itemRD_r12.hasFailed),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",!itemRD_r12||itemRD_r12.isLoading),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",!(null!=itemRD_r12&&itemRD_r12.isLoading)&&0===(null==itemRD_r12||null==itemRD_r12.payload?null:itemRD_r12.payload.page.length))}}function CollectionPageComponent_div_2_div_2_div_2_footer_45_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"footer",28),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n          "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](2,"\n          "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](3,"ds-comcol-page-content",11),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](4,"\n          "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](5,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()),2&rf){const collection_r6=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]().ngIf;_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("content",collection_r6.copyrightText)("hasInnerHtml",!0)}}function CollectionPageComponent_div_2_div_2_div_2_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n              "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](2,"ds-view-tracker",5),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3,"\n              "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](4,"div",6),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](5,"\n                "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](6,"header",7),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](7,"\n                  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](8,"\n                  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](9,"ds-comcol-page-header",8),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](10,"\n                  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](11,"\n                  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](12,"\n                  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](13,CollectionPageComponent_div_2_div_2_div_2_ds_comcol_page_logo_13_Template,3,5,"ds-comcol-page-logo",9),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](14,"\n\n                  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](15,"\n                  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](16,"ds-comcol-page-handle",10),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](17,"\n                  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](18,"\n                  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](19,"\n                  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](20,"ds-comcol-page-content",11),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](21,"\n                  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](22,"\n                  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](23,"\n                  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](24,"ds-comcol-page-content",12),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](25,"\n                  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](26,"\n                "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](27,"\n                "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](28,"div",13),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](29,"\n                  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](30,CollectionPageComponent_div_2_div_2_div_2_ds_dso_page_edit_button_30_Template,2,5,"ds-dso-page-edit-button",14),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](31,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](32,"\n                "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](33,"\n              "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](34,"\n              "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](35,"section",15),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](36,"\n              "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](37,"\n              "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](38,"ds-comcol-page-browse-by",16),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](39,"\n              "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](40,"\n\n            "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](41,CollectionPageComponent_div_2_div_2_div_2_ng_container_41_Template,10,4,"ng-container",17),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](42,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](43,"\n            "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](44,"\n            "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](45,CollectionPageComponent_div_2_div_2_div_2_footer_45_Template,6,2,"footer",18),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](46,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()),2&rf){const collection_r6=ctx.ngIf,ctx_r5=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"](3);_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("object",collection_r6),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](7),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("name",collection_r6.name),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",ctx_r5.logoRD$),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("content",collection_r6.handle)("title","collection.page.handle"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("content",collection_r6.introductoryText)("hasInnerHtml",!0),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("content",collection_r6.sidebarText)("hasInnerHtml",!0)("title","collection.page.news"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](6),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](31,15,ctx_r5.isCollectionAdmin$)),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](8),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("id",collection_r6.id)("contentType",collection_r6.type),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngVar",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](42,17,ctx_r5.itemRD$)),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",collection_r6.copyrightText)}}function CollectionPageComponent_div_2_div_2_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n            "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](2,CollectionPageComponent_div_2_div_2_div_2_Template,47,19,"div",3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()),2&rf){const collectionRD_r1=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]().ngVar;_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("@fadeInOut",void 0),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",null==collectionRD_r1?null:collectionRD_r1.payload)}}function CollectionPageComponent_div_2_ds_error_4_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](0,"ds-error",26),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](1,"translate")),2&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275propertyInterpolate"]("message",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](1,1,"error.collection"))}function CollectionPageComponent_div_2_ds_loading_6_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](0,"ds-loading",26),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](1,"translate")),2&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275propertyInterpolate"]("message",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](1,1,"loading.collection"))}function CollectionPageComponent_div_2_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div",2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](2,CollectionPageComponent_div_2_div_2_Template,4,2,"div",3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](4,CollectionPageComponent_div_2_ds_error_4_Template,2,3,"ds-error",4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](5,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](6,CollectionPageComponent_div_2_ds_loading_6_Template,2,3,"ds-loading",4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](7,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()),2&rf){const collectionRD_r1=ctx.ngVar;_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",null==collectionRD_r1?null:collectionRD_r1.hasSucceeded),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",null==collectionRD_r1?null:collectionRD_r1.hasFailed),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",null==collectionRD_r1?null:collectionRD_r1.isLoading)}}class CollectionPageComponent{constructor(collectionDataService,searchService,route,router,authService,paginationService,authorizationDataService){this.collectionDataService=collectionDataService,this.searchService=searchService,this.route=route,this.router=router,this.authService=authService,this.paginationService=paginationService,this.authorizationDataService=authorizationDataService,this.paginationConfig=new _shared_pagination_pagination_component_options_model__WEBPACK_IMPORTED_MODULE_17__.a,this.paginationConfig.id="cp",this.paginationConfig.pageSize=5,this.paginationConfig.currentPage=1,this.sortConfig=new _core_cache_models_sort_options_model__WEBPACK_IMPORTED_MODULE_11__.b("dc.date.accessioned",_core_cache_models_sort_options_model__WEBPACK_IMPORTED_MODULE_11__.a.DESC)}ngOnInit(){this.collectionRD$=this.route.data.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.a)((data=>data.dso)),Object(_core_shared_operators__WEBPACK_IMPORTED_MODULE_14__.t)(this.router,this.authService),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.a)(1)),this.logoRD$=this.collectionRD$.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.a)((rd=>rd.payload)),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.a)((collection=>Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_16__.b)(collection))),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.a)((collection=>collection.logo))),this.isCollectionAdmin$=this.authorizationDataService.isAuthorized(_core_data_feature_authorization_feature_id__WEBPACK_IMPORTED_MODULE_21__.a.IsCollectionAdmin),this.paginationChanges$=new rxjs__WEBPACK_IMPORTED_MODULE_1__.a({paginationConfig:this.paginationConfig,sortConfig:this.sortConfig});const currentPagination$=this.paginationService.getCurrentPagination(this.paginationConfig.id,this.paginationConfig),currentSort$=this.paginationService.getCurrentSort(this.paginationConfig.id,this.sortConfig);this.itemRD$=Object(rxjs__WEBPACK_IMPORTED_MODULE_2__.a)([currentPagination$,currentSort$]).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.a)((([currentPagination,currentSort])=>this.collectionRD$.pipe(Object(_core_shared_operators__WEBPACK_IMPORTED_MODULE_14__.i)(),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.a)((rd=>rd.payload.id)),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.a)((id=>this.searchService.search(new _shared_search_models_paginated_search_options_model__WEBPACK_IMPORTED_MODULE_9__.a({scope:id,pagination:currentPagination,sort:currentSort,dsoTypes:[_core_shared_dspace_object_type_model__WEBPACK_IMPORTED_MODULE_13__.a.ITEM]})).pipe(Object(_core_shared_operators__WEBPACK_IMPORTED_MODULE_14__.y)()))),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.a)(void 0))))),this.collectionPageRoute$=this.collectionRD$.pipe(Object(_core_shared_operators__WEBPACK_IMPORTED_MODULE_14__.d)(),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.a)((collection=>Object(_collection_page_routing_paths__WEBPACK_IMPORTED_MODULE_22__.j)(collection.id))))}isNotEmpty(object){return Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_16__.e)(object)}ngOnDestroy(){this.paginationService.clearPagination(this.paginationConfig.id)}}CollectionPageComponent.\u0275fac=function CollectionPageComponent_Factory(t){return new(t||CollectionPageComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_core_data_collection_data_service__WEBPACK_IMPORTED_MODULE_12__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_core_shared_search_search_service__WEBPACK_IMPORTED_MODULE_10__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_23__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_23__.g),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_core_auth_auth_service__WEBPACK_IMPORTED_MODULE_18__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_core_pagination_pagination_service__WEBPACK_IMPORTED_MODULE_19__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_core_data_feature_authorization_authorization_data_service__WEBPACK_IMPORTED_MODULE_20__.a))},CollectionPageComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineComponent"]({type:CollectionPageComponent,selectors:[["ds-collection-page"]],decls:6,vars:3,consts:[[1,"container"],["class","collection-page",4,"ngVar"],[1,"collection-page"],[4,"ngIf"],[3,"message",4,"ngIf"],[3,"object"],[1,"d-flex","flex-row","border-bottom","mb-4","pb-4"],[1,"comcol-header","mr-auto"],[3,"name"],[3,"logo","alternateText",4,"ngIf"],[3,"content","title"],[3,"content","hasInnerHtml"],[3,"content","hasInnerHtml","title"],[1,"pl-2"],[3,"pageRoute","dso","tooltipMsg",4,"ngIf"],[1,"comcol-page-browse-section"],[3,"id","contentType"],[4,"ngVar"],["class","border-top my-5 pt-4",4,"ngIf"],[3,"logo","alternateText"],[3,"pageRoute","dso","tooltipMsg"],["class","mt-4",4,"ngIf"],["class","alert alert-info w-100","role","alert",4,"ngIf"],[1,"mt-4"],[1,"sr-only"],[3,"config","sortConfig","objects","hideGear"],[3,"message"],["role","alert",1,"alert","alert-info","w-100"],[1,"border-top","my-5","pt-4"]],template:function CollectionPageComponent_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div",0),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](2,CollectionPageComponent_div_2_Template,8,3,"div",1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](3,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](4,"\n"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](5,"\n")),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngVar",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](3,1,ctx.collectionRD$)))},directives:[_shared_utils_var_directive__WEBPACK_IMPORTED_MODULE_24__.a,_angular_common__WEBPACK_IMPORTED_MODULE_25__.NgIf,_statistics_angulartics_dspace_view_tracker_component__WEBPACK_IMPORTED_MODULE_26__.a,_shared_comcol_comcol_page_header_comcol_page_header_component__WEBPACK_IMPORTED_MODULE_27__.a,_shared_comcol_comcol_page_handle_comcol_page_handle_component__WEBPACK_IMPORTED_MODULE_28__.a,_shared_comcol_comcol_page_content_comcol_page_content_component__WEBPACK_IMPORTED_MODULE_29__.a,_shared_comcol_comcol_page_browse_by_comcol_page_browse_by_component__WEBPACK_IMPORTED_MODULE_30__.a,_shared_comcol_comcol_page_logo_comcol_page_logo_component__WEBPACK_IMPORTED_MODULE_31__.a,_shared_dso_page_dso_page_edit_button_dso_page_edit_button_component__WEBPACK_IMPORTED_MODULE_32__.a,_shared_object_collection_object_collection_component__WEBPACK_IMPORTED_MODULE_33__.a,_shared_error_error_component__WEBPACK_IMPORTED_MODULE_34__.a,_shared_loading_loading_component__WEBPACK_IMPORTED_MODULE_35__.a],pipes:[_angular_common__WEBPACK_IMPORTED_MODULE_25__.AsyncPipe,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_36__.d],styles:[""],data:{animation:[_shared_animations_fade__WEBPACK_IMPORTED_MODULE_15__.a,_shared_animations_fade__WEBPACK_IMPORTED_MODULE_15__.c]},changeDetection:0})},HENg:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return DsoPageSomeFeatureGuard}));var _shared_operators__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("1QIV"),rxjs_operators__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("lJxs"),_shared_empty_util__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("J3qs"),_some_feature_authorization_guard__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("a8lL");class DsoPageSomeFeatureGuard extends _some_feature_authorization_guard__WEBPACK_IMPORTED_MODULE_3__.a{constructor(resolver,authorizationService,router,authService){super(authorizationService,router,authService),this.resolver=resolver,this.authorizationService=authorizationService,this.router=router,this.authService=authService}getObjectUrl(route,state){const routeWithObjectID=this.getRouteWithDSOId(route);return this.resolver.resolve(routeWithObjectID,state).pipe(Object(_shared_operators__WEBPACK_IMPORTED_MODULE_0__.d)(),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_1__.a)((dso=>dso.self)))}getRouteWithDSOId(route){let routeWithDSOId=route;for(;Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_2__.a)(routeWithDSOId.params.id)&&Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_2__.b)(routeWithDSOId.parent);)routeWithDSOId=routeWithDSOId.parent;return routeWithDSOId}}},"O/Ly":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return resource_policy_form_component_ResourcePolicyFormComponent}));var core=__webpack_require__("fXoL"),of=__webpack_require__("LRne"),BehaviorSubject=__webpack_require__("2Vo4"),combineLatest=__webpack_require__("itXk"),map=__webpack_require__("lJxs"),filter=__webpack_require__("pLZG"),take=__webpack_require__("IzEk"),fesm2015_core=__webpack_require__("e+Av"),resource_policy_model=__webpack_require__("szIk"),ds_dynamic_input_model=__webpack_require__("JGHn"),policy_type_model=__webpack_require__("199z"),action_type_model=__webpack_require__("+Rck");const policyTypeList=[{label:policy_type_model.a.TYPE_SUBMISSION,value:policy_type_model.a.TYPE_SUBMISSION},{label:policy_type_model.a.TYPE_WORKFLOW,value:policy_type_model.a.TYPE_WORKFLOW},{label:policy_type_model.a.TYPE_INHERITED,value:policy_type_model.a.TYPE_INHERITED},{label:policy_type_model.a.TYPE_CUSTOM,value:policy_type_model.a.TYPE_CUSTOM}],policyActionList=[{label:action_type_model.a.READ.toString(),value:action_type_model.a.READ},{label:action_type_model.a.WRITE.toString(),value:action_type_model.a.WRITE},{label:action_type_model.a.REMOVE.toString(),value:action_type_model.a.REMOVE},{label:action_type_model.a.ADMIN.toString(),value:action_type_model.a.ADMIN},{label:action_type_model.a.DELETE.toString(),value:action_type_model.a.DELETE},{label:action_type_model.a.WITHDRAWN_READ.toString(),value:action_type_model.a.WITHDRAWN_READ},{label:action_type_model.a.DEFAULT_BITSTREAM_READ.toString(),value:action_type_model.a.DEFAULT_BITSTREAM_READ},{label:action_type_model.a.DEFAULT_ITEM_READ.toString(),value:action_type_model.a.DEFAULT_ITEM_READ}],RESOURCE_POLICY_FORM_NAME_CONFIG={id:"name",label:"resource-policies.form.name.label",metadataFields:[],repeatable:!1,submissionId:"",hasSelectableMetadata:!1},RESOURCE_POLICY_FORM_DESCRIPTION_CONFIG={id:"description",label:"resource-policies.form.description.label",metadataFields:[],repeatable:!1,rows:10,submissionId:"",hasSelectableMetadata:!1},RESOURCE_POLICY_FORM_POLICY_TYPE_CONFIG={id:"policyType",label:"resource-policies.form.policy-type.label",options:policyTypeList,required:!0,validators:{required:null},errorMessages:{required:"resource-policies.form.policy-type.required"}},RESOURCE_POLICY_FORM_ACTION_TYPE_CONFIG={id:"action",label:"resource-policies.form.action-type.label",options:policyActionList,required:!0,validators:{required:null},errorMessages:{required:"resource-policies.form.action-type.required"}},RESOURCE_POLICY_FORM_DATE_GROUP_CONFIG={id:"date",group:[]},RESOURCE_POLICY_FORM_DATE_GROUP_LAYOUT={element:{control:"form-row"}},RESOURCE_POLICY_FORM_START_DATE_CONFIG={id:"start",label:"resource-policies.form.date.start.label",placeholder:"resource-policies.form.date.start.label",inline:!1,toggleIcon:"far fa-calendar-alt"},RESOURCE_POLICY_FORM_START_DATE_LAYOUT={element:{container:"p-0",label:"col-form-label"},grid:{host:"col-md-6"}},RESOURCE_POLICY_FORM_END_DATE_CONFIG={id:"end",label:"resource-policies.form.date.end.label",placeholder:"resource-policies.form.date.end.label",inline:!1,toggleIcon:"far fa-calendar-alt"},RESOURCE_POLICY_FORM_END_DATE_LAYOUT={element:{container:"p-0",label:"col-form-label"},grid:{host:"col-md-6"}};var ds_dynamic_textarea_model=__webpack_require__("c/qf"),dso_name_service=__webpack_require__("C765"),empty_util=__webpack_require__("J3qs"),form_service=__webpack_require__("NFsL"),resource_policy_resource_type=__webpack_require__("TLL5"),date_util=__webpack_require__("fM99"),eperson_data_service=__webpack_require__("wLgS"),group_data_service=__webpack_require__("YIpg"),operators=__webpack_require__("1QIV"),request_service=__webpack_require__("X/78"),common=__webpack_require__("ofXK"),form_component=__webpack_require__("hqmO"),ng_bootstrap=__webpack_require__("1kSV"),eperson_group_list_component=__webpack_require__("539a"),ngx_translate_core=__webpack_require__("sYmb");function ResourcePolicyFormComponent_ds_form_2_Template(rf,ctx){if(1&rf&&core["\u0275\u0275element"](0,"ds-form",9,10),2&rf){const ctx_r0=core["\u0275\u0275nextContext"]();core["\u0275\u0275property"]("formId",ctx_r0.formId)("formModel",ctx_r0.formModel)("displaySubmit",!1)("displayCancel",!1)}}function ResourcePolicyFormComponent_ng_container_13_ng_template_11_Template(rf,ctx){if(1&rf){const _r9=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275text"](0,"\n            "),core["\u0275\u0275elementStart"](1,"ds-eperson-group-list",17),core["\u0275\u0275listener"]("select",(function ResourcePolicyFormComponent_ng_container_13_ng_template_11_Template_ds_eperson_group_list_select_1_listener($event){core["\u0275\u0275restoreView"](_r9);return core["\u0275\u0275nextContext"](2).updateObjectSelected($event,!0)})),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](2,"\n          ")}}function ResourcePolicyFormComponent_ng_container_13_ng_template_20_Template(rf,ctx){if(1&rf){const _r11=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275text"](0,"\n            "),core["\u0275\u0275elementStart"](1,"ds-eperson-group-list",18),core["\u0275\u0275listener"]("select",(function ResourcePolicyFormComponent_ng_container_13_ng_template_20_Template_ds_eperson_group_list_select_1_listener($event){core["\u0275\u0275restoreView"](_r11);return core["\u0275\u0275nextContext"](2).updateObjectSelected($event,!1)})),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](2,"\n          ")}2&rf&&(core["\u0275\u0275advance"](1),core["\u0275\u0275property"]("isListOfEPerson",!1))}function ResourcePolicyFormComponent_ng_container_13_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementContainerStart"](0),core["\u0275\u0275text"](1,"\n      "),core["\u0275\u0275elementStart"](2,"ul",11,12),core["\u0275\u0275text"](4,"\n        "),core["\u0275\u0275elementStart"](5,"li",13),core["\u0275\u0275text"](6,"\n          "),core["\u0275\u0275elementStart"](7,"a",14),core["\u0275\u0275text"](8),core["\u0275\u0275pipe"](9,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](10,"\n          "),core["\u0275\u0275template"](11,ResourcePolicyFormComponent_ng_container_13_ng_template_11_Template,3,0,"ng-template",15),core["\u0275\u0275text"](12,"\n        "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](13,"\n        "),core["\u0275\u0275elementStart"](14,"li",13),core["\u0275\u0275text"](15,"\n          "),core["\u0275\u0275elementStart"](16,"a",14),core["\u0275\u0275text"](17),core["\u0275\u0275pipe"](18,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](19,"\n          "),core["\u0275\u0275template"](20,ResourcePolicyFormComponent_ng_container_13_ng_template_20_Template,3,1,"ng-template",15),core["\u0275\u0275text"](21,"\n        "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](22,"\n      "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](23,"\n      "),core["\u0275\u0275element"](24,"div",16),core["\u0275\u0275text"](25,"\n    "),core["\u0275\u0275elementContainerEnd"]()),2&rf){const _r5=core["\u0275\u0275reference"](3);core["\u0275\u0275advance"](8),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](9,3,"resource-policies.form.eperson-group-list.tab.eperson")),core["\u0275\u0275advance"](9),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](18,5,"resource-policies.form.eperson-group-list.tab.group")),core["\u0275\u0275advance"](7),core["\u0275\u0275property"]("ngbNavOutlet",_r5)}}function ResourcePolicyFormComponent_span_32_Template(rf,ctx){1&rf&&(core["\u0275\u0275elementStart"](0,"span"),core["\u0275\u0275text"](1,"\n                  "),core["\u0275\u0275element"](2,"i",19),core["\u0275\u0275text"](3),core["\u0275\u0275pipe"](4,"translate"),core["\u0275\u0275elementEnd"]()),2&rf&&(core["\u0275\u0275advance"](3),core["\u0275\u0275textInterpolate1"](" ",core["\u0275\u0275pipeBind1"](4,1,"submission.workflow.tasks.generic.processing"),"\n                "))}function ResourcePolicyFormComponent_span_35_Template(rf,ctx){1&rf&&(core["\u0275\u0275elementStart"](0,"span"),core["\u0275\u0275text"](1),core["\u0275\u0275pipe"](2,"translate"),core["\u0275\u0275elementEnd"]()),2&rf&&(core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate1"]("\n                  ",core["\u0275\u0275pipeBind1"](2,1,"form.submit"),"\n                "))}class resource_policy_form_component_ResourcePolicyFormComponent{constructor(dsoNameService,ePersonService,formService,groupService,requestService){this.dsoNameService=dsoNameService,this.ePersonService=ePersonService,this.formService=formService,this.groupService=groupService,this.requestService=requestService,this.isProcessing=Object(of.a)(!1),this.reset=new core.EventEmitter,this.submit=new core.EventEmitter,this.resourcePolicyTargetName$=new BehaviorSubject.a(""),this.subs=[]}ngOnInit(){if(this.isActive=!0,this.formId=this.formService.getUniqueId("resource-policy-form"),this.formModel=this.buildResourcePolicyForm(),!this.canSetGrant()){const epersonRD$=this.ePersonService.findByHref(this.resourcePolicy._links.eperson.href,!1).pipe(Object(operators.i)()),groupRD$=this.groupService.findByHref(this.resourcePolicy._links.group.href,!1).pipe(Object(operators.i)()),dsoRD$=Object(combineLatest.a)([epersonRD$,groupRD$]).pipe(Object(map.a)((rdArr=>rdArr.find((rd=>Object(empty_util.e)(rd.payload))))),Object(empty_util.c)());this.subs.push(dsoRD$.pipe(Object(filter.a)((()=>this.isActive))).subscribe((dsoRD=>{this.resourcePolicyGrant=dsoRD.payload,this.resourcePolicyTargetName$.next(this.getResourcePolicyTargetName())})))}}isFormValid(){return this.formService.isValid(this.formId).pipe(Object(map.a)((isValid=>isValid&&Object(empty_util.e)(this.resourcePolicyGrant))))}buildResourcePolicyForm(){const formModel=[],policyTypeConf=Object.assign({},RESOURCE_POLICY_FORM_POLICY_TYPE_CONFIG,{disabled:Object(empty_util.e)(this.resourcePolicy)}),actionConf=Object.assign({},RESOURCE_POLICY_FORM_ACTION_TYPE_CONFIG,{disabled:Object(empty_util.e)(this.resourcePolicy)});formModel.push(new ds_dynamic_input_model.a(RESOURCE_POLICY_FORM_NAME_CONFIG),new ds_dynamic_textarea_model.a(RESOURCE_POLICY_FORM_DESCRIPTION_CONFIG),new fesm2015_core.N(policyTypeConf),new fesm2015_core.N(actionConf));const startDateModel=new fesm2015_core.t(RESOURCE_POLICY_FORM_START_DATE_CONFIG,RESOURCE_POLICY_FORM_START_DATE_LAYOUT),endDateModel=new fesm2015_core.t(RESOURCE_POLICY_FORM_END_DATE_CONFIG,RESOURCE_POLICY_FORM_END_DATE_LAYOUT),dateGroupConfig=Object.assign({},RESOURCE_POLICY_FORM_DATE_GROUP_CONFIG,{group:[]});return dateGroupConfig.group.push(startDateModel,endDateModel),formModel.push(new fesm2015_core.D(dateGroupConfig,RESOURCE_POLICY_FORM_DATE_GROUP_LAYOUT)),this.initModelsValue(formModel),formModel}initModelsValue(formModel){return this.resourcePolicy&&formModel.forEach((model=>{"date"===model.id?(Object(empty_util.b)(this.resourcePolicy.startDate)&&(model.get(0).value=Object(date_util.d)(this.resourcePolicy.startDate)),Object(empty_util.b)(this.resourcePolicy.endDate)&&(model.get(1).value=Object(date_util.d)(this.resourcePolicy.endDate))):this.resourcePolicy.hasOwnProperty(model.id)&&this.resourcePolicy[model.id]&&(model.value=this.resourcePolicy[model.id])})),formModel}canSetGrant(){return Object(empty_util.d)(this.resourcePolicy)}getResourcePolicyTargetName(){return Object(empty_util.e)(this.resourcePolicyGrant)?this.dsoNameService.getName(this.resourcePolicyGrant):""}updateObjectSelected(object,isEPerson){this.resourcePolicyGrant=object,this.resourcePolicyGrantType=isEPerson?"eperson":"group"}onReset(){this.reset.emit()}onSubmit(){this.formService.getFormData(this.formId).pipe(Object(take.a)(1)).subscribe((data=>{const eventPayload=Object.create({});eventPayload.object=this.createResourcePolicyByFormData(data),eventPayload.target={type:this.resourcePolicyGrantType,uuid:this.resourcePolicyGrant.id},this.submit.emit(eventPayload)}))}createResourcePolicyByFormData(data){const resourcePolicy=new resource_policy_model.a;return resourcePolicy.name=data.name?data.name[0].value:null,resourcePolicy.description=data.description?data.description[0].value:null,resourcePolicy.policyType=data.policyType?data.policyType[0].value:null,resourcePolicy.action=data.action?data.action[0].value:null,resourcePolicy.startDate=data.date&&data.date.start?Object(date_util.a)(data.date.start[0].value):null,resourcePolicy.endDate=data.date&&data.date.end?Object(date_util.a)(data.date.end[0].value):null,resourcePolicy.type=resource_policy_resource_type.a,resourcePolicy}ngOnDestroy(){this.isActive=!1,this.formModel=null,this.subs.filter((subscription=>Object(empty_util.b)(subscription))).forEach((subscription=>subscription.unsubscribe()))}}resource_policy_form_component_ResourcePolicyFormComponent.\u0275fac=function ResourcePolicyFormComponent_Factory(t){return new(t||resource_policy_form_component_ResourcePolicyFormComponent)(core["\u0275\u0275directiveInject"](dso_name_service.a),core["\u0275\u0275directiveInject"](eperson_data_service.a),core["\u0275\u0275directiveInject"](form_service.a),core["\u0275\u0275directiveInject"](group_data_service.a),core["\u0275\u0275directiveInject"](request_service.a))},resource_policy_form_component_ResourcePolicyFormComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:resource_policy_form_component_ResourcePolicyFormComponent,selectors:[["ds-resource-policy-form"]],inputs:{resourcePolicy:"resourcePolicy",isProcessing:"isProcessing"},outputs:{reset:"reset",submit:"submit"},decls:44,vars:25,consts:[[3,"formId","formModel","displaySubmit","displayCancel",4,"ngIf"],[1,"container-fluid"],["for","ResourcePolicyObject"],["id","ResourcePolicyObject","type","text","readonly","",1,"form-control","mb-3",3,"value"],[4,"ngIf"],[1,"form-group","row"],[1,"col","text-right"],["type","reset",1,"btn","btn-default",3,"disabled","click"],["type","button",1,"btn","btn-primary",3,"disabled","click"],[3,"formId","formModel","displaySubmit","displayCancel"],["formRef","formComponent"],["ngbNav","",1,"nav-pills"],["nav","ngbNav"],["ngbNavItem",""],["ngbNavLink",""],["ngbNavContent",""],[3,"ngbNavOutlet"],[3,"select"],[3,"isListOfEPerson","select"],[1,"fas","fa-circle-notch","fa-spin"]],template:function ResourcePolicyFormComponent_Template(rf,ctx){1&rf&&(core["\u0275\u0275elementStart"](0,"div"),core["\u0275\u0275text"](1,"\n  "),core["\u0275\u0275template"](2,ResourcePolicyFormComponent_ds_form_2_Template,2,4,"ds-form",0),core["\u0275\u0275text"](3,"\n  "),core["\u0275\u0275elementStart"](4,"div",1),core["\u0275\u0275text"](5,"\n    "),core["\u0275\u0275elementStart"](6,"label",2),core["\u0275\u0275text"](7),core["\u0275\u0275pipe"](8,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](9,"\n    "),core["\u0275\u0275element"](10,"input",3),core["\u0275\u0275pipe"](11,"async"),core["\u0275\u0275text"](12,"\n    "),core["\u0275\u0275template"](13,ResourcePolicyFormComponent_ng_container_13_Template,26,7,"ng-container",4),core["\u0275\u0275text"](14,"\n    "),core["\u0275\u0275elementStart"](15,"div"),core["\u0275\u0275text"](16,"\n      "),core["\u0275\u0275element"](17,"hr"),core["\u0275\u0275text"](18,"\n      "),core["\u0275\u0275elementStart"](19,"div",5),core["\u0275\u0275text"](20,"\n\n        "),core["\u0275\u0275elementStart"](21,"div",6),core["\u0275\u0275text"](22,"\n          "),core["\u0275\u0275elementStart"](23,"button",7),core["\u0275\u0275listener"]("click",(function ResourcePolicyFormComponent_Template_button_click_23_listener(){return ctx.onReset()})),core["\u0275\u0275pipe"](24,"async"),core["\u0275\u0275text"](25),core["\u0275\u0275pipe"](26,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](27,"\n          "),core["\u0275\u0275elementStart"](28,"button",8),core["\u0275\u0275listener"]("click",(function ResourcePolicyFormComponent_Template_button_click_28_listener(){return ctx.onSubmit()})),core["\u0275\u0275pipe"](29,"async"),core["\u0275\u0275pipe"](30,"async"),core["\u0275\u0275text"](31,"\n            "),core["\u0275\u0275template"](32,ResourcePolicyFormComponent_span_32_Template,5,3,"span",4),core["\u0275\u0275pipe"](33,"async"),core["\u0275\u0275text"](34,"\n            "),core["\u0275\u0275template"](35,ResourcePolicyFormComponent_span_35_Template,3,3,"span",4),core["\u0275\u0275pipe"](36,"async"),core["\u0275\u0275text"](37,"\n          "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](38,"\n        "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](39,"\n      "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](40,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](41,"\n  "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](42,"\n"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](43,"\n")),2&rf&&(core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",ctx.formModel),core["\u0275\u0275advance"](5),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](8,9,"resource-policies.form.eperson-group-list.label")),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("value",core["\u0275\u0275pipeBind1"](11,11,ctx.resourcePolicyTargetName$)),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("ngIf",ctx.canSetGrant()),core["\u0275\u0275advance"](10),core["\u0275\u0275property"]("disabled",core["\u0275\u0275pipeBind1"](24,13,ctx.isProcessing)),core["\u0275\u0275advance"](2),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](26,15,"form.cancel")),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("disabled",!core["\u0275\u0275pipeBind1"](29,17,ctx.isFormValid())||core["\u0275\u0275pipeBind1"](30,19,ctx.isProcessing)),core["\u0275\u0275advance"](4),core["\u0275\u0275property"]("ngIf",core["\u0275\u0275pipeBind1"](33,21,ctx.isProcessing)),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("ngIf",!core["\u0275\u0275pipeBind1"](36,23,ctx.isProcessing)))},directives:[common.NgIf,form_component.a,ng_bootstrap.t,ng_bootstrap.v,ng_bootstrap.w,ng_bootstrap.u,ng_bootstrap.y,eperson_group_list_component.a],pipes:[ngx_translate_core.d,common.AsyncPipe],encapsulation:2})},ONIj:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ThemedSearchPageComponent}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),_shared_theme_support_themed_component__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("JTKQ");function ThemedSearchPageComponent_ng_template_0_Template(rf,ctx){}class ThemedSearchPageComponent extends _shared_theme_support_themed_component__WEBPACK_IMPORTED_MODULE_1__.a{getComponentName(){return"SearchPageComponent"}importThemedComponent(themeName){return __webpack_require__("VxFp")(`./${themeName}/app/search-page/search-page.component`)}importUnthemedComponent(){return Promise.resolve().then(__webpack_require__.bind(null,"xSRh"))}}ThemedSearchPageComponent.\u0275fac=function ThemedSearchPageComponent_Factory(t){return \u0275ThemedSearchPageComponent_BaseFactory(t||ThemedSearchPageComponent)},ThemedSearchPageComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineComponent"]({type:ThemedSearchPageComponent,selectors:[["ds-themed-search-page"]],features:[_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275InheritDefinitionFeature"]],decls:3,vars:0,consts:[["vcr",""]],template:function ThemedSearchPageComponent_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](0,ThemedSearchPageComponent_ng_template_0_Template,0,0,"ng-template",null,0,_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275templateRefExtractor"]),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](2,"\n"))},encapsulation:2});const \u0275ThemedSearchPageComponent_BaseFactory=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275getInheritedFactory"](ThemedSearchPageComponent)},RD8h:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ComcolPageBrowseByComponent}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),rxjs_operators__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("lJxs"),_community_page_community_page_routing_paths__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("krCT"),_collection_page_collection_page_routing_paths__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("Obj/"),_core_shared_operators__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("1QIV"),_core_browse_browse_service__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("hzQF"),_angular_router__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("tyNb"),_angular_common__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("ofXK"),_angular_forms__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("3Pt+"),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("sYmb");function ComcolPageBrowseByComponent_a_10_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"a",8),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](2,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()),2&rf){const option_r2=ctx.$implicit;_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("routerLink",option_r2.routerLink)("queryParams",option_r2.params),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](2,3,option_r2.label))}}function ComcolPageBrowseByComponent_option_19_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"option",9),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](1,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](3,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()),2&rf){const option_r3=ctx.$implicit,ctx_r1=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngValue",option_r3.id),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275attribute"]("selected",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](1,3,ctx_r1.currentOptionId$)===option_r3.id?"selected":null),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](3,5,option_r3.label))}}class ComcolPageBrowseByComponent{constructor(route,router,browseService){this.route=route,this.router=router,this.browseService=browseService}ngOnInit(){this.browseService.getBrowseDefinitions().pipe(Object(_core_shared_operators__WEBPACK_IMPORTED_MODULE_4__.g)()).subscribe((browseDefListRD=>{browseDefListRD.hasSucceeded&&(this.allOptions=browseDefListRD.payload.page.map((config=>({id:config.id,label:`browse.comcol.by.${config.id}`,routerLink:`/browse/${config.id}`,params:{scope:this.id}}))),"collection"===this.contentType?this.allOptions=[{id:this.id,label:"collection.page.browse.recent.head",routerLink:Object(_collection_page_collection_page_routing_paths__WEBPACK_IMPORTED_MODULE_3__.j)(this.id)},...this.allOptions]:"community"===this.contentType&&(this.allOptions=[{id:this.id,label:"community.all-lists.head",routerLink:Object(_community_page_community_page_routing_paths__WEBPACK_IMPORTED_MODULE_2__.h)(this.id)},...this.allOptions]))})),this.currentOptionId$=this.route.params.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_1__.a)((params=>params.id)))}onSelectChange(newId){const selectedOption=this.allOptions.find((option=>option.id===newId));this.router.navigate([selectedOption.routerLink],{queryParams:selectedOption.params})}}ComcolPageBrowseByComponent.\u0275fac=function ComcolPageBrowseByComponent_Factory(t){return new(t||ComcolPageBrowseByComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_6__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_6__.g),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_core_browse_browse_service__WEBPACK_IMPORTED_MODULE_5__.a))},ComcolPageBrowseByComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineComponent"]({type:ComcolPageBrowseByComponent,selectors:[["ds-comcol-page-browse-by"]],inputs:{id:"id",contentType:"contentType"},decls:24,vars:8,consts:[[1,"comcol-browse-label","h5"],["aria-label","Browse Community or Collection",1,"comcol-browse","mb-4"],[1,"d-none","d-sm-block"],[1,"list-group","list-group-horizontal"],["class","list-group-item","routerLinkActive","active",3,"routerLink","queryParams",4,"ngFor","ngForOf"],[1,"d-block","d-sm-none"],["name","browse-type","aria-label","Browse Community or Collection",1,"form-control",3,"ngModel","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],["routerLinkActive","active",1,"list-group-item",3,"routerLink","queryParams"],[3,"ngValue"]],template:function ComcolPageBrowseByComponent_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"h2",0),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](2,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3,"\n"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](4,"nav",1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](5,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](6,"div",2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](7,"\n\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](8,"div",3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](9,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](10,ComcolPageBrowseByComponent_a_10_Template,3,5,"a",4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](11,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](12,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](13,"\n\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](14,"div",5),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](15,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](16,"select",6),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("ngModelChange",(function ComcolPageBrowseByComponent_Template_select_ngModelChange_16_listener($event){return ctx.onSelectChange($event)})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](17,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](18,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](19,ComcolPageBrowseByComponent_option_19_Template,4,7,"option",7),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](20,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](21,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](22,"\n"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](23,"\n")),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](2,4,"browse.comcol.head")),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](9),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngForOf",ctx.allOptions),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](6),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngModel",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](17,6,ctx.currentOptionId$)),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngForOf",ctx.allOptions))},directives:[_angular_common__WEBPACK_IMPORTED_MODULE_7__.NgForOf,_angular_forms__WEBPACK_IMPORTED_MODULE_8__.SelectControlValueAccessor,_angular_forms__WEBPACK_IMPORTED_MODULE_8__.NgControlStatus,_angular_forms__WEBPACK_IMPORTED_MODULE_8__.NgModel,_angular_router__WEBPACK_IMPORTED_MODULE_6__.j,_angular_router__WEBPACK_IMPORTED_MODULE_6__.i,_angular_forms__WEBPACK_IMPORTED_MODULE_8__.NgSelectOption,_angular_forms__WEBPACK_IMPORTED_MODULE_8__["\u0275angular_packages_forms_forms_z"]],pipes:[_ngx_translate_core__WEBPACK_IMPORTED_MODULE_9__.d,_angular_common__WEBPACK_IMPORTED_MODULE_7__.AsyncPipe],styles:[""]})},TrCT:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return SearchTrackerComponent}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),rxjs_operators__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("eIep"),rxjs_operators__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("lJxs"),_shared_search_search_component__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("9H8w"),_shared_sidebar_sidebar_service__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("7LZ0"),_shared_host_window_service__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("14tD"),_my_dspace_page_my_dspace_page_component__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("dtp9"),_core_services_route_service__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("ppE2"),_core_shared_search_search_configuration_service__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("joI/"),_core_shared_search_search_service__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("gWc+"),_core_shared_operators__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("1QIV"),angulartics2__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("wQXg"),_angular_router__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("tyNb");class SearchTrackerComponent extends _shared_search_search_component__WEBPACK_IMPORTED_MODULE_3__.a{constructor(service,sidebarService,windowService,searchConfigService,routeService,angulartics2,router){super(service,sidebarService,windowService,searchConfigService,routeService,router),this.service=service,this.sidebarService=sidebarService,this.windowService=windowService,this.searchConfigService=searchConfigService,this.routeService=routeService,this.angulartics2=angulartics2,this.router=router}ngOnInit(){this.getSearchOptions().pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_1__.a)((options=>this.service.searchEntries(options).pipe(Object(_core_shared_operators__WEBPACK_IMPORTED_MODULE_10__.i)(),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.a)((rd=>({config:options,searchQueryResponse:rd.payload}))))))).subscribe((({config:config,searchQueryResponse:searchQueryResponse})=>{const filters=[],appliedFilters=searchQueryResponse.appliedFilters||[];for(let i=0,filtersLength=appliedFilters.length;i<filtersLength;i++){const appliedFilter=appliedFilters[i];filters.push(appliedFilter)}this.angulartics2.eventTrack.next({action:"search",properties:{searchOptions:config,page:{size:config.pagination.size,totalElements:searchQueryResponse.pageInfo.totalElements,totalPages:searchQueryResponse.pageInfo.totalPages,number:config.pagination.currentPage},sort:{by:config.sort.field,order:config.sort.direction},filters:filters}})}))}}SearchTrackerComponent.\u0275fac=function SearchTrackerComponent_Factory(t){return new(t||SearchTrackerComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_core_shared_search_search_service__WEBPACK_IMPORTED_MODULE_9__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_shared_sidebar_sidebar_service__WEBPACK_IMPORTED_MODULE_4__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_shared_host_window_service__WEBPACK_IMPORTED_MODULE_5__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_my_dspace_page_my_dspace_page_component__WEBPACK_IMPORTED_MODULE_6__.SEARCH_CONFIG_SERVICE),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_core_services_route_service__WEBPACK_IMPORTED_MODULE_7__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](angulartics2__WEBPACK_IMPORTED_MODULE_11__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_12__.g))},SearchTrackerComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineComponent"]({type:SearchTrackerComponent,selectors:[["ds-search-tracker"]],features:[_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275ProvidersFeature"]([{provide:_my_dspace_page_my_dspace_page_component__WEBPACK_IMPORTED_MODULE_6__.SEARCH_CONFIG_SERVICE,useClass:_core_shared_search_search_configuration_service__WEBPACK_IMPORTED_MODULE_8__.a}]),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275InheritDefinitionFeature"]],decls:1,vars:0,template:function SearchTrackerComponent_Template(rf,ctx){1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](0,"\xa0\n")},styles:["[_nghost-%COMP%]{display:none}"]})},VxFp:function(module,exports,__webpack_require__){var map={"./custom/app/search-page/search-page.component":["Bvb0",63]};function webpackAsyncContext(req){if(!__webpack_require__.o(map,req))return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}));var ids=map[req],id=ids[0];return __webpack_require__.e(ids[1]).then((function(){return __webpack_require__(id)}))}webpackAsyncContext.keys=function webpackAsyncContextKeys(){return Object.keys(map)},webpackAsyncContext.id="VxFp",module.exports=webpackAsyncContext},WXw8:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return DeleteComColPageComponent}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),rxjs__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("2Vo4"),rxjs_operators__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("SxV6"),rxjs_operators__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("lJxs"),_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("lI3o"),_core_shared_operators__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("1QIV"),_core_data_request_service__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("X/78"),_core_data_comcol_data_service__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("GR9Y"),_angular_router__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("tyNb"),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("sYmb");class DeleteComColPageComponent{constructor(dsoDataService,router,route,notifications,translate,requestService){this.dsoDataService=dsoDataService,this.router=router,this.route=route,this.notifications=notifications,this.translate=translate,this.requestService=requestService,this.processing$=new rxjs__WEBPACK_IMPORTED_MODULE_1__.a(!1)}ngOnInit(){this.dsoRD$=this.route.data.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.a)(),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.a)((data=>data.dso)))}onConfirm(dso){this.processing$.next(!0),this.dsoDataService.delete(dso.id).pipe(Object(_core_shared_operators__WEBPACK_IMPORTED_MODULE_5__.g)()).subscribe((response=>{if(response.hasSucceeded){const successMessage=this.translate.instant(dso.type+".delete.notification.success");this.notifications.success(successMessage),this.dsoDataService.refreshCache(dso)}else{const errorMessage=this.translate.instant(dso.type+".delete.notification.fail");this.notifications.error(errorMessage)}this.router.navigate(["/"])}))}onCancel(dso){this.router.navigate([this.frontendURL+"/"+dso.uuid+"/edit"])}}DeleteComColPageComponent.\u0275fac=function DeleteComColPageComponent_Factory(t){return new(t||DeleteComColPageComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_core_data_comcol_data_service__WEBPACK_IMPORTED_MODULE_7__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_8__.g),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_8__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_4__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_ngx_translate_core__WEBPACK_IMPORTED_MODULE_9__.e),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_core_data_request_service__WEBPACK_IMPORTED_MODULE_6__.a))},DeleteComColPageComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineComponent"]({type:DeleteComColPageComponent,selectors:[["ds-delete-comcol"]],decls:0,vars:0,template:function DeleteComColPageComponent_Template(rf,ctx){},encapsulation:2})},XntB:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ComColFormComponent}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),rxjs__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("2Vo4"),rxjs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("itXk"),_core_auth_auth_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("Vurf"),_core_cache_object_cache_service__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("mycY"),_core_data_request_service__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("X/78"),_core_data_rest_request_method__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("Gfeg"),_core_shared_community_model__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("YLTE"),_empty_util__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("J3qs"),_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("lI3o"),_uploader_uploader_options_model__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("ao5O"),_uploader_uploader_component__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("4zj/"),_core_shared_operators__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("1QIV"),_ng_dynamic_forms_core__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("e+Av"),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("sYmb"),_utils_var_directive__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("O/5o"),_angular_common__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("ofXK"),_comcol_page_logo_comcol_page_logo_component__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("ivcV"),_form_form_component__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("hqmO");function ComColFormComponent_ng_container_11_div_2_div_11_button_2_Template(rf,ctx){if(1&rf){const _r9=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275getCurrentView"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"button",15),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("click",(function ComColFormComponent_ng_container_11_div_2_div_11_button_2_Template_button_click_0_listener(){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r9);return _angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"](4).deleteLogo()})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](1,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](2,"\n                "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](3,"i",16),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](4,"\n              "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()}if(2&rf){const ctx_r6=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"](4);_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275propertyInterpolate"]("title",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](1,1,ctx_r6.type.value+".edit.logo.delete.title"))}}function ComColFormComponent_ng_container_11_div_2_div_11_button_4_Template(rf,ctx){if(1&rf){const _r11=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275getCurrentView"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"button",17),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("click",(function ComColFormComponent_ng_container_11_div_2_div_11_button_4_Template_button_click_0_listener(){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r11);return _angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"](4).undoDeleteLogo()})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](1,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](2,"\n                "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](3,"i",18),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](4,"\n              "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()}if(2&rf){const ctx_r7=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"](4);_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275propertyInterpolate"]("title",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](1,1,ctx_r7.type.value+".edit.logo.delete-undo.title"))}}function ComColFormComponent_ng_container_11_div_2_div_11_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div",12),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n              "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](2,ComColFormComponent_ng_container_11_div_2_div_11_button_2_Template,5,3,"button",13),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3,"\n              "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](4,ComColFormComponent_ng_container_11_div_2_div_11_button_4_Template,5,3,"button",14),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](5,"\n            "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()),2&rf){const ctx_r5=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"](3);_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",!ctx_r5.markLogoForDeletion),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",ctx_r5.markLogoForDeletion)}}const _c0=function(a0){return{"alert-danger":a0}};function ComColFormComponent_ng_container_11_div_2_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div",7),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](2,"div",1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3,"\n          "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](4,"div",8),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](5,"\n            "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](6,"ds-comcol-page-logo",9),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](7,"\n          "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](8,"\n          "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](9,"div",10),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](10,"\n            "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](11,ComColFormComponent_ng_container_11_div_2_div_11_Template,6,2,"div",11),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](12,"\n          "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](13,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](14,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()),2&rf){const logo_r2=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]().ngVar,ctx_r3=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngClass",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pureFunction1"](3,_c0,ctx_r3.markLogoForDeletion)),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](6),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("logo",logo_r2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](5),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",logo_r2)}}function ComColFormComponent_ng_container_11_div_4_ds_uploader_2_Template(rf,ctx){if(1&rf){const _r15=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275getCurrentView"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"ds-uploader",20),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("onCompleteItem",(function ComColFormComponent_ng_container_11_div_4_ds_uploader_2_Template_ds_uploader_onCompleteItem_0_listener(){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r15);return _angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"](3).onCompleteItem()}))("onUploadError",(function ComColFormComponent_ng_container_11_div_4_ds_uploader_2_Template_ds_uploader_onUploadError_0_listener(){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r15);return _angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"](3).onUploadError()})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()}if(2&rf){const ctx_r13=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"](3);_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("dropMsg",ctx_r13.type.value+".edit.logo.upload")("dropOverDocumentMsg",ctx_r13.type.value+".edit.logo.upload")("enableDragOverDocument",!0)("uploadFilesOptions",ctx_r13.uploadFilesOptions)}}function ComColFormComponent_ng_container_11_div_4_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div",2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](2,ComColFormComponent_ng_container_11_div_4_ds_uploader_2_Template,1,4,"ds-uploader",19),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](3,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](4,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()),2&rf){const ctx_r4=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"](2);_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](3,1,ctx_r4.initializedUploaderOptions))}}function ComColFormComponent_ng_container_11_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementContainerStart"](0),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](2,ComColFormComponent_ng_container_11_div_2_Template,15,5,"div",5),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](4,ComColFormComponent_ng_container_11_div_4_Template,5,3,"div",6),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](5,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementContainerEnd"]()),2&rf){const logo_r2=ctx.ngVar;_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",logo_r2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",!logo_r2)}}function ComColFormComponent_ds_form_16_Template(rf,ctx){if(1&rf){const _r18=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275getCurrentView"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"ds-form",21),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("submitForm",(function ComColFormComponent_ds_form_16_Template_ds_form_submitForm_0_listener(){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r18);return _angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]().onSubmit()})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](2,"button",22),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("click",(function ComColFormComponent_ds_form_16_Template_button_click_2_listener(){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r18);return _angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]().back.emit()})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](4,"i",23),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](5),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](6,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](7,"\n"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()}if(2&rf){const ctx_r1=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("formId","comcol-form-id")("formModel",ctx_r1.formModel)("displayCancel",!1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](5),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate1"](" ",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](6,4,ctx_r1.type.value+".edit.return"),"\n  ")}}class ComColFormComponent{constructor(formService,translate,notificationsService,authService,requestService,objectCache){this.formService=formService,this.translate=translate,this.notificationsService=notificationsService,this.authService=authService,this.requestService=requestService,this.objectCache=objectCache,this.LABEL_KEY_PREFIX=".form.",this.ERROR_KEY_PREFIX=".form.errors.",this.uploadFilesOptions=Object.assign(new _uploader_uploader_options_model__WEBPACK_IMPORTED_MODULE_10__.a,{autoUpload:!1}),this.submitForm=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.EventEmitter,this.back=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.EventEmitter,this.finish=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.EventEmitter,this.initializedUploaderOptions=new rxjs__WEBPACK_IMPORTED_MODULE_1__.a(!1),this.markLogoForDeletion=!1,this.subs=[]}ngOnInit(){this.formModel.forEach((fieldModel=>{fieldModel.value=this.dso.firstMetadataValue(fieldModel.name)})),this.formGroup=this.formService.createFormGroup(this.formModel),this.updateFieldTranslations(),this.translate.onLangChange.subscribe((()=>{this.updateFieldTranslations()})),Object(_empty_util__WEBPACK_IMPORTED_MODULE_8__.b)(this.dso.id)?this.subs.push(Object(rxjs__WEBPACK_IMPORTED_MODULE_2__.a)([this.dsoService.getLogoEndpoint(this.dso.id),this.dso.logo]).subscribe((([href,logoRD])=>{this.uploadFilesOptions.url=href,this.uploadFilesOptions.authToken=this.authService.buildAuthHeader(),Object(_empty_util__WEBPACK_IMPORTED_MODULE_8__.b)(logoRD.payload)&&(this.uploadFilesOptions.method=_core_data_rest_request_method__WEBPACK_IMPORTED_MODULE_6__.a.PUT),this.initializedUploaderOptions.next(!0)}))):(this.uploadFilesOptions.url="placeholder",this.uploadFilesOptions.authToken=this.authService.buildAuthHeader(),this.initializedUploaderOptions.next(!0))}onSubmit(){this.markLogoForDeletion&&Object(_empty_util__WEBPACK_IMPORTED_MODULE_8__.b)(this.dso.id)&&Object(_empty_util__WEBPACK_IMPORTED_MODULE_8__.b)(this.dso._links.logo)&&this.dsoService.deleteLogo(this.dso).pipe(Object(_core_shared_operators__WEBPACK_IMPORTED_MODULE_12__.g)()).subscribe((response=>{response.hasSucceeded?this.notificationsService.success(this.translate.get(this.type.value+".edit.logo.notifications.delete.success.title"),this.translate.get(this.type.value+".edit.logo.notifications.delete.success.content")):this.notificationsService.error(this.translate.get(this.type.value+".edit.logo.notifications.delete.error.title"),response.errorMessage),this.dso.logo=void 0,this.uploadFilesOptions.method=_core_data_rest_request_method__WEBPACK_IMPORTED_MODULE_6__.a.POST,this.refreshCache(),this.finish.emit()}));const formMetadata={};this.formModel.forEach((fieldModel=>{const value={value:fieldModel.value,language:null};formMetadata.hasOwnProperty(fieldModel.name)?formMetadata[fieldModel.name].push(value):formMetadata[fieldModel.name]=[value]}));const updatedDSO=Object.assign({},this.dso,{metadata:Object.assign(Object.assign({},this.dso.metadata),formMetadata),type:_core_shared_community_model__WEBPACK_IMPORTED_MODULE_7__.a.type}),operations=[];this.formModel.forEach((fieldModel=>{fieldModel.value!==this.dso.firstMetadataValue(fieldModel.name)&&operations.push({op:"replace",path:`/metadata/${fieldModel.name}`,value:{value:fieldModel.value,language:null}})})),this.submitForm.emit({dso:updatedDSO,uploader:Object(_empty_util__WEBPACK_IMPORTED_MODULE_8__.b)(this.uploaderComponent)?this.uploaderComponent.uploader:void 0,deleteLogo:this.markLogoForDeletion,operations:operations})}updateFieldTranslations(){this.formModel.forEach((fieldModel=>{fieldModel.label=this.translate.instant(this.type.value+this.LABEL_KEY_PREFIX+fieldModel.id),Object(_empty_util__WEBPACK_IMPORTED_MODULE_8__.e)(fieldModel.validators)&&(fieldModel.errorMessages={},Object.keys(fieldModel.validators).forEach((key=>{fieldModel.errorMessages[key]=this.translate.instant(this.type.value+this.ERROR_KEY_PREFIX+fieldModel.id+"."+key)})))}))}deleteLogo(){this.markLogoForDeletion=!0}undoDeleteLogo(){this.markLogoForDeletion=!1}refreshCache(){this.requestService.removeByHrefSubstring(this.dso._links.self.href),this.objectCache.remove(this.dso._links.self.href)}onCompleteItem(){Object(_empty_util__WEBPACK_IMPORTED_MODULE_8__.b)(this.dso.id)&&this.refreshCache(),this.notificationsService.success(null,this.translate.get(this.type.value+".edit.logo.notifications.add.success")),this.finish.emit()}onUploadError(){this.notificationsService.error(null,this.translate.get(this.type.value+".edit.logo.notifications.add.error")),this.finish.emit()}ngOnDestroy(){this.subs.filter((subscription=>Object(_empty_util__WEBPACK_IMPORTED_MODULE_8__.b)(subscription))).forEach((subscription=>subscription.unsubscribe()))}}ComColFormComponent.\u0275fac=function ComColFormComponent_Factory(t){return new(t||ComColFormComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_ng_dynamic_forms_core__WEBPACK_IMPORTED_MODULE_13__.G),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_ngx_translate_core__WEBPACK_IMPORTED_MODULE_14__.e),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_9__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_core_auth_auth_service__WEBPACK_IMPORTED_MODULE_3__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_core_data_request_service__WEBPACK_IMPORTED_MODULE_5__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_core_cache_object_cache_service__WEBPACK_IMPORTED_MODULE_4__.a))},ComColFormComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineComponent"]({type:ComColFormComponent,selectors:[["ds-comcol-form"]],viewQuery:function ComColFormComponent_Query(rf,ctx){if(1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275viewQuery"](_uploader_uploader_component__WEBPACK_IMPORTED_MODULE_11__.a,1),2&rf){let _t;_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275queryRefresh"](_t=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275loadQuery"]())&&(ctx.uploaderComponent=_t.first)}},inputs:{dso:"dso"},outputs:{submitForm:"submitForm",back:"back",finish:"finish"},decls:18,vars:7,consts:[[1,"container-fluid"],[1,"row"],[1,"col-12","d-inline-block"],[4,"ngVar"],[3,"formId","formModel","displayCancel","submitForm",4,"ngIf"],["class","col-12 d-inline-block alert","id","logo-section",3,"ngClass",4,"ngIf"],["class","col-12 d-inline-block",4,"ngIf"],["id","logo-section",1,"col-12","d-inline-block","alert",3,"ngClass"],[1,"col-8","d-inline-block"],[3,"logo"],[1,"col-4","d-inline-block"],["class","btn-group btn-group-sm float-right","role","group",4,"ngIf"],["role","group",1,"btn-group","btn-group-sm","float-right"],["type","button","class","btn btn-danger",3,"title","click",4,"ngIf"],["type","button","class","btn btn-warning",3,"title","click",4,"ngIf"],["type","button",1,"btn","btn-danger",3,"title","click"],["aria-hidden","true",1,"fas","fa-trash"],["type","button",1,"btn","btn-warning",3,"title","click"],["aria-hidden","true",1,"fas","fa-undo"],[3,"dropMsg","dropOverDocumentMsg","enableDragOverDocument","uploadFilesOptions","onCompleteItem","onUploadError",4,"ngIf"],[3,"dropMsg","dropOverDocumentMsg","enableDragOverDocument","uploadFilesOptions","onCompleteItem","onUploadError"],[3,"formId","formModel","displayCancel","submitForm"],["before","",1,"btn","btn-outline-secondary",3,"click"],[1,"fas","fa-arrow-left"]],template:function ComColFormComponent_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div",0),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](2,"div",1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](4,"div",2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](5,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](6,"label"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](7),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](8,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](9,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](10,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](11,ComColFormComponent_ng_container_11_Template,6,2,"ng-container",3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](12,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](13,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](14,"\n"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](15,"\n"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](16,ComColFormComponent_ds_form_16_Template,8,6,"ds-form",4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](17,"\n")),2&rf){let tmp_1_0=null;_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](7),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](8,3,ctx.type.value+".edit.logo.label")),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngVar",null==(tmp_1_0=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](12,5,null==ctx.dso?null:ctx.dso.logo))?null:tmp_1_0.payload),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](5),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",ctx.formModel)}},directives:[_utils_var_directive__WEBPACK_IMPORTED_MODULE_15__.a,_angular_common__WEBPACK_IMPORTED_MODULE_16__.NgIf,_angular_common__WEBPACK_IMPORTED_MODULE_16__.NgClass,_comcol_page_logo_comcol_page_logo_component__WEBPACK_IMPORTED_MODULE_17__.a,_uploader_uploader_component__WEBPACK_IMPORTED_MODULE_11__.a,_form_form_component__WEBPACK_IMPORTED_MODULE_18__.a],pipes:[_ngx_translate_core__WEBPACK_IMPORTED_MODULE_14__.d,_angular_common__WEBPACK_IMPORTED_MODULE_16__.AsyncPipe],styles:[""]})},aem7:function(module,exports,__webpack_require__){var map={"./custom/app/collection-page/collection-page.component":["pQAh",36]};function webpackAsyncContext(req){if(!__webpack_require__.o(map,req))return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}));var ids=map[req],id=ids[0];return __webpack_require__.e(ids[1]).then((function(){return __webpack_require__(id)}))}webpackAsyncContext.keys=function webpackAsyncContextKeys(){return Object.keys(map)},webpackAsyncContext.id="aem7",module.exports=webpackAsyncContext},fY2w:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ComcolModule}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),_angular_common__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("ofXK"),_comcol_page_content_comcol_page_content_component__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("/I7b"),_comcol_page_handle_comcol_page_handle_component__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("0qNx"),_comcol_page_header_comcol_page_header_component__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("yj7I"),_comcol_page_logo_comcol_page_logo_component__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("ivcV"),_comcol_forms_comcol_form_comcol_form_component__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("XntB"),_comcol_forms_create_comcol_page_create_comcol_page_component__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("hxi3"),_comcol_forms_edit_comcol_page_edit_comcol_page_component__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("tfjI"),_comcol_forms_delete_comcol_page_delete_comcol_page_component__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("WXw8"),_comcol_page_browse_by_comcol_page_browse_by_component__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("RD8h"),_comcol_forms_edit_comcol_page_comcol_role_comcol_role_component__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("0EDX"),_shared_module__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("PCNd"),_form_form_module__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("kcqd");_comcol_page_content_comcol_page_content_component__WEBPACK_IMPORTED_MODULE_2__.a,_comcol_page_handle_comcol_page_handle_component__WEBPACK_IMPORTED_MODULE_3__.a,_comcol_page_header_comcol_page_header_component__WEBPACK_IMPORTED_MODULE_4__.a,_comcol_page_logo_comcol_page_logo_component__WEBPACK_IMPORTED_MODULE_5__.a,_comcol_forms_comcol_form_comcol_form_component__WEBPACK_IMPORTED_MODULE_6__.a,_comcol_forms_create_comcol_page_create_comcol_page_component__WEBPACK_IMPORTED_MODULE_7__.a,_comcol_forms_edit_comcol_page_edit_comcol_page_component__WEBPACK_IMPORTED_MODULE_8__.a,_comcol_forms_delete_comcol_page_delete_comcol_page_component__WEBPACK_IMPORTED_MODULE_9__.a,_comcol_page_browse_by_comcol_page_browse_by_component__WEBPACK_IMPORTED_MODULE_10__.a,_comcol_forms_edit_comcol_page_comcol_role_comcol_role_component__WEBPACK_IMPORTED_MODULE_11__.a;class ComcolModule{}ComcolModule.\u0275fac=function ComcolModule_Factory(t){return new(t||ComcolModule)},ComcolModule.\u0275mod=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineNgModule"]({type:ComcolModule}),ComcolModule.\u0275inj=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineInjector"]({imports:[[_angular_common__WEBPACK_IMPORTED_MODULE_1__.CommonModule,_form_form_module__WEBPACK_IMPORTED_MODULE_13__.a,_shared_module__WEBPACK_IMPORTED_MODULE_12__.a]]})},hucJ:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return DSOBreadcrumbResolver}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),_dso_breadcrumbs_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("GCaJ"),_data_data_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("h5qW"),_shared_operators__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("1QIV"),rxjs_operators__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("lJxs"),_shared_empty_util__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("J3qs");class DSOBreadcrumbResolver{constructor(breadcrumbService,dataService){this.breadcrumbService=breadcrumbService,this.dataService=dataService}resolve(route,state){const uuid=route.params.id;return this.dataService.findById(uuid,!0,!1,...this.followLinks).pipe(Object(_shared_operators__WEBPACK_IMPORTED_MODULE_3__.g)(),Object(_shared_operators__WEBPACK_IMPORTED_MODULE_3__.o)(),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.a)((object=>{if(Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_5__.b)(object)){const fullPath=state.url,url=fullPath.substr(0,fullPath.indexOf(uuid))+uuid;return{provider:this.breadcrumbService,key:object,url:url}}})))}}DSOBreadcrumbResolver.\u0275fac=function DSOBreadcrumbResolver_Factory(t){return new(t||DSOBreadcrumbResolver)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275inject"](_dso_breadcrumbs_service__WEBPACK_IMPORTED_MODULE_1__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275inject"](_data_data_service__WEBPACK_IMPORTED_MODULE_2__.a))},DSOBreadcrumbResolver.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineInjectable"]({token:DSOBreadcrumbResolver,factory:DSOBreadcrumbResolver.\u0275fac,providedIn:"root"})},hxi3:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return CreateComColPageComponent}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),rxjs_operators__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("IzEk"),rxjs_operators__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("5+tZ"),_core_data_comcol_data_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("GR9Y"),_core_data_community_data_service__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("mrqg"),_core_services_route_service__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("ppE2"),_core_shared_operators__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("1QIV"),_empty_util__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("J3qs"),_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("lI3o"),_core_cache_models_request_param_model__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("Hl3I"),_core_data_request_service__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("X/78"),_angular_router__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("tyNb"),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("sYmb");class CreateComColPageComponent{constructor(dsoDataService,parentDataService,routeService,router,notificationsService,translate,requestService){this.dsoDataService=dsoDataService,this.parentDataService=parentDataService,this.routeService=routeService,this.router=router,this.notificationsService=notificationsService,this.translate=translate,this.requestService=requestService}ngOnInit(){this.parentUUID$=this.routeService.getQueryParameterValue("parent"),this.parentUUID$.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_1__.a)(1)).subscribe((parentID=>{Object(_empty_util__WEBPACK_IMPORTED_MODULE_7__.e)(parentID)&&(this.parentRD$=this.parentDataService.findById(parentID))}))}onSubmit(event){const dso=event.dso,uploader=event.uploader;this.parentUUID$.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_1__.a)(1),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.a)((uuid=>{const params=uuid?[new _core_cache_models_request_param_model__WEBPACK_IMPORTED_MODULE_9__.a("parent",uuid)]:[];return this.dsoDataService.create(dso,...params).pipe(Object(_core_shared_operators__WEBPACK_IMPORTED_MODULE_6__.j)())}))).subscribe((dsoRD=>{Object(_empty_util__WEBPACK_IMPORTED_MODULE_7__.h)(dsoRD)&&(this.newUUID=dsoRD.uuid,uploader.queue.length>0?this.dsoDataService.getLogoEndpoint(this.newUUID).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_1__.a)(1)).subscribe((href=>{uploader.options.url=href,uploader.uploadAll()})):this.navigateToNewPage(),this.dsoDataService.refreshCache(dsoRD)),this.notificationsService.success(null,this.translate.get(this.type.value+".create.notifications.success"))}))}navigateToHome(){this.router.navigate(["/home"])}navigateToNewPage(){Object(_empty_util__WEBPACK_IMPORTED_MODULE_7__.b)(this.newUUID)&&this.router.navigate([this.frontendURL+this.newUUID])}}CreateComColPageComponent.\u0275fac=function CreateComColPageComponent_Factory(t){return new(t||CreateComColPageComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_core_data_comcol_data_service__WEBPACK_IMPORTED_MODULE_3__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_core_data_community_data_service__WEBPACK_IMPORTED_MODULE_4__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_core_services_route_service__WEBPACK_IMPORTED_MODULE_5__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_11__.g),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_8__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_ngx_translate_core__WEBPACK_IMPORTED_MODULE_12__.e),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_core_data_request_service__WEBPACK_IMPORTED_MODULE_10__.a))},CreateComColPageComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineComponent"]({type:CreateComColPageComponent,selectors:[["ds-create-comcol"]],decls:0,vars:0,template:function CreateComColPageComponent_Template(rf,ctx){},encapsulation:2})},iprd:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return SearchPageModule}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),_angular_common__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("ofXK"),_core_core_module__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("pKmL"),_shared_shared_module__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("PCNd"),_shared_sidebar_sidebar_service__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("7LZ0"),_configuration_search_page_guard__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("0qhl"),_search_tracker_component__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("TrCT"),_statistics_statistics_module__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("9i+i"),_search_page_component__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("xSRh"),_shared_sidebar_filter_sidebar_filter_service__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("2XvB"),_core_shared_search_search_filter_service__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("kesd"),_core_shared_search_search_configuration_service__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("joI/"),_entity_groups_journal_entities_journal_entities_module__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("N0eT"),_entity_groups_research_entities_research_entities_module__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("udvk"),_themed_search_page_component__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("ONIj"),_shared_search_search_module__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("kMeL");_search_page_component__WEBPACK_IMPORTED_MODULE_8__.SearchPageComponent,_search_tracker_component__WEBPACK_IMPORTED_MODULE_6__.a,_themed_search_page_component__WEBPACK_IMPORTED_MODULE_14__.a;class SearchPageModule{}SearchPageModule.\u0275fac=function SearchPageModule_Factory(t){return new(t||SearchPageModule)},SearchPageModule.\u0275mod=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineNgModule"]({type:SearchPageModule}),SearchPageModule.\u0275inj=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineInjector"]({providers:[_shared_sidebar_sidebar_service__WEBPACK_IMPORTED_MODULE_4__.a,_shared_sidebar_filter_sidebar_filter_service__WEBPACK_IMPORTED_MODULE_9__.a,_core_shared_search_search_filter_service__WEBPACK_IMPORTED_MODULE_10__.c,_configuration_search_page_guard__WEBPACK_IMPORTED_MODULE_5__.a,_core_shared_search_search_configuration_service__WEBPACK_IMPORTED_MODULE_11__.a],imports:[[_angular_common__WEBPACK_IMPORTED_MODULE_1__.CommonModule,_shared_search_search_module__WEBPACK_IMPORTED_MODULE_15__.a,_shared_shared_module__WEBPACK_IMPORTED_MODULE_3__.a.withEntryComponents(),_core_core_module__WEBPACK_IMPORTED_MODULE_2__.a.forRoot(),_statistics_statistics_module__WEBPACK_IMPORTED_MODULE_7__.a.forRoot(),_entity_groups_journal_entities_journal_entities_module__WEBPACK_IMPORTED_MODULE_12__.a.withEntryComponents(),_entity_groups_research_entities_research_entities_module__WEBPACK_IMPORTED_MODULE_13__.a.withEntryComponents()]]})},ivcV:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ComcolPageLogoComponent}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),_angular_common__WEBPACK_IMPORTED_MODULE_2__=(__webpack_require__("PJyI"),__webpack_require__("ofXK"));function ComcolPageLogoComponent_div_0_Template(rf,ctx){if(1&rf){const _r2=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275getCurrentView"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div",1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](2,"img",2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("error",(function ComcolPageLogoComponent_div_0_Template_img_error_2_listener($event){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r2);return _angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]().errorHandler($event)})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3,"\n"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()}if(2&rf){const ctx_r0=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("src",ctx_r0.logo._links.content.href,_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275sanitizeUrl"]),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275attribute"]("alt",ctx_r0.alternateText?ctx_r0.alternateText:null)}}class ComcolPageLogoComponent{constructor(){this.holderSource="data:image/svg+xml;charset=UTF-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2293%22%20height%3D%22120%22%20viewBox%3D%220%200%2093%20120%22%20preserveAspectRatio%3D%22none%22%3E%3C!--%0ASource%20URL%3A%20holder.js%2F93x120%3Ftext%3DNo%20Thumbnail%0ACreated%20with%20Holder.js%202.8.2.%0ALearn%20more%20at%20http%3A%2F%2Fholderjs.com%0A(c)%202012-2015%20Ivan%20Malopinsky%20-%20http%3A%2F%2Fimsky.co%0A--%3E%3Cdefs%3E%3Cstyle%20type%3D%22text%2Fcss%22%3E%3C!%5BCDATA%5B%23holder_1543e460b05%20text%20%7B%20fill%3A%23AAAAAA%3Bfont-weight%3Abold%3Bfont-family%3AArial%2C%20Helvetica%2C%20Open%20Sans%2C%20sans-serif%2C%20monospace%3Bfont-size%3A10pt%20%7D%20%5D%5D%3E%3C%2Fstyle%3E%3C%2Fdefs%3E%3Cg%20id%3D%22holder_1543e460b05%22%3E%3Crect%20width%3D%2293%22%20height%3D%22120%22%20fill%3D%22%23EEEEEE%22%2F%3E%3Cg%3E%3Ctext%20x%3D%2235.6171875%22%20y%3D%2257%22%3ENo%3C%2Ftext%3E%3Ctext%20x%3D%2210.8125%22%20y%3D%2272%22%3EThumbnail%3C%2Ftext%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E"}errorHandler(event){event.currentTarget.src=this.holderSource}}ComcolPageLogoComponent.\u0275fac=function ComcolPageLogoComponent_Factory(t){return new(t||ComcolPageLogoComponent)},ComcolPageLogoComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineComponent"]({type:ComcolPageLogoComponent,selectors:[["ds-comcol-page-logo"]],inputs:{logo:"logo",alternateText:"alternateText"},decls:2,vars:1,consts:[["class","dso-logo mb-3",4,"ngIf"],[1,"dso-logo","mb-3"],[1,"img-fluid",3,"src","error"]],template:function ComcolPageLogoComponent_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](0,ComcolPageLogoComponent_div_0_Template,4,2,"div",0),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n")),2&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",ctx.logo)},directives:[_angular_common__WEBPACK_IMPORTED_MODULE_2__.NgIf],styles:[""]})},jrTz:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"g",(function(){return ITEM_EDIT_WITHDRAW_PATH})),__webpack_require__.d(__webpack_exports__,"f",(function(){return ITEM_EDIT_REINSTATE_PATH})),__webpack_require__.d(__webpack_exports__,"d",(function(){return ITEM_EDIT_PRIVATE_PATH})),__webpack_require__.d(__webpack_exports__,"e",(function(){return ITEM_EDIT_PUBLIC_PATH})),__webpack_require__.d(__webpack_exports__,"b",(function(){return ITEM_EDIT_DELETE_PATH})),__webpack_require__.d(__webpack_exports__,"c",(function(){return ITEM_EDIT_MOVE_PATH})),__webpack_require__.d(__webpack_exports__,"a",(function(){return ITEM_EDIT_AUTHORIZATIONS_PATH}));const ITEM_EDIT_WITHDRAW_PATH="withdraw",ITEM_EDIT_REINSTATE_PATH="reinstate",ITEM_EDIT_PRIVATE_PATH="private",ITEM_EDIT_PUBLIC_PATH="public",ITEM_EDIT_DELETE_PATH="delete",ITEM_EDIT_MOVE_PATH="move",ITEM_EDIT_AUTHORIZATIONS_PATH="authorizations"},kGaT:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ITEM_PAGE_LINKS_TO_FOLLOW})),__webpack_require__.d(__webpack_exports__,"b",(function(){return ItemResolver}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),_core_data_item_data_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("iqTE"),_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("84Zn"),_core_shared_operators__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("1QIV"),_core_resolving_resolver_actions__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("8jtY"),_ngrx_store__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("l7P3"),_angular_router__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("tyNb");const ITEM_PAGE_LINKS_TO_FOLLOW=[Object(_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_2__.a)("owningCollection",{},Object(_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_2__.a)("parentCommunity",{},Object(_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_2__.a)("parentCommunity"))),Object(_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_2__.a)("relationships"),Object(_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_2__.a)("version",{},Object(_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_2__.a)("versionhistory")),Object(_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_2__.a)("thumbnail")];class ItemResolver{constructor(itemService,store,router){this.itemService=itemService,this.store=store,this.router=router}resolve(route,state){const itemRD$=this.itemService.findById(route.params.id,!0,!1,...ITEM_PAGE_LINKS_TO_FOLLOW).pipe(Object(_core_shared_operators__WEBPACK_IMPORTED_MODULE_3__.g)());return itemRD$.subscribe((itemRD=>{this.store.dispatch(new _core_resolving_resolver_actions__WEBPACK_IMPORTED_MODULE_4__.a(state.url,itemRD.payload))})),itemRD$}}ItemResolver.\u0275fac=function ItemResolver_Factory(t){return new(t||ItemResolver)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275inject"](_core_data_item_data_service__WEBPACK_IMPORTED_MODULE_1__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275inject"](_ngrx_store__WEBPACK_IMPORTED_MODULE_5__.i),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275inject"](_angular_router__WEBPACK_IMPORTED_MODULE_6__.g))},ItemResolver.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineInjectable"]({token:ItemResolver,factory:ItemResolver.\u0275fac})},kcqd:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return FormModule}));var core=__webpack_require__("fXoL"),common=__webpack_require__("ofXK"),form_component=__webpack_require__("hqmO"),fesm2015_core=__webpack_require__("e+Av"),ds_dynamic_form_control_container_component=__webpack_require__("NvTF");function DsDynamicFormComponent_ds_dynamic_form_control_container_0_Template(rf,ctx){if(1&rf){const _r3=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementStart"](0,"ds-dynamic-form-control-container",1),core["\u0275\u0275listener"]("dfBlur",(function DsDynamicFormComponent_ds_dynamic_form_control_container_0_Template_ds_dynamic_form_control_container_dfBlur_0_listener($event){core["\u0275\u0275restoreView"](_r3);const ctx_r2=core["\u0275\u0275nextContext"]();return ctx_r2.onCustomEvent($event,ctx_r2.blur)}))("dfChange",(function DsDynamicFormComponent_ds_dynamic_form_control_container_0_Template_ds_dynamic_form_control_container_dfChange_0_listener($event){core["\u0275\u0275restoreView"](_r3);const ctx_r4=core["\u0275\u0275nextContext"]();return ctx_r4.onCustomEvent($event,ctx_r4.change)}))("dfFocus",(function DsDynamicFormComponent_ds_dynamic_form_control_container_0_Template_ds_dynamic_form_control_container_dfFocus_0_listener($event){core["\u0275\u0275restoreView"](_r3);const ctx_r5=core["\u0275\u0275nextContext"]();return ctx_r5.onCustomEvent($event,ctx_r5.focus)}))("ngbEvent",(function DsDynamicFormComponent_ds_dynamic_form_control_container_0_Template_ds_dynamic_form_control_container_ngbEvent_0_listener($event){core["\u0275\u0275restoreView"](_r3);const ctx_r6=core["\u0275\u0275nextContext"]();return ctx_r6.onCustomEvent($event,ctx_r6.ngbEvent)})),core["\u0275\u0275elementEnd"]()}if(2&rf){const model_r1=ctx.$implicit,ctx_r0=core["\u0275\u0275nextContext"]();core["\u0275\u0275property"]("formId",ctx_r0.formId)("group",ctx_r0.formGroup)("hasErrorMessaging",model_r1.hasErrorMessages)("hidden",model_r1.hidden)("layout",ctx_r0.formLayout)("model",model_r1)("templates",ctx_r0.templates)("asBootstrapFormGroup",!0)}}class ds_dynamic_form_component_DsDynamicFormComponent extends fesm2015_core.x{constructor(changeDetectorRef,componentService){super(changeDetectorRef,componentService),this.blur=new core.EventEmitter,this.change=new core.EventEmitter,this.focus=new core.EventEmitter,this.ngbEvent=new core.EventEmitter}}ds_dynamic_form_component_DsDynamicFormComponent.\u0275fac=function DsDynamicFormComponent_Factory(t){return new(t||ds_dynamic_form_component_DsDynamicFormComponent)(core["\u0275\u0275directiveInject"](core.ChangeDetectorRef),core["\u0275\u0275directiveInject"](fesm2015_core.y))},ds_dynamic_form_component_DsDynamicFormComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:ds_dynamic_form_component_DsDynamicFormComponent,selectors:[["ds-dynamic-form"]],contentQueries:function DsDynamicFormComponent_ContentQueries(rf,ctx,dirIndex){if(1&rf&&core["\u0275\u0275contentQuery"](dirIndex,fesm2015_core.O,0),2&rf){let _t;core["\u0275\u0275queryRefresh"](_t=core["\u0275\u0275loadQuery"]())&&(ctx.templates=_t)}},viewQuery:function DsDynamicFormComponent_Query(rf,ctx){if(1&rf&&core["\u0275\u0275viewQuery"](ds_dynamic_form_control_container_component.a,1),2&rf){let _t;core["\u0275\u0275queryRefresh"](_t=core["\u0275\u0275loadQuery"]())&&(ctx.components=_t)}},inputs:{formId:"formId",formGroup:"formGroup",formModel:"formModel",formLayout:"formLayout"},outputs:{blur:"dfBlur",change:"dfChange",focus:"dfFocus",ngbEvent:"ngbEvent"},features:[core["\u0275\u0275InheritDefinitionFeature"]],decls:2,vars:2,consts:[[3,"formId","group","hasErrorMessaging","hidden","layout","model","templates","asBootstrapFormGroup","dfBlur","dfChange","dfFocus","ngbEvent",4,"ngFor","ngForOf","ngForTrackBy"],[3,"formId","group","hasErrorMessaging","hidden","layout","model","templates","asBootstrapFormGroup","dfBlur","dfChange","dfFocus","ngbEvent"]],template:function DsDynamicFormComponent_Template(rf,ctx){1&rf&&(core["\u0275\u0275template"](0,DsDynamicFormComponent_ds_dynamic_form_control_container_0_Template,1,8,"ds-dynamic-form-control-container",0),core["\u0275\u0275text"](1,"\n")),2&rf&&core["\u0275\u0275property"]("ngForOf",ctx.formModel)("ngForTrackBy",ctx.trackByFn)},directives:[common.NgForOf,ds_dynamic_form_control_container_component.a],encapsulation:2});var dynamic_list_component=__webpack_require__("ZO65"),dynamic_lookup_component=__webpack_require__("0pnk"),dynamic_disabled_component=__webpack_require__("sw+l"),dynamic_lookup_relation_modal_component=__webpack_require__("1Pbu"),dynamic_scrollable_dropdown_component=__webpack_require__("bPV6"),dynamic_tag_component=__webpack_require__("Gu/b"),dynamic_onebox_component=__webpack_require__("A/iK"),dynamic_relation_group_components=__webpack_require__("KKO+"),date_picker_component=__webpack_require__("Ysrn"),dynamic_form_group_component=__webpack_require__("tqJZ"),dynamic_form_array_component=__webpack_require__("ZTun"),dynamic_date_picker_inline_component=__webpack_require__("uyTL"),dynamic_lookup_relation_search_tab_component=__webpack_require__("Ui2r"),dynamic_lookup_relation_selection_tab_component=__webpack_require__("8HnP"),dynamic_lookup_relation_external_source_tab_component=__webpack_require__("zVKZ"),shared_module=__webpack_require__("PCNd"),ngx_translate_core=__webpack_require__("sYmb"),search_module=__webpack_require__("kMeL"),existing_metadata_list_element_component=__webpack_require__("yXJd"),existing_relation_list_element_component=__webpack_require__("/Vzl"),external_source_entry_import_modal_component=__webpack_require__("zGzN"),custom_switch_component=__webpack_require__("xjoE"),ui_ng_bootstrap=__webpack_require__("n7Wa"),fesm2015_forms=__webpack_require__("3Pt+"),drag_drop=__webpack_require__("5+WD");custom_switch_component.a,ds_dynamic_form_control_container_component.a,dynamic_list_component.a,dynamic_lookup_component.a,dynamic_lookup_relation_search_tab_component.a,dynamic_lookup_relation_selection_tab_component.a,dynamic_lookup_relation_external_source_tab_component.a,dynamic_disabled_component.a,dynamic_lookup_relation_modal_component.a,dynamic_scrollable_dropdown_component.a,dynamic_tag_component.a,dynamic_onebox_component.a,dynamic_relation_group_components.a,date_picker_component.b,dynamic_form_group_component.a,dynamic_form_array_component.a,dynamic_date_picker_inline_component.a,existing_metadata_list_element_component.a,existing_relation_list_element_component.a,external_source_entry_import_modal_component.a,form_component.a;class FormModule{}FormModule.\u0275fac=function FormModule_Factory(t){return new(t||FormModule)},FormModule.\u0275mod=core["\u0275\u0275defineNgModule"]({type:FormModule}),FormModule.\u0275inj=core["\u0275\u0275defineInjector"]({providers:[{provide:fesm2015_core.c,useValue:ds_dynamic_form_control_container_component.b}],imports:[[common.CommonModule,fesm2015_core.I,ui_ng_bootstrap.a,search_module.a,shared_module.a,ngx_translate_core.c]]}),core["\u0275\u0275setComponentScope"](dynamic_form_group_component.a,[fesm2015_forms.NgControlStatusGroup,fesm2015_forms.FormGroupDirective,fesm2015_forms.FormGroupName,common.NgClass,common.NgForOf,ds_dynamic_form_control_container_component.a],[]),core["\u0275\u0275setComponentScope"](dynamic_form_array_component.a,[fesm2015_forms.NgControlStatusGroup,fesm2015_forms.FormGroupDirective,fesm2015_forms.FormArrayName,common.NgClass,drag_drop.c,common.NgForOf,drag_drop.a,drag_drop.b,fesm2015_forms.FormGroupName,common.NgTemplateOutlet,ds_dynamic_form_control_container_component.a],[]),core["\u0275\u0275setComponentScope"](form_component.a,[fesm2015_forms["\u0275angular_packages_forms_forms_ba"],fesm2015_forms.NgControlStatusGroup,fesm2015_forms.FormGroupDirective,ds_dynamic_form_component_DsDynamicFormComponent,fesm2015_core.O,common.NgIf],[ngx_translate_core.d,common.AsyncPipe])},mOAm:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return GROUP_EDIT_PATH})),__webpack_require__.d(__webpack_exports__,"b",(function(){return getGroupEditRoute}));var _core_url_combiner_url_combiner__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("zZO8"),_app_routing_paths__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("TVZh");const GROUP_EDIT_PATH="groups";function getGroupEditRoute(id){return new _core_url_combiner_url_combiner__WEBPACK_IMPORTED_MODULE_0__.a(Object(_app_routing_paths__WEBPACK_IMPORTED_MODULE_1__.m)(),GROUP_EDIT_PATH,id).toString()}},mXNY:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ViewTrackerComponent}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),angulartics2__WEBPACK_IMPORTED_MODULE_2__=(__webpack_require__("WIyL"),__webpack_require__("wQXg"));class ViewTrackerComponent{constructor(angulartics2){this.angulartics2=angulartics2}ngOnInit(){this.angulartics2.eventTrack.next({action:"pageView",properties:{object:this.object}})}}ViewTrackerComponent.\u0275fac=function ViewTrackerComponent_Factory(t){return new(t||ViewTrackerComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](angulartics2__WEBPACK_IMPORTED_MODULE_2__.a))},ViewTrackerComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineComponent"]({type:ViewTrackerComponent,selectors:[["ds-view-tracker"]],inputs:{object:"object"},decls:1,vars:0,template:function ViewTrackerComponent_Template(rf,ctx){1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](0,"\xa0\n")},styles:["[_nghost-%COMP%]{display:none}"]})},mo41:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return EditInPlaceFieldComponent}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),_core_shared_operators__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("1QIV"),_shared_empty_util__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("J3qs"),_core_registry_registry_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("Y6Ni"),lodash__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("LvDl"),rxjs__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("2Vo4"),rxjs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("LRne"),rxjs_operators__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("lJxs"),_core_data_object_updates_object_updates_actions__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("X8f1"),_core_data_object_updates_object_updates_service__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("loKC"),_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_11__=(__webpack_require__("cBt8"),__webpack_require__("84Zn")),_angular_common__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("ofXK"),_shared_input_suggestions_validation_suggestions_validation_suggestions_component__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("8pnQ"),_shared_utils_auto_focus_directive__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("aojn"),_angular_forms__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("3Pt+"),_shared_utils_click_outside_directive__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("awfb"),_shared_utils_debounce_directive__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("jOLk"),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("sYmb");function EditInPlaceFieldComponent_div_4_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n            "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](2,"span"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](4,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()),2&rf){const ctx_r0=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](null==ctx_r0.metadata||null==ctx_r0.metadata.key?null:ctx_r0.metadata.key.split(".").join(".\u200b"))}}const _c1=function(){return{standalone:!0}};function EditInPlaceFieldComponent_div_7_Template(rf,ctx){if(1&rf){const _r11=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275getCurrentView"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div",15),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n            "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](2,"ds-validation-suggestions",16,17),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("ngModelChange",(function EditInPlaceFieldComponent_div_7_Template_ds_validation_suggestions_ngModelChange_2_listener($event){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r11);return _angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]().metadata.key=$event}))("submitSuggestion",(function EditInPlaceFieldComponent_div_7_Template_ds_validation_suggestions_submitSuggestion_2_listener(){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r11);const _r9=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275reference"](3);return _angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]().update(_r9)}))("clickSuggestion",(function EditInPlaceFieldComponent_div_7_Template_ds_validation_suggestions_clickSuggestion_2_listener(){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r11);const _r9=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275reference"](3);return _angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]().update(_r9)}))("typeSuggestion",(function EditInPlaceFieldComponent_div_7_Template_ds_validation_suggestions_typeSuggestion_2_listener(){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r11);const _r9=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275reference"](3);return _angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]().update(_r9)}))("dsClickOutside",(function EditInPlaceFieldComponent_div_7_Template_ds_validation_suggestions_dsClickOutside_2_listener(){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r11);const _r9=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275reference"](3);return _angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]().checkValidity(_r9)}))("findSuggestions",(function EditInPlaceFieldComponent_div_7_Template_ds_validation_suggestions_findSuggestions_2_listener($event){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r11);return _angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]().findMetadataFieldSuggestions($event)})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](4,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](5,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](6,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()}if(2&rf){const ctx_r1=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("disable",1!=ctx_r1.fieldUpdate.changeType)("suggestions",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](4,7,ctx_r1.metadataFieldSuggestions))("ngModel",ctx_r1.metadata.key)("url",ctx_r1.url)("metadata",ctx_r1.metadata)("valid",!1!==_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](5,9,ctx_r1.valid))("ngModelOptions",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pureFunction0"](11,_c1))}}function EditInPlaceFieldComponent_small_10_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"small",18),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](2,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](2,1,"item.edit.metadata.metadatafield.invalid")))}function EditInPlaceFieldComponent_div_19_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n            "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](2,"span",19),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](4,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()),2&rf){const ctx_r3=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](null==ctx_r3.metadata?null:ctx_r3.metadata.value)}}function EditInPlaceFieldComponent_div_22_Template(rf,ctx){if(1&rf){const _r18=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275getCurrentView"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div",15),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n            "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](2,"textarea",20),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("ngModelChange",(function EditInPlaceFieldComponent_div_22_Template_textarea_ngModelChange_2_listener($event){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r18);return _angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]().metadata.value=$event}))("onDebounce",(function EditInPlaceFieldComponent_div_22_Template_textarea_onDebounce_2_listener(){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r18);return _angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]().update()})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()}if(2&rf){const ctx_r4=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngModel",ctx_r4.metadata.value)}}function EditInPlaceFieldComponent_div_31_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n            "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](2,"span"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](4,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()),2&rf){const ctx_r5=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](null==ctx_r5.metadata?null:ctx_r5.metadata.language)}}function EditInPlaceFieldComponent_div_34_Template(rf,ctx){if(1&rf){const _r21=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275getCurrentView"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div",15),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n            "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](2,"input",21),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("ngModelChange",(function EditInPlaceFieldComponent_div_34_Template_input_ngModelChange_2_listener($event){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r21);return _angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]().metadata.language=$event}))("onDebounce",(function EditInPlaceFieldComponent_div_34_Template_input_onDebounce_2_listener(){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r21);return _angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]().update()})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()}if(2&rf){const ctx_r6=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngModel",ctx_r6.metadata.language)}}function EditInPlaceFieldComponent_button_43_Template(rf,ctx){if(1&rf){const _r24=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275getCurrentView"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"button",22),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("click",(function EditInPlaceFieldComponent_button_43_Template_button_click_0_listener(){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r24);return _angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]().setEditable(!0)})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](1,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](2,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3,"\n            "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](4,"i",23),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](5,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()}if(2&rf){const ctx_r7=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275propertyInterpolate"]("title",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](2,4,"item.edit.metadata.edit.buttons.edit")),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("disabled",!_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](1,2,ctx_r7.canSetEditable()))}}function EditInPlaceFieldComponent_button_46_Template(rf,ctx){if(1&rf){const _r26=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275getCurrentView"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"button",24),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("click",(function EditInPlaceFieldComponent_button_46_Template_button_click_0_listener(){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r26);return _angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]().setEditable(!1)})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](1,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](2,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](3,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](4,"\n            "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](5,"i",25),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](6,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()}if(2&rf){const ctx_r8=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275propertyInterpolate"]("title",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](3,6,"item.edit.metadata.edit.buttons.unedit")),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("disabled",!_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](1,2,ctx_r8.canSetUneditable())||!1===_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](2,4,ctx_r8.valid))}}class EditInPlaceFieldComponent{constructor(registryService,objectUpdatesService){this.registryService=registryService,this.objectUpdatesService=objectUpdatesService,this.metadataFieldSuggestions=new rxjs__WEBPACK_IMPORTED_MODULE_5__.a([])}ngOnInit(){this.editable=this.objectUpdatesService.isEditable(this.url,this.metadata.uuid),this.valid=this.objectUpdatesService.isValid(this.url,this.metadata.uuid)}update(ngModel){this.objectUpdatesService.saveChangeFieldUpdate(this.url,Object(lodash__WEBPACK_IMPORTED_MODULE_4__.cloneDeep)(this.metadata)),Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_2__.b)(ngModel)&&this.checkValidity(ngModel)}checkValidity(ngModel){ngModel.control.setValue(ngModel.viewModel),ngModel.control.updateValueAndValidity(),this.objectUpdatesService.setValidFieldUpdate(this.url,this.metadata.uuid,ngModel.control.valid)}setEditable(editable){this.objectUpdatesService.setEditableFieldUpdate(this.url,this.metadata.uuid,editable)}remove(){this.objectUpdatesService.saveRemoveFieldUpdate(this.url,Object(lodash__WEBPACK_IMPORTED_MODULE_4__.cloneDeep)(this.metadata))}removeChangesFromField(){this.objectUpdatesService.removeSingleFieldUpdate(this.url,this.metadata.uuid)}ngOnChanges(){this.metadata=Object(lodash__WEBPACK_IMPORTED_MODULE_4__.cloneDeep)(this.fieldUpdate.field)}findMetadataFieldSuggestions(query){if(Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_2__.e)(query))return this.registryService.queryMetadataFields(query,null,!0,!1,Object(_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_11__.a)("schema")).pipe(Object(_core_shared_operators__WEBPACK_IMPORTED_MODULE_1__.i)(),Object(_core_shared_operators__WEBPACK_IMPORTED_MODULE_1__.r)()).subscribe((fieldNames=>{this.setInputSuggestions(fieldNames)}));this.metadataFieldSuggestions.next([])}setInputSuggestions(fields){this.metadataFieldSuggestions.next(fields.map((fieldName=>({displayValue:fieldName.split(".").join(".&#8203;"),value:fieldName}))))}canSetEditable(){return this.editable.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.a)((editable=>!editable&&this.fieldUpdate.changeType!==_core_data_object_updates_object_updates_actions__WEBPACK_IMPORTED_MODULE_8__.c.REMOVE)))}canSetUneditable(){return this.editable}canRemove(){return Object(rxjs__WEBPACK_IMPORTED_MODULE_6__.a)(this.fieldUpdate.changeType!==_core_data_object_updates_object_updates_actions__WEBPACK_IMPORTED_MODULE_8__.c.REMOVE&&this.fieldUpdate.changeType!==_core_data_object_updates_object_updates_actions__WEBPACK_IMPORTED_MODULE_8__.c.ADD)}canUndo(){return this.editable.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.a)((editable=>this.fieldUpdate.changeType>=0||editable)))}isNotEmpty(value){return Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_2__.e)(value)}}EditInPlaceFieldComponent.\u0275fac=function EditInPlaceFieldComponent_Factory(t){return new(t||EditInPlaceFieldComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_core_registry_registry_service__WEBPACK_IMPORTED_MODULE_3__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_core_data_object_updates_object_updates_service__WEBPACK_IMPORTED_MODULE_9__.a))},EditInPlaceFieldComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineComponent"]({type:EditInPlaceFieldComponent,selectors:[["","ds-edit-in-place-field",""]],inputs:{fieldUpdate:"fieldUpdate",url:"url",metadata:"metadata"},features:[_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275NgOnChangesFeature"]],attrs:["ds-edit-in-place-field",""],decls:65,vars:39,consts:[[1,"metadata-field"],[4,"ngIf"],["class","field-container",4,"ngIf"],["class","text-danger",4,"ngIf"],[1,"w-100"],[1,"value-field"],[1,"text-center"],[1,"language-field"],[1,"btn-group","edit-field"],["class","btn btn-outline-primary btn-sm",3,"disabled","title","click",4,"ngIf"],["class","btn btn-outline-success btn-sm",3,"disabled","title","click",4,"ngIf"],[1,"btn","btn-outline-danger","btn-sm",3,"disabled","title","click"],[1,"fas","fa-trash-alt","fa-fw"],[1,"btn","btn-outline-warning","btn-sm",3,"disabled","title","click"],[1,"fas","fa-undo-alt","fa-fw"],[1,"field-container"],["dsAutoFocus","","autoFocusSelector",".suggestion_input",3,"disable","suggestions","ngModel","url","metadata","valid","ngModelOptions","ngModelChange","submitSuggestion","clickSuggestion","typeSuggestion","dsClickOutside","findSuggestions"],["suggestionControl","ngModel"],[1,"text-danger"],[1,"dont-break-out"],["type","textarea","attr.aria-labelledby","fieldValue",1,"form-control",3,"ngModel","dsDebounce","ngModelChange","onDebounce"],["type","text","attr.aria-labelledby","fieldLang",1,"form-control",3,"ngModel","dsDebounce","ngModelChange","onDebounce"],[1,"btn","btn-outline-primary","btn-sm",3,"disabled","title","click"],[1,"fas","fa-edit","fa-fw"],[1,"btn","btn-outline-success","btn-sm",3,"disabled","title","click"],[1,"fas","fa-check","fa-fw"]],template:function EditInPlaceFieldComponent_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"td"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](2,"div",0),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](4,EditInPlaceFieldComponent_div_4_Template,5,1,"div",1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](5,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](6,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](7,EditInPlaceFieldComponent_div_7_Template,7,12,"div",2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](8,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](9,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](10,EditInPlaceFieldComponent_small_10_Template,3,3,"small",3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](11,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](12,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](13,"\n"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](14,"\n"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](15,"td",4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](16,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](17,"div",5),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](18,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](19,EditInPlaceFieldComponent_div_19_Template,5,1,"div",1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](20,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](21,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](22,EditInPlaceFieldComponent_div_22_Template,4,1,"div",2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](23,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](24,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](25,"\n"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](26,"\n"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](27,"td",6),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](28,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](29,"div",7),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](30,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](31,EditInPlaceFieldComponent_div_31_Template,5,1,"div",1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](32,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](33,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](34,EditInPlaceFieldComponent_div_34_Template,4,1,"div",2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](35,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](36,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](37,"\n"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](38,"\n"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](39,"td",6),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](40,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](41,"div",8),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](42,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](43,EditInPlaceFieldComponent_button_43_Template,6,6,"button",9),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](44,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](45,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](46,EditInPlaceFieldComponent_button_46_Template,7,8,"button",10),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](47,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](48,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](49,"button",11),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("click",(function EditInPlaceFieldComponent_Template_button_click_49_listener(){return ctx.remove()})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](50,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](51,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](52,"\n            "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](53,"i",12),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](54,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](55,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](56,"button",13),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("click",(function EditInPlaceFieldComponent_Template_button_click_56_listener(){return ctx.removeChangesFromField()})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](57,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](58,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](59,"\n            "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](60,"i",14),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](61,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](62,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](63,"\n"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](64,"\n")),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",!_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](5,13,ctx.editable)),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](8,15,ctx.editable)),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",!1===_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](11,17,ctx.valid)),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](9),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",!_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](20,19,ctx.editable)),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](23,21,ctx.editable)),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](9),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",!_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](32,23,ctx.editable)),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](35,25,ctx.editable)),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](9),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",!_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](44,27,ctx.editable)),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](47,29,ctx.editable)),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275propertyInterpolate"]("title",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](51,33,"item.edit.metadata.edit.buttons.remove")),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("disabled",!_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](50,31,ctx.canRemove())),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](7),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275propertyInterpolate"]("title",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](58,37,"item.edit.metadata.edit.buttons.undo")),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("disabled",!_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](57,35,ctx.canUndo())))},directives:[_angular_common__WEBPACK_IMPORTED_MODULE_12__.NgIf,_shared_input_suggestions_validation_suggestions_validation_suggestions_component__WEBPACK_IMPORTED_MODULE_13__.a,_shared_utils_auto_focus_directive__WEBPACK_IMPORTED_MODULE_14__.a,_angular_forms__WEBPACK_IMPORTED_MODULE_15__.NgControlStatus,_angular_forms__WEBPACK_IMPORTED_MODULE_15__.NgModel,_shared_utils_click_outside_directive__WEBPACK_IMPORTED_MODULE_16__.a,_angular_forms__WEBPACK_IMPORTED_MODULE_15__.DefaultValueAccessor,_shared_utils_debounce_directive__WEBPACK_IMPORTED_MODULE_17__.a],pipes:[_angular_common__WEBPACK_IMPORTED_MODULE_12__.AsyncPipe,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_18__.d],styles:[".btn[disabled][_ngcontent-%COMP%]{color:var(--bs-gray-600);border-color:var(--bs-gray-600);z-index:0}.metadata-field[_ngcontent-%COMP%]{width:var(--ds-edit-item-metadata-field-width)}.language-field[_ngcontent-%COMP%]{width:var(--ds-edit-item-language-field-width)}"]})},n1Qy:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ResourcePolicyTargetResolver}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),_core_cache_builders_build_decorators__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("zQ+x"),_core_shared_resource_type__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("+1Sv"),_empty_util__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("J3qs"),_core_shared_operators__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("1QIV"),_angular_router__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("tyNb");class ResourcePolicyTargetResolver{constructor(parentInjector,router){this.parentInjector=parentInjector,this.router=router}resolve(route,state){const targetType=route.queryParamMap.get("targetType"),policyTargetId=route.queryParamMap.get("policyTargetId");(Object(_empty_util__WEBPACK_IMPORTED_MODULE_3__.d)(targetType)||Object(_empty_util__WEBPACK_IMPORTED_MODULE_3__.d)(policyTargetId))&&this.router.navigateByUrl("/404",{skipLocationChange:!0});const provider=Object(_core_cache_builders_build_decorators__WEBPACK_IMPORTED_MODULE_1__.f)(new _core_shared_resource_type__WEBPACK_IMPORTED_MODULE_2__.a(targetType));return this.dataService=_angular_core__WEBPACK_IMPORTED_MODULE_0__.Injector.create({providers:[],parent:this.parentInjector}).get(provider),this.dataService.findById(policyTargetId).pipe(Object(_core_shared_operators__WEBPACK_IMPORTED_MODULE_4__.g)())}}ResourcePolicyTargetResolver.\u0275fac=function ResourcePolicyTargetResolver_Factory(t){return new(t||ResourcePolicyTargetResolver)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275inject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__.Injector),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275inject"](_angular_router__WEBPACK_IMPORTED_MODULE_5__.g))},ResourcePolicyTargetResolver.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineInjectable"]({token:ResourcePolicyTargetResolver,factory:ResourcePolicyTargetResolver.\u0275fac})},n7C5:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return COLLECTION_PAGE_LINKS_TO_FOLLOW})),__webpack_require__.d(__webpack_exports__,"b",(function(){return CollectionPageResolver}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),_core_data_collection_data_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("DNva"),_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("84Zn"),_core_shared_operators__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("1QIV"),_core_resolving_resolver_actions__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("8jtY"),_ngrx_store__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("l7P3");const COLLECTION_PAGE_LINKS_TO_FOLLOW=[Object(_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_2__.a)("parentCommunity",{},Object(_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_2__.a)("parentCommunity")),Object(_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_2__.a)("logo")];class CollectionPageResolver{constructor(collectionService,store){this.collectionService=collectionService,this.store=store}resolve(route,state){const collectionRD$=this.collectionService.findById(route.params.id,!0,!1,...COLLECTION_PAGE_LINKS_TO_FOLLOW).pipe(Object(_core_shared_operators__WEBPACK_IMPORTED_MODULE_3__.g)());return collectionRD$.subscribe((collectionRD=>{this.store.dispatch(new _core_resolving_resolver_actions__WEBPACK_IMPORTED_MODULE_4__.a(state.url,collectionRD.payload))})),collectionRD$}}CollectionPageResolver.\u0275fac=function CollectionPageResolver_Factory(t){return new(t||CollectionPageResolver)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275inject"](_core_data_collection_data_service__WEBPACK_IMPORTED_MODULE_1__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275inject"](_ngrx_store__WEBPACK_IMPORTED_MODULE_5__.i))},CollectionPageResolver.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineInjectable"]({token:CollectionPageResolver,factory:CollectionPageResolver.\u0275fac})},nVrp:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return CollectionFormModule}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),_shared_shared_module__WEBPACK_IMPORTED_MODULE_2__=(__webpack_require__("+6qv"),__webpack_require__("PCNd")),_shared_comcol_comcol_module__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("fY2w"),_shared_form_form_module__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("kcqd");class CollectionFormModule{}CollectionFormModule.\u0275fac=function CollectionFormModule_Factory(t){return new(t||CollectionFormModule)},CollectionFormModule.\u0275mod=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineNgModule"]({type:CollectionFormModule}),CollectionFormModule.\u0275inj=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineInjector"]({imports:[[_shared_comcol_comcol_module__WEBPACK_IMPORTED_MODULE_3__.a,_shared_form_form_module__WEBPACK_IMPORTED_MODULE_4__.a,_shared_shared_module__WEBPACK_IMPORTED_MODULE_2__.a]]})},pBGb:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return CollectionItemMapperComponent}));var rxjs__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("2Vo4"),rxjs__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("itXk"),_angular_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("fXoL"),_core_breadcrumbs_dso_name_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("C765"),_shared_animations_fade__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("mEo1"),rxjs_operators__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("lJxs"),rxjs_operators__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("eIep"),rxjs_operators__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("JX91"),rxjs_operators__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("IzEk"),_core_shared_operators__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("1QIV"),_core_shared_dspace_object_type_model__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("QhmN"),_core_cache_models_sort_options_model__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("qc8P"),_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("lI3o"),_core_data_item_data_service__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("iqTE"),_core_data_collection_data_service__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("DNva"),_shared_empty_util__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("J3qs"),_my_dspace_page_my_dspace_page_component__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("dtp9"),_core_shared_search_search_configuration_service__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("joI/"),_shared_search_models_paginated_search_options_model__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("R7cy"),_core_shared_search_search_service__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("gWc+"),_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("84Zn"),_core_data_feature_authorization_feature_id__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("FU+A"),_angular_router__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__("tyNb"),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__("sYmb"),_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__("1kSV"),_shared_object_select_item_select_item_select_component__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__("Oupr"),_shared_search_form_search_form_component__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__("DdXh"),_angular_common__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__("ofXK");const _c0=["tabs"];function CollectionItemMapperComponent_ng_template_27_Template(rf,ctx){if(1&rf){const _r4=_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275getCurrentView"]();_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275text"](0,"\n            "),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275elementStart"](1,"div",10),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275text"](2,"\n              "),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275elementStart"](3,"ds-item-select",11),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275listener"]("confirm",(function CollectionItemMapperComponent_ng_template_27_Template_ds_item_select_confirm_3_listener($event){_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275restoreView"](_r4);return _angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275nextContext"]().mapItems($event,!0)}))("cancel",(function CollectionItemMapperComponent_ng_template_27_Template_ds_item_select_cancel_3_listener(){_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275restoreView"](_r4);return _angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275nextContext"]().onCancel()})),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275pipe"](4,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275text"](5,"\n            "),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275text"](6,"\n          ")}if(2&rf){const ctx_r1=_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275nextContext"]();let tmp_2_0=null;_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275property"]("key","browse")("dsoRD$",ctx_r1.collectionItemsRD$)("paginationOptions",null==(tmp_2_0=_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275pipeBind1"](4,7,ctx_r1.searchOptions$))?null:tmp_2_0.pagination)("confirmButton","collection.edit.item-mapper.remove")("cancelButton","collection.edit.item-mapper.cancel")("dangerConfirm",!0)("hideCollection",!0)}}function CollectionItemMapperComponent_ng_template_36_div_13_Template(rf,ctx){if(1&rf){const _r9=_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275getCurrentView"]();_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275elementStart"](0,"div"),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275text"](1,"\n              "),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275elementStart"](2,"ds-item-select",17),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275listener"]("confirm",(function CollectionItemMapperComponent_ng_template_36_div_13_Template_ds_item_select_confirm_2_listener($event){_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275restoreView"](_r9);return _angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275nextContext"](2).mapItems($event)}))("cancel",(function CollectionItemMapperComponent_ng_template_36_div_13_Template_ds_item_select_cancel_2_listener(){_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275restoreView"](_r9);return _angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275nextContext"](2).onCancel()})),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275pipe"](3,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275text"](4,"\n            "),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275elementEnd"]()}if(2&rf){const ctx_r6=_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275nextContext"](2);let tmp_2_0=null;_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275property"]("key","map")("dsoRD$",ctx_r6.mappedItemsRD$)("paginationOptions",null==(tmp_2_0=_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275pipeBind1"](3,6,ctx_r6.searchOptions$))?null:tmp_2_0.pagination)("featureId",ctx_r6.FeatureIds.CanManageMappings)("confirmButton","collection.edit.item-mapper.confirm")("cancelButton","collection.edit.item-mapper.cancel")}}function CollectionItemMapperComponent_ng_template_36_div_15_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275elementStart"](0,"div",18),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275text"](1),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275pipe"](2,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275elementEnd"]()),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275advance"](1),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275textInterpolate1"]("\n              ",_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275pipeBind1"](2,1,"collection.edit.item-mapper.no-search"),"\n            "))}function CollectionItemMapperComponent_ng_template_36_Template(rf,ctx){if(1&rf){const _r12=_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275getCurrentView"]();_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275text"](0,"\n            "),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275elementStart"](1,"div",12),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275text"](2,"\n              "),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275elementStart"](3,"div",13),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275text"](4,"\n                "),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275elementStart"](5,"ds-search-form",14),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275listener"]("submitSearch",(function CollectionItemMapperComponent_ng_template_36_Template_ds_search_form_submitSearch_5_listener(){_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275restoreView"](_r12);return _angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275nextContext"]().performedSearch=!0})),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275pipe"](6,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275pipe"](7,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275pipe"](8,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275text"](9,"\n                "),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275text"](10,"\n              "),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275text"](11,"\n            "),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275text"](12,"\n\n            "),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275template"](13,CollectionItemMapperComponent_ng_template_36_div_13_Template,5,8,"div",15),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275text"](14,"\n            "),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275template"](15,CollectionItemMapperComponent_ng_template_36_div_15_Template,3,3,"div",16),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275text"](16,"\n          ")}if(2&rf){const ctx_r2=_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275nextContext"]();let tmp_0_0=null,tmp_1_0=null;_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275advance"](5),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275property"]("query",null==(tmp_0_0=_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275pipeBind1"](6,7,ctx_r2.searchOptions$))?null:tmp_0_0.query)("scope",null==(tmp_1_0=_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275pipeBind1"](7,9,ctx_r2.searchOptions$))?null:tmp_1_0.scope)("currentUrl","./")("inPlaceSearch",!0)("searchPlaceholder",_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275pipeBind1"](8,11,"collection.edit.item-mapper.search-form.placeholder")),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275advance"](8),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275property"]("ngIf",ctx_r2.performedSearch),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275property"]("ngIf",!ctx_r2.performedSearch)}}const _c1=function(a0){return{name:a0}};class CollectionItemMapperComponent{constructor(route,router,searchConfigService,searchService,notificationsService,itemDataService,collectionDataService,translateService,dsoNameService){this.route=route,this.router=router,this.searchConfigService=searchConfigService,this.searchService=searchService,this.notificationsService=notificationsService,this.itemDataService=itemDataService,this.collectionDataService=collectionDataService,this.translateService=translateService,this.dsoNameService=dsoNameService,this.FeatureIds=_core_data_feature_authorization_feature_id__WEBPACK_IMPORTED_MODULE_21__.a,this.defaultSortOptions=new _core_cache_models_sort_options_model__WEBPACK_IMPORTED_MODULE_11__.b("dc.title",_core_cache_models_sort_options_model__WEBPACK_IMPORTED_MODULE_11__.a.ASC),this.performedSearch=!1}ngOnInit(){this.collectionRD$=this.route.parent.data.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.a)((data=>data.dso)),Object(_core_shared_operators__WEBPACK_IMPORTED_MODULE_9__.i)()),this.collectionName$=this.collectionRD$.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.a)((rd=>this.dsoNameService.getName(rd.payload)))),this.searchOptions$=this.searchConfigService.paginatedSearchOptions,this.loadItemLists()}loadItemLists(){this.shouldUpdate$=new rxjs__WEBPACK_IMPORTED_MODULE_0__.a(!0);const collectionAndOptions$=Object(rxjs__WEBPACK_IMPORTED_MODULE_1__.a)(this.collectionRD$,this.searchOptions$,this.shouldUpdate$);this.collectionItemsRD$=collectionAndOptions$.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.a)((([collectionRD,options,shouldUpdate])=>(!0===shouldUpdate&&this.shouldUpdate$.next(!1),this.itemDataService.findAllByHref(collectionRD.payload._links.mappedItems.href,Object.assign(options,{sort:this.defaultSortOptions}),!shouldUpdate,!1,Object(_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_20__.a)("owningCollection")).pipe(Object(_core_shared_operators__WEBPACK_IMPORTED_MODULE_9__.c)()))))),this.mappedItemsRD$=collectionAndOptions$.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.a)((([collectionRD,options,shouldUpdate])=>this.searchService.search(Object.assign(new _shared_search_models_paginated_search_options_model__WEBPACK_IMPORTED_MODULE_18__.a(options),{query:this.buildQuery(collectionRD.payload.id,options.query),scope:void 0,dsoTypes:[_core_shared_dspace_object_type_model__WEBPACK_IMPORTED_MODULE_10__.a.ITEM],sort:this.defaultSortOptions}),1e4).pipe(Object(_core_shared_operators__WEBPACK_IMPORTED_MODULE_9__.y)(),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.a)(void 0)))))}mapItems(ids,remove){const responses$=this.collectionRD$.pipe(Object(_core_shared_operators__WEBPACK_IMPORTED_MODULE_9__.i)(),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.a)((collectionRD=>collectionRD.payload)),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.a)((collection=>Object(rxjs__WEBPACK_IMPORTED_MODULE_1__.a)(ids.map((id=>remove?this.itemDataService.removeMappingFromCollection(id,collection.id).pipe(Object(_core_shared_operators__WEBPACK_IMPORTED_MODULE_9__.g)()):this.itemDataService.mapToCollection(id,collection._links.self.href).pipe(Object(_core_shared_operators__WEBPACK_IMPORTED_MODULE_9__.g)())))))));this.showNotifications(responses$,remove)}showNotifications(responses$,remove){const messageInsertion=remove?"unmap":"map";responses$.subscribe((responses=>{const successful=responses.filter((response=>response.hasSucceeded)),unsuccessful=responses.filter((response=>response.hasFailed));if(successful.length>0){Object(rxjs__WEBPACK_IMPORTED_MODULE_1__.a)(this.translateService.get(`collection.edit.item-mapper.notifications.${messageInsertion}.success.head`),this.translateService.get(`collection.edit.item-mapper.notifications.${messageInsertion}.success.content`,{amount:successful.length})).subscribe((([head,content])=>{this.notificationsService.success(head,content)})),this.shouldUpdate$.next(!0)}if(unsuccessful.length>0){Object(rxjs__WEBPACK_IMPORTED_MODULE_1__.a)(this.translateService.get(`collection.edit.item-mapper.notifications.${messageInsertion}.error.head`),this.translateService.get(`collection.edit.item-mapper.notifications.${messageInsertion}.error.content`,{amount:unsuccessful.length})).subscribe((([head,content])=>{this.notificationsService.error(head,content)}))}this.switchToFirstTab()}))}tabChange(event){this.performedSearch=!1,this.router.navigateByUrl(this.getCurrentUrl())}getCurrentUrl(){return this.router.url.indexOf("?")>-1?this.router.url.substring(0,this.router.url.indexOf("?")):this.router.url}buildQuery(collectionId,query){const excludeColQuery=`-location.coll:"${collectionId}"`;return Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_15__.e)(query)?`${excludeColQuery} AND ${query}`:excludeColQuery}switchToFirstTab(){this.tabs.select("browseTab")}onCancel(){this.collectionRD$.pipe(Object(_core_shared_operators__WEBPACK_IMPORTED_MODULE_9__.i)(),Object(_core_shared_operators__WEBPACK_IMPORTED_MODULE_9__.o)(),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.a)(1)).subscribe((collection=>{this.router.navigate(["/collections/",collection.id])}))}}CollectionItemMapperComponent.\u0275fac=function CollectionItemMapperComponent_Factory(t){return new(t||CollectionItemMapperComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275directiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_22__.a),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275directiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_22__.g),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275directiveInject"](_my_dspace_page_my_dspace_page_component__WEBPACK_IMPORTED_MODULE_16__.SEARCH_CONFIG_SERVICE),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275directiveInject"](_core_shared_search_search_service__WEBPACK_IMPORTED_MODULE_19__.a),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275directiveInject"](_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_12__.a),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275directiveInject"](_core_data_item_data_service__WEBPACK_IMPORTED_MODULE_13__.a),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275directiveInject"](_core_data_collection_data_service__WEBPACK_IMPORTED_MODULE_14__.a),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275directiveInject"](_ngx_translate_core__WEBPACK_IMPORTED_MODULE_23__.e),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275directiveInject"](_core_breadcrumbs_dso_name_service__WEBPACK_IMPORTED_MODULE_3__.a))},CollectionItemMapperComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275defineComponent"]({type:CollectionItemMapperComponent,selectors:[["ds-collection-item-mapper"]],viewQuery:function CollectionItemMapperComponent_Query(rf,ctx){if(1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275viewQuery"](_c0,1),2&rf){let _t;_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275queryRefresh"](_t=_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275loadQuery"]())&&(ctx.tabs=_t.first)}},features:[_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275ProvidersFeature"]([{provide:_my_dspace_page_my_dspace_page_component__WEBPACK_IMPORTED_MODULE_16__.SEARCH_CONFIG_SERVICE,useClass:_core_shared_search_search_configuration_service__WEBPACK_IMPORTED_MODULE_17__.a}])],decls:45,vars:24,consts:[[1,"container"],[1,"row"],[1,"col-12"],["id","collection-name",3,"innerHTML"],["ngbNav","",1,"nav-tabs",3,"destroyOnHide","navChange"],["tabs","ngbNav"],[3,"ngbNavItem"],["ngbNavLink",""],["ngbNavContent",""],[3,"ngbNavOutlet"],[1,"mt-2"],[1,"mt-2",3,"key","dsoRD$","paginationOptions","confirmButton","cancelButton","dangerConfirm","hideCollection","confirm","cancel"],[1,"row","mt-2"],[1,"col-12","col-lg-6"],["id","search-form",3,"query","scope","currentUrl","inPlaceSearch","searchPlaceholder","submitSearch"],[4,"ngIf"],["class","alert alert-info w-100","role","alert",4,"ngIf"],[1,"mt-2",3,"key","dsoRD$","paginationOptions","featureId","confirmButton","cancelButton","confirm","cancel"],["role","alert",1,"alert","alert-info","w-100"]],template:function CollectionItemMapperComponent_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275elementStart"](0,"div",0),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275text"](1,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275elementStart"](2,"div",1),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275text"](3,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275elementStart"](4,"div",2),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275text"](5,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275elementStart"](6,"h2"),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275text"](7),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275pipe"](8,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275text"](9,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275element"](10,"p",3),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275pipe"](11,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275pipe"](12,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275text"](13,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275elementStart"](14,"p"),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275text"](15),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275pipe"](16,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275text"](17,"\n\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275elementStart"](18,"ul",4,5),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275listener"]("navChange",(function CollectionItemMapperComponent_Template_ul_navChange_18_listener($event){return ctx.tabChange($event)})),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275text"](20,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275elementStart"](21,"li",6),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275text"](22,"\n          "),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275elementStart"](23,"a",7),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275text"](24),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275pipe"](25,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275text"](26,"\n          "),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275template"](27,CollectionItemMapperComponent_ng_template_27_Template,7,9,"ng-template",8),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275text"](28,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275text"](29,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275elementStart"](30,"li",6),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275text"](31,"\n          "),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275elementStart"](32,"a",7),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275text"](33),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275pipe"](34,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275text"](35,"\n          "),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275template"](36,CollectionItemMapperComponent_ng_template_36_Template,17,13,"ng-template",8),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275text"](37,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275text"](38,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275text"](39,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275element"](40,"div",9),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275text"](41,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275text"](42,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275text"](43,"\n"),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275text"](44,"\n")),2&rf){const _r0=_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275reference"](19);_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275advance"](7),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275pipeBind1"](8,9,"collection.edit.item-mapper.head")),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275property"]("innerHTML",_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275pipeBind2"](11,11,"collection.edit.item-mapper.collection",_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275pureFunction1"](22,_c1,_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275pipeBind1"](12,14,ctx.collectionName$))),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275sanitizeHtml"]),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275advance"](5),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275pipeBind1"](16,16,"collection.edit.item-mapper.description")),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275property"]("destroyOnHide",!0),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275property"]("ngbNavItem","browseTab"),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275pipeBind1"](25,18,"collection.edit.item-mapper.tabs.browse")),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275advance"](6),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275property"]("ngbNavItem","mapTab"),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275pipeBind1"](34,20,"collection.edit.item-mapper.tabs.map")),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275advance"](7),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275property"]("ngbNavOutlet",_r0)}},directives:[_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_24__.t,_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_24__.v,_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_24__.w,_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_24__.u,_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_24__.y,_shared_object_select_item_select_item_select_component__WEBPACK_IMPORTED_MODULE_25__.a,_shared_search_form_search_form_component__WEBPACK_IMPORTED_MODULE_26__.a,_angular_common__WEBPACK_IMPORTED_MODULE_27__.NgIf],pipes:[_ngx_translate_core__WEBPACK_IMPORTED_MODULE_23__.d,_angular_common__WEBPACK_IMPORTED_MODULE_27__.AsyncPipe],styles:[""],data:{animation:[_shared_animations_fade__WEBPACK_IMPORTED_MODULE_4__.a,_shared_animations_fade__WEBPACK_IMPORTED_MODULE_4__.c]},changeDetection:0})},tfjI:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return EditComColPageComponent}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),rxjs_operators__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("SxV6"),rxjs_operators__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("lJxs"),_empty_util__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("J3qs"),_angular_router__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("tyNb");class EditComColPageComponent{constructor(router,route){this.router=router,this.route=route,this.router.events.subscribe((()=>this.initPageParamsByRoute()))}ngOnInit(){this.initPageParamsByRoute(),this.pages=this.route.routeConfig.children.map((child=>child.path)).filter((path=>Object(_empty_util__WEBPACK_IMPORTED_MODULE_3__.e)(path))),this.dsoRD$=this.route.data.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_1__.a)(),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.a)((data=>data.dso)))}getPageUrl(dso){return this.router.url}initPageParamsByRoute(){this.currentPage=this.route.snapshot.firstChild.routeConfig.path,this.hideReturnButton=this.route.routeConfig.children.find((child=>child.path===this.currentPage)).data.hideReturnButton}}EditComColPageComponent.\u0275fac=function EditComColPageComponent_Factory(t){return new(t||EditComColPageComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_4__.g),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_4__.a))},EditComColPageComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineComponent"]({type:EditComColPageComponent,selectors:[["ds-edit-comcol"]],decls:0,vars:0,template:function EditComColPageComponent_Template(rf,ctx){},encapsulation:2})},tq32:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"CollectionPageModule",(function(){return CollectionPageModule}));var core=__webpack_require__("fXoL"),common=__webpack_require__("ofXK"),shared_module=__webpack_require__("PCNd"),fesm2015_router=(__webpack_require__("H2rt"),__webpack_require__("tyNb")),collection_page_resolver=__webpack_require__("n7C5"),community_data_service=__webpack_require__("mrqg"),route_service=__webpack_require__("ppE2"),create_comcol_page_component=__webpack_require__("hxi3"),collection_model=__webpack_require__("ye/0"),collection_data_service=__webpack_require__("DNva"),notifications_service=__webpack_require__("lI3o"),request_service=__webpack_require__("X/78"),ngx_translate_core=__webpack_require__("sYmb"),collection_form_component=__webpack_require__("+6qv");const _c0=function(a0){return{parent:a0}};class create_collection_page_component_CreateCollectionPageComponent extends create_comcol_page_component.a{constructor(communityDataService,collectionDataService,routeService,router,notificationsService,translate,requestService){super(collectionDataService,communityDataService,routeService,router,notificationsService,translate,requestService),this.communityDataService=communityDataService,this.collectionDataService=collectionDataService,this.routeService=routeService,this.router=router,this.notificationsService=notificationsService,this.translate=translate,this.requestService=requestService,this.frontendURL="/collections/",this.type=collection_model.a.type}}create_collection_page_component_CreateCollectionPageComponent.\u0275fac=function CreateCollectionPageComponent_Factory(t){return new(t||create_collection_page_component_CreateCollectionPageComponent)(core["\u0275\u0275directiveInject"](community_data_service.a),core["\u0275\u0275directiveInject"](collection_data_service.a),core["\u0275\u0275directiveInject"](route_service.a),core["\u0275\u0275directiveInject"](fesm2015_router.g),core["\u0275\u0275directiveInject"](notifications_service.a),core["\u0275\u0275directiveInject"](ngx_translate_core.e),core["\u0275\u0275directiveInject"](request_service.a))},create_collection_page_component_CreateCollectionPageComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:create_collection_page_component_CreateCollectionPageComponent,selectors:[["ds-create-collection"]],features:[core["\u0275\u0275InheritDefinitionFeature"]],decls:16,vars:8,consts:[[1,"container"],[1,"row"],[1,"col-12","pb-4"],["id","sub-header",1,"border-bottom","pb-2"],[3,"submitForm","back","finish"]],template:function CreateCollectionPageComponent_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"div",0),core["\u0275\u0275text"](1,"\n    "),core["\u0275\u0275elementStart"](2,"div",1),core["\u0275\u0275text"](3,"\n        "),core["\u0275\u0275elementStart"](4,"div",2),core["\u0275\u0275text"](5,"\n            "),core["\u0275\u0275elementStart"](6,"h2",3),core["\u0275\u0275text"](7),core["\u0275\u0275pipe"](8,"translate"),core["\u0275\u0275pipe"](9,"async"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](10,"\n        "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](11,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](12,"\n    "),core["\u0275\u0275elementStart"](13,"ds-collection-form",4),core["\u0275\u0275listener"]("submitForm",(function CreateCollectionPageComponent_Template_ds_collection_form_submitForm_13_listener($event){return ctx.onSubmit($event)}))("back",(function CreateCollectionPageComponent_Template_ds_collection_form_back_13_listener(){return ctx.navigateToHome()}))("finish",(function CreateCollectionPageComponent_Template_ds_collection_form_finish_13_listener(){return ctx.navigateToNewPage()})),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](14,"\n"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](15,"\n")),2&rf){let tmp_0_0=null;core["\u0275\u0275advance"](7),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind2"](8,1,"collection.create.sub-head",core["\u0275\u0275pureFunction1"](6,_c0,null==(tmp_0_0=core["\u0275\u0275pipeBind1"](9,4,ctx.parentRD$))?null:tmp_0_0.payload.name)))}},directives:[collection_form_component.a],pipes:[ngx_translate_core.d,common.AsyncPipe],styles:[""]});var authenticated_guard=__webpack_require__("tPZA"),empty_util=__webpack_require__("J3qs"),map=__webpack_require__("lJxs"),tap=__webpack_require__("vkgz"),of=__webpack_require__("LRne"),operators=__webpack_require__("1QIV");class create_collection_page_guard_CreateCollectionPageGuard{constructor(router,communityService){this.router=router,this.communityService=communityService}canActivate(route,state){const parentID=route.queryParams.parent;return Object(empty_util.a)(parentID)?(this.router.navigate(["/404"]),Object(of.a)(!1)):this.communityService.findById(parentID).pipe(Object(operators.g)(),Object(map.a)((communityRD=>Object(empty_util.b)(communityRD)&&communityRD.hasSucceeded&&Object(empty_util.b)(communityRD.payload))),Object(tap.a)((isValid=>{isValid||this.router.navigate(["/404"])})))}}create_collection_page_guard_CreateCollectionPageGuard.\u0275fac=function CreateCollectionPageGuard_Factory(t){return new(t||create_collection_page_guard_CreateCollectionPageGuard)(core["\u0275\u0275inject"](fesm2015_router.g),core["\u0275\u0275inject"](community_data_service.a))},create_collection_page_guard_CreateCollectionPageGuard.\u0275prov=core["\u0275\u0275defineInjectable"]({token:create_collection_page_guard_CreateCollectionPageGuard,factory:create_collection_page_guard_CreateCollectionPageGuard.\u0275fac});var delete_comcol_page_component=__webpack_require__("WXw8"),var_directive=__webpack_require__("O/5o");function DeleteCollectionPageComponent_ng_container_4_span_26_Template(rf,ctx){1&rf&&(core["\u0275\u0275elementStart"](0,"span"),core["\u0275\u0275element"](1,"i",12),core["\u0275\u0275text"](2),core["\u0275\u0275pipe"](3,"translate"),core["\u0275\u0275elementEnd"]()),2&rf&&(core["\u0275\u0275advance"](2),core["\u0275\u0275textInterpolate1"](" ",core["\u0275\u0275pipeBind1"](3,1,"collection.delete.processing"),""))}function DeleteCollectionPageComponent_ng_container_4_span_29_Template(rf,ctx){1&rf&&(core["\u0275\u0275elementStart"](0,"span"),core["\u0275\u0275element"](1,"i",13),core["\u0275\u0275text"](2),core["\u0275\u0275pipe"](3,"translate"),core["\u0275\u0275elementEnd"]()),2&rf&&(core["\u0275\u0275advance"](2),core["\u0275\u0275textInterpolate1"](" ",core["\u0275\u0275pipeBind1"](3,1,"collection.delete.confirm"),""))}const delete_collection_page_component_c0=function(a0){return{dso:a0}};function DeleteCollectionPageComponent_ng_container_4_Template(rf,ctx){if(1&rf){const _r5=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementContainerStart"](0),core["\u0275\u0275text"](1,"\n            "),core["\u0275\u0275elementStart"](2,"div",3),core["\u0275\u0275text"](3,"\n                "),core["\u0275\u0275elementStart"](4,"h2",4),core["\u0275\u0275text"](5),core["\u0275\u0275pipe"](6,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](7,"\n                "),core["\u0275\u0275elementStart"](8,"p",5),core["\u0275\u0275text"](9),core["\u0275\u0275pipe"](10,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](11,"\n                "),core["\u0275\u0275elementStart"](12,"div",6),core["\u0275\u0275text"](13,"\n                  "),core["\u0275\u0275elementStart"](14,"div",7),core["\u0275\u0275text"](15,"\n                    "),core["\u0275\u0275elementStart"](16,"button",8),core["\u0275\u0275listener"]("click",(function DeleteCollectionPageComponent_ng_container_4_Template_button_click_16_listener(){core["\u0275\u0275restoreView"](_r5);const dso_r1=ctx.ngVar;return core["\u0275\u0275nextContext"]().onCancel(dso_r1)})),core["\u0275\u0275pipe"](17,"async"),core["\u0275\u0275text"](18,"\n                      "),core["\u0275\u0275element"](19,"i",9),core["\u0275\u0275text"](20),core["\u0275\u0275pipe"](21,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](22,"\n                    "),core["\u0275\u0275elementStart"](23,"button",10),core["\u0275\u0275listener"]("click",(function DeleteCollectionPageComponent_ng_container_4_Template_button_click_23_listener(){core["\u0275\u0275restoreView"](_r5);const dso_r1=ctx.ngVar;return core["\u0275\u0275nextContext"]().onConfirm(dso_r1)})),core["\u0275\u0275pipe"](24,"async"),core["\u0275\u0275text"](25,"\n                      "),core["\u0275\u0275template"](26,DeleteCollectionPageComponent_ng_container_4_span_26_Template,4,3,"span",11),core["\u0275\u0275pipe"](27,"async"),core["\u0275\u0275text"](28,"\n                      "),core["\u0275\u0275template"](29,DeleteCollectionPageComponent_ng_container_4_span_29_Template,4,3,"span",11),core["\u0275\u0275pipe"](30,"async"),core["\u0275\u0275text"](31,"\n                    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](32,"\n                  "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](33,"\n                "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](34,"\n            "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](35,"\n        "),core["\u0275\u0275elementContainerEnd"]()}if(2&rf){const dso_r1=ctx.ngVar,ctx_r0=core["\u0275\u0275nextContext"]();core["\u0275\u0275advance"](5),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](6,7,"collection.delete.head")),core["\u0275\u0275advance"](4),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind2"](10,9,"collection.delete.text",core["\u0275\u0275pureFunction1"](22,delete_collection_page_component_c0,dso_r1.name))),core["\u0275\u0275advance"](7),core["\u0275\u0275property"]("disabled",core["\u0275\u0275pipeBind1"](17,12,ctx_r0.processing$)),core["\u0275\u0275advance"](4),core["\u0275\u0275textInterpolate1"](" ",core["\u0275\u0275pipeBind1"](21,14,"collection.delete.cancel"),"\n                    "),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("disabled",core["\u0275\u0275pipeBind1"](24,16,ctx_r0.processing$)),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("ngIf",core["\u0275\u0275pipeBind1"](27,18,ctx_r0.processing$)),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("ngIf",!core["\u0275\u0275pipeBind1"](30,20,ctx_r0.processing$))}}class delete_collection_page_component_DeleteCollectionPageComponent extends delete_comcol_page_component.a{constructor(dsoDataService,router,route,notifications,translate,requestService){super(dsoDataService,router,route,notifications,translate,requestService),this.dsoDataService=dsoDataService,this.router=router,this.route=route,this.notifications=notifications,this.translate=translate,this.requestService=requestService,this.frontendURL="/collections/"}}delete_collection_page_component_DeleteCollectionPageComponent.\u0275fac=function DeleteCollectionPageComponent_Factory(t){return new(t||delete_collection_page_component_DeleteCollectionPageComponent)(core["\u0275\u0275directiveInject"](collection_data_service.a),core["\u0275\u0275directiveInject"](fesm2015_router.g),core["\u0275\u0275directiveInject"](fesm2015_router.a),core["\u0275\u0275directiveInject"](notifications_service.a),core["\u0275\u0275directiveInject"](ngx_translate_core.e),core["\u0275\u0275directiveInject"](request_service.a))},delete_collection_page_component_DeleteCollectionPageComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:delete_collection_page_component_DeleteCollectionPageComponent,selectors:[["ds-delete-collection"]],features:[core["\u0275\u0275InheritDefinitionFeature"]],decls:9,vars:3,consts:[[1,"container"],[1,"row"],[4,"ngVar"],[1,"col-12","pb-4"],["id","header",1,"border-bottom","pb-2"],[1,"pb-2"],[1,"form-group","row"],[1,"col","text-right"],[1,"btn","btn-outline-secondary",3,"disabled","click"],[1,"fas","fa-times"],[1,"btn","btn-danger","mr-2",3,"disabled","click"],[4,"ngIf"],[1,"fas","fa-circle-notch","fa-spin"],[1,"fas","fa-trash"]],template:function DeleteCollectionPageComponent_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"div",0),core["\u0275\u0275text"](1,"\n    "),core["\u0275\u0275elementStart"](2,"div",1),core["\u0275\u0275text"](3,"\n        "),core["\u0275\u0275template"](4,DeleteCollectionPageComponent_ng_container_4_Template,36,24,"ng-container",2),core["\u0275\u0275pipe"](5,"async"),core["\u0275\u0275text"](6,"\n\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](7,"\n\n"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](8,"\n")),2&rf){let tmp_0_0=null;core["\u0275\u0275advance"](4),core["\u0275\u0275property"]("ngVar",null==(tmp_0_0=core["\u0275\u0275pipeBind1"](5,1,ctx.dsoRD$))?null:tmp_0_0.payload)}},directives:[var_directive.a,common.NgIf],pipes:[common.AsyncPipe,ngx_translate_core.d],styles:[""]});var first=__webpack_require__("SxV6"),switchMap=__webpack_require__("eIep"),item_template_data_service=__webpack_require__("lP90"),collection_page_routing_paths=__webpack_require__("Obj/"),aletr_type=__webpack_require__("ac5F"),item_metadata_component=__webpack_require__("4vdZ"),loading_component=__webpack_require__("Frqi"),alert_component=__webpack_require__("VYMa");const edit_item_template_page_component_c0=function(a0){return{collection:a0}};function EditItemTemplatePageComponent_div_0_div_4_ng_container_2_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementContainerStart"](0),core["\u0275\u0275text"](1,"\n        "),core["\u0275\u0275elementStart"](2,"h2",8),core["\u0275\u0275text"](3),core["\u0275\u0275pipe"](4,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](5,"\n        "),core["\u0275\u0275element"](6,"ds-item-metadata",9),core["\u0275\u0275text"](7,"\n        "),core["\u0275\u0275elementStart"](8,"button",10),core["\u0275\u0275text"](9),core["\u0275\u0275pipe"](10,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](11,"\n      "),core["\u0275\u0275elementContainerEnd"]()),2&rf){const itemRD_r3=core["\u0275\u0275nextContext"]().ngVar,collection_r1=core["\u0275\u0275nextContext"]().ngVar,ctx_r4=core["\u0275\u0275nextContext"]();core["\u0275\u0275advance"](3),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind2"](4,5,"collection.edit.template.head",core["\u0275\u0275pureFunction1"](10,edit_item_template_page_component_c0,null==collection_r1?null:collection_r1.name))),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("updateService",ctx_r4.itemTemplateService)("item",null==itemRD_r3?null:itemRD_r3.payload),core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("routerLink",ctx_r4.getCollectionEditUrl(collection_r1)),core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](10,8,"collection.edit.template.cancel"))}}function EditItemTemplatePageComponent_div_0_div_4_ds_loading_4_Template(rf,ctx){1&rf&&(core["\u0275\u0275element"](0,"ds-loading",11),core["\u0275\u0275pipe"](1,"translate")),2&rf&&core["\u0275\u0275property"]("message",core["\u0275\u0275pipeBind1"](1,1,"collection.edit.template.loading"))}function EditItemTemplatePageComponent_div_0_div_4_ds_alert_6_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275element"](0,"ds-alert",12),core["\u0275\u0275pipe"](1,"translate")),2&rf){const ctx_r6=core["\u0275\u0275nextContext"](3);core["\u0275\u0275property"]("type",ctx_r6.AlertTypeEnum.Error)("content",core["\u0275\u0275pipeBind1"](1,2,"collection.edit.template.error"))}}function EditItemTemplatePageComponent_div_0_div_4_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"div",4),core["\u0275\u0275text"](1,"\n      "),core["\u0275\u0275template"](2,EditItemTemplatePageComponent_div_0_div_4_ng_container_2_Template,12,12,"ng-container",5),core["\u0275\u0275text"](3,"\n      "),core["\u0275\u0275template"](4,EditItemTemplatePageComponent_div_0_div_4_ds_loading_4_Template,2,3,"ds-loading",6),core["\u0275\u0275text"](5,"\n      "),core["\u0275\u0275template"](6,EditItemTemplatePageComponent_div_0_div_4_ds_alert_6_Template,2,4,"ds-alert",7),core["\u0275\u0275text"](7,"\n    "),core["\u0275\u0275elementEnd"]()),2&rf){const itemRD_r3=ctx.ngVar;core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",null==itemRD_r3?null:itemRD_r3.hasSucceeded),core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",null==itemRD_r3?null:itemRD_r3.isLoading),core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",null==itemRD_r3?null:itemRD_r3.hasFailed)}}function EditItemTemplatePageComponent_div_0_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"div",1),core["\u0275\u0275text"](1,"\n  "),core["\u0275\u0275elementStart"](2,"div",2),core["\u0275\u0275text"](3,"\n    "),core["\u0275\u0275template"](4,EditItemTemplatePageComponent_div_0_div_4_Template,8,3,"div",3),core["\u0275\u0275pipe"](5,"async"),core["\u0275\u0275text"](6,"\n  "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](7,"\n"),core["\u0275\u0275elementEnd"]()),2&rf){const ctx_r0=core["\u0275\u0275nextContext"]();core["\u0275\u0275advance"](4),core["\u0275\u0275property"]("ngVar",core["\u0275\u0275pipeBind1"](5,1,ctx_r0.itemRD$))}}class edit_item_template_page_component_EditItemTemplatePageComponent{constructor(route,itemTemplateService){this.route=route,this.itemTemplateService=itemTemplateService,this.AlertTypeEnum=aletr_type.a}ngOnInit(){this.collectionRD$=this.route.parent.data.pipe(Object(first.a)(),Object(map.a)((data=>data.dso))),this.itemRD$=this.collectionRD$.pipe(Object(operators.j)(),Object(switchMap.a)((collection=>this.itemTemplateService.findByCollectionID(collection.id))))}getCollectionEditUrl(collection){return collection?Object(collection_page_routing_paths.h)(collection.uuid):""}}edit_item_template_page_component_EditItemTemplatePageComponent.\u0275fac=function EditItemTemplatePageComponent_Factory(t){return new(t||edit_item_template_page_component_EditItemTemplatePageComponent)(core["\u0275\u0275directiveInject"](fesm2015_router.a),core["\u0275\u0275directiveInject"](item_template_data_service.a))},edit_item_template_page_component_EditItemTemplatePageComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:edit_item_template_page_component_EditItemTemplatePageComponent,selectors:[["ds-edit-item-template-page"]],decls:3,vars:3,consts:[["class","container",4,"ngVar"],[1,"container"],[1,"row"],["class","col-12",4,"ngVar"],[1,"col-12"],[4,"ngIf"],[3,"message",4,"ngIf"],[3,"type","content",4,"ngIf"],[1,"border-bottom"],[3,"updateService","item"],[1,"btn","btn-outline-secondary",3,"routerLink"],[3,"message"],[3,"type","content"]],template:function EditItemTemplatePageComponent_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275template"](0,EditItemTemplatePageComponent_div_0_Template,8,3,"div",0),core["\u0275\u0275pipe"](1,"async"),core["\u0275\u0275text"](2,"\n")),2&rf){let tmp_0_0=null;core["\u0275\u0275property"]("ngVar",null==(tmp_0_0=core["\u0275\u0275pipeBind1"](1,1,ctx.collectionRD$))?null:tmp_0_0.payload)}},directives:[var_directive.a,common.NgIf,item_metadata_component.a,fesm2015_router.h,loading_component.a,alert_component.a],pipes:[common.AsyncPipe,ngx_translate_core.d],encapsulation:2});var follow_link_config_model=__webpack_require__("84Zn");class item_template_page_resolver_ItemTemplatePageResolver{constructor(itemTemplateService){this.itemTemplateService=itemTemplateService}resolve(route,state){return this.itemTemplateService.findByCollectionID(route.params.id,!0,!1,Object(follow_link_config_model.a)("templateItemOf")).pipe(Object(operators.g)())}}item_template_page_resolver_ItemTemplatePageResolver.\u0275fac=function ItemTemplatePageResolver_Factory(t){return new(t||item_template_page_resolver_ItemTemplatePageResolver)(core["\u0275\u0275inject"](item_template_data_service.a))},item_template_page_resolver_ItemTemplatePageResolver.\u0275prov=core["\u0275\u0275defineInjectable"]({token:item_template_page_resolver_ItemTemplatePageResolver,factory:item_template_page_resolver_ItemTemplatePageResolver.\u0275fac});var dso_breadcrumbs_service=__webpack_require__("GCaJ"),dso_breadcrumb_resolver=__webpack_require__("hucJ");class collection_breadcrumb_resolver_CollectionBreadcrumbResolver extends dso_breadcrumb_resolver.a{constructor(breadcrumbService,dataService){super(breadcrumbService,dataService),this.breadcrumbService=breadcrumbService,this.dataService=dataService}get followLinks(){return collection_page_resolver.a}}collection_breadcrumb_resolver_CollectionBreadcrumbResolver.\u0275fac=function CollectionBreadcrumbResolver_Factory(t){return new(t||collection_breadcrumb_resolver_CollectionBreadcrumbResolver)(core["\u0275\u0275inject"](dso_breadcrumbs_service.a),core["\u0275\u0275inject"](collection_data_service.a))},collection_breadcrumb_resolver_CollectionBreadcrumbResolver.\u0275prov=core["\u0275\u0275defineInjectable"]({token:collection_breadcrumb_resolver_CollectionBreadcrumbResolver,factory:collection_breadcrumb_resolver_CollectionBreadcrumbResolver.\u0275fac,providedIn:"root"});var link_service=__webpack_require__("sfEo"),i18n_breadcrumb_resolver=__webpack_require__("A0IO"),authorization_data_service=__webpack_require__("1mcE"),dso_page_single_feature_guard=__webpack_require__("0TMo"),feature_id=__webpack_require__("FU+A"),auth_service=__webpack_require__("Vurf");class collection_page_administrator_guard_CollectionPageAdministratorGuard extends dso_page_single_feature_guard.a{constructor(resolver,authorizationService,router,authService){super(resolver,authorizationService,router,authService),this.resolver=resolver,this.authorizationService=authorizationService,this.router=router,this.authService=authService}getFeatureID(next,state){return Object(of.a)(feature_id.a.AdministratorOf)}}collection_page_administrator_guard_CollectionPageAdministratorGuard.\u0275fac=function CollectionPageAdministratorGuard_Factory(t){return new(t||collection_page_administrator_guard_CollectionPageAdministratorGuard)(core["\u0275\u0275inject"](collection_page_resolver.b),core["\u0275\u0275inject"](authorization_data_service.a),core["\u0275\u0275inject"](fesm2015_router.g),core["\u0275\u0275inject"](auth_service.a))},collection_page_administrator_guard_CollectionPageAdministratorGuard.\u0275prov=core["\u0275\u0275defineInjectable"]({token:collection_page_administrator_guard_CollectionPageAdministratorGuard,factory:collection_page_administrator_guard_CollectionPageAdministratorGuard.\u0275fac,providedIn:"root"});var initial_menus_state=__webpack_require__("ierV"),themed_component=__webpack_require__("JTKQ");function ThemedCollectionPageComponent_ng_template_0_Template(rf,ctx){}class themed_collection_page_component_ThemedCollectionPageComponent extends themed_component.a{getComponentName(){return"CollectionPageComponent"}importThemedComponent(themeName){return __webpack_require__("aem7")(`./${themeName}/app/collection-page/collection-page.component`)}importUnthemedComponent(){return Promise.resolve().then(__webpack_require__.bind(null,"H2rt"))}}themed_collection_page_component_ThemedCollectionPageComponent.\u0275fac=function ThemedCollectionPageComponent_Factory(t){return \u0275ThemedCollectionPageComponent_BaseFactory(t||themed_collection_page_component_ThemedCollectionPageComponent)},themed_collection_page_component_ThemedCollectionPageComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:themed_collection_page_component_ThemedCollectionPageComponent,selectors:[["ds-themed-community-page"]],features:[core["\u0275\u0275InheritDefinitionFeature"]],decls:3,vars:0,consts:[["vcr",""]],template:function ThemedCollectionPageComponent_Template(rf,ctx){1&rf&&(core["\u0275\u0275template"](0,ThemedCollectionPageComponent_ng_template_0_Template,0,0,"ng-template",null,0,core["\u0275\u0275templateRefExtractor"]),core["\u0275\u0275text"](2,"\n"))},encapsulation:2});const \u0275ThemedCollectionPageComponent_BaseFactory=core["\u0275\u0275getInheritedFactory"](themed_collection_page_component_ThemedCollectionPageComponent);class CollectionPageRoutingModule{}CollectionPageRoutingModule.\u0275fac=function CollectionPageRoutingModule_Factory(t){return new(t||CollectionPageRoutingModule)},CollectionPageRoutingModule.\u0275mod=core["\u0275\u0275defineNgModule"]({type:CollectionPageRoutingModule}),CollectionPageRoutingModule.\u0275inj=core["\u0275\u0275defineInjector"]({providers:[collection_page_resolver.b,item_template_page_resolver_ItemTemplatePageResolver,collection_breadcrumb_resolver_CollectionBreadcrumbResolver,dso_breadcrumbs_service.a,link_service.a,create_collection_page_guard_CreateCollectionPageGuard,collection_page_administrator_guard_CollectionPageAdministratorGuard],imports:[[fesm2015_router.k.forChild([{path:collection_page_routing_paths.a,component:create_collection_page_component_CreateCollectionPageComponent,canActivate:[authenticated_guard.a,create_collection_page_guard_CreateCollectionPageGuard]},{path:":id",resolve:{dso:collection_page_resolver.b,breadcrumb:collection_breadcrumb_resolver_CollectionBreadcrumbResolver},runGuardsAndResolvers:"always",children:[{path:collection_page_routing_paths.b,loadChildren:()=>__webpack_require__.e(14).then(__webpack_require__.bind(null,"6yod")).then((m=>m.EditCollectionPageModule)),canActivate:[collection_page_administrator_guard_CollectionPageAdministratorGuard]},{path:"delete",pathMatch:"full",component:delete_collection_page_component_DeleteCollectionPageComponent,canActivate:[authenticated_guard.a]},{path:collection_page_routing_paths.e,component:edit_item_template_page_component_EditItemTemplatePageComponent,canActivate:[authenticated_guard.a],resolve:{item:item_template_page_resolver_ItemTemplatePageResolver,breadcrumb:i18n_breadcrumb_resolver.a},data:{title:"collection.edit.template.title",breadcrumbKey:"collection.edit.template"}},{path:"",component:themed_collection_page_component_ThemedCollectionPageComponent,pathMatch:"full"}],data:{menu:{public:[{id:"statistics_collection_:id",active:!0,visible:!0,model:{type:initial_menus_state.b.LINK,text:"menu.section.statistics",link:"statistics/collections/:id/"}}]}}}])]]});var edit_item_page_module=__webpack_require__("BZkK"),search_service=(__webpack_require__("pBGb"),__webpack_require__("gWc+")),statistics_module=__webpack_require__("9i+i"),collection_form_module=__webpack_require__("nVrp"),comcol_module=__webpack_require__("fY2w");class CollectionPageModule{}CollectionPageModule.\u0275fac=function CollectionPageModule_Factory(t){return new(t||CollectionPageModule)},CollectionPageModule.\u0275mod=core["\u0275\u0275defineNgModule"]({type:CollectionPageModule}),CollectionPageModule.\u0275inj=core["\u0275\u0275defineInjector"]({providers:[search_service.a],imports:[[common.CommonModule,shared_module.a,CollectionPageRoutingModule,statistics_module.a.forRoot(),edit_item_page_module.EditItemPageModule,collection_form_module.a,comcol_module.a]]})},tv3Y:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return I18nBreadcrumbsService}));var _breadcrumbs_breadcrumb_breadcrumb_model__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("zr/d"),rxjs__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("LRne"),_angular_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("fXoL");class I18nBreadcrumbsService{getBreadcrumbs(key,url){return Object(rxjs__WEBPACK_IMPORTED_MODULE_1__.a)([new _breadcrumbs_breadcrumb_breadcrumb_model__WEBPACK_IMPORTED_MODULE_0__.a(key+".breadcrumbs",url)])}}I18nBreadcrumbsService.\u0275fac=function I18nBreadcrumbsService_Factory(t){return new(t||I18nBreadcrumbsService)},I18nBreadcrumbsService.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275defineInjectable"]({token:I18nBreadcrumbsService,factory:I18nBreadcrumbsService.\u0275fac,providedIn:"root"})},xSRh:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"SearchPageComponent",(function(){return SearchPageComponent}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),_my_dspace_page_my_dspace_page_component__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("dtp9"),_core_shared_search_search_configuration_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("joI/"),_shared_search_search_component__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("9H8w"),_search_tracker_component__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("TrCT");class SearchPageComponent{}SearchPageComponent.\u0275fac=function SearchPageComponent_Factory(t){return new(t||SearchPageComponent)},SearchPageComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineComponent"]({type:SearchPageComponent,selectors:[["ds-search-page"]],features:[_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275ProvidersFeature"]([{provide:_my_dspace_page_my_dspace_page_component__WEBPACK_IMPORTED_MODULE_1__.SEARCH_CONFIG_SERVICE,useClass:_core_shared_search_search_configuration_service__WEBPACK_IMPORTED_MODULE_2__.a}])],decls:4,vars:0,template:function SearchPageComponent_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](0,"ds-search"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](2,"ds-search-tracker"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3,"\n"))},directives:[_shared_search_search_component__WEBPACK_IMPORTED_MODULE_3__.a,_search_tracker_component__WEBPACK_IMPORTED_MODULE_4__.a],encapsulation:2})},yj7I:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ComcolPageHeaderComponent}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),_angular_common__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("ofXK");function ComcolPageHeaderComponent_h1_0_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"h1"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()),2&rf){const ctx_r0=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](ctx_r0.name)}}class ComcolPageHeaderComponent{}ComcolPageHeaderComponent.\u0275fac=function ComcolPageHeaderComponent_Factory(t){return new(t||ComcolPageHeaderComponent)},ComcolPageHeaderComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineComponent"]({type:ComcolPageHeaderComponent,selectors:[["ds-comcol-page-header"]],inputs:{name:"name"},decls:1,vars:1,consts:[[4,"ngIf"]],template:function ComcolPageHeaderComponent_Template(rf,ctx){1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](0,ComcolPageHeaderComponent_h1_0_Template,2,1,"h1",0),2&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",ctx.name)},directives:[_angular_common__WEBPACK_IMPORTED_MODULE_1__.NgIf],styles:[""]})},"z3/6":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ItemPageResolver}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),_core_data_item_data_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("iqTE"),rxjs_operators__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("lJxs"),_shared_empty_util__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("J3qs"),_item_page_routing_paths__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("Xioo"),_item_resolver__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("kGaT"),_ngrx_store__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("l7P3"),_angular_router__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("tyNb");class ItemPageResolver extends _item_resolver__WEBPACK_IMPORTED_MODULE_5__.b{constructor(itemService,store,router){super(itemService,store,router),this.itemService=itemService,this.store=store,this.router=router}resolve(route,state){return super.resolve(route,state).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.a)((rd=>{if(rd.hasSucceeded&&Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_3__.b)(rd.payload)){const itemRoute=Object(_item_page_routing_paths__WEBPACK_IMPORTED_MODULE_4__.h)(rd.payload),thisRoute=state.url;if(!thisRoute.startsWith(itemRoute)){const itemId=rd.payload.uuid,subRoute=thisRoute.substring(thisRoute.indexOf(itemId)+itemId.length,thisRoute.length);this.router.navigateByUrl(itemRoute+subRoute)}}return rd})))}}ItemPageResolver.\u0275fac=function ItemPageResolver_Factory(t){return new(t||ItemPageResolver)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275inject"](_core_data_item_data_service__WEBPACK_IMPORTED_MODULE_1__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275inject"](_ngrx_store__WEBPACK_IMPORTED_MODULE_6__.i),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275inject"](_angular_router__WEBPACK_IMPORTED_MODULE_7__.g))},ItemPageResolver.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineInjectable"]({token:ItemPageResolver,factory:ItemPageResolver.\u0275fac})},"zr/d":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return Breadcrumb}));class Breadcrumb{constructor(text,url){this.text=text,this.url=url}}}};