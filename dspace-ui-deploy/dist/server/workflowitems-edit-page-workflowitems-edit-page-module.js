exports.ids=[32,5,20],exports.modules={"+Bs4":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ResourcePoliciesComponent}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),rxjs__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("2Vo4"),rxjs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("Cfvw"),rxjs_operators__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("pLZG"),rxjs_operators__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("128B"),rxjs_operators__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("lJxs"),rxjs_operators__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("/uUt"),rxjs_operators__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("bOdf"),rxjs_operators__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("Kqap"),rxjs_operators__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("IzEk"),rxjs_operators__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("JX91"),_core_resource_policy_resource_policy_service__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("8a3C"),_core_shared_operators__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("1QIV"),_core_breadcrumbs_dso_name_service__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("C765"),_core_eperson_group_data_service__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("YIpg"),_empty_util__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("J3qs"),_core_eperson_eperson_data_service__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("wLgS"),_core_data_request_service__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("X/78"),_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("lI3o"),_date_util__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("fM99"),_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("84Zn"),_app_routing_paths__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("TVZh"),_access_control_access_control_routing_paths__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__("mOAm"),_angular_router__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__("tyNb"),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__("sYmb"),_angular_common__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__("ofXK"),_ng_for_track_by_id_directive__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__("xPuV"),_angular_forms__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__("3Pt+");function ResourcePoliciesComponent_div_0_span_20_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"span"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n                  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](2,"i",14),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](4,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate1"](" ",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](4,1,"submission.workflow.tasks.generic.processing"),"\n                "))}function ResourcePoliciesComponent_div_0_span_23_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"span"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n                  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](2,"i",15),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](4,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate1"]("\n                  ",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](4,1,"resource-policies.delete.btn"),"\n                "))}function ResourcePoliciesComponent_div_0_tr_91_td_24_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"td"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](2,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()),2&rf){const entry_r4=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]().$implicit,ctx_r5=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"](2);_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate1"]("\n          ",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](2,1,ctx_r5.getEPersonName(entry_r4.policy)),"\n        ")}}function ResourcePoliciesComponent_div_0_tr_91_td_27_Template(rf,ctx){1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](0,"td")}function ResourcePoliciesComponent_div_0_tr_91_td_30_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"td"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](2,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()),2&rf){const entry_r4=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]().$implicit,ctx_r7=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"](2);_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate1"]("\n          ",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](2,1,ctx_r7.getGroupName(entry_r4.policy)),"\n        ")}}function ResourcePoliciesComponent_div_0_tr_91_td_33_Template(rf,ctx){1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](0,"td")}function ResourcePoliciesComponent_div_0_tr_91_button_52_Template(rf,ctx){if(1&rf){const _r14=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275getCurrentView"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"button",19),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("click",(function ResourcePoliciesComponent_div_0_tr_91_button_52_Template_button_click_0_listener(){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r14);const entry_r4=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]().$implicit;return _angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"](2).redirectToGroupEditPage(entry_r4.policy)})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](1,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](2,"\n              "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](3,"i",22),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](4,"\n            "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()}2&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("title",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](1,1,"resource-policies.table.headers.edit.group"))}function ResourcePoliciesComponent_div_0_tr_91_Template(rf,ctx){if(1&rf){const _r16=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275getCurrentView"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"tr"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](2,"td",9),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3,"\n          "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](4,"div",10),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](5,"\n            "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](6,"input",16),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("ngModelChange",(function ResourcePoliciesComponent_div_0_tr_91_Template_input_ngModelChange_6_listener($event){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r16);const entry_r4=ctx.$implicit;return _angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"](2).selectCheckbox(entry_r4,$event)})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](7,"\n            "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](8,"label",12),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](9,"\n          "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](10,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](11,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](12,"th",17),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](13),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](14,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](15,"td"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](16),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](17,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](18,"td"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](19),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](20,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](21,"td"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](22),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](23,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](24,ResourcePoliciesComponent_div_0_tr_91_td_24_Template,3,3,"td",6),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](25,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](26,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](27,ResourcePoliciesComponent_div_0_tr_91_td_27_Template,1,0,"td",6),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](28,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](29,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](30,ResourcePoliciesComponent_div_0_tr_91_td_30_Template,3,3,"td",6),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](31,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](32,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](33,ResourcePoliciesComponent_div_0_tr_91_td_33_Template,1,0,"td",6),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](34,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](35,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](36,"td"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](37),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](38,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](39,"td"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](40),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](41,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](42,"td",9),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](43,"\n\n          "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](44,"div",18),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](45,"\n            "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](46,"button",19),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("click",(function ResourcePoliciesComponent_div_0_tr_91_Template_button_click_46_listener(){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r16);const entry_r4=ctx.$implicit;return _angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"](2).redirectToResourcePolicyEditPage(entry_r4.policy)})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](47,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](48,"\n              "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](49,"i",20),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](50,"\n            "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](51,"\n            "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](52,ResourcePoliciesComponent_div_0_tr_91_button_52_Template,5,3,"button",21),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](53,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](54,"\n          "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](55,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](56,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()}if(2&rf){const entry_r4=ctx.$implicit,ctx_r3=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"](2);_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](6),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("id",entry_r4.id)("ngModel",entry_r4.checked),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("for",entry_r4.id),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](5),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate1"]("\n          ",entry_r4.id,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](entry_r4.policy.name),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](entry_r4.policy.policyType),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](entry_r4.policy.action),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](25,15,ctx_r3.hasEPerson(entry_r4.policy))),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",!_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](28,17,ctx_r3.hasEPerson(entry_r4.policy))),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](31,19,ctx_r3.hasGroup(entry_r4.policy))),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",!_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](34,21,ctx_r3.hasGroup(entry_r4.policy))),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](ctx_r3.formatDate(entry_r4.policy.startDate)),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](ctx_r3.formatDate(entry_r4.policy.endDate)),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](6),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("title",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](47,23,"resource-policies.table.headers.edit.policy")),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](6),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](53,25,ctx_r3.hasGroup(entry_r4.policy)))}}function ResourcePoliciesComponent_div_0_Template(rf,ctx){if(1&rf){const _r19=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275getCurrentView"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div",1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](2,"table",2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](4,"thead"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](5,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](6,"tr"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](7,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](8,"th",3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](9,"\n          "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](10,"div",4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](11),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](12,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](13,"div"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](14,"\n              "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](15,"button",5),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("click",(function ResourcePoliciesComponent_div_0_Template_button_click_15_listener(){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r19);return _angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]().deleteSelectedResourcePolicies()})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](16,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](17,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](18,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](19,"\n                "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](20,ResourcePoliciesComponent_div_0_span_20_Template,5,3,"span",6),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](21,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](22,"\n                "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](23,ResourcePoliciesComponent_div_0_span_23_Template,5,3,"span",6),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](24,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](25,"\n              "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](26,"\n              "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](27,"button",7),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("click",(function ResourcePoliciesComponent_div_0_Template_button_click_27_listener(){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r19);return _angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]().redirectToResourcePolicyCreatePage()})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](28,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](29,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](30,"\n                "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](31,"i",8),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](32),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](33,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](34,"\n            "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](35,"\n          "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](36,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](37,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](38,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](39,"tr",9),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](40,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](41,"th"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](42,"\n          "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](43,"div",10),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](44,"\n            "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](45,"input",11),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("change",(function ResourcePoliciesComponent_div_0_Template_input_change_45_listener($event){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r19);return _angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]().selectAllCheckbox($event)})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](46,"\n            "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](47,"label",12),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](48,"\n          "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](49,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](50,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](51,"th"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](52),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](53,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](54,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](55,"th"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](56),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](57,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](58,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](59,"th"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](60),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](61,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](62,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](63,"th"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](64),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](65,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](66,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](67,"th"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](68),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](69,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](70,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](71,"th"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](72),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](73,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](74,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](75,"th"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](76),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](77,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](78,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](79,"th"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](80),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](81,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](82,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](83,"th"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](84),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](85,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](86,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](87,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](88,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](89,"tbody"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](90,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](91,ResourcePoliciesComponent_div_0_tr_91_Template,57,27,"tr",13),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](92,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](93,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](94,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](95,"\n"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()}if(2&rf){const ctx_r0=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](11),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate2"]("\n            ",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](12,21,"resource-policies.table.headers.title.for."+ctx_r0.resourceType)," ",ctx_r0.resourceUUID,"\n            "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("disabled",!_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](16,23,ctx_r0.canDelete())||_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](17,25,ctx_r0.isProcessingDelete()))("title",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](18,27,"resource-policies.delete.btn.title")),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](5),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](21,29,ctx_r0.isProcessingDelete())),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",!_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](24,31,ctx_r0.isProcessingDelete())),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("disabled",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](28,33,ctx_r0.isProcessingDelete()))("title",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](29,35,"resource-policies.add.for."+ctx_r0.resourceType)),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](5),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate1"]("\n                ",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](33,37,"resource-policies.add.button"),"\n              "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](13),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("id","selectAll_"+ctx_r0.resourceUUID),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("for","selectAll_"+ctx_r0.resourceUUID),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](5),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](53,39,"resource-policies.table.headers.id")),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](57,41,"resource-policies.table.headers.name")),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](61,43,"resource-policies.table.headers.policyType")),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](65,45,"resource-policies.table.headers.action")),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](69,47,"resource-policies.table.headers.eperson")),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](73,49,"resource-policies.table.headers.group")),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](77,51,"resource-policies.table.headers.date.start")),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](81,53,"resource-policies.table.headers.date.end")),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](85,55,"resource-policies.table.headers.edit")),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](7),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngForOf",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](92,57,ctx_r0.getResourcePolicies()))}}class ResourcePoliciesComponent{constructor(cdr,dsoNameService,ePersonService,groupService,notificationsService,requestService,resourcePolicyService,route,router,translate){this.cdr=cdr,this.dsoNameService=dsoNameService,this.ePersonService=ePersonService,this.groupService=groupService,this.notificationsService=notificationsService,this.requestService=requestService,this.resourcePolicyService=resourcePolicyService,this.route=route,this.router=router,this.translate=translate,this.processingDelete$=new rxjs__WEBPACK_IMPORTED_MODULE_1__.a(!1),this.resourcePoliciesEntries$=new rxjs__WEBPACK_IMPORTED_MODULE_1__.a([]),this.subs=[]}ngOnInit(){this.isActive=!0,this.initResourcePolicyLIst()}canDelete(){return Object(rxjs__WEBPACK_IMPORTED_MODULE_2__.a)(this.resourcePoliciesEntries$.value).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.a)((entry=>entry.checked)),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.a)(((acc,value)=>[...acc,value]),[]),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.a)((entries=>Object(_empty_util__WEBPACK_IMPORTED_MODULE_15__.e)(entries))),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.a)())}deleteSelectedResourcePolicies(){this.processingDelete$.next(!0);const policiesToDelete=this.resourcePoliciesEntries$.value.filter((entry=>entry.checked));this.subs.push(Object(rxjs__WEBPACK_IMPORTED_MODULE_2__.a)(policiesToDelete).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.a)((entry=>this.resourcePolicyService.delete(entry.policy.id))),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.a)(((acc,value)=>[...acc,value]),[]),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.a)((results=>results.length===policiesToDelete.length)),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.a)(1)).subscribe((results=>{const failureResults=results.filter((result=>!result));Object(_empty_util__WEBPACK_IMPORTED_MODULE_15__.d)(failureResults)?this.notificationsService.success(null,this.translate.get("resource-policies.delete.success.content")):this.notificationsService.error(null,this.translate.get("resource-policies.delete.failure.content")),this.requestService.setStaleByHrefSubstring(this.resourceUUID),this.processingDelete$.next(!1)})))}formatDate(date){return Object(_empty_util__WEBPACK_IMPORTED_MODULE_15__.e)(date)?Object(_date_util__WEBPACK_IMPORTED_MODULE_19__.b)(Object(_date_util__WEBPACK_IMPORTED_MODULE_19__.d)(date)):""}getEPersonName(policy){return policy.eperson.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.a)((()=>this.isActive)),Object(_core_shared_operators__WEBPACK_IMPORTED_MODULE_12__.k)(),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.a)((eperson=>this.dsoNameService.getName(eperson))),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.a)(""))}getGroupName(policy){return policy.group.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.a)((()=>this.isActive)),Object(_core_shared_operators__WEBPACK_IMPORTED_MODULE_12__.k)(),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.a)((group=>this.dsoNameService.getName(group))),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.a)(""))}getResourcePolicies(){return this.resourcePoliciesEntries$.asObservable()}hasEPerson(policy){return policy.eperson.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.a)((()=>this.isActive)),Object(_core_shared_operators__WEBPACK_IMPORTED_MODULE_12__.j)(),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.a)((eperson=>Object(_empty_util__WEBPACK_IMPORTED_MODULE_15__.e)(eperson))),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.a)(!1))}hasGroup(policy){return policy.group.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.a)((()=>this.isActive)),Object(_core_shared_operators__WEBPACK_IMPORTED_MODULE_12__.j)(),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.a)((group=>Object(_empty_util__WEBPACK_IMPORTED_MODULE_15__.e)(group))),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.a)(!1))}initResourcePolicyLIst(){this.subs.push(this.resourcePolicyService.searchByResource(this.resourceUUID,null,!1,!0,Object(_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_20__.a)("eperson"),Object(_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_20__.a)("group")).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.a)((()=>this.isActive)),Object(_core_shared_operators__WEBPACK_IMPORTED_MODULE_12__.c)()).subscribe((result=>{const entries=result.payload.page.map((policy=>({id:policy.id,policy:policy,checked:!1})));this.resourcePoliciesEntries$.next(entries),this.cdr.detectChanges()})))}isProcessingDelete(){return this.processingDelete$.asObservable()}redirectToResourcePolicyCreatePage(){this.router.navigate(["./create"],{relativeTo:this.route,queryParams:{policyTargetId:this.resourceUUID,targetType:this.resourceType}})}redirectToResourcePolicyEditPage(policy){this.router.navigate(["./edit"],{relativeTo:this.route,queryParams:{policyId:policy.id}})}redirectToGroupEditPage(policy){this.subs.push(this.groupService.findByHref(policy._links.group.href,!1).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.a)((()=>this.isActive)),Object(_core_shared_operators__WEBPACK_IMPORTED_MODULE_12__.j)(),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.a)((group=>group.id))).subscribe((groupUUID=>{this.router.navigate([_app_routing_paths__WEBPACK_IMPORTED_MODULE_21__.a,_access_control_access_control_routing_paths__WEBPACK_IMPORTED_MODULE_22__.a,groupUUID])})))}selectAllCheckbox(event){const checked=event.target.checked;this.resourcePoliciesEntries$.value.forEach((entry=>entry.checked=checked))}selectCheckbox(policyEntry,checked){policyEntry.checked=checked}ngOnDestroy(){this.isActive=!1,this.resourcePoliciesEntries$=null,this.subs.filter((subscription=>Object(_empty_util__WEBPACK_IMPORTED_MODULE_15__.b)(subscription))).forEach((subscription=>subscription.unsubscribe()))}}ResourcePoliciesComponent.\u0275fac=function ResourcePoliciesComponent_Factory(t){return new(t||ResourcePoliciesComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__.ChangeDetectorRef),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_core_breadcrumbs_dso_name_service__WEBPACK_IMPORTED_MODULE_13__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_core_eperson_eperson_data_service__WEBPACK_IMPORTED_MODULE_16__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_core_eperson_group_data_service__WEBPACK_IMPORTED_MODULE_14__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_18__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_core_data_request_service__WEBPACK_IMPORTED_MODULE_17__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_core_resource_policy_resource_policy_service__WEBPACK_IMPORTED_MODULE_11__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_23__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_23__.g),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_ngx_translate_core__WEBPACK_IMPORTED_MODULE_24__.e))},ResourcePoliciesComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineComponent"]({type:ResourcePoliciesComponent,selectors:[["ds-resource-policies"]],inputs:{resourceUUID:"resourceUUID",resourceType:"resourceType"},decls:3,vars:3,consts:[["class","table-responsive",4,"ngIf"],[1,"table-responsive"],[1,"table","table-striped","table-bordered","table-hover"],["colspan","10"],[1,"d-flex","justify-content-between","align-items-center","m-0"],[1,"btn","btn-danger","float-right","ml-1",3,"disabled","title","click"],[4,"ngIf"],[1,"btn","btn-success","float-right",3,"disabled","title","click"],[1,"fas","fa-plus"],[1,"text-center"],[1,"custom-control","custom-checkbox"],["type","checkbox",1,"custom-control-input",3,"id","change"],[1,"custom-control-label",3,"for"],[4,"ngFor","ngForTrackById","ngForOf"],[1,"fas","fa-circle-notch","fa-spin"],[1,"fas","fa-trash-alt","fa-fw"],["type","checkbox",1,"custom-control-input",3,"id","ngModel","ngModelChange"],["scope","row"],[1,"btn-group","edit-field"],[1,"btn","btn-outline-primary","btn-sm",3,"title","click"],[1,"fas","fa-edit","fa-fw"],["class","btn btn-outline-primary btn-sm",3,"title","click",4,"ngIf"],[1,"fas","fa-users","fa-fw"]],template:function ResourcePoliciesComponent_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](0,ResourcePoliciesComponent_div_0_Template,96,59,"div",0),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](1,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](2,"\n")),2&rf){let tmp_0_0=null;_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",(null==(tmp_0_0=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](1,1,ctx.getResourcePolicies()))?null:tmp_0_0.length)>0)}},directives:[_angular_common__WEBPACK_IMPORTED_MODULE_25__.NgIf,_angular_common__WEBPACK_IMPORTED_MODULE_25__.NgForOf,_ng_for_track_by_id_directive__WEBPACK_IMPORTED_MODULE_26__.a,_angular_forms__WEBPACK_IMPORTED_MODULE_27__.CheckboxControlValueAccessor,_angular_forms__WEBPACK_IMPORTED_MODULE_27__.NgControlStatus,_angular_forms__WEBPACK_IMPORTED_MODULE_27__.NgModel],pipes:[_angular_common__WEBPACK_IMPORTED_MODULE_25__.AsyncPipe,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_24__.d],styles:["td[_ngcontent-%COMP%]   .btn-link[_ngcontent-%COMP%]:focus{-webkit-box-shadow:none!important;box-shadow:none!important}"]})},"/kFS":function(module,exports,__webpack_require__){var map={"./custom/app/workflowitems-edit-page/workflow-item-delete/workflow-item-delete.component":["xshI",71]};function webpackAsyncContext(req){if(!__webpack_require__.o(map,req))return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}));var ids=map[req],id=ids[0];return __webpack_require__.e(ids[1]).then((function(){return __webpack_require__(id)}))}webpackAsyncContext.keys=function webpackAsyncContextKeys(){return Object.keys(map)},webpackAsyncContext.id="/kFS",module.exports=webpackAsyncContext},"09O+":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"WorkflowItemsEditPageModule",(function(){return WorkflowItemsEditPageModule}));var common=__webpack_require__("ofXK"),core=__webpack_require__("fXoL"),shared_module=__webpack_require__("PCNd"),router=__webpack_require__("tyNb"),authenticated_guard=__webpack_require__("tPZA"),follow_link_config_model=__webpack_require__("84Zn"),workflowitem_data_service=__webpack_require__("RMbB"),operators=__webpack_require__("1QIV");class workflow_item_page_resolver_WorkflowItemPageResolver{constructor(workflowItemService){this.workflowItemService=workflowItemService}resolve(route,state){return this.workflowItemService.findById(route.params.id,!0,!1,Object(follow_link_config_model.a)("item")).pipe(Object(operators.g)())}}workflow_item_page_resolver_WorkflowItemPageResolver.\u0275fac=function WorkflowItemPageResolver_Factory(t){return new(t||workflow_item_page_resolver_WorkflowItemPageResolver)(core["\u0275\u0275inject"](workflowitem_data_service.a))},workflow_item_page_resolver_WorkflowItemPageResolver.\u0275prov=core["\u0275\u0275defineInjectable"]({token:workflow_item_page_resolver_WorkflowItemPageResolver,factory:workflow_item_page_resolver_WorkflowItemPageResolver.\u0275fac});var workflowitems_edit_page_routing_paths=__webpack_require__("jgSD"),themed_submission_edit_component=__webpack_require__("YoQ9"),themed_component=__webpack_require__("JTKQ");function ThemedWorkflowItemDeleteComponent_ng_template_0_Template(rf,ctx){}class themed_workflow_item_delete_component_ThemedWorkflowItemDeleteComponent extends themed_component.a{getComponentName(){return"WorkflowItemDeleteComponent"}importThemedComponent(themeName){return __webpack_require__("/kFS")(`./${themeName}/app/workflowitems-edit-page/workflow-item-delete/workflow-item-delete.component`)}importUnthemedComponent(){return Promise.resolve().then(__webpack_require__.bind(null,"Lzy0"))}}themed_workflow_item_delete_component_ThemedWorkflowItemDeleteComponent.\u0275fac=function ThemedWorkflowItemDeleteComponent_Factory(t){return \u0275ThemedWorkflowItemDeleteComponent_BaseFactory(t||themed_workflow_item_delete_component_ThemedWorkflowItemDeleteComponent)},themed_workflow_item_delete_component_ThemedWorkflowItemDeleteComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:themed_workflow_item_delete_component_ThemedWorkflowItemDeleteComponent,selectors:[["ds-themed-workflow-item-delete"]],features:[core["\u0275\u0275InheritDefinitionFeature"]],decls:3,vars:0,consts:[["vcr",""]],template:function ThemedWorkflowItemDeleteComponent_Template(rf,ctx){1&rf&&(core["\u0275\u0275template"](0,ThemedWorkflowItemDeleteComponent_ng_template_0_Template,0,0,"ng-template",null,0,core["\u0275\u0275templateRefExtractor"]),core["\u0275\u0275text"](2,"\n"))},encapsulation:2});const \u0275ThemedWorkflowItemDeleteComponent_BaseFactory=core["\u0275\u0275getInheritedFactory"](themed_workflow_item_delete_component_ThemedWorkflowItemDeleteComponent);function ThemedWorkflowItemSendBackComponent_ng_template_0_Template(rf,ctx){}class themed_workflow_item_send_back_component_ThemedWorkflowItemSendBackComponent extends themed_component.a{getComponentName(){return"WorkflowItemSendBackComponent"}importThemedComponent(themeName){return __webpack_require__("2YUx")(`./${themeName}/app/workflowitems-edit-page/workflow-item-send-back/workflow-item-send-back.component`)}importUnthemedComponent(){return Promise.resolve().then(__webpack_require__.bind(null,"jqBZ"))}}themed_workflow_item_send_back_component_ThemedWorkflowItemSendBackComponent.\u0275fac=function ThemedWorkflowItemSendBackComponent_Factory(t){return \u0275ThemedWorkflowItemSendBackComponent_BaseFactory(t||themed_workflow_item_send_back_component_ThemedWorkflowItemSendBackComponent)},themed_workflow_item_send_back_component_ThemedWorkflowItemSendBackComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:themed_workflow_item_send_back_component_ThemedWorkflowItemSendBackComponent,selectors:[["ds-themed-workflow-item-send-back"]],features:[core["\u0275\u0275InheritDefinitionFeature"]],decls:3,vars:0,consts:[["vcr",""]],template:function ThemedWorkflowItemSendBackComponent_Template(rf,ctx){1&rf&&(core["\u0275\u0275template"](0,ThemedWorkflowItemSendBackComponent_ng_template_0_Template,0,0,"ng-template",null,0,core["\u0275\u0275templateRefExtractor"]),core["\u0275\u0275text"](2,"\n"))},encapsulation:2});const \u0275ThemedWorkflowItemSendBackComponent_BaseFactory=core["\u0275\u0275getInheritedFactory"](themed_workflow_item_send_back_component_ThemedWorkflowItemSendBackComponent);var i18n_breadcrumb_resolver=__webpack_require__("A0IO"),switchMap=__webpack_require__("eIep"),ngrx_store=__webpack_require__("l7P3");class item_from_workflow_resolver_ItemFromWorkflowResolver{constructor(workflowItemService,store){this.workflowItemService=workflowItemService,this.store=store}resolve(route,state){return this.workflowItemService.findById(route.params.id,!0,!1,Object(follow_link_config_model.a)("item")).pipe(Object(operators.g)(),Object(switchMap.a)((wfiRD=>wfiRD.payload.item)),Object(operators.g)())}}item_from_workflow_resolver_ItemFromWorkflowResolver.\u0275fac=function ItemFromWorkflowResolver_Factory(t){return new(t||item_from_workflow_resolver_ItemFromWorkflowResolver)(core["\u0275\u0275inject"](workflowitem_data_service.a),core["\u0275\u0275inject"](ngrx_store.i))},item_from_workflow_resolver_ItemFromWorkflowResolver.\u0275prov=core["\u0275\u0275defineInjectable"]({token:item_from_workflow_resolver_ItemFromWorkflowResolver,factory:item_from_workflow_resolver_ItemFromWorkflowResolver.\u0275fac});var themed_full_item_page_component=__webpack_require__("Nh4g");class WorkflowItemsEditPageRoutingModule{}WorkflowItemsEditPageRoutingModule.\u0275fac=function WorkflowItemsEditPageRoutingModule_Factory(t){return new(t||WorkflowItemsEditPageRoutingModule)},WorkflowItemsEditPageRoutingModule.\u0275mod=core["\u0275\u0275defineNgModule"]({type:WorkflowItemsEditPageRoutingModule}),WorkflowItemsEditPageRoutingModule.\u0275inj=core["\u0275\u0275defineInjector"]({providers:[workflow_item_page_resolver_WorkflowItemPageResolver,item_from_workflow_resolver_ItemFromWorkflowResolver],imports:[[router.k.forChild([{path:":id",resolve:{wfi:workflow_item_page_resolver_WorkflowItemPageResolver},children:[{canActivate:[authenticated_guard.a],path:workflowitems_edit_page_routing_paths.b,component:themed_submission_edit_component.a,resolve:{breadcrumb:i18n_breadcrumb_resolver.a},data:{title:"workflow-item.edit.title",breadcrumbKey:"workflow-item.edit"}},{canActivate:[authenticated_guard.a],path:workflowitems_edit_page_routing_paths.d,component:themed_full_item_page_component.a,resolve:{dso:item_from_workflow_resolver_ItemFromWorkflowResolver,breadcrumb:i18n_breadcrumb_resolver.a},data:{title:"workflow-item.view.title",breadcrumbKey:"workflow-item.view"}},{canActivate:[authenticated_guard.a],path:workflowitems_edit_page_routing_paths.a,component:themed_workflow_item_delete_component_ThemedWorkflowItemDeleteComponent,resolve:{breadcrumb:i18n_breadcrumb_resolver.a},data:{title:"workflow-item.delete.title",breadcrumbKey:"workflow-item.edit"}},{canActivate:[authenticated_guard.a],path:workflowitems_edit_page_routing_paths.c,component:themed_workflow_item_send_back_component_ThemedWorkflowItemSendBackComponent,resolve:{breadcrumb:i18n_breadcrumb_resolver.a},data:{title:"workflow-item.send-back.title",breadcrumbKey:"workflow-item.edit"}}]}])]]});var submission_module=__webpack_require__("c3nT"),statistics_module=(__webpack_require__("Lzy0"),__webpack_require__("jqBZ"),__webpack_require__("9i+i")),item_page_module=__webpack_require__("Bfzi");class WorkflowItemsEditPageModule{}WorkflowItemsEditPageModule.\u0275fac=function WorkflowItemsEditPageModule_Factory(t){return new(t||WorkflowItemsEditPageModule)},WorkflowItemsEditPageModule.\u0275mod=core["\u0275\u0275defineNgModule"]({type:WorkflowItemsEditPageModule}),WorkflowItemsEditPageModule.\u0275inj=core["\u0275\u0275defineInjector"]({imports:[[WorkflowItemsEditPageRoutingModule,common.CommonModule,shared_module.a,submission_module.a,statistics_module.a,item_page_module.ItemPageModule]]})},"0TMo":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return DsoPageSingleFeatureGuard}));var _dso_page_some_feature_guard__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("HENg"),rxjs_operators__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("lJxs");class DsoPageSingleFeatureGuard extends _dso_page_some_feature_guard__WEBPACK_IMPORTED_MODULE_0__.a{getFeatureIDs(route,state){return this.getFeatureID(route,state).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_1__.a)((featureID=>[featureID])))}}},"0VLH":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return JsonPatchOperationPathCombiner}));var _shared_empty_util__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("J3qs"),_url_combiner_url_combiner__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("zZO8");class JsonPatchOperationPathCombiner extends _url_combiner_url_combiner__WEBPACK_IMPORTED_MODULE_1__.a{constructor(rootElement,...subRootElements){super(rootElement,...subRootElements),this._rootElement=rootElement,this._subRootElement=subRootElements.join("/")}get rootElement(){return this._rootElement}get subRootElement(){return this._subRootElement}getPath(fragment){Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_0__.h)(fragment)&&Array.isArray(fragment)&&(fragment=fragment.join("/"));let path="/"+this.toString();return Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_0__.h)(fragment)&&(path+="/"+fragment),{rootElement:this._rootElement,subRootElement:this._subRootElement,path:path}}}},"0qhl":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ConfigurationSearchPageGuard}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL");class ConfigurationSearchPageGuard{canActivate(route,state){const newTitle=route.params.configuration+".search.title";return route.data={title:newTitle},!0}}ConfigurationSearchPageGuard.\u0275fac=function ConfigurationSearchPageGuard_Factory(t){return new(t||ConfigurationSearchPageGuard)},ConfigurationSearchPageGuard.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineInjectable"]({token:ConfigurationSearchPageGuard,factory:ConfigurationSearchPageGuard.\u0275fac})},"20cJ":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return SubmissionImportExternalPreviewComponent}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),_core_shared_metadata_utils__WEBPACK_IMPORTED_MODULE_2__=(__webpack_require__("bBsm"),__webpack_require__("/eM4")),rxjs_operators__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("5+tZ"),_submission_service__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("J/vq"),_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("lI3o"),_import_external_collection_submission_import_external_collection_component__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("6c/T"),_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("1kSV"),_angular_router__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("tyNb"),_angular_common__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("ofXK"),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("sYmb");function SubmissionImportExternalPreviewComponent_div_35_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div",5),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](2,"div",6),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](4,"strong"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](5),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](6,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](7,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](8,"p"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](9),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](10,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](11,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()),2&rf){const metadata_r1=ctx.$implicit;_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](5),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](6,2,"item.preview."+metadata_r1.key)),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](metadata_r1.value.value)}}class SubmissionImportExternalPreviewComponent{constructor(activeModal,submissionService,modalService,router,notificationService){this.activeModal=activeModal,this.submissionService=submissionService,this.modalService=modalService,this.router=router,this.notificationService=notificationService}ngOnInit(){this.metadataList=[];Object.keys(this.externalSourceEntry.metadata).forEach((key=>{this.metadataList.push({key:key,value:_core_shared_metadata_utils__WEBPACK_IMPORTED_MODULE_2__.a.first(this.externalSourceEntry.metadata,key)})}))}closeMetadataModal(){this.activeModal.dismiss(!1)}import(){this.modalRef=this.modalService.open(_import_external_collection_submission_import_external_collection_component__WEBPACK_IMPORTED_MODULE_6__.a,{size:"lg"}),this.modalRef.componentInstance.entityType=this.labelPrefix,this.closeMetadataModal(),this.modalRef.componentInstance.selectedEvent.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.a)((collectionListEntry=>this.submissionService.createSubmissionFromExternalSource(this.externalSourceEntry._links.self.href,collectionListEntry.collection.id)))).subscribe((submissionObjects=>{let isValid=!1;1===submissionObjects.length&&null!==submissionObjects[0]&&(isValid=!0,this.router.navigateByUrl("/workspaceitems/"+submissionObjects[0].id+"/edit")),isValid||this.notificationService.error("submission.import-external.preview.error.import.title","submission.import-external.preview.error.import.body"),this.modalRef.close()}))}}SubmissionImportExternalPreviewComponent.\u0275fac=function SubmissionImportExternalPreviewComponent_Factory(t){return new(t||SubmissionImportExternalPreviewComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_7__.c),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_submission_service__WEBPACK_IMPORTED_MODULE_4__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_7__.q),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_8__.g),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_5__.a))},SubmissionImportExternalPreviewComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineComponent"]({type:SubmissionImportExternalPreviewComponent,selectors:[["ds-submission-import-external-preview"]],inputs:{externalSourceEntry:"externalSourceEntry"},decls:59,vars:10,consts:[[1,"modal-header"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"container"],[1,"row"],[1,"col-md-12"],["class","row",4,"ngFor","ngForOf"],[1,"col-md-12","text-right"],["role","button",1,"btn","btn-success",3,"click"],["aria-hidden","true",1,"fa","fa-file-import"]],template:function SubmissionImportExternalPreviewComponent_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div",0),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](2,"h2"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](4,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](5,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](6,"button",1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("click",(function SubmissionImportExternalPreviewComponent_Template_button_click_6_listener(){return ctx.closeMetadataModal()})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](7,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](8,"span",2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](9,"\xd7"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](10,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](11,"\n"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](12,"\n"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](13,"div",3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](14,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](15,"div",4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](16,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](17,"div",5),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](18,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](19,"div",6),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](20,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](21,"p"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](22),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](23,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](24,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](25,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](26,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](27,"div",5),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](28,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](29,"div",6),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](30,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](31,"hr"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](32,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](33,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](34,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](35,SubmissionImportExternalPreviewComponent_div_35_Template,12,4,"div",7),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](36,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](37,"div",5),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](38,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](39,"div",6),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](40,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](41,"hr"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](42,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](43,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](44,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](45,"div",5),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](46,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](47,"div",8),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](48,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](49,"button",9),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("click",(function SubmissionImportExternalPreviewComponent_Template_button_click_49_listener(){return ctx.import()})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](50,"\n          "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](51,"i",10),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](52),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](53,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](54,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](55,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](56,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](57,"\n"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](58,"\n")),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](4,4,"submission.import-external.preview.title."+ctx.labelPrefix)),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](19),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](23,6,"submission.import-external.preview.subtitle")),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](13),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngForOf",ctx.metadataList),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](17),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate1"](" ",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](53,8,"submission.import-external.preview.button.import"),"\n        "))},directives:[_angular_common__WEBPACK_IMPORTED_MODULE_9__.NgForOf],pipes:[_ngx_translate_core__WEBPACK_IMPORTED_MODULE_10__.d],styles:[".close[_ngcontent-%COMP%]:focus{outline:none!important}"]})},"2YUx":function(module,exports,__webpack_require__){var map={"./custom/app/workflowitems-edit-page/workflow-item-send-back/workflow-item-send-back.component":["Oc6R",72]};function webpackAsyncContext(req){if(!__webpack_require__.o(map,req))return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}));var ids=map[req],id=ids[0];return __webpack_require__.e(ids[1]).then((function(){return __webpack_require__(id)}))}webpackAsyncContext.keys=function webpackAsyncContextKeys(){return Object.keys(map)},webpackAsyncContext.id="2YUx",module.exports=webpackAsyncContext},"3aq+":function(module,exports,__webpack_require__){var map={"./custom/app/submission/edit/submission-edit.component":["OutP",68]};function webpackAsyncContext(req){if(!__webpack_require__.o(map,req))return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}));var ids=map[req],id=ids[0];return __webpack_require__.e(ids[1]).then((function(){return __webpack_require__(id)}))}webpackAsyncContext.keys=function webpackAsyncContextKeys(){return Object.keys(map)},webpackAsyncContext.id="3aq+",module.exports=webpackAsyncContext},"3cpT":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return SubmissionImportExternalSearchbarComponent}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),rxjs__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("LRne"),rxjs_operators__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("JIr8"),rxjs_operators__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("vkgz"),_core_cache_models_request_param_model__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("Hl3I"),_core_data_external_source_service__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("dHui"),_core_data_paginated_list_model__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("f+Ev"),_core_shared_page_info_model__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("oBfO"),_shared_remote_data_utils__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("GG8d"),_core_data_request_models__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("B/au"),_core_shared_operators__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("1QIV"),_shared_host_window_service__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("14tD"),_shared_empty_util__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("J3qs"),_angular_common__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("ofXK"),_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("1kSV"),ngx_infinite_scroll__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("dlKe"),_angular_forms__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("3Pt+"),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("sYmb");function SubmissionImportExternalSearchbarComponent_div_0_Template(rf,ctx){if(1&rf){const _r5=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275getCurrentView"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div",10),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](2,"input",11),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("keyup.enter",(function SubmissionImportExternalSearchbarComponent_div_0_Template_input_keyup_enter_2_listener(){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r5);const ctx_r4=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]();return""===ctx_r4.searchString?null:ctx_r4.search()}))("ngModelChange",(function SubmissionImportExternalSearchbarComponent_div_0_Template_input_ngModelChange_2_listener($event){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r5);return _angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]().searchString=$event})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](3,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](4,"\n"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()}if(2&rf){const ctx_r0=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275propertyInterpolate"]("placeholder",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](3,2,"submission.import-external.search.placeholder")),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngModel",ctx_r0.searchString)}}function SubmissionImportExternalSearchbarComponent_input_5_Template(rf,ctx){if(1&rf){const _r8=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275getCurrentView"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"input",11),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("keyup.enter",(function SubmissionImportExternalSearchbarComponent_input_5_Template_input_keyup_enter_0_listener(){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r8);const ctx_r7=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]();return""===ctx_r7.searchString?null:ctx_r7.search()}))("ngModelChange",(function SubmissionImportExternalSearchbarComponent_input_5_Template_input_ngModelChange_0_listener($event){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r8);return _angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]().searchString=$event})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](1,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()}if(2&rf){const ctx_r1=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275propertyInterpolate"]("placeholder",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](1,2,"submission.import-external.search.placeholder")),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngModel",ctx_r1.searchString)}}function SubmissionImportExternalSearchbarComponent_button_20_Template(rf,ctx){if(1&rf){const _r12=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275getCurrentView"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"button",12),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("click",(function SubmissionImportExternalSearchbarComponent_button_20_Template_button_click_0_listener(){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r12);const source_r10=ctx.$implicit;return _angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]().makeSourceSelection(source_r10)})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](1,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](3,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()}if(2&rf){const source_r10=ctx.$implicit;_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275propertyInterpolate"]("title",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](1,2,"submission.import-external.source."+(null==source_r10?null:source_r10.name))),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](3,4,"submission.import-external.source."+(null==source_r10?null:source_r10.name)))}}function SubmissionImportExternalSearchbarComponent_div_22_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div",13),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](1,"p"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](3,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](3,1,"submission.import-external.source.loading")))}const _c0=function(a0){return{"input-group-append":a0}};class SubmissionImportExternalSearchbarComponent{constructor(externalService,cdr,windowService){this.externalService=externalService,this.cdr=cdr,this.windowService=windowService,this.sourceListLoading=!1,this.externalSourceData=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.EventEmitter}ngOnInit(){this.selectedElement={id:"",name:"loading"},this.searchString="",this.sourceList=[],this.findListOptions=Object.assign({},new _core_data_request_models__WEBPACK_IMPORTED_MODULE_9__.f,{elementsPerPage:5,currentPage:1,searchParams:[new _core_cache_models_request_param_model__WEBPACK_IMPORTED_MODULE_4__.a("entityType",this.initExternalSourceData.entity)]}),this.externalService.searchBy("findByEntityType",this.findListOptions).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.a)((()=>{const pageInfo=new _core_shared_page_info_model__WEBPACK_IMPORTED_MODULE_7__.a,paginatedList=Object(_core_data_paginated_list_model__WEBPACK_IMPORTED_MODULE_6__.b)(pageInfo,[]),paginatedListRD=Object(_shared_remote_data_utils__WEBPACK_IMPORTED_MODULE_8__.c)(paginatedList);return Object(rxjs__WEBPACK_IMPORTED_MODULE_1__.a)(paginatedListRD)})),Object(_core_shared_operators__WEBPACK_IMPORTED_MODULE_10__.j)()).subscribe((externalSource=>{externalSource.page.forEach((element=>{this.sourceList.push({id:element.id,name:element.name}),this.initExternalSourceData.sourceId===element.id&&(this.selectedElement={id:element.id,name:element.name},this.searchString=this.initExternalSourceData.query)})),""===this.selectedElement.id&&(this.selectedElement=this.sourceList[0]),this.pageInfo=externalSource.pageInfo,this.cdr.detectChanges()})),this.isXsOrSm$=this.windowService.isXsOrSm()}makeSourceSelection(source){this.selectedElement=source}onScroll(){!this.sourceListLoading&&this.pageInfo.currentPage+1<=this.pageInfo.totalPages&&(this.sourceListLoading=!0,this.findListOptions=Object.assign({},new _core_data_request_models__WEBPACK_IMPORTED_MODULE_9__.f,{elementsPerPage:5,currentPage:this.findListOptions.currentPage+1,searchParams:[new _core_cache_models_request_param_model__WEBPACK_IMPORTED_MODULE_4__.a("entityType",this.initExternalSourceData.entity)]}),this.externalService.searchBy("findByEntityType",this.findListOptions).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.a)((()=>{const pageInfo=new _core_shared_page_info_model__WEBPACK_IMPORTED_MODULE_7__.a,paginatedList=Object(_core_data_paginated_list_model__WEBPACK_IMPORTED_MODULE_6__.b)(pageInfo,[]),paginatedListRD=Object(_shared_remote_data_utils__WEBPACK_IMPORTED_MODULE_8__.c)(paginatedList);return Object(rxjs__WEBPACK_IMPORTED_MODULE_1__.a)(paginatedListRD)})),Object(_core_shared_operators__WEBPACK_IMPORTED_MODULE_10__.i)(),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.a)((()=>this.sourceListLoading=!1))).subscribe((externalSource=>{externalSource.payload.page.forEach((element=>{this.sourceList.push({id:element.id,name:element.name})})),this.pageInfo=externalSource.payload.pageInfo,this.cdr.detectChanges()})))}search(){this.externalSourceData.emit({entity:this.initExternalSourceData.entity,sourceId:this.selectedElement.id,query:this.searchString})}ngOnDestroy(){Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_12__.b)(this.sub)&&this.sub.unsubscribe()}}SubmissionImportExternalSearchbarComponent.\u0275fac=function SubmissionImportExternalSearchbarComponent_Factory(t){return new(t||SubmissionImportExternalSearchbarComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_core_data_external_source_service__WEBPACK_IMPORTED_MODULE_5__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__.ChangeDetectorRef),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_shared_host_window_service__WEBPACK_IMPORTED_MODULE_11__.a))},SubmissionImportExternalSearchbarComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineComponent"]({type:SubmissionImportExternalSearchbarComponent,selectors:[["ds-submission-import-external-searchbar"]],inputs:{initExternalSourceData:"initExternalSourceData"},outputs:{externalSourceData:"externalSourceData"},decls:34,vars:31,consts:[["class","input-group mb-2",4,"ngIf"],[1,"input-group","mb-5"],["type","text","class","form-control","aria-label","","aria-describedby","",3,"ngModel","placeholder","keyup.enter","ngModelChange",4,"ngIf"],["ngbDropdown","","role","group","aria-label","",3,"ngClass"],["ngbDropdownToggle","",1,"btn","btn-outline-secondary","w-fx",3,"title"],["ngbDropdownMenu","","aria-haspopup","true","aria-expanded","false","aria-labelledby","scrollableDropdownMenuButton",1,"dropdown-menu","scrollable-dropdown-menu","w-100"],["aria-labelledby","scrollableDropdownMenuButton","infiniteScroll","",1,"scrollable-menu",3,"infiniteScrollDistance","infiniteScrollThrottle","scrollWindow","scrolled"],["ngbDropdownItem","","class","dropdown-item text-truncate",3,"title","click",4,"ngFor","ngForOf"],["ngbDropdownItem","","class","scrollable-dropdown-loading text-center",4,"ngIf"],["type","button",1,"btn","btn-primary",3,"title","disabled","click"],[1,"input-group","mb-2"],["type","text","aria-label","","aria-describedby","",1,"form-control",3,"ngModel","placeholder","keyup.enter","ngModelChange"],["ngbDropdownItem","",1,"dropdown-item","text-truncate",3,"title","click"],["ngbDropdownItem","",1,"scrollable-dropdown-loading","text-center"]],template:function SubmissionImportExternalSearchbarComponent_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](0,SubmissionImportExternalSearchbarComponent_div_0_Template,5,4,"div",0),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](1,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](2,"\n"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](3,"div",1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](4,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](5,SubmissionImportExternalSearchbarComponent_input_5_Template,2,4,"input",2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](6,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](7,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](8,"div",3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](9,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](10,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](11,"button",4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](12,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](13),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](14,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](15,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](16,"div",5),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](17,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](18,"div",6),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("scrolled",(function SubmissionImportExternalSearchbarComponent_Template_div_scrolled_18_listener(){return ctx.onScroll()})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](19,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](20,SubmissionImportExternalSearchbarComponent_button_20_Template,4,6,"button",7),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](21,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](22,SubmissionImportExternalSearchbarComponent_div_22_Template,4,3,"div",8),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](23,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](24,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](25,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](26,"button",9),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("click",(function SubmissionImportExternalSearchbarComponent_Template_button_click_26_listener(){return ctx.search()})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](27,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](28,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](29),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](30,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](31,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](32,"\n"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](33,"\n")),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](1,13,ctx.isXsOrSm$)),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](5),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",!_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](6,15,ctx.isXsOrSm$)),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngClass",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pureFunction1"](29,_c0,!_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](9,17,ctx.isXsOrSm$))),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275propertyInterpolate"]("title",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](12,19,"submission.import-external.search.source.hint")),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](14,21,"submission.import-external.source."+(null==ctx.selectedElement?null:ctx.selectedElement.name))),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](5),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("infiniteScrollDistance",2)("infiniteScrollThrottle",50)("scrollWindow",!1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngForOf",ctx.sourceList),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",ctx.sourceListLoading),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("title",""===ctx.searchString?_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](27,23,"submission.import-external.search.button.hint"):_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](28,25,"submission.import-external.search.button"))("disabled",""===ctx.searchString),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](30,27,"submission.import-external.search.button")))},directives:[_angular_common__WEBPACK_IMPORTED_MODULE_13__.NgIf,_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_14__.j,_angular_common__WEBPACK_IMPORTED_MODULE_13__.NgClass,_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_14__.o,_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_14__.m,ngx_infinite_scroll__WEBPACK_IMPORTED_MODULE_15__.a,_angular_common__WEBPACK_IMPORTED_MODULE_13__.NgForOf,_angular_forms__WEBPACK_IMPORTED_MODULE_16__.DefaultValueAccessor,_angular_forms__WEBPACK_IMPORTED_MODULE_16__.NgControlStatus,_angular_forms__WEBPACK_IMPORTED_MODULE_16__.NgModel,_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_14__.l],pipes:[_angular_common__WEBPACK_IMPORTED_MODULE_13__.AsyncPipe,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_17__.d],styles:[".input-group-append[_ngcontent-%COMP%]:last-child > .btn[_ngcontent-%COMP%]:not(:last-child):not(.dropdown-toggle){margin-left:-1px;border-radius:0 .25rem .25rem 0}.input-group-append[_ngcontent-%COMP%]   .dropdown-toggle[_ngcontent-%COMP%]{border-radius:0}.w-fx[_ngcontent-%COMP%]{min-width:200px}.scrollable-menu[_ngcontent-%COMP%]{height:auto;max-height:calc(var(--ds-dropdown-menu-max-height) / 2);overflow-x:hidden}.scrollable-dropdown-loading[_ngcontent-%COMP%]{background-color:var(--bs-primary);color:#fff;height:calc(var(--bs-spacer) * 2)!important;line-height:calc(var(--bs-spacer) * 2);position:-webkit-sticky;position:sticky;bottom:0}"]})},"4vdZ":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return item_metadata_component_ItemMetadataComponent}));var core=__webpack_require__("fXoL"),item_data_service=__webpack_require__("iqTE"),object_updates_service=__webpack_require__("loKC"),lodash=__webpack_require__("LvDl"),first=__webpack_require__("SxV6"),switchMap=__webpack_require__("eIep"),operators=__webpack_require__("1QIV"),notifications_service=__webpack_require__("lI3o"),metadata_models=__webpack_require__("cBt8"),abstract_item_update_component=__webpack_require__("GsQf"),empty_util=__webpack_require__("J3qs"),aletr_type=__webpack_require__("ac5F"),object_updates_actions=__webpack_require__("X8f1");class MetadataPatchOperation{constructor(op,field){this.op=op,this.field=field}}class metadata_patch_add_operation_model_MetadataPatchAddOperation extends MetadataPatchOperation{constructor(field,value){super(metadata_patch_add_operation_model_MetadataPatchAddOperation.operationType,field),this.value=value}toOperation(){return{op:this.op,path:`/metadata/${this.field}/-`,value:this.value}}}metadata_patch_add_operation_model_MetadataPatchAddOperation.operationType="add";class metadata_patch_remove_operation_model_MetadataPatchRemoveOperation extends MetadataPatchOperation{constructor(field,place){super(metadata_patch_remove_operation_model_MetadataPatchRemoveOperation.operationType,field),this.place=place}toOperation(){return{op:this.op,path:`/metadata/${this.field}/${this.place}`}}}metadata_patch_remove_operation_model_MetadataPatchRemoveOperation.operationType="remove";class metadata_patch_replace_operation_model_MetadataPatchReplaceOperation extends MetadataPatchOperation{constructor(field,place,value){super(metadata_patch_replace_operation_model_MetadataPatchReplaceOperation.operationType,field),this.place=place,this.value=value}toOperation(){return{op:this.op,path:`/metadata/${this.field}/${this.place}`,value:this.value}}}metadata_patch_replace_operation_model_MetadataPatchReplaceOperation.operationType="replace";class metadata_patch_operation_service_MetadataPatchOperationService{fieldUpdatesToPatchOperations(fieldUpdates){const metadataPatch=this.fieldUpdatesToMetadataPatchOperations(fieldUpdates),metadataRemoveMap=new Map,patch=[];return metadataPatch.forEach((operation=>{operation.op!==metadata_patch_remove_operation_model_MetadataPatchRemoveOperation.operationType&&operation.op!==metadata_patch_replace_operation_model_MetadataPatchReplaceOperation.operationType||!Object(empty_util.b)(operation.place)||metadataRemoveMap.has(operation.field)&&metadataRemoveMap.get(operation.field).forEach((index=>{index<operation.place&&operation.place--})),operation.op===metadata_patch_remove_operation_model_MetadataPatchRemoveOperation.operationType&&Object(empty_util.b)(operation.place)&&(metadataRemoveMap.has(operation.field)||metadataRemoveMap.set(operation.field,[]),metadataRemoveMap.get(operation.field).push(operation.place)),patch.push(operation.toOperation())})),patch}fieldUpdatesToMetadataPatchOperations(fieldUpdates){const metadataPatch=[];return Object.keys(fieldUpdates).forEach((uuid=>{const update=fieldUpdates[uuid],metadatum=update.field,val={value:metadatum.value,language:metadatum.language};let operation;switch(update.changeType){case object_updates_actions.c.ADD:operation=new metadata_patch_add_operation_model_MetadataPatchAddOperation(metadatum.key,[val]);break;case object_updates_actions.c.REMOVE:operation=new metadata_patch_remove_operation_model_MetadataPatchRemoveOperation(metadatum.key,metadatum.place);break;case object_updates_actions.c.UPDATE:operation=new metadata_patch_replace_operation_model_MetadataPatchReplaceOperation(metadatum.key,metadatum.place,val)}metadataPatch.push(operation)})),metadataPatch}}metadata_patch_operation_service_MetadataPatchOperationService.\u0275fac=function MetadataPatchOperationService_Factory(t){return new(t||metadata_patch_operation_service_MetadataPatchOperationService)},metadata_patch_operation_service_MetadataPatchOperationService.\u0275prov=core["\u0275\u0275defineInjectable"]({token:metadata_patch_operation_service_MetadataPatchOperationService,factory:metadata_patch_operation_service_MetadataPatchOperationService.\u0275fac,providedIn:"root"});var fesm2015_router=__webpack_require__("tyNb"),ngx_translate_core=__webpack_require__("sYmb"),common=__webpack_require__("ofXK"),edit_in_place_field_component=__webpack_require__("mo41"),alert_component=__webpack_require__("VYMa"),object_values_pipe=__webpack_require__("snSO");function ItemMetadataComponent_button_12_Template(rf,ctx){if(1&rf){const _r7=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementStart"](0,"button",14),core["\u0275\u0275listener"]("click",(function ItemMetadataComponent_button_12_Template_button_click_0_listener(){core["\u0275\u0275restoreView"](_r7);return core["\u0275\u0275nextContext"]().reinstate()})),core["\u0275\u0275element"](1,"i",15),core["\u0275\u0275text"](2,"\n      "),core["\u0275\u0275elementStart"](3,"span",4),core["\u0275\u0275text"](4),core["\u0275\u0275pipe"](5,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](6,"\n    "),core["\u0275\u0275elementEnd"]()}2&rf&&(core["\u0275\u0275advance"](4),core["\u0275\u0275textInterpolate1"]("\xa0",core["\u0275\u0275pipeBind1"](5,1,"item.edit.metadata.reinstate-button"),""))}function ItemMetadataComponent_button_25_Template(rf,ctx){if(1&rf){const _r9=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementStart"](0,"button",16),core["\u0275\u0275listener"]("click",(function ItemMetadataComponent_button_25_Template_button_click_0_listener(){core["\u0275\u0275restoreView"](_r9);return core["\u0275\u0275nextContext"]().discard()})),core["\u0275\u0275pipe"](1,"async"),core["\u0275\u0275element"](2,"i",17),core["\u0275\u0275text"](3,"\n      "),core["\u0275\u0275elementStart"](4,"span",4),core["\u0275\u0275text"](5),core["\u0275\u0275pipe"](6,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](7,"\n    "),core["\u0275\u0275elementEnd"]()}if(2&rf){const ctx_r1=core["\u0275\u0275nextContext"]();core["\u0275\u0275property"]("disabled",!core["\u0275\u0275pipeBind1"](1,2,ctx_r1.hasChanges())),core["\u0275\u0275advance"](5),core["\u0275\u0275textInterpolate1"]("\xa0",core["\u0275\u0275pipeBind1"](6,4,"item.edit.metadata.discard-button"),"")}}const _c0=function(){return{}},_c1=function(a0,a1,a2){return{"table-warning":a0,"table-danger":a1,"table-success":a2}};function ItemMetadataComponent_table_29_tr_29_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"tr",24),core["\u0275\u0275text"](1,"\n\n    "),core["\u0275\u0275elementEnd"]()),2&rf){const updateValue_r11=ctx.$implicit,ctx_r10=core["\u0275\u0275nextContext"](2);core["\u0275\u0275property"]("fieldUpdate",updateValue_r11||core["\u0275\u0275pureFunction0"](3,_c0))("url",ctx_r10.url)("ngClass",core["\u0275\u0275pureFunction3"](4,_c1,0===updateValue_r11.changeType,2===updateValue_r11.changeType,1===updateValue_r11.changeType))}}function ItemMetadataComponent_table_29_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"table",18),core["\u0275\u0275text"](1,"\n    "),core["\u0275\u0275elementStart"](2,"thead"),core["\u0275\u0275text"](3,"\n    "),core["\u0275\u0275elementStart"](4,"tr"),core["\u0275\u0275text"](5,"\n      "),core["\u0275\u0275elementStart"](6,"th"),core["\u0275\u0275elementStart"](7,"span",19),core["\u0275\u0275text"](8),core["\u0275\u0275pipe"](9,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](10,"\n      "),core["\u0275\u0275elementStart"](11,"th"),core["\u0275\u0275elementStart"](12,"span",20),core["\u0275\u0275text"](13),core["\u0275\u0275pipe"](14,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](15,"\n      "),core["\u0275\u0275elementStart"](16,"th",21),core["\u0275\u0275elementStart"](17,"span",22),core["\u0275\u0275text"](18),core["\u0275\u0275pipe"](19,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](20,"\n      "),core["\u0275\u0275elementStart"](21,"th",21),core["\u0275\u0275text"](22),core["\u0275\u0275pipe"](23,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](24,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](25,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](26,"\n    "),core["\u0275\u0275elementStart"](27,"tbody"),core["\u0275\u0275text"](28,"\n    "),core["\u0275\u0275template"](29,ItemMetadataComponent_table_29_tr_29_Template,2,8,"tr",23),core["\u0275\u0275pipe"](30,"dsObjectValues"),core["\u0275\u0275pipe"](31,"async"),core["\u0275\u0275text"](32,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](33,"\n  "),core["\u0275\u0275elementEnd"]()),2&rf){const ctx_r2=core["\u0275\u0275nextContext"]();core["\u0275\u0275advance"](8),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](9,6,"item.edit.metadata.headers.field")),core["\u0275\u0275advance"](5),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](14,8,"item.edit.metadata.headers.value")),core["\u0275\u0275advance"](5),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](19,10,"item.edit.metadata.headers.language")),core["\u0275\u0275advance"](4),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](23,12,"item.edit.metadata.headers.edit")),core["\u0275\u0275advance"](7),core["\u0275\u0275property"]("ngForOf",core["\u0275\u0275pipeBind1"](30,14,core["\u0275\u0275pipeBind1"](31,16,ctx_r2.updates$)))("ngForTrackBy",ctx_r2.trackUpdate)}}function ItemMetadataComponent_div_33_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"div"),core["\u0275\u0275text"](1,"\n    "),core["\u0275\u0275element"](2,"ds-alert",25),core["\u0275\u0275text"](3,"\n  "),core["\u0275\u0275elementEnd"]()),2&rf){const ctx_r3=core["\u0275\u0275nextContext"]();core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("content","item.edit.metadata.empty")("type",ctx_r3.AlertTypeEnum.Info)}}function ItemMetadataComponent_button_41_Template(rf,ctx){if(1&rf){const _r13=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementStart"](0,"button",14),core["\u0275\u0275listener"]("click",(function ItemMetadataComponent_button_41_Template_button_click_0_listener(){core["\u0275\u0275restoreView"](_r13);return core["\u0275\u0275nextContext"]().reinstate()})),core["\u0275\u0275element"](1,"i",15),core["\u0275\u0275text"](2),core["\u0275\u0275pipe"](3,"translate"),core["\u0275\u0275elementEnd"]()}2&rf&&(core["\u0275\u0275advance"](2),core["\u0275\u0275textInterpolate1"](" ",core["\u0275\u0275pipeBind1"](3,1,"item.edit.metadata.reinstate-button"),"\n      "))}function ItemMetadataComponent_button_50_Template(rf,ctx){if(1&rf){const _r15=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementStart"](0,"button",16),core["\u0275\u0275listener"]("click",(function ItemMetadataComponent_button_50_Template_button_click_0_listener(){core["\u0275\u0275restoreView"](_r15);return core["\u0275\u0275nextContext"]().discard()})),core["\u0275\u0275pipe"](1,"async"),core["\u0275\u0275element"](2,"i",17),core["\u0275\u0275text"](3),core["\u0275\u0275pipe"](4,"translate"),core["\u0275\u0275elementEnd"]()}if(2&rf){const ctx_r5=core["\u0275\u0275nextContext"]();core["\u0275\u0275property"]("disabled",!core["\u0275\u0275pipeBind1"](1,2,ctx_r5.hasChanges())),core["\u0275\u0275advance"](3),core["\u0275\u0275textInterpolate1"](" ",core["\u0275\u0275pipeBind1"](4,4,"item.edit.metadata.discard-button"),"\n      ")}}class item_metadata_component_ItemMetadataComponent extends abstract_item_update_component.a{constructor(itemService,objectUpdatesService,router,notificationsService,translateService,route){super(itemService,objectUpdatesService,router,notificationsService,translateService,route),this.itemService=itemService,this.objectUpdatesService=objectUpdatesService,this.router=router,this.notificationsService=notificationsService,this.translateService=translateService,this.route=route,this.AlertTypeEnum=aletr_type.a}ngOnInit(){super.ngOnInit(),Object(empty_util.a)(this.updateService)&&(this.updateService=this.itemService)}initializeUpdates(){this.updates$=this.objectUpdatesService.getFieldUpdates(this.url,this.item.metadataAsList)}initializeNotificationsPrefix(){this.notificationsPrefix="item.edit.metadata.notifications."}add(metadata=new metadata_models.d){this.objectUpdatesService.saveAddFieldUpdate(this.url,metadata)}initializeOriginalFields(){this.objectUpdatesService.initialize(this.url,this.item.metadataAsList,this.item.lastModified,metadata_patch_operation_service_MetadataPatchOperationService)}submit(){this.isValid().pipe(Object(first.a)()).subscribe((isValid=>{isValid?this.objectUpdatesService.createPatch(this.url).pipe(Object(first.a)(),Object(switchMap.a)((patch=>this.updateService.patch(this.item,patch).pipe(Object(operators.g)())))).subscribe((rd=>{rd.hasFailed?this.notificationsService.error(this.getNotificationTitle("error"),rd.errorMessage):(this.item=rd.payload,this.checkAndFixMetadataUUIDs(),this.initializeOriginalFields(),this.updates$=this.objectUpdatesService.getFieldUpdates(this.url,this.item.metadataAsList),this.notificationsService.success(this.getNotificationTitle("saved"),this.getNotificationContent("saved")))})):this.notificationsService.error(this.getNotificationTitle("invalid"),this.getNotificationContent("invalid"))}))}checkAndFixMetadataUUIDs(){const metadata=Object(lodash.cloneDeep)(this.item.metadata);Object.keys(this.item.metadata).forEach((key=>{metadata[key]=this.item.metadata[key].map((value=>Object(empty_util.b)(value.uuid)?value:Object.assign(new metadata_models.c,value)))})),this.item.metadata=metadata}}item_metadata_component_ItemMetadataComponent.\u0275fac=function ItemMetadataComponent_Factory(t){return new(t||item_metadata_component_ItemMetadataComponent)(core["\u0275\u0275directiveInject"](item_data_service.a),core["\u0275\u0275directiveInject"](object_updates_service.a),core["\u0275\u0275directiveInject"](fesm2015_router.g),core["\u0275\u0275directiveInject"](notifications_service.a),core["\u0275\u0275directiveInject"](ngx_translate_core.e),core["\u0275\u0275directiveInject"](fesm2015_router.a))},item_metadata_component_ItemMetadataComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:item_metadata_component_ItemMetadataComponent,selectors:[["ds-item-metadata"]],inputs:{updateService:"updateService"},features:[core["\u0275\u0275InheritDefinitionFeature"]],decls:56,vars:39,consts:[[1,"item-metadata"],[1,"button-row","top","d-flex","mb-2"],[1,"mr-auto","btn","btn-success",3,"click"],[1,"fas","fa-plus"],[1,"d-none","d-sm-inline"],["class","btn btn-warning",3,"click",4,"ngIf"],[1,"btn","btn-primary",3,"disabled","click"],[1,"fas","fa-save"],["class","btn btn-danger",3,"disabled","click",4,"ngIf"],["class","table table-responsive table-striped table-bordered",4,"ngIf"],[4,"ngIf"],[1,"button-row","bottom"],[1,"mt-2","float-right"],[1,"btn","btn-primary","mr-0",3,"disabled","click"],[1,"btn","btn-warning",3,"click"],[1,"fas","fa-undo-alt"],[1,"btn","btn-danger",3,"disabled","click"],[1,"fas","fa-times"],[1,"table","table-responsive","table-striped","table-bordered"],["id","fieldName"],["id","fieldValue"],[1,"text-center"],["id","fieldLang"],["ds-edit-in-place-field","",3,"fieldUpdate","url","ngClass",4,"ngFor","ngForOf","ngForTrackBy"],["ds-edit-in-place-field","",3,"fieldUpdate","url","ngClass"],[3,"content","type"]],template:function ItemMetadataComponent_Template(rf,ctx){1&rf&&(core["\u0275\u0275elementStart"](0,"div",0),core["\u0275\u0275text"](1,"\n  "),core["\u0275\u0275elementStart"](2,"div",1),core["\u0275\u0275text"](3,"\n    "),core["\u0275\u0275elementStart"](4,"button",2),core["\u0275\u0275listener"]("click",(function ItemMetadataComponent_Template_button_click_4_listener(){return ctx.add()})),core["\u0275\u0275element"](5,"i",3),core["\u0275\u0275text"](6,"\n      "),core["\u0275\u0275elementStart"](7,"span",4),core["\u0275\u0275text"](8),core["\u0275\u0275pipe"](9,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](10,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](11,"\n    "),core["\u0275\u0275template"](12,ItemMetadataComponent_button_12_Template,7,3,"button",5),core["\u0275\u0275pipe"](13,"async"),core["\u0275\u0275text"](14,"\n    "),core["\u0275\u0275elementStart"](15,"button",6),core["\u0275\u0275listener"]("click",(function ItemMetadataComponent_Template_button_click_15_listener(){return ctx.submit()})),core["\u0275\u0275pipe"](16,"async"),core["\u0275\u0275pipe"](17,"async"),core["\u0275\u0275element"](18,"i",7),core["\u0275\u0275text"](19,"\n      "),core["\u0275\u0275elementStart"](20,"span",4),core["\u0275\u0275text"](21),core["\u0275\u0275pipe"](22,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](23,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](24,"\n    "),core["\u0275\u0275template"](25,ItemMetadataComponent_button_25_Template,8,6,"button",8),core["\u0275\u0275pipe"](26,"async"),core["\u0275\u0275text"](27,"\n  "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](28,"\n  "),core["\u0275\u0275template"](29,ItemMetadataComponent_table_29_Template,34,18,"table",9),core["\u0275\u0275pipe"](30,"dsObjectValues"),core["\u0275\u0275pipe"](31,"async"),core["\u0275\u0275text"](32,"\n  "),core["\u0275\u0275template"](33,ItemMetadataComponent_div_33_Template,4,2,"div",10),core["\u0275\u0275pipe"](34,"dsObjectValues"),core["\u0275\u0275pipe"](35,"async"),core["\u0275\u0275text"](36,"\n  "),core["\u0275\u0275elementStart"](37,"div",11),core["\u0275\u0275text"](38,"\n    "),core["\u0275\u0275elementStart"](39,"div",12),core["\u0275\u0275text"](40,"\n      "),core["\u0275\u0275template"](41,ItemMetadataComponent_button_41_Template,4,3,"button",5),core["\u0275\u0275pipe"](42,"async"),core["\u0275\u0275text"](43,"\n      "),core["\u0275\u0275elementStart"](44,"button",13),core["\u0275\u0275listener"]("click",(function ItemMetadataComponent_Template_button_click_44_listener(){return ctx.submit()})),core["\u0275\u0275pipe"](45,"async"),core["\u0275\u0275element"](46,"i",7),core["\u0275\u0275text"](47),core["\u0275\u0275pipe"](48,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](49,"\n      "),core["\u0275\u0275template"](50,ItemMetadataComponent_button_50_Template,5,6,"button",8),core["\u0275\u0275pipe"](51,"async"),core["\u0275\u0275text"](52,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](53,"\n  "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](54,"\n"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](55,"\n")),2&rf&&(core["\u0275\u0275advance"](8),core["\u0275\u0275textInterpolate1"]("\xa0",core["\u0275\u0275pipeBind1"](9,11,"item.edit.metadata.add-button"),""),core["\u0275\u0275advance"](4),core["\u0275\u0275property"]("ngIf",core["\u0275\u0275pipeBind1"](13,13,ctx.isReinstatable())),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("disabled",!core["\u0275\u0275pipeBind1"](16,15,ctx.hasChanges())||!core["\u0275\u0275pipeBind1"](17,17,ctx.isValid())),core["\u0275\u0275advance"](6),core["\u0275\u0275textInterpolate1"]("\xa0",core["\u0275\u0275pipeBind1"](22,19,"item.edit.metadata.save-button"),""),core["\u0275\u0275advance"](4),core["\u0275\u0275property"]("ngIf",!core["\u0275\u0275pipeBind1"](26,21,ctx.isReinstatable())),core["\u0275\u0275advance"](4),core["\u0275\u0275property"]("ngIf",core["\u0275\u0275pipeBind1"](30,23,core["\u0275\u0275pipeBind1"](31,25,ctx.updates$)).length>0),core["\u0275\u0275advance"](4),core["\u0275\u0275property"]("ngIf",0==core["\u0275\u0275pipeBind1"](34,27,core["\u0275\u0275pipeBind1"](35,29,ctx.updates$)).length),core["\u0275\u0275advance"](8),core["\u0275\u0275property"]("ngIf",core["\u0275\u0275pipeBind1"](42,31,ctx.isReinstatable())),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("disabled",!core["\u0275\u0275pipeBind1"](45,33,ctx.hasChanges())),core["\u0275\u0275advance"](3),core["\u0275\u0275textInterpolate1"](" ",core["\u0275\u0275pipeBind1"](48,35,"item.edit.metadata.save-button"),"\n      "),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("ngIf",!core["\u0275\u0275pipeBind1"](51,37,ctx.isReinstatable())))},directives:[common.NgIf,common.NgForOf,edit_in_place_field_component.a,common.NgClass,alert_component.a],pipes:[ngx_translate_core.d,common.AsyncPipe,object_values_pipe.a],styles:[".button-row[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-right:calc(.5 * var(--bs-spacer))}.button-row[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:last-child{margin-right:0}@media screen and (min-width:576px){.button-row[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{min-width:var(--ds-edit-item-button-min-width)}}.button-row.top[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-top:calc(var(--bs-spacer) / 2);margin-bottom:calc(var(--bs-spacer) / 2)}"]})},"539a":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return EpersonGroupListComponent}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),rxjs__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("2Vo4"),rxjs_operators__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("lJxs"),lodash__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("LvDl"),_pagination_pagination_component_options_model__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("7DXY"),_empty_util__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("J3qs"),_core_data_request_models__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("B/au"),_core_breadcrumbs_dso_name_service__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("C765"),_core_cache_builders_build_decorators__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("zQ+x"),_core_eperson_models_eperson_resource_type__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("qFpP"),_core_eperson_models_group_resource_type__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("Rulr"),_animations_fade__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("mEo1"),_core_shared_operators__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("1QIV"),_core_pagination_pagination_service__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("MFUF");function EpersonGroupListComponent_ds_eperson_search_box_2_Template(rf,ctx){if(1&rf){const _r4=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275getCurrentView"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"ds-eperson-search-box",3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("search",(function EpersonGroupListComponent_ds_eperson_search_box_2_Template_ds_eperson_search_box_search_0_listener($event){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r4);return _angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]().onSearch($event)})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()}}function EpersonGroupListComponent_ds_group_search_box_4_Template(rf,ctx){if(1&rf){const _r6=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275getCurrentView"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"ds-group-search-box",3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("search",(function EpersonGroupListComponent_ds_group_search_box_4_Template_ds_group_search_box_search_0_listener($event){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r6);return _angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]().onSearch($event)})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()}}function EpersonGroupListComponent_ds_pagination_6_tr_27_Template(rf,ctx){if(1&rf){const _r10=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275getCurrentView"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"tr"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](1,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](2,"\n          "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](3,"td"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](5,"\n          "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](6,"td"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](7),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](8,"\n          "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](9,"td",7),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](10,"\n            "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](11,"button",9),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("click",(function EpersonGroupListComponent_ds_pagination_6_tr_27_Template_button_click_11_listener(){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r10);const entry_r8=ctx.$implicit;return _angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"](2).emitSelect(entry_r8)})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](12),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](13,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](14,"\n          "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](15,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()}if(2&rf){const entry_r8=ctx.$implicit,ctx_r7=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"](2);_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275classProp"]("table-primary",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](1,5,ctx_r7.isSelected(entry_r8))),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](entry_r8.id),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](ctx_r7.dsoNameService.getName(entry_r8)),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](5),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate1"]("\n              ",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](13,7,"resource-policies.form.eperson-group-list.select.btn"),"\n            ")}}function EpersonGroupListComponent_ds_pagination_6_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"ds-pagination",4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](1,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](2,"\n\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](3,"div",5),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](4,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](5,"table",6),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](6,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](7,"thead"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](8,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](9,"tr",7),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](10,"\n          "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](11,"th"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](12),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](13,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](14,"\n          "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](15,"th"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](16),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](17,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](18,"\n          "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](19,"th"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](20),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](21,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](22,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](23,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](24,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](25,"tbody"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](26,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](27,EpersonGroupListComponent_ds_pagination_6_tr_27_Template,16,9,"tr",8),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](28,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](29,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](30,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](31,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](32,"\n\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()),2&rf){const ctx_r2=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]();let tmp_1_0=null,tmp_7_0=null;_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("paginationOptions",ctx_r2.paginationOptions)("collectionSize",null==(tmp_1_0=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](1,8,ctx_r2.getList()))||null==tmp_1_0.payload?null:tmp_1_0.payload.totalElements)("retainScrollPosition",!0)("hideGear",!0),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](12),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](13,10,"resource-policies.form.eperson-group-list.table.headers.id")),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](17,12,"resource-policies.form.eperson-group-list.table.headers.name")),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](21,14,"resource-policies.form.eperson-group-list.table.headers.action")),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](7),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngForOf",null==(tmp_7_0=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](28,16,ctx_r2.getList()))||null==tmp_7_0.payload?null:tmp_7_0.payload.page)}}class EpersonGroupListComponent{constructor(dsoNameService,parentInjector,paginationService){this.dsoNameService=dsoNameService,this.parentInjector=parentInjector,this.paginationService=paginationService,this.isListOfEPerson=!0,this.select=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.EventEmitter,this.currentSearchQuery="",this.currentSearchScope="metadata",this.paginationOptions=new _pagination_pagination_component_options_model__WEBPACK_IMPORTED_MODULE_4__.a,this.list$=new rxjs__WEBPACK_IMPORTED_MODULE_1__.a({}),this.entrySelectedId=new rxjs__WEBPACK_IMPORTED_MODULE_1__.a(""),this.subs=[]}ngOnInit(){const resourceType=this.isListOfEPerson?_core_eperson_models_eperson_resource_type__WEBPACK_IMPORTED_MODULE_9__.a:_core_eperson_models_group_resource_type__WEBPACK_IMPORTED_MODULE_10__.a,provider=Object(_core_cache_builders_build_decorators__WEBPACK_IMPORTED_MODULE_8__.f)(resourceType);this.dataService=_angular_core__WEBPACK_IMPORTED_MODULE_0__.Injector.create({providers:[],parent:this.parentInjector}).get(provider),this.paginationOptions.id=Object(lodash__WEBPACK_IMPORTED_MODULE_3__.uniqueId)("egl"),this.paginationOptions.pageSize=5,this.initSelected&&this.entrySelectedId.next(this.initSelected),this.updateList(this.currentSearchScope,this.currentSearchQuery)}emitSelect(entry){this.select.emit(entry),this.entrySelectedId.next(entry.id)}getList(){return this.list$.asObservable()}isSelected(entry){return this.entrySelectedId.asObservable().pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.a)((selectedId=>Object(_empty_util__WEBPACK_IMPORTED_MODULE_5__.e)(selectedId)&&selectedId===entry.id)))}onSearch(searchEvent){this.currentSearchQuery=searchEvent.query,this.currentSearchScope=searchEvent.scope,this.paginationService.resetPage(this.paginationOptions.id),this.updateList(this.currentSearchScope,this.currentSearchQuery)}updateList(scope,query){Object(_empty_util__WEBPACK_IMPORTED_MODULE_5__.b)(this.pageConfigSub)&&this.pageConfigSub.unsubscribe(),this.pageConfigSub=this.paginationService.getCurrentPagination(this.paginationOptions.id,this.paginationOptions).subscribe((paginationOptions=>{const options=Object.assign({},new _core_data_request_models__WEBPACK_IMPORTED_MODULE_6__.f,{elementsPerPage:paginationOptions.pageSize,currentPage:paginationOptions.currentPage}),search$=this.isListOfEPerson?this.dataService.searchByScope(scope,query,options):this.dataService.searchGroups(query,options);this.subs.push(search$.pipe(Object(_core_shared_operators__WEBPACK_IMPORTED_MODULE_12__.g)()).subscribe((list=>{Object(_empty_util__WEBPACK_IMPORTED_MODULE_5__.b)(this.list$)&&this.list$.next(list)})))}))}ngOnDestroy(){this.list$=null,this.subs.filter((subscription=>Object(_empty_util__WEBPACK_IMPORTED_MODULE_5__.b)(subscription))).forEach((subscription=>subscription.unsubscribe())),this.paginationService.clearPagination(this.paginationOptions.id)}}EpersonGroupListComponent.\u0275fac=function EpersonGroupListComponent_Factory(t){return new(t||EpersonGroupListComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_core_breadcrumbs_dso_name_service__WEBPACK_IMPORTED_MODULE_7__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__.Injector),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_core_pagination_pagination_service__WEBPACK_IMPORTED_MODULE_13__.a))},EpersonGroupListComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineComponent"]({type:EpersonGroupListComponent,selectors:[["ds-eperson-group-list"]],inputs:{isListOfEPerson:"isListOfEPerson",initSelected:"initSelected"},outputs:{select:"select"},decls:10,vars:6,consts:[[1,"mt-3"],[3,"search",4,"ngIf"],[3,"paginationOptions","collectionSize","retainScrollPosition","hideGear",4,"ngIf"],[3,"search"],[3,"paginationOptions","collectionSize","retainScrollPosition","hideGear"],[1,"table-responsive"],["id","groups",1,"table","table-sm","table-striped","table-hover","table-bordered"],[1,"text-center"],[3,"table-primary",4,"ngFor","ngForOf"],[1,"btn","btn-sm","btn-outline-primary",3,"click"]],template:function EpersonGroupListComponent_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div",0),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](2,EpersonGroupListComponent_ds_eperson_search_box_2_Template,1,0,"ds-eperson-search-box",1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](4,EpersonGroupListComponent_ds_group_search_box_4_Template,1,0,"ds-group-search-box",1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](5,"\n\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](6,EpersonGroupListComponent_ds_pagination_6_Template,33,18,"ds-pagination",2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](7,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](8,"\n"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](9,"\n")),2&rf){let tmp_2_0=null;_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("@fadeInOut",void 0),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",ctx.isListOfEPerson),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",!ctx.isListOfEPerson),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",(null==(tmp_2_0=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](7,4,ctx.getList()))||null==tmp_2_0.payload?null:tmp_2_0.payload.totalElements)>0)}},styles:[""],data:{animation:[_animations_fade__WEBPACK_IMPORTED_MODULE_11__.c]}})},"5Yl3":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return WorkflowItemActionPageComponent}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),rxjs_operators__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("lJxs"),rxjs_operators__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("eIep"),rxjs_operators__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("IzEk"),_core_submission_workflowitem_data_service__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("RMbB"),_core_services_route_service__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("ppE2"),_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("lI3o"),_core_shared_operators__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("1QIV"),_shared_empty_util__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("J3qs"),_angular_router__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("tyNb"),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("sYmb");class WorkflowItemActionPageComponent{constructor(route,workflowItemService,router,routeService,notificationsService,translationService){this.route=route,this.workflowItemService=workflowItemService,this.router=router,this.routeService=routeService,this.notificationsService=notificationsService,this.translationService=translationService}ngOnInit(){this.type=this.getType(),this.wfi$=this.route.data.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_1__.a)((data=>data.wfi)),Object(_core_shared_operators__WEBPACK_IMPORTED_MODULE_7__.o)()),this.item$=this.wfi$.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.a)((wfi=>wfi.item.pipe(Object(_core_shared_operators__WEBPACK_IMPORTED_MODULE_7__.c)(),Object(_core_shared_operators__WEBPACK_IMPORTED_MODULE_7__.o)()))))}performAction(){this.wfi$.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.a)(1),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.a)((wfi=>this.sendRequest(wfi.id)))).subscribe((successful=>{if(successful){const title=this.translationService.get("workflow-item."+this.type+".notification.success.title"),content=this.translationService.get("workflow-item."+this.type+".notification.success.content");this.notificationsService.success(title,content)}else{const title=this.translationService.get("workflow-item."+this.type+".notification.error.title"),content=this.translationService.get("workflow-item."+this.type+".notification.error.content");this.notificationsService.error(title,content)}this.previousPage()}))}previousPage(){this.routeService.getPreviousUrl().pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.a)(1)).subscribe((url=>{Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_8__.d)(url)&&(url="/mydspace"),this.router.navigateByUrl(url)}))}}WorkflowItemActionPageComponent.\u0275fac=function WorkflowItemActionPageComponent_Factory(t){return new(t||WorkflowItemActionPageComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_9__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_core_submission_workflowitem_data_service__WEBPACK_IMPORTED_MODULE_4__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_9__.g),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_core_services_route_service__WEBPACK_IMPORTED_MODULE_5__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_6__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_ngx_translate_core__WEBPACK_IMPORTED_MODULE_10__.e))},WorkflowItemActionPageComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineComponent"]({type:WorkflowItemActionPageComponent,selectors:[["ds-workflowitem-action-page"]],decls:0,vars:0,template:function WorkflowItemActionPageComponent_Template(rf,ctx){},encapsulation:2})},"7Ido":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ItemPageTitleFieldComponent}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),_item_page_field_component__WEBPACK_IMPORTED_MODULE_2__=(__webpack_require__("PN+Z"),__webpack_require__("BNb2")),_angular_common__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("ofXK"),_field_components_metadata_values_metadata_values_component__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("r8yk"),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("sYmb");function ItemPageTitleFieldComponent_div_2_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](2,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()),2&rf){const type_r1=ctx.ngIf;_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate1"]("\n    ",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](2,1,type_r1.toLowerCase()+".page.titleprefix"),"\n  ")}}class ItemPageTitleFieldComponent extends _item_page_field_component__WEBPACK_IMPORTED_MODULE_2__.a{constructor(){super(...arguments),this.fields=["dc.title"]}}ItemPageTitleFieldComponent.\u0275fac=function ItemPageTitleFieldComponent_Factory(t){return \u0275ItemPageTitleFieldComponent_BaseFactory(t||ItemPageTitleFieldComponent)},ItemPageTitleFieldComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineComponent"]({type:ItemPageTitleFieldComponent,selectors:[["ds-item-page-title-field"]],inputs:{item:"item"},features:[_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275InheritDefinitionFeature"]],decls:7,vars:2,consts:[[1,"item-page-title-field"],[4,"ngIf"],[3,"mdValues"]],template:function ItemPageTitleFieldComponent_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"h2",0),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](2,ItemPageTitleFieldComponent_div_2_Template,3,3,"div",1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](4,"ds-metadata-values",2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](5,"\n"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](6,"\n")),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",ctx.item.firstMetadataValue("dspace.entity.type")),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("mdValues",null==ctx.item?null:ctx.item.allMetadata(ctx.fields)))},directives:[_angular_common__WEBPACK_IMPORTED_MODULE_3__.NgIf,_field_components_metadata_values_metadata_values_component__WEBPACK_IMPORTED_MODULE_4__.a],pipes:[_ngx_translate_core__WEBPACK_IMPORTED_MODULE_5__.d],encapsulation:2});const \u0275ItemPageTitleFieldComponent_BaseFactory=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275getInheritedFactory"](ItemPageTitleFieldComponent)},"8jtY":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ResolvedAction}));var _shared_ngrx_type__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("WL0R");const ResolverActionTypes={RESOLVED:Object(_shared_ngrx_type__WEBPACK_IMPORTED_MODULE_0__.a)("dspace/resolver/RESOLVED")};class ResolvedAction{constructor(url,dso){this.type=ResolverActionTypes.RESOLVED,this.payload={url:url,dso:dso}}}},"920W":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ItemPageAdministratorGuard}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),_core_data_feature_authorization_authorization_data_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("1mcE"),_item_page_resolver__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("z3/6"),_core_data_feature_authorization_feature_authorization_guard_dso_page_single_feature_guard__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("0TMo"),rxjs__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("LRne"),_core_data_feature_authorization_feature_id__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("FU+A"),_core_auth_auth_service__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("Vurf"),_angular_router__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("tyNb");class ItemPageAdministratorGuard extends _core_data_feature_authorization_feature_authorization_guard_dso_page_single_feature_guard__WEBPACK_IMPORTED_MODULE_3__.a{constructor(resolver,authorizationService,router,authService){super(resolver,authorizationService,router,authService),this.resolver=resolver,this.authorizationService=authorizationService,this.router=router,this.authService=authService}getFeatureID(next,state){return Object(rxjs__WEBPACK_IMPORTED_MODULE_4__.a)(_core_data_feature_authorization_feature_id__WEBPACK_IMPORTED_MODULE_5__.a.AdministratorOf)}}ItemPageAdministratorGuard.\u0275fac=function ItemPageAdministratorGuard_Factory(t){return new(t||ItemPageAdministratorGuard)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275inject"](_item_page_resolver__WEBPACK_IMPORTED_MODULE_2__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275inject"](_core_data_feature_authorization_authorization_data_service__WEBPACK_IMPORTED_MODULE_1__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275inject"](_angular_router__WEBPACK_IMPORTED_MODULE_7__.g),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275inject"](_core_auth_auth_service__WEBPACK_IMPORTED_MODULE_6__.a))},ItemPageAdministratorGuard.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineInjectable"]({token:ItemPageAdministratorGuard,factory:ItemPageAdministratorGuard.\u0275fac,providedIn:"root"})},"9i+i":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return StatisticsModule}));var core=__webpack_require__("fXoL"),common=__webpack_require__("ofXK"),core_module=__webpack_require__("pKmL"),shared_module=__webpack_require__("PCNd"),tslib=(__webpack_require__("mXNY"),__webpack_require__("zOht")),build_decorators=__webpack_require__("zQ+x"),equals_decorators=__webpack_require__("0HXA"),cerialize=__webpack_require__("6VZE"),resource_type=__webpack_require__("+1Sv");const STATISTICS_ENDPOINT=new resource_type.a("statistics");let StatisticsEndpoint=class{};StatisticsEndpoint.type=STATISTICS_ENDPOINT,Object(tslib.__decorate)([equals_decorators.a,cerialize.autoserialize,Object(tslib.__metadata)("design:type",resource_type.a)],StatisticsEndpoint.prototype,"type",void 0),Object(tslib.__decorate)([cerialize.deserialize,Object(tslib.__metadata)("design:type",Object)],StatisticsEndpoint.prototype,"_links",void 0),StatisticsEndpoint=Object(tslib.__decorate)([build_decorators.i],StatisticsEndpoint);class StatisticsModule{static forRoot(){return{ngModule:StatisticsModule}}}StatisticsModule.\u0275fac=function StatisticsModule_Factory(t){return new(t||StatisticsModule)},StatisticsModule.\u0275mod=core["\u0275\u0275defineNgModule"]({type:StatisticsModule}),StatisticsModule.\u0275inj=core["\u0275\u0275defineInjector"]({imports:[[common.CommonModule,core_module.a.forRoot(),shared_module.a]]})},A0IO:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return I18nBreadcrumbResolver}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),_i18n_breadcrumbs_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("tv3Y"),_shared_empty_util__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("J3qs"),_shared_utils_route_utils__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("q5u1");class I18nBreadcrumbResolver{constructor(breadcrumbService){this.breadcrumbService=breadcrumbService}resolve(route,state){const key=route.data.breadcrumbKey;if(Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_2__.a)(key))throw new Error('You provided an i18nBreadcrumbResolver for url "'+route.url+"\" but no breadcrumbKey in the route's data");const fullPath=Object(_shared_utils_route_utils__WEBPACK_IMPORTED_MODULE_3__.b)(route);return{provider:this.breadcrumbService,key:key,url:fullPath}}}I18nBreadcrumbResolver.\u0275fac=function I18nBreadcrumbResolver_Factory(t){return new(t||I18nBreadcrumbResolver)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275inject"](_i18n_breadcrumbs_service__WEBPACK_IMPORTED_MODULE_1__.a))},I18nBreadcrumbResolver.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineInjectable"]({token:I18nBreadcrumbResolver,factory:I18nBreadcrumbResolver.\u0275fac,providedIn:"root"})},ALMP:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ResourcePolicyEditComponent}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),rxjs__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("2Vo4"),rxjs_operators__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("lJxs"),rxjs_operators__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("IzEk"),_core_resource_policy_resource_policy_service__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("8a3C"),_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("lI3o"),_core_resource_policy_models_resource_policy_resource_type__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("TLL5"),_item_page_edit_item_page_edit_item_page_routing_paths__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("jrTz"),_core_shared_operators__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("1QIV"),_angular_router__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("tyNb"),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("sYmb"),_form_resource_policy_form_component__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("O/Ly");class ResourcePolicyEditComponent{constructor(notificationsService,resourcePolicyService,route,router,translate){this.notificationsService=notificationsService,this.resourcePolicyService=resourcePolicyService,this.route=route,this.router=router,this.translate=translate,this.processing$=new rxjs__WEBPACK_IMPORTED_MODULE_1__.a(!1)}ngOnInit(){this.route.data.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.a)((data=>data)),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.a)(1)).subscribe((data=>{this.resourcePolicy=data.resourcePolicy.payload}))}isProcessing(){return this.processing$.asObservable()}redirectToAuthorizationsPage(){this.router.navigate([`../../${_item_page_edit_item_page_edit_item_page_routing_paths__WEBPACK_IMPORTED_MODULE_7__.a}`],{relativeTo:this.route})}updateResourcePolicy(event){this.processing$.next(!0);const updatedObject=Object.assign({},event.object,{id:this.resourcePolicy.id,type:_core_resource_policy_models_resource_policy_resource_type__WEBPACK_IMPORTED_MODULE_6__.a.value,_links:this.resourcePolicy._links});this.resourcePolicyService.update(updatedObject).pipe(Object(_core_shared_operators__WEBPACK_IMPORTED_MODULE_8__.g)()).subscribe((responseRD=>{this.processing$.next(!1),responseRD&&responseRD.hasSucceeded?(this.notificationsService.success(null,this.translate.get("resource-policies.edit.page.success.content")),this.redirectToAuthorizationsPage()):this.notificationsService.error(null,this.translate.get("resource-policies.edit.page.failure.content"))}))}}ResourcePolicyEditComponent.\u0275fac=function ResourcePolicyEditComponent_Factory(t){return new(t||ResourcePolicyEditComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_5__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_core_resource_policy_resource_policy_service__WEBPACK_IMPORTED_MODULE_4__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_9__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_9__.g),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_ngx_translate_core__WEBPACK_IMPORTED_MODULE_10__.e))},ResourcePolicyEditComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineComponent"]({type:ResourcePolicyEditComponent,selectors:[["ds-resource-policy-edit"]],decls:9,vars:6,consts:[[1,"container"],[1,"mb-3"],[3,"resourcePolicy","isProcessing","reset","submit"]],template:function ResourcePolicyEditComponent_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div",0),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](2,"h4",1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](4,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](5,"\n\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](6,"ds-resource-policy-form",2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("reset",(function ResourcePolicyEditComponent_Template_ds_resource_policy_form_reset_6_listener(){return ctx.redirectToAuthorizationsPage()}))("submit",(function ResourcePolicyEditComponent_Template_ds_resource_policy_form_submit_6_listener($event){return ctx.updateResourcePolicy($event)})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](7,"\n"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](8,"\n")),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate2"]("",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](4,4,"resource-policies.edit.page.heading")," ",ctx.resourcePolicy.id,""),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("resourcePolicy",ctx.resourcePolicy)("isProcessing",ctx.isProcessing()))},directives:[_form_resource_policy_form_component__WEBPACK_IMPORTED_MODULE_11__.a],pipes:[_ngx_translate_core__WEBPACK_IMPORTED_MODULE_10__.d],encapsulation:2})},"Ahb/":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ThemedSubmissionSubmitComponent}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),_shared_theme_support_themed_component__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("JTKQ");function ThemedSubmissionSubmitComponent_ng_template_0_Template(rf,ctx){}class ThemedSubmissionSubmitComponent extends _shared_theme_support_themed_component__WEBPACK_IMPORTED_MODULE_1__.a{getComponentName(){return"SubmissionSubmitComponent"}importThemedComponent(themeName){return __webpack_require__("TkMu")(`./${themeName}/app/submission/submit/submission-submit.component`)}importUnthemedComponent(){return Promise.resolve().then(__webpack_require__.bind(null,"THnG"))}}ThemedSubmissionSubmitComponent.\u0275fac=function ThemedSubmissionSubmitComponent_Factory(t){return \u0275ThemedSubmissionSubmitComponent_BaseFactory(t||ThemedSubmissionSubmitComponent)},ThemedSubmissionSubmitComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineComponent"]({type:ThemedSubmissionSubmitComponent,selectors:[["ds-themed-submission-submit"]],features:[_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275InheritDefinitionFeature"]],decls:3,vars:0,consts:[["vcr",""]],template:function ThemedSubmissionSubmitComponent_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](0,ThemedSubmissionSubmitComponent_ng_template_0_Template,0,0,"ng-template",null,0,_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275templateRefExtractor"]),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](2,"\n"))},encapsulation:2});const \u0275ThemedSubmissionSubmitComponent_BaseFactory=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275getInheritedFactory"](ThemedSubmissionSubmitComponent)},BZkK:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"EditItemPageModule",(function(){return EditItemPageModule}));var core=__webpack_require__("fXoL"),common=__webpack_require__("ofXK"),ng_bootstrap=__webpack_require__("1kSV"),shared_module=__webpack_require__("PCNd"),fesm2015_router=__webpack_require__("tyNb"),fade=__webpack_require__("mEo1"),of=__webpack_require__("LRne"),combineLatest=__webpack_require__("itXk"),map=__webpack_require__("lJxs"),empty_util=__webpack_require__("J3qs"),item_page_routing_paths=__webpack_require__("Xioo"),ngx_translate_core=__webpack_require__("sYmb");const _c0=function(a0){return{active:a0}},_c1=function(a0){return[a0]};function EditItemPageComponent_li_14_a_2_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"a",17),core["\u0275\u0275text"](1),core["\u0275\u0275pipe"](2,"translate"),core["\u0275\u0275elementEnd"]()),2&rf){const page_r1=core["\u0275\u0275nextContext"]().$implicit,ctx_r2=core["\u0275\u0275nextContext"]();core["\u0275\u0275property"]("ngClass",core["\u0275\u0275pureFunction1"](5,_c0,page_r1.page===ctx_r2.currentPage))("routerLink",core["\u0275\u0275pureFunction1"](7,_c1,"./"+page_r1.page)),core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate1"]("\n                            ",core["\u0275\u0275pipeBind1"](2,3,"item.edit.tabs."+page_r1.page+".head"),"\n                        ")}}function EditItemPageComponent_li_14_button_8_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"button",18),core["\u0275\u0275text"](1),core["\u0275\u0275pipe"](2,"translate"),core["\u0275\u0275elementEnd"]()),2&rf){const page_r1=core["\u0275\u0275nextContext"]().$implicit;core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate1"]("\n                                ",core["\u0275\u0275pipeBind1"](2,1,"item.edit.tabs."+page_r1.page+".head"),"\n                            ")}}function EditItemPageComponent_li_14_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"li",13),core["\u0275\u0275text"](1,"\n                        "),core["\u0275\u0275template"](2,EditItemPageComponent_li_14_a_2_Template,3,9,"a",14),core["\u0275\u0275pipe"](3,"async"),core["\u0275\u0275text"](4,"\n                        "),core["\u0275\u0275elementStart"](5,"span",15),core["\u0275\u0275pipe"](6,"translate"),core["\u0275\u0275text"](7,"\n                            "),core["\u0275\u0275template"](8,EditItemPageComponent_li_14_button_8_Template,3,3,"button",16),core["\u0275\u0275pipe"](9,"async"),core["\u0275\u0275text"](10,"\n                        "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](11,"\n                    "),core["\u0275\u0275elementEnd"]()),2&rf){const page_r1=ctx.$implicit;core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",core["\u0275\u0275pipeBind1"](3,3,page_r1.enabled)),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("ngbTooltip",core["\u0275\u0275pipeBind1"](6,5,"item.edit.tabs.disabled.tooltip")),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("ngIf",!core["\u0275\u0275pipeBind1"](9,7,page_r1.enabled))}}class edit_item_page_component_EditItemPageComponent{constructor(route,router,injector){this.route=route,this.router=router,this.injector=injector,this.router.events.subscribe((()=>this.initPageParamsByRoute()))}ngOnInit(){this.initPageParamsByRoute(),this.pages=this.route.routeConfig.children.filter((child=>Object(empty_util.e)(child.path))).map((child=>{let enabled=Object(of.a)(!0);return Object(empty_util.e)(child.canActivate)&&(enabled=Object(combineLatest.a)(child.canActivate.map((guardConstructor=>this.injector.get(guardConstructor).canActivate(this.route.snapshot,this.router.routerState.snapshot)))).pipe(Object(map.a)((canActivateOutcomes=>canActivateOutcomes.every((e=>!0===e)))))),{page:child.path,enabled:enabled}})),this.itemRD$=this.route.data.pipe(Object(map.a)((data=>data.dso)))}getItemPage(item){return Object(item_page_routing_paths.h)(item)}initPageParamsByRoute(){this.currentPage=this.route.snapshot.firstChild.routeConfig.path}}edit_item_page_component_EditItemPageComponent.\u0275fac=function EditItemPageComponent_Factory(t){return new(t||edit_item_page_component_EditItemPageComponent)(core["\u0275\u0275directiveInject"](fesm2015_router.a),core["\u0275\u0275directiveInject"](fesm2015_router.g),core["\u0275\u0275directiveInject"](core.Injector))},edit_item_page_component_EditItemPageComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:edit_item_page_component_EditItemPageComponent,selectors:[["ds-edit-item-page"]],decls:41,vars:10,consts:[[1,"container"],[1,"row"],[1,"col-12"],[1,"border-bottom"],[1,"pt-2"],[1,"nav","nav-tabs","justify-content-start"],["class","nav-item",4,"ngFor","ngForOf"],[1,"tab-pane","active"],[1,"mb-4"],[1,"button-row","bottom"],[1,"text-right"],["role","button",1,"btn","btn-outline-secondary","mr-1",3,"routerLink"],[1,"fas","fa-arrow-left"],[1,"nav-item"],["class","nav-link",3,"ngClass","routerLink",4,"ngIf"],[3,"ngbTooltip"],["class","nav-link disabled",4,"ngIf"],[1,"nav-link",3,"ngClass","routerLink"],[1,"nav-link","disabled"]],template:function EditItemPageComponent_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"div",0),core["\u0275\u0275text"](1,"\n    "),core["\u0275\u0275elementStart"](2,"div",1),core["\u0275\u0275text"](3,"\n        "),core["\u0275\u0275elementStart"](4,"div",2),core["\u0275\u0275text"](5,"\n            "),core["\u0275\u0275elementStart"](6,"h2",3),core["\u0275\u0275text"](7),core["\u0275\u0275pipe"](8,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](9,"\n            "),core["\u0275\u0275elementStart"](10,"div",4),core["\u0275\u0275text"](11,"\n                "),core["\u0275\u0275elementStart"](12,"ul",5),core["\u0275\u0275text"](13,"\n                    "),core["\u0275\u0275template"](14,EditItemPageComponent_li_14_Template,12,9,"li",6),core["\u0275\u0275text"](15,"\n                "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](16,"\n                "),core["\u0275\u0275elementStart"](17,"div",7),core["\u0275\u0275text"](18,"\n                    "),core["\u0275\u0275elementStart"](19,"div",8),core["\u0275\u0275text"](20,"\n                        "),core["\u0275\u0275element"](21,"router-outlet"),core["\u0275\u0275text"](22,"\n                    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](23,"\n                    "),core["\u0275\u0275elementStart"](24,"div",9),core["\u0275\u0275text"](25,"\n                      "),core["\u0275\u0275elementStart"](26,"div",10),core["\u0275\u0275text"](27,"\n                        "),core["\u0275\u0275elementStart"](28,"a",11),core["\u0275\u0275pipe"](29,"async"),core["\u0275\u0275element"](30,"i",12),core["\u0275\u0275text"](31),core["\u0275\u0275pipe"](32,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](33,"\n                      "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](34,"\n                    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](35,"\n                "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](36,"\n            "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](37,"\n        "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](38,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](39,"\n"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](40,"\n")),2&rf){let tmp_2_0=null;core["\u0275\u0275advance"](7),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](8,4,"item.edit.head")),core["\u0275\u0275advance"](7),core["\u0275\u0275property"]("ngForOf",ctx.pages),core["\u0275\u0275advance"](14),core["\u0275\u0275property"]("routerLink",ctx.getItemPage(null==(tmp_2_0=core["\u0275\u0275pipeBind1"](29,6,ctx.itemRD$))?null:tmp_2_0.payload)),core["\u0275\u0275advance"](3),core["\u0275\u0275textInterpolate1"](" ",core["\u0275\u0275pipeBind1"](32,8,"item.edit.return"),"")}},directives:[common.NgForOf,fesm2015_router.l,fesm2015_router.j,common.NgIf,ng_bootstrap.O,common.NgClass],pipes:[ngx_translate_core.d,common.AsyncPipe],encapsulation:2,data:{animation:[fade.a,fade.c]},changeDetection:0});var notifications_service=__webpack_require__("lI3o"),item_data_service=__webpack_require__("iqTE"),operators=__webpack_require__("1QIV"),first=__webpack_require__("SxV6");var modify_item_overview_component=__webpack_require__("aCx6");const abstract_simple_item_action_component_c0=function(a0){return{id:a0}},abstract_simple_item_action_component_c1=function(a0){return[a0,"edit"]};class abstract_simple_item_action_component_AbstractSimpleItemActionComponent{constructor(route,router,notificationsService,itemDataService,translateService){this.route=route,this.router=router,this.notificationsService=notificationsService,this.itemDataService=itemDataService,this.translateService=translateService}ngOnInit(){this.itemRD$=this.route.data.pipe(Object(map.a)((data=>data.dso)),Object(operators.i)()),this.itemRD$.pipe(Object(first.a)()).subscribe((rd=>{this.item=rd.payload,this.itemPageRoute=Object(item_page_routing_paths.h)(this.item)})),this.confirmMessage="item.edit."+this.messageKey+".confirm",this.cancelMessage="item.edit."+this.messageKey+".cancel",this.headerMessage="item.edit."+this.messageKey+".header",this.descriptionMessage="item.edit."+this.messageKey+".description"}performAction(){}processRestResponse(response){var predicate;response.hasSucceeded?this.itemDataService.findById(this.item.id).pipe((predicate=this.predicate,source=>source.pipe(Object(operators.c)(),Object(first.a)(predicate)))).subscribe((()=>{this.notificationsService.success(this.translateService.get("item.edit."+this.messageKey+".success")),this.router.navigate([Object(item_page_routing_paths.e)(this.item)])})):(this.notificationsService.error(this.translateService.get("item.edit."+this.messageKey+".error")),this.router.navigate([Object(item_page_routing_paths.e)(this.item)]))}}abstract_simple_item_action_component_AbstractSimpleItemActionComponent.\u0275fac=function AbstractSimpleItemActionComponent_Factory(t){return new(t||abstract_simple_item_action_component_AbstractSimpleItemActionComponent)(core["\u0275\u0275directiveInject"](fesm2015_router.a),core["\u0275\u0275directiveInject"](fesm2015_router.g),core["\u0275\u0275directiveInject"](notifications_service.a),core["\u0275\u0275directiveInject"](item_data_service.a),core["\u0275\u0275directiveInject"](ngx_translate_core.e))},abstract_simple_item_action_component_AbstractSimpleItemActionComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:abstract_simple_item_action_component_AbstractSimpleItemActionComponent,selectors:[["ds-simple-action"]],decls:27,vars:19,consts:[[1,"container"],[1,"row"],[1,"col-12"],[3,"item"],[1,"btn","btn-outline-secondary","perform-action",3,"click"],[1,"btn","btn-outline-secondary","cancel",3,"routerLink"]],template:function AbstractSimpleItemActionComponent_Template(rf,ctx){1&rf&&(core["\u0275\u0275elementStart"](0,"div",0),core["\u0275\u0275text"](1,"\n    "),core["\u0275\u0275elementStart"](2,"div",1),core["\u0275\u0275text"](3,"\n        "),core["\u0275\u0275elementStart"](4,"div",2),core["\u0275\u0275text"](5,"\n            "),core["\u0275\u0275elementStart"](6,"h2"),core["\u0275\u0275text"](7),core["\u0275\u0275pipe"](8,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](9,"\n            "),core["\u0275\u0275elementStart"](10,"p"),core["\u0275\u0275text"](11),core["\u0275\u0275pipe"](12,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](13,"\n            "),core["\u0275\u0275element"](14,"ds-modify-item-overview",3),core["\u0275\u0275text"](15,"\n            "),core["\u0275\u0275elementStart"](16,"button",4),core["\u0275\u0275listener"]("click",(function AbstractSimpleItemActionComponent_Template_button_click_16_listener(){return ctx.performAction()})),core["\u0275\u0275text"](17),core["\u0275\u0275pipe"](18,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](19,"\n            "),core["\u0275\u0275elementStart"](20,"button",5),core["\u0275\u0275text"](21),core["\u0275\u0275pipe"](22,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](23,"\n\n        "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](24,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](25,"\n\n"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](26,"\n")),2&rf&&(core["\u0275\u0275advance"](7),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind2"](8,6,ctx.headerMessage,core["\u0275\u0275pureFunction1"](15,abstract_simple_item_action_component_c0,ctx.item.handle))),core["\u0275\u0275advance"](4),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](12,9,ctx.descriptionMessage)),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("item",ctx.item),core["\u0275\u0275advance"](3),core["\u0275\u0275textInterpolate1"]("",core["\u0275\u0275pipeBind1"](18,11,ctx.confirmMessage),"\n            "),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("routerLink",core["\u0275\u0275pureFunction1"](17,abstract_simple_item_action_component_c1,ctx.itemPageRoute)),core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate1"]("\n                ",core["\u0275\u0275pipeBind1"](22,13,ctx.cancelMessage),"\n            "))},directives:[modify_item_overview_component.a,fesm2015_router.h],pipes:[ngx_translate_core.d],encapsulation:2});const item_withdraw_component_c0=function(a0){return{id:a0}},item_withdraw_component_c1=function(a0){return[a0,"edit"]};class item_withdraw_component_ItemWithdrawComponent extends abstract_simple_item_action_component_AbstractSimpleItemActionComponent{constructor(route,router,notificationsService,itemDataService,translateService){super(route,router,notificationsService,itemDataService,translateService),this.route=route,this.router=router,this.notificationsService=notificationsService,this.itemDataService=itemDataService,this.translateService=translateService,this.messageKey="withdraw",this.predicate=rd=>rd.payload.isWithdrawn}performAction(){this.itemDataService.setWithDrawn(this.item,!0).pipe(Object(operators.g)()).subscribe((response=>{this.processRestResponse(response)}))}}item_withdraw_component_ItemWithdrawComponent.\u0275fac=function ItemWithdrawComponent_Factory(t){return new(t||item_withdraw_component_ItemWithdrawComponent)(core["\u0275\u0275directiveInject"](fesm2015_router.a),core["\u0275\u0275directiveInject"](fesm2015_router.g),core["\u0275\u0275directiveInject"](notifications_service.a),core["\u0275\u0275directiveInject"](item_data_service.a),core["\u0275\u0275directiveInject"](ngx_translate_core.e))},item_withdraw_component_ItemWithdrawComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:item_withdraw_component_ItemWithdrawComponent,selectors:[["ds-item-withdraw"]],features:[core["\u0275\u0275InheritDefinitionFeature"]],decls:27,vars:19,consts:[[1,"container"],[1,"row"],[1,"col-12"],[3,"item"],[1,"btn","btn-outline-secondary","perform-action",3,"click"],[1,"btn","btn-outline-secondary","cancel",3,"routerLink"]],template:function ItemWithdrawComponent_Template(rf,ctx){1&rf&&(core["\u0275\u0275elementStart"](0,"div",0),core["\u0275\u0275text"](1,"\n    "),core["\u0275\u0275elementStart"](2,"div",1),core["\u0275\u0275text"](3,"\n        "),core["\u0275\u0275elementStart"](4,"div",2),core["\u0275\u0275text"](5,"\n            "),core["\u0275\u0275elementStart"](6,"h2"),core["\u0275\u0275text"](7),core["\u0275\u0275pipe"](8,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](9,"\n            "),core["\u0275\u0275elementStart"](10,"p"),core["\u0275\u0275text"](11),core["\u0275\u0275pipe"](12,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](13,"\n            "),core["\u0275\u0275element"](14,"ds-modify-item-overview",3),core["\u0275\u0275text"](15,"\n            "),core["\u0275\u0275elementStart"](16,"button",4),core["\u0275\u0275listener"]("click",(function ItemWithdrawComponent_Template_button_click_16_listener(){return ctx.performAction()})),core["\u0275\u0275text"](17),core["\u0275\u0275pipe"](18,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](19,"\n            "),core["\u0275\u0275elementStart"](20,"button",5),core["\u0275\u0275text"](21),core["\u0275\u0275pipe"](22,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](23,"\n\n        "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](24,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](25,"\n\n"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](26,"\n")),2&rf&&(core["\u0275\u0275advance"](7),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind2"](8,6,ctx.headerMessage,core["\u0275\u0275pureFunction1"](15,item_withdraw_component_c0,ctx.item.handle))),core["\u0275\u0275advance"](4),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](12,9,ctx.descriptionMessage)),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("item",ctx.item),core["\u0275\u0275advance"](3),core["\u0275\u0275textInterpolate1"]("",core["\u0275\u0275pipeBind1"](18,11,ctx.confirmMessage),"\n            "),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("routerLink",core["\u0275\u0275pureFunction1"](17,item_withdraw_component_c1,ctx.itemPageRoute)),core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate1"]("\n                ",core["\u0275\u0275pipeBind1"](22,13,ctx.cancelMessage),"\n            "))},directives:[modify_item_overview_component.a,fesm2015_router.h],pipes:[ngx_translate_core.d],encapsulation:2});const item_reinstate_component_c0=function(a0){return{id:a0}},item_reinstate_component_c1=function(a0){return[a0,"edit"]};class item_reinstate_component_ItemReinstateComponent extends abstract_simple_item_action_component_AbstractSimpleItemActionComponent{constructor(route,router,notificationsService,itemDataService,translateService){super(route,router,notificationsService,itemDataService,translateService),this.route=route,this.router=router,this.notificationsService=notificationsService,this.itemDataService=itemDataService,this.translateService=translateService,this.messageKey="reinstate",this.predicate=rd=>!rd.payload.isWithdrawn}performAction(){this.itemDataService.setWithDrawn(this.item,!1).pipe(Object(operators.g)()).subscribe((response=>{this.processRestResponse(response)}))}}item_reinstate_component_ItemReinstateComponent.\u0275fac=function ItemReinstateComponent_Factory(t){return new(t||item_reinstate_component_ItemReinstateComponent)(core["\u0275\u0275directiveInject"](fesm2015_router.a),core["\u0275\u0275directiveInject"](fesm2015_router.g),core["\u0275\u0275directiveInject"](notifications_service.a),core["\u0275\u0275directiveInject"](item_data_service.a),core["\u0275\u0275directiveInject"](ngx_translate_core.e))},item_reinstate_component_ItemReinstateComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:item_reinstate_component_ItemReinstateComponent,selectors:[["ds-item-reinstate"]],features:[core["\u0275\u0275InheritDefinitionFeature"]],decls:27,vars:19,consts:[[1,"container"],[1,"row"],[1,"col-12"],[3,"item"],[1,"btn","btn-outline-secondary","perform-action",3,"click"],[1,"btn","btn-outline-secondary","cancel",3,"routerLink"]],template:function ItemReinstateComponent_Template(rf,ctx){1&rf&&(core["\u0275\u0275elementStart"](0,"div",0),core["\u0275\u0275text"](1,"\n    "),core["\u0275\u0275elementStart"](2,"div",1),core["\u0275\u0275text"](3,"\n        "),core["\u0275\u0275elementStart"](4,"div",2),core["\u0275\u0275text"](5,"\n            "),core["\u0275\u0275elementStart"](6,"h2"),core["\u0275\u0275text"](7),core["\u0275\u0275pipe"](8,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](9,"\n            "),core["\u0275\u0275elementStart"](10,"p"),core["\u0275\u0275text"](11),core["\u0275\u0275pipe"](12,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](13,"\n            "),core["\u0275\u0275element"](14,"ds-modify-item-overview",3),core["\u0275\u0275text"](15,"\n            "),core["\u0275\u0275elementStart"](16,"button",4),core["\u0275\u0275listener"]("click",(function ItemReinstateComponent_Template_button_click_16_listener(){return ctx.performAction()})),core["\u0275\u0275text"](17),core["\u0275\u0275pipe"](18,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](19,"\n            "),core["\u0275\u0275elementStart"](20,"button",5),core["\u0275\u0275text"](21),core["\u0275\u0275pipe"](22,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](23,"\n\n        "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](24,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](25,"\n\n"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](26,"\n")),2&rf&&(core["\u0275\u0275advance"](7),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind2"](8,6,ctx.headerMessage,core["\u0275\u0275pureFunction1"](15,item_reinstate_component_c0,ctx.item.handle))),core["\u0275\u0275advance"](4),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](12,9,ctx.descriptionMessage)),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("item",ctx.item),core["\u0275\u0275advance"](3),core["\u0275\u0275textInterpolate1"]("",core["\u0275\u0275pipeBind1"](18,11,ctx.confirmMessage),"\n            "),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("routerLink",core["\u0275\u0275pureFunction1"](17,item_reinstate_component_c1,ctx.itemPageRoute)),core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate1"]("\n                ",core["\u0275\u0275pipeBind1"](22,13,ctx.cancelMessage),"\n            "))},directives:[modify_item_overview_component.a,fesm2015_router.h],pipes:[ngx_translate_core.d],encapsulation:2});const item_private_component_c0=function(a0){return{id:a0}},item_private_component_c1=function(a0){return[a0,"edit"]};class item_private_component_ItemPrivateComponent extends abstract_simple_item_action_component_AbstractSimpleItemActionComponent{constructor(route,router,notificationsService,itemDataService,translateService){super(route,router,notificationsService,itemDataService,translateService),this.route=route,this.router=router,this.notificationsService=notificationsService,this.itemDataService=itemDataService,this.translateService=translateService,this.messageKey="private",this.predicate=rd=>!rd.payload.isDiscoverable}performAction(){this.itemDataService.setDiscoverable(this.item,!1).pipe(Object(operators.g)()).subscribe((rd=>{this.processRestResponse(rd)}))}}item_private_component_ItemPrivateComponent.\u0275fac=function ItemPrivateComponent_Factory(t){return new(t||item_private_component_ItemPrivateComponent)(core["\u0275\u0275directiveInject"](fesm2015_router.a),core["\u0275\u0275directiveInject"](fesm2015_router.g),core["\u0275\u0275directiveInject"](notifications_service.a),core["\u0275\u0275directiveInject"](item_data_service.a),core["\u0275\u0275directiveInject"](ngx_translate_core.e))},item_private_component_ItemPrivateComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:item_private_component_ItemPrivateComponent,selectors:[["ds-item-private"]],features:[core["\u0275\u0275InheritDefinitionFeature"]],decls:27,vars:19,consts:[[1,"container"],[1,"row"],[1,"col-12"],[3,"item"],[1,"btn","btn-outline-secondary","perform-action",3,"click"],[1,"btn","btn-outline-secondary","cancel",3,"routerLink"]],template:function ItemPrivateComponent_Template(rf,ctx){1&rf&&(core["\u0275\u0275elementStart"](0,"div",0),core["\u0275\u0275text"](1,"\n    "),core["\u0275\u0275elementStart"](2,"div",1),core["\u0275\u0275text"](3,"\n        "),core["\u0275\u0275elementStart"](4,"div",2),core["\u0275\u0275text"](5,"\n            "),core["\u0275\u0275elementStart"](6,"h2"),core["\u0275\u0275text"](7),core["\u0275\u0275pipe"](8,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](9,"\n            "),core["\u0275\u0275elementStart"](10,"p"),core["\u0275\u0275text"](11),core["\u0275\u0275pipe"](12,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](13,"\n            "),core["\u0275\u0275element"](14,"ds-modify-item-overview",3),core["\u0275\u0275text"](15,"\n            "),core["\u0275\u0275elementStart"](16,"button",4),core["\u0275\u0275listener"]("click",(function ItemPrivateComponent_Template_button_click_16_listener(){return ctx.performAction()})),core["\u0275\u0275text"](17),core["\u0275\u0275pipe"](18,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](19,"\n            "),core["\u0275\u0275elementStart"](20,"button",5),core["\u0275\u0275text"](21),core["\u0275\u0275pipe"](22,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](23,"\n\n        "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](24,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](25,"\n\n"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](26,"\n")),2&rf&&(core["\u0275\u0275advance"](7),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind2"](8,6,ctx.headerMessage,core["\u0275\u0275pureFunction1"](15,item_private_component_c0,ctx.item.handle))),core["\u0275\u0275advance"](4),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](12,9,ctx.descriptionMessage)),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("item",ctx.item),core["\u0275\u0275advance"](3),core["\u0275\u0275textInterpolate1"]("",core["\u0275\u0275pipeBind1"](18,11,ctx.confirmMessage),"\n            "),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("routerLink",core["\u0275\u0275pureFunction1"](17,item_private_component_c1,ctx.itemPageRoute)),core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate1"]("\n                ",core["\u0275\u0275pipeBind1"](22,13,ctx.cancelMessage),"\n            "))},directives:[modify_item_overview_component.a,fesm2015_router.h],pipes:[ngx_translate_core.d],encapsulation:2});const item_public_component_c0=function(a0){return{id:a0}},item_public_component_c1=function(a0){return[a0,"edit"]};class item_public_component_ItemPublicComponent extends abstract_simple_item_action_component_AbstractSimpleItemActionComponent{constructor(route,router,notificationsService,itemDataService,translateService){super(route,router,notificationsService,itemDataService,translateService),this.route=route,this.router=router,this.notificationsService=notificationsService,this.itemDataService=itemDataService,this.translateService=translateService,this.messageKey="public",this.predicate=rd=>rd.payload.isDiscoverable}performAction(){this.itemDataService.setDiscoverable(this.item,!0).pipe(Object(operators.g)()).subscribe((response=>{this.processRestResponse(response)}))}}item_public_component_ItemPublicComponent.\u0275fac=function ItemPublicComponent_Factory(t){return new(t||item_public_component_ItemPublicComponent)(core["\u0275\u0275directiveInject"](fesm2015_router.a),core["\u0275\u0275directiveInject"](fesm2015_router.g),core["\u0275\u0275directiveInject"](notifications_service.a),core["\u0275\u0275directiveInject"](item_data_service.a),core["\u0275\u0275directiveInject"](ngx_translate_core.e))},item_public_component_ItemPublicComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:item_public_component_ItemPublicComponent,selectors:[["ds-item-public"]],features:[core["\u0275\u0275InheritDefinitionFeature"]],decls:27,vars:19,consts:[[1,"container"],[1,"row"],[1,"col-12"],[3,"item"],[1,"btn","btn-outline-secondary","perform-action",3,"click"],[1,"btn","btn-outline-secondary","cancel",3,"routerLink"]],template:function ItemPublicComponent_Template(rf,ctx){1&rf&&(core["\u0275\u0275elementStart"](0,"div",0),core["\u0275\u0275text"](1,"\n    "),core["\u0275\u0275elementStart"](2,"div",1),core["\u0275\u0275text"](3,"\n        "),core["\u0275\u0275elementStart"](4,"div",2),core["\u0275\u0275text"](5,"\n            "),core["\u0275\u0275elementStart"](6,"h2"),core["\u0275\u0275text"](7),core["\u0275\u0275pipe"](8,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](9,"\n            "),core["\u0275\u0275elementStart"](10,"p"),core["\u0275\u0275text"](11),core["\u0275\u0275pipe"](12,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](13,"\n            "),core["\u0275\u0275element"](14,"ds-modify-item-overview",3),core["\u0275\u0275text"](15,"\n            "),core["\u0275\u0275elementStart"](16,"button",4),core["\u0275\u0275listener"]("click",(function ItemPublicComponent_Template_button_click_16_listener(){return ctx.performAction()})),core["\u0275\u0275text"](17),core["\u0275\u0275pipe"](18,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](19,"\n            "),core["\u0275\u0275elementStart"](20,"button",5),core["\u0275\u0275text"](21),core["\u0275\u0275pipe"](22,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](23,"\n\n        "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](24,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](25,"\n\n"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](26,"\n")),2&rf&&(core["\u0275\u0275advance"](7),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind2"](8,6,ctx.headerMessage,core["\u0275\u0275pureFunction1"](15,item_public_component_c0,ctx.item.handle))),core["\u0275\u0275advance"](4),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](12,9,ctx.descriptionMessage)),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("item",ctx.item),core["\u0275\u0275advance"](3),core["\u0275\u0275textInterpolate1"]("",core["\u0275\u0275pipeBind1"](18,11,ctx.confirmMessage),"\n            "),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("routerLink",core["\u0275\u0275pureFunction1"](17,item_public_component_c1,ctx.itemPageRoute)),core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate1"]("\n                ",core["\u0275\u0275pipeBind1"](22,13,ctx.cancelMessage),"\n            "))},directives:[modify_item_overview_component.a,fesm2015_router.h],pipes:[ngx_translate_core.d],encapsulation:2});var switchMap=__webpack_require__("eIep"),take=__webpack_require__("IzEk"),defaultIfEmpty=__webpack_require__("xbPD"),filter=__webpack_require__("pLZG"),view_mode_model=__webpack_require__("3jCq"),object_updates_service=__webpack_require__("loKC"),relationship_service=__webpack_require__("kN8A"),entity_type_service=__webpack_require__("bxbP"),link_service=__webpack_require__("sfEo"),follow_link_config_model=__webpack_require__("84Zn"),BehaviorSubject=__webpack_require__("7RJT"),var_directive=__webpack_require__("O/5o"),listable_object_component_loader_component=__webpack_require__("1aCu");function ItemDeleteComponent_ng_container_16_div_2_div_3_div_2_div_17_ng_container_2_ds_listable_object_component_loader_2_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"ds-listable-object-component-loader",23),core["\u0275\u0275text"](1,"\n                                        "),core["\u0275\u0275elementEnd"]()),2&rf){const relatedItem_r10=core["\u0275\u0275nextContext"]().ngVar,ctx_r11=core["\u0275\u0275nextContext"](6);core["\u0275\u0275property"]("object",relatedItem_r10)("viewMode",ctx_r11.viewMode)}}function ItemDeleteComponent_ng_container_16_div_2_div_3_div_2_div_17_ng_container_2_ng_template_15_ds_listable_object_component_loader_15_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"ds-listable-object-component-loader",23),core["\u0275\u0275text"](1,"\n                                                    "),core["\u0275\u0275elementEnd"]()),2&rf){const relatedItem_r10=core["\u0275\u0275nextContext"](2).ngVar,ctx_r15=core["\u0275\u0275nextContext"](6);core["\u0275\u0275property"]("object",relatedItem_r10)("viewMode",ctx_r15.viewMode)}}function ItemDeleteComponent_ng_container_16_div_2_div_3_div_2_div_17_ng_container_2_ng_template_15_div_17_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"div"),core["\u0275\u0275text"](1,"\n                                                        "),core["\u0275\u0275elementStart"](2,"div"),core["\u0275\u0275text"](3,"\n                                                            "),core["\u0275\u0275elementStart"](4,"div",29),core["\u0275\u0275text"](5),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](6,"\n                                                            "),core["\u0275\u0275elementStart"](7,"div"),core["\u0275\u0275text"](8),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](9,"\n                                                        "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](10,"\n                                                    "),core["\u0275\u0275elementEnd"]()),2&rf){const metadata_r18=ctx.$implicit;core["\u0275\u0275advance"](5),core["\u0275\u0275textInterpolate1"]("\n                                                                ",metadata_r18.metadataField,"\n                                                            "),core["\u0275\u0275advance"](3),core["\u0275\u0275textInterpolate1"]("\n                                                                ",metadata_r18.metadataValue.value,"\n                                                            ")}}function ItemDeleteComponent_ng_container_16_div_2_div_3_div_2_div_17_ng_container_2_ng_template_15_Template(rf,ctx){if(1&rf){const _r20=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275text"](0,"\n                                            "),core["\u0275\u0275elementStart"](1,"div"),core["\u0275\u0275text"](2,"\n                                                "),core["\u0275\u0275elementStart"](3,"div",24),core["\u0275\u0275text"](4),core["\u0275\u0275pipe"](5,"translate"),core["\u0275\u0275elementStart"](6,"button",25),core["\u0275\u0275listener"]("click",(function ItemDeleteComponent_ng_container_16_div_2_div_3_div_2_div_17_ng_container_2_ng_template_15_Template_button_click_6_listener(){core["\u0275\u0275restoreView"](_r20);return core["\u0275\u0275nextContext"](7).closeVirtualMetadataModal()})),core["\u0275\u0275text"](7,"\n                                                        "),core["\u0275\u0275elementStart"](8,"span",26),core["\u0275\u0275text"](9,"\xd7"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](10,"\n                                                    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](11,"\n                                                "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](12,"\n                                                "),core["\u0275\u0275elementStart"](13,"div",27),core["\u0275\u0275text"](14,"\n                                                    "),core["\u0275\u0275template"](15,ItemDeleteComponent_ng_container_16_div_2_div_3_div_2_div_17_ng_container_2_ng_template_15_ds_listable_object_component_loader_15_Template,2,2,"ds-listable-object-component-loader",17),core["\u0275\u0275text"](16,"\n                                                    "),core["\u0275\u0275template"](17,ItemDeleteComponent_ng_container_16_div_2_div_3_div_2_div_17_ng_container_2_ng_template_15_div_17_Template,11,2,"div",28),core["\u0275\u0275pipe"](18,"async"),core["\u0275\u0275text"](19,"\n                                                "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](20,"\n                                            "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](21,"\n                                        ")}if(2&rf){const relatedItem_r10=core["\u0275\u0275nextContext"]().ngVar,relationship_r8=core["\u0275\u0275nextContext"]().$implicit,ctx_r13=core["\u0275\u0275nextContext"](5);core["\u0275\u0275advance"](4),core["\u0275\u0275textInterpolate1"]("\n                                                    ",core["\u0275\u0275pipeBind1"](5,3,"virtual-metadata.delete-item.modal-head"),"\n                                                    "),core["\u0275\u0275advance"](11),core["\u0275\u0275property"]("ngIf",relatedItem_r10),core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngForOf",core["\u0275\u0275pipeBind1"](18,5,ctx_r13.getVirtualMetadata(relationship_r8)))}}function ItemDeleteComponent_ng_container_16_div_2_div_3_div_2_div_17_ng_container_2_Template(rf,ctx){if(1&rf){const _r24=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementContainerStart"](0),core["\u0275\u0275text"](1,"\n\n                                        "),core["\u0275\u0275template"](2,ItemDeleteComponent_ng_container_16_div_2_div_3_div_2_div_17_ng_container_2_ds_listable_object_component_loader_2_Template,2,2,"ds-listable-object-component-loader",17),core["\u0275\u0275text"](3,"\n                                        "),core["\u0275\u0275elementStart"](4,"div",18),core["\u0275\u0275text"](5,"\n                                            "),core["\u0275\u0275elementStart"](6,"div",19),core["\u0275\u0275text"](7,"\n                                                "),core["\u0275\u0275elementStart"](8,"button",20),core["\u0275\u0275listener"]("click",(function ItemDeleteComponent_ng_container_16_div_2_div_3_div_2_div_17_ng_container_2_Template_button_click_8_listener(){core["\u0275\u0275restoreView"](_r24);const _r12=core["\u0275\u0275reference"](16);return core["\u0275\u0275nextContext"](6).openVirtualMetadataModal(_r12)})),core["\u0275\u0275text"](9,"\n                                                    "),core["\u0275\u0275element"](10,"i",21),core["\u0275\u0275text"](11,"\n                                                "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](12,"\n                                            "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](13,"\n                                        "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](14,"\n\n                                        "),core["\u0275\u0275template"](15,ItemDeleteComponent_ng_container_16_div_2_div_3_div_2_div_17_ng_container_2_ng_template_15_Template,22,7,"ng-template",null,22,core["\u0275\u0275templateRefExtractor"]),core["\u0275\u0275text"](17,"\n\n                                    "),core["\u0275\u0275elementContainerEnd"]()}if(2&rf){const relatedItem_r10=ctx.ngVar;core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",relatedItem_r10)}}function ItemDeleteComponent_ng_container_16_div_2_div_3_div_2_div_17_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"div",11),core["\u0275\u0275text"](1,"\n                                    "),core["\u0275\u0275template"](2,ItemDeleteComponent_ng_container_16_div_2_div_3_div_2_div_17_ng_container_2_Template,18,1,"ng-container",4),core["\u0275\u0275pipe"](3,"async"),core["\u0275\u0275text"](4,"\n                                "),core["\u0275\u0275elementEnd"]()),2&rf){const relationship_r8=ctx.$implicit,ctx_r7=core["\u0275\u0275nextContext"](5);core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngVar",core["\u0275\u0275pipeBind1"](3,1,ctx_r7.getRelatedItem(relationship_r8)))}}function ItemDeleteComponent_ng_container_16_div_2_div_3_div_2_Template(rf,ctx){if(1&rf){const _r27=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementStart"](0,"div",11),core["\u0275\u0275text"](1,"\n\n                            "),core["\u0275\u0275elementStart"](2,"div",12),core["\u0275\u0275listener"]("click",(function ItemDeleteComponent_ng_container_16_div_2_div_3_div_2_Template_div_click_2_listener(){core["\u0275\u0275restoreView"](_r27);const selected_r6=ctx.ngVar,type_r4=core["\u0275\u0275nextContext"]().$implicit;return core["\u0275\u0275nextContext"](3).setSelected(type_r4,!selected_r6)})),core["\u0275\u0275text"](3,"\n                                "),core["\u0275\u0275elementStart"](4,"label"),core["\u0275\u0275text"](5,"\n                                    "),core["\u0275\u0275element"](6,"input",13),core["\u0275\u0275text"](7,"\n                                "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](8,"\n                            "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](9,"\n\n                            "),core["\u0275\u0275elementStart"](10,"div",14),core["\u0275\u0275text"](11,"\n                                "),core["\u0275\u0275elementStart"](12,"h5",15),core["\u0275\u0275listener"]("click",(function ItemDeleteComponent_ng_container_16_div_2_div_3_div_2_Template_h5_click_12_listener(){core["\u0275\u0275restoreView"](_r27);const selected_r6=ctx.ngVar,type_r4=core["\u0275\u0275nextContext"]().$implicit;return core["\u0275\u0275nextContext"](3).setSelected(type_r4,!selected_r6)})),core["\u0275\u0275text"](13),core["\u0275\u0275pipe"](14,"translate"),core["\u0275\u0275pipe"](15,"async"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](16,"\n                                "),core["\u0275\u0275template"](17,ItemDeleteComponent_ng_container_16_div_2_div_3_div_2_div_17_Template,5,3,"div",16),core["\u0275\u0275pipe"](18,"async"),core["\u0275\u0275text"](19,"\n                            "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](20,"\n\n                        "),core["\u0275\u0275elementEnd"]()}if(2&rf){const selected_r6=ctx.ngVar,type_r4=core["\u0275\u0275nextContext"]().$implicit,ctx_r5=core["\u0275\u0275nextContext"](3);core["\u0275\u0275advance"](6),core["\u0275\u0275property"]("checked",selected_r6),core["\u0275\u0275advance"](7),core["\u0275\u0275textInterpolate1"]("\n                                    ",core["\u0275\u0275pipeBind1"](14,3,ctx_r5.getRelationshipMessageKey(core["\u0275\u0275pipeBind1"](15,5,ctx_r5.getLabel(type_r4)))),"\n                                "),core["\u0275\u0275advance"](4),core["\u0275\u0275property"]("ngForOf",core["\u0275\u0275pipeBind1"](18,7,ctx_r5.getRelationships(type_r4)))}}function ItemDeleteComponent_ng_container_16_div_2_div_3_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"div",8),core["\u0275\u0275text"](1,"\n\n                        "),core["\u0275\u0275template"](2,ItemDeleteComponent_ng_container_16_div_2_div_3_div_2_Template,21,9,"div",10),core["\u0275\u0275pipe"](3,"async"),core["\u0275\u0275text"](4,"\n\n                    "),core["\u0275\u0275elementEnd"]()),2&rf){const type_r4=ctx.$implicit,ctx_r3=core["\u0275\u0275nextContext"](3);core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngVar",core["\u0275\u0275pipeBind1"](3,1,ctx_r3.isSelected(type_r4)))}}function ItemDeleteComponent_ng_container_16_div_2_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"div",8),core["\u0275\u0275text"](1),core["\u0275\u0275pipe"](2,"translate"),core["\u0275\u0275template"](3,ItemDeleteComponent_ng_container_16_div_2_div_3_Template,5,3,"div",9),core["\u0275\u0275text"](4,"\n\n                "),core["\u0275\u0275elementEnd"]()),2&rf){const types_r1=core["\u0275\u0275nextContext"]().ngVar;core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate1"]("\n\n                    ",core["\u0275\u0275pipeBind1"](2,2,"virtual-metadata.delete-item.info"),"\n\n                    "),core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngForOf",types_r1)}}function ItemDeleteComponent_ng_container_16_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementContainerStart"](0),core["\u0275\u0275text"](1,"\n\n                "),core["\u0275\u0275template"](2,ItemDeleteComponent_ng_container_16_div_2_Template,5,4,"div",7),core["\u0275\u0275text"](3,"\n\n            "),core["\u0275\u0275elementContainerEnd"]()),2&rf){const types_r1=ctx.ngVar;core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",types_r1&&types_r1.length>0)}}const item_delete_component_c0=function(a0){return{id:a0}},item_delete_component_c1=function(a0){return[a0,"edit"]};class item_delete_component_ItemDeleteComponent extends abstract_simple_item_action_component_AbstractSimpleItemActionComponent{constructor(route,router,notificationsService,itemDataService,translateService,modalService,objectUpdatesService,relationshipService,entityTypeService,linkService){super(route,router,notificationsService,itemDataService,translateService),this.route=route,this.router=router,this.notificationsService=notificationsService,this.itemDataService=itemDataService,this.translateService=translateService,this.modalService=modalService,this.objectUpdatesService=objectUpdatesService,this.relationshipService=relationshipService,this.entityTypeService=entityTypeService,this.linkService=linkService,this.messageKey="delete",this.viewMode=view_mode_model.a.ListElement,this.types$=new BehaviorSubject.BehaviorSubject([]),this.relationships$=new Map,this.relatedItems$=new Map,this.virtualMetadata$=new Map,this.subs=[]}ngOnInit(){super.ngOnInit(),this.url=this.router.url;const label=this.item.firstMetadataValue("dspace.entity.type");Object(empty_util.e)(label)&&this.subs.push(this.entityTypeService.getEntityTypeByLabel(label).pipe(Object(operators.i)(),Object(operators.o)(),Object(switchMap.a)((entityType=>this.entityTypeService.getEntityTypeRelationships(entityType.id))),Object(operators.i)(),Object(operators.o)(),Object(map.a)((relationshipTypes=>relationshipTypes.page)),Object(switchMap.a)((types=>0===types.length?Object(of.a)(types):Object(combineLatest.a)(types.map((type=>this.getRelationships(type)))).pipe(Object(map.a)((relationships=>types.reduce(((includedTypes,type,index)=>includedTypes.some((includedType=>includedType.id===type.id))||0===relationships[index].length?includedTypes:[...includedTypes,type]),[]))))))).subscribe((types=>this.types$.next(types)))),this.subs.push(this.types$.pipe(Object(take.a)(1)).subscribe((types=>this.objectUpdatesService.initialize(this.url,types,this.item.lastModified))))}openVirtualMetadataModal(content){this.modalRef=this.modalService.open(content)}closeVirtualMetadataModal(){this.modalRef.close()}getRelationshipMessageKey(label){return Object(empty_util.b)(label)&&label.indexOf("Of")>-1?`relationships.${label.substring(0,label.indexOf("Of")+2)}`:label}getLabel(relationshipType){return this.getRelationships(relationshipType).pipe(Object(switchMap.a)((relationships=>this.isLeftItem(relationships[0]).pipe(Object(map.a)((isLeftItem=>isLeftItem?relationshipType.leftwardType:relationshipType.rightwardType))))))}getRelationships(relationshipType){return this.relationships$.has(relationshipType)||this.relationships$.set(relationshipType,this.relationshipService.getItemRelationshipsArray(this.item).pipe(Object(switchMap.a)((relationships=>Object(combineLatest.a)(relationships.map((relationship=>this.getRelationshipType(relationship)))).pipe(Object(defaultIfEmpty.a)([]),Object(map.a)((types=>relationships.filter(((relationship,index)=>relationshipType.id===types[index].id))))))))),this.relationships$.get(relationshipType)}getRelationshipType(relationship){return this.linkService.resolveLinks(relationship,Object(follow_link_config_model.a)("relationshipType"),Object(follow_link_config_model.a)("leftItem"),Object(follow_link_config_model.a)("rightItem")),relationship.relationshipType.pipe(Object(operators.i)(),Object(operators.o)(),Object(filter.a)((relationshipType=>Object(empty_util.b)(relationshipType)&&Object(empty_util.e)(relationshipType.uuid))))}getRelatedItem(relationship){return this.relatedItems$.has(relationship)||this.relatedItems$.set(relationship,this.isLeftItem(relationship).pipe(Object(switchMap.a)((isLeftItem=>isLeftItem?relationship.rightItem:relationship.leftItem)),Object(operators.i)(),Object(operators.o)())),this.relatedItems$.get(relationship)}getVirtualMetadata(relationship){return this.virtualMetadata$.has(relationship)||this.virtualMetadata$.set(relationship,this.getRelatedItem(relationship).pipe(Object(map.a)((relatedItem=>Object.entries(relatedItem.metadata).map((([key,value])=>value.filter((metadata=>metadata.authority&&metadata.authority.endsWith(relationship.id))).map((metadata=>({metadataField:key,metadataValue:metadata}))))).reduce(((previous,current)=>previous.concat(current))))))),this.virtualMetadata$.get(relationship)}isLeftItem(relationship){return relationship.leftItem.pipe(Object(operators.i)(),Object(operators.o)(),Object(filter.a)((item=>Object(empty_util.b)(item)&&Object(empty_util.e)(item.uuid))),Object(map.a)((leftItem=>leftItem.uuid===this.item.uuid)))}isSelected(type){return this.objectUpdatesService.isSelectedVirtualMetadata(this.url,this.item.uuid,type.uuid)}setSelected(type,selected){this.objectUpdatesService.setSelectedVirtualMetadata(this.url,this.item.uuid,type.uuid,selected)}performAction(){this.subs.push(this.types$.pipe(Object(switchMap.a)((types=>Object(combineLatest.a)(types.map((type=>this.isSelected(type)))).pipe(Object(defaultIfEmpty.a)([]),Object(map.a)((selection=>types.filter(((type,index)=>selection[index])))),Object(map.a)((selectedTypes=>selectedTypes.map((type=>type.id))))))),Object(switchMap.a)((types=>this.itemDataService.delete(this.item.id,types).pipe(Object(operators.g)())))).subscribe((rd=>{this.notify(rd.hasSucceeded)})))}notify(succeeded){succeeded?(this.notificationsService.success(this.translateService.get("item.edit."+this.messageKey+".success")),this.router.navigate([""])):(this.notificationsService.error(this.translateService.get("item.edit."+this.messageKey+".error")),this.router.navigate([Object(item_page_routing_paths.e)(this.item)]))}ngOnDestroy(){this.subs.filter((sub=>Object(empty_util.b)(sub))).forEach((sub=>sub.unsubscribe()))}}item_delete_component_ItemDeleteComponent.\u0275fac=function ItemDeleteComponent_Factory(t){return new(t||item_delete_component_ItemDeleteComponent)(core["\u0275\u0275directiveInject"](fesm2015_router.a),core["\u0275\u0275directiveInject"](fesm2015_router.g),core["\u0275\u0275directiveInject"](notifications_service.a),core["\u0275\u0275directiveInject"](item_data_service.a),core["\u0275\u0275directiveInject"](ngx_translate_core.e),core["\u0275\u0275directiveInject"](ng_bootstrap.q),core["\u0275\u0275directiveInject"](object_updates_service.a),core["\u0275\u0275directiveInject"](relationship_service.a),core["\u0275\u0275directiveInject"](entity_type_service.a),core["\u0275\u0275directiveInject"](link_service.a))},item_delete_component_ItemDeleteComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:item_delete_component_ItemDeleteComponent,selectors:[["ds-item-delete"]],inputs:{url:"url"},features:[core["\u0275\u0275InheritDefinitionFeature"]],decls:30,vars:22,consts:[[1,"container"],[1,"row"],[1,"col-12"],[3,"item"],[4,"ngVar"],[1,"btn","btn-outline-secondary","perform-action",3,"click"],[1,"btn","btn-outline-secondary","cancel",3,"routerLink"],["class","mb-4",4,"ngIf"],[1,"mb-4"],["class","mb-4",4,"ngFor","ngForOf"],["class","d-flex flex-row",4,"ngVar"],[1,"d-flex","flex-row"],[1,"m-2",3,"click"],["type","checkbox",3,"checked"],[1,"flex-column","flex-grow-1"],[3,"click"],["class","d-flex flex-row",4,"ngFor","ngForOf"],[3,"object","viewMode",4,"ngIf"],[1,"ml-auto"],[1,"btn-group"],[1,"btn","btn-outline-info","btn-sm",3,"click"],[1,"fas","fa-info","fa-fw"],["virtualMetadataModal",""],[3,"object","viewMode"],[1,"modal-header"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[4,"ngFor","ngForOf"],[1,"font-weight-bold"]],template:function ItemDeleteComponent_Template(rf,ctx){1&rf&&(core["\u0275\u0275elementStart"](0,"div",0),core["\u0275\u0275text"](1,"\n    "),core["\u0275\u0275elementStart"](2,"div",1),core["\u0275\u0275text"](3,"\n        "),core["\u0275\u0275elementStart"](4,"div",2),core["\u0275\u0275text"](5,"\n\n            "),core["\u0275\u0275elementStart"](6,"h2"),core["\u0275\u0275text"](7),core["\u0275\u0275pipe"](8,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](9,"\n            "),core["\u0275\u0275elementStart"](10,"p"),core["\u0275\u0275text"](11),core["\u0275\u0275pipe"](12,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](13,"\n            "),core["\u0275\u0275element"](14,"ds-modify-item-overview",3),core["\u0275\u0275text"](15,"\n\n            "),core["\u0275\u0275template"](16,ItemDeleteComponent_ng_container_16_Template,4,1,"ng-container",4),core["\u0275\u0275pipe"](17,"async"),core["\u0275\u0275text"](18,"\n\n            "),core["\u0275\u0275elementStart"](19,"button",5),core["\u0275\u0275listener"]("click",(function ItemDeleteComponent_Template_button_click_19_listener(){return ctx.performAction()})),core["\u0275\u0275text"](20),core["\u0275\u0275pipe"](21,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](22,"\n            "),core["\u0275\u0275elementStart"](23,"button",6),core["\u0275\u0275text"](24),core["\u0275\u0275pipe"](25,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](26,"\n\n        "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](27,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](28,"\n"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](29,"\n")),2&rf&&(core["\u0275\u0275advance"](7),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind2"](8,7,ctx.headerMessage,core["\u0275\u0275pureFunction1"](18,item_delete_component_c0,ctx.item.handle))),core["\u0275\u0275advance"](4),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](12,10,ctx.descriptionMessage)),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("item",ctx.item),core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngVar",core["\u0275\u0275pipeBind1"](17,12,ctx.types$)),core["\u0275\u0275advance"](4),core["\u0275\u0275textInterpolate1"]("",core["\u0275\u0275pipeBind1"](21,14,ctx.confirmMessage),"\n            "),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("routerLink",core["\u0275\u0275pureFunction1"](20,item_delete_component_c1,ctx.itemPageRoute)),core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate1"]("\n                ",core["\u0275\u0275pipeBind1"](25,16,ctx.cancelMessage),"\n            "))},directives:[modify_item_overview_component.a,var_directive.a,fesm2015_router.h,common.NgIf,common.NgForOf,listable_object_component_loader_component.a],pipes:[ngx_translate_core.d,common.AsyncPipe],encapsulation:2});class ItemOperation{constructor(operationKey,operationUrl,featureID,disabled=!1,authorized=!0){this.operationKey=operationKey,this.operationUrl=operationUrl,this.featureID=featureID,this.authorized=authorized,this.setDisabled(disabled)}setDisabled(disabled){this.disabled=disabled}}var mergeMap=__webpack_require__("5+tZ"),distinctUntilChanged=__webpack_require__("/uUt"),toArray=__webpack_require__("IAdc"),internal_BehaviorSubject=__webpack_require__("2Vo4"),from=__webpack_require__("Cfvw"),authorization_data_service=__webpack_require__("1mcE"),feature_id=__webpack_require__("FU+A");function ItemOperationComponent_span_9_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"span"),core["\u0275\u0275text"](1,"\n    "),core["\u0275\u0275elementStart"](2,"button",5),core["\u0275\u0275text"](3),core["\u0275\u0275pipe"](4,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](5,"\n  "),core["\u0275\u0275elementEnd"]()),2&rf){const ctx_r0=core["\u0275\u0275nextContext"]();core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("disabled",ctx_r0.operation.disabled)("routerLink",ctx_r0.operation.operationUrl),core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate1"]("\n      ",core["\u0275\u0275pipeBind1"](4,3,"item.edit.tabs.status.buttons."+ctx_r0.operation.operationKey+".button"),"\n    ")}}function ItemOperationComponent_span_11_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"span",6),core["\u0275\u0275pipe"](1,"translate"),core["\u0275\u0275text"](2,"\n    "),core["\u0275\u0275elementStart"](3,"button",7),core["\u0275\u0275text"](4),core["\u0275\u0275pipe"](5,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](6,"\n  "),core["\u0275\u0275elementEnd"]()),2&rf){const ctx_r1=core["\u0275\u0275nextContext"]();core["\u0275\u0275property"]("ngbTooltip",core["\u0275\u0275pipeBind1"](1,3,"item.edit.tabs.status.buttons.unauthorized")),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("disabled",!0),core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate1"]("\n      ",core["\u0275\u0275pipeBind1"](5,5,"item.edit.tabs.status.buttons."+ctx_r1.operation.operationKey+".button"),"\n    ")}}class ItemOperationComponent{}function ItemStatusComponent_div_6_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"div",7),core["\u0275\u0275text"](1,"\n    "),core["\u0275\u0275elementStart"](2,"div",3),core["\u0275\u0275text"](3),core["\u0275\u0275pipe"](4,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](5,"\n    "),core["\u0275\u0275elementStart"](6,"div",8),core["\u0275\u0275text"](7),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](8,"\n  "),core["\u0275\u0275elementEnd"]()),2&rf){const statusKey_r2=ctx.$implicit,ctx_r0=core["\u0275\u0275nextContext"]();core["\u0275\u0275advance"](3),core["\u0275\u0275textInterpolate1"]("\n      ",core["\u0275\u0275pipeBind1"](4,3,"item.edit.tabs.status.labels."+statusKey_r2),":\n    "),core["\u0275\u0275advance"](3),core["\u0275\u0275propertyInterpolate1"]("id","status-",statusKey_r2,""),core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate1"]("\n      ",ctx_r0.statusData[statusKey_r2],"\n    ")}}function ItemStatusComponent_div_20_ds_item_operation_2_Template(rf,ctx){if(1&rf&&core["\u0275\u0275element"](0,"ds-item-operation",11),2&rf){const operation_r3=core["\u0275\u0275nextContext"]().$implicit;core["\u0275\u0275property"]("operation",operation_r3)}}ItemOperationComponent.\u0275fac=function ItemOperationComponent_Factory(t){return new(t||ItemOperationComponent)},ItemOperationComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:ItemOperationComponent,selectors:[["ds-item-operation"]],inputs:{operation:"operation"},decls:14,vars:5,consts:[[1,"col-3","float-left","d-flex","h-100","action-label"],[1,"justify-content-center","align-self-center"],[1,"col-9","float-left","action-button"],[4,"ngIf"],[3,"ngbTooltip",4,"ngIf"],[1,"btn","btn-outline-primary",3,"disabled","routerLink"],[3,"ngbTooltip"],[1,"btn","btn-outline-primary",3,"disabled"]],template:function ItemOperationComponent_Template(rf,ctx){1&rf&&(core["\u0275\u0275elementStart"](0,"div",0),core["\u0275\u0275text"](1,"\n      "),core["\u0275\u0275elementStart"](2,"span",1),core["\u0275\u0275text"](3),core["\u0275\u0275pipe"](4,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](5,"\n"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](6,"\n"),core["\u0275\u0275elementStart"](7,"div",2),core["\u0275\u0275text"](8,"\n  "),core["\u0275\u0275template"](9,ItemOperationComponent_span_9_Template,6,5,"span",3),core["\u0275\u0275text"](10,"\n  "),core["\u0275\u0275template"](11,ItemOperationComponent_span_11_Template,7,7,"span",4),core["\u0275\u0275text"](12,"\n"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](13,"\n")),2&rf&&(core["\u0275\u0275advance"](3),core["\u0275\u0275textInterpolate1"]("\n        ",core["\u0275\u0275pipeBind1"](4,3,"item.edit.tabs.status.buttons."+ctx.operation.operationKey+".label"),"\n      "),core["\u0275\u0275advance"](6),core["\u0275\u0275property"]("ngIf",ctx.operation.authorized),core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",!ctx.operation.authorized))},directives:[common.NgIf,fesm2015_router.h,ng_bootstrap.O],pipes:[ngx_translate_core.d],encapsulation:2});const item_status_component_c0=function(a0){return{"pt-3":a0}};function ItemStatusComponent_div_20_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"div",9),core["\u0275\u0275text"](1,"\n    "),core["\u0275\u0275template"](2,ItemStatusComponent_div_20_ds_item_operation_2_Template,1,1,"ds-item-operation",10),core["\u0275\u0275text"](3,"\n  "),core["\u0275\u0275elementEnd"]()),2&rf){const operation_r3=ctx.$implicit;core["\u0275\u0275property"]("ngClass",core["\u0275\u0275pureFunction1"](2,item_status_component_c0,operation_r3)),core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",operation_r3)}}class item_status_component_ItemStatusComponent{constructor(route,authorizationService){this.route=route,this.authorizationService=authorizationService,this.operations$=new internal_BehaviorSubject.a([])}ngOnInit(){this.itemRD$=this.route.parent.data.pipe(Object(map.a)((data=>data.dso))),this.itemRD$.pipe(Object(first.a)(),Object(map.a)((data=>data.payload))).subscribe((item=>{this.statusData=Object.assign({id:item.id,handle:item.handle,lastModified:item.lastModified}),this.statusDataKeys=Object.keys(this.statusData);const operations=[];operations.push(new ItemOperation("authorizations",this.getCurrentUrl(item)+"/authorizations",feature_id.a.CanManagePolicies,!0)),operations.push(new ItemOperation("mappedCollections",this.getCurrentUrl(item)+"/mapper",feature_id.a.CanManageMappings,!0)),item.isWithdrawn?operations.push(new ItemOperation("reinstate",this.getCurrentUrl(item)+"/reinstate",feature_id.a.ReinstateItem,!0)):operations.push(new ItemOperation("withdraw",this.getCurrentUrl(item)+"/withdraw",feature_id.a.WithdrawItem,!0)),item.isDiscoverable?operations.push(new ItemOperation("private",this.getCurrentUrl(item)+"/private",feature_id.a.CanMakePrivate,!0)):operations.push(new ItemOperation("public",this.getCurrentUrl(item)+"/public",feature_id.a.CanMakePrivate,!0)),operations.push(new ItemOperation("delete",this.getCurrentUrl(item)+"/delete",feature_id.a.CanDelete,!0)),operations.push(new ItemOperation("move",this.getCurrentUrl(item)+"/move",feature_id.a.CanMove,!0)),this.operations$.next(operations),Object(from.a)(operations).pipe(Object(mergeMap.a)((operation=>Object(empty_util.b)(operation.featureID)?this.authorizationService.isAuthorized(operation.featureID,item.self).pipe(Object(distinctUntilChanged.a)(),Object(map.a)((authorized=>new ItemOperation(operation.operationKey,operation.operationUrl,operation.featureID,!authorized,authorized)))):[operation])),Object(toArray.a)()).subscribe((ops=>this.operations$.next(ops)))})),this.itemPageRoute$=this.itemRD$.pipe(Object(operators.d)(),Object(map.a)((item=>Object(item_page_routing_paths.h)(item))))}getCurrentUrl(item){return Object(item_page_routing_paths.e)(item)}trackOperation(index,operation){return Object(empty_util.b)(operation)?operation.operationKey:void 0}}item_status_component_ItemStatusComponent.\u0275fac=function ItemStatusComponent_Factory(t){return new(t||item_status_component_ItemStatusComponent)(core["\u0275\u0275directiveInject"](fesm2015_router.a),core["\u0275\u0275directiveInject"](authorization_data_service.a))},item_status_component_ItemStatusComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:item_status_component_ItemStatusComponent,selectors:[["ds-item-status"]],decls:24,vars:16,consts:[[1,"mt-2"],[1,"row"],["class","w-100",4,"ngFor","ngForOf"],[1,"col-3","float-left","status-label"],["id","status-itemPage",1,"col-9","float-left","status-data"],[3,"routerLink"],["class","w-100",3,"ngClass",4,"ngFor","ngForOf"],[1,"w-100"],[1,"col-9","float-left","status-data",3,"id"],[1,"w-100",3,"ngClass"],[3,"operation",4,"ngIf"],[3,"operation"]],template:function ItemStatusComponent_Template(rf,ctx){1&rf&&(core["\u0275\u0275elementStart"](0,"p",0),core["\u0275\u0275text"](1),core["\u0275\u0275pipe"](2,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](3,"\n"),core["\u0275\u0275elementStart"](4,"div",1),core["\u0275\u0275text"](5,"\n  "),core["\u0275\u0275template"](6,ItemStatusComponent_div_6_Template,9,5,"div",2),core["\u0275\u0275text"](7,"\n  "),core["\u0275\u0275elementStart"](8,"div",3),core["\u0275\u0275text"](9),core["\u0275\u0275pipe"](10,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](11,"\n  "),core["\u0275\u0275elementStart"](12,"div",4),core["\u0275\u0275text"](13,"\n    "),core["\u0275\u0275elementStart"](14,"a",5),core["\u0275\u0275pipe"](15,"async"),core["\u0275\u0275text"](16),core["\u0275\u0275pipe"](17,"async"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](18,"\n  "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](19,"\n\n  "),core["\u0275\u0275template"](20,ItemStatusComponent_div_20_Template,4,4,"div",6),core["\u0275\u0275pipe"](21,"async"),core["\u0275\u0275text"](22,"\n"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](23,"\n")),2&rf&&(core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](2,6,"item.edit.tabs.status.description")),core["\u0275\u0275advance"](5),core["\u0275\u0275property"]("ngForOf",ctx.statusDataKeys),core["\u0275\u0275advance"](3),core["\u0275\u0275textInterpolate1"]("\n    ",core["\u0275\u0275pipeBind1"](10,8,"item.edit.tabs.status.labels.itemPage"),":\n  "),core["\u0275\u0275advance"](5),core["\u0275\u0275property"]("routerLink",core["\u0275\u0275pipeBind1"](15,10,ctx.itemPageRoute$)),core["\u0275\u0275advance"](2),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](17,12,ctx.itemPageRoute$)),core["\u0275\u0275advance"](4),core["\u0275\u0275property"]("ngForOf",core["\u0275\u0275pipeBind1"](21,14,ctx.operations$)))},directives:[common.NgForOf,fesm2015_router.j,common.NgClass,common.NgIf,ItemOperationComponent],pipes:[ngx_translate_core.d,common.AsyncPipe],encapsulation:2,data:{animation:[fade.a,fade.c]}});var item_metadata_component=__webpack_require__("4vdZ"),abstract_item_update_component=__webpack_require__("GsQf"),zip=__webpack_require__("1uah"),bitstream_data_service=__webpack_require__("PCBh"),object_cache_service=__webpack_require__("mycY"),request_service=__webpack_require__("X/78"),object_updates_actions=__webpack_require__("X8f1"),bundle_data_service=__webpack_require__("yhw/"),paginated_search_options_model=__webpack_require__("R7cy");class ResponsiveColumnSizes{constructor(xs,sm,md,lg,xl){this.xs=xs,this.sm=sm,this.md=md,this.lg=lg,this.xl=xl}buildClasses(){return`col-${this.xs} col-sm-${this.sm} col-md-${this.md} col-lg-${this.lg} col-xl-${this.xl}`}}class responsive_table_sizes_ResponsiveTableSizes{constructor(columns){this.columns=columns}combineColumns(start,end){if(start<end&&Object(empty_util.b)(this.columns[start])&&Object(empty_util.b)(this.columns[end])){let xs=this.columns[start].xs,sm=this.columns[start].sm,md=this.columns[start].md,lg=this.columns[start].lg,xl=this.columns[start].xl;for(let i=start+1;i<end+1;i++)xs+=this.columns[i].xs,sm+=this.columns[i].sm,md+=this.columns[i].md,lg+=this.columns[i].lg,xl+=this.columns[i].xl;return new ResponsiveColumnSizes(xs,sm,md,lg,xl)}}}const item_edit_bitstream_drag_handle_component_c0=["handleView"];function ItemEditBitstreamDragHandleComponent_ng_template_0_Template(rf,ctx){1&rf&&(core["\u0275\u0275text"](0,"\n  "),core["\u0275\u0275elementStart"](1,"div",1),core["\u0275\u0275text"](2,"\n    "),core["\u0275\u0275element"](3,"i",2),core["\u0275\u0275pipe"](4,"translate"),core["\u0275\u0275text"](5,"\n  "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](6,"\n")),2&rf&&(core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("title",core["\u0275\u0275pipeBind1"](4,1,"item.edit.bitstreams.edit.buttons.drag")))}class ItemEditBitstreamDragHandleComponent{constructor(viewContainerRef){this.viewContainerRef=viewContainerRef}ngOnInit(){this.viewContainerRef.createEmbeddedView(this.handleView)}}ItemEditBitstreamDragHandleComponent.\u0275fac=function ItemEditBitstreamDragHandleComponent_Factory(t){return new(t||ItemEditBitstreamDragHandleComponent)(core["\u0275\u0275directiveInject"](core.ViewContainerRef))},ItemEditBitstreamDragHandleComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:ItemEditBitstreamDragHandleComponent,selectors:[["ds-item-edit-bitstream-drag-handle"]],viewQuery:function ItemEditBitstreamDragHandleComponent_Query(rf,ctx){if(1&rf&&core["\u0275\u0275viewQuery"](item_edit_bitstream_drag_handle_component_c0,3),2&rf){let _t;core["\u0275\u0275queryRefresh"](_t=core["\u0275\u0275loadQuery"]())&&(ctx.handleView=_t.first)}},decls:3,vars:0,consts:[["handleView",""],["tabindex","0",1,"drag-handle","text-muted","float-left","p-1","mr-2"],[1,"fas","fa-grip-vertical","fa-fw",3,"title"]],template:function ItemEditBitstreamDragHandleComponent_Template(rf,ctx){1&rf&&(core["\u0275\u0275template"](0,ItemEditBitstreamDragHandleComponent_ng_template_0_Template,7,3,"ng-template",null,0,core["\u0275\u0275templateRefExtractor"]),core["\u0275\u0275text"](2,"\n"))},pipes:[ngx_translate_core.d],styles:[".header-row[_ngcontent-%COMP%]{color:var(--bs-table-dark-color);background-color:var(--bs-table-dark-bg);border-color:var(--bs-table-dark-border-color)}.bundle-row[_ngcontent-%COMP%]{color:var(--bs-table-head-color);background-color:var(--bs-table-head-bg);border-color:var(--bs-table-border-color)}.row-element[_ngcontent-%COMP%]{padding:.75em;border-bottom:var(--bs-table-border-width) solid var(--bs-table-border-color)}.drag-handle[_ngcontent-%COMP%]{visibility:hidden}.bitstream-row-drag-handle[_ngcontent-%COMP%]:hover, .drag-handle[_ngcontent-%COMP%]:hover{cursor:move}[_nghost-%COMP%]     .bitstream-row-drag-handle:focus .drag-handle, [_nghost-%COMP%]     .bitstream-row:hover .drag-handle{visibility:visible!important}.cdk-drag-preview[_ngcontent-%COMP%]{margin-left:0;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12);box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%]{-webkit-transition:-webkit-transform .25s cubic-bezier(0,0,.2,1);transition:-webkit-transform .25s cubic-bezier(0,0,.2,1);transition:transform .25s cubic-bezier(0,0,.2,1);transition:transform .25s cubic-bezier(0,0,.2,1),-webkit-transform .25s cubic-bezier(0,0,.2,1)}.cdk-drop-list-dragging[_ngcontent-%COMP%]   .bitstream-row-drag-handle[_ngcontent-%COMP%], .cdk-drop-list-dragging[_ngcontent-%COMP%]   .drag-handle[_ngcontent-%COMP%]{cursor:-webkit-grabbing;cursor:grabbing}"]});__webpack_require__("kBGy"),__webpack_require__("PN+Z");var pagination_component_options_model=__webpack_require__("7DXY"),drag_drop=__webpack_require__("5+WD"),pagination_component=__webpack_require__("Exvd"),object_values_pipe=__webpack_require__("snSO"),item_relationships_utils=__webpack_require__("ysan"),pagination_service=__webpack_require__("MFUF");class abstract_paginated_drag_and_drop_list_component_AbstractPaginatedDragAndDropListComponent{constructor(objectUpdatesService,elRef,objectValuesPipe,paginationService){this.objectUpdatesService=objectUpdatesService,this.elRef=elRef,this.objectValuesPipe=objectValuesPipe,this.paginationService=paginationService,this.dropObject=new core.EventEmitter,this.pageSize=10,this.options=Object.assign(new pagination_component_options_model.a,{id:"dad",currentPage:1,pageSize:this.pageSize}),this.currentPage$=new internal_BehaviorSubject.a(this.options),this.loading$=new internal_BehaviorSubject.a(!1),this.subs=[]}ngOnInit(){this.initializeObjectsRD(),this.initializeURL(),this.initializeUpdates(),this.initializePagination()}initializePagination(){this.paginationService.getCurrentPagination(this.options.id,this.options).subscribe((currentPagination=>{this.currentPage$.next(currentPagination)}))}initializeUpdates(){this.objectsRD$.pipe(Object(operators.i)(),Object(operators.s)()).subscribe((objects=>{this.objectUpdatesService.initialize(this.url,objects,new Date)})),this.updates$=this.objectsRD$.pipe(Object(operators.c)(),Object(operators.s)(),Object(switchMap.a)((objects=>this.objectUpdatesService.getFieldUpdatesExclusive(this.url,objects)))),this.subs.push(this.updates$.pipe(Object(map.a)((fieldUpdates=>this.objectValuesPipe.transform(fieldUpdates))),Object(distinctUntilChanged.a)(Object(item_relationships_utils.b)((fieldUpdate=>Object(empty_util.b)(fieldUpdate)&&Object(empty_util.b)(fieldUpdate.field)?fieldUpdate.field.uuid:void 0)))).subscribe((updateValues=>{this.customOrder=updateValues.map((fieldUpdate=>fieldUpdate.field.uuid)),this.loading$.next(!1)})),this.loading$.subscribe((loading=>this.options.disabled=loading)))}drop(event){const dragIndex=event.previousIndex;let dropIndex=event.currentIndex;const dragPage=this.currentPage$.value.currentPage-1;let dropPage=this.currentPage$.value.currentPage-1;const droppedOnElement=this.elRef.nativeElement.querySelector(".page-item:hover");if(Object(empty_util.b)(droppedOnElement)&&Object(empty_util.b)(droppedOnElement.textContent)){const droppedPage=Number(droppedOnElement.textContent);Object(empty_util.b)(droppedPage)&&!Number.isNaN(droppedPage)&&(dropPage=droppedPage-1,dropIndex=0)}const isNewPage=dragPage!==dropPage;isNewPage||dragIndex===dropIndex||Object(drag_drop.e)(this.customOrder,dragIndex,dropIndex);const redirectPage=dropPage+1,fromIndex=dragPage*this.pageSize+dragIndex,toIndex=dropPage*this.pageSize+dropIndex;fromIndex!==toIndex&&(isNewPage&&this.loading$.next(!0),this.dropObject.emit(Object.assign({fromIndex:fromIndex,toIndex:toIndex,finish:()=>{isNewPage&&this.paginationComponent.doPageChange(redirectPage)}})))}ngOnDestroy(){this.subs.filter((sub=>Object(empty_util.b)(sub))).forEach((sub=>sub.unsubscribe())),this.paginationService.clearPagination(this.options.id)}}abstract_paginated_drag_and_drop_list_component_AbstractPaginatedDragAndDropListComponent.\u0275fac=function AbstractPaginatedDragAndDropListComponent_Factory(t){return new(t||abstract_paginated_drag_and_drop_list_component_AbstractPaginatedDragAndDropListComponent)(core["\u0275\u0275directiveInject"](object_updates_service.a),core["\u0275\u0275directiveInject"](core.ElementRef),core["\u0275\u0275directiveInject"](object_values_pipe.a),core["\u0275\u0275directiveInject"](pagination_service.a))},abstract_paginated_drag_and_drop_list_component_AbstractPaginatedDragAndDropListComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:abstract_paginated_drag_and_drop_list_component_AbstractPaginatedDragAndDropListComponent,selectors:[["ds-paginated-drag-drop-abstract"]],viewQuery:function AbstractPaginatedDragAndDropListComponent_Query(rf,ctx){if(1&rf&&core["\u0275\u0275viewQuery"](pagination_component.a,1),2&rf){let _t;core["\u0275\u0275queryRefresh"](_t=core["\u0275\u0275loadQuery"]())&&(ctx.paginationComponent=_t.first)}},outputs:{dropObject:"dropObject"},decls:0,vars:0,template:function AbstractPaginatedDragAndDropListComponent_Template(rf,ctx){},encapsulation:2});var lodash=__webpack_require__("LvDl"),dso_name_service=__webpack_require__("C765");const item_edit_bitstream_component_c0=["bitstreamView"],item_edit_bitstream_component_c1=function(a1){return["/bitstreams/",a1,"edit"]};function ItemEditBitstreamComponent_ng_template_0_Template(rf,ctx){if(1&rf){const _r3=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275text"](0,"\n  "),core["\u0275\u0275elementStart"](1,"div"),core["\u0275\u0275text"](2,"\n    "),core["\u0275\u0275projection"](3),core["\u0275\u0275text"](4,"\n    "),core["\u0275\u0275elementStart"](5,"div",1),core["\u0275\u0275text"](6,"\n      "),core["\u0275\u0275elementStart"](7,"span",2),core["\u0275\u0275text"](8),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](9,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](10,"\n  "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](11,"\n  "),core["\u0275\u0275elementStart"](12,"div"),core["\u0275\u0275text"](13,"\n    "),core["\u0275\u0275elementStart"](14,"div",3),core["\u0275\u0275text"](15,"\n      "),core["\u0275\u0275elementStart"](16,"span",2),core["\u0275\u0275text"](17),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](18,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](19,"\n  "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](20,"\n  "),core["\u0275\u0275elementStart"](21,"div"),core["\u0275\u0275text"](22,"\n    "),core["\u0275\u0275elementStart"](23,"div",4),core["\u0275\u0275text"](24,"\n        "),core["\u0275\u0275elementStart"](25,"span",2),core["\u0275\u0275text"](26),core["\u0275\u0275pipe"](27,"async"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](28,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](29,"\n  "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](30,"\n  "),core["\u0275\u0275elementStart"](31,"div"),core["\u0275\u0275text"](32,"\n    "),core["\u0275\u0275elementStart"](33,"div",4),core["\u0275\u0275text"](34,"\n      "),core["\u0275\u0275elementStart"](35,"div",5),core["\u0275\u0275text"](36,"\n        "),core["\u0275\u0275elementStart"](37,"a",6),core["\u0275\u0275pipe"](38,"translate"),core["\u0275\u0275text"](39,"\n          "),core["\u0275\u0275element"](40,"i",7),core["\u0275\u0275text"](41,"\n        "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](42,"\n        "),core["\u0275\u0275elementStart"](43,"button",8),core["\u0275\u0275pipe"](44,"translate"),core["\u0275\u0275text"](45,"\n          "),core["\u0275\u0275element"](46,"i",9),core["\u0275\u0275text"](47,"\n        "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](48,"\n        "),core["\u0275\u0275elementStart"](49,"button",10),core["\u0275\u0275listener"]("click",(function ItemEditBitstreamComponent_ng_template_0_Template_button_click_49_listener(){core["\u0275\u0275restoreView"](_r3);return core["\u0275\u0275nextContext"]().remove()})),core["\u0275\u0275pipe"](50,"translate"),core["\u0275\u0275text"](51,"\n          "),core["\u0275\u0275element"](52,"i",11),core["\u0275\u0275text"](53,"\n        "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](54,"\n        "),core["\u0275\u0275elementStart"](55,"button",12),core["\u0275\u0275listener"]("click",(function ItemEditBitstreamComponent_ng_template_0_Template_button_click_55_listener(){core["\u0275\u0275restoreView"](_r3);return core["\u0275\u0275nextContext"]().undo()})),core["\u0275\u0275pipe"](56,"translate"),core["\u0275\u0275text"](57,"\n          "),core["\u0275\u0275element"](58,"i",13),core["\u0275\u0275text"](59,"\n        "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](60,"\n      "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](61,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](62,"\n  "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](63,"\n")}if(2&rf){const ctx_r1=core["\u0275\u0275nextContext"]();let tmp_5_0=null;core["\u0275\u0275advance"](1),core["\u0275\u0275classMapInterpolate1"]("",ctx_r1.columnSizes.columns[0].buildClasses()," row-element d-flex"),core["\u0275\u0275advance"](7),core["\u0275\u0275textInterpolate1"]("\n        ",ctx_r1.bitstreamName,"\n      "),core["\u0275\u0275advance"](4),core["\u0275\u0275classMapInterpolate1"]("",ctx_r1.columnSizes.columns[1].buildClasses()," row-element d-flex align-items-center"),core["\u0275\u0275advance"](5),core["\u0275\u0275textInterpolate1"]("\n      ",null==ctx_r1.bitstream?null:ctx_r1.bitstream.firstMetadataValue("dc.description"),"\n      "),core["\u0275\u0275advance"](4),core["\u0275\u0275classMapInterpolate1"]("",ctx_r1.columnSizes.columns[2].buildClasses()," row-element d-flex align-items-center"),core["\u0275\u0275advance"](5),core["\u0275\u0275textInterpolate1"]("\n            ",null==(tmp_5_0=core["\u0275\u0275pipeBind1"](27,23,ctx_r1.format$))?null:tmp_5_0.shortDescription,"\n        "),core["\u0275\u0275advance"](5),core["\u0275\u0275classMapInterpolate1"]("",ctx_r1.columnSizes.columns[3].buildClasses()," row-element d-flex align-items-center"),core["\u0275\u0275advance"](6),core["\u0275\u0275propertyInterpolate"]("title",core["\u0275\u0275pipeBind1"](38,25,"item.edit.bitstreams.edit.buttons.download")),core["\u0275\u0275property"]("href",null==ctx_r1.bitstream||null==ctx_r1.bitstream._links||null==ctx_r1.bitstream._links.content?null:ctx_r1.bitstream._links.content.href,core["\u0275\u0275sanitizeUrl"]),core["\u0275\u0275advance"](6),core["\u0275\u0275propertyInterpolate"]("title",core["\u0275\u0275pipeBind1"](44,27,"item.edit.bitstreams.edit.buttons.edit")),core["\u0275\u0275property"]("routerLink",core["\u0275\u0275pureFunction1"](33,item_edit_bitstream_component_c1,ctx_r1.bitstream.id)),core["\u0275\u0275advance"](6),core["\u0275\u0275propertyInterpolate"]("title",core["\u0275\u0275pipeBind1"](50,29,"item.edit.bitstreams.edit.buttons.remove")),core["\u0275\u0275property"]("disabled",!ctx_r1.canRemove()),core["\u0275\u0275advance"](6),core["\u0275\u0275propertyInterpolate"]("title",core["\u0275\u0275pipeBind1"](56,31,"item.edit.bitstreams.edit.buttons.undo")),core["\u0275\u0275property"]("disabled",!ctx_r1.canUndo())}}const _c2=[[["","slot","drag-handle"]]];class item_edit_bitstream_component_ItemEditBitstreamComponent{constructor(objectUpdatesService,dsoNameService,viewContainerRef){this.objectUpdatesService=objectUpdatesService,this.dsoNameService=dsoNameService,this.viewContainerRef=viewContainerRef}ngOnInit(){this.viewContainerRef.createEmbeddedView(this.bitstreamView)}ngOnChanges(changes){this.bitstream=Object(lodash.cloneDeep)(this.fieldUpdate.field),this.bitstreamName=this.dsoNameService.getName(this.bitstream),this.format$=this.bitstream.format.pipe(Object(operators.i)(),Object(operators.o)())}remove(){this.objectUpdatesService.saveRemoveFieldUpdate(this.bundleUrl,this.bitstream)}undo(){this.objectUpdatesService.removeSingleFieldUpdate(this.bundleUrl,this.bitstream.uuid)}canRemove(){return this.fieldUpdate.changeType!==object_updates_actions.c.REMOVE}canUndo(){return this.fieldUpdate.changeType>=0}}item_edit_bitstream_component_ItemEditBitstreamComponent.\u0275fac=function ItemEditBitstreamComponent_Factory(t){return new(t||item_edit_bitstream_component_ItemEditBitstreamComponent)(core["\u0275\u0275directiveInject"](object_updates_service.a),core["\u0275\u0275directiveInject"](dso_name_service.a),core["\u0275\u0275directiveInject"](core.ViewContainerRef))},item_edit_bitstream_component_ItemEditBitstreamComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:item_edit_bitstream_component_ItemEditBitstreamComponent,selectors:[["ds-item-edit-bitstream"]],viewQuery:function ItemEditBitstreamComponent_Query(rf,ctx){if(1&rf&&core["\u0275\u0275viewQuery"](item_edit_bitstream_component_c0,3),2&rf){let _t;core["\u0275\u0275queryRefresh"](_t=core["\u0275\u0275loadQuery"]())&&(ctx.bitstreamView=_t.first)}},inputs:{fieldUpdate:"fieldUpdate",bundleUrl:"bundleUrl",columnSizes:"columnSizes"},features:[core["\u0275\u0275NgOnChangesFeature"]],ngContentSelectors:["[slot=drag-handle]"],decls:3,vars:0,consts:[["bitstreamView",""],[1,"float-left","d-flex","align-items-center","overflow-hidden"],[1,"text-truncate"],[1,"w-100"],[1,"text-center","w-100"],[1,"btn-group","relationship-action-buttons"],[1,"btn","btn-outline-primary","btn-sm",3,"href","title"],[1,"fas","fa-download","fa-fw"],[1,"btn","btn-outline-primary","btn-sm",3,"routerLink","title"],[1,"fas","fa-edit","fa-fw"],[1,"btn","btn-outline-danger","btn-sm",3,"disabled","title","click"],[1,"fas","fa-trash-alt","fa-fw"],[1,"btn","btn-outline-warning","btn-sm",3,"disabled","title","click"],[1,"fas","fa-undo-alt","fa-fw"]],template:function ItemEditBitstreamComponent_Template(rf,ctx){1&rf&&(core["\u0275\u0275projectionDef"](_c2),core["\u0275\u0275template"](0,ItemEditBitstreamComponent_ng_template_0_Template,64,35,"ng-template",null,0,core["\u0275\u0275templateRefExtractor"]),core["\u0275\u0275text"](2,"\n"))},directives:[fesm2015_router.h],pipes:[common.AsyncPipe,ngx_translate_core.d],styles:[".header-row[_ngcontent-%COMP%]{color:var(--bs-table-dark-color);background-color:var(--bs-table-dark-bg);border-color:var(--bs-table-dark-border-color)}.bundle-row[_ngcontent-%COMP%]{color:var(--bs-table-head-color);background-color:var(--bs-table-head-bg);border-color:var(--bs-table-border-color)}.row-element[_ngcontent-%COMP%]{padding:.75em;border-bottom:var(--bs-table-border-width) solid var(--bs-table-border-color)}.drag-handle[_ngcontent-%COMP%]{visibility:hidden}.bitstream-row-drag-handle[_ngcontent-%COMP%]:hover, .drag-handle[_ngcontent-%COMP%]:hover{cursor:move}[_nghost-%COMP%]     .bitstream-row-drag-handle:focus .drag-handle, [_nghost-%COMP%]     .bitstream-row:hover .drag-handle{visibility:visible!important}.cdk-drag-preview[_ngcontent-%COMP%]{margin-left:0;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12);box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%]{-webkit-transition:-webkit-transform .25s cubic-bezier(0,0,.2,1);transition:-webkit-transform .25s cubic-bezier(0,0,.2,1);transition:transform .25s cubic-bezier(0,0,.2,1);transition:transform .25s cubic-bezier(0,0,.2,1),-webkit-transform .25s cubic-bezier(0,0,.2,1)}.cdk-drop-list-dragging[_ngcontent-%COMP%]   .bitstream-row-drag-handle[_ngcontent-%COMP%], .cdk-drop-list-dragging[_ngcontent-%COMP%]   .drag-handle[_ngcontent-%COMP%]{cursor:-webkit-grabbing;cursor:grabbing}"]});var loading_component=__webpack_require__("Frqi");const paginated_drag_and_drop_bitstream_list_component_c0=function(a0,a1,a2,a3){return{"table-warning":a0,"table-danger":a1,"table-success":a2,"bg-white":a3}};function PaginatedDragAndDropBitstreamListComponent_ds_pagination_0_ng_container_4_div_2_ng_container_3_div_2_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"div",7),core["\u0275\u0275text"](1,"\n          "),core["\u0275\u0275elementStart"](2,"ds-item-edit-bitstream",8),core["\u0275\u0275text"](3,"\n            "),core["\u0275\u0275elementStart"](4,"div",9),core["\u0275\u0275text"](5,"\n              "),core["\u0275\u0275element"](6,"ds-item-edit-bitstream-drag-handle"),core["\u0275\u0275text"](7,"\n            "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](8,"\n          "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](9,"\n        "),core["\u0275\u0275elementEnd"]()),2&rf){const uuid_r7=ctx.$implicit,updates_r4=core["\u0275\u0275nextContext"](2).ngVar,ctx_r6=core["\u0275\u0275nextContext"](3);core["\u0275\u0275property"]("id",uuid_r7)("ngClass",core["\u0275\u0275pureFunction4"](5,paginated_drag_and_drop_bitstream_list_component_c0,0===updates_r4[uuid_r7].changeType,2===updates_r4[uuid_r7].changeType,1===updates_r4[uuid_r7].changeType,void 0===updates_r4[uuid_r7].changeType)),core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("fieldUpdate",updates_r4[uuid_r7])("bundleUrl",ctx_r6.bundle.self)("columnSizes",ctx_r6.columnSizes)}}function PaginatedDragAndDropBitstreamListComponent_ds_pagination_0_ng_container_4_div_2_ng_container_3_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementContainerStart"](0),core["\u0275\u0275text"](1,"\n        "),core["\u0275\u0275template"](2,PaginatedDragAndDropBitstreamListComponent_ds_pagination_0_ng_container_4_div_2_ng_container_3_div_2_Template,10,10,"div",6),core["\u0275\u0275text"](3,"\n      "),core["\u0275\u0275elementContainerEnd"]()),2&rf){const ctx_r5=core["\u0275\u0275nextContext"](4);core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngForOf",ctx_r5.customOrder)}}const paginated_drag_and_drop_bitstream_list_component_c1=function(a0){return{"mb-3":a0}};function PaginatedDragAndDropBitstreamListComponent_ds_pagination_0_ng_container_4_div_2_Template(rf,ctx){if(1&rf){const _r10=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementStart"](0,"div",5),core["\u0275\u0275listener"]("cdkDropListDropped",(function PaginatedDragAndDropBitstreamListComponent_ds_pagination_0_ng_container_4_div_2_Template_div_cdkDropListDropped_0_listener($event){core["\u0275\u0275restoreView"](_r10);return core["\u0275\u0275nextContext"](3).drop($event)})),core["\u0275\u0275pipe"](1,"async"),core["\u0275\u0275text"](2,"\n      "),core["\u0275\u0275template"](3,PaginatedDragAndDropBitstreamListComponent_ds_pagination_0_ng_container_4_div_2_ng_container_3_Template,4,1,"ng-container",2),core["\u0275\u0275text"](4,"\n    "),core["\u0275\u0275elementEnd"]()}if(2&rf){const updates_r4=ctx.ngVar,ctx_r3=core["\u0275\u0275nextContext"](3);let tmp_1_0=null;core["\u0275\u0275property"]("id",ctx_r3.bundle.id)("ngClass",core["\u0275\u0275pureFunction1"](5,paginated_drag_and_drop_bitstream_list_component_c1,(null==(tmp_1_0=core["\u0275\u0275pipeBind1"](1,3,ctx_r3.objectsRD$))||null==tmp_1_0.payload?null:tmp_1_0.payload.totalElements)>ctx_r3.pageSize)),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("ngIf",updates_r4)}}function PaginatedDragAndDropBitstreamListComponent_ds_pagination_0_ng_container_4_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementContainerStart"](0),core["\u0275\u0275text"](1,"\n    "),core["\u0275\u0275template"](2,PaginatedDragAndDropBitstreamListComponent_ds_pagination_0_ng_container_4_div_2_Template,5,7,"div",4),core["\u0275\u0275pipe"](3,"async"),core["\u0275\u0275text"](4,"\n  "),core["\u0275\u0275elementContainerEnd"]()),2&rf){const ctx_r1=core["\u0275\u0275nextContext"](2);core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngVar",core["\u0275\u0275pipeBind1"](3,1,ctx_r1.updates$))}}function PaginatedDragAndDropBitstreamListComponent_ds_pagination_0_ds_loading_7_Template(rf,ctx){1&rf&&(core["\u0275\u0275element"](0,"ds-loading",10),core["\u0275\u0275pipe"](1,"translate")),2&rf&&core["\u0275\u0275property"]("message",core["\u0275\u0275pipeBind1"](1,1,"loading.bitstreams"))}function PaginatedDragAndDropBitstreamListComponent_ds_pagination_0_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"ds-pagination",1),core["\u0275\u0275pipe"](1,"async"),core["\u0275\u0275pipe"](2,"async"),core["\u0275\u0275text"](3,"\n  "),core["\u0275\u0275template"](4,PaginatedDragAndDropBitstreamListComponent_ds_pagination_0_ng_container_4_Template,5,3,"ng-container",2),core["\u0275\u0275pipe"](5,"async"),core["\u0275\u0275text"](6,"\n  "),core["\u0275\u0275template"](7,PaginatedDragAndDropBitstreamListComponent_ds_pagination_0_ds_loading_7_Template,2,3,"ds-loading",3),core["\u0275\u0275pipe"](8,"async"),core["\u0275\u0275text"](9,"\n"),core["\u0275\u0275elementEnd"]()),2&rf){const ctx_r0=core["\u0275\u0275nextContext"]();let tmp_4_0=null,tmp_5_0=null;core["\u0275\u0275property"]("hideGear",!0)("hidePagerWhenSinglePage",!0)("hidePaginationDetail",!0)("paginationOptions",ctx_r0.options)("pageInfoState",null==(tmp_4_0=core["\u0275\u0275pipeBind1"](1,8,ctx_r0.objectsRD$))?null:tmp_4_0.payload)("collectionSize",null==(tmp_5_0=core["\u0275\u0275pipeBind1"](2,10,ctx_r0.objectsRD$))||null==tmp_5_0.payload?null:tmp_5_0.payload.totalElements),core["\u0275\u0275advance"](4),core["\u0275\u0275property"]("ngIf",!core["\u0275\u0275pipeBind1"](5,12,ctx_r0.loading$)),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("ngIf",core["\u0275\u0275pipeBind1"](8,14,ctx_r0.loading$))}}class paginated_drag_and_drop_bitstream_list_component_PaginatedDragAndDropBitstreamListComponent extends abstract_paginated_drag_and_drop_list_component_AbstractPaginatedDragAndDropListComponent{constructor(objectUpdatesService,elRef,objectValuesPipe,bundleService,paginationService,requestService){super(objectUpdatesService,elRef,objectValuesPipe,paginationService),this.objectUpdatesService=objectUpdatesService,this.elRef=elRef,this.objectValuesPipe=objectValuesPipe,this.bundleService=bundleService,this.paginationService=paginationService,this.requestService=requestService}ngOnInit(){super.ngOnInit()}initializeObjectsRD(){this.objectsRD$=this.currentPage$.pipe(Object(switchMap.a)((page=>{const paginatedOptions=new paginated_search_options_model.a({pagination:Object.assign({},page)});return this.bundleService.getBitstreamsEndpoint(this.bundle.id,paginatedOptions).pipe(Object(switchMap.a)((href=>this.requestService.hasByHref$(href))),Object(switchMap.a)((()=>this.bundleService.getBitstreams(this.bundle.id,paginatedOptions,Object(follow_link_config_model.a)("format")))))})))}initializeURL(){this.url=this.bundle.self}}paginated_drag_and_drop_bitstream_list_component_PaginatedDragAndDropBitstreamListComponent.\u0275fac=function PaginatedDragAndDropBitstreamListComponent_Factory(t){return new(t||paginated_drag_and_drop_bitstream_list_component_PaginatedDragAndDropBitstreamListComponent)(core["\u0275\u0275directiveInject"](object_updates_service.a),core["\u0275\u0275directiveInject"](core.ElementRef),core["\u0275\u0275directiveInject"](object_values_pipe.a),core["\u0275\u0275directiveInject"](bundle_data_service.a),core["\u0275\u0275directiveInject"](pagination_service.a),core["\u0275\u0275directiveInject"](request_service.a))},paginated_drag_and_drop_bitstream_list_component_PaginatedDragAndDropBitstreamListComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:paginated_drag_and_drop_bitstream_list_component_PaginatedDragAndDropBitstreamListComponent,selectors:[["ds-paginated-drag-and-drop-bitstream-list"]],inputs:{bundle:"bundle",columnSizes:"columnSizes"},features:[core["\u0275\u0275InheritDefinitionFeature"]],decls:3,vars:3,consts:[[3,"hideGear","hidePagerWhenSinglePage","hidePaginationDetail","paginationOptions","pageInfoState","collectionSize",4,"ngIf"],[3,"hideGear","hidePagerWhenSinglePage","hidePaginationDetail","paginationOptions","pageInfoState","collectionSize"],[4,"ngIf"],[3,"message",4,"ngIf"],["class","bundle-bitstreams-list","cdkDropList","",3,"id","ngClass","cdkDropListDropped",4,"ngVar"],["cdkDropList","",1,"bundle-bitstreams-list",3,"id","ngClass","cdkDropListDropped"],["class","row bitstream-row","cdkDrag","",3,"id","ngClass",4,"ngFor","ngForOf"],["cdkDrag","",1,"row","bitstream-row",3,"id","ngClass"],[3,"fieldUpdate","bundleUrl","columnSizes"],["slot","drag-handle","cdkDragHandle","","tabindex","0",1,"d-flex","align-items-center","bitstream-row-drag-handle"],[3,"message"]],template:function PaginatedDragAndDropBitstreamListComponent_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275template"](0,PaginatedDragAndDropBitstreamListComponent_ds_pagination_0_Template,10,16,"ds-pagination",0),core["\u0275\u0275pipe"](1,"async"),core["\u0275\u0275text"](2,"\n")),2&rf){let tmp_0_0=null;core["\u0275\u0275property"]("ngIf",null==(tmp_0_0=core["\u0275\u0275pipeBind1"](1,1,ctx.objectsRD$))?null:tmp_0_0.payload)}},directives:[common.NgIf,pagination_component.a,var_directive.a,drag_drop.c,common.NgClass,common.NgForOf,drag_drop.a,item_edit_bitstream_component_ItemEditBitstreamComponent,drag_drop.b,ItemEditBitstreamDragHandleComponent,loading_component.a],pipes:[common.AsyncPipe,ngx_translate_core.d],styles:[".header-row[_ngcontent-%COMP%]{color:var(--bs-table-dark-color);background-color:var(--bs-table-dark-bg);border-color:var(--bs-table-dark-border-color)}.bundle-row[_ngcontent-%COMP%]{color:var(--bs-table-head-color);background-color:var(--bs-table-head-bg);border-color:var(--bs-table-border-color)}.row-element[_ngcontent-%COMP%]{padding:.75em;border-bottom:var(--bs-table-border-width) solid var(--bs-table-border-color)}.drag-handle[_ngcontent-%COMP%]{visibility:hidden}.bitstream-row-drag-handle[_ngcontent-%COMP%]:hover, .drag-handle[_ngcontent-%COMP%]:hover{cursor:move}[_nghost-%COMP%]     .bitstream-row-drag-handle:focus .drag-handle, [_nghost-%COMP%]     .bitstream-row:hover .drag-handle{visibility:visible!important}.cdk-drag-preview[_ngcontent-%COMP%]{margin-left:0;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12);box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%]{-webkit-transition:-webkit-transform .25s cubic-bezier(0,0,.2,1);transition:-webkit-transform .25s cubic-bezier(0,0,.2,1);transition:transform .25s cubic-bezier(0,0,.2,1);transition:transform .25s cubic-bezier(0,0,.2,1),-webkit-transform .25s cubic-bezier(0,0,.2,1)}.cdk-drop-list-dragging[_ngcontent-%COMP%]   .bitstream-row-drag-handle[_ngcontent-%COMP%], .cdk-drop-list-dragging[_ngcontent-%COMP%]   .drag-handle[_ngcontent-%COMP%]{cursor:-webkit-grabbing;cursor:grabbing}"]});const item_edit_bitstream_bundle_component_c0=["bundleView"],item_edit_bitstream_bundle_component_c1=function(a0){return{name:a0}},item_edit_bitstream_bundle_component_c2=function(a0){return[a0,"bitstreams","new"]},item_edit_bitstream_bundle_component_c3=function(a0){return{bundle:a0}};function ItemEditBitstreamBundleComponent_ng_template_0_Template(rf,ctx){if(1&rf){const _r3=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275text"](0,"\n  "),core["\u0275\u0275elementStart"](1,"div",1),core["\u0275\u0275text"](2,"\n    "),core["\u0275\u0275elementStart"](3,"div"),core["\u0275\u0275text"](4,"\n      "),core["\u0275\u0275element"](5,"ds-item-edit-bitstream-drag-handle"),core["\u0275\u0275text"](6,"\n      "),core["\u0275\u0275elementStart"](7,"div",2),core["\u0275\u0275text"](8),core["\u0275\u0275pipe"](9,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](10,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](11,"\n    "),core["\u0275\u0275elementStart"](12,"div"),core["\u0275\u0275text"](13,"\n      "),core["\u0275\u0275elementStart"](14,"div",3),core["\u0275\u0275text"](15,"\n        "),core["\u0275\u0275elementStart"](16,"button",4),core["\u0275\u0275pipe"](17,"translate"),core["\u0275\u0275text"](18,"\n          "),core["\u0275\u0275element"](19,"i",5),core["\u0275\u0275text"](20,"\n        "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](21,"\n      "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](22,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](23,"\n  "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](24,"\n  "),core["\u0275\u0275elementStart"](25,"ds-paginated-drag-and-drop-bitstream-list",6),core["\u0275\u0275listener"]("dropObject",(function ItemEditBitstreamBundleComponent_ng_template_0_Template_ds_paginated_drag_and_drop_bitstream_list_dropObject_25_listener($event){core["\u0275\u0275restoreView"](_r3);return core["\u0275\u0275nextContext"]().dropObject.emit($event)})),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](26,"\n")}if(2&rf){const ctx_r1=core["\u0275\u0275nextContext"]();core["\u0275\u0275advance"](3),core["\u0275\u0275classMapInterpolate1"]("",ctx_r1.bundleNameColumn.buildClasses()," font-weight-bold row-element d-flex"),core["\u0275\u0275advance"](5),core["\u0275\u0275textInterpolate1"]("\n        ",core["\u0275\u0275pipeBind2"](9,12,"item.edit.bitstreams.bundle.name",core["\u0275\u0275pureFunction1"](17,item_edit_bitstream_bundle_component_c1,ctx_r1.bundle.name)),"\n      "),core["\u0275\u0275advance"](4),core["\u0275\u0275classMapInterpolate1"]("",ctx_r1.columnSizes.columns[3].buildClasses()," text-center row-element"),core["\u0275\u0275advance"](4),core["\u0275\u0275propertyInterpolate"]("title",core["\u0275\u0275pipeBind1"](17,15,"item.edit.bitstreams.bundle.edit.buttons.upload")),core["\u0275\u0275property"]("routerLink",core["\u0275\u0275pureFunction1"](19,item_edit_bitstream_bundle_component_c2,ctx_r1.itemPageRoute))("queryParams",core["\u0275\u0275pureFunction1"](21,item_edit_bitstream_bundle_component_c3,ctx_r1.bundle.id)),core["\u0275\u0275advance"](9),core["\u0275\u0275property"]("bundle",ctx_r1.bundle)("columnSizes",ctx_r1.columnSizes)}}class item_edit_bitstream_bundle_component_ItemEditBitstreamBundleComponent{constructor(viewContainerRef){this.viewContainerRef=viewContainerRef,this.dropObject=new core.EventEmitter}ngOnInit(){this.bundleNameColumn=this.columnSizes.combineColumns(0,2),this.viewContainerRef.createEmbeddedView(this.bundleView),this.itemPageRoute=Object(item_page_routing_paths.h)(this.item)}}function ItemBitstreamsComponent_div_0_button_12_Template(rf,ctx){if(1&rf){const _r10=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementStart"](0,"button",17),core["\u0275\u0275listener"]("click",(function ItemBitstreamsComponent_div_0_button_12_Template_button_click_0_listener(){core["\u0275\u0275restoreView"](_r10);return core["\u0275\u0275nextContext"](2).reinstate()})),core["\u0275\u0275element"](1,"i",18),core["\u0275\u0275text"](2,"\n      "),core["\u0275\u0275elementStart"](3,"span",5),core["\u0275\u0275text"](4),core["\u0275\u0275pipe"](5,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](6,"\n    "),core["\u0275\u0275elementEnd"]()}2&rf&&(core["\u0275\u0275advance"](4),core["\u0275\u0275textInterpolate1"]("\xa0",core["\u0275\u0275pipeBind1"](5,1,"item.edit.bitstreams.reinstate-button"),""))}function ItemBitstreamsComponent_div_0_button_24_Template(rf,ctx){if(1&rf){const _r12=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementStart"](0,"button",19),core["\u0275\u0275listener"]("click",(function ItemBitstreamsComponent_div_0_button_24_Template_button_click_0_listener(){core["\u0275\u0275restoreView"](_r12);return core["\u0275\u0275nextContext"](2).discard()})),core["\u0275\u0275pipe"](1,"async"),core["\u0275\u0275element"](2,"i",20),core["\u0275\u0275text"](3,"\n      "),core["\u0275\u0275elementStart"](4,"span",5),core["\u0275\u0275text"](5),core["\u0275\u0275pipe"](6,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](7,"\n    "),core["\u0275\u0275elementEnd"]()}if(2&rf){const ctx_r3=core["\u0275\u0275nextContext"](2);core["\u0275\u0275property"]("disabled",!core["\u0275\u0275pipeBind1"](1,2,ctx_r3.hasChanges())||ctx_r3.submitting),core["\u0275\u0275advance"](5),core["\u0275\u0275textInterpolate1"]("\xa0",core["\u0275\u0275pipeBind1"](6,4,"item.edit.bitstreams.discard-button"),"")}}function ItemBitstreamsComponent_div_0_div_28_ds_item_edit_bitstream_bundle_23_Template(rf,ctx){if(1&rf){const _r16=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementStart"](0,"ds-item-edit-bitstream-bundle",24),core["\u0275\u0275listener"]("dropObject",(function ItemBitstreamsComponent_div_0_div_28_ds_item_edit_bitstream_bundle_23_Template_ds_item_edit_bitstream_bundle_dropObject_0_listener($event){core["\u0275\u0275restoreView"](_r16);const bundle_r14=ctx.$implicit;return core["\u0275\u0275nextContext"](3).dropBitstream(bundle_r14,$event)})),core["\u0275\u0275text"](1,"\n    "),core["\u0275\u0275elementEnd"]()}if(2&rf){const bundle_r14=ctx.$implicit,ctx_r13=core["\u0275\u0275nextContext"](3);core["\u0275\u0275property"]("bundle",bundle_r14)("item",ctx_r13.item)("columnSizes",ctx_r13.columnSizes)}}function ItemBitstreamsComponent_div_0_div_28_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"div",21),core["\u0275\u0275text"](1,"\n    "),core["\u0275\u0275elementStart"](2,"div",22),core["\u0275\u0275text"](3,"\n      "),core["\u0275\u0275elementStart"](4,"div"),core["\u0275\u0275text"](5,"\n        "),core["\u0275\u0275element"](6,"ds-item-edit-bitstream-drag-handle"),core["\u0275\u0275text"](7),core["\u0275\u0275pipe"](8,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](9,"\n      "),core["\u0275\u0275elementStart"](10,"div"),core["\u0275\u0275text"](11),core["\u0275\u0275pipe"](12,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](13,"\n      "),core["\u0275\u0275elementStart"](14,"div"),core["\u0275\u0275text"](15),core["\u0275\u0275pipe"](16,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](17,"\n      "),core["\u0275\u0275elementStart"](18,"div"),core["\u0275\u0275text"](19),core["\u0275\u0275pipe"](20,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](21,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](22,"\n    "),core["\u0275\u0275template"](23,ItemBitstreamsComponent_div_0_div_28_ds_item_edit_bitstream_bundle_23_Template,2,3,"ds-item-edit-bitstream-bundle",23),core["\u0275\u0275text"](24,"\n  "),core["\u0275\u0275elementEnd"]()),2&rf){const bundles_r1=core["\u0275\u0275nextContext"]().ngVar,ctx_r4=core["\u0275\u0275nextContext"]();core["\u0275\u0275advance"](4),core["\u0275\u0275classMapInterpolate1"]("",ctx_r4.columnSizes.columns[0].buildClasses()," row-element"),core["\u0275\u0275advance"](3),core["\u0275\u0275textInterpolate1"]("\n        ",core["\u0275\u0275pipeBind1"](8,17,"item.edit.bitstreams.headers.name"),"\n      "),core["\u0275\u0275advance"](3),core["\u0275\u0275classMapInterpolate1"]("",ctx_r4.columnSizes.columns[1].buildClasses()," row-element"),core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](12,19,"item.edit.bitstreams.headers.description")),core["\u0275\u0275advance"](3),core["\u0275\u0275classMapInterpolate1"]("",ctx_r4.columnSizes.columns[2].buildClasses()," text-center row-element"),core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](16,21,"item.edit.bitstreams.headers.format")),core["\u0275\u0275advance"](3),core["\u0275\u0275classMapInterpolate1"]("",ctx_r4.columnSizes.columns[3].buildClasses()," text-center row-element"),core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](20,23,"item.edit.bitstreams.headers.actions")),core["\u0275\u0275advance"](4),core["\u0275\u0275property"]("ngForOf",bundles_r1)}}function ItemBitstreamsComponent_div_0_div_30_Template(rf,ctx){1&rf&&(core["\u0275\u0275elementStart"](0,"div",25),core["\u0275\u0275text"](1),core["\u0275\u0275pipe"](2,"translate"),core["\u0275\u0275elementEnd"]()),2&rf&&(core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate1"]("\n    ",core["\u0275\u0275pipeBind1"](2,1,"item.edit.bitstreams.empty"),"\n  "))}function ItemBitstreamsComponent_div_0_ds_loading_32_Template(rf,ctx){1&rf&&(core["\u0275\u0275element"](0,"ds-loading",26),core["\u0275\u0275pipe"](1,"translate")),2&rf&&core["\u0275\u0275propertyInterpolate"]("message",core["\u0275\u0275pipeBind1"](1,1,"loading.bitstreams"))}function ItemBitstreamsComponent_div_0_button_38_Template(rf,ctx){if(1&rf){const _r19=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementStart"](0,"button",27),core["\u0275\u0275listener"]("click",(function ItemBitstreamsComponent_div_0_button_38_Template_button_click_0_listener(){core["\u0275\u0275restoreView"](_r19);return core["\u0275\u0275nextContext"](2).reinstate()})),core["\u0275\u0275element"](1,"i",18),core["\u0275\u0275text"](2,"\n        "),core["\u0275\u0275elementStart"](3,"span",5),core["\u0275\u0275text"](4),core["\u0275\u0275pipe"](5,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](6,"\n      "),core["\u0275\u0275elementEnd"]()}2&rf&&(core["\u0275\u0275advance"](4),core["\u0275\u0275textInterpolate1"]("\xa0",core["\u0275\u0275pipeBind1"](5,1,"item.edit.bitstreams.reinstate-button"),""))}function ItemBitstreamsComponent_div_0_button_50_Template(rf,ctx){if(1&rf){const _r21=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementStart"](0,"button",19),core["\u0275\u0275listener"]("click",(function ItemBitstreamsComponent_div_0_button_50_Template_button_click_0_listener(){core["\u0275\u0275restoreView"](_r21);return core["\u0275\u0275nextContext"](2).discard()})),core["\u0275\u0275pipe"](1,"async"),core["\u0275\u0275element"](2,"i",20),core["\u0275\u0275text"](3,"\n        "),core["\u0275\u0275elementStart"](4,"span",5),core["\u0275\u0275text"](5),core["\u0275\u0275pipe"](6,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](7,"\n      "),core["\u0275\u0275elementEnd"]()}if(2&rf){const ctx_r8=core["\u0275\u0275nextContext"](2);core["\u0275\u0275property"]("disabled",!core["\u0275\u0275pipeBind1"](1,2,ctx_r8.hasChanges())||ctx_r8.submitting),core["\u0275\u0275advance"](5),core["\u0275\u0275textInterpolate1"]("\xa0",core["\u0275\u0275pipeBind1"](6,4,"item.edit.bitstreams.discard-button"),"")}}item_edit_bitstream_bundle_component_ItemEditBitstreamBundleComponent.\u0275fac=function ItemEditBitstreamBundleComponent_Factory(t){return new(t||item_edit_bitstream_bundle_component_ItemEditBitstreamBundleComponent)(core["\u0275\u0275directiveInject"](core.ViewContainerRef))},item_edit_bitstream_bundle_component_ItemEditBitstreamBundleComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:item_edit_bitstream_bundle_component_ItemEditBitstreamBundleComponent,selectors:[["ds-item-edit-bitstream-bundle"]],viewQuery:function ItemEditBitstreamBundleComponent_Query(rf,ctx){if(1&rf&&core["\u0275\u0275viewQuery"](item_edit_bitstream_bundle_component_c0,3),2&rf){let _t;core["\u0275\u0275queryRefresh"](_t=core["\u0275\u0275loadQuery"]())&&(ctx.bundleView=_t.first)}},inputs:{bundle:"bundle",item:"item",columnSizes:"columnSizes"},outputs:{dropObject:"dropObject"},decls:3,vars:0,consts:[["bundleView",""],[1,"row","bundle-row"],[1,"float-left","d-flex","align-items-center"],[1,"btn-group","bundle-action-buttons"],[1,"btn","btn-outline-success","btn-sm",3,"routerLink","queryParams","title"],[1,"fas","fa-upload","fa-fw"],[3,"bundle","columnSizes","dropObject"]],template:function ItemEditBitstreamBundleComponent_Template(rf,ctx){1&rf&&(core["\u0275\u0275template"](0,ItemEditBitstreamBundleComponent_ng_template_0_Template,27,23,"ng-template",null,0,core["\u0275\u0275templateRefExtractor"]),core["\u0275\u0275text"](2,"\n"))},directives:[ItemEditBitstreamDragHandleComponent,fesm2015_router.h,paginated_drag_and_drop_bitstream_list_component_PaginatedDragAndDropBitstreamListComponent],pipes:[ngx_translate_core.d],styles:[".header-row[_ngcontent-%COMP%]{color:var(--bs-table-dark-color);background-color:var(--bs-table-dark-bg);border-color:var(--bs-table-dark-border-color)}.bundle-row[_ngcontent-%COMP%]{color:var(--bs-table-head-color);background-color:var(--bs-table-head-bg);border-color:var(--bs-table-border-color)}.row-element[_ngcontent-%COMP%]{padding:.75em;border-bottom:var(--bs-table-border-width) solid var(--bs-table-border-color)}.drag-handle[_ngcontent-%COMP%]{visibility:hidden}.bitstream-row-drag-handle[_ngcontent-%COMP%]:hover, .drag-handle[_ngcontent-%COMP%]:hover{cursor:move}[_nghost-%COMP%]     .bitstream-row-drag-handle:focus .drag-handle, [_nghost-%COMP%]     .bitstream-row:hover .drag-handle{visibility:visible!important}.cdk-drag-preview[_ngcontent-%COMP%]{margin-left:0;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12);box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%]{-webkit-transition:-webkit-transform .25s cubic-bezier(0,0,.2,1);transition:-webkit-transform .25s cubic-bezier(0,0,.2,1);transition:transform .25s cubic-bezier(0,0,.2,1);transition:transform .25s cubic-bezier(0,0,.2,1),-webkit-transform .25s cubic-bezier(0,0,.2,1)}.cdk-drop-list-dragging[_ngcontent-%COMP%]   .bitstream-row-drag-handle[_ngcontent-%COMP%], .cdk-drop-list-dragging[_ngcontent-%COMP%]   .drag-handle[_ngcontent-%COMP%]{cursor:-webkit-grabbing;cursor:grabbing}"]});const item_bitstreams_component_c0=function(a0){return[a0,"bitstreams","new"]};function ItemBitstreamsComponent_div_0_Template(rf,ctx){if(1&rf){const _r23=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementStart"](0,"div",1),core["\u0275\u0275text"](1,"\n  "),core["\u0275\u0275elementStart"](2,"div",2),core["\u0275\u0275text"](3,"\n    "),core["\u0275\u0275elementStart"](4,"button",3),core["\u0275\u0275element"](5,"i",4),core["\u0275\u0275text"](6,"\n      "),core["\u0275\u0275elementStart"](7,"span",5),core["\u0275\u0275text"](8),core["\u0275\u0275pipe"](9,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](10,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](11,"\n    "),core["\u0275\u0275template"](12,ItemBitstreamsComponent_div_0_button_12_Template,7,3,"button",6),core["\u0275\u0275pipe"](13,"async"),core["\u0275\u0275text"](14,"\n    "),core["\u0275\u0275elementStart"](15,"button",7),core["\u0275\u0275listener"]("click",(function ItemBitstreamsComponent_div_0_Template_button_click_15_listener(){core["\u0275\u0275restoreView"](_r23);return core["\u0275\u0275nextContext"]().submit()})),core["\u0275\u0275pipe"](16,"async"),core["\u0275\u0275element"](17,"i",8),core["\u0275\u0275text"](18,"\n      "),core["\u0275\u0275elementStart"](19,"span",5),core["\u0275\u0275text"](20),core["\u0275\u0275pipe"](21,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](22,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](23,"\n    "),core["\u0275\u0275template"](24,ItemBitstreamsComponent_div_0_button_24_Template,8,6,"button",9),core["\u0275\u0275pipe"](25,"async"),core["\u0275\u0275text"](26,"\n  "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](27,"\n\n  "),core["\u0275\u0275template"](28,ItemBitstreamsComponent_div_0_div_28_Template,25,25,"div",10),core["\u0275\u0275text"](29,"\n  "),core["\u0275\u0275template"](30,ItemBitstreamsComponent_div_0_div_30_Template,3,3,"div",11),core["\u0275\u0275text"](31,"\n  "),core["\u0275\u0275template"](32,ItemBitstreamsComponent_div_0_ds_loading_32_Template,2,3,"ds-loading",12),core["\u0275\u0275text"](33,"\n\n  "),core["\u0275\u0275elementStart"](34,"div",13),core["\u0275\u0275text"](35,"\n    "),core["\u0275\u0275elementStart"](36,"div",14),core["\u0275\u0275text"](37,"\n      "),core["\u0275\u0275template"](38,ItemBitstreamsComponent_div_0_button_38_Template,7,3,"button",15),core["\u0275\u0275pipe"](39,"async"),core["\u0275\u0275text"](40,"\n      "),core["\u0275\u0275elementStart"](41,"button",16),core["\u0275\u0275listener"]("click",(function ItemBitstreamsComponent_div_0_Template_button_click_41_listener(){core["\u0275\u0275restoreView"](_r23);return core["\u0275\u0275nextContext"]().submit()})),core["\u0275\u0275pipe"](42,"async"),core["\u0275\u0275element"](43,"i",8),core["\u0275\u0275text"](44,"\n        "),core["\u0275\u0275elementStart"](45,"span",5),core["\u0275\u0275text"](46),core["\u0275\u0275pipe"](47,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](48,"\n      "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](49,"\n      "),core["\u0275\u0275template"](50,ItemBitstreamsComponent_div_0_button_50_Template,8,6,"button",9),core["\u0275\u0275pipe"](51,"async"),core["\u0275\u0275text"](52,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](53,"\n  "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](54,"\n"),core["\u0275\u0275elementEnd"]()}if(2&rf){const bundles_r1=ctx.ngVar,ctx_r0=core["\u0275\u0275nextContext"]();core["\u0275\u0275advance"](4),core["\u0275\u0275property"]("routerLink",core["\u0275\u0275pureFunction1"](31,item_bitstreams_component_c0,ctx_r0.itemPageRoute)),core["\u0275\u0275advance"](4),core["\u0275\u0275textInterpolate1"]("\xa0",core["\u0275\u0275pipeBind1"](9,13,"item.edit.bitstreams.upload-button"),""),core["\u0275\u0275advance"](4),core["\u0275\u0275property"]("ngIf",core["\u0275\u0275pipeBind1"](13,15,ctx_r0.isReinstatable())),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("disabled",!core["\u0275\u0275pipeBind1"](16,17,ctx_r0.hasChanges())||ctx_r0.submitting),core["\u0275\u0275advance"](5),core["\u0275\u0275textInterpolate1"]("\xa0",core["\u0275\u0275pipeBind1"](21,19,"item.edit.bitstreams.save-button"),""),core["\u0275\u0275advance"](4),core["\u0275\u0275property"]("ngIf",!core["\u0275\u0275pipeBind1"](25,21,ctx_r0.isReinstatable())),core["\u0275\u0275advance"](4),core["\u0275\u0275property"]("ngIf",ctx_r0.item&&(null==bundles_r1?null:bundles_r1.length)>0),core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",0===(null==bundles_r1?null:bundles_r1.length)),core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",!bundles_r1),core["\u0275\u0275advance"](6),core["\u0275\u0275property"]("ngIf",core["\u0275\u0275pipeBind1"](39,23,ctx_r0.isReinstatable())),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("disabled",!core["\u0275\u0275pipeBind1"](42,25,ctx_r0.hasChanges())||ctx_r0.submitting),core["\u0275\u0275advance"](5),core["\u0275\u0275textInterpolate1"]("\xa0",core["\u0275\u0275pipeBind1"](47,27,"item.edit.bitstreams.save-button"),""),core["\u0275\u0275advance"](4),core["\u0275\u0275property"]("ngIf",!core["\u0275\u0275pipeBind1"](51,29,ctx_r0.isReinstatable()))}}class item_bitstreams_component_ItemBitstreamsComponent extends abstract_item_update_component.a{constructor(itemService,objectUpdatesService,router,notificationsService,translateService,route,bitstreamService,objectCache,requestService,cdRef,bundleService,zone){super(itemService,objectUpdatesService,router,notificationsService,translateService,route),this.itemService=itemService,this.objectUpdatesService=objectUpdatesService,this.router=router,this.notificationsService=notificationsService,this.translateService=translateService,this.route=route,this.bitstreamService=bitstreamService,this.objectCache=objectCache,this.requestService=requestService,this.cdRef=cdRef,this.bundleService=bundleService,this.zone=zone,this.bundlesOptions={id:"bundles-pagination-options",currentPage:1,pageSize:9999},this.columnSizes=new responsive_table_sizes_ResponsiveTableSizes([new ResponsiveColumnSizes(2,2,3,4,4),new ResponsiveColumnSizes(2,3,3,3,3),new ResponsiveColumnSizes(2,2,2,2,2),new ResponsiveColumnSizes(6,5,4,3,3)]),this.submitting=!1}postItemInit(){this.bundles$=this.itemService.getBundles(this.item.id,new paginated_search_options_model.a({pagination:this.bundlesOptions})).pipe(Object(operators.i)(),Object(operators.o)(),Object(map.a)((bundlePage=>bundlePage.page)))}initializeNotificationsPrefix(){this.notificationsPrefix="item.edit.bitstreams.notifications."}submit(){this.submitting=!0;this.bundles$.pipe(Object(take.a)(1)).pipe(Object(switchMap.a)((bundles=>Object(zip.a)(...bundles.map((bundle=>this.objectUpdatesService.getFieldUpdates(bundle.self,[],!0)))))),Object(map.a)((fieldUpdates=>[].concat(...fieldUpdates.map((updates=>Object.values(updates).filter((fieldUpdate=>fieldUpdate.changeType===object_updates_actions.c.REMOVE))))))),Object(map.a)((fieldUpdates=>fieldUpdates.map((fieldUpdate=>fieldUpdate.field))))).pipe(Object(take.a)(1),Object(switchMap.a)((removedBistreams=>Object(empty_util.e)(removedBistreams)?Object(zip.a)(...removedBistreams.map((bitstream=>this.bitstreamService.delete(bitstream.id)))):Object(of.a)(void 0)))).pipe(Object(take.a)(1)).subscribe((responses=>{this.displayNotifications("item.edit.bitstreams.notifications.remove",responses),this.reset(),this.submitting=!1}))}dropBitstream(bundle,event){this.zone.runOutsideAngular((()=>{if(Object(empty_util.b)(event)&&Object(empty_util.b)(event.fromIndex)&&Object(empty_util.b)(event.toIndex)&&Object(empty_util.b)(event.finish)){const moveOperation={op:"move",from:`/_links/bitstreams/${event.fromIndex}/href`,path:`/_links/bitstreams/${event.toIndex}/href`};this.bundleService.patch(bundle,[moveOperation]).pipe(Object(take.a)(1)).subscribe((response=>{this.zone.run((()=>{this.displayNotifications("item.edit.bitstreams.notifications.move",[response]),this.requestService.removeByHrefSubstring(bundle.self).pipe(Object(filter.a)((isCached=>isCached)),Object(take.a)(1)).subscribe((()=>event.finish()))}))}))}}))}displayNotifications(key,responses){if(Object(empty_util.e)(responses)){const failedResponses=responses.filter((response=>Object(empty_util.b)(response)&&response.hasFailed)),successfulResponses=responses.filter((response=>Object(empty_util.b)(response)&&response.hasSucceeded));failedResponses.forEach((response=>{this.notificationsService.error(this.translateService.instant(`${key}.failed.title`),response.errorMessage)})),successfulResponses.length>0&&this.notificationsService.success(this.translateService.instant(`${key}.saved.title`),this.translateService.instant(`${key}.saved.content`))}}discard(){const undoNotification=this.notificationsService.info(this.getNotificationTitle("discarded"),this.getNotificationContent("discarded"),{timeOut:this.discardTimeOut});this.objectUpdatesService.discardAllFieldUpdates(this.url,undoNotification)}reinstate(){this.bundles$.pipe(Object(take.a)(1)).subscribe((bundles=>{bundles.forEach((bundle=>{this.objectUpdatesService.reinstateFieldUpdates(bundle.self)}))}))}isReinstatable(){return this.bundles$.pipe(Object(switchMap.a)((bundles=>Object(zip.a)(...bundles.map((bundle=>this.objectUpdatesService.isReinstatable(bundle.self)))))),Object(map.a)((reinstatable=>reinstatable.includes(!0))))}hasChanges(){return this.bundles$.pipe(Object(switchMap.a)((bundles=>Object(zip.a)(...bundles.map((bundle=>this.objectUpdatesService.hasUpdates(bundle.self)))))),Object(map.a)((hasChanges=>hasChanges.includes(!0))))}reset(){this.refreshItemCache()}refreshItemCache(){this.bundles$.pipe(Object(take.a)(1)).subscribe((bundles=>{bundles.forEach((bundle=>{this.objectCache.remove(bundle.self),this.requestService.removeByHrefSubstring(bundle.self)})),this.objectCache.remove(this.item.self),this.requestService.removeByHrefSubstring(this.item.self)}))}ngOnDestroy(){this.itemUpdateSubscription&&this.itemUpdateSubscription.unsubscribe()}}item_bitstreams_component_ItemBitstreamsComponent.\u0275fac=function ItemBitstreamsComponent_Factory(t){return new(t||item_bitstreams_component_ItemBitstreamsComponent)(core["\u0275\u0275directiveInject"](item_data_service.a),core["\u0275\u0275directiveInject"](object_updates_service.a),core["\u0275\u0275directiveInject"](fesm2015_router.g),core["\u0275\u0275directiveInject"](notifications_service.a),core["\u0275\u0275directiveInject"](ngx_translate_core.e),core["\u0275\u0275directiveInject"](fesm2015_router.a),core["\u0275\u0275directiveInject"](bitstream_data_service.a),core["\u0275\u0275directiveInject"](object_cache_service.a),core["\u0275\u0275directiveInject"](request_service.a),core["\u0275\u0275directiveInject"](core.ChangeDetectorRef),core["\u0275\u0275directiveInject"](bundle_data_service.a),core["\u0275\u0275directiveInject"](core.NgZone))},item_bitstreams_component_ItemBitstreamsComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:item_bitstreams_component_ItemBitstreamsComponent,selectors:[["ds-item-bitstreams"]],features:[core["\u0275\u0275InheritDefinitionFeature"]],decls:3,vars:3,consts:[["class","item-bitstreams",4,"ngVar"],[1,"item-bitstreams"],[1,"button-row","top","d-flex","mt-2"],[1,"mr-auto","btn","btn-success",3,"routerLink"],[1,"fas","fa-upload"],[1,"d-none","d-sm-inline"],["class","btn btn-warning mr-1",3,"click",4,"ngIf"],[1,"btn","btn-primary","mr-1",3,"disabled","click"],[1,"fas","fa-save"],["class","btn btn-danger",3,"disabled","click",4,"ngIf"],["class","container table-bordered mt-4",4,"ngIf"],["class","alert alert-info w-100 d-inline-block mt-4","role","alert",4,"ngIf"],[3,"message",4,"ngIf"],[1,"button-row","bottom"],[1,"mt-4","float-right"],["class","btn btn-warning",3,"click",4,"ngIf"],[1,"btn","btn-primary",3,"disabled","click"],[1,"btn","btn-warning","mr-1",3,"click"],[1,"fas","fa-undo-alt"],[1,"btn","btn-danger",3,"disabled","click"],[1,"fas","fa-times"],[1,"container","table-bordered","mt-4"],[1,"row","header-row","font-weight-bold"],[3,"bundle","item","columnSizes","dropObject",4,"ngFor","ngForOf"],[3,"bundle","item","columnSizes","dropObject"],["role","alert",1,"alert","alert-info","w-100","d-inline-block","mt-4"],[3,"message"],[1,"btn","btn-warning",3,"click"]],template:function ItemBitstreamsComponent_Template(rf,ctx){1&rf&&(core["\u0275\u0275template"](0,ItemBitstreamsComponent_div_0_Template,55,33,"div",0),core["\u0275\u0275pipe"](1,"async"),core["\u0275\u0275text"](2,"\n")),2&rf&&core["\u0275\u0275property"]("ngVar",core["\u0275\u0275pipeBind1"](1,1,ctx.bundles$))},directives:[var_directive.a,fesm2015_router.h,common.NgIf,ItemEditBitstreamDragHandleComponent,common.NgForOf,item_edit_bitstream_bundle_component_ItemEditBitstreamBundleComponent,loading_component.a],pipes:[common.AsyncPipe,ngx_translate_core.d],styles:[".header-row[_ngcontent-%COMP%]{color:var(--bs-table-dark-color);background-color:var(--bs-table-dark-bg);border-color:var(--bs-table-dark-border-color)}.bundle-row[_ngcontent-%COMP%]{color:var(--bs-table-head-color);background-color:var(--bs-table-head-bg);border-color:var(--bs-table-border-color)}.row-element[_ngcontent-%COMP%]{padding:.75em;border-bottom:var(--bs-table-border-width) solid var(--bs-table-border-color)}.drag-handle[_ngcontent-%COMP%]{visibility:hidden}.bitstream-row-drag-handle[_ngcontent-%COMP%]:hover, .drag-handle[_ngcontent-%COMP%]:hover{cursor:move}[_nghost-%COMP%]     .bitstream-row-drag-handle:focus .drag-handle, [_nghost-%COMP%]     .bitstream-row:hover .drag-handle{visibility:visible!important}.cdk-drag-preview[_ngcontent-%COMP%]{margin-left:0;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12);box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%]{-webkit-transition:-webkit-transform .25s cubic-bezier(0,0,.2,1);transition:-webkit-transform .25s cubic-bezier(0,0,.2,1);transition:transform .25s cubic-bezier(0,0,.2,1);transition:transform .25s cubic-bezier(0,0,.2,1),-webkit-transform .25s cubic-bezier(0,0,.2,1)}.cdk-drop-list-dragging[_ngcontent-%COMP%]   .bitstream-row-drag-handle[_ngcontent-%COMP%], .cdk-drop-list-dragging[_ngcontent-%COMP%]   .drag-handle[_ngcontent-%COMP%]{cursor:-webkit-grabbing;cursor:grabbing}"]});var collection_data_service=__webpack_require__("DNva"),startWith=__webpack_require__("JX91"),dspace_object_type_model=__webpack_require__("QhmN"),search_configuration_service=__webpack_require__("joI/"),search_service=__webpack_require__("gWc+"),collection_select_component=__webpack_require__("f7iX"),search_form_component=__webpack_require__("DdXh");const item_collection_mapper_component_c0=["tabs"];function ItemCollectionMapperComponent_ng_template_27_Template(rf,ctx){if(1&rf){const _r4=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275text"](0,"\n            "),core["\u0275\u0275elementStart"](1,"div",10),core["\u0275\u0275text"](2,"\n              "),core["\u0275\u0275elementStart"](3,"ds-collection-select",11),core["\u0275\u0275listener"]("confirm",(function ItemCollectionMapperComponent_ng_template_27_Template_ds_collection_select_confirm_3_listener($event){core["\u0275\u0275restoreView"](_r4);return core["\u0275\u0275nextContext"]().removeMappings($event)}))("cancel",(function ItemCollectionMapperComponent_ng_template_27_Template_ds_collection_select_cancel_3_listener(){core["\u0275\u0275restoreView"](_r4);return core["\u0275\u0275nextContext"]().onCancel()})),core["\u0275\u0275pipe"](4,"async"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](5,"\n            "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](6,"\n          ")}if(2&rf){const ctx_r1=core["\u0275\u0275nextContext"]();let tmp_2_0=null;core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("key","browse")("dsoRD$",ctx_r1.itemCollectionsRD$)("paginationOptions",null==(tmp_2_0=core["\u0275\u0275pipeBind1"](4,6,ctx_r1.searchOptions$))?null:tmp_2_0.pagination)("confirmButton","item.edit.item-mapper.buttons.remove")("cancelButton","item.edit.item-mapper.cancel")("dangerConfirm",!0)}}function ItemCollectionMapperComponent_ng_template_36_div_12_Template(rf,ctx){if(1&rf){const _r9=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementStart"](0,"div"),core["\u0275\u0275text"](1,"\n              "),core["\u0275\u0275elementStart"](2,"ds-collection-select",17),core["\u0275\u0275listener"]("confirm",(function ItemCollectionMapperComponent_ng_template_36_div_12_Template_ds_collection_select_confirm_2_listener($event){core["\u0275\u0275restoreView"](_r9);return core["\u0275\u0275nextContext"](2).mapCollections($event)}))("cancel",(function ItemCollectionMapperComponent_ng_template_36_div_12_Template_ds_collection_select_cancel_2_listener(){core["\u0275\u0275restoreView"](_r9);return core["\u0275\u0275nextContext"](2).onCancel()})),core["\u0275\u0275pipe"](3,"async"),core["\u0275\u0275pipe"](4,"async"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](5,"\n            "),core["\u0275\u0275elementEnd"]()}if(2&rf){const ctx_r6=core["\u0275\u0275nextContext"](2);let tmp_2_0=null,tmp_3_0=null;core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("key","map")("dsoRD$",ctx_r6.mappedCollectionsRD$)("paginationOptions",null==(tmp_2_0=core["\u0275\u0275pipeBind1"](3,6,ctx_r6.searchOptions$))?null:tmp_2_0.pagination)("sortOptions",null==(tmp_3_0=core["\u0275\u0275pipeBind1"](4,8,ctx_r6.searchOptions$))?null:tmp_3_0.sort)("confirmButton","item.edit.item-mapper.buttons.add")("cancelButton","item.edit.item-mapper.cancel")}}function ItemCollectionMapperComponent_ng_template_36_div_14_Template(rf,ctx){1&rf&&(core["\u0275\u0275elementStart"](0,"div",18),core["\u0275\u0275text"](1),core["\u0275\u0275pipe"](2,"translate"),core["\u0275\u0275elementEnd"]()),2&rf&&(core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate1"]("\n              ",core["\u0275\u0275pipeBind1"](2,1,"item.edit.item-mapper.no-search"),"\n            "))}function ItemCollectionMapperComponent_ng_template_36_Template(rf,ctx){if(1&rf){const _r12=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275text"](0,"\n            "),core["\u0275\u0275elementStart"](1,"div",12),core["\u0275\u0275text"](2,"\n              "),core["\u0275\u0275elementStart"](3,"div",13),core["\u0275\u0275text"](4,"\n                "),core["\u0275\u0275elementStart"](5,"ds-search-form",14),core["\u0275\u0275listener"]("submitSearch",(function ItemCollectionMapperComponent_ng_template_36_Template_ds_search_form_submitSearch_5_listener(){core["\u0275\u0275restoreView"](_r12);return core["\u0275\u0275nextContext"]().performedSearch=!0})),core["\u0275\u0275pipe"](6,"async"),core["\u0275\u0275pipe"](7,"translate"),core["\u0275\u0275text"](8,"\n                "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](9,"\n              "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](10,"\n            "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](11,"\n\n            "),core["\u0275\u0275template"](12,ItemCollectionMapperComponent_ng_template_36_div_12_Template,6,10,"div",15),core["\u0275\u0275text"](13,"\n            "),core["\u0275\u0275template"](14,ItemCollectionMapperComponent_ng_template_36_div_14_Template,3,3,"div",16),core["\u0275\u0275text"](15,"\n          ")}if(2&rf){const ctx_r2=core["\u0275\u0275nextContext"]();let tmp_0_0=null;core["\u0275\u0275advance"](5),core["\u0275\u0275property"]("query",null==(tmp_0_0=core["\u0275\u0275pipeBind1"](6,6,ctx_r2.searchOptions$))?null:tmp_0_0.query)("currentUrl","./")("inPlaceSearch",!0)("searchPlaceholder",core["\u0275\u0275pipeBind1"](7,8,"item.edit.item-mapper.search-form.placeholder")),core["\u0275\u0275advance"](7),core["\u0275\u0275property"]("ngIf",ctx_r2.performedSearch),core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",!ctx_r2.performedSearch)}}const item_collection_mapper_component_c1=function(a0){return{name:a0}};class item_collection_mapper_component_ItemCollectionMapperComponent{constructor(route,router,searchConfigService,searchService,notificationsService,itemDataService,collectionDataService,translateService,dsoNameService){this.route=route,this.router=router,this.searchConfigService=searchConfigService,this.searchService=searchService,this.notificationsService=notificationsService,this.itemDataService=itemDataService,this.collectionDataService=collectionDataService,this.translateService=translateService,this.dsoNameService=dsoNameService,this.performedSearch=!1}ngOnInit(){this.itemRD$=this.route.parent.data.pipe(Object(take.a)(1),Object(map.a)((data=>data.dso))),this.itemName$=this.itemRD$.pipe(Object(filter.a)((rd=>Object(empty_util.b)(rd))),Object(map.a)((rd=>this.dsoNameService.getName(rd.payload)))),this.searchOptions$=this.searchConfigService.paginatedSearchOptions,this.loadCollectionLists()}loadCollectionLists(){console.log("loadCollectionLists"),this.shouldUpdate$=new internal_BehaviorSubject.a(!0),this.itemCollectionsRD$=Object(combineLatest.a)(this.itemRD$.pipe(Object(operators.j)()),this.shouldUpdate$).pipe(Object(switchMap.a)((([item,shouldUpdate])=>(!0===shouldUpdate&&this.shouldUpdate$.next(!1),this.collectionDataService.findAllByHref(this.itemDataService.getMappedCollectionsEndpoint(item.id),void 0,!shouldUpdate,!1).pipe(Object(operators.c)())))));const owningCollectionRD$=this.itemRD$.pipe(Object(operators.j)(),Object(switchMap.a)((item=>this.collectionDataService.findOwningCollectionFor(item))),Object(operators.c)()),itemCollectionsAndOptions$=Object(combineLatest.a)(this.itemCollectionsRD$,owningCollectionRD$,this.searchOptions$);this.mappedCollectionsRD$=itemCollectionsAndOptions$.pipe(Object(switchMap.a)((([itemCollectionsRD,owningCollectionRD,searchOptions])=>this.searchService.search(Object.assign(new paginated_search_options_model.a(searchOptions),{query:this.buildQuery([...itemCollectionsRD.payload.page,owningCollectionRD.payload],searchOptions.query),dsoTypes:[dspace_object_type_model.a.COLLECTION]}),1e4).pipe(Object(operators.y)(),Object(startWith.a)(void 0)))))}mapCollections(ids){const responses$=Object(combineLatest.a)([this.itemRD$.pipe(Object(operators.i)(),Object(map.a)((rd=>rd.payload)),Object(map.a)((item=>item.id))),this.itemCollectionsRD$.pipe(Object(operators.i)(),Object(map.a)((rd=>rd.payload.page)),Object(map.a)((collections=>collections.map((collection=>collection.id)))))]).pipe(Object(switchMap.a)((([itemId,excludingIds])=>Object(combineLatest.a)(this.filterIds(ids,excludingIds).map((id=>this.itemDataService.mapToCollection(itemId,id).pipe(Object(operators.g)())))))));this.showNotifications(responses$,"item.edit.item-mapper.notifications.add")}removeMappings(ids){const responses$=this.itemRD$.pipe(Object(operators.i)(),Object(map.a)((itemRD=>itemRD.payload.id)),Object(switchMap.a)((itemId=>Object(combineLatest.a)(ids.map((id=>this.itemDataService.removeMappingFromCollection(itemId,id).pipe(Object(operators.g)())))))));this.showNotifications(responses$,"item.edit.item-mapper.notifications.remove")}filterIds(ids,excluding){return ids.filter((id=>excluding.indexOf(id)<0))}showNotifications(responses$,messagePrefix){responses$.subscribe((responses=>{const successful=responses.filter((response=>response.hasSucceeded)),unsuccessful=responses.filter((response=>response.hasFailed));if(successful.length>0){Object(combineLatest.a)([this.translateService.get(`${messagePrefix}.success.head`),this.translateService.get(`${messagePrefix}.success.content`,{amount:successful.length})]).subscribe((([head,content])=>{this.notificationsService.success(head,content)})),this.shouldUpdate$.next(!0)}if(unsuccessful.length>0){Object(combineLatest.a)([this.translateService.get(`${messagePrefix}.error.head`),this.translateService.get(`${messagePrefix}.error.content`,{amount:unsuccessful.length})]).subscribe((([head,content])=>{this.notificationsService.error(head,content)}))}this.switchToFirstTab()}))}tabChange(event){this.performedSearch=!1,this.router.navigateByUrl(this.getCurrentUrl())}getCurrentUrl(){return this.router.url.indexOf("?")>-1?this.router.url.substring(0,this.router.url.indexOf("?")):this.router.url}buildQuery(collections,query){let result=query;for(const collection of collections)result=this.addExcludeCollection(collection.id,result);return result}addExcludeCollection(collectionId,query){const excludeQuery=`-search.resourceid:${collectionId}`;return Object(empty_util.e)(query)?`${query} AND ${excludeQuery}`:excludeQuery}switchToFirstTab(){this.tabs.select("browseTab")}onCancel(){this.itemRD$.pipe(Object(operators.i)(),Object(operators.o)(),Object(take.a)(1)).subscribe((item=>{this.router.navigate([Object(item_page_routing_paths.h)(item)])}))}}item_collection_mapper_component_ItemCollectionMapperComponent.\u0275fac=function ItemCollectionMapperComponent_Factory(t){return new(t||item_collection_mapper_component_ItemCollectionMapperComponent)(core["\u0275\u0275directiveInject"](fesm2015_router.a),core["\u0275\u0275directiveInject"](fesm2015_router.g),core["\u0275\u0275directiveInject"](search_configuration_service.a),core["\u0275\u0275directiveInject"](search_service.a),core["\u0275\u0275directiveInject"](notifications_service.a),core["\u0275\u0275directiveInject"](item_data_service.a),core["\u0275\u0275directiveInject"](collection_data_service.a),core["\u0275\u0275directiveInject"](ngx_translate_core.e),core["\u0275\u0275directiveInject"](dso_name_service.a))},item_collection_mapper_component_ItemCollectionMapperComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:item_collection_mapper_component_ItemCollectionMapperComponent,selectors:[["ds-item-collection-mapper"]],viewQuery:function ItemCollectionMapperComponent_Query(rf,ctx){if(1&rf&&core["\u0275\u0275viewQuery"](item_collection_mapper_component_c0,1),2&rf){let _t;core["\u0275\u0275queryRefresh"](_t=core["\u0275\u0275loadQuery"]())&&(ctx.tabs=_t.first)}},decls:45,vars:24,consts:[[1,"container"],[1,"row"],[1,"col-12"],["id","item-name",3,"innerHTML"],["ngbNav","",1,"nav-tabs",3,"destroyOnHide","navChange"],["tabs","ngbNav"],[3,"ngbNavItem"],["ngbNavLink",""],["ngbNavContent",""],[3,"ngbNavOutlet"],[1,"mt-2"],[1,"mt-2",3,"key","dsoRD$","paginationOptions","confirmButton","cancelButton","dangerConfirm","confirm","cancel"],[1,"row","mt-2"],[1,"col-12","col-lg-6"],["id","search-form",3,"query","currentUrl","inPlaceSearch","searchPlaceholder","submitSearch"],[4,"ngIf"],["class","alert alert-info w-100","role","alert",4,"ngIf"],[1,"mt-2",3,"key","dsoRD$","paginationOptions","sortOptions","confirmButton","cancelButton","confirm","cancel"],["role","alert",1,"alert","alert-info","w-100"]],template:function ItemCollectionMapperComponent_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"div",0),core["\u0275\u0275text"](1,"\n  "),core["\u0275\u0275elementStart"](2,"div",1),core["\u0275\u0275text"](3,"\n    "),core["\u0275\u0275elementStart"](4,"div",2),core["\u0275\u0275text"](5,"\n      "),core["\u0275\u0275elementStart"](6,"h2"),core["\u0275\u0275text"](7),core["\u0275\u0275pipe"](8,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](9,"\n      "),core["\u0275\u0275element"](10,"p",3),core["\u0275\u0275pipe"](11,"translate"),core["\u0275\u0275pipe"](12,"async"),core["\u0275\u0275text"](13,"\n      "),core["\u0275\u0275elementStart"](14,"p"),core["\u0275\u0275text"](15),core["\u0275\u0275pipe"](16,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](17,"\n\n      "),core["\u0275\u0275elementStart"](18,"ul",4,5),core["\u0275\u0275listener"]("navChange",(function ItemCollectionMapperComponent_Template_ul_navChange_18_listener($event){return ctx.tabChange($event)})),core["\u0275\u0275text"](20,"\n        "),core["\u0275\u0275elementStart"](21,"li",6),core["\u0275\u0275text"](22,"\n          "),core["\u0275\u0275elementStart"](23,"a",7),core["\u0275\u0275text"](24),core["\u0275\u0275pipe"](25,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](26,"\n          "),core["\u0275\u0275template"](27,ItemCollectionMapperComponent_ng_template_27_Template,7,8,"ng-template",8),core["\u0275\u0275text"](28,"\n        "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](29,"\n        "),core["\u0275\u0275elementStart"](30,"li",6),core["\u0275\u0275text"](31,"\n          "),core["\u0275\u0275elementStart"](32,"a",7),core["\u0275\u0275text"](33),core["\u0275\u0275pipe"](34,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](35,"\n          "),core["\u0275\u0275template"](36,ItemCollectionMapperComponent_ng_template_36_Template,16,10,"ng-template",8),core["\u0275\u0275text"](37,"\n        "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](38,"\n      "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](39,"\n      "),core["\u0275\u0275element"](40,"div",9),core["\u0275\u0275text"](41,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](42,"\n  "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](43,"\n"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](44,"\n")),2&rf){const _r0=core["\u0275\u0275reference"](19);core["\u0275\u0275advance"](7),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](8,9,"item.edit.item-mapper.head")),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("innerHTML",core["\u0275\u0275pipeBind2"](11,11,"item.edit.item-mapper.item",core["\u0275\u0275pureFunction1"](22,item_collection_mapper_component_c1,core["\u0275\u0275pipeBind1"](12,14,ctx.itemName$))),core["\u0275\u0275sanitizeHtml"]),core["\u0275\u0275advance"](5),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](16,16,"item.edit.item-mapper.description")),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("destroyOnHide",!0),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("ngbNavItem","browseTab"),core["\u0275\u0275advance"](3),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](25,18,"item.edit.item-mapper.tabs.browse")),core["\u0275\u0275advance"](6),core["\u0275\u0275property"]("ngbNavItem","mapTab"),core["\u0275\u0275advance"](3),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](34,20,"item.edit.item-mapper.tabs.map")),core["\u0275\u0275advance"](7),core["\u0275\u0275property"]("ngbNavOutlet",_r0)}},directives:[ng_bootstrap.t,ng_bootstrap.v,ng_bootstrap.w,ng_bootstrap.u,ng_bootstrap.y,collection_select_component.a,search_form_component.a,common.NgIf],pipes:[ngx_translate_core.d,common.AsyncPipe],styles:[""],data:{animation:[fade.a,fade.c]},changeDetection:0});var authorized_collection_selector_component=__webpack_require__("zdyR"),fesm2015_forms=__webpack_require__("3Pt+");function ItemMoveComponent_span_68_Template(rf,ctx){1&rf&&(core["\u0275\u0275elementStart"](0,"span"),core["\u0275\u0275text"](1,"\n                "),core["\u0275\u0275element"](2,"i",17),core["\u0275\u0275text"](3),core["\u0275\u0275pipe"](4,"translate"),core["\u0275\u0275elementEnd"]()),2&rf&&(core["\u0275\u0275advance"](3),core["\u0275\u0275textInterpolate1"](" ",core["\u0275\u0275pipeBind1"](4,1,"item.edit.move.save-button"),"\n              "))}function ItemMoveComponent_span_70_Template(rf,ctx){1&rf&&(core["\u0275\u0275elementStart"](0,"span"),core["\u0275\u0275text"](1,"\n                "),core["\u0275\u0275element"](2,"i",18),core["\u0275\u0275text"](3),core["\u0275\u0275pipe"](4,"translate"),core["\u0275\u0275elementEnd"]()),2&rf&&(core["\u0275\u0275advance"](3),core["\u0275\u0275textInterpolate1"](" ",core["\u0275\u0275pipeBind1"](4,1,"item.edit.move.processing"),"\n              "))}const item_move_component_c0=function(a0){return{id:a0}},item_move_component_c1=function(){return{type:"collection"}},item_move_component_c2=function(a0){return[a0,"edit"]};class item_move_component_ItemMoveComponent{constructor(route,router,notificationsService,itemDataService,searchService,translateService,requestService){this.route=route,this.router=router,this.notificationsService=notificationsService,this.itemDataService=itemDataService,this.searchService=searchService,this.translateService=translateService,this.requestService=requestService,this.selectorType=dspace_object_type_model.a.COLLECTION,this.inheritPolicies=!1,this.canSubmit=!1,this.processing=!1,this.COLLECTIONS=[dspace_object_type_model.a.COLLECTION]}ngOnInit(){this.itemRD$=this.route.data.pipe(Object(map.a)((data=>data.dso)),Object(operators.i)()),this.itemPageRoute$=this.itemRD$.pipe(Object(operators.d)(),Object(map.a)((item=>Object(item_page_routing_paths.h)(item)))),this.itemRD$.subscribe((rd=>{this.item=rd.payload})),this.itemRD$.pipe(Object(operators.i)(),Object(operators.o)(),Object(switchMap.a)((item=>item.owningCollection)),Object(operators.i)(),Object(operators.o)()).subscribe((collection=>{this.originalCollection=collection}))}selectDso(data){this.selectedCollection=data,this.selectedCollectionName=data.name,this.canSubmit=!0}getCurrentUrl(){return this.router.url}moveToCollection(){this.processing=!0;const move$=this.itemDataService.moveToCollection(this.item.id,this.selectedCollection).pipe(Object(operators.g)());move$.subscribe((response=>{response.hasSucceeded?this.notificationsService.success(this.translateService.get("item.edit.move.success")):this.notificationsService.error(this.translateService.get("item.edit.move.error"))})),move$.pipe(Object(switchMap.a)((()=>this.requestService.setStaleByHrefSubstring(this.item.id))),Object(switchMap.a)((()=>this.itemDataService.findById(this.item.id,!1,!0,Object(follow_link_config_model.a)("owningCollection")))),Object(operators.g)()).subscribe((()=>{this.processing=!1,this.router.navigate([Object(item_page_routing_paths.e)(this.item)])}))}discard(){this.selectedCollection=null,this.canSubmit=!1}get canMove(){var _a;return this.canSubmit&&(null===(_a=this.selectedCollection)||void 0===_a?void 0:_a.id)!==this.originalCollection.id}}item_move_component_ItemMoveComponent.\u0275fac=function ItemMoveComponent_Factory(t){return new(t||item_move_component_ItemMoveComponent)(core["\u0275\u0275directiveInject"](fesm2015_router.a),core["\u0275\u0275directiveInject"](fesm2015_router.g),core["\u0275\u0275directiveInject"](notifications_service.a),core["\u0275\u0275directiveInject"](item_data_service.a),core["\u0275\u0275directiveInject"](search_service.a),core["\u0275\u0275directiveInject"](ngx_translate_core.e),core["\u0275\u0275directiveInject"](request_service.a))},item_move_component_ItemMoveComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:item_move_component_ItemMoveComponent,selectors:[["ds-item-move"]],decls:84,vars:40,consts:[[1,"container"],[1,"row"],[1,"col-12"],[1,"card","mb-3"],[1,"card-header"],[1,"card-body"],[3,"types","currentDSOId","onSelect"],["type","checkbox","name","tc","id","inheritPoliciesCheckbox",3,"ngModel","ngModelChange"],["for","inheritPoliciesCheckbox"],[1,"button-row","bottom"],[1,"float-right"],[1,"btn","btn-outline-secondary",3,"routerLink"],[1,"fas","fa-arrow-left"],[1,"btn","btn-primary","mr-0",3,"disabled","click"],[4,"ngIf"],[1,"btn","btn-danger",3,"disabled","click"],[1,"fas","fa-times"],[1,"fas","fa-save"],[1,"fas","fa-circle-notch","fa-spin"]],template:function ItemMoveComponent_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"div",0),core["\u0275\u0275text"](1,"\n    "),core["\u0275\u0275elementStart"](2,"div",1),core["\u0275\u0275text"](3,"\n        "),core["\u0275\u0275elementStart"](4,"div",2),core["\u0275\u0275text"](5,"\n            "),core["\u0275\u0275elementStart"](6,"h2"),core["\u0275\u0275text"](7),core["\u0275\u0275pipe"](8,"translate"),core["\u0275\u0275pipe"](9,"async"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](10,"\n            "),core["\u0275\u0275elementStart"](11,"p"),core["\u0275\u0275text"](12),core["\u0275\u0275pipe"](13,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](14,"\n            "),core["\u0275\u0275elementStart"](15,"div",1),core["\u0275\u0275text"](16,"\n                "),core["\u0275\u0275elementStart"](17,"div",2),core["\u0275\u0275text"](18,"\n                  "),core["\u0275\u0275elementStart"](19,"div",3),core["\u0275\u0275text"](20,"\n                    "),core["\u0275\u0275elementStart"](21,"div",4),core["\u0275\u0275text"](22),core["\u0275\u0275pipe"](23,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](24,"\n                    "),core["\u0275\u0275elementStart"](25,"div",5),core["\u0275\u0275text"](26,"\n                      "),core["\u0275\u0275elementStart"](27,"ds-authorized-collection-selector",6),core["\u0275\u0275listener"]("onSelect",(function ItemMoveComponent_Template_ds_authorized_collection_selector_onSelect_27_listener($event){return ctx.selectDso($event)})),core["\u0275\u0275text"](28,"\n                      "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](29,"\n                    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](30,"\n                    "),core["\u0275\u0275element"](31,"div"),core["\u0275\u0275text"](32,"\n                  "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](33,"\n                "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](34,"\n            "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](35,"\n            "),core["\u0275\u0275elementStart"](36,"div",1),core["\u0275\u0275text"](37,"\n                "),core["\u0275\u0275elementStart"](38,"div",2),core["\u0275\u0275text"](39,"\n                    "),core["\u0275\u0275elementStart"](40,"p"),core["\u0275\u0275text"](41,"\n                        "),core["\u0275\u0275elementStart"](42,"input",7),core["\u0275\u0275listener"]("ngModelChange",(function ItemMoveComponent_Template_input_ngModelChange_42_listener($event){return ctx.inheritPolicies=$event})),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](43,"\n                        "),core["\u0275\u0275elementStart"](44,"label",8),core["\u0275\u0275text"](45),core["\u0275\u0275pipe"](46,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](47,"\n                    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](48,"\n                    "),core["\u0275\u0275elementStart"](49,"p"),core["\u0275\u0275text"](50),core["\u0275\u0275pipe"](51,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](52,"\n                "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](53,"\n            "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](54,"\n\n          "),core["\u0275\u0275elementStart"](55,"div",9),core["\u0275\u0275text"](56,"\n            "),core["\u0275\u0275elementStart"](57,"div",10),core["\u0275\u0275text"](58,"\n              "),core["\u0275\u0275elementStart"](59,"button",11),core["\u0275\u0275pipe"](60,"async"),core["\u0275\u0275text"](61,"\n                "),core["\u0275\u0275element"](62,"i",12),core["\u0275\u0275text"](63),core["\u0275\u0275pipe"](64,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](65,"\n              "),core["\u0275\u0275elementStart"](66,"button",13),core["\u0275\u0275listener"]("click",(function ItemMoveComponent_Template_button_click_66_listener(){return ctx.moveToCollection()})),core["\u0275\u0275text"](67,"\n              "),core["\u0275\u0275template"](68,ItemMoveComponent_span_68_Template,5,3,"span",14),core["\u0275\u0275text"](69,"\n                "),core["\u0275\u0275template"](70,ItemMoveComponent_span_70_Template,5,3,"span",14),core["\u0275\u0275text"](71,"\n              "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](72,"\n              "),core["\u0275\u0275elementStart"](73,"button",15),core["\u0275\u0275listener"]("click",(function ItemMoveComponent_Template_button_click_73_listener(){return ctx.discard()})),core["\u0275\u0275text"](74,"\n                "),core["\u0275\u0275element"](75,"i",16),core["\u0275\u0275text"](76),core["\u0275\u0275pipe"](77,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](78,"\n            "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](79,"\n          "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](80,"\n        "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](81,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](82,"\n"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](83,"\n")),2&rf){let tmp_0_0=null;core["\u0275\u0275advance"](7),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind2"](8,15,"item.edit.move.head",core["\u0275\u0275pureFunction1"](35,item_move_component_c0,null==(tmp_0_0=core["\u0275\u0275pipeBind1"](9,18,ctx.itemRD$))||null==tmp_0_0.payload?null:tmp_0_0.payload.handle))),core["\u0275\u0275advance"](5),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](13,20,"item.edit.move.description")),core["\u0275\u0275advance"](10),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind2"](23,22,"dso-selector.placeholder",core["\u0275\u0275pureFunction0"](37,item_move_component_c1))),core["\u0275\u0275advance"](5),core["\u0275\u0275property"]("types",ctx.COLLECTIONS)("currentDSOId",ctx.selectedCollection?ctx.selectedCollection.id:ctx.originalCollection.id),core["\u0275\u0275advance"](15),core["\u0275\u0275property"]("ngModel",ctx.inheritPolicies),core["\u0275\u0275advance"](3),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](46,25,"item.edit.move.inheritpolicies.checkbox")),core["\u0275\u0275advance"](5),core["\u0275\u0275textInterpolate1"]("\n                        ",core["\u0275\u0275pipeBind1"](51,27,"item.edit.move.inheritpolicies.description"),"\n                    "),core["\u0275\u0275advance"](9),core["\u0275\u0275property"]("routerLink",core["\u0275\u0275pureFunction1"](38,item_move_component_c2,core["\u0275\u0275pipeBind1"](60,29,ctx.itemPageRoute$))),core["\u0275\u0275advance"](4),core["\u0275\u0275textInterpolate1"](" ",core["\u0275\u0275pipeBind1"](64,31,"item.edit.move.cancel"),"\n              "),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("disabled",!ctx.canMove),core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",!ctx.processing),core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",ctx.processing),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("disabled",!ctx.canSubmit),core["\u0275\u0275advance"](3),core["\u0275\u0275textInterpolate1"](" ",core["\u0275\u0275pipeBind1"](77,33,"item.edit.move.discard-button"),"\n              ")}},directives:[authorized_collection_selector_component.a,fesm2015_forms.CheckboxControlValueAccessor,fesm2015_forms.NgControlStatus,fesm2015_forms.NgModel,fesm2015_router.h,common.NgIf],pipes:[ngx_translate_core.d,common.AsyncPipe],encapsulation:2});var relationship_model=__webpack_require__("aFKe"),relationship_type_service=__webpack_require__("BK0m"),tap=__webpack_require__("vkgz"),dynamic_lookup_relation_modal_component=(__webpack_require__("e3cm"),__webpack_require__("rqai"),__webpack_require__("1Pbu")),relationship_options_model=__webpack_require__("kcku"),selectable_list_service=__webpack_require__("EGek");function VirtualMetadataComponent_ng_container_14_div_2_div_15_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"div"),core["\u0275\u0275text"](1,"\n                        "),core["\u0275\u0275elementStart"](2,"div",15),core["\u0275\u0275text"](3),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](4,"\n                        "),core["\u0275\u0275elementStart"](5,"div"),core["\u0275\u0275text"](6),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](7,"\n                    "),core["\u0275\u0275elementEnd"]()),2&rf){const metadata_r5=ctx.$implicit;core["\u0275\u0275advance"](3),core["\u0275\u0275textInterpolate1"]("\n                            ",metadata_r5.metadataField,"\n                        "),core["\u0275\u0275advance"](3),core["\u0275\u0275textInterpolate1"]("\n                            ",metadata_r5.metadataValue.value,"\n                        ")}}function VirtualMetadataComponent_ng_container_14_div_2_Template(rf,ctx){if(1&rf){const _r8=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementStart"](0,"div",9),core["\u0275\u0275listener"]("click",(function VirtualMetadataComponent_ng_container_14_div_2_Template_div_click_0_listener(){core["\u0275\u0275restoreView"](_r8);const selected_r3=ctx.ngVar,item_r1=core["\u0275\u0275nextContext"]().$implicit;return core["\u0275\u0275nextContext"]().setSelectedVirtualMetadataItem(item_r1,!selected_r3)})),core["\u0275\u0275text"](1,"\n                "),core["\u0275\u0275elementStart"](2,"div",10),core["\u0275\u0275text"](3,"\n                    "),core["\u0275\u0275elementStart"](4,"label"),core["\u0275\u0275text"](5,"\n                        "),core["\u0275\u0275element"](6,"input",11),core["\u0275\u0275text"](7,"\n                    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](8,"\n                "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](9,"\n                "),core["\u0275\u0275elementStart"](10,"div",12),core["\u0275\u0275text"](11,"\n                    "),core["\u0275\u0275elementStart"](12,"ds-listable-object-component-loader",13),core["\u0275\u0275text"](13,"\n                    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](14,"\n                    "),core["\u0275\u0275template"](15,VirtualMetadataComponent_ng_container_14_div_2_div_15_Template,8,2,"div",14),core["\u0275\u0275text"](16,"\n                "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](17,"\n            "),core["\u0275\u0275elementEnd"]()}if(2&rf){const selected_r3=ctx.ngVar,item_r1=core["\u0275\u0275nextContext"]().$implicit,ctx_r2=core["\u0275\u0275nextContext"]();core["\u0275\u0275advance"](6),core["\u0275\u0275property"]("checked",selected_r3),core["\u0275\u0275advance"](6),core["\u0275\u0275property"]("object",item_r1),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("ngForOf",ctx_r2.virtualMetadata.get(item_r1.uuid))}}function VirtualMetadataComponent_ng_container_14_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementContainerStart"](0),core["\u0275\u0275text"](1,"\n            "),core["\u0275\u0275template"](2,VirtualMetadataComponent_ng_container_14_div_2_Template,18,3,"div",8),core["\u0275\u0275pipe"](3,"async"),core["\u0275\u0275text"](4,"\n        "),core["\u0275\u0275elementContainerEnd"]()),2&rf){const item_r1=ctx.$implicit,ctx_r0=core["\u0275\u0275nextContext"]();core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngVar",core["\u0275\u0275pipeBind1"](3,1,ctx_r0.isSelectedVirtualMetadataItem(item_r1)))}}class virtual_metadata_component_VirtualMetadataComponent{constructor(objectUpdatesService){this.objectUpdatesService=objectUpdatesService,this.close=new core.EventEmitter,this.save=new core.EventEmitter,this.virtualMetadata=new Map}get items(){return[this.leftItem,this.rightItem]}getVirtualMetadata(item){return Object.entries(item.metadata).map((([key,value])=>value.filter((metadata=>!key.startsWith("relation")&&metadata.authority&&metadata.authority.endsWith(this.relationshipId))).map((metadata=>({metadataField:key,metadataValue:metadata}))))).reduce(((previous,current)=>previous.concat(current)),[])}setSelectedVirtualMetadataItem(item,selected){this.objectUpdatesService.setSelectedVirtualMetadata(this.url,this.relationshipId,item.uuid,selected)}isSelectedVirtualMetadataItem(item){return this.objectUpdatesService.isSelectedVirtualMetadata(this.url,this.relationshipId,item.uuid)}trackItem(index,item){return item&&item.uuid}ngOnInit(){this.items.forEach((item=>{this.virtualMetadata.set(item.uuid,this.getVirtualMetadata(item))}))}}function EditRelationshipComponent_div_0_Template(rf,ctx){if(1&rf){const _r4=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementStart"](0,"div",2),core["\u0275\u0275text"](1,"\n  "),core["\u0275\u0275elementStart"](2,"div",3),core["\u0275\u0275text"](3,"\n    "),core["\u0275\u0275elementStart"](4,"ds-listable-object-component-loader",4),core["\u0275\u0275pipe"](5,"async"),core["\u0275\u0275text"](6,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](7,"\n  "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](8,"\n  "),core["\u0275\u0275elementStart"](9,"div",5),core["\u0275\u0275text"](10,"\n    "),core["\u0275\u0275elementStart"](11,"div",6),core["\u0275\u0275text"](12,"\n      "),core["\u0275\u0275elementStart"](13,"button",7),core["\u0275\u0275listener"]("click",(function EditRelationshipComponent_div_0_Template_button_click_13_listener(){core["\u0275\u0275restoreView"](_r4);const ctx_r3=core["\u0275\u0275nextContext"](),_r1=core["\u0275\u0275reference"](4);return ctx_r3.openVirtualMetadataModal(_r1)})),core["\u0275\u0275pipe"](14,"translate"),core["\u0275\u0275text"](15,"\n        "),core["\u0275\u0275element"](16,"i",8),core["\u0275\u0275text"](17,"\n      "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](18,"\n      "),core["\u0275\u0275elementStart"](19,"button",9),core["\u0275\u0275listener"]("click",(function EditRelationshipComponent_div_0_Template_button_click_19_listener(){core["\u0275\u0275restoreView"](_r4);return core["\u0275\u0275nextContext"]().undo()})),core["\u0275\u0275pipe"](20,"translate"),core["\u0275\u0275text"](21,"\n        "),core["\u0275\u0275element"](22,"i",10),core["\u0275\u0275text"](23,"\n      "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](24,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](25,"\n  "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](26,"\n"),core["\u0275\u0275elementEnd"]()}if(2&rf){const ctx_r0=core["\u0275\u0275nextContext"]();core["\u0275\u0275advance"](4),core["\u0275\u0275property"]("object",core["\u0275\u0275pipeBind1"](5,7,ctx_r0.relatedItem$))("viewMode",ctx_r0.viewMode)("value",ctx_r0.nameVariant),core["\u0275\u0275advance"](9),core["\u0275\u0275propertyInterpolate"]("title",core["\u0275\u0275pipeBind1"](14,9,"item.edit.metadata.edit.buttons.remove")),core["\u0275\u0275property"]("disabled",!ctx_r0.canRemove()),core["\u0275\u0275advance"](6),core["\u0275\u0275propertyInterpolate"]("title",core["\u0275\u0275pipeBind1"](20,11,"item.edit.metadata.edit.buttons.undo")),core["\u0275\u0275property"]("disabled",!ctx_r0.canUndo())}}function EditRelationshipComponent_ng_template_3_Template(rf,ctx){if(1&rf){const _r7=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275text"](0,"\n  "),core["\u0275\u0275elementStart"](1,"ds-virtual-metadata",11),core["\u0275\u0275listener"]("close",(function EditRelationshipComponent_ng_template_3_Template_ds_virtual_metadata_close_1_listener(){core["\u0275\u0275restoreView"](_r7);return core["\u0275\u0275nextContext"]().closeVirtualMetadataModal()}))("save",(function EditRelationshipComponent_ng_template_3_Template_ds_virtual_metadata_save_1_listener(){core["\u0275\u0275restoreView"](_r7);return core["\u0275\u0275nextContext"]().remove()})),core["\u0275\u0275pipe"](2,"async"),core["\u0275\u0275pipe"](3,"async"),core["\u0275\u0275text"](4,"\n  "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](5,"\n")}if(2&rf){const ctx_r2=core["\u0275\u0275nextContext"]();core["\u0275\u0275advance"](1),core["\u0275\u0275property"]("relationshipId",ctx_r2.relationship.id)("leftItem",core["\u0275\u0275pipeBind1"](2,4,ctx_r2.leftItem$))("rightItem",core["\u0275\u0275pipeBind1"](3,6,ctx_r2.rightItem$))("url",ctx_r2.url)}}virtual_metadata_component_VirtualMetadataComponent.\u0275fac=function VirtualMetadataComponent_Factory(t){return new(t||virtual_metadata_component_VirtualMetadataComponent)(core["\u0275\u0275directiveInject"](object_updates_service.a))},virtual_metadata_component_VirtualMetadataComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:virtual_metadata_component_VirtualMetadataComponent,selectors:[["ds-virtual-metadata"]],inputs:{url:"url",relationshipId:"relationshipId",leftItem:"leftItem",rightItem:"rightItem"},outputs:{close:"close",save:"save"},decls:27,vars:8,consts:[[1,"modal-header"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"d-flex","flex-row-reverse","m-2"],[1,"btn","btn-primary","save",3,"click"],[1,"fas","fa-save"],["class","item d-flex flex-row",3,"click",4,"ngVar"],[1,"item","d-flex","flex-row",3,"click"],[1,"m-2"],["type","checkbox",1,"select",3,"checked"],[1,"flex-column"],[3,"object"],[4,"ngFor","ngForOf"],[1,"font-weight-bold"]],template:function VirtualMetadataComponent_Template(rf,ctx){1&rf&&(core["\u0275\u0275elementStart"](0,"div"),core["\u0275\u0275text"](1,"\n    "),core["\u0275\u0275elementStart"](2,"div",0),core["\u0275\u0275text"](3),core["\u0275\u0275pipe"](4,"translate"),core["\u0275\u0275elementStart"](5,"button",1),core["\u0275\u0275listener"]("click",(function VirtualMetadataComponent_Template_button_click_5_listener(){return ctx.close.emit()})),core["\u0275\u0275text"](6,"\n            "),core["\u0275\u0275elementStart"](7,"span",2),core["\u0275\u0275text"](8,"\xd7"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](9,"\n        "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](10,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](11,"\n    "),core["\u0275\u0275elementStart"](12,"div",3),core["\u0275\u0275text"](13,"\n        "),core["\u0275\u0275template"](14,VirtualMetadataComponent_ng_container_14_Template,5,3,"ng-container",4),core["\u0275\u0275text"](15,"\n        "),core["\u0275\u0275elementStart"](16,"div",5),core["\u0275\u0275text"](17,"\n            "),core["\u0275\u0275elementStart"](18,"button",6),core["\u0275\u0275listener"]("click",(function VirtualMetadataComponent_Template_button_click_18_listener(){return ctx.save.emit()})),core["\u0275\u0275text"](19,"\n                "),core["\u0275\u0275element"](20,"i",7),core["\u0275\u0275text"](21),core["\u0275\u0275pipe"](22,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](23,"\n        "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](24,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](25,"\n"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](26,"\n")),2&rf&&(core["\u0275\u0275advance"](3),core["\u0275\u0275textInterpolate1"]("",core["\u0275\u0275pipeBind1"](4,4,"virtual-metadata.delete-relationship.modal-head"),"\n        "),core["\u0275\u0275advance"](11),core["\u0275\u0275property"]("ngForOf",ctx.items)("ngForTrackBy",ctx.trackItem),core["\u0275\u0275advance"](7),core["\u0275\u0275textInterpolate1"](" ",core["\u0275\u0275pipeBind1"](22,6,"item.edit.metadata.save-button"),"\n            "))},directives:[common.NgForOf,var_directive.a,listable_object_component_loader_component.a],pipes:[ngx_translate_core.d,common.AsyncPipe],encapsulation:2});class edit_relationship_component_EditRelationshipComponent{constructor(objectUpdatesService,modalService){this.objectUpdatesService=objectUpdatesService,this.modalService=modalService,this.viewMode=view_mode_model.a.ListElement}get relationship(){return this.update.relationship}get update(){return this.fieldUpdate.field}get nameVariant(){return this.update.nameVariant}ngOnChanges(){this.relationship&&(this.relationship.leftItem||this.relationship.rightItem)?(this.leftItem$=this.relationship.leftItem.pipe(Object(operators.i)(),Object(operators.o)(),Object(filter.a)((item=>Object(empty_util.b)(item)&&Object(empty_util.e)(item.uuid)))),this.rightItem$=this.relationship.rightItem.pipe(Object(operators.i)(),Object(operators.o)(),Object(filter.a)((item=>Object(empty_util.b)(item)&&Object(empty_util.e)(item.uuid)))),this.relatedItem$=Object(combineLatest.a)(this.leftItem$,this.rightItem$).pipe(Object(map.a)((items=>items.find((item=>item.uuid!==this.editItem.uuid)))))):this.relatedItem$=Object(of.a)(this.update.relatedItem)}remove(){this.closeVirtualMetadataModal(),Object(combineLatest.a)(this.leftItem$,this.rightItem$).pipe(Object(map.a)((items=>items.map((item=>this.objectUpdatesService.isSelectedVirtualMetadata(this.url,this.relationship.id,item.uuid))))),Object(switchMap.a)((selection$=>Object(combineLatest.a)(selection$))),Object(map.a)((selection=>Object.assign({},this.fieldUpdate.field,{keepLeftVirtualMetadata:!0===selection[0],keepRightVirtualMetadata:!0===selection[1]}))),Object(take.a)(1)).subscribe((deleteRelationship=>this.objectUpdatesService.saveRemoveFieldUpdate(this.url,deleteRelationship)))}openVirtualMetadataModal(content){this.modalRef=this.modalService.open(content)}closeVirtualMetadataModal(){this.modalRef.close()}undo(){this.objectUpdatesService.removeSingleFieldUpdate(this.url,this.fieldUpdate.field.uuid)}canRemove(){return this.fieldUpdate.changeType!==object_updates_actions.c.REMOVE&&this.fieldUpdate.changeType!==object_updates_actions.c.ADD}canUndo(){return this.fieldUpdate.changeType>=0}}edit_relationship_component_EditRelationshipComponent.\u0275fac=function EditRelationshipComponent_Factory(t){return new(t||edit_relationship_component_EditRelationshipComponent)(core["\u0275\u0275directiveInject"](object_updates_service.a),core["\u0275\u0275directiveInject"](ng_bootstrap.q))},edit_relationship_component_EditRelationshipComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:edit_relationship_component_EditRelationshipComponent,selectors:[["ds-edit-relationship"]],inputs:{fieldUpdate:"fieldUpdate",url:"url",editItem:"editItem"},features:[core["\u0275\u0275NgOnChangesFeature"]],decls:6,vars:3,consts:[["class","row",4,"ngIf"],["virtualMetadataModal",""],[1,"row"],[1,"col-10","relationship"],[3,"object","viewMode","value"],[1,"col-2"],[1,"btn-group","relationship-action-buttons"],[1,"btn","btn-outline-danger","btn-sm",3,"disabled","title","click"],[1,"fas","fa-trash-alt","fa-fw"],[1,"btn","btn-outline-warning","btn-sm",3,"disabled","title","click"],[1,"fas","fa-undo-alt","fa-fw"],[3,"relationshipId","leftItem","rightItem","url","close","save"]],template:function EditRelationshipComponent_Template(rf,ctx){1&rf&&(core["\u0275\u0275template"](0,EditRelationshipComponent_div_0_Template,27,13,"div",0),core["\u0275\u0275pipe"](1,"async"),core["\u0275\u0275text"](2,"\n"),core["\u0275\u0275template"](3,EditRelationshipComponent_ng_template_3_Template,6,8,"ng-template",null,1,core["\u0275\u0275templateRefExtractor"]),core["\u0275\u0275text"](5,"\n")),2&rf&&core["\u0275\u0275property"]("ngIf",core["\u0275\u0275pipeBind1"](1,1,ctx.relatedItem$))},directives:[common.NgIf,listable_object_component_loader_component.a,virtual_metadata_component_VirtualMetadataComponent],pipes:[common.AsyncPipe,ngx_translate_core.d],styles:[".btn[disabled][_ngcontent-%COMP%]{color:var(--bs-gray-600);border-color:var(--bs-gray-600);z-index:0}.relationship-action-buttons[_ngcontent-%COMP%]{margin:0;position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}"]});const edit_relationship_list_component_c0=function(){return{}},edit_relationship_list_component_c1=function(a0,a1,a2){return{"alert-success":a0,"alert-warning":a1,"alert-danger":a2}};function EditRelationshipListComponent_ng_container_15_ng_container_2_ng_container_2_ds_edit_relationship_9_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"ds-edit-relationship",8),core["\u0275\u0275text"](1,"\n              "),core["\u0275\u0275elementEnd"]()),2&rf){const updateValue_r8=ctx.$implicit,ctx_r6=core["\u0275\u0275nextContext"](4);core["\u0275\u0275property"]("fieldUpdate",updateValue_r8||core["\u0275\u0275pureFunction0"](4,edit_relationship_list_component_c0))("url",ctx_r6.url)("editItem",ctx_r6.item)("ngClass",core["\u0275\u0275pureFunction3"](5,edit_relationship_list_component_c1,1===updateValue_r8.changeType,0===updateValue_r8.changeType,2===updateValue_r8.changeType))}}function EditRelationshipListComponent_ng_container_15_ng_container_2_ng_container_2_div_13_Template(rf,ctx){1&rf&&(core["\u0275\u0275elementStart"](0,"div"),core["\u0275\u0275text"](1),core["\u0275\u0275pipe"](2,"translate"),core["\u0275\u0275elementEnd"]()),2&rf&&(core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](2,1,"item.edit.relationships.no-relationships")))}function EditRelationshipListComponent_ng_container_15_ng_container_2_ng_container_2_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementContainerStart"](0),core["\u0275\u0275text"](1,"\n          "),core["\u0275\u0275elementStart"](2,"ds-pagination",5),core["\u0275\u0275pipe"](3,"async"),core["\u0275\u0275pipe"](4,"async"),core["\u0275\u0275pipe"](5,"async"),core["\u0275\u0275text"](6,"\n            "),core["\u0275\u0275elementStart"](7,"div",6),core["\u0275\u0275text"](8,"\n              "),core["\u0275\u0275template"](9,EditRelationshipListComponent_ng_container_15_ng_container_2_ng_container_2_ds_edit_relationship_9_Template,2,9,"ds-edit-relationship",7),core["\u0275\u0275text"](10,"\n            "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](11,"\n          "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](12,"\n          "),core["\u0275\u0275template"](13,EditRelationshipListComponent_ng_container_15_ng_container_2_ng_container_2_div_13_Template,3,3,"div",4),core["\u0275\u0275text"](14,"\n        "),core["\u0275\u0275elementContainerEnd"]()),2&rf){const updateValues_r5=ctx.ngVar,ctx_r4=core["\u0275\u0275nextContext"](3);let tmp_1_0=null,tmp_2_0=null;core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("paginationOptions",ctx_r4.paginationConfig)("pageInfoState",null==(tmp_1_0=core["\u0275\u0275pipeBind1"](3,8,ctx_r4.relationshipsRd$))||null==tmp_1_0.payload?null:tmp_1_0.payload.pageInfo)("collectionSize",(null==(tmp_2_0=core["\u0275\u0275pipeBind1"](4,10,ctx_r4.relationshipsRd$))||null==tmp_2_0.payload?null:tmp_2_0.payload.totalElements)+core["\u0275\u0275pipeBind1"](5,12,ctx_r4.nbAddedFields$))("hideGear",!0)("hidePagerWhenSinglePage",!0),core["\u0275\u0275advance"](7),core["\u0275\u0275property"]("ngForOf",updateValues_r5)("ngForTrackBy",ctx_r4.trackUpdate),core["\u0275\u0275advance"](4),core["\u0275\u0275property"]("ngIf",0===updateValues_r5.length)}}function EditRelationshipListComponent_ng_container_15_ng_container_2_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementContainerStart"](0),core["\u0275\u0275text"](1,"\n        "),core["\u0275\u0275template"](2,EditRelationshipListComponent_ng_container_15_ng_container_2_ng_container_2_Template,15,14,"ng-container",3),core["\u0275\u0275pipe"](3,"dsObjectValues"),core["\u0275\u0275text"](4,"\n    "),core["\u0275\u0275elementContainerEnd"]()),2&rf){const updates_r1=core["\u0275\u0275nextContext"]().ngVar;core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngVar",core["\u0275\u0275pipeBind1"](3,1,updates_r1))}}function EditRelationshipListComponent_ng_container_15_ds_loading_5_Template(rf,ctx){1&rf&&core["\u0275\u0275element"](0,"ds-loading")}function EditRelationshipListComponent_ng_container_15_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementContainerStart"](0),core["\u0275\u0275text"](1,"\n    "),core["\u0275\u0275template"](2,EditRelationshipListComponent_ng_container_15_ng_container_2_Template,5,3,"ng-container",4),core["\u0275\u0275pipe"](3,"async"),core["\u0275\u0275text"](4,"\n    "),core["\u0275\u0275template"](5,EditRelationshipListComponent_ng_container_15_ds_loading_5_Template,1,0,"ds-loading",4),core["\u0275\u0275pipe"](6,"async"),core["\u0275\u0275text"](7,"\n"),core["\u0275\u0275elementContainerEnd"]()),2&rf){const updates_r1=ctx.ngVar,ctx_r0=core["\u0275\u0275nextContext"]();core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",updates_r1&&!core["\u0275\u0275pipeBind1"](3,2,ctx_r0.loading$)),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("ngIf",core["\u0275\u0275pipeBind1"](6,4,ctx_r0.loading$))}}class edit_relationship_list_component_EditRelationshipListComponent{constructor(objectUpdatesService,linkService,relationshipService,relationshipTypeService,modalService,paginationService,selectableListService){this.objectUpdatesService=objectUpdatesService,this.linkService=linkService,this.relationshipService=relationshipService,this.relationshipTypeService=relationshipTypeService,this.modalService=modalService,this.paginationService=paginationService,this.selectableListService=selectableListService,this.submit=new core.EventEmitter,this.updates$=new internal_BehaviorSubject.a(void 0),this.relationshipsRd$=new internal_BehaviorSubject.a(void 0),this.isLastPage$=new internal_BehaviorSubject.a(!0),this.loading$=new internal_BehaviorSubject.a(!0),this.nbAddedFields$=new internal_BehaviorSubject.a(0),this.subs=[]}getRelationshipMessageKey(){return Object(combineLatest.a)(this.getLabel(),this.relatedEntityType$).pipe(Object(map.a)((([label,relatedEntityType])=>{if(Object(empty_util.b)(label)&&label.indexOf("is")>-1&&label.indexOf("Of")>-1){const relationshipLabel=`${label.substring(2,label.indexOf("Of"))}`;return relationshipLabel!==relatedEntityType.label?`relationships.is${relationshipLabel}Of.${relatedEntityType.label}`:`relationships.is${relationshipLabel}Of`}return label})))}getLabel(){return Object(combineLatest.a)([this.relationshipType.leftType,this.relationshipType.rightType].map((itemTypeRD=>itemTypeRD.pipe(Object(operators.i)(),Object(operators.o)())))).pipe(Object(map.a)((itemTypes=>[this.relationshipType.leftwardType,this.relationshipType.rightwardType][itemTypes.findIndex((itemType=>itemType.id===this.itemType.id))])))}trackUpdate(index,update){return update&&update.field?update.field.uuid:void 0}openLookup(){this.modalRef=this.modalService.open(dynamic_lookup_relation_modal_component.a,{size:"lg"});const modalComp=this.modalRef.componentInstance;modalComp.repeatable=!0,modalComp.isEditRelationship=!0,modalComp.listId=this.listId,modalComp.item=this.item,modalComp.relationshipType=this.relationshipType,modalComp.currentItemIsLeftItem$=this.currentItemIsLeftItem$,modalComp.toAdd=[],modalComp.toRemove=[],modalComp.isPending=!1,this.item.owningCollection.pipe(Object(operators.j)()).subscribe((collection=>{modalComp.collection=collection})),modalComp.select=(...selectableObjects)=>{selectableObjects.forEach((searchResult=>{const relatedItem=searchResult.indexableObject,foundIndex=modalComp.toRemove.findIndex((el=>el.uuid===relatedItem.uuid));-1!==foundIndex?modalComp.toRemove.splice(foundIndex,1):this.getRelationFromId(relatedItem).subscribe((relationship=>{if(relationship){const foundIndexRemove=modalComp.toRemove.findIndex((el=>el.indexableObject.uuid===relatedItem.uuid));-1!==foundIndexRemove&&modalComp.toRemove.splice(foundIndexRemove,1)}else modalComp.toAdd.push(searchResult);this.loading$.next(!0),this.relationshipsRd$.next(this.relationshipsRd$.getValue())}))}))},modalComp.deselect=(...selectableObjects)=>{selectableObjects.forEach((searchResult=>{const relatedItem=searchResult.indexableObject,foundIndex=modalComp.toAdd.findIndex((el=>el.indexableObject.uuid===relatedItem.uuid));-1!==foundIndex?modalComp.toAdd.splice(foundIndex,1):modalComp.toRemove.push(searchResult)}))},modalComp.submitEv=()=>{const subscriptions=[];modalComp.toAdd.forEach((searchResult=>{const relatedItem=searchResult.indexableObject;subscriptions.push(this.relationshipService.getNameVariant(this.listId,relatedItem.uuid).pipe(Object(map.a)((nameVariant=>{const update={uuid:this.relationshipType.id+"-"+searchResult.indexableObject.uuid,nameVariant:nameVariant,type:this.relationshipType,relatedItem:relatedItem};return this.objectUpdatesService.saveAddFieldUpdate(this.url,update),update}))))})),modalComp.toRemove.forEach((searchResult=>{subscriptions.push(this.relationshipService.getNameVariant(this.listId,searchResult.indexableObjectuuid).pipe(Object(switchMap.a)((nameVariant=>this.getRelationFromId(searchResult.indexableObject).pipe(Object(map.a)((relationship=>{const update={uuid:relationship.id,nameVariant:nameVariant,type:this.relationshipType,relationship:relationship};return this.objectUpdatesService.saveRemoveFieldUpdate(this.url,update),update})))))))})),Object(combineLatest.a)(subscriptions).subscribe((res=>{setTimeout((()=>{this.submit.emit()}),1e3),modalComp.isPending=!0}))},modalComp.discardEv=()=>{modalComp.toAdd.forEach((searchResult=>{this.selectableListService.deselectSingle(this.listId,searchResult)})),modalComp.toRemove.forEach((searchResult=>{this.selectableListService.selectSingle(this.listId,searchResult)})),modalComp.toAdd=[],modalComp.toRemove=[]},this.relatedEntityType$.pipe(Object(take.a)(1)).subscribe((relatedEntityType=>{modalComp.relationshipOptions=Object.assign(new relationship_options_model.a,{relationshipType:relatedEntityType.label,searchConfiguration:relatedEntityType.label.toLowerCase(),nameVariants:"true"})})),this.selectableListService.deselectAll(this.listId)}getRelationFromId(relatedItem){return this.currentItemIsLeftItem$.pipe(Object(take.a)(1),Object(switchMap.a)((isLeft=>{let apiCall;return apiCall=isLeft?this.relationshipService.searchByItemsAndType(this.relationshipType.id,this.item.uuid,this.relationshipType.leftwardType,[relatedItem.id]).pipe(Object(operators.i)(),Object(operators.o)()):this.relationshipService.searchByItemsAndType(this.relationshipType.id,this.item.uuid,this.relationshipType.rightwardType,[relatedItem.id]).pipe(Object(operators.i)(),Object(operators.o)()),apiCall.pipe(Object(map.a)((res=>res.page[0])))})))}getFieldUpdatesForRelatedItem(relatedItem){return this.updates$.pipe(Object(take.a)(1),Object(map.a)((updates=>Object.values(updates).map((update=>update.field)).filter((field=>field.relationship)))),Object(mergeMap.a)((identifiables=>Object(combineLatest.a)(identifiables.map((identifiable=>this.getRelatedItem(identifiable.relationship)))).pipe(Object(defaultIfEmpty.a)([]),Object(map.a)((relatedItems=>identifiables.filter(((identifiable,index)=>relatedItems[index].uuid===relatedItem.uuid))))))))}getIsRelatedItem(relatedItem){return this.currentItemIsLeftItem$.pipe(Object(take.a)(1),Object(map.a)((isLeft=>{if(isLeft){return!!this.item.allMetadataValues("relation."+this.relationshipType.leftwardType).find((uuid=>uuid===relatedItem.uuid))}return!!this.item.allMetadataValues("relation."+this.relationshipType.rightwardType).find((uuid=>uuid===relatedItem.uuid))})))}getRelatedItem(relationship){return this.relationshipService.isLeftItem(relationship,this.item).pipe(Object(switchMap.a)((isLeftItem=>isLeftItem?relationship.rightItem:relationship.leftItem)),Object(operators.i)(),Object(operators.o)())}ngOnInit(){this.relationshipLeftAndRightType$=Object(combineLatest.a)([this.relationshipType.leftType,this.relationshipType.rightType].map((type=>type.pipe(Object(operators.i)(),Object(operators.o)())))),this.relatedEntityType$=this.relationshipLeftAndRightType$.pipe(Object(map.a)((relatedTypes=>relatedTypes.find((relatedType=>relatedType.uuid!==this.itemType.uuid)))),Object(empty_util.c)()),this.relatedEntityType$.pipe(Object(take.a)(1)).subscribe((relatedEntityType=>this.listId=`edit-relationship-${this.itemType.id}-${relatedEntityType.id}`)),this.currentItemIsLeftItem$=this.relationshipLeftAndRightType$.pipe(Object(map.a)((([leftType,rightType])=>leftType.id===this.itemType.id||rightType.id!==this.itemType.id&&void console.warn(`The item ${this.item.uuid} is not on the right or the left side of relationship type ${this.relationshipType.uuid}`)))),this.paginationConfig=new pagination_component_options_model.a,this.paginationConfig.id=`er${this.relationshipType.id}`,this.paginationConfig.pageSize=5,this.paginationConfig.currentPage=1;const currentPagination$=this.paginationService.getCurrentPagination(this.paginationConfig.id,this.paginationConfig).pipe(Object(tap.a)((()=>this.loading$.next(!0))));this.subs.push(Object(combineLatest.a)([currentPagination$,this.currentItemIsLeftItem$]).pipe(Object(switchMap.a)((([currentPagination,currentItemIsLeftItem])=>this.relationshipService.getItemRelationshipsByLabel(this.item,currentItemIsLeftItem?this.relationshipType.leftwardType:this.relationshipType.rightwardType,{elementsPerPage:currentPagination.pageSize,currentPage:currentPagination.currentPage},!1,!0,Object(follow_link_config_model.a)("leftItem"),Object(follow_link_config_model.a)("rightItem"))))).subscribe((rd=>{this.relationshipsRd$.next(rd)}))),this.subs.push(this.relationshipsRd$.pipe(Object(empty_util.c)(),Object(operators.c)()).subscribe((rd=>{this.isLastPage$.next(Object(empty_util.a)(rd.payload._links.next))}))),this.subs.push(this.relationshipsRd$.pipe(Object(empty_util.c)(),Object(operators.c)(),Object(switchMap.a)((rd=>Object(from.a)(rd.payload.page).pipe(Object(mergeMap.a)((relationship=>this.relationshipService.isLeftItem(relationship,this.item).pipe(Object(map.a)((isLeftItem=>[relationship,isLeftItem]))))),Object(map.a)((([relationship,isLeftItem])=>{const nameVariant=isLeftItem?relationship.rightwardValue:relationship.leftwardValue;return{uuid:relationship.id,type:this.relationshipType,relationship:relationship,nameVariant:nameVariant}})),Object(toArray.a)(),Object(defaultIfEmpty.a)([])))),Object(switchMap.a)((nextFields=>this.objectUpdatesService.getFieldUpdates(this.url,nextFields).pipe(Object(map.a)((fieldUpdates=>{const fieldUpdatesFiltered={};return this.nbAddedFields$.next(0),Object.keys(fieldUpdates).forEach((uuid=>{if(Object(empty_util.b)(fieldUpdates[uuid])){fieldUpdates[uuid].field.type.id===this.relationshipType.id&&(fieldUpdates[uuid].changeType===object_updates_actions.c.ADD?(this.nbAddedFields$.next(this.nbAddedFields$.getValue()+1),!0===this.isLastPage$.getValue()&&(fieldUpdatesFiltered[uuid]=fieldUpdates[uuid])):fieldUpdatesFiltered[uuid]=fieldUpdates[uuid])}})),fieldUpdatesFiltered}))))),Object(startWith.a)({})).subscribe((updates=>{this.loading$.next(!1),this.updates$.next(updates)})))}ngOnDestroy(){this.subs.filter((subscription=>Object(empty_util.b)(subscription))).forEach((subscription=>subscription.unsubscribe()))}}function ItemRelationshipsComponent_ng_container_2_ng_container_2_button_4_Template(rf,ctx){if(1&rf){const _r10=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementStart"](0,"button",14),core["\u0275\u0275listener"]("click",(function ItemRelationshipsComponent_ng_container_2_ng_container_2_button_4_Template_button_click_0_listener(){core["\u0275\u0275restoreView"](_r10);return core["\u0275\u0275nextContext"](3).discard()})),core["\u0275\u0275pipe"](1,"async"),core["\u0275\u0275element"](2,"i",15),core["\u0275\u0275text"](3,"\n          "),core["\u0275\u0275elementStart"](4,"span",9),core["\u0275\u0275text"](5),core["\u0275\u0275pipe"](6,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](7,"\n        "),core["\u0275\u0275elementEnd"]()}if(2&rf){const ctx_r4=core["\u0275\u0275nextContext"](3);core["\u0275\u0275property"]("disabled",!core["\u0275\u0275pipeBind1"](1,2,ctx_r4.hasChanges())),core["\u0275\u0275advance"](5),core["\u0275\u0275textInterpolate1"]("\xa0",core["\u0275\u0275pipeBind1"](6,4,"item.edit.metadata.discard-button"),"")}}function ItemRelationshipsComponent_ng_container_2_ng_container_2_button_7_Template(rf,ctx){if(1&rf){const _r12=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementStart"](0,"button",16),core["\u0275\u0275listener"]("click",(function ItemRelationshipsComponent_ng_container_2_ng_container_2_button_7_Template_button_click_0_listener(){core["\u0275\u0275restoreView"](_r12);return core["\u0275\u0275nextContext"](3).reinstate()})),core["\u0275\u0275element"](1,"i",17),core["\u0275\u0275text"](2,"\n          "),core["\u0275\u0275elementStart"](3,"span",9),core["\u0275\u0275text"](4),core["\u0275\u0275pipe"](5,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](6,"\n        "),core["\u0275\u0275elementEnd"]()}2&rf&&(core["\u0275\u0275advance"](4),core["\u0275\u0275textInterpolate1"]("\xa0",core["\u0275\u0275pipeBind1"](5,1,"item.edit.metadata.reinstate-button"),""))}function ItemRelationshipsComponent_ng_container_2_ng_container_2_ng_container_20_ng_container_2_div_2_Template(rf,ctx){if(1&rf){const _r19=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementStart"](0,"div",19),core["\u0275\u0275text"](1,"\n            "),core["\u0275\u0275elementStart"](2,"ds-edit-relationship-list",20),core["\u0275\u0275listener"]("submit",(function ItemRelationshipsComponent_ng_container_2_ng_container_2_ng_container_20_ng_container_2_div_2_Template_ds_edit_relationship_list_submit_2_listener(){core["\u0275\u0275restoreView"](_r19);return core["\u0275\u0275nextContext"](5).submit()})),core["\u0275\u0275pipe"](3,"async"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](4,"\n          "),core["\u0275\u0275elementEnd"]()}if(2&rf){const relationshipType_r17=ctx.$implicit,ctx_r16=core["\u0275\u0275nextContext"](5);core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("url",ctx_r16.url)("item",ctx_r16.item)("itemType",core["\u0275\u0275pipeBind1"](3,5,ctx_r16.entityType$))("relationshipType",relationshipType_r17)("hasChanges",ctx_r16.hasChanges())}}function ItemRelationshipsComponent_ng_container_2_ng_container_2_ng_container_20_ng_container_2_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementContainerStart"](0),core["\u0275\u0275text"](1,"\n          "),core["\u0275\u0275template"](2,ItemRelationshipsComponent_ng_container_2_ng_container_2_ng_container_20_ng_container_2_div_2_Template,5,7,"div",18),core["\u0275\u0275text"](3,"\n        "),core["\u0275\u0275elementContainerEnd"]()),2&rf){const relationshipTypes_r13=core["\u0275\u0275nextContext"]().ngVar;core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngForOf",relationshipTypes_r13)}}function ItemRelationshipsComponent_ng_container_2_ng_container_2_ng_container_20_ds_loading_4_Template(rf,ctx){1&rf&&core["\u0275\u0275element"](0,"ds-loading")}function ItemRelationshipsComponent_ng_container_2_ng_container_2_ng_container_20_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementContainerStart"](0),core["\u0275\u0275text"](1,"\n        "),core["\u0275\u0275template"](2,ItemRelationshipsComponent_ng_container_2_ng_container_2_ng_container_20_ng_container_2_Template,4,1,"ng-container",2),core["\u0275\u0275text"](3,"\n        "),core["\u0275\u0275template"](4,ItemRelationshipsComponent_ng_container_2_ng_container_2_ng_container_20_ds_loading_4_Template,1,0,"ds-loading",2),core["\u0275\u0275text"](5,"\n      "),core["\u0275\u0275elementContainerEnd"]()),2&rf){const relationshipTypes_r13=ctx.ngVar;core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",relationshipTypes_r13),core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",!relationshipTypes_r13)}}function ItemRelationshipsComponent_ng_container_2_ng_container_2_button_27_Template(rf,ctx){if(1&rf){const _r22=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementStart"](0,"button",21),core["\u0275\u0275listener"]("click",(function ItemRelationshipsComponent_ng_container_2_ng_container_2_button_27_Template_button_click_0_listener(){core["\u0275\u0275restoreView"](_r22);return core["\u0275\u0275nextContext"](3).discard()})),core["\u0275\u0275pipe"](1,"async"),core["\u0275\u0275element"](2,"i",15),core["\u0275\u0275text"](3,"\n            "),core["\u0275\u0275elementStart"](4,"span",9),core["\u0275\u0275text"](5),core["\u0275\u0275pipe"](6,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](7,"\n          "),core["\u0275\u0275elementEnd"]()}if(2&rf){const ctx_r7=core["\u0275\u0275nextContext"](3);core["\u0275\u0275property"]("disabled",!core["\u0275\u0275pipeBind1"](1,2,ctx_r7.hasChanges())),core["\u0275\u0275advance"](5),core["\u0275\u0275textInterpolate1"]("\xa0",core["\u0275\u0275pipeBind1"](6,4,"item.edit.metadata.discard-button"),"")}}function ItemRelationshipsComponent_ng_container_2_ng_container_2_button_30_Template(rf,ctx){if(1&rf){const _r24=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementStart"](0,"button",22),core["\u0275\u0275listener"]("click",(function ItemRelationshipsComponent_ng_container_2_ng_container_2_button_30_Template_button_click_0_listener(){core["\u0275\u0275restoreView"](_r24);return core["\u0275\u0275nextContext"](3).reinstate()})),core["\u0275\u0275element"](1,"i",17),core["\u0275\u0275text"](2,"\n            "),core["\u0275\u0275elementStart"](3,"span",9),core["\u0275\u0275text"](4),core["\u0275\u0275pipe"](5,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](6,"\n          "),core["\u0275\u0275elementEnd"]()}2&rf&&(core["\u0275\u0275advance"](4),core["\u0275\u0275textInterpolate1"]("\xa0",core["\u0275\u0275pipeBind1"](5,1,"item.edit.metadata.reinstate-button"),""))}function ItemRelationshipsComponent_ng_container_2_ng_container_2_Template(rf,ctx){if(1&rf){const _r26=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementContainerStart"](0),core["\u0275\u0275text"](1,"\n      "),core["\u0275\u0275elementStart"](2,"div",4),core["\u0275\u0275text"](3,"\n        "),core["\u0275\u0275template"](4,ItemRelationshipsComponent_ng_container_2_ng_container_2_button_4_Template,8,6,"button",5),core["\u0275\u0275pipe"](5,"async"),core["\u0275\u0275text"](6,"\n        "),core["\u0275\u0275template"](7,ItemRelationshipsComponent_ng_container_2_ng_container_2_button_7_Template,7,3,"button",6),core["\u0275\u0275pipe"](8,"async"),core["\u0275\u0275text"](9,"\n        "),core["\u0275\u0275elementStart"](10,"button",7),core["\u0275\u0275listener"]("click",(function ItemRelationshipsComponent_ng_container_2_ng_container_2_Template_button_click_10_listener(){core["\u0275\u0275restoreView"](_r26);return core["\u0275\u0275nextContext"](2).submit()})),core["\u0275\u0275pipe"](11,"async"),core["\u0275\u0275element"](12,"i",8),core["\u0275\u0275text"](13,"\n          "),core["\u0275\u0275elementStart"](14,"span",9),core["\u0275\u0275text"](15),core["\u0275\u0275pipe"](16,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](17,"\n        "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](18,"\n      "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](19,"\n      "),core["\u0275\u0275template"](20,ItemRelationshipsComponent_ng_container_2_ng_container_2_ng_container_20_Template,6,2,"ng-container",1),core["\u0275\u0275pipe"](21,"async"),core["\u0275\u0275text"](22,"\n      "),core["\u0275\u0275elementStart"](23,"div",10),core["\u0275\u0275text"](24,"\n        "),core["\u0275\u0275elementStart"](25,"div",11),core["\u0275\u0275text"](26,"\n          "),core["\u0275\u0275template"](27,ItemRelationshipsComponent_ng_container_2_ng_container_2_button_27_Template,8,6,"button",12),core["\u0275\u0275pipe"](28,"async"),core["\u0275\u0275text"](29,"\n          "),core["\u0275\u0275template"](30,ItemRelationshipsComponent_ng_container_2_ng_container_2_button_30_Template,7,3,"button",13),core["\u0275\u0275pipe"](31,"async"),core["\u0275\u0275text"](32,"\n          "),core["\u0275\u0275elementStart"](33,"button",7),core["\u0275\u0275listener"]("click",(function ItemRelationshipsComponent_ng_container_2_ng_container_2_Template_button_click_33_listener(){core["\u0275\u0275restoreView"](_r26);return core["\u0275\u0275nextContext"](2).submit()})),core["\u0275\u0275pipe"](34,"async"),core["\u0275\u0275element"](35,"i",8),core["\u0275\u0275text"](36,"\n            "),core["\u0275\u0275elementStart"](37,"span",9),core["\u0275\u0275text"](38),core["\u0275\u0275pipe"](39,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](40,"\n          "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](41,"\n        "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](42,"\n      "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](43,"\n    "),core["\u0275\u0275elementContainerEnd"]()}if(2&rf){const ctx_r2=core["\u0275\u0275nextContext"](2);core["\u0275\u0275advance"](4),core["\u0275\u0275property"]("ngIf",!core["\u0275\u0275pipeBind1"](5,9,ctx_r2.isReinstatable())),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("ngIf",core["\u0275\u0275pipeBind1"](8,11,ctx_r2.isReinstatable())),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("disabled",!core["\u0275\u0275pipeBind1"](11,13,ctx_r2.hasChanges())),core["\u0275\u0275advance"](5),core["\u0275\u0275textInterpolate1"]("\xa0",core["\u0275\u0275pipeBind1"](16,15,"item.edit.metadata.save-button"),""),core["\u0275\u0275advance"](5),core["\u0275\u0275property"]("ngVar",core["\u0275\u0275pipeBind1"](21,17,ctx_r2.relationshipTypes$)),core["\u0275\u0275advance"](7),core["\u0275\u0275property"]("ngIf",!core["\u0275\u0275pipeBind1"](28,19,ctx_r2.isReinstatable())),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("ngIf",core["\u0275\u0275pipeBind1"](31,21,ctx_r2.isReinstatable())),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("disabled",!core["\u0275\u0275pipeBind1"](34,23,ctx_r2.hasChanges())),core["\u0275\u0275advance"](5),core["\u0275\u0275textInterpolate1"]("\xa0",core["\u0275\u0275pipeBind1"](39,25,"item.edit.metadata.save-button"),"")}}function ItemRelationshipsComponent_ng_container_2_div_4_Template(rf,ctx){1&rf&&(core["\u0275\u0275elementStart"](0,"div",23),core["\u0275\u0275text"](1),core["\u0275\u0275pipe"](2,"translate"),core["\u0275\u0275elementEnd"]()),2&rf&&(core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate1"]("\n      ",core["\u0275\u0275pipeBind1"](2,1,"item.edit.relationships.no-entity-type"),"\n    "))}function ItemRelationshipsComponent_ng_container_2_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementContainerStart"](0),core["\u0275\u0275text"](1,"\n    "),core["\u0275\u0275template"](2,ItemRelationshipsComponent_ng_container_2_ng_container_2_Template,44,27,"ng-container",2),core["\u0275\u0275text"](3,"\n    "),core["\u0275\u0275template"](4,ItemRelationshipsComponent_ng_container_2_div_4_Template,3,3,"div",3),core["\u0275\u0275text"](5,"\n  "),core["\u0275\u0275elementContainerEnd"]()),2&rf){const entityType_r1=ctx.ngVar;core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",entityType_r1),core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",!entityType_r1)}}edit_relationship_list_component_EditRelationshipListComponent.\u0275fac=function EditRelationshipListComponent_Factory(t){return new(t||edit_relationship_list_component_EditRelationshipListComponent)(core["\u0275\u0275directiveInject"](object_updates_service.a),core["\u0275\u0275directiveInject"](link_service.a),core["\u0275\u0275directiveInject"](relationship_service.a),core["\u0275\u0275directiveInject"](relationship_type_service.a),core["\u0275\u0275directiveInject"](ng_bootstrap.q),core["\u0275\u0275directiveInject"](pagination_service.a),core["\u0275\u0275directiveInject"](selectable_list_service.a))},edit_relationship_list_component_EditRelationshipListComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:edit_relationship_list_component_EditRelationshipListComponent,selectors:[["ds-edit-relationship-list"]],inputs:{item:"item",itemType:"itemType",url:"url",relationshipType:"relationshipType",hasChanges:"hasChanges"},outputs:{submit:"submit"},decls:18,vars:14,consts:[[1,"ml-2","btn","btn-success",3,"disabled","click"],[1,"fas","fa-plus"],[1,"d-none","d-sm-inline"],[4,"ngVar"],[4,"ngIf"],[3,"paginationOptions","pageInfoState","collectionSize","hideGear","hidePagerWhenSinglePage"],[1,"my-2"],["class","relationship-row d-block alert",3,"fieldUpdate","url","editItem","ngClass",4,"ngFor","ngForOf","ngForTrackBy"],[1,"relationship-row","d-block","alert",3,"fieldUpdate","url","editItem","ngClass"]],template:function EditRelationshipListComponent_Template(rf,ctx){1&rf&&(core["\u0275\u0275elementStart"](0,"h5"),core["\u0275\u0275text"](1),core["\u0275\u0275pipe"](2,"translate"),core["\u0275\u0275pipe"](3,"async"),core["\u0275\u0275elementStart"](4,"button",0),core["\u0275\u0275listener"]("click",(function EditRelationshipListComponent_Template_button_click_4_listener(){return ctx.openLookup()})),core["\u0275\u0275pipe"](5,"async"),core["\u0275\u0275text"](6,"\n        "),core["\u0275\u0275element"](7,"i",1),core["\u0275\u0275text"](8,"\n        "),core["\u0275\u0275elementStart"](9,"span",2),core["\u0275\u0275text"](10),core["\u0275\u0275pipe"](11,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](12,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](13,"\n"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](14,"\n"),core["\u0275\u0275template"](15,EditRelationshipListComponent_ng_container_15_Template,8,6,"ng-container",3),core["\u0275\u0275pipe"](16,"async"),core["\u0275\u0275text"](17,"\n")),2&rf&&(core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate1"]("\n    ",core["\u0275\u0275pipeBind1"](2,4,core["\u0275\u0275pipeBind1"](3,6,ctx.getRelationshipMessageKey())),"\n    "),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("disabled",core["\u0275\u0275pipeBind1"](5,8,ctx.hasChanges)),core["\u0275\u0275advance"](6),core["\u0275\u0275textInterpolate1"]("\xa0",core["\u0275\u0275pipeBind1"](11,10,"item.edit.relationships.edit.buttons.add"),""),core["\u0275\u0275advance"](5),core["\u0275\u0275property"]("ngVar",core["\u0275\u0275pipeBind1"](16,12,ctx.updates$)))},directives:[var_directive.a,common.NgIf,pagination_component.a,common.NgForOf,edit_relationship_component_EditRelationshipComponent,common.NgClass,loading_component.a],pipes:[ngx_translate_core.d,common.AsyncPipe,object_values_pipe.a],styles:[".relationship-row[_ngcontent-%COMP%]:not(.alert){padding:var(--bs-alert-padding-y) 0}.relationship-row.alert[_ngcontent-%COMP%]{margin-left:calc(-1 * var(--bs-alert-padding-x));margin-right:calc(-1 * var(--bs-alert-padding-x));margin-top:-1px;margin-bottom:-1px}"]});class item_relationships_component_ItemRelationshipsComponent extends abstract_item_update_component.a{constructor(itemService,objectUpdatesService,router,notificationsService,translateService,route,relationshipService,objectCache,requestService,entityTypeService,relationshipTypeService,cdr,modalService){super(itemService,objectUpdatesService,router,notificationsService,translateService,route),this.itemService=itemService,this.objectUpdatesService=objectUpdatesService,this.router=router,this.notificationsService=notificationsService,this.translateService=translateService,this.route=route,this.relationshipService=relationshipService,this.objectCache=objectCache,this.requestService=requestService,this.entityTypeService=entityTypeService,this.relationshipTypeService=relationshipTypeService,this.cdr=cdr,this.modalService=modalService}initializeUpdates(){const label=this.item.firstMetadataValue("dspace.entity.type");void 0!==label?(this.relationshipTypes$=this.relationshipTypeService.searchByEntityType(label,!0,!0,...this.getRelationshipTypeFollowLinks()).pipe(Object(map.a)((relationshipTypes=>relationshipTypes.page))),this.entityType$=this.entityTypeService.getEntityTypeByLabel(label).pipe(Object(operators.i)(),Object(operators.o)())):this.entityType$=Object(of.a)(void 0)}initializeNotificationsPrefix(){this.notificationsPrefix="item.edit.relationships.notifications."}submit(){const removedRelationshipIDs$=this.relationshipService.getItemRelationshipsArray(this.item).pipe(Object(startWith.a)([]),Object(map.a)((relationships=>relationships.map((relationship=>Object.assign(new relationship_model.a,relationship,{uuid:relationship.id}))))),Object(switchMap.a)((relationships=>this.objectUpdatesService.getFieldUpdatesExclusive(this.url,relationships))),Object(map.a)((fieldUpdates=>Object.values(fieldUpdates).filter((fieldUpdate=>fieldUpdate.changeType===object_updates_actions.c.REMOVE)).map((fieldUpdate=>fieldUpdate.field))))),addRelatedItems$=this.objectUpdatesService.getFieldUpdates(this.url,[]).pipe(Object(map.a)((fieldUpdates=>Object.values(fieldUpdates).filter((fieldUpdate=>Object(empty_util.b)(fieldUpdate))).filter((fieldUpdate=>fieldUpdate.changeType===object_updates_actions.c.ADD)).map((fieldUpdate=>fieldUpdate.field)))));Object(combineLatest.a)(removedRelationshipIDs$,addRelatedItems$).pipe(Object(take.a)(1)).subscribe((([removeRelationshipIDs,addRelatedItems])=>{[this.deleteRelationships(removeRelationshipIDs),this.addRelationships(addRelatedItems)].forEach((action=>action.subscribe((response=>{response.length>0&&(this.initializeOriginalFields(),this.cdr.detectChanges(),this.displayNotifications(response),this.modalService.dismissAll())}))))}))}deleteRelationships(deleteRelationshipIDs){return Object(zip.a)(...deleteRelationshipIDs.map((deleteRelationship=>{let copyVirtualMetadata;return copyVirtualMetadata=deleteRelationship.keepLeftVirtualMetadata&&deleteRelationship.keepRightVirtualMetadata?"all":deleteRelationship.keepLeftVirtualMetadata?"left":deleteRelationship.keepRightVirtualMetadata?"right":"none",this.relationshipService.deleteRelationship(deleteRelationship.uuid,copyVirtualMetadata)})))}addRelationships(addRelatedItems){return Object(zip.a)(...addRelatedItems.map((addRelationship=>this.entityType$.pipe(Object(switchMap.a)((entityType=>this.entityTypeService.isLeftType(addRelationship.type,entityType))),Object(switchMap.a)((isLeftType=>{let leftItem,rightItem,leftwardValue,rightwardValue;return isLeftType?(leftItem=this.item,rightItem=addRelationship.relatedItem,leftwardValue=null,rightwardValue=addRelationship.nameVariant):(leftItem=addRelationship.relatedItem,rightItem=this.item,leftwardValue=addRelationship.nameVariant,rightwardValue=null),this.relationshipService.addRelationship(addRelationship.type.id,leftItem,rightItem,leftwardValue,rightwardValue)}))))))}displayNotifications(responses){const failedResponses=responses.filter((response=>response.hasFailed)),successfulResponses=responses.filter((response=>response.hasSucceeded));failedResponses.forEach((response=>{this.notificationsService.error(this.getNotificationTitle("failed"),response.errorMessage)})),successfulResponses.length>0&&this.notificationsService.success(this.getNotificationTitle("saved"),this.getNotificationContent("saved"))}initializeOriginalFields(){return this.relationshipService.getRelatedItems(this.item).pipe(Object(take.a)(1)).subscribe((items=>{this.objectUpdatesService.initialize(this.url,items,this.item.lastModified)}))}getRelationshipTypeFollowLinks(){return[Object(follow_link_config_model.a)("leftType"),Object(follow_link_config_model.a)("rightType")]}}item_relationships_component_ItemRelationshipsComponent.\u0275fac=function ItemRelationshipsComponent_Factory(t){return new(t||item_relationships_component_ItemRelationshipsComponent)(core["\u0275\u0275directiveInject"](item_data_service.a),core["\u0275\u0275directiveInject"](object_updates_service.a),core["\u0275\u0275directiveInject"](fesm2015_router.g),core["\u0275\u0275directiveInject"](notifications_service.a),core["\u0275\u0275directiveInject"](ngx_translate_core.e),core["\u0275\u0275directiveInject"](fesm2015_router.a),core["\u0275\u0275directiveInject"](relationship_service.a),core["\u0275\u0275directiveInject"](object_cache_service.a),core["\u0275\u0275directiveInject"](request_service.a),core["\u0275\u0275directiveInject"](entity_type_service.a),core["\u0275\u0275directiveInject"](relationship_type_service.a),core["\u0275\u0275directiveInject"](core.ChangeDetectorRef),core["\u0275\u0275directiveInject"](ng_bootstrap.q))},item_relationships_component_ItemRelationshipsComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:item_relationships_component_ItemRelationshipsComponent,selectors:[["ds-item-relationships"]],features:[core["\u0275\u0275InheritDefinitionFeature"]],decls:6,vars:3,consts:[[1,"item-relationships"],[4,"ngVar"],[4,"ngIf"],["class","alert alert-info mt-2","role","alert",4,"ngIf"],[1,"button-row","top","d-flex"],["class","btn btn-danger ml-auto",3,"disabled","click",4,"ngIf"],["class","btn btn-warning ml-auto",3,"click",4,"ngIf"],[1,"btn","btn-primary",3,"disabled","click"],[1,"fas","fa-save"],[1,"d-none","d-sm-inline"],[1,"button-row","bottom"],[1,"float-right"],["class","btn btn-danger",3,"disabled","click",4,"ngIf"],["class","btn btn-warning",3,"click",4,"ngIf"],[1,"btn","btn-danger","ml-auto",3,"disabled","click"],[1,"fas","fa-times"],[1,"btn","btn-warning","ml-auto",3,"click"],[1,"fas","fa-undo-alt"],["class","mb-4",4,"ngFor","ngForOf"],[1,"mb-4"],[3,"url","item","itemType","relationshipType","hasChanges","submit"],[1,"btn","btn-danger",3,"disabled","click"],[1,"btn","btn-warning",3,"click"],["role","alert",1,"alert","alert-info","mt-2"]],template:function ItemRelationshipsComponent_Template(rf,ctx){1&rf&&(core["\u0275\u0275elementStart"](0,"div",0),core["\u0275\u0275text"](1,"\n  "),core["\u0275\u0275template"](2,ItemRelationshipsComponent_ng_container_2_Template,6,2,"ng-container",1),core["\u0275\u0275pipe"](3,"async"),core["\u0275\u0275text"](4,"\n"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](5,"\n")),2&rf&&(core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngVar",core["\u0275\u0275pipeBind1"](3,1,ctx.entityType$)))},directives:[var_directive.a,common.NgIf,common.NgForOf,edit_relationship_list_component_EditRelationshipListComponent,loading_component.a],pipes:[common.AsyncPipe,ngx_translate_core.d],styles:[".button-row[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-right:calc(.5 * var(--bs-spacer))}.button-row[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:last-child{margin-right:0}@media screen and (min-width:576px){.button-row[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{min-width:var(--ds-edit-item-button-min-width)}}.button-row.top[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-top:calc(var(--bs-spacer) / 2);margin-bottom:calc(var(--bs-spacer) / 2)}"]});var i18n_breadcrumb_resolver=__webpack_require__("A0IO"),aletr_type=__webpack_require__("ac5F"),item_versions_component=__webpack_require__("Y9an");function ItemVersionHistoryComponent_div_0_ds_item_versions_2_Template(rf,ctx){if(1&rf&&core["\u0275\u0275element"](0,"ds-item-versions",3),2&rf){const item_r1=core["\u0275\u0275nextContext"]().ngVar;core["\u0275\u0275property"]("item",item_r1)("displayWhenEmpty",!0)("displayTitle",!1)("displayActions",!0)}}function ItemVersionHistoryComponent_div_0_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"div",1),core["\u0275\u0275text"](1,"\n  "),core["\u0275\u0275template"](2,ItemVersionHistoryComponent_div_0_ds_item_versions_2_Template,1,4,"ds-item-versions",2),core["\u0275\u0275text"](3,"\n"),core["\u0275\u0275elementEnd"]()),2&rf){const item_r1=ctx.ngVar;core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",item_r1)}}class item_version_history_component_ItemVersionHistoryComponent{constructor(route){this.route=route,this.AlertTypeEnum=aletr_type.a}ngOnInit(){this.itemRD$=this.route.parent.parent.data.pipe(Object(map.a)((data=>data.dso))).pipe(Object(operators.i)())}}item_version_history_component_ItemVersionHistoryComponent.\u0275fac=function ItemVersionHistoryComponent_Factory(t){return new(t||item_version_history_component_ItemVersionHistoryComponent)(core["\u0275\u0275directiveInject"](fesm2015_router.a))},item_version_history_component_ItemVersionHistoryComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:item_version_history_component_ItemVersionHistoryComponent,selectors:[["ds-item-version-history"]],decls:3,vars:3,consts:[["class","mt-2",4,"ngVar"],[1,"mt-2"],[3,"item","displayWhenEmpty","displayTitle","displayActions",4,"ngIf"],[3,"item","displayWhenEmpty","displayTitle","displayActions"]],template:function ItemVersionHistoryComponent_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275template"](0,ItemVersionHistoryComponent_div_0_Template,4,1,"div",0),core["\u0275\u0275pipe"](1,"async"),core["\u0275\u0275text"](2,"\n")),2&rf){let tmp_0_0=null;core["\u0275\u0275property"]("ngVar",null==(tmp_0_0=core["\u0275\u0275pipeBind1"](1,1,ctx.itemRD$))?null:tmp_0_0.payload)}},directives:[var_directive.a,common.NgIf,item_versions_component.a],pipes:[common.AsyncPipe],encapsulation:2});var catchError=__webpack_require__("JIr8"),paginated_list_model=__webpack_require__("f+Ev"),alert_component=__webpack_require__("VYMa"),resource_policies_component=__webpack_require__("+Bs4"),ng_for_track_by_id_directive=__webpack_require__("xPuV");function ItemAuthorizationsComponent_ng_container_7_ng_container_4_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementContainerStart"](0),core["\u0275\u0275text"](1,"\n      "),core["\u0275\u0275element"](2,"ds-resource-policies",2),core["\u0275\u0275text"](3,"\n    "),core["\u0275\u0275elementContainerEnd"]()),2&rf){const bitstream_r3=ctx.$implicit;core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("resourceType","bitstream")("resourceUUID",bitstream_r3.id)}}function ItemAuthorizationsComponent_ng_container_7_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementContainerStart"](0),core["\u0275\u0275text"](1,"\n    "),core["\u0275\u0275element"](2,"ds-resource-policies",2),core["\u0275\u0275text"](3,"\n    "),core["\u0275\u0275template"](4,ItemAuthorizationsComponent_ng_container_7_ng_container_4_Template,4,2,"ng-container",3),core["\u0275\u0275pipe"](5,"async"),core["\u0275\u0275text"](6,"\n  "),core["\u0275\u0275elementContainerEnd"]()),2&rf){const bundle_r1=ctx.$implicit,ctx_r0=core["\u0275\u0275nextContext"]();let tmp_2_0=null;core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("resourceType","bundle")("resourceUUID",bundle_r1.id),core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngForOf",null==(tmp_2_0=core["\u0275\u0275pipeBind1"](5,3,ctx_r0.bundleBitstreamsMap.get(bundle_r1.id)))?null:tmp_2_0.page)}}class item_authorizations_component_ItemAuthorizationsComponent{constructor(linkService,route){this.linkService=linkService,this.route=route,this.bundleBitstreamsMap=new Map,this.bundles$=new internal_BehaviorSubject.a([]),this.subs=[]}ngOnInit(){this.item$=this.route.data.pipe(Object(map.a)((data=>data.dso)),Object(operators.k)(),Object(map.a)((item=>this.linkService.resolveLink(item,Object(follow_link_config_model.a)("bundles",{},Object(follow_link_config_model.a)("bitstreams"))))));const bundles$=this.item$.pipe(Object(filter.a)((item=>Object(empty_util.e)(item.bundles))),Object(mergeMap.a)((item=>item.bundles)),Object(operators.k)(),Object(catchError.a)((error=>(console.error(error),Object(of.a)(Object(paginated_list_model.b)(null,[]))))));this.subs.push(bundles$.pipe(Object(take.a)(1),Object(map.a)((list=>list.page))).subscribe((bundles=>{this.bundles$.next(bundles)})),bundles$.pipe(Object(take.a)(1),Object(mergeMap.a)((list=>list.page)),Object(map.a)((bundle=>({id:bundle.id,bitstreams:this.getBundleBitstreams(bundle)})))).subscribe((entry=>{this.bundleBitstreamsMap.set(entry.id,entry.bitstreams)})))}getItemUUID(){return this.item$.pipe(Object(map.a)((item=>item.id)),Object(first.a)((UUID=>Object(empty_util.e)(UUID))))}getItemBundles(){return this.bundles$.asObservable()}getBundleBitstreams(bundle){return bundle.bitstreams.pipe(Object(operators.j)(),Object(catchError.a)((error=>(console.error(error),Object(of.a)(Object(paginated_list_model.b)(null,[]))))))}ngOnDestroy(){this.subs.filter((subscription=>Object(empty_util.b)(subscription))).forEach((subscription=>subscription.unsubscribe()))}}item_authorizations_component_ItemAuthorizationsComponent.\u0275fac=function ItemAuthorizationsComponent_Factory(t){return new(t||item_authorizations_component_ItemAuthorizationsComponent)(core["\u0275\u0275directiveInject"](link_service.a),core["\u0275\u0275directiveInject"](fesm2015_router.a))},item_authorizations_component_ItemAuthorizationsComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:item_authorizations_component_ItemAuthorizationsComponent,selectors:[["ds-item-authorizations"]],decls:11,vars:9,consts:[[1,"container"],[3,"type","content"],[3,"resourceType","resourceUUID"],[4,"ngFor","ngForTrackById","ngForOf"]],template:function ItemAuthorizationsComponent_Template(rf,ctx){1&rf&&(core["\u0275\u0275elementStart"](0,"div",0),core["\u0275\u0275text"](1,"\n  "),core["\u0275\u0275element"](2,"ds-alert",1),core["\u0275\u0275text"](3,"\n  "),core["\u0275\u0275element"](4,"ds-resource-policies",2),core["\u0275\u0275pipe"](5,"async"),core["\u0275\u0275text"](6,"\n  "),core["\u0275\u0275template"](7,ItemAuthorizationsComponent_ng_container_7_Template,7,5,"ng-container",3),core["\u0275\u0275pipe"](8,"async"),core["\u0275\u0275text"](9,"\n"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](10,"\n\n")),2&rf&&(core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("type","alert-info")("content","item.edit.authorizations.heading"),core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("resourceType","item")("resourceUUID",core["\u0275\u0275pipeBind1"](5,5,ctx.getItemUUID())),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("ngForOf",core["\u0275\u0275pipeBind1"](8,7,ctx.getItemBundles())))},directives:[alert_component.a,resource_policies_component.a,common.NgForOf,ng_for_track_by_id_directive.a],pipes:[common.AsyncPipe],encapsulation:2});var resource_policy_target_resolver=__webpack_require__("n1Qy"),resource_policy_resolver=__webpack_require__("G5zm"),resource_policy_create_component=__webpack_require__("EEUA"),resource_policy_edit_component=__webpack_require__("ALMP"),i18n_breadcrumbs_service=__webpack_require__("tv3Y"),edit_item_page_routing_paths=__webpack_require__("jrTz"),dso_page_single_feature_guard=__webpack_require__("0TMo"),item_page_resolver=__webpack_require__("z3/6"),auth_service=__webpack_require__("Vurf");class item_page_reinstate_guard_ItemPageReinstateGuard extends dso_page_single_feature_guard.a{constructor(resolver,authorizationService,router,authService){super(resolver,authorizationService,router,authService),this.resolver=resolver,this.authorizationService=authorizationService,this.router=router,this.authService=authService}getFeatureID(next,state){return Object(of.a)(feature_id.a.ReinstateItem)}}item_page_reinstate_guard_ItemPageReinstateGuard.\u0275fac=function ItemPageReinstateGuard_Factory(t){return new(t||item_page_reinstate_guard_ItemPageReinstateGuard)(core["\u0275\u0275inject"](item_page_resolver.a),core["\u0275\u0275inject"](authorization_data_service.a),core["\u0275\u0275inject"](fesm2015_router.g),core["\u0275\u0275inject"](auth_service.a))},item_page_reinstate_guard_ItemPageReinstateGuard.\u0275prov=core["\u0275\u0275defineInjectable"]({token:item_page_reinstate_guard_ItemPageReinstateGuard,factory:item_page_reinstate_guard_ItemPageReinstateGuard.\u0275fac,providedIn:"root"});class item_page_withdraw_guard_ItemPageWithdrawGuard extends dso_page_single_feature_guard.a{constructor(resolver,authorizationService,router,authService){super(resolver,authorizationService,router,authService),this.resolver=resolver,this.authorizationService=authorizationService,this.router=router,this.authService=authService}getFeatureID(next,state){return Object(of.a)(feature_id.a.WithdrawItem)}}item_page_withdraw_guard_ItemPageWithdrawGuard.\u0275fac=function ItemPageWithdrawGuard_Factory(t){return new(t||item_page_withdraw_guard_ItemPageWithdrawGuard)(core["\u0275\u0275inject"](item_page_resolver.a),core["\u0275\u0275inject"](authorization_data_service.a),core["\u0275\u0275inject"](fesm2015_router.g),core["\u0275\u0275inject"](auth_service.a))},item_page_withdraw_guard_ItemPageWithdrawGuard.\u0275prov=core["\u0275\u0275defineInjectable"]({token:item_page_withdraw_guard_ItemPageWithdrawGuard,factory:item_page_withdraw_guard_ItemPageWithdrawGuard.\u0275fac,providedIn:"root"});class item_page_metadata_guard_ItemPageMetadataGuard extends dso_page_single_feature_guard.a{constructor(resolver,authorizationService,router,authService){super(resolver,authorizationService,router,authService),this.resolver=resolver,this.authorizationService=authorizationService,this.router=router,this.authService=authService}getFeatureID(next,state){return Object(of.a)(feature_id.a.CanEditMetadata)}}item_page_metadata_guard_ItemPageMetadataGuard.\u0275fac=function ItemPageMetadataGuard_Factory(t){return new(t||item_page_metadata_guard_ItemPageMetadataGuard)(core["\u0275\u0275inject"](item_page_resolver.a),core["\u0275\u0275inject"](authorization_data_service.a),core["\u0275\u0275inject"](fesm2015_router.g),core["\u0275\u0275inject"](auth_service.a))},item_page_metadata_guard_ItemPageMetadataGuard.\u0275prov=core["\u0275\u0275defineInjectable"]({token:item_page_metadata_guard_ItemPageMetadataGuard,factory:item_page_metadata_guard_ItemPageMetadataGuard.\u0275fac,providedIn:"root"});var item_page_administrator_guard=__webpack_require__("920W"),dso_page_some_feature_guard=__webpack_require__("HENg");class item_page_status_guard_ItemPageStatusGuard extends dso_page_some_feature_guard.a{constructor(resolver,authorizationService,router,authService){super(resolver,authorizationService,router,authService),this.resolver=resolver,this.authorizationService=authorizationService,this.router=router,this.authService=authService}getFeatureIDs(next,state){return Object(of.a)([feature_id.a.CanManageMappings,feature_id.a.WithdrawItem,feature_id.a.ReinstateItem,feature_id.a.CanManagePolicies,feature_id.a.CanMakePrivate,feature_id.a.CanDelete,feature_id.a.CanMove])}}item_page_status_guard_ItemPageStatusGuard.\u0275fac=function ItemPageStatusGuard_Factory(t){return new(t||item_page_status_guard_ItemPageStatusGuard)(core["\u0275\u0275inject"](item_page_resolver.a),core["\u0275\u0275inject"](authorization_data_service.a),core["\u0275\u0275inject"](fesm2015_router.g),core["\u0275\u0275inject"](auth_service.a))},item_page_status_guard_ItemPageStatusGuard.\u0275prov=core["\u0275\u0275defineInjectable"]({token:item_page_status_guard_ItemPageStatusGuard,factory:item_page_status_guard_ItemPageStatusGuard.\u0275fac,providedIn:"root"});class item_page_bitstreams_guard_ItemPageBitstreamsGuard extends dso_page_single_feature_guard.a{constructor(resolver,authorizationService,router,authService){super(resolver,authorizationService,router,authService),this.resolver=resolver,this.authorizationService=authorizationService,this.router=router,this.authService=authService}getFeatureID(next,state){return Object(of.a)(feature_id.a.CanManageBitstreamBundles)}}item_page_bitstreams_guard_ItemPageBitstreamsGuard.\u0275fac=function ItemPageBitstreamsGuard_Factory(t){return new(t||item_page_bitstreams_guard_ItemPageBitstreamsGuard)(core["\u0275\u0275inject"](item_page_resolver.a),core["\u0275\u0275inject"](authorization_data_service.a),core["\u0275\u0275inject"](fesm2015_router.g),core["\u0275\u0275inject"](auth_service.a))},item_page_bitstreams_guard_ItemPageBitstreamsGuard.\u0275prov=core["\u0275\u0275defineInjectable"]({token:item_page_bitstreams_guard_ItemPageBitstreamsGuard,factory:item_page_bitstreams_guard_ItemPageBitstreamsGuard.\u0275fac,providedIn:"root"});class item_page_relationships_guard_ItemPageRelationshipsGuard extends dso_page_single_feature_guard.a{constructor(resolver,authorizationService,router,authService){super(resolver,authorizationService,router,authService),this.resolver=resolver,this.authorizationService=authorizationService,this.router=router,this.authService=authService}getFeatureID(next,state){return Object(of.a)(feature_id.a.CanManageRelationships)}}item_page_relationships_guard_ItemPageRelationshipsGuard.\u0275fac=function ItemPageRelationshipsGuard_Factory(t){return new(t||item_page_relationships_guard_ItemPageRelationshipsGuard)(core["\u0275\u0275inject"](item_page_resolver.a),core["\u0275\u0275inject"](authorization_data_service.a),core["\u0275\u0275inject"](fesm2015_router.g),core["\u0275\u0275inject"](auth_service.a))},item_page_relationships_guard_ItemPageRelationshipsGuard.\u0275prov=core["\u0275\u0275defineInjectable"]({token:item_page_relationships_guard_ItemPageRelationshipsGuard,factory:item_page_relationships_guard_ItemPageRelationshipsGuard.\u0275fac,providedIn:"root"});class item_page_version_history_guard_ItemPageVersionHistoryGuard extends dso_page_single_feature_guard.a{constructor(resolver,authorizationService,router,authService){super(resolver,authorizationService,router,authService),this.resolver=resolver,this.authorizationService=authorizationService,this.router=router,this.authService=authService}getFeatureID(next,state){return Object(of.a)(feature_id.a.CanManageVersions)}}item_page_version_history_guard_ItemPageVersionHistoryGuard.\u0275fac=function ItemPageVersionHistoryGuard_Factory(t){return new(t||item_page_version_history_guard_ItemPageVersionHistoryGuard)(core["\u0275\u0275inject"](item_page_resolver.a),core["\u0275\u0275inject"](authorization_data_service.a),core["\u0275\u0275inject"](fesm2015_router.g),core["\u0275\u0275inject"](auth_service.a))},item_page_version_history_guard_ItemPageVersionHistoryGuard.\u0275prov=core["\u0275\u0275defineInjectable"]({token:item_page_version_history_guard_ItemPageVersionHistoryGuard,factory:item_page_version_history_guard_ItemPageVersionHistoryGuard.\u0275fac,providedIn:"root"});class item_page_collection_mapper_guard_ItemPageCollectionMapperGuard extends dso_page_single_feature_guard.a{constructor(resolver,authorizationService,router,authService){super(resolver,authorizationService,router,authService),this.resolver=resolver,this.authorizationService=authorizationService,this.router=router,this.authService=authService}getFeatureID(next,state){return Object(of.a)(feature_id.a.CanManageMappings)}}item_page_collection_mapper_guard_ItemPageCollectionMapperGuard.\u0275fac=function ItemPageCollectionMapperGuard_Factory(t){return new(t||item_page_collection_mapper_guard_ItemPageCollectionMapperGuard)(core["\u0275\u0275inject"](item_page_resolver.a),core["\u0275\u0275inject"](authorization_data_service.a),core["\u0275\u0275inject"](fesm2015_router.g),core["\u0275\u0275inject"](auth_service.a))},item_page_collection_mapper_guard_ItemPageCollectionMapperGuard.\u0275prov=core["\u0275\u0275defineInjectable"]({token:item_page_collection_mapper_guard_ItemPageCollectionMapperGuard,factory:item_page_collection_mapper_guard_ItemPageCollectionMapperGuard.\u0275fac,providedIn:"root"});class EditItemPageRoutingModule{}EditItemPageRoutingModule.\u0275fac=function EditItemPageRoutingModule_Factory(t){return new(t||EditItemPageRoutingModule)},EditItemPageRoutingModule.\u0275mod=core["\u0275\u0275defineNgModule"]({type:EditItemPageRoutingModule}),EditItemPageRoutingModule.\u0275inj=core["\u0275\u0275defineInjector"]({providers:[i18n_breadcrumb_resolver.a,i18n_breadcrumbs_service.a,resource_policy_resolver.a,resource_policy_target_resolver.a,item_page_reinstate_guard_ItemPageReinstateGuard,item_page_withdraw_guard_ItemPageWithdrawGuard,item_page_administrator_guard.a,item_page_metadata_guard_ItemPageMetadataGuard,item_page_status_guard_ItemPageStatusGuard,item_page_bitstreams_guard_ItemPageBitstreamsGuard,item_page_relationships_guard_ItemPageRelationshipsGuard,item_page_version_history_guard_ItemPageVersionHistoryGuard,item_page_collection_mapper_guard_ItemPageCollectionMapperGuard],imports:[[fesm2015_router.k.forChild([{path:"",resolve:{breadcrumb:i18n_breadcrumb_resolver.a},data:{breadcrumbKey:"item.edit"},children:[{path:"",component:edit_item_page_component_EditItemPageComponent,children:[{path:"",redirectTo:"status",pathMatch:"full"},{path:"status",component:item_status_component_ItemStatusComponent,data:{title:"item.edit.tabs.status.title",showBreadcrumbs:!0},canActivate:[item_page_status_guard_ItemPageStatusGuard]},{path:"bitstreams",component:item_bitstreams_component_ItemBitstreamsComponent,data:{title:"item.edit.tabs.bitstreams.title",showBreadcrumbs:!0},canActivate:[item_page_bitstreams_guard_ItemPageBitstreamsGuard]},{path:"metadata",component:item_metadata_component.a,data:{title:"item.edit.tabs.metadata.title",showBreadcrumbs:!0},canActivate:[item_page_metadata_guard_ItemPageMetadataGuard]},{path:"relationships",component:item_relationships_component_ItemRelationshipsComponent,data:{title:"item.edit.tabs.relationships.title",showBreadcrumbs:!0},canActivate:[item_page_relationships_guard_ItemPageRelationshipsGuard]},{path:"versionhistory",component:item_version_history_component_ItemVersionHistoryComponent,data:{title:"item.edit.tabs.versionhistory.title",showBreadcrumbs:!0},canActivate:[item_page_version_history_guard_ItemPageVersionHistoryGuard]},{path:"mapper",component:item_collection_mapper_component_ItemCollectionMapperComponent,data:{title:"item.edit.tabs.item-mapper.title",showBreadcrumbs:!0},canActivate:[item_page_collection_mapper_guard_ItemPageCollectionMapperGuard]}]},{path:"mapper",component:item_collection_mapper_component_ItemCollectionMapperComponent},{path:edit_item_page_routing_paths.g,component:item_withdraw_component_ItemWithdrawComponent,canActivate:[item_page_withdraw_guard_ItemPageWithdrawGuard]},{path:edit_item_page_routing_paths.f,component:item_reinstate_component_ItemReinstateComponent,canActivate:[item_page_reinstate_guard_ItemPageReinstateGuard]},{path:edit_item_page_routing_paths.d,component:item_private_component_ItemPrivateComponent},{path:edit_item_page_routing_paths.e,component:item_public_component_ItemPublicComponent},{path:edit_item_page_routing_paths.b,component:item_delete_component_ItemDeleteComponent},{path:edit_item_page_routing_paths.c,component:item_move_component_ItemMoveComponent,data:{title:"item.edit.move.title"}},{path:edit_item_page_routing_paths.a,children:[{path:"create",resolve:{resourcePolicyTarget:resource_policy_target_resolver.a},component:resource_policy_create_component.a,data:{title:"resource-policies.create.page.title"}},{path:"edit",resolve:{resourcePolicy:resource_policy_resolver.a},component:resource_policy_edit_component.a,data:{title:"resource-policies.edit.page.title"}},{path:"",component:item_authorizations_component_ItemAuthorizationsComponent,data:{title:"item.edit.authorizations.title"}}]}]}])]]});__webpack_require__("mo41");var search_page_module=__webpack_require__("iprd"),resource_policies_module=__webpack_require__("GFj5");class EditItemPageModule{}EditItemPageModule.\u0275fac=function EditItemPageModule_Factory(t){return new(t||EditItemPageModule)},EditItemPageModule.\u0275mod=core["\u0275\u0275defineNgModule"]({type:EditItemPageModule}),EditItemPageModule.\u0275inj=core["\u0275\u0275defineInjector"]({providers:[bundle_data_service.a,object_values_pipe.a],imports:[[common.CommonModule,shared_module.a,ng_bootstrap.P,EditItemPageRoutingModule,search_page_module.a,drag_drop.d,resource_policies_module.a]]})},Bfzi:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"ItemPageModule",(function(){return ItemPageModule}));var core=__webpack_require__("fXoL"),common=__webpack_require__("ofXK"),shared_module=__webpack_require__("PCNd"),item_page_component=__webpack_require__("bLws"),fesm2015_router=__webpack_require__("tyNb"),item_page_resolver=__webpack_require__("z3/6"),authenticated_guard=__webpack_require__("tPZA"),dso_breadcrumbs_service=__webpack_require__("GCaJ"),item_data_service=__webpack_require__("iqTE"),dso_breadcrumb_resolver=__webpack_require__("hucJ"),item_resolver=__webpack_require__("kGaT");class item_breadcrumb_resolver_ItemBreadcrumbResolver extends dso_breadcrumb_resolver.a{constructor(breadcrumbService,dataService){super(breadcrumbService,dataService),this.breadcrumbService=breadcrumbService,this.dataService=dataService}get followLinks(){return item_resolver.a}}item_breadcrumb_resolver_ItemBreadcrumbResolver.\u0275fac=function ItemBreadcrumbResolver_Factory(t){return new(t||item_breadcrumb_resolver_ItemBreadcrumbResolver)(core["\u0275\u0275inject"](dso_breadcrumbs_service.a),core["\u0275\u0275inject"](item_data_service.a))},item_breadcrumb_resolver_ItemBreadcrumbResolver.\u0275prov=core["\u0275\u0275defineInjectable"]({token:item_breadcrumb_resolver_ItemBreadcrumbResolver,factory:item_breadcrumb_resolver_ItemBreadcrumbResolver.\u0275fac,providedIn:"root"});var follow_link_config_model=__webpack_require__("84Zn"),operators=__webpack_require__("1QIV"),resolver_actions=__webpack_require__("8jtY"),version_data_service=__webpack_require__("LETE"),ngrx_store=__webpack_require__("l7P3");const VERSION_PAGE_LINKS_TO_FOLLOW=[Object(follow_link_config_model.a)("item")];class version_resolver_VersionResolver{constructor(versionService,store,router){this.versionService=versionService,this.store=store,this.router=router}resolve(route,state){const versionRD$=this.versionService.findById(route.params.id,!0,!1,...VERSION_PAGE_LINKS_TO_FOLLOW).pipe(Object(operators.g)());return versionRD$.subscribe((versionRD=>{this.store.dispatch(new resolver_actions.a(state.url,versionRD.payload))})),versionRD$}}version_resolver_VersionResolver.\u0275fac=function VersionResolver_Factory(t){return new(t||version_resolver_VersionResolver)(core["\u0275\u0275inject"](version_data_service.a),core["\u0275\u0275inject"](ngrx_store.i),core["\u0275\u0275inject"](fesm2015_router.g))},version_resolver_VersionResolver.\u0275prov=core["\u0275\u0275defineInjectable"]({token:version_resolver_VersionResolver,factory:version_resolver_VersionResolver.\u0275fac});var link_service=__webpack_require__("sfEo"),map=__webpack_require__("lJxs"),take=__webpack_require__("IzEk"),uploader_options_model=__webpack_require__("ao5O"),empty_util=__webpack_require__("J3qs"),auth_service=__webpack_require__("Vurf"),notifications_service=__webpack_require__("lI3o"),bundle_data_service=__webpack_require__("yhw/"),uploader_component=__webpack_require__("4zj/"),request_service=__webpack_require__("X/78"),app_routing_paths=__webpack_require__("TVZh"),item_page_routing_paths=__webpack_require__("Xioo"),ngx_translate_core=__webpack_require__("sYmb"),var_directive=__webpack_require__("O/5o"),dso_input_suggestions_component=__webpack_require__("Kr+g"),fesm2015_forms=__webpack_require__("3Pt+");function UploadBitstreamComponent_div_0_ng_container_2_ng_container_10_div_2_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"div"),core["\u0275\u0275text"](1,"\n            "),core["\u0275\u0275elementStart"](2,"span",7),core["\u0275\u0275text"](3),core["\u0275\u0275pipe"](4,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](5,"\n            "),core["\u0275\u0275elementStart"](6,"span"),core["\u0275\u0275text"](7),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](8,"\n          "),core["\u0275\u0275elementEnd"]()),2&rf){const item_r7=core["\u0275\u0275nextContext"]().ngVar;core["\u0275\u0275advance"](3),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](4,2,"item.bitstreams.upload.item")),core["\u0275\u0275advance"](4),core["\u0275\u0275textInterpolate"](item_r7.name)}}function UploadBitstreamComponent_div_0_ng_container_2_ng_container_10_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementContainerStart"](0),core["\u0275\u0275text"](1,"\n          "),core["\u0275\u0275template"](2,UploadBitstreamComponent_div_0_ng_container_2_ng_container_10_div_2_Template,9,4,"div",2),core["\u0275\u0275text"](3,"\n        "),core["\u0275\u0275elementContainerEnd"]()),2&rf){const item_r7=ctx.ngVar;core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",item_r7)}}function UploadBitstreamComponent_div_0_ng_container_2_button_25_Template(rf,ctx){if(1&rf){const _r11=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementStart"](0,"button",13),core["\u0275\u0275listener"]("click",(function UploadBitstreamComponent_div_0_ng_container_2_button_25_Template_button_click_0_listener(){core["\u0275\u0275restoreView"](_r11);return core["\u0275\u0275nextContext"](3).createBundle()})),core["\u0275\u0275text"](1,"\n          "),core["\u0275\u0275element"](2,"i",14),core["\u0275\u0275text"](3),core["\u0275\u0275pipe"](4,"translate"),core["\u0275\u0275elementEnd"]()}2&rf&&(core["\u0275\u0275advance"](3),core["\u0275\u0275textInterpolate1"](" ",core["\u0275\u0275pipeBind1"](4,1,"item.bitstreams.upload.bundle.new"),"\n        "))}function UploadBitstreamComponent_div_0_ng_container_2_ds_uploader_27_Template(rf,ctx){if(1&rf){const _r13=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementStart"](0,"ds-uploader",15),core["\u0275\u0275listener"]("onCompleteItem",(function UploadBitstreamComponent_div_0_ng_container_2_ds_uploader_27_Template_ds_uploader_onCompleteItem_0_listener($event){core["\u0275\u0275restoreView"](_r13);return core["\u0275\u0275nextContext"](3).onCompleteItem($event)}))("onUploadError",(function UploadBitstreamComponent_div_0_ng_container_2_ds_uploader_27_Template_ds_uploader_onUploadError_0_listener(){core["\u0275\u0275restoreView"](_r13);return core["\u0275\u0275nextContext"](3).onUploadError()})),core["\u0275\u0275elementEnd"]()}if(2&rf){const ctx_r6=core["\u0275\u0275nextContext"](3);core["\u0275\u0275property"]("dropMsg","item.bitstreams.upload.drop-message")("dropOverDocumentMsg","item.bitstreams.upload.drop-message")("enableDragOverDocument",!0)("uploadFilesOptions",ctx_r6.uploadFilesOptions)}}function UploadBitstreamComponent_div_0_ng_container_2_Template(rf,ctx){if(1&rf){const _r16=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementContainerStart"](0),core["\u0275\u0275text"](1,"\n    "),core["\u0275\u0275elementStart"](2,"div",3),core["\u0275\u0275text"](3,"\n      "),core["\u0275\u0275elementStart"](4,"div",4),core["\u0275\u0275text"](5,"\n        "),core["\u0275\u0275elementStart"](6,"h2"),core["\u0275\u0275text"](7),core["\u0275\u0275pipe"](8,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](9,"\n        "),core["\u0275\u0275template"](10,UploadBitstreamComponent_div_0_ng_container_2_ng_container_10_Template,4,1,"ng-container",5),core["\u0275\u0275pipe"](11,"async"),core["\u0275\u0275text"](12,"\n      "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](13,"\n      "),core["\u0275\u0275elementStart"](14,"div",6),core["\u0275\u0275text"](15,"\n        "),core["\u0275\u0275elementStart"](16,"label",7),core["\u0275\u0275text"](17),core["\u0275\u0275pipe"](18,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](19,"\n        "),core["\u0275\u0275elementStart"](20,"ds-dso-input-suggestions",8,9),core["\u0275\u0275listener"]("ngModelChange",(function UploadBitstreamComponent_div_0_ng_container_2_Template_ds_dso_input_suggestions_ngModelChange_20_listener($event){core["\u0275\u0275restoreView"](_r16);return core["\u0275\u0275nextContext"](2).selectedBundleName=$event}))("typeSuggestion",(function UploadBitstreamComponent_div_0_ng_container_2_Template_ds_dso_input_suggestions_typeSuggestion_20_listener(){core["\u0275\u0275restoreView"](_r16);return core["\u0275\u0275nextContext"](2).bundleNameChange()}))("clickSuggestion",(function UploadBitstreamComponent_div_0_ng_container_2_Template_ds_dso_input_suggestions_clickSuggestion_20_listener($event){core["\u0275\u0275restoreView"](_r16);return core["\u0275\u0275nextContext"](2).onClick($event)}))("click",(function UploadBitstreamComponent_div_0_ng_container_2_Template_ds_dso_input_suggestions_click_20_listener(){core["\u0275\u0275restoreView"](_r16);return core["\u0275\u0275reference"](21).open()})),core["\u0275\u0275pipe"](22,"translate"),core["\u0275\u0275text"](23,"\n        "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](24,"\n        "),core["\u0275\u0275template"](25,UploadBitstreamComponent_div_0_ng_container_2_button_25_Template,5,3,"button",10),core["\u0275\u0275text"](26,"\n        "),core["\u0275\u0275template"](27,UploadBitstreamComponent_div_0_ng_container_2_ds_uploader_27_Template,1,4,"ds-uploader",11),core["\u0275\u0275text"](28,"\n        "),core["\u0275\u0275elementStart"](29,"button",12),core["\u0275\u0275listener"]("click",(function UploadBitstreamComponent_div_0_ng_container_2_Template_button_click_29_listener(){core["\u0275\u0275restoreView"](_r16);return core["\u0275\u0275nextContext"](2).onCancel()})),core["\u0275\u0275text"](30),core["\u0275\u0275pipe"](31,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](32,"\n      "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](33,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](34,"\n  "),core["\u0275\u0275elementContainerEnd"]()}if(2&rf){const bundles_r1=core["\u0275\u0275nextContext"]().ngVar,ctx_r2=core["\u0275\u0275nextContext"]();let tmp_1_0=null;core["\u0275\u0275advance"](7),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](8,12,"item.bitstreams.upload.title")),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("ngVar",null==(tmp_1_0=core["\u0275\u0275pipeBind1"](11,14,ctx_r2.itemRD$))?null:tmp_1_0.payload),core["\u0275\u0275advance"](7),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](18,16,"item.bitstreams.upload.bundle")),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("suggestions",bundles_r1)("placeholder",core["\u0275\u0275pipeBind1"](22,18,"item.bitstreams.upload.bundle.placeholder"))("action",ctx_r2.getCurrentUrl())("name","bundle-select")("debounceTime",50)("ngModel",ctx_r2.selectedBundleName),core["\u0275\u0275advance"](5),core["\u0275\u0275property"]("ngIf",!ctx_r2.selectedBundleId&&(null==ctx_r2.selectedBundleName?null:ctx_r2.selectedBundleName.length)>0),core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",ctx_r2.selectedBundleId),core["\u0275\u0275advance"](3),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](31,20,"item.bitstreams.upload.cancel"))}}function UploadBitstreamComponent_div_0_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"div",1),core["\u0275\u0275text"](1,"\n  "),core["\u0275\u0275template"](2,UploadBitstreamComponent_div_0_ng_container_2_Template,35,22,"ng-container",2),core["\u0275\u0275text"](3,"\n"),core["\u0275\u0275elementEnd"]()),2&rf){const bundles_r1=ctx.ngVar;core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",bundles_r1)}}class upload_bitstream_component_UploadBitstreamComponent{constructor(route,router,itemService,bundleService,authService,notificationsService,translate,requestService){this.route=route,this.router=router,this.itemService=itemService,this.bundleService=bundleService,this.authService=authService,this.notificationsService=notificationsService,this.translate=translate,this.requestService=requestService,this.uploadFilesOptions=Object.assign(new uploader_options_model.a,{url:"placeholder",authToken:null,disableMultipart:!1,itemAlias:null}),this.NOTIFICATIONS_PREFIX="item.bitstreams.upload.notifications.",this.subs=[]}ngOnInit(){this.itemId=this.route.snapshot.params.id,this.entityType=this.route.snapshot.params["entity-type"],this.itemRD$=this.route.data.pipe(Object(map.a)((data=>data.dso))),this.bundlesRD$=this.itemService.getBundles(this.itemId),this.selectedBundleId=this.route.snapshot.queryParams.bundle,Object(empty_util.e)(this.selectedBundleId)&&(this.bundleService.findById(this.selectedBundleId).pipe(Object(operators.j)()).subscribe((bundle=>{this.selectedBundleName=bundle.name})),this.setUploadUrl())}createBundle(){this.itemService.createBundle(this.itemId,this.selectedBundleName).pipe(Object(operators.j)()).subscribe((bundle=>{this.selectedBundleId=bundle.id,this.notificationsService.success(this.translate.instant(this.NOTIFICATIONS_PREFIX+"bundle.created.title"),this.translate.instant(this.NOTIFICATIONS_PREFIX+"bundle.created.content")),this.setUploadUrl()}))}bundleNameChange(){this.selectedBundleId=void 0}setUploadUrl(){this.bundleService.getBitstreamsEndpoint(this.selectedBundleId).pipe(Object(take.a)(1)).subscribe((href=>{this.uploadFilesOptions.url=href,Object(empty_util.d)(this.uploadFilesOptions.authToken)&&(this.uploadFilesOptions.authToken=this.authService.buildAuthHeader()),this.uploaderComponent&&(this.uploaderComponent.ngOnInit(),this.uploaderComponent.ngAfterViewInit())}))}onCompleteItem(bitstream){this.bundleService.getBitstreamsEndpoint(this.selectedBundleId).pipe(Object(take.a)(1)).subscribe((href=>{this.requestService.removeByHrefSubstring(href)}));const queryParams={itemId:this.itemId,entityType:this.entityType};this.router.navigate([Object(app_routing_paths.p)(),bitstream.id,"edit"],{queryParams:queryParams})}onUploadError(){this.notificationsService.error(null,this.translate.get(this.NOTIFICATIONS_PREFIX+"upload.failed"))}onClick(bundle){this.selectedBundleId=bundle.id,this.selectedBundleName=bundle.name,this.setUploadUrl()}onCancel(){this.router.navigate([Object(item_page_routing_paths.d)(this.entityType,this.itemId),"bitstreams"])}getCurrentUrl(){return this.router.url}ngOnDestroy(){this.subs.filter((subscription=>Object(empty_util.b)(subscription))).forEach((subscription=>subscription.unsubscribe()))}}upload_bitstream_component_UploadBitstreamComponent.\u0275fac=function UploadBitstreamComponent_Factory(t){return new(t||upload_bitstream_component_UploadBitstreamComponent)(core["\u0275\u0275directiveInject"](fesm2015_router.a),core["\u0275\u0275directiveInject"](fesm2015_router.g),core["\u0275\u0275directiveInject"](item_data_service.a),core["\u0275\u0275directiveInject"](bundle_data_service.a),core["\u0275\u0275directiveInject"](auth_service.a),core["\u0275\u0275directiveInject"](notifications_service.a),core["\u0275\u0275directiveInject"](ngx_translate_core.e),core["\u0275\u0275directiveInject"](request_service.a))},upload_bitstream_component_UploadBitstreamComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:upload_bitstream_component_UploadBitstreamComponent,selectors:[["ds-upload-bitstream"]],viewQuery:function UploadBitstreamComponent_Query(rf,ctx){if(1&rf&&core["\u0275\u0275viewQuery"](uploader_component.a,1),2&rf){let _t;core["\u0275\u0275queryRefresh"](_t=core["\u0275\u0275loadQuery"]())&&(ctx.uploaderComponent=_t.first)}},decls:3,vars:3,consts:[["class","container",4,"ngVar"],[1,"container"],[4,"ngIf"],[1,"row"],[1,"col-12","mb-4"],[4,"ngVar"],[1,"col-12"],[1,"font-weight-bold"],["id","search-form","ngDefaultControl","",3,"suggestions","placeholder","action","name","debounceTime","ngModel","ngModelChange","typeSuggestion","clickSuggestion","click"],["f",""],["class","btn btn-success",3,"click",4,"ngIf"],["class","w-100",3,"dropMsg","dropOverDocumentMsg","enableDragOverDocument","uploadFilesOptions","onCompleteItem","onUploadError",4,"ngIf"],[1,"btn","btn-outline-secondary",3,"click"],[1,"btn","btn-success",3,"click"],[1,"fa","fa-plus"],[1,"w-100",3,"dropMsg","dropOverDocumentMsg","enableDragOverDocument","uploadFilesOptions","onCompleteItem","onUploadError"]],template:function UploadBitstreamComponent_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275template"](0,UploadBitstreamComponent_div_0_Template,4,1,"div",0),core["\u0275\u0275pipe"](1,"async"),core["\u0275\u0275text"](2,"\n")),2&rf){let tmp_0_0=null;core["\u0275\u0275property"]("ngVar",null==(tmp_0_0=core["\u0275\u0275pipeBind1"](1,1,ctx.bundlesRD$))||null==tmp_0_0.payload?null:tmp_0_0.payload.page)}},directives:[var_directive.a,common.NgIf,dso_input_suggestions_component.a,fesm2015_forms.DefaultValueAccessor,fesm2015_forms.NgControlStatus,fesm2015_forms.NgModel,uploader_component.a],pipes:[common.AsyncPipe,ngx_translate_core.d],encapsulation:2});var item_page_administrator_guard=__webpack_require__("920W"),initial_menus_state=__webpack_require__("ierV"),themed_component=__webpack_require__("JTKQ");function ThemedItemPageComponent_ng_template_0_Template(rf,ctx){}class themed_item_page_component_ThemedItemPageComponent extends themed_component.a{getComponentName(){return"ItemPageComponent"}importThemedComponent(themeName){return __webpack_require__("THHU")(`./${themeName}/app/item-page/simple/item-page.component`)}importUnthemedComponent(){return Promise.resolve().then(__webpack_require__.bind(null,"bLws"))}}themed_item_page_component_ThemedItemPageComponent.\u0275fac=function ThemedItemPageComponent_Factory(t){return \u0275ThemedItemPageComponent_BaseFactory(t||themed_item_page_component_ThemedItemPageComponent)},themed_item_page_component_ThemedItemPageComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:themed_item_page_component_ThemedItemPageComponent,selectors:[["ds-themed-item-page"]],features:[core["\u0275\u0275InheritDefinitionFeature"]],decls:3,vars:0,consts:[["vcr",""]],template:function ThemedItemPageComponent_Template(rf,ctx){1&rf&&(core["\u0275\u0275template"](0,ThemedItemPageComponent_ng_template_0_Template,0,0,"ng-template",null,0,core["\u0275\u0275templateRefExtractor"]),core["\u0275\u0275text"](2,"\n"))},encapsulation:2});const \u0275ThemedItemPageComponent_BaseFactory=core["\u0275\u0275getInheritedFactory"](themed_item_page_component_ThemedItemPageComponent);var themed_full_item_page_component=__webpack_require__("Nh4g"),switchMap=__webpack_require__("eIep");class version_page_component_VersionPageComponent{constructor(route,router,versionService,authService){this.route=route,this.router=router,this.versionService=versionService,this.authService=authService}ngOnInit(){this.versionRD$=this.route.data.pipe(Object(map.a)((data=>data.dso)),Object(operators.t)(this.router,this.authService)),this.versionRD$.pipe(Object(operators.j)(),Object(switchMap.a)((version=>version.item)),Object(operators.t)(this.router,this.authService),Object(operators.g)()).subscribe((itemRD=>{if(itemRD.hasNoContent)this.router.navigateByUrl(Object(app_routing_paths.x)(),{skipLocationChange:!0});else{const itemUrl=Object(item_page_routing_paths.h)(itemRD.payload);this.router.navigateByUrl(itemUrl)}}))}}version_page_component_VersionPageComponent.\u0275fac=function VersionPageComponent_Factory(t){return new(t||version_page_component_VersionPageComponent)(core["\u0275\u0275directiveInject"](fesm2015_router.a),core["\u0275\u0275directiveInject"](fesm2015_router.g),core["\u0275\u0275directiveInject"](version_data_service.a),core["\u0275\u0275directiveInject"](auth_service.a))},version_page_component_VersionPageComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:version_page_component_VersionPageComponent,selectors:[["ds-version-page"]],decls:0,vars:0,template:function VersionPageComponent_Template(rf,ctx){},styles:[""]});var bitstream_request_a_copy_page_component=__webpack_require__("EtOH");class ItemPageRoutingModule{}ItemPageRoutingModule.\u0275fac=function ItemPageRoutingModule_Factory(t){return new(t||ItemPageRoutingModule)},ItemPageRoutingModule.\u0275mod=core["\u0275\u0275defineNgModule"]({type:ItemPageRoutingModule}),ItemPageRoutingModule.\u0275inj=core["\u0275\u0275defineInjector"]({providers:[item_page_resolver.a,item_breadcrumb_resolver_ItemBreadcrumbResolver,dso_breadcrumbs_service.a,link_service.a,item_page_administrator_guard.a,version_resolver_VersionResolver],imports:[[fesm2015_router.k.forChild([{path:":id",resolve:{dso:item_page_resolver.a,breadcrumb:item_breadcrumb_resolver_ItemBreadcrumbResolver},runGuardsAndResolvers:"always",children:[{path:"",component:themed_item_page_component_ThemedItemPageComponent,pathMatch:"full"},{path:"full",component:themed_full_item_page_component.a},{path:item_page_routing_paths.a,loadChildren:()=>Promise.resolve().then(__webpack_require__.bind(null,"BZkK")).then((m=>m.EditItemPageModule))},{path:item_page_routing_paths.c,component:upload_bitstream_component_UploadBitstreamComponent,canActivate:[authenticated_guard.a]},{path:app_routing_paths.k,component:bitstream_request_a_copy_page_component.a}],data:{menu:{public:[{id:"statistics_item_:id",active:!0,visible:!0,model:{type:initial_menus_state.b.LINK,text:"menu.section.statistics",link:"statistics/items/:id/"}}]}}},{path:"version",children:[{path:":id",component:version_page_component_VersionPageComponent,resolve:{dso:version_resolver_VersionResolver}}]}])]]});var metadata_uri_values_component=__webpack_require__("uHSr"),item_model=__webpack_require__("PN+Z"),item_page_field_component=__webpack_require__("BNb2"),metadata_values_component=__webpack_require__("r8yk");class item_page_author_field_component_ItemPageAuthorFieldComponent extends item_page_field_component.a{constructor(){super(...arguments),this.fields=["dc.contributor.author","dc.creator","dc.contributor"],this.label="item.page.author"}}item_page_author_field_component_ItemPageAuthorFieldComponent.\u0275fac=function ItemPageAuthorFieldComponent_Factory(t){return \u0275ItemPageAuthorFieldComponent_BaseFactory(t||item_page_author_field_component_ItemPageAuthorFieldComponent)},item_page_author_field_component_ItemPageAuthorFieldComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:item_page_author_field_component_ItemPageAuthorFieldComponent,selectors:[["ds-item-page-author-field"]],inputs:{item:"item"},features:[core["\u0275\u0275InheritDefinitionFeature"]],decls:5,vars:3,consts:[[1,"item-page-field"],[3,"mdValues","separator","label"]],template:function ItemPageAuthorFieldComponent_Template(rf,ctx){1&rf&&(core["\u0275\u0275elementStart"](0,"div",0),core["\u0275\u0275text"](1,"\n  "),core["\u0275\u0275element"](2,"ds-metadata-values",1),core["\u0275\u0275text"](3,"\n"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](4,"\n")),2&rf&&(core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("mdValues",null==ctx.item?null:ctx.item.allMetadata(ctx.fields))("separator",ctx.separator)("label",ctx.label))},directives:[metadata_values_component.a],encapsulation:2});const \u0275ItemPageAuthorFieldComponent_BaseFactory=core["\u0275\u0275getInheritedFactory"](item_page_author_field_component_ItemPageAuthorFieldComponent);var item_page_date_field_component=__webpack_require__("S43d"),item_page_abstract_field_component=__webpack_require__("D3p6"),item_page_uri_field_component=__webpack_require__("2QIh"),item_page_title_field_component=__webpack_require__("7Ido"),collections_component=__webpack_require__("xsD3"),full_item_page_component=__webpack_require__("wzod"),full_file_section_component=__webpack_require__("mJyT"),publication_component=__webpack_require__("IyKa"),item_component=__webpack_require__("gkHw"),edit_item_page_module=__webpack_require__("BZkK"),statistics_module=__webpack_require__("9i+i"),abstract_incremental_list_component=__webpack_require__("KbUz"),tslib=__webpack_require__("zOht"),view_mode_model=__webpack_require__("3jCq"),listable_object_decorator=__webpack_require__("4v6T"),item_versions_summary_modal_component=__webpack_require__("9uC3"),tap=__webpack_require__("vkgz"),version_history_data_service=__webpack_require__("U7ot"),item_versions_shared_service=__webpack_require__("A0kF"),workspaceitem_data_service=__webpack_require__("+zRf"),search_service=__webpack_require__("gWc+"),route_service=__webpack_require__("ppE2"),ng_bootstrap=__webpack_require__("1kSV");class versioned_item_component_VersionedItemComponent extends item_component.a{constructor(modalService,versionHistoryService,translateService,versionService,itemVersionShared,router,workspaceItemDataService,searchService,itemService,routeService){super(routeService),this.modalService=modalService,this.versionHistoryService=versionHistoryService,this.translateService=translateService,this.versionService=versionService,this.itemVersionShared=itemVersionShared,this.router=router,this.workspaceItemDataService=workspaceItemDataService,this.searchService=searchService,this.itemService=itemService,this.routeService=routeService}onCreateNewVersion(){const item=this.object,versionHref=item._links.version.href,activeModal=this.modalService.open(item_versions_summary_modal_component.a);this.versionService.findByHref(versionHref).pipe(Object(operators.g)()).subscribe((res=>{activeModal.componentInstance.firstVersion=res.hasNoContent,activeModal.componentInstance.versionNumber=res.hasNoContent?void 0:res.payload.version})),activeModal.componentInstance.createVersionEvent.pipe(Object(switchMap.a)((summary=>this.versionHistoryService.createVersion(item._links.self.href,summary))),Object(operators.g)(),Object(tap.a)((res=>{this.itemVersionShared.notifyCreateNewVersion(res)})),Object(operators.j)(),Object(switchMap.a)((newVersion=>this.itemService.findByHref(newVersion._links.item.href))),Object(operators.j)(),Object(switchMap.a)((newVersionItem=>this.workspaceItemDataService.findByItem(newVersionItem.uuid,!0,!1))),Object(operators.j)()).subscribe((wsItem=>{const route="workspaceitems/"+wsItem.id+"/edit";this.router.navigateByUrl(route)}))}}versioned_item_component_VersionedItemComponent.\u0275fac=function VersionedItemComponent_Factory(t){return new(t||versioned_item_component_VersionedItemComponent)(core["\u0275\u0275directiveInject"](ng_bootstrap.q),core["\u0275\u0275directiveInject"](version_history_data_service.a),core["\u0275\u0275directiveInject"](ngx_translate_core.e),core["\u0275\u0275directiveInject"](version_data_service.a),core["\u0275\u0275directiveInject"](item_versions_shared_service.a),core["\u0275\u0275directiveInject"](fesm2015_router.g),core["\u0275\u0275directiveInject"](workspaceitem_data_service.a),core["\u0275\u0275directiveInject"](search_service.a),core["\u0275\u0275directiveInject"](item_data_service.a),core["\u0275\u0275directiveInject"](route_service.a))},versioned_item_component_VersionedItemComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:versioned_item_component_VersionedItemComponent,selectors:[["ds-versioned-item"]],features:[core["\u0275\u0275InheritDefinitionFeature"]],decls:0,vars:0,template:function VersionedItemComponent_Template(rf,ctx){},styles:[""]});var dso_page_version_button_component=__webpack_require__("2cPK"),dso_page_edit_button_component=__webpack_require__("uVW2"),themed_file_section_component=__webpack_require__("/Y66"),metadata_representation_list_component=__webpack_require__("OuN+"),generic_item_page_field_component=__webpack_require__("3iiV"),mirador_viewer_component=__webpack_require__("Qz8b"),metadata_field_wrapper_component=__webpack_require__("QCrl"),thumbnail_component=__webpack_require__("/lGE"),media_viewer_component=__webpack_require__("7ddw");function UntypedItemComponent_div_0_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"div",7),core["\u0275\u0275text"](1,"\n  "),core["\u0275\u0275elementStart"](2,"div",17),core["\u0275\u0275text"](3,"\n    "),core["\u0275\u0275elementStart"](4,"ds-mirador-viewer",18),core["\u0275\u0275pipe"](5,"async"),core["\u0275\u0275text"](6,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](7,"\n  "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](8,"\n"),core["\u0275\u0275elementEnd"]()),2&rf){const ctx_r0=core["\u0275\u0275nextContext"]();core["\u0275\u0275advance"](4),core["\u0275\u0275property"]("object",ctx_r0.object)("searchable",ctx_r0.iiifSearchEnabled)("query",core["\u0275\u0275pipeBind1"](5,3,ctx_r0.iiifQuery$))}}function UntypedItemComponent_ng_container_21_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementContainerStart"](0),core["\u0275\u0275text"](1,"\n      "),core["\u0275\u0275elementStart"](2,"ds-metadata-field-wrapper",19),core["\u0275\u0275text"](3,"\n        "),core["\u0275\u0275element"](4,"ds-thumbnail",20),core["\u0275\u0275pipe"](5,"async"),core["\u0275\u0275text"](6,"\n      "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](7,"\n    "),core["\u0275\u0275elementContainerEnd"]()),2&rf){const ctx_r1=core["\u0275\u0275nextContext"]();core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("hideIfNoTextContent",!1),core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("thumbnail",core["\u0275\u0275pipeBind1"](5,2,null==ctx_r1.object?null:ctx_r1.object.thumbnail))}}function UntypedItemComponent_ng_container_23_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementContainerStart"](0),core["\u0275\u0275text"](1,"\n      "),core["\u0275\u0275element"](2,"ds-media-viewer",21),core["\u0275\u0275text"](3,"\n    "),core["\u0275\u0275elementContainerEnd"]()),2&rf){const ctx_r2=core["\u0275\u0275nextContext"]();core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("item",ctx_r2.object)("videoOptions",ctx_r2.mediaViewer.video)}}const _c0=function(){return["dc.title"]},_c1=function(){return["dc.contributor.author","dc.creator"]},_c2=function(){return["journal.title"]},_c3=function(){return["journal.identifier.issn"]},_c4=function(){return["journalvolume.identifier.name"]},_c5=function(){return["dc.publisher"]},_c6=function(){return["dc.description"]},_c7=function(){return["dc.subject"]},_c8=function(){return["dc.identifier.citation"]},_c9=function(){return["dc.identifier.uri"]},_c10=function(a0){return[a0]};let untyped_item_component_UntypedItemComponent=class extends versioned_item_component_VersionedItemComponent{};untyped_item_component_UntypedItemComponent.\u0275fac=function UntypedItemComponent_Factory(t){return \u0275UntypedItemComponent_BaseFactory(t||untyped_item_component_UntypedItemComponent)},untyped_item_component_UntypedItemComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:untyped_item_component_UntypedItemComponent,selectors:[["ds-untyped-item"]],features:[core["\u0275\u0275InheritDefinitionFeature"]],decls:75,vars:61,consts:[["class","row",4,"ngIf"],[1,"d-flex","flex-row"],[1,"item-page-title-field","mr-auto"],[3,"mdValues"],[1,"pl-2"],[3,"dso","tooltipMsgCreate","tooltipMsgHasDraft","newVersionEvent"],[3,"pageRoute","dso","tooltipMsg"],[1,"row"],[1,"col-xs-12","col-md-4"],[4,"ngIf"],[3,"item"],[1,"ds-item-page-mixed-author-field",3,"parentItem","itemType","metadataFields","label"],[3,"item","fields","label"],[1,"col-xs-12","col-md-6"],[3,"item","fields","separator","label"],["role","button",1,"btn","btn-outline-primary",3,"routerLink"],[1,"fas","fa-info-circle"],[1,"col-12"],["id","iiif-viewer",3,"object","searchable","query"],[3,"hideIfNoTextContent"],[3,"thumbnail"],[3,"item","videoOptions"]],template:function UntypedItemComponent_Template(rf,ctx){1&rf&&(core["\u0275\u0275template"](0,UntypedItemComponent_div_0_Template,9,5,"div",0),core["\u0275\u0275text"](1,"\n"),core["\u0275\u0275elementStart"](2,"div",1),core["\u0275\u0275text"](3,"\n  "),core["\u0275\u0275elementStart"](4,"h2",2),core["\u0275\u0275text"](5,"\n    "),core["\u0275\u0275element"](6,"ds-metadata-values",3),core["\u0275\u0275text"](7,"\n  "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](8,"\n  "),core["\u0275\u0275elementStart"](9,"div",4),core["\u0275\u0275text"](10,"\n    "),core["\u0275\u0275elementStart"](11,"ds-dso-page-version-button",5),core["\u0275\u0275listener"]("newVersionEvent",(function UntypedItemComponent_Template_ds_dso_page_version_button_newVersionEvent_11_listener(){return ctx.onCreateNewVersion()})),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](12,"\n    "),core["\u0275\u0275element"](13,"ds-dso-page-edit-button",6),core["\u0275\u0275text"](14,"\n  "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](15,"\n"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](16,"\n"),core["\u0275\u0275elementStart"](17,"div",7),core["\u0275\u0275text"](18,"\n  "),core["\u0275\u0275elementStart"](19,"div",8),core["\u0275\u0275text"](20,"\n    "),core["\u0275\u0275template"](21,UntypedItemComponent_ng_container_21_Template,8,4,"ng-container",9),core["\u0275\u0275text"](22,"\n    "),core["\u0275\u0275template"](23,UntypedItemComponent_ng_container_23_Template,4,2,"ng-container",9),core["\u0275\u0275text"](24,"\n    "),core["\u0275\u0275element"](25,"ds-themed-item-page-file-section",10),core["\u0275\u0275text"](26,"\n    "),core["\u0275\u0275element"](27,"ds-item-page-date-field",10),core["\u0275\u0275text"](28,"\n    "),core["\u0275\u0275elementStart"](29,"ds-metadata-representation-list",11),core["\u0275\u0275pipe"](30,"translate"),core["\u0275\u0275text"](31,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](32,"\n    "),core["\u0275\u0275elementStart"](33,"ds-generic-item-page-field",12),core["\u0275\u0275text"](34,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](35,"\n    "),core["\u0275\u0275elementStart"](36,"ds-generic-item-page-field",12),core["\u0275\u0275text"](37,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](38,"\n    "),core["\u0275\u0275elementStart"](39,"ds-generic-item-page-field",12),core["\u0275\u0275text"](40,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](41,"\n    "),core["\u0275\u0275elementStart"](42,"ds-generic-item-page-field",12),core["\u0275\u0275text"](43,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](44,"\n  "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](45,"\n  "),core["\u0275\u0275elementStart"](46,"div",13),core["\u0275\u0275text"](47,"\n    "),core["\u0275\u0275element"](48,"ds-item-page-abstract-field",10),core["\u0275\u0275text"](49,"\n    "),core["\u0275\u0275elementStart"](50,"ds-generic-item-page-field",12),core["\u0275\u0275text"](51,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](52,"\n\n    "),core["\u0275\u0275elementStart"](53,"ds-generic-item-page-field",14),core["\u0275\u0275text"](54,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](55,"\n    "),core["\u0275\u0275elementStart"](56,"ds-generic-item-page-field",12),core["\u0275\u0275text"](57,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](58,"\n    "),core["\u0275\u0275elementStart"](59,"ds-item-page-uri-field",12),core["\u0275\u0275text"](60,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](61,"\n    "),core["\u0275\u0275element"](62,"ds-item-page-collections",10),core["\u0275\u0275text"](63,"\n    "),core["\u0275\u0275elementStart"](64,"div"),core["\u0275\u0275text"](65,"\n      "),core["\u0275\u0275elementStart"](66,"a",15),core["\u0275\u0275text"](67,"\n        "),core["\u0275\u0275element"](68,"i",16),core["\u0275\u0275text"](69),core["\u0275\u0275pipe"](70,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](71,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](72,"\n  "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](73,"\n"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](74,"\n")),2&rf&&(core["\u0275\u0275property"]("ngIf",ctx.iiifEnabled),core["\u0275\u0275advance"](6),core["\u0275\u0275property"]("mdValues",null==ctx.object?null:ctx.object.allMetadata(core["\u0275\u0275pureFunction0"](49,_c0))),core["\u0275\u0275advance"](5),core["\u0275\u0275property"]("dso",ctx.object)("tooltipMsgCreate","item.page.version.create")("tooltipMsgHasDraft","item.page.version.hasDraft"),core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("pageRoute",ctx.itemPageRoute)("dso",ctx.object)("tooltipMsg","item.page.edit"),core["\u0275\u0275advance"](8),core["\u0275\u0275property"]("ngIf",!ctx.mediaViewer.image),core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",ctx.mediaViewer.image),core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("item",ctx.object),core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("item",ctx.object),core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("parentItem",ctx.object)("itemType","Person")("metadataFields",core["\u0275\u0275pureFunction0"](50,_c1))("label",core["\u0275\u0275pipeBind1"](30,45,"relationships.isAuthorOf")),core["\u0275\u0275advance"](4),core["\u0275\u0275property"]("item",ctx.object)("fields",core["\u0275\u0275pureFunction0"](51,_c2))("label","item.page.journal-title"),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("item",ctx.object)("fields",core["\u0275\u0275pureFunction0"](52,_c3))("label","item.page.journal-issn"),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("item",ctx.object)("fields",core["\u0275\u0275pureFunction0"](53,_c4))("label","item.page.volume-title"),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("item",ctx.object)("fields",core["\u0275\u0275pureFunction0"](54,_c5))("label","item.page.publisher"),core["\u0275\u0275advance"](6),core["\u0275\u0275property"]("item",ctx.object),core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("item",ctx.object)("fields",core["\u0275\u0275pureFunction0"](55,_c6))("label","item.page.description"),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("item",ctx.object)("fields",core["\u0275\u0275pureFunction0"](56,_c7))("separator",",")("label","item.page.subject"),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("item",ctx.object)("fields",core["\u0275\u0275pureFunction0"](57,_c8))("label","item.page.citation"),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("item",ctx.object)("fields",core["\u0275\u0275pureFunction0"](58,_c9))("label","item.page.uri"),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("item",ctx.object),core["\u0275\u0275advance"](4),core["\u0275\u0275property"]("routerLink",core["\u0275\u0275pureFunction1"](59,_c10,ctx.itemPageRoute+"/full")),core["\u0275\u0275advance"](3),core["\u0275\u0275textInterpolate1"](" ",core["\u0275\u0275pipeBind1"](70,47,"item.page.link.full"),"\n      "))},directives:[common.NgIf,metadata_values_component.a,dso_page_version_button_component.a,dso_page_edit_button_component.a,themed_file_section_component.a,item_page_date_field_component.a,metadata_representation_list_component.a,generic_item_page_field_component.a,item_page_abstract_field_component.a,item_page_uri_field_component.a,collections_component.a,fesm2015_router.j,mirador_viewer_component.a,metadata_field_wrapper_component.a,thumbnail_component.a,media_viewer_component.a],pipes:[ngx_translate_core.d,common.AsyncPipe],styles:[""],changeDetection:0}),untyped_item_component_UntypedItemComponent=Object(tslib.__decorate)([Object(listable_object_decorator.e)(item_model.a,view_mode_model.a.StandalonePage)],untyped_item_component_UntypedItemComponent);const \u0275UntypedItemComponent_BaseFactory=core["\u0275\u0275getInheritedFactory"](untyped_item_component_UntypedItemComponent);var journal_entities_module=__webpack_require__("N0eT"),research_entities_module=__webpack_require__("udvk"),media_viewer_video_component=__webpack_require__("zOWY"),media_viewer_image_component=__webpack_require__("eDcZ"),kolkov_ngx_gallery=__webpack_require__("XGsO");const ENTRY_COMPONENTS=[publication_component.a,untyped_item_component_UntypedItemComponent];themed_file_section_component.a,item_page_component.ItemPageComponent,full_item_page_component.FullItemPageComponent,themed_full_item_page_component.a,metadata_uri_values_component.a,item_page_date_field_component.a,item_page_abstract_field_component.a,item_page_uri_field_component.a,item_page_title_field_component.a,item_page_field_component.a,collections_component.a,full_file_section_component.a,publication_component.a,item_component.a,abstract_incremental_list_component.a,media_viewer_component.a,media_viewer_video_component.a,media_viewer_image_component.a,mirador_viewer_component.a;class ItemPageModule{static withEntryComponents(){return{ngModule:ItemPageModule,providers:ENTRY_COMPONENTS.map((component=>({provide:component})))}}}ItemPageModule.\u0275fac=function ItemPageModule_Factory(t){return new(t||ItemPageModule)},ItemPageModule.\u0275mod=core["\u0275\u0275defineNgModule"]({type:ItemPageModule}),ItemPageModule.\u0275inj=core["\u0275\u0275defineInjector"]({imports:[[common.CommonModule,shared_module.a.withEntryComponents(),ItemPageRoutingModule,edit_item_page_module.EditItemPageModule,statistics_module.a.forRoot(),journal_entities_module.a.withEntryComponents(),research_entities_module.a.withEntryComponents(),kolkov_ngx_gallery.c]]})},EEUA:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ResourcePolicyCreateComponent}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),rxjs__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("2Vo4"),rxjs_operators__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("lJxs"),rxjs_operators__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("IzEk"),_core_resource_policy_resource_policy_service__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("8a3C"),_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("lI3o"),_core_breadcrumbs_dso_name_service__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("C765"),_item_page_edit_item_page_edit_item_page_routing_paths__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("jrTz"),_core_shared_operators__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("1QIV"),_angular_router__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("tyNb"),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("sYmb"),_form_resource_policy_form_component__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("O/Ly");class ResourcePolicyCreateComponent{constructor(dsoNameService,notificationsService,resourcePolicyService,route,router,translate){this.dsoNameService=dsoNameService,this.notificationsService=notificationsService,this.resourcePolicyService=resourcePolicyService,this.route=route,this.router=router,this.translate=translate,this.processing$=new rxjs__WEBPACK_IMPORTED_MODULE_1__.a(!1)}ngOnInit(){this.route.data.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.a)((data=>data)),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.a)(1)).subscribe((data=>{this.targetResourceUUID=data.resourcePolicyTarget.payload.id,this.targetResourceName=this.dsoNameService.getName(data.resourcePolicyTarget.payload)}))}isProcessing(){return this.processing$.asObservable()}redirectToAuthorizationsPage(){this.router.navigate([`../../${_item_page_edit_item_page_edit_item_page_routing_paths__WEBPACK_IMPORTED_MODULE_7__.a}`],{relativeTo:this.route})}createResourcePolicy(event){let response$;this.processing$.next(!0),response$="eperson"===event.target.type?this.resourcePolicyService.create(event.object,this.targetResourceUUID,event.target.uuid):this.resourcePolicyService.create(event.object,this.targetResourceUUID,null,event.target.uuid),response$.pipe(Object(_core_shared_operators__WEBPACK_IMPORTED_MODULE_8__.g)()).subscribe((responseRD=>{this.processing$.next(!1),responseRD.hasSucceeded?(this.notificationsService.success(null,this.translate.get("resource-policies.create.page.success.content")),this.redirectToAuthorizationsPage()):this.notificationsService.error(null,this.translate.get("resource-policies.create.page.failure.content"))}))}}ResourcePolicyCreateComponent.\u0275fac=function ResourcePolicyCreateComponent_Factory(t){return new(t||ResourcePolicyCreateComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_core_breadcrumbs_dso_name_service__WEBPACK_IMPORTED_MODULE_6__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_5__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_core_resource_policy_resource_policy_service__WEBPACK_IMPORTED_MODULE_4__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_9__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_9__.g),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_ngx_translate_core__WEBPACK_IMPORTED_MODULE_10__.e))},ResourcePolicyCreateComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineComponent"]({type:ResourcePolicyCreateComponent,selectors:[["ds-resource-policy-create"]],decls:9,vars:5,consts:[[1,"container"],[1,"mb-3"],[3,"isProcessing","reset","submit"]],template:function ResourcePolicyCreateComponent_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div",0),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](2,"h4",1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](4,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](5,"\n\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](6,"ds-resource-policy-form",2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("reset",(function ResourcePolicyCreateComponent_Template_ds_resource_policy_form_reset_6_listener(){return ctx.redirectToAuthorizationsPage()}))("submit",(function ResourcePolicyCreateComponent_Template_ds_resource_policy_form_submit_6_listener($event){return ctx.createResourcePolicy($event)})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](7,"\n"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](8,"\n")),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate2"]("",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](4,3,"resource-policies.create.page.heading")," ",ctx.targetResourceName,""),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("isProcessing",ctx.isProcessing()))},directives:[_form_resource_policy_form_component__WEBPACK_IMPORTED_MODULE_11__.a],pipes:[_ngx_translate_core__WEBPACK_IMPORTED_MODULE_10__.d],encapsulation:2})},G5zm:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ResourcePolicyResolver}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),_empty_util__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("J3qs"),_core_resource_policy_resource_policy_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("8a3C"),_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("84Zn"),_core_shared_operators__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("1QIV"),_angular_router__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("tyNb");class ResourcePolicyResolver{constructor(resourcePolicyService,router){this.resourcePolicyService=resourcePolicyService,this.router=router}resolve(route,state){const policyId=route.queryParamMap.get("policyId");return Object(_empty_util__WEBPACK_IMPORTED_MODULE_1__.d)(policyId)&&this.router.navigateByUrl("/404",{skipLocationChange:!0}),this.resourcePolicyService.findById(policyId,!0,!1,Object(_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_3__.a)("eperson"),Object(_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_3__.a)("group")).pipe(Object(_core_shared_operators__WEBPACK_IMPORTED_MODULE_4__.g)())}}ResourcePolicyResolver.\u0275fac=function ResourcePolicyResolver_Factory(t){return new(t||ResourcePolicyResolver)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275inject"](_core_resource_policy_resource_policy_service__WEBPACK_IMPORTED_MODULE_2__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275inject"](_angular_router__WEBPACK_IMPORTED_MODULE_5__.g))},ResourcePolicyResolver.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineInjectable"]({token:ResourcePolicyResolver,factory:ResourcePolicyResolver.\u0275fac})},GCaJ:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return DSOBreadcrumbsService}));var _breadcrumbs_breadcrumb_breadcrumb_model__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("zr/d"),_dso_name_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("C765"),rxjs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("LRne"),_cache_builders_link_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("sfEo"),_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("84Zn"),rxjs_operators__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("cBqT"),rxjs_operators__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("eIep"),rxjs_operators__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("lJxs"),_shared_empty_util__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("J3qs"),_angular_core__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("fXoL"),_app_routing_paths__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("TVZh");class DSOBreadcrumbsService{constructor(linkService,dsoNameService){this.linkService=linkService,this.dsoNameService=dsoNameService}getBreadcrumbs(key,url){const label=this.dsoNameService.getName(key),crumb=new _breadcrumbs_breadcrumb_breadcrumb_model__WEBPACK_IMPORTED_MODULE_0__.a(label,url),propertyName=key.getParentLinkKey();return this.linkService.resolveLink(key,Object(_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_4__.a)(propertyName))[propertyName].pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.a)((parentRD=>parentRD.hasSucceeded||204===parentRD.statusCode)),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.a)((parentRD=>{if(Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_8__.b)(parentRD.payload)){const parent=parentRD.payload;return this.getBreadcrumbs(parent,Object(_app_routing_paths__WEBPACK_IMPORTED_MODULE_10__.r)(parent))}return Object(rxjs__WEBPACK_IMPORTED_MODULE_2__.a)([])})),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.a)((breadcrumbs=>[...breadcrumbs,crumb])))}}DSOBreadcrumbsService.\u0275fac=function DSOBreadcrumbsService_Factory(t){return new(t||DSOBreadcrumbsService)(_angular_core__WEBPACK_IMPORTED_MODULE_9__["\u0275\u0275inject"](_cache_builders_link_service__WEBPACK_IMPORTED_MODULE_3__.a),_angular_core__WEBPACK_IMPORTED_MODULE_9__["\u0275\u0275inject"](_dso_name_service__WEBPACK_IMPORTED_MODULE_1__.a))},DSOBreadcrumbsService.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_9__["\u0275\u0275defineInjectable"]({token:DSOBreadcrumbsService,factory:DSOBreadcrumbsService.\u0275fac,providedIn:"root"})},GFj5:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ResourcePoliciesModule}));var core=__webpack_require__("fXoL"),common=__webpack_require__("ofXK"),ngx_translate_core=__webpack_require__("sYmb"),resource_policies_component=__webpack_require__("+Bs4"),resource_policy_form_component=__webpack_require__("O/Ly"),resource_policy_edit_component=__webpack_require__("ALMP"),resource_policy_create_component=__webpack_require__("EEUA"),form_module=__webpack_require__("kcqd"),resource_policy_resolver=__webpack_require__("G5zm"),resource_policy_target_resolver=__webpack_require__("n1Qy"),eperson_group_list_component=__webpack_require__("539a"),fesm2015_forms=__webpack_require__("3Pt+");class group_search_box_component_GroupSearchBoxComponent{constructor(formBuilder){this.formBuilder=formBuilder,this.labelPrefix="admin.access-control.groups.",this.subs=[],this.search=new core.EventEmitter,this.searchForm=this.formBuilder.group({query:""})}reset(){this.searchForm=this.formBuilder.group({query:""})}submit(data){const event={scope:"",query:data.query};this.search.emit(event)}}group_search_box_component_GroupSearchBoxComponent.\u0275fac=function GroupSearchBoxComponent_Factory(t){return new(t||group_search_box_component_GroupSearchBoxComponent)(core["\u0275\u0275directiveInject"](fesm2015_forms.FormBuilder))},group_search_box_component_GroupSearchBoxComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:group_search_box_component_GroupSearchBoxComponent,selectors:[["ds-group-search-box"]],outputs:{search:"search"},decls:27,vars:7,consts:[[1,"d-flex","justify-content-between",3,"formGroup","ngSubmit"],[1,"flex-grow-1","mr-3"],[1,"form-group","input-group"],["type","text","name","query","id","query","formControlName","query","aria-label","Search input",1,"form-control"],[1,"input-group-append"],["type","submit",1,"search-button","btn","btn-primary"],[1,"fas","fa-search"],["type","button",1,"search-button","btn","btn-secondary",3,"click"]],template:function GroupSearchBoxComponent_Template(rf,ctx){1&rf&&(core["\u0275\u0275elementStart"](0,"form",0),core["\u0275\u0275listener"]("ngSubmit",(function GroupSearchBoxComponent_Template_form_ngSubmit_0_listener($event){return ctx.submit(ctx.searchForm.value),$event.stopImmediatePropagation()})),core["\u0275\u0275text"](1,"\n  "),core["\u0275\u0275elementStart"](2,"div",1),core["\u0275\u0275text"](3,"\n    "),core["\u0275\u0275elementStart"](4,"div",2),core["\u0275\u0275text"](5,"\n      "),core["\u0275\u0275element"](6,"input",3),core["\u0275\u0275text"](7,"\n      "),core["\u0275\u0275elementStart"](8,"span",4),core["\u0275\u0275text"](9,"\n        "),core["\u0275\u0275elementStart"](10,"button",5),core["\u0275\u0275text"](11,"\n          "),core["\u0275\u0275element"](12,"i",6),core["\u0275\u0275text"](13),core["\u0275\u0275pipe"](14,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](15,"\n      "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](16,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](17,"\n  "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](18,"\n  "),core["\u0275\u0275elementStart"](19,"div"),core["\u0275\u0275text"](20,"\n    "),core["\u0275\u0275elementStart"](21,"button",7),core["\u0275\u0275listener"]("click",(function GroupSearchBoxComponent_Template_button_click_21_listener(){return ctx.submit(null),ctx.reset()})),core["\u0275\u0275text"](22),core["\u0275\u0275pipe"](23,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](24,"\n  "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](25,"\n"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](26,"\n")),2&rf&&(core["\u0275\u0275property"]("formGroup",ctx.searchForm),core["\u0275\u0275advance"](13),core["\u0275\u0275textInterpolate1"](" ",core["\u0275\u0275pipeBind1"](14,3,ctx.labelPrefix+"search.button"),"\n        "),core["\u0275\u0275advance"](9),core["\u0275\u0275textInterpolate1"]("\n      ",core["\u0275\u0275pipeBind1"](23,5,ctx.labelPrefix+"button.see-all"),"\n    "))},directives:[fesm2015_forms["\u0275angular_packages_forms_forms_ba"],fesm2015_forms.NgControlStatusGroup,fesm2015_forms.FormGroupDirective,fesm2015_forms.DefaultValueAccessor,fesm2015_forms.NgControlStatus,fesm2015_forms.FormControlName],pipes:[ngx_translate_core.d],encapsulation:2});var empty_util=__webpack_require__("J3qs");class eperson_search_box_component_EpersonSearchBoxComponent{constructor(formBuilder){this.formBuilder=formBuilder,this.labelPrefix="admin.access-control.epeople.",this.subs=[],this.search=new core.EventEmitter,this.searchForm=this.formBuilder.group({scope:"metadata",query:""})}reset(){this.searchForm=this.formBuilder.group({scope:"metadata",query:""})}submit(data){const event={scope:Object(empty_util.g)(data)?data.scope:"metadata",query:Object(empty_util.g)(data)?data.query:""};this.search.emit(event)}}eperson_search_box_component_EpersonSearchBoxComponent.\u0275fac=function EpersonSearchBoxComponent_Factory(t){return new(t||eperson_search_box_component_EpersonSearchBoxComponent)(core["\u0275\u0275directiveInject"](fesm2015_forms.FormBuilder))},eperson_search_box_component_EpersonSearchBoxComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:eperson_search_box_component_EpersonSearchBoxComponent,selectors:[["ds-eperson-search-box"]],outputs:{search:"search"},decls:41,vars:13,consts:[[1,"d-flex","justify-content-between",3,"formGroup","ngSubmit"],["name","scope","id","scope","formControlName","scope","aria-label","Search scope",1,"form-control"],["value","metadata"],["value","email"],[1,"flex-grow-1","mr-3","ml-3"],[1,"form-group","input-group"],["type","text","name","query","id","query","formControlName","query","aria-label","Search input",1,"form-control"],[1,"input-group-append"],["type","submit",1,"search-button","btn","btn-primary"],[1,"fas","fa-search"],["type","button",1,"search-button","btn","btn-secondary",3,"click"]],template:function EpersonSearchBoxComponent_Template(rf,ctx){1&rf&&(core["\u0275\u0275elementStart"](0,"form",0),core["\u0275\u0275listener"]("ngSubmit",(function EpersonSearchBoxComponent_Template_form_ngSubmit_0_listener($event){return ctx.submit(ctx.searchForm.value),$event.stopImmediatePropagation()})),core["\u0275\u0275text"](1,"\n  "),core["\u0275\u0275elementStart"](2,"div"),core["\u0275\u0275text"](3,"\n    "),core["\u0275\u0275elementStart"](4,"select",1),core["\u0275\u0275text"](5,"\n      "),core["\u0275\u0275elementStart"](6,"option",2),core["\u0275\u0275text"](7),core["\u0275\u0275pipe"](8,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](9,"\n      "),core["\u0275\u0275elementStart"](10,"option",3),core["\u0275\u0275text"](11),core["\u0275\u0275pipe"](12,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](13,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](14,"\n  "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](15,"\n  "),core["\u0275\u0275elementStart"](16,"div",4),core["\u0275\u0275text"](17,"\n    "),core["\u0275\u0275elementStart"](18,"div",5),core["\u0275\u0275text"](19,"\n      "),core["\u0275\u0275element"](20,"input",6),core["\u0275\u0275text"](21,"\n      "),core["\u0275\u0275elementStart"](22,"span",7),core["\u0275\u0275text"](23,"\n        "),core["\u0275\u0275elementStart"](24,"button",8),core["\u0275\u0275text"](25,"\n          "),core["\u0275\u0275element"](26,"i",9),core["\u0275\u0275text"](27),core["\u0275\u0275pipe"](28,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](29,"\n      "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](30,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](31,"\n  "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](32,"\n  "),core["\u0275\u0275elementStart"](33,"div"),core["\u0275\u0275text"](34,"\n    "),core["\u0275\u0275elementStart"](35,"button",10),core["\u0275\u0275listener"]("click",(function EpersonSearchBoxComponent_Template_button_click_35_listener(){return ctx.submit(null),ctx.reset()})),core["\u0275\u0275text"](36),core["\u0275\u0275pipe"](37,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](38,"\n  "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](39,"\n"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](40,"\n")),2&rf&&(core["\u0275\u0275property"]("formGroup",ctx.searchForm),core["\u0275\u0275advance"](7),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](8,5,ctx.labelPrefix+"search.scope.metadata")),core["\u0275\u0275advance"](4),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](12,7,ctx.labelPrefix+"search.scope.email")),core["\u0275\u0275advance"](16),core["\u0275\u0275textInterpolate1"](" ",core["\u0275\u0275pipeBind1"](28,9,ctx.labelPrefix+"search.button"),"\n        "),core["\u0275\u0275advance"](9),core["\u0275\u0275textInterpolate1"]("\n      ",core["\u0275\u0275pipeBind1"](37,11,ctx.labelPrefix+"button.see-all"),"\n    "))},directives:[fesm2015_forms["\u0275angular_packages_forms_forms_ba"],fesm2015_forms.NgControlStatusGroup,fesm2015_forms.FormGroupDirective,fesm2015_forms.SelectControlValueAccessor,fesm2015_forms.NgControlStatus,fesm2015_forms.FormControlName,fesm2015_forms.NgSelectOption,fesm2015_forms["\u0275angular_packages_forms_forms_z"],fesm2015_forms.DefaultValueAccessor],pipes:[ngx_translate_core.d],encapsulation:2});var ng_bootstrap=__webpack_require__("1kSV"),shared_module=__webpack_require__("PCNd"),pagination_component=__webpack_require__("Exvd");resource_policies_component.a,resource_policy_form_component.a,resource_policy_edit_component.a,resource_policy_create_component.a,eperson_group_list_component.a;const PROVIDERS=[resource_policy_resolver.a,resource_policy_target_resolver.a];class ResourcePoliciesModule{}ResourcePoliciesModule.\u0275fac=function ResourcePoliciesModule_Factory(t){return new(t||ResourcePoliciesModule)},ResourcePoliciesModule.\u0275mod=core["\u0275\u0275defineNgModule"]({type:ResourcePoliciesModule}),ResourcePoliciesModule.\u0275inj=core["\u0275\u0275defineInjector"]({providers:[...PROVIDERS],imports:[[ng_bootstrap.s,common.CommonModule,form_module.a,ngx_translate_core.c,shared_module.a]]}),core["\u0275\u0275setComponentScope"](eperson_group_list_component.a,[common.NgIf,eperson_search_box_component_EpersonSearchBoxComponent,group_search_box_component_GroupSearchBoxComponent,pagination_component.a,common.NgForOf],[common.AsyncPipe,ngx_translate_core.d])},GsQf:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return AbstractItemUpdateComponent}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),rxjs__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("itXk"),_core_data_item_data_service__WEBPACK_IMPORTED_MODULE_3__=(__webpack_require__("PN+Z"),__webpack_require__("iqTE")),_core_data_object_updates_object_updates_service__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("loKC"),_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("lI3o"),rxjs_operators__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("lJxs"),rxjs_operators__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("vkgz"),rxjs_operators__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("eIep"),rxjs_operators__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("SxV6"),_shared_trackable_abstract_trackable_component__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("daFX"),_environments_environment__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("AytR"),_item_page_routing_paths__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("Xioo"),_core_shared_operators__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("1QIV"),_shared_empty_util__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("J3qs"),_item_resolver__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("kGaT"),_angular_router__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("tyNb"),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("sYmb");class AbstractItemUpdateComponent extends _shared_trackable_abstract_trackable_component__WEBPACK_IMPORTED_MODULE_10__.a{constructor(itemService,objectUpdatesService,router,notificationsService,translateService,route){super(objectUpdatesService,notificationsService,translateService),this.itemService=itemService,this.objectUpdatesService=objectUpdatesService,this.router=router,this.notificationsService=notificationsService,this.translateService=translateService,this.route=route}ngOnInit(){Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_14__.b)(this.item)?this.setItem(this.item):this.itemUpdateSubscription=Object(rxjs__WEBPACK_IMPORTED_MODULE_1__.a)([this.route.data,this.route.parent.data]).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.a)((([data,parentData])=>Object.assign({},data,parentData))),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.a)((data=>data.dso)),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.a)((rd=>{this.item=rd.payload})),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.a)((rd=>this.itemService.findByHref(rd.payload._links.self.href,!0,!0,..._item_resolver__WEBPACK_IMPORTED_MODULE_15__.a))),Object(_core_shared_operators__WEBPACK_IMPORTED_MODULE_13__.c)()).subscribe((rd=>{this.setItem(rd.payload)})),this.discardTimeOut=_environments_environment__WEBPACK_IMPORTED_MODULE_11__.a.item.edit.undoTimeout,this.url=this.router.url,this.url.indexOf("?")>0&&(this.url=this.url.substr(0,this.url.indexOf("?"))),this.hasChanges().pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.a)()).subscribe((hasChanges=>{hasChanges?this.checkLastModified():this.initializeOriginalFields()})),this.initializeNotificationsPrefix(),this.initializeUpdates()}setItem(item){this.item=item,this.itemPageRoute=Object(_item_page_routing_paths__WEBPACK_IMPORTED_MODULE_12__.h)(this.item),this.postItemInit(),this.initializeUpdates()}ngOnDestroy(){Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_14__.b)(this.itemUpdateSubscription)&&this.itemUpdateSubscription.unsubscribe()}postItemInit(){}initializeUpdates(){}initializeNotificationsPrefix(){}initializeOriginalFields(){}submit(){}trackUpdate(index,update){return update&&update.field?update.field.uuid:void 0}isValid(){return this.objectUpdatesService.isValidPage(this.url)}checkLastModified(){const currentVersion=this.item.lastModified;this.objectUpdatesService.getLastModified(this.url).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.a)()).subscribe((updateVersion=>{updateVersion.getDate()!==currentVersion.getDate()&&(this.notificationsService.warning(this.getNotificationTitle("outdated"),this.getNotificationContent("outdated")),this.initializeOriginalFields())}))}}AbstractItemUpdateComponent.\u0275fac=function AbstractItemUpdateComponent_Factory(t){return new(t||AbstractItemUpdateComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_core_data_item_data_service__WEBPACK_IMPORTED_MODULE_3__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_core_data_object_updates_object_updates_service__WEBPACK_IMPORTED_MODULE_4__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_16__.g),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_5__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_ngx_translate_core__WEBPACK_IMPORTED_MODULE_17__.e),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_16__.a))},AbstractItemUpdateComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineComponent"]({type:AbstractItemUpdateComponent,selectors:[["ds-abstract-item-update"]],inputs:{item:"item"},features:[_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275InheritDefinitionFeature"]],decls:0,vars:0,template:function AbstractItemUpdateComponent_Template(rf,ctx){},encapsulation:2})},HENg:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return DsoPageSomeFeatureGuard}));var _shared_operators__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("1QIV"),rxjs_operators__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("lJxs"),_shared_empty_util__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("J3qs"),_some_feature_authorization_guard__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("a8lL");class DsoPageSomeFeatureGuard extends _some_feature_authorization_guard__WEBPACK_IMPORTED_MODULE_3__.a{constructor(resolver,authorizationService,router,authService){super(authorizationService,router,authService),this.resolver=resolver,this.authorizationService=authorizationService,this.router=router,this.authService=authService}getObjectUrl(route,state){const routeWithObjectID=this.getRouteWithDSOId(route);return this.resolver.resolve(routeWithObjectID,state).pipe(Object(_shared_operators__WEBPACK_IMPORTED_MODULE_0__.d)(),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_1__.a)((dso=>dso.self)))}getRouteWithDSOId(route){let routeWithDSOId=route;for(;Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_2__.a)(routeWithDSOId.params.id)&&Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_2__.b)(routeWithDSOId.parent);)routeWithDSOId=routeWithDSOId.parent;return routeWithDSOId}}},JHLN:function(module,exports,__webpack_require__){var map={"./custom/app/submission/import-external/submission-import-external.component":["mVFA",69]};function webpackAsyncContext(req){if(!__webpack_require__.o(map,req))return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}));var ids=map[req],id=ids[0];return __webpack_require__.e(ids[1]).then((function(){return __webpack_require__(id)}))}webpackAsyncContext.keys=function webpackAsyncContextKeys(){return Object.keys(map)},webpackAsyncContext.id="JHLN",module.exports=webpackAsyncContext},Lzy0:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"WorkflowItemDeleteComponent",(function(){return WorkflowItemDeleteComponent}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),_workflow_item_action_page_component__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("5Yl3"),_core_submission_workflowitem_data_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("RMbB"),_core_services_route_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("ppE2"),_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("lI3o"),_core_data_request_service__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("X/78"),rxjs_operators__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("lJxs"),_core_shared_operators__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("1QIV"),_angular_router__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("tyNb"),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("sYmb"),_shared_utils_var_directive__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("O/5o"),_angular_common__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("ofXK"),_item_page_edit_item_page_modify_item_overview_modify_item_overview_component__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("aCx6");function WorkflowItemDeleteComponent_div_0_ds_modify_item_overview_6_Template(rf,ctx){if(1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](0,"ds-modify-item-overview",5),2&rf){const item_r1=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]().ngVar;_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("item",item_r1)}}function WorkflowItemDeleteComponent_div_0_Template(rf,ctx){if(1&rf){const _r5=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275getCurrentView"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div",1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](2,"h2"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](4,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](5,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](6,WorkflowItemDeleteComponent_div_0_ds_modify_item_overview_6_Template,1,1,"ds-modify-item-overview",2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](7,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](8,"button",3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("click",(function WorkflowItemDeleteComponent_div_0_Template_button_click_8_listener(){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r5);return _angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]().previousPage()})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](9),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](10,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](11,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](12,"button",4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("click",(function WorkflowItemDeleteComponent_div_0_Template_button_click_12_listener(){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r5);return _angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]().performAction()})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](13),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](14,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](15,"\n"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()}if(2&rf){const item_r1=ctx.ngVar,ctx_r0=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](4,4,"workflow-item."+ctx_r0.type+".header")),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",item_r1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](10,6,"workflow-item."+ctx_r0.type+".button.cancel")),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](14,8,"workflow-item."+ctx_r0.type+".button.confirm"))}}class WorkflowItemDeleteComponent extends _workflow_item_action_page_component__WEBPACK_IMPORTED_MODULE_1__.a{constructor(route,workflowItemService,router,routeService,notificationsService,translationService,requestService){super(route,workflowItemService,router,routeService,notificationsService,translationService),this.route=route,this.workflowItemService=workflowItemService,this.router=router,this.routeService=routeService,this.notificationsService=notificationsService,this.translationService=translationService,this.requestService=requestService}getType(){return"delete"}sendRequest(id){return this.requestService.removeByHrefSubstring("/discover"),this.workflowItemService.delete(id).pipe(Object(_core_shared_operators__WEBPACK_IMPORTED_MODULE_7__.g)(),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.a)((response=>response.hasSucceeded)))}}WorkflowItemDeleteComponent.\u0275fac=function WorkflowItemDeleteComponent_Factory(t){return new(t||WorkflowItemDeleteComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_8__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_core_submission_workflowitem_data_service__WEBPACK_IMPORTED_MODULE_2__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_8__.g),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_core_services_route_service__WEBPACK_IMPORTED_MODULE_3__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_4__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_ngx_translate_core__WEBPACK_IMPORTED_MODULE_9__.e),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_core_data_request_service__WEBPACK_IMPORTED_MODULE_5__.a))},WorkflowItemDeleteComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineComponent"]({type:WorkflowItemDeleteComponent,selectors:[["ds-workflow-item-delete"]],features:[_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275InheritDefinitionFeature"]],decls:3,vars:3,consts:[["class","container",4,"ngVar"],[1,"container"],[3,"item",4,"ngIf"],[1,"btn","btn-default",3,"click"],[1,"btn","btn-danger",3,"click"],[3,"item"]],template:function WorkflowItemDeleteComponent_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](0,WorkflowItemDeleteComponent_div_0_Template,16,10,"div",0),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](1,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](2,"\n")),2&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngVar",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](1,1,ctx.item$))},directives:[_shared_utils_var_directive__WEBPACK_IMPORTED_MODULE_10__.a,_angular_common__WEBPACK_IMPORTED_MODULE_11__.NgIf,_item_page_edit_item_page_modify_item_overview_modify_item_overview_component__WEBPACK_IMPORTED_MODULE_12__.a],pipes:[_angular_common__WEBPACK_IMPORTED_MODULE_11__.AsyncPipe,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_9__.d],encapsulation:2})},Nh4g:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ThemedFullItemPageComponent}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),_shared_theme_support_themed_component__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("JTKQ");function ThemedFullItemPageComponent_ng_template_0_Template(rf,ctx){}class ThemedFullItemPageComponent extends _shared_theme_support_themed_component__WEBPACK_IMPORTED_MODULE_1__.a{getComponentName(){return"FullItemPageComponent"}importThemedComponent(themeName){return __webpack_require__("puXh")(`./${themeName}/app/item-page/full/full-item-page.component`)}importUnthemedComponent(){return Promise.resolve().then(__webpack_require__.bind(null,"wzod"))}}ThemedFullItemPageComponent.\u0275fac=function ThemedFullItemPageComponent_Factory(t){return \u0275ThemedFullItemPageComponent_BaseFactory(t||ThemedFullItemPageComponent)},ThemedFullItemPageComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineComponent"]({type:ThemedFullItemPageComponent,selectors:[["ds-themed-full-item-page"]],features:[_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275InheritDefinitionFeature"]],decls:3,vars:0,consts:[["vcr",""]],template:function ThemedFullItemPageComponent_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](0,ThemedFullItemPageComponent_ng_template_0_Template,0,0,"ng-template",null,0,_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275templateRefExtractor"]),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](2,"\n"))},encapsulation:2});const \u0275ThemedFullItemPageComponent_BaseFactory=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275getInheritedFactory"](ThemedFullItemPageComponent)},"O/Ly":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return resource_policy_form_component_ResourcePolicyFormComponent}));var core=__webpack_require__("fXoL"),of=__webpack_require__("LRne"),BehaviorSubject=__webpack_require__("2Vo4"),combineLatest=__webpack_require__("itXk"),map=__webpack_require__("lJxs"),filter=__webpack_require__("pLZG"),take=__webpack_require__("IzEk"),fesm2015_core=__webpack_require__("e+Av"),resource_policy_model=__webpack_require__("szIk"),ds_dynamic_input_model=__webpack_require__("JGHn"),policy_type_model=__webpack_require__("199z"),action_type_model=__webpack_require__("+Rck");const policyTypeList=[{label:policy_type_model.a.TYPE_SUBMISSION,value:policy_type_model.a.TYPE_SUBMISSION},{label:policy_type_model.a.TYPE_WORKFLOW,value:policy_type_model.a.TYPE_WORKFLOW},{label:policy_type_model.a.TYPE_INHERITED,value:policy_type_model.a.TYPE_INHERITED},{label:policy_type_model.a.TYPE_CUSTOM,value:policy_type_model.a.TYPE_CUSTOM}],policyActionList=[{label:action_type_model.a.READ.toString(),value:action_type_model.a.READ},{label:action_type_model.a.WRITE.toString(),value:action_type_model.a.WRITE},{label:action_type_model.a.REMOVE.toString(),value:action_type_model.a.REMOVE},{label:action_type_model.a.ADMIN.toString(),value:action_type_model.a.ADMIN},{label:action_type_model.a.DELETE.toString(),value:action_type_model.a.DELETE},{label:action_type_model.a.WITHDRAWN_READ.toString(),value:action_type_model.a.WITHDRAWN_READ},{label:action_type_model.a.DEFAULT_BITSTREAM_READ.toString(),value:action_type_model.a.DEFAULT_BITSTREAM_READ},{label:action_type_model.a.DEFAULT_ITEM_READ.toString(),value:action_type_model.a.DEFAULT_ITEM_READ}],RESOURCE_POLICY_FORM_NAME_CONFIG={id:"name",label:"resource-policies.form.name.label",metadataFields:[],repeatable:!1,submissionId:"",hasSelectableMetadata:!1},RESOURCE_POLICY_FORM_DESCRIPTION_CONFIG={id:"description",label:"resource-policies.form.description.label",metadataFields:[],repeatable:!1,rows:10,submissionId:"",hasSelectableMetadata:!1},RESOURCE_POLICY_FORM_POLICY_TYPE_CONFIG={id:"policyType",label:"resource-policies.form.policy-type.label",options:policyTypeList,required:!0,validators:{required:null},errorMessages:{required:"resource-policies.form.policy-type.required"}},RESOURCE_POLICY_FORM_ACTION_TYPE_CONFIG={id:"action",label:"resource-policies.form.action-type.label",options:policyActionList,required:!0,validators:{required:null},errorMessages:{required:"resource-policies.form.action-type.required"}},RESOURCE_POLICY_FORM_DATE_GROUP_CONFIG={id:"date",group:[]},RESOURCE_POLICY_FORM_DATE_GROUP_LAYOUT={element:{control:"form-row"}},RESOURCE_POLICY_FORM_START_DATE_CONFIG={id:"start",label:"resource-policies.form.date.start.label",placeholder:"resource-policies.form.date.start.label",inline:!1,toggleIcon:"far fa-calendar-alt"},RESOURCE_POLICY_FORM_START_DATE_LAYOUT={element:{container:"p-0",label:"col-form-label"},grid:{host:"col-md-6"}},RESOURCE_POLICY_FORM_END_DATE_CONFIG={id:"end",label:"resource-policies.form.date.end.label",placeholder:"resource-policies.form.date.end.label",inline:!1,toggleIcon:"far fa-calendar-alt"},RESOURCE_POLICY_FORM_END_DATE_LAYOUT={element:{container:"p-0",label:"col-form-label"},grid:{host:"col-md-6"}};var ds_dynamic_textarea_model=__webpack_require__("c/qf"),dso_name_service=__webpack_require__("C765"),empty_util=__webpack_require__("J3qs"),form_service=__webpack_require__("NFsL"),resource_policy_resource_type=__webpack_require__("TLL5"),date_util=__webpack_require__("fM99"),eperson_data_service=__webpack_require__("wLgS"),group_data_service=__webpack_require__("YIpg"),operators=__webpack_require__("1QIV"),request_service=__webpack_require__("X/78"),common=__webpack_require__("ofXK"),form_component=__webpack_require__("hqmO"),ng_bootstrap=__webpack_require__("1kSV"),eperson_group_list_component=__webpack_require__("539a"),ngx_translate_core=__webpack_require__("sYmb");function ResourcePolicyFormComponent_ds_form_2_Template(rf,ctx){if(1&rf&&core["\u0275\u0275element"](0,"ds-form",9,10),2&rf){const ctx_r0=core["\u0275\u0275nextContext"]();core["\u0275\u0275property"]("formId",ctx_r0.formId)("formModel",ctx_r0.formModel)("displaySubmit",!1)("displayCancel",!1)}}function ResourcePolicyFormComponent_ng_container_13_ng_template_11_Template(rf,ctx){if(1&rf){const _r9=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275text"](0,"\n            "),core["\u0275\u0275elementStart"](1,"ds-eperson-group-list",17),core["\u0275\u0275listener"]("select",(function ResourcePolicyFormComponent_ng_container_13_ng_template_11_Template_ds_eperson_group_list_select_1_listener($event){core["\u0275\u0275restoreView"](_r9);return core["\u0275\u0275nextContext"](2).updateObjectSelected($event,!0)})),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](2,"\n          ")}}function ResourcePolicyFormComponent_ng_container_13_ng_template_20_Template(rf,ctx){if(1&rf){const _r11=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275text"](0,"\n            "),core["\u0275\u0275elementStart"](1,"ds-eperson-group-list",18),core["\u0275\u0275listener"]("select",(function ResourcePolicyFormComponent_ng_container_13_ng_template_20_Template_ds_eperson_group_list_select_1_listener($event){core["\u0275\u0275restoreView"](_r11);return core["\u0275\u0275nextContext"](2).updateObjectSelected($event,!1)})),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](2,"\n          ")}2&rf&&(core["\u0275\u0275advance"](1),core["\u0275\u0275property"]("isListOfEPerson",!1))}function ResourcePolicyFormComponent_ng_container_13_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementContainerStart"](0),core["\u0275\u0275text"](1,"\n      "),core["\u0275\u0275elementStart"](2,"ul",11,12),core["\u0275\u0275text"](4,"\n        "),core["\u0275\u0275elementStart"](5,"li",13),core["\u0275\u0275text"](6,"\n          "),core["\u0275\u0275elementStart"](7,"a",14),core["\u0275\u0275text"](8),core["\u0275\u0275pipe"](9,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](10,"\n          "),core["\u0275\u0275template"](11,ResourcePolicyFormComponent_ng_container_13_ng_template_11_Template,3,0,"ng-template",15),core["\u0275\u0275text"](12,"\n        "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](13,"\n        "),core["\u0275\u0275elementStart"](14,"li",13),core["\u0275\u0275text"](15,"\n          "),core["\u0275\u0275elementStart"](16,"a",14),core["\u0275\u0275text"](17),core["\u0275\u0275pipe"](18,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](19,"\n          "),core["\u0275\u0275template"](20,ResourcePolicyFormComponent_ng_container_13_ng_template_20_Template,3,1,"ng-template",15),core["\u0275\u0275text"](21,"\n        "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](22,"\n      "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](23,"\n      "),core["\u0275\u0275element"](24,"div",16),core["\u0275\u0275text"](25,"\n    "),core["\u0275\u0275elementContainerEnd"]()),2&rf){const _r5=core["\u0275\u0275reference"](3);core["\u0275\u0275advance"](8),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](9,3,"resource-policies.form.eperson-group-list.tab.eperson")),core["\u0275\u0275advance"](9),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](18,5,"resource-policies.form.eperson-group-list.tab.group")),core["\u0275\u0275advance"](7),core["\u0275\u0275property"]("ngbNavOutlet",_r5)}}function ResourcePolicyFormComponent_span_32_Template(rf,ctx){1&rf&&(core["\u0275\u0275elementStart"](0,"span"),core["\u0275\u0275text"](1,"\n                  "),core["\u0275\u0275element"](2,"i",19),core["\u0275\u0275text"](3),core["\u0275\u0275pipe"](4,"translate"),core["\u0275\u0275elementEnd"]()),2&rf&&(core["\u0275\u0275advance"](3),core["\u0275\u0275textInterpolate1"](" ",core["\u0275\u0275pipeBind1"](4,1,"submission.workflow.tasks.generic.processing"),"\n                "))}function ResourcePolicyFormComponent_span_35_Template(rf,ctx){1&rf&&(core["\u0275\u0275elementStart"](0,"span"),core["\u0275\u0275text"](1),core["\u0275\u0275pipe"](2,"translate"),core["\u0275\u0275elementEnd"]()),2&rf&&(core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate1"]("\n                  ",core["\u0275\u0275pipeBind1"](2,1,"form.submit"),"\n                "))}class resource_policy_form_component_ResourcePolicyFormComponent{constructor(dsoNameService,ePersonService,formService,groupService,requestService){this.dsoNameService=dsoNameService,this.ePersonService=ePersonService,this.formService=formService,this.groupService=groupService,this.requestService=requestService,this.isProcessing=Object(of.a)(!1),this.reset=new core.EventEmitter,this.submit=new core.EventEmitter,this.resourcePolicyTargetName$=new BehaviorSubject.a(""),this.subs=[]}ngOnInit(){if(this.isActive=!0,this.formId=this.formService.getUniqueId("resource-policy-form"),this.formModel=this.buildResourcePolicyForm(),!this.canSetGrant()){const epersonRD$=this.ePersonService.findByHref(this.resourcePolicy._links.eperson.href,!1).pipe(Object(operators.i)()),groupRD$=this.groupService.findByHref(this.resourcePolicy._links.group.href,!1).pipe(Object(operators.i)()),dsoRD$=Object(combineLatest.a)([epersonRD$,groupRD$]).pipe(Object(map.a)((rdArr=>rdArr.find((rd=>Object(empty_util.e)(rd.payload))))),Object(empty_util.c)());this.subs.push(dsoRD$.pipe(Object(filter.a)((()=>this.isActive))).subscribe((dsoRD=>{this.resourcePolicyGrant=dsoRD.payload,this.resourcePolicyTargetName$.next(this.getResourcePolicyTargetName())})))}}isFormValid(){return this.formService.isValid(this.formId).pipe(Object(map.a)((isValid=>isValid&&Object(empty_util.e)(this.resourcePolicyGrant))))}buildResourcePolicyForm(){const formModel=[],policyTypeConf=Object.assign({},RESOURCE_POLICY_FORM_POLICY_TYPE_CONFIG,{disabled:Object(empty_util.e)(this.resourcePolicy)}),actionConf=Object.assign({},RESOURCE_POLICY_FORM_ACTION_TYPE_CONFIG,{disabled:Object(empty_util.e)(this.resourcePolicy)});formModel.push(new ds_dynamic_input_model.a(RESOURCE_POLICY_FORM_NAME_CONFIG),new ds_dynamic_textarea_model.a(RESOURCE_POLICY_FORM_DESCRIPTION_CONFIG),new fesm2015_core.N(policyTypeConf),new fesm2015_core.N(actionConf));const startDateModel=new fesm2015_core.t(RESOURCE_POLICY_FORM_START_DATE_CONFIG,RESOURCE_POLICY_FORM_START_DATE_LAYOUT),endDateModel=new fesm2015_core.t(RESOURCE_POLICY_FORM_END_DATE_CONFIG,RESOURCE_POLICY_FORM_END_DATE_LAYOUT),dateGroupConfig=Object.assign({},RESOURCE_POLICY_FORM_DATE_GROUP_CONFIG,{group:[]});return dateGroupConfig.group.push(startDateModel,endDateModel),formModel.push(new fesm2015_core.D(dateGroupConfig,RESOURCE_POLICY_FORM_DATE_GROUP_LAYOUT)),this.initModelsValue(formModel),formModel}initModelsValue(formModel){return this.resourcePolicy&&formModel.forEach((model=>{"date"===model.id?(Object(empty_util.b)(this.resourcePolicy.startDate)&&(model.get(0).value=Object(date_util.d)(this.resourcePolicy.startDate)),Object(empty_util.b)(this.resourcePolicy.endDate)&&(model.get(1).value=Object(date_util.d)(this.resourcePolicy.endDate))):this.resourcePolicy.hasOwnProperty(model.id)&&this.resourcePolicy[model.id]&&(model.value=this.resourcePolicy[model.id])})),formModel}canSetGrant(){return Object(empty_util.d)(this.resourcePolicy)}getResourcePolicyTargetName(){return Object(empty_util.e)(this.resourcePolicyGrant)?this.dsoNameService.getName(this.resourcePolicyGrant):""}updateObjectSelected(object,isEPerson){this.resourcePolicyGrant=object,this.resourcePolicyGrantType=isEPerson?"eperson":"group"}onReset(){this.reset.emit()}onSubmit(){this.formService.getFormData(this.formId).pipe(Object(take.a)(1)).subscribe((data=>{const eventPayload=Object.create({});eventPayload.object=this.createResourcePolicyByFormData(data),eventPayload.target={type:this.resourcePolicyGrantType,uuid:this.resourcePolicyGrant.id},this.submit.emit(eventPayload)}))}createResourcePolicyByFormData(data){const resourcePolicy=new resource_policy_model.a;return resourcePolicy.name=data.name?data.name[0].value:null,resourcePolicy.description=data.description?data.description[0].value:null,resourcePolicy.policyType=data.policyType?data.policyType[0].value:null,resourcePolicy.action=data.action?data.action[0].value:null,resourcePolicy.startDate=data.date&&data.date.start?Object(date_util.a)(data.date.start[0].value):null,resourcePolicy.endDate=data.date&&data.date.end?Object(date_util.a)(data.date.end[0].value):null,resourcePolicy.type=resource_policy_resource_type.a,resourcePolicy}ngOnDestroy(){this.isActive=!1,this.formModel=null,this.subs.filter((subscription=>Object(empty_util.b)(subscription))).forEach((subscription=>subscription.unsubscribe()))}}resource_policy_form_component_ResourcePolicyFormComponent.\u0275fac=function ResourcePolicyFormComponent_Factory(t){return new(t||resource_policy_form_component_ResourcePolicyFormComponent)(core["\u0275\u0275directiveInject"](dso_name_service.a),core["\u0275\u0275directiveInject"](eperson_data_service.a),core["\u0275\u0275directiveInject"](form_service.a),core["\u0275\u0275directiveInject"](group_data_service.a),core["\u0275\u0275directiveInject"](request_service.a))},resource_policy_form_component_ResourcePolicyFormComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:resource_policy_form_component_ResourcePolicyFormComponent,selectors:[["ds-resource-policy-form"]],inputs:{resourcePolicy:"resourcePolicy",isProcessing:"isProcessing"},outputs:{reset:"reset",submit:"submit"},decls:44,vars:25,consts:[[3,"formId","formModel","displaySubmit","displayCancel",4,"ngIf"],[1,"container-fluid"],["for","ResourcePolicyObject"],["id","ResourcePolicyObject","type","text","readonly","",1,"form-control","mb-3",3,"value"],[4,"ngIf"],[1,"form-group","row"],[1,"col","text-right"],["type","reset",1,"btn","btn-default",3,"disabled","click"],["type","button",1,"btn","btn-primary",3,"disabled","click"],[3,"formId","formModel","displaySubmit","displayCancel"],["formRef","formComponent"],["ngbNav","",1,"nav-pills"],["nav","ngbNav"],["ngbNavItem",""],["ngbNavLink",""],["ngbNavContent",""],[3,"ngbNavOutlet"],[3,"select"],[3,"isListOfEPerson","select"],[1,"fas","fa-circle-notch","fa-spin"]],template:function ResourcePolicyFormComponent_Template(rf,ctx){1&rf&&(core["\u0275\u0275elementStart"](0,"div"),core["\u0275\u0275text"](1,"\n  "),core["\u0275\u0275template"](2,ResourcePolicyFormComponent_ds_form_2_Template,2,4,"ds-form",0),core["\u0275\u0275text"](3,"\n  "),core["\u0275\u0275elementStart"](4,"div",1),core["\u0275\u0275text"](5,"\n    "),core["\u0275\u0275elementStart"](6,"label",2),core["\u0275\u0275text"](7),core["\u0275\u0275pipe"](8,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](9,"\n    "),core["\u0275\u0275element"](10,"input",3),core["\u0275\u0275pipe"](11,"async"),core["\u0275\u0275text"](12,"\n    "),core["\u0275\u0275template"](13,ResourcePolicyFormComponent_ng_container_13_Template,26,7,"ng-container",4),core["\u0275\u0275text"](14,"\n    "),core["\u0275\u0275elementStart"](15,"div"),core["\u0275\u0275text"](16,"\n      "),core["\u0275\u0275element"](17,"hr"),core["\u0275\u0275text"](18,"\n      "),core["\u0275\u0275elementStart"](19,"div",5),core["\u0275\u0275text"](20,"\n\n        "),core["\u0275\u0275elementStart"](21,"div",6),core["\u0275\u0275text"](22,"\n          "),core["\u0275\u0275elementStart"](23,"button",7),core["\u0275\u0275listener"]("click",(function ResourcePolicyFormComponent_Template_button_click_23_listener(){return ctx.onReset()})),core["\u0275\u0275pipe"](24,"async"),core["\u0275\u0275text"](25),core["\u0275\u0275pipe"](26,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](27,"\n          "),core["\u0275\u0275elementStart"](28,"button",8),core["\u0275\u0275listener"]("click",(function ResourcePolicyFormComponent_Template_button_click_28_listener(){return ctx.onSubmit()})),core["\u0275\u0275pipe"](29,"async"),core["\u0275\u0275pipe"](30,"async"),core["\u0275\u0275text"](31,"\n            "),core["\u0275\u0275template"](32,ResourcePolicyFormComponent_span_32_Template,5,3,"span",4),core["\u0275\u0275pipe"](33,"async"),core["\u0275\u0275text"](34,"\n            "),core["\u0275\u0275template"](35,ResourcePolicyFormComponent_span_35_Template,3,3,"span",4),core["\u0275\u0275pipe"](36,"async"),core["\u0275\u0275text"](37,"\n          "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](38,"\n        "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](39,"\n      "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](40,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](41,"\n  "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](42,"\n"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](43,"\n")),2&rf&&(core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",ctx.formModel),core["\u0275\u0275advance"](5),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](8,9,"resource-policies.form.eperson-group-list.label")),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("value",core["\u0275\u0275pipeBind1"](11,11,ctx.resourcePolicyTargetName$)),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("ngIf",ctx.canSetGrant()),core["\u0275\u0275advance"](10),core["\u0275\u0275property"]("disabled",core["\u0275\u0275pipeBind1"](24,13,ctx.isProcessing)),core["\u0275\u0275advance"](2),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](26,15,"form.cancel")),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("disabled",!core["\u0275\u0275pipeBind1"](29,17,ctx.isFormValid())||core["\u0275\u0275pipeBind1"](30,19,ctx.isProcessing)),core["\u0275\u0275advance"](4),core["\u0275\u0275property"]("ngIf",core["\u0275\u0275pipeBind1"](33,21,ctx.isProcessing)),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("ngIf",!core["\u0275\u0275pipeBind1"](36,23,ctx.isProcessing)))},directives:[common.NgIf,form_component.a,ng_bootstrap.t,ng_bootstrap.v,ng_bootstrap.w,ng_bootstrap.u,ng_bootstrap.y,eperson_group_list_component.a],pipes:[ngx_translate_core.d,common.AsyncPipe],encapsulation:2})},ONIj:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ThemedSearchPageComponent}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),_shared_theme_support_themed_component__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("JTKQ");function ThemedSearchPageComponent_ng_template_0_Template(rf,ctx){}class ThemedSearchPageComponent extends _shared_theme_support_themed_component__WEBPACK_IMPORTED_MODULE_1__.a{getComponentName(){return"SearchPageComponent"}importThemedComponent(themeName){return __webpack_require__("VxFp")(`./${themeName}/app/search-page/search-page.component`)}importUnthemedComponent(){return Promise.resolve().then(__webpack_require__.bind(null,"xSRh"))}}ThemedSearchPageComponent.\u0275fac=function ThemedSearchPageComponent_Factory(t){return \u0275ThemedSearchPageComponent_BaseFactory(t||ThemedSearchPageComponent)},ThemedSearchPageComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineComponent"]({type:ThemedSearchPageComponent,selectors:[["ds-themed-search-page"]],features:[_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275InheritDefinitionFeature"]],decls:3,vars:0,consts:[["vcr",""]],template:function ThemedSearchPageComponent_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](0,ThemedSearchPageComponent_ng_template_0_Template,0,0,"ng-template",null,0,_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275templateRefExtractor"]),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](2,"\n"))},encapsulation:2});const \u0275ThemedSearchPageComponent_BaseFactory=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275getInheritedFactory"](ThemedSearchPageComponent)},RMpN:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"SubmissionImportExternalComponent",(function(){return SubmissionImportExternalComponent}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),rxjs__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("2Vo4"),rxjs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("itXk"),rxjs_operators__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("IzEk"),rxjs_operators__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("pLZG"),rxjs_operators__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("eIep"),rxjs_operators__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("vkgz"),rxjs_operators__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("5+tZ"),_core_data_external_source_service__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("dHui"),_core_data_paginated_list_model__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("f+Ev"),_core_shared_search_search_configuration_service__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("joI/"),_core_shared_context_model__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("ynxc"),_shared_pagination_pagination_component_options_model__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("7DXY"),_core_services_route_service__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("ppE2"),_shared_remote_data_utils__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("GG8d"),_import_external_preview_submission_import_external_preview_component__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("20cJ"),_shared_animations_fade__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("mEo1"),_core_shared_page_info_model__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("oBfO"),_shared_empty_util__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("J3qs"),_core_shared_operators__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("1QIV"),_core_shared_item_relationships_item_type_resource_type__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("dnwH"),_angular_router__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("tyNb"),_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__("1kSV"),_import_external_searchbar_submission_import_external_searchbar_component__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__("3cpT"),_angular_common__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__("ofXK"),_shared_utils_var_directive__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__("O/5o"),_shared_object_collection_object_collection_component__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__("jLV+"),_shared_loading_loading_component__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__("Frqi"),_shared_alert_alert_component__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__("VYMa"),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__("sYmb");function SubmissionImportExternalComponent_div_15_div_2_ng_container_2_h3_2_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"h3"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](2,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](2,1,"submission.sections.describe.relationship-lookup.selection-tab.title")))}const _c0=function(a0,a1){return{repeatable:a0,listId:a1}};function SubmissionImportExternalComponent_div_15_div_2_ng_container_2_ds_viewable_collection_4_Template(rf,ctx){if(1&rf){const _r10=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275getCurrentView"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"ds-viewable-collection",14),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("importObject",(function SubmissionImportExternalComponent_div_15_div_2_ng_container_2_ds_viewable_collection_4_Template_ds_viewable_collection_importObject_0_listener($event){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r10);return _angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"](4).import($event)})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()}if(2&rf){const entriesRD_r4=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]().ngVar,ctx_r6=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"](3);_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("@fadeIn",void 0)("objects",entriesRD_r4)("selectionConfig",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pureFunction2"](8,_c0,ctx_r6.repeatable,ctx_r6.listId))("config",ctx_r6.initialPagination)("hideGear",!0)("context",ctx_r6.context)("importable",!0)("importConfig",ctx_r6.importConfig)}}function SubmissionImportExternalComponent_div_15_div_2_ng_container_2_ds_loading_7_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](0,"ds-loading",15),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](1,"translate")),2&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275propertyInterpolate"]("message",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](1,1,"loading.search-results"))}function SubmissionImportExternalComponent_div_15_div_2_ng_container_2_div_10_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div",16),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n          "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](2,"ds-alert",17),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](4,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](5,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("type","alert-info"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](4,2,"search.results.empty")))}function SubmissionImportExternalComponent_div_15_div_2_ng_container_2_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementContainerStart"](0),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](2,SubmissionImportExternalComponent_div_15_div_2_ng_container_2_h3_2_Template,3,3,"h3",10),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](4,SubmissionImportExternalComponent_div_15_div_2_ng_container_2_ds_viewable_collection_4_Template,2,11,"ds-viewable-collection",11),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](5,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](6,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](7,SubmissionImportExternalComponent_div_15_div_2_ng_container_2_ds_loading_7_Template,2,3,"ds-loading",12),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](8,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](9,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](10,SubmissionImportExternalComponent_div_15_div_2_ng_container_2_div_10_Template,6,4,"div",13),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](11,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](12,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementContainerEnd"]()),2&rf){const entriesRD_r4=ctx.ngVar,ctx_r3=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"](3);_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",entriesRD_r4&&0!==(null==entriesRD_r4||null==entriesRD_r4.payload||null==entriesRD_r4.payload.page?null:entriesRD_r4.payload.page.length)),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",(null==entriesRD_r4?null:entriesRD_r4.hasSucceeded)&&!_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](5,4,ctx_r3.isLoading$)&&(null==entriesRD_r4||null==entriesRD_r4.payload||null==entriesRD_r4.payload.page?null:entriesRD_r4.payload.page.length)>0),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](8,6,ctx_r3.isLoading$)),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",!_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](11,8,ctx_r3.isLoading$)&&0===(null==entriesRD_r4||null==entriesRD_r4.payload||null==entriesRD_r4.payload.page?null:entriesRD_r4.payload.page.length))}}function SubmissionImportExternalComponent_div_15_div_2_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div",2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](2,SubmissionImportExternalComponent_div_15_div_2_ng_container_2_Template,13,10,"ng-container",9),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](3,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](4,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()),2&rf){const ctx_r1=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"](2);_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngVar",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](3,1,ctx_r1.entriesRD$))}}function SubmissionImportExternalComponent_div_15_div_4_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div",2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](2,"ds-alert",17),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](4,"p",18),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](5),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](6,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](7,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](8,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("type","alert-info"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](6,2,"submission.import-external.page.hint")))}function SubmissionImportExternalComponent_div_15_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div",1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](2,SubmissionImportExternalComponent_div_15_div_2_Template,5,3,"div",8),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](4,SubmissionImportExternalComponent_div_15_div_4_Template,9,4,"div",8),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](5,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()),2&rf){const ctx_r0=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",""!==ctx_r0.reload$.value.sourceId),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",""===ctx_r0.reload$.value.sourceId)}}const _c1=function(){return["/mydspace"]};class SubmissionImportExternalComponent{constructor(searchConfigService,externalService,routeService,router,modalService){this.searchConfigService=searchConfigService,this.externalService=externalService,this.routeService=routeService,this.router=router,this.modalService=modalService,this.entriesRD$=new rxjs__WEBPACK_IMPORTED_MODULE_1__.a(null),this.isLoading$=new rxjs__WEBPACK_IMPORTED_MODULE_1__.a(!1),this.reload$=new rxjs__WEBPACK_IMPORTED_MODULE_1__.a({entity:"",query:"",sourceId:""}),this.initialPagination=Object.assign(new _shared_pagination_pagination_component_options_model__WEBPACK_IMPORTED_MODULE_12__.a,{id:"spc",pageSize:10}),this.subs=[]}ngOnInit(){this.listId="list-submission-external-sources",this.context=_core_shared_context_model__WEBPACK_IMPORTED_MODULE_11__.a.EntitySearchModalWithNameVariants,this.repeatable=!1,this.routeData={entity:"",sourceId:"",query:""},this.importConfig={buttonLabel:"submission.sections.describe.relationship-lookup.external-source.import-button-title."+this.label},this.entriesRD$=new rxjs__WEBPACK_IMPORTED_MODULE_1__.a(Object(_shared_remote_data_utils__WEBPACK_IMPORTED_MODULE_14__.c)(Object(_core_data_paginated_list_model__WEBPACK_IMPORTED_MODULE_9__.b)(new _core_shared_page_info_model__WEBPACK_IMPORTED_MODULE_17__.a,[]))),this.isLoading$=new rxjs__WEBPACK_IMPORTED_MODULE_1__.a(!1),this.subs.push(Object(rxjs__WEBPACK_IMPORTED_MODULE_2__.a)([this.routeService.getQueryParameterValue("entity"),this.routeService.getQueryParameterValue("sourceId"),this.routeService.getQueryParameterValue("query")]).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.a)(1)).subscribe((([entity,sourceId,query])=>{this.reload$.next({entity:entity||_core_shared_item_relationships_item_type_resource_type__WEBPACK_IMPORTED_MODULE_20__.b,query:query,sourceId:sourceId}),this.selectLabel(entity),this.retrieveExternalSources()})))}getExternalSourceData(event){this.router.navigate([],{queryParams:event,replaceUrl:!0}).then((()=>{this.reload$.next(event),this.retrieveExternalSources()}))}import(entry){this.modalRef=this.modalService.open(_import_external_preview_submission_import_external_preview_component__WEBPACK_IMPORTED_MODULE_15__.a,{size:"lg"});const modalComp=this.modalRef.componentInstance;modalComp.externalSourceEntry=entry,modalComp.labelPrefix=this.label}ngOnDestroy(){this.subs.filter((sub=>Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_18__.b)(sub))).forEach((sub=>sub.unsubscribe())),Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_18__.b)(this.retrieveExternalSourcesSub)&&this.retrieveExternalSourcesSub.unsubscribe()}retrieveExternalSources(){Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_18__.b)(this.retrieveExternalSourcesSub)&&this.retrieveExternalSourcesSub.unsubscribe(),this.retrieveExternalSourcesSub=this.reload$.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.a)((sourceQueryObject=>Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_18__.e)(sourceQueryObject.sourceId)&&Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_18__.e)(sourceQueryObject.query))),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.a)((sourceQueryObject=>{const query=sourceQueryObject.query;return this.routeData=sourceQueryObject,this.searchConfigService.paginatedSearchOptions.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.a)((()=>this.isLoading$.next(!0))),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.a)((searchOptions=>searchOptions.query===query)),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.a)((searchOptions=>this.externalService.getExternalSourceEntries(this.routeData.sourceId,searchOptions).pipe(Object(_core_shared_operators__WEBPACK_IMPORTED_MODULE_19__.f)()))))}))).subscribe((rdData=>{this.entriesRD$.next(rdData),this.isLoading$.next(!1)}))}selectLabel(entity){this.label=entity,this.importConfig={buttonLabel:"submission.sections.describe.relationship-lookup.external-source.import-button-title."+this.label}}}SubmissionImportExternalComponent.\u0275fac=function SubmissionImportExternalComponent_Factory(t){return new(t||SubmissionImportExternalComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_core_shared_search_search_configuration_service__WEBPACK_IMPORTED_MODULE_10__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_core_data_external_source_service__WEBPACK_IMPORTED_MODULE_8__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_core_services_route_service__WEBPACK_IMPORTED_MODULE_13__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_21__.g),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_22__.q))},SubmissionImportExternalComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineComponent"]({type:SubmissionImportExternalComponent,selectors:[["ds-submission-import-external"]],decls:32,vars:10,consts:[[1,"container"],[1,"row"],[1,"col-md-12"],["id","header",1,"pb-2"],[3,"initExternalSourceData","externalSourceData"],["class","row",4,"ngIf"],["role","button",1,"btn","btn-outline-secondary",3,"routerLink"],["aria-hidden","true",1,"fa","fa-chevron-left"],["class","col-md-12",4,"ngIf"],[4,"ngVar"],[4,"ngIf"],[3,"objects","selectionConfig","config","hideGear","context","importable","importConfig","importObject",4,"ngIf"],[3,"message",4,"ngIf"],["id","empty-external-entry-list",4,"ngIf"],[3,"objects","selectionConfig","config","hideGear","context","importable","importConfig","importObject"],[3,"message"],["id","empty-external-entry-list"],[3,"type"],[1,"lead","mb-0"]],template:function SubmissionImportExternalComponent_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div",0),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](2,"div",1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](4,"div",2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](5,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](6,"h2",3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](7),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](8,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](9,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](10,"ds-submission-import-external-searchbar",4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("externalSourceData",(function SubmissionImportExternalComponent_Template_ds_submission_import_external_searchbar_externalSourceData_10_listener($event){return ctx.getExternalSourceData($event)})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](11,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](12,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](13,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](14,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](15,SubmissionImportExternalComponent_div_15_Template,6,2,"div",5),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](16,"\n\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](17,"div",1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](18,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](19,"div",2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](20,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](21,"hr"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](22,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](23,"a",6),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](24,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](25,"i",7),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](26),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](27,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](28,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](29,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](30,"\n"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](31,"\n")),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](7),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](8,5,"submission.import-external.title"+(ctx.label?"."+ctx.label:""))),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("initExternalSourceData",ctx.reload$.value),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](5),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",ctx.reload$.value.entity),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](8),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("routerLink",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pureFunction0"](9,_c1)),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate1"](" ",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](27,7,"submission.import-external.back-to-my-dspace"),"\n      "))},directives:[_import_external_searchbar_submission_import_external_searchbar_component__WEBPACK_IMPORTED_MODULE_23__.a,_angular_common__WEBPACK_IMPORTED_MODULE_24__.NgIf,_angular_router__WEBPACK_IMPORTED_MODULE_21__.j,_shared_utils_var_directive__WEBPACK_IMPORTED_MODULE_25__.a,_shared_object_collection_object_collection_component__WEBPACK_IMPORTED_MODULE_26__.a,_shared_loading_loading_component__WEBPACK_IMPORTED_MODULE_27__.a,_shared_alert_alert_component__WEBPACK_IMPORTED_MODULE_28__.a],pipes:[_ngx_translate_core__WEBPACK_IMPORTED_MODULE_29__.d,_angular_common__WEBPACK_IMPORTED_MODULE_24__.AsyncPipe],styles:[""],data:{animation:[_shared_animations_fade__WEBPACK_IMPORTED_MODULE_16__.a]}})},SCNa:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"SubmissionEditComponent",(function(){return SubmissionEditComponent}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),rxjs__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("2Vo4"),rxjs_operators__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("eIep"),rxjs_operators__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("pLZG"),rxjs_operators__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("Kj3r"),_shared_empty_util__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("J3qs"),_submission_service__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("J/vq"),_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("lI3o"),_core_shared_operators__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("1QIV"),_core_data_item_data_service__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("iqTE"),_core_submission_submission_json_patch_operations_service__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("QjZv"),_utils_parseSectionErrors__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("fBXw"),_angular_router__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("tyNb"),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("sYmb"),_form_submission_form_component__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("m4Gq");class SubmissionEditComponent{constructor(changeDetectorRef,notificationsService,route,router,itemDataService,submissionService,translate,submissionJsonPatchOperationsService){this.changeDetectorRef=changeDetectorRef,this.notificationsService=notificationsService,this.route=route,this.router=router,this.itemDataService=itemDataService,this.submissionService=submissionService,this.translate=translate,this.submissionJsonPatchOperationsService=submissionJsonPatchOperationsService,this.subs=[],this.itemLink$=new rxjs__WEBPACK_IMPORTED_MODULE_1__.a(void 0)}ngOnInit(){this.subs.push(this.route.paramMap.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.a)((params=>this.submissionService.retrieveSubmission(params.get("id")))),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.a)((submissionObjectRD=>Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_5__.g)(submissionObjectRD)))).subscribe((submissionObjectRD=>{if(submissionObjectRD.hasSucceeded)if(Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_5__.d)(submissionObjectRD.payload))this.notificationsService.info(null,this.translate.get("submission.general.cannot_submit")),this.router.navigate(["/mydspace"]);else{const{errors:errors}=submissionObjectRD.payload;this.submissionErrors=Object(_utils_parseSectionErrors__WEBPACK_IMPORTED_MODULE_11__.a)(errors),this.submissionId=submissionObjectRD.payload.id.toString(),this.collectionId=submissionObjectRD.payload.collection.id,this.selfUrl=submissionObjectRD.payload._links.self.href,this.sections=submissionObjectRD.payload.sections,this.itemLink$.next(submissionObjectRD.payload._links.item.href),this.item=submissionObjectRD.payload.item,this.submissionDefinition=submissionObjectRD.payload.submissionDefinition}else 404===submissionObjectRD.statusCode&&this.router.navigate(["/404"],{skipLocationChange:!0})})),this.itemLink$.pipe(Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_5__.f)(),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.a)((itemLink=>this.itemDataService.findByHref(itemLink))),Object(_core_shared_operators__WEBPACK_IMPORTED_MODULE_8__.c)(),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.a)(300)).subscribe((itemRd=>{this.item=itemRd.payload,this.changeDetectorRef.detectChanges()})))}ngOnDestroy(){this.subs.filter((sub=>Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_5__.b)(sub))).forEach((sub=>sub.unsubscribe())),this.submissionJsonPatchOperationsService.deletePendingJsonPatchOperations()}}SubmissionEditComponent.\u0275fac=function SubmissionEditComponent_Factory(t){return new(t||SubmissionEditComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__.ChangeDetectorRef),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_7__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_12__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_12__.g),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_core_data_item_data_service__WEBPACK_IMPORTED_MODULE_9__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_submission_service__WEBPACK_IMPORTED_MODULE_6__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_ngx_translate_core__WEBPACK_IMPORTED_MODULE_13__.e),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_core_submission_submission_json_patch_operations_service__WEBPACK_IMPORTED_MODULE_10__.a))},SubmissionEditComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineComponent"]({type:SubmissionEditComponent,selectors:[["ds-submission-edit"]],decls:5,vars:7,consts:[[1,"submission-submit-container"],[3,"collectionId","sections","selfUrl","submissionDefinition","submissionErrors","item","submissionId"]],template:function SubmissionEditComponent_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div",0),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](2,"ds-submission-form",1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3,"\n"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](4,"\n")),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("collectionId",ctx.collectionId)("sections",ctx.sections)("selfUrl",ctx.selfUrl)("submissionDefinition",ctx.submissionDefinition)("submissionErrors",ctx.submissionErrors)("item",ctx.item)("submissionId",ctx.submissionId))},directives:[_form_submission_form_component__WEBPACK_IMPORTED_MODULE_14__.a],styles:[""]})},"T/iP":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return SubmissionUploadFilesComponent}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),rxjs__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("LRne"),rxjs_operators__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("SxV6"),rxjs_operators__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("IzEk"),_sections_sections_service__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("YJD6"),_shared_empty_util__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("J3qs"),_core_submission_submission_response_parsing_service__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("oOMw"),_submission_service__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("J/vq"),_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("lI3o"),_utils_parseSectionErrors__WEBPACK_IMPORTED_MODULE_10__=(__webpack_require__("ao5O"),__webpack_require__("fBXw")),_core_submission_submission_json_patch_operations_service__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("QjZv"),_sections_sections_type__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("4GeW"),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("sYmb"),_angular_common__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("ofXK"),_shared_uploader_uploader_component__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("4zj/");function SubmissionUploadFilesComponent_ds_uploader_0_Template(rf,ctx){if(1&rf){const _r2=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275getCurrentView"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"ds-uploader",1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("onCompleteItem",(function SubmissionUploadFilesComponent_ds_uploader_0_Template_ds_uploader_onCompleteItem_0_listener($event){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r2);return _angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]().onCompleteItem($event)}))("onUploadError",(function SubmissionUploadFilesComponent_ds_uploader_0_Template_ds_uploader_onUploadError_0_listener(){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r2);return _angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]().onUploadError()})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()}if(2&rf){const ctx_r0=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("dropMsg",ctx_r0.dropMsg)("dropOverDocumentMsg",ctx_r0.dropOverDocumentMsg)("enableDragOverDocument",ctx_r0.enableDragOverDocument)("onBeforeUpload",ctx_r0.onBeforeUpload)("uploadFilesOptions",ctx_r0.uploadFilesOptions)}}class SubmissionUploadFilesComponent{constructor(notificationsService,operationsService,sectionService,submissionService,translate){this.notificationsService=notificationsService,this.operationsService=operationsService,this.sectionService=sectionService,this.submissionService=submissionService,this.translate=translate,this.enableDragOverDocument=!0,this.dropOverDocumentMsg="submission.sections.upload.drop-message",this.dropMsg="submission.sections.upload.drop-message",this.subs=[],this.uploadEnabled=Object(rxjs__WEBPACK_IMPORTED_MODULE_1__.a)(!1),this.onBeforeUpload=()=>{const sub=this.operationsService.jsonPatchByResourceType(this.submissionService.getSubmissionObjectLinkName(),this.submissionId,"sections").subscribe();return this.subs.push(sub),sub}}ngOnChanges(){this.uploadEnabled=this.sectionService.isSectionTypeAvailable(this.submissionId,_sections_sections_type__WEBPACK_IMPORTED_MODULE_12__.a.Upload)}onCompleteItem(workspaceitem){this.subs.push(this.uploadEnabled.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.a)()).subscribe((isUploadEnabled=>{if(isUploadEnabled){const{sections:sections}=workspaceitem,{errors:errors}=workspaceitem,errorsList=Object(_utils_parseSectionErrors__WEBPACK_IMPORTED_MODULE_10__.a)(errors);sections&&Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_5__.e)(sections)&&Object.keys(sections).forEach((sectionId=>{const sectionData=Object(_core_submission_submission_response_parsing_service__WEBPACK_IMPORTED_MODULE_6__.b)(sections[sectionId]),sectionErrors=errorsList[sectionId];this.sectionService.isSectionType(this.submissionId,sectionId,_sections_sections_type__WEBPACK_IMPORTED_MODULE_12__.a.Upload).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.a)(1)).subscribe((isUpload=>{isUpload&&(Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_5__.d)(sectionErrors)?this.notificationsService.success(null,this.translate.get("submission.sections.upload.upload-successful")):this.notificationsService.error(null,this.translate.get("submission.sections.upload.upload-failed")))})),this.sectionService.updateSectionData(this.submissionId,sectionId,sectionData,sectionErrors,sectionErrors)}))}})))}onUploadError(){this.notificationsService.error(null,this.translate.get("submission.sections.upload.upload-failed"))}ngOnDestroy(){this.subs.filter((subscription=>Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_5__.b)(subscription))).forEach((subscription=>subscription.unsubscribe()))}}SubmissionUploadFilesComponent.\u0275fac=function SubmissionUploadFilesComponent_Factory(t){return new(t||SubmissionUploadFilesComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_8__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_core_submission_submission_json_patch_operations_service__WEBPACK_IMPORTED_MODULE_11__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_sections_sections_service__WEBPACK_IMPORTED_MODULE_4__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_submission_service__WEBPACK_IMPORTED_MODULE_7__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_ngx_translate_core__WEBPACK_IMPORTED_MODULE_13__.e))},SubmissionUploadFilesComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineComponent"]({type:SubmissionUploadFilesComponent,selectors:[["ds-submission-upload-files"]],inputs:{collectionId:"collectionId",submissionId:"submissionId",uploadFilesOptions:"uploadFilesOptions"},features:[_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275NgOnChangesFeature"]],decls:2,vars:1,consts:[[3,"dropMsg","dropOverDocumentMsg","enableDragOverDocument","onBeforeUpload","uploadFilesOptions","onCompleteItem","onUploadError",4,"ngIf"],[3,"dropMsg","dropOverDocumentMsg","enableDragOverDocument","onBeforeUpload","uploadFilesOptions","onCompleteItem","onUploadError"]],template:function SubmissionUploadFilesComponent_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](0,SubmissionUploadFilesComponent_ds_uploader_0_Template,1,5,"ds-uploader",0),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n")),2&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",ctx.uploadFilesOptions.url)},directives:[_angular_common__WEBPACK_IMPORTED_MODULE_14__.NgIf,_shared_uploader_uploader_component__WEBPACK_IMPORTED_MODULE_15__.a],encapsulation:2})},THHU:function(module,exports,__webpack_require__){var map={"./custom/app/item-page/simple/item-page.component":["8T8d",52]};function webpackAsyncContext(req){if(!__webpack_require__.o(map,req))return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}));var ids=map[req],id=ids[0];return __webpack_require__.e(ids[1]).then((function(){return __webpack_require__(id)}))}webpackAsyncContext.keys=function webpackAsyncContextKeys(){return Object.keys(map)},webpackAsyncContext.id="THHU",module.exports=webpackAsyncContext},THnG:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"SubmissionSubmitComponent",(function(){return SubmissionSubmitComponent}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),rxjs__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("2Vo4"),rxjs_operators__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("eIep"),rxjs_operators__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("Kj3r"),_shared_empty_util__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("J3qs"),_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("lI3o"),_submission_service__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("J/vq"),_core_shared_operators__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("1QIV"),_core_data_item_data_service__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("iqTE"),_angular_router__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("tyNb"),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("sYmb");class SubmissionSubmitComponent{constructor(changeDetectorRef,notificationsService,router,itemDataService,submissionService,translate,viewContainerRef,route){this.changeDetectorRef=changeDetectorRef,this.notificationsService=notificationsService,this.router=router,this.itemDataService=itemDataService,this.submissionService=submissionService,this.translate=translate,this.viewContainerRef=viewContainerRef,this.route=route,this.itemLink$=new rxjs__WEBPACK_IMPORTED_MODULE_1__.a(void 0),this.subs=[],this.route.queryParams.subscribe((params=>{this.collectionParam=params.collection}))}ngOnInit(){this.subs.push(this.submissionService.createSubmission(this.collectionParam).subscribe((submissionObject=>{Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_4__.g)(submissionObject)&&(Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_4__.d)(submissionObject)?(this.notificationsService.info(null,this.translate.get("submission.general.cannot_submit")),this.router.navigate(["/mydspace"])):this.router.navigate(["/workspaceitems",submissionObject.id,"edit"],{replaceUrl:!0}))})),this.itemLink$.pipe(Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_4__.f)(),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.a)((itemLink=>this.itemDataService.findByHref(itemLink))),Object(_core_shared_operators__WEBPACK_IMPORTED_MODULE_7__.c)(),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.a)(300)).subscribe((itemRd=>{this.item=itemRd.payload,this.changeDetectorRef.detectChanges()})))}ngOnDestroy(){this.subs.filter((subscription=>Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_4__.b)(subscription))).forEach((subscription=>subscription.unsubscribe())),this.viewContainerRef.clear(),this.changeDetectorRef.markForCheck()}}SubmissionSubmitComponent.\u0275fac=function SubmissionSubmitComponent_Factory(t){return new(t||SubmissionSubmitComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__.ChangeDetectorRef),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_5__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_9__.g),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_core_data_item_data_service__WEBPACK_IMPORTED_MODULE_8__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_submission_service__WEBPACK_IMPORTED_MODULE_6__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_ngx_translate_core__WEBPACK_IMPORTED_MODULE_10__.e),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__.ViewContainerRef),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_9__.a))},SubmissionSubmitComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineComponent"]({type:SubmissionSubmitComponent,selectors:[["ds-submission-submit"]],decls:0,vars:0,template:function SubmissionSubmitComponent_Template(rf,ctx){},styles:[""]})},TTdl:function(module,__webpack_exports__,__webpack_require__){"use strict";var _shared_empty_util__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("J3qs");const regex=/([^\/]+)/g,regexShort=/\/sections\/(.*)/;__webpack_exports__.a=path=>("string"==typeof path?[path]:path).map((item=>item.match(regex)&&item.match(regex).length>2?{sectionId:item.match(regex)[1],fieldId:item.match(regex)[2],fieldIndex:Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_0__.b)(item.match(regex)[3])?+item.match(regex)[3]:0,originalPath:item}:{sectionId:item.match(regexShort)[1],originalPath:item}))},TkMu:function(module,exports,__webpack_require__){var map={"./custom/app/submission/submit/submission-submit.component":["cSSl",70]};function webpackAsyncContext(req){if(!__webpack_require__.o(map,req))return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}));var ids=map[req],id=ids[0];return __webpack_require__.e(ids[1]).then((function(){return __webpack_require__(id)}))}webpackAsyncContext.keys=function webpackAsyncContextKeys(){return Object.keys(map)},webpackAsyncContext.id="TkMu",module.exports=webpackAsyncContext},TrCT:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return SearchTrackerComponent}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),rxjs_operators__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("eIep"),rxjs_operators__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("lJxs"),_shared_search_search_component__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("9H8w"),_shared_sidebar_sidebar_service__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("7LZ0"),_shared_host_window_service__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("14tD"),_my_dspace_page_my_dspace_page_component__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("dtp9"),_core_services_route_service__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("ppE2"),_core_shared_search_search_configuration_service__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("joI/"),_core_shared_search_search_service__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("gWc+"),_core_shared_operators__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("1QIV"),angulartics2__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("wQXg"),_angular_router__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("tyNb");class SearchTrackerComponent extends _shared_search_search_component__WEBPACK_IMPORTED_MODULE_3__.a{constructor(service,sidebarService,windowService,searchConfigService,routeService,angulartics2,router){super(service,sidebarService,windowService,searchConfigService,routeService,router),this.service=service,this.sidebarService=sidebarService,this.windowService=windowService,this.searchConfigService=searchConfigService,this.routeService=routeService,this.angulartics2=angulartics2,this.router=router}ngOnInit(){this.getSearchOptions().pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_1__.a)((options=>this.service.searchEntries(options).pipe(Object(_core_shared_operators__WEBPACK_IMPORTED_MODULE_10__.i)(),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.a)((rd=>({config:options,searchQueryResponse:rd.payload}))))))).subscribe((({config:config,searchQueryResponse:searchQueryResponse})=>{const filters=[],appliedFilters=searchQueryResponse.appliedFilters||[];for(let i=0,filtersLength=appliedFilters.length;i<filtersLength;i++){const appliedFilter=appliedFilters[i];filters.push(appliedFilter)}this.angulartics2.eventTrack.next({action:"search",properties:{searchOptions:config,page:{size:config.pagination.size,totalElements:searchQueryResponse.pageInfo.totalElements,totalPages:searchQueryResponse.pageInfo.totalPages,number:config.pagination.currentPage},sort:{by:config.sort.field,order:config.sort.direction},filters:filters}})}))}}SearchTrackerComponent.\u0275fac=function SearchTrackerComponent_Factory(t){return new(t||SearchTrackerComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_core_shared_search_search_service__WEBPACK_IMPORTED_MODULE_9__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_shared_sidebar_sidebar_service__WEBPACK_IMPORTED_MODULE_4__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_shared_host_window_service__WEBPACK_IMPORTED_MODULE_5__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_my_dspace_page_my_dspace_page_component__WEBPACK_IMPORTED_MODULE_6__.SEARCH_CONFIG_SERVICE),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_core_services_route_service__WEBPACK_IMPORTED_MODULE_7__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](angulartics2__WEBPACK_IMPORTED_MODULE_11__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_12__.g))},SearchTrackerComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineComponent"]({type:SearchTrackerComponent,selectors:[["ds-search-tracker"]],features:[_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275ProvidersFeature"]([{provide:_my_dspace_page_my_dspace_page_component__WEBPACK_IMPORTED_MODULE_6__.SEARCH_CONFIG_SERVICE,useClass:_core_shared_search_search_configuration_service__WEBPACK_IMPORTED_MODULE_8__.a}]),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275InheritDefinitionFeature"]],decls:1,vars:0,template:function SearchTrackerComponent_Template(rf,ctx){1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](0,"\xa0\n")},styles:["[_nghost-%COMP%]{display:none}"]})},"Uql/":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return renderSectionFor})),__webpack_require__.d(__webpack_exports__,"b",(function(){return rendersSectionType}));const submissionSectionsMap=new Map;function renderSectionFor(sectionType){return function decorator(objectElement){objectElement&&submissionSectionsMap.set(sectionType,objectElement)}}function rendersSectionType(sectionType){return submissionSectionsMap.get(sectionType)}},VxFp:function(module,exports,__webpack_require__){var map={"./custom/app/search-page/search-page.component":["Bvb0",63]};function webpackAsyncContext(req){if(!__webpack_require__.o(map,req))return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}));var ids=map[req],id=ids[0];return __webpack_require__.e(ids[1]).then((function(){return __webpack_require__(id)}))}webpackAsyncContext.keys=function webpackAsyncContextKeys(){return Object.keys(map)},webpackAsyncContext.id="VxFp",module.exports=webpackAsyncContext},YJD6:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return SectionsService}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),rxjs__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("itXk"),rxjs_operators__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("lJxs"),rxjs_operators__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("/uUt"),rxjs_operators__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("5+tZ"),rxjs_operators__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("pLZG"),rxjs_operators__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("IzEk"),lodash__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("LvDl"),_shared_empty_util__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("J3qs"),_objects_submission_objects_actions__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("4jMI"),_selectors__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("LP5c"),_core_submission_submission_scope_type__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("drGc"),_utils_parseSectionErrorPaths__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("TTdl"),_shared_form_form_actions__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("xvwT"),_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("lI3o"),_submission_service__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("J/vq"),_sections_type__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("4GeW"),_core_submission_submission_response_parsing_service__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("oOMw"),_ng_dynamic_forms_core__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("e+Av"),_shared_form_form_service__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("NFsL"),_core_json_patch_builder_json_patch_operation_path_combiner__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("0VLH"),_nicky_lenaers_ngx_scroll_to__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("KZTq"),_ngrx_store__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__("l7P3"),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__("sYmb");class SectionsService{constructor(formService,notificationsService,scrollToService,submissionService,store,translate){this.formService=formService,this.notificationsService=notificationsService,this.scrollToService=scrollToService,this.submissionService=submissionService,this.store=store,this.translate=translate}checkSectionErrors(submissionId,sectionId,formId,currentErrors,prevErrors=[]){if(Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_8__.d)(currentErrors))this.store.dispatch(new _objects_submission_objects_actions__WEBPACK_IMPORTED_MODULE_9__.r(submissionId,sectionId)),this.store.dispatch(new _shared_form_form_actions__WEBPACK_IMPORTED_MODULE_13__.e(formId));else if(!Object(lodash__WEBPACK_IMPORTED_MODULE_7__.isEqual)(currentErrors,prevErrors)){const dispatchedErrors=[];currentErrors.forEach((error=>{Object(_utils_parseSectionErrorPaths__WEBPACK_IMPORTED_MODULE_12__.a)(error.path).forEach((path=>{path.fieldId&&(this.formService.addError(formId,path.fieldId,path.fieldIndex,error.message),dispatchedErrors.push(path.fieldId))}))})),prevErrors.forEach((error=>{Object(_utils_parseSectionErrorPaths__WEBPACK_IMPORTED_MODULE_12__.a)(error.path).forEach((path=>{path.fieldId&&(dispatchedErrors.includes(path.fieldId)||this.formService.removeError(formId,path.fieldId,path.fieldIndex))}))}))}}dispatchRemoveSectionErrors(submissionId,sectionId){this.store.dispatch(new _objects_submission_objects_actions__WEBPACK_IMPORTED_MODULE_9__.r(submissionId,sectionId))}dispatchSetSectionFormId(submissionId,sectionId,formId){this.store.dispatch(new _objects_submission_objects_actions__WEBPACK_IMPORTED_MODULE_9__.E(submissionId,sectionId,formId))}getSectionData(submissionId,sectionId,sectionType){return this.store.select(Object(_selectors__WEBPACK_IMPORTED_MODULE_10__.d)(submissionId,sectionId)).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.a)((sectionData=>sectionType===_sections_type__WEBPACK_IMPORTED_MODULE_16__.a.SubmissionForm?Object(_core_submission_submission_response_parsing_service__WEBPACK_IMPORTED_MODULE_17__.b)(sectionData):sectionData)),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.a)())}getShownSectionErrors(submissionId,sectionId,sectionType){let errorsState$;return errorsState$=sectionType!==_sections_type__WEBPACK_IMPORTED_MODULE_16__.a.SubmissionForm?this.getSectionErrors(submissionId,sectionId):this.getSectionState(submissionId,sectionId,sectionType).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.a)((state=>this.formService.getFormErrors(state.formId).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.a)((formErrors=>{const pathCombiner=new _core_json_patch_builder_json_patch_operation_path_combiner__WEBPACK_IMPORTED_MODULE_20__.a("sections",sectionId),sectionErrors=formErrors.map((error=>({path:pathCombiner.getPath(error.fieldId.replace(/\_/g,".")).path,message:error.message}))).filter((sectionError=>-1===Object(lodash__WEBPACK_IMPORTED_MODULE_7__.findIndex)(state.errorsToShow,{path:sectionError.path})));return[...state.errorsToShow,...sectionErrors]})))))),errorsState$}getSectionErrors(submissionId,sectionId){return this.store.select(Object(_selectors__WEBPACK_IMPORTED_MODULE_10__.e)(submissionId,sectionId)).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.a)())}getSectionServerErrors(submissionId,sectionId){return this.store.select(Object(_selectors__WEBPACK_IMPORTED_MODULE_10__.g)(submissionId,sectionId)).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.a)())}getSectionState(submissionId,sectionId,sectionType){return this.store.select(Object(_selectors__WEBPACK_IMPORTED_MODULE_10__.f)(submissionId,sectionId)).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.a)((sectionObj=>Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_8__.b)(sectionObj))),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.a)((sectionObj=>sectionObj)),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.a)((sectionState=>Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_8__.b)(sectionState.data)&&sectionType===_sections_type__WEBPACK_IMPORTED_MODULE_16__.a.SubmissionForm?Object.assign({},sectionState,{data:Object(_core_submission_submission_response_parsing_service__WEBPACK_IMPORTED_MODULE_17__.b)(sectionState.data)}):sectionState)),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.a)())}isSectionValid(submissionId,sectionId){return this.store.select(Object(_selectors__WEBPACK_IMPORTED_MODULE_10__.f)(submissionId,sectionId)).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.a)((sectionObj=>Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_8__.b)(sectionObj))),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.a)((sectionObj=>sectionObj.isValid)),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.a)())}isSectionActive(submissionId,sectionId){return this.submissionService.getActiveSectionId(submissionId).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.a)((activeSectionId=>sectionId===activeSectionId)),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.a)())}isSectionEnabled(submissionId,sectionId){return this.store.select(Object(_selectors__WEBPACK_IMPORTED_MODULE_10__.f)(submissionId,sectionId)).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.a)((sectionObj=>Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_8__.b)(sectionObj))),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.a)((sectionObj=>sectionObj.enabled)),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.a)())}isSectionReadOnly(submissionId,sectionId,submissionScope){return this.store.select(Object(_selectors__WEBPACK_IMPORTED_MODULE_10__.f)(submissionId,sectionId)).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.a)((sectionObj=>Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_8__.b)(sectionObj))),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.a)((sectionObj=>Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_8__.e)(sectionObj.visibility)&&"READONLY"===sectionObj.visibility.other&&submissionScope!==_core_submission_submission_scope_type__WEBPACK_IMPORTED_MODULE_11__.a.WorkspaceItem)),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.a)())}isSectionAvailable(submissionId,sectionId){return this.store.select(Object(_selectors__WEBPACK_IMPORTED_MODULE_10__.c)(submissionId)).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.a)((submissionState=>Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_8__.h)(submissionState))),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.a)((submissionState=>Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_8__.h)(submissionState.sections)&&Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_8__.h)(submissionState.sections[sectionId]))),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.a)())}isSectionTypeAvailable(submissionId,sectionType){return this.store.select(Object(_selectors__WEBPACK_IMPORTED_MODULE_10__.c)(submissionId)).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.a)((submissionState=>Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_8__.h)(submissionState))),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.a)((submissionState=>Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_8__.h)(submissionState.sections)&&Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_8__.h)(Object(lodash__WEBPACK_IMPORTED_MODULE_7__.findKey)(submissionState.sections,{sectionType:sectionType})))),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.a)())}isSectionType(submissionId,sectionId,sectionType){return this.store.select(Object(_selectors__WEBPACK_IMPORTED_MODULE_10__.c)(submissionId)).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.a)((submissionState=>Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_8__.h)(submissionState))),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.a)((submissionState=>Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_8__.h)(submissionState.sections)&&Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_8__.h)(submissionState.sections[sectionId])&&submissionState.sections[sectionId].sectionType===sectionType)),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.a)())}addSection(submissionId,sectionId){this.store.dispatch(new _objects_submission_objects_actions__WEBPACK_IMPORTED_MODULE_9__.m(submissionId,sectionId));const config={target:sectionId,offset:-70};this.scrollToService.scrollTo(config)}removeSection(submissionId,sectionId){this.store.dispatch(new _objects_submission_objects_actions__WEBPACK_IMPORTED_MODULE_9__.h(submissionId,sectionId))}updateSectionData(submissionId,sectionId,data,errorsToShow=[],serverValidationErrors=[],metadata){if(Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_8__.e)(data)){const isAvailable$=this.isSectionAvailable(submissionId,sectionId),isEnabled$=this.isSectionEnabled(submissionId,sectionId);Object(rxjs__WEBPACK_IMPORTED_MODULE_1__.a)(isAvailable$,isEnabled$).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.a)(1),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.a)((([available,enabled])=>available))).subscribe((([available,enabled])=>{this.store.dispatch(new _objects_submission_objects_actions__WEBPACK_IMPORTED_MODULE_9__.G(submissionId,sectionId,data,errorsToShow,serverValidationErrors,metadata))}))}}setSectionError(submissionId,sectionId,error){this.store.dispatch(new _objects_submission_objects_actions__WEBPACK_IMPORTED_MODULE_9__.n(submissionId,sectionId,error))}setSectionStatus(submissionId,sectionId,status){this.store.dispatch(new _objects_submission_objects_actions__WEBPACK_IMPORTED_MODULE_9__.C(submissionId,sectionId,status))}computeSectionConfiguredMetadata(formConfig){const metadata=[],rawData="string"==typeof formConfig?JSON.parse(formConfig,_ng_dynamic_forms_core__WEBPACK_IMPORTED_MODULE_18__.T):formConfig;return rawData.rows&&!Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_8__.d)(rawData.rows)&&rawData.rows.forEach((currentRow=>{currentRow.fields&&!Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_8__.d)(currentRow.fields)&&currentRow.fields.forEach((field=>{field.selectableMetadata&&!Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_8__.d)(field.selectableMetadata)&&field.selectableMetadata.forEach((selectableMetadata=>{metadata.includes(selectableMetadata.metadata)||metadata.push(selectableMetadata.metadata)}))}))})),metadata}}SectionsService.\u0275fac=function SectionsService_Factory(t){return new(t||SectionsService)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275inject"](_shared_form_form_service__WEBPACK_IMPORTED_MODULE_19__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275inject"](_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_14__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275inject"](_nicky_lenaers_ngx_scroll_to__WEBPACK_IMPORTED_MODULE_21__.b),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275inject"](_submission_service__WEBPACK_IMPORTED_MODULE_15__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275inject"](_ngrx_store__WEBPACK_IMPORTED_MODULE_22__.i),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275inject"](_ngx_translate_core__WEBPACK_IMPORTED_MODULE_23__.e))},SectionsService.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineInjectable"]({token:SectionsService,factory:SectionsService.\u0275fac})},Yfyx:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return SubmissionSectionContainerComponent}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),_sections_directive__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("b8BE"),_sections_decorator__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("Uql/"),_shared_alert_aletr_type__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("ac5F"),_angular_common__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("ofXK"),_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("1kSV"),_shared_alert_alert_component__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("VYMa"),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("sYmb");const _c0=["sectionRef"];function SubmissionSectionContainerComponent_ngb_accordion_3_ng_template_5_i_7_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](0,"i",17),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](1,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](2,"translate")),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275propertyInterpolate"]("title",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](1,2,"submission.sections.status.warnings.title")),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275attribute"]("aria-label",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](2,4,"submission.sections.status.warnings.aria")))}function SubmissionSectionContainerComponent_ngb_accordion_3_ng_template_5_i_10_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](0,"i",18),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](1,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](2,"translate")),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275propertyInterpolate"]("title",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](1,2,"submission.sections.status.errors.title")),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275attribute"]("aria-label",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](2,4,"submission.sections.status.errors.aria")))}function SubmissionSectionContainerComponent_ngb_accordion_3_ng_template_5_i_12_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](0,"i",19),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](1,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](2,"translate")),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275propertyInterpolate"]("title",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](1,2,"submission.sections.status.valid.title")),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275attribute"]("aria-label",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](2,4,"submission.sections.status.valid.aria")))}function SubmissionSectionContainerComponent_ngb_accordion_3_ng_template_5_span_20_Template(rf,ctx){1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](0,"span",20)}function SubmissionSectionContainerComponent_ngb_accordion_3_ng_template_5_span_22_Template(rf,ctx){1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](0,"span",21)}function SubmissionSectionContainerComponent_ngb_accordion_3_ng_template_5_a_25_Template(rf,ctx){if(1&rf){const _r12=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275getCurrentView"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"a",22),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("click",(function SubmissionSectionContainerComponent_ngb_accordion_3_ng_template_5_a_25_Template_a_click_0_listener($event){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r12);return _angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"](3).removeSection($event)})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n            "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](2,"i",23),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3,"\n          "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()}}const _c1=function(a0){return{sectionHeader:a0}};function SubmissionSectionContainerComponent_ngb_accordion_3_ng_template_5_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](0,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](1,"span",8),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](3,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](4,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](5,"div",9),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](6,"\n          "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](7,SubmissionSectionContainerComponent_ngb_accordion_3_ng_template_5_i_7_Template,3,6,"i",10),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](8,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](9,"\n          "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](10,SubmissionSectionContainerComponent_ngb_accordion_3_ng_template_5_i_10_Template,3,6,"i",11),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](11,"\n          "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](12,SubmissionSectionContainerComponent_ngb_accordion_3_ng_template_5_i_12_Template,3,6,"i",12),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](13,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](14,"\n          "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](15,"a",13),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](16,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](17,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](18,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](19,"\n            "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](20,SubmissionSectionContainerComponent_ngb_accordion_3_ng_template_5_span_20_Template,1,0,"span",14),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](21,"\n            "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](22,SubmissionSectionContainerComponent_ngb_accordion_3_ng_template_5_span_22_Template,1,0,"span",15),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](23,"\n          "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](24,"\n          "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](25,SubmissionSectionContainerComponent_ngb_accordion_3_ng_template_5_a_25_Template,4,0,"a",16),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](26,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](27,"\n      ")),2&rf){const ctx_r3=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"](2),_r0=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275reference"](1);_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](3,9,"submission.sections."+ctx_r3.sectionData.header)),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](5),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",!_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](8,11,_r0.isValid())&&!_r0.hasErrors()),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",_r0.hasErrors()),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](13,13,_r0.isValid())&&!_r0.hasErrors()),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("title",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](18,20,_r0.isOpen()?"submission.sections.toggle.close":"submission.sections.toggle.open")),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275attribute"]("aria-label",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind2"](16,15,_r0.isOpen()?"submission.sections.toggle.aria.close":"submission.sections.toggle.aria.open",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pureFunction1"](22,_c1,_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](17,18,"submission.sections."+ctx_r3.sectionData.header)))),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](5),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",_r0.isOpen()),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",!_r0.isOpen()),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",!_r0.isMandatory())}}function SubmissionSectionContainerComponent_ngb_accordion_3_ng_template_7_div_1_ds_alert_2_Template(rf,ctx){if(1&rf){const _r19=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275getCurrentView"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"ds-alert",28),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("close",(function SubmissionSectionContainerComponent_ngb_accordion_3_ng_template_7_div_1_ds_alert_2_Template_ds_alert_close_0_listener(){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r19);const i_r17=ctx.index;_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"](4);return _angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275reference"](1).removeError(i_r17)})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()}if(2&rf){const error_r16=ctx.$implicit,ctx_r15=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"](4);_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("content",error_r16)("dismissible",!0)("type",ctx_r15.AlertTypeEnum.Error)}}function SubmissionSectionContainerComponent_ngb_accordion_3_ng_template_7_div_1_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div",5),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n          "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](2,SubmissionSectionContainerComponent_ngb_accordion_3_ng_template_7_div_1_ds_alert_2_Template,1,3,"ds-alert",27),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()),2&rf){const ctx_r13=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"](3),_r0=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275reference"](1);_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275propertyInterpolate1"]("id","sectionGenericError_",ctx_r13.sectionData.id,""),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngForOf",_r0.getErrors())}}function SubmissionSectionContainerComponent_ngb_accordion_3_ng_template_7_ng_container_5_Template(rf,ctx){1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementContainer"](0)}function SubmissionSectionContainerComponent_ngb_accordion_3_ng_template_7_Template(rf,ctx){if(1&rf){const _r21=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275getCurrentView"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](0,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](1,SubmissionSectionContainerComponent_ngb_accordion_3_ng_template_7_div_1_Template,4,2,"div",24),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](2,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](3,"div",25),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("click",(function SubmissionSectionContainerComponent_ngb_accordion_3_ng_template_7_Template_div_click_3_listener($event){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r21),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"](2);return _angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275reference"](1).setFocus($event)})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](4,"\n          "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](5,SubmissionSectionContainerComponent_ngb_accordion_3_ng_template_7_ng_container_5_Template,1,0,"ng-container",26),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](6,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](7,"\n      ")}if(2&rf){const ctx_r4=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"](2),_r0=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275reference"](1);_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",_r0.hasGenericErrors()),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275propertyInterpolate1"]("id","sectionContent_",ctx_r4.sectionData.id,""),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngComponentOutlet",ctx_r4.getSectionContent())("ngComponentOutletInjector",ctx_r4.objectInjector)}}function SubmissionSectionContainerComponent_ngb_accordion_3_Template(rf,ctx){if(1&rf){const _r23=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275getCurrentView"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"ngb-accordion",3,4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("panelChange",(function SubmissionSectionContainerComponent_ngb_accordion_3_Template_ngb_accordion_panelChange_0_listener($event){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r23),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]();return _angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275reference"](1).sectionChange($event)})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](2,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](3,"ngb-panel",5),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](4,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](5,SubmissionSectionContainerComponent_ngb_accordion_3_ng_template_5_Template,28,24,"ng-template",6),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](6,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](7,SubmissionSectionContainerComponent_ngb_accordion_3_ng_template_7_Template,8,4,"ng-template",7),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](8,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](9,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()}if(2&rf){const ctx_r1=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275propertyInterpolate"]("activeIds",ctx_r1.sectionData.id),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("destroyOnHide",!1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275propertyInterpolate"]("id",ctx_r1.sectionData.id)}}const _c2=function(a0){return{"section-focus":a0}};class SubmissionSectionContainerComponent{constructor(injector){this.injector=injector,this.AlertTypeEnum=_shared_alert_aletr_type__WEBPACK_IMPORTED_MODULE_3__.a}ngOnInit(){this.objectInjector=_angular_core__WEBPACK_IMPORTED_MODULE_0__.Injector.create({providers:[{provide:"collectionIdProvider",useFactory:()=>this.collectionId,deps:[]},{provide:"sectionDataProvider",useFactory:()=>this.sectionData,deps:[]},{provide:"submissionIdProvider",useFactory:()=>this.submissionId,deps:[]}],parent:this.injector})}removeSection(event){event.preventDefault(),event.stopPropagation(),this.sectionRef.removeSection(this.submissionId,this.sectionData.id)}getSectionContent(){return Object(_sections_decorator__WEBPACK_IMPORTED_MODULE_2__.b)(this.sectionData.sectionType)}}SubmissionSectionContainerComponent.\u0275fac=function SubmissionSectionContainerComponent_Factory(t){return new(t||SubmissionSectionContainerComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__.Injector))},SubmissionSectionContainerComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineComponent"]({type:SubmissionSectionContainerComponent,selectors:[["ds-submission-section-container"]],viewQuery:function SubmissionSectionContainerComponent_Query(rf,ctx){if(1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275viewQuery"](_c0,1),2&rf){let _t;_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275queryRefresh"](_t=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275loadQuery"]())&&(ctx.sectionRef=_t.first)}},inputs:{collectionId:"collectionId",sectionData:"sectionData",submissionId:"submissionId"},decls:7,vars:11,consts:[["dsSection","",3,"ngClass","mandatory","submissionId","sectionType","sectionId"],["sectionRef","sectionRef"],[3,"activeIds","destroyOnHide","panelChange",4,"ngIf"],[3,"activeIds","destroyOnHide","panelChange"],["acc","ngbAccordion"],[3,"id"],["ngbPanelTitle",""],["ngbPanelContent",""],["tabindex","0",1,"float-left","section-title"],[1,"d-inline-block","float-right"],["class","fas fa-exclamation-circle text-warning mr-3","role","img",3,"title",4,"ngIf"],["class","fas fa-exclamation-circle text-danger mr-3","role","img",3,"title",4,"ngIf"],["class","fas fa-check-circle text-success mr-3","role","img",3,"title",4,"ngIf"],["tabindex","0","role","button",1,"close",3,"title"],["class","fas fa-chevron-up fa-fw",4,"ngIf"],["class","fas fa-chevron-down fa-fw",4,"ngIf"],["href","javascript:void(0);","class","close mr-3",3,"click",4,"ngIf"],["role","img",1,"fas","fa-exclamation-circle","text-warning","mr-3",3,"title"],["role","img",1,"fas","fa-exclamation-circle","text-danger","mr-3",3,"title"],["role","img",1,"fas","fa-check-circle","text-success","mr-3",3,"title"],[1,"fas","fa-chevron-up","fa-fw"],[1,"fas","fa-chevron-down","fa-fw"],["href","javascript:void(0);",1,"close","mr-3",3,"click"],["aria-hidden","true","tabindex","0",1,"fas","fa-trash-o"],[3,"id",4,"ngIf"],[3,"id","click"],[4,"ngComponentOutlet","ngComponentOutletInjector"],[3,"content","dismissible","type","close",4,"ngFor","ngForOf"],[3,"content","dismissible","type","close"]],template:function SubmissionSectionContainerComponent_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div",0,1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](2,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](3,SubmissionSectionContainerComponent_ngb_accordion_3_Template,10,3,"ngb-accordion",2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](4,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](5,"\n"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](6,"\n")),2&rf){const _r0=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275reference"](1);_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngClass",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pureFunction1"](9,_c2,_r0.isSectionActive()))("mandatory",ctx.sectionData.mandatory)("submissionId",ctx.submissionId)("sectionType",ctx.sectionData.sectionType)("sectionId",ctx.sectionData.id),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275attribute"]("id","section_"+ctx.sectionData.id),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](4,7,_r0.isEnabled()))}},directives:[_sections_directive__WEBPACK_IMPORTED_MODULE_1__.a,_angular_common__WEBPACK_IMPORTED_MODULE_4__.NgClass,_angular_common__WEBPACK_IMPORTED_MODULE_4__.NgIf,_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_5__.a,_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_5__.D,_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_5__.F,_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_5__.E,_angular_common__WEBPACK_IMPORTED_MODULE_4__.NgComponentOutlet,_angular_common__WEBPACK_IMPORTED_MODULE_4__.NgForOf,_shared_alert_alert_component__WEBPACK_IMPORTED_MODULE_6__.a],pipes:[_angular_common__WEBPACK_IMPORTED_MODULE_4__.AsyncPipe,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_7__.d],styles:["[_nghost-%COMP%]     .card{margin-bottom:var(--ds-submission-sections-margin-bottom);overflow:unset}.section-focus[_ngcontent-%COMP%]{border-radius:var(--bs-border-radius);-webkit-box-shadow:var(--bs-btn-focus-box-shadow);box-shadow:var(--bs-btn-focus-box-shadow)}[_nghost-%COMP%]     .card:first-of-type{border-bottom:var(--bs-card-border-width) solid var(--bs-card-border-color)!important;border-bottom-left-radius:var(--bs-card-border-radius)!important;border-bottom-right-radius:var(--bs-card-border-radius)!important}[_nghost-%COMP%]     .card-header button{-webkit-box-shadow:none!important;box-shadow:none!important;width:100%}"]})},YoQ9:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ThemedSubmissionEditComponent}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),_shared_theme_support_themed_component__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("JTKQ");function ThemedSubmissionEditComponent_ng_template_0_Template(rf,ctx){}class ThemedSubmissionEditComponent extends _shared_theme_support_themed_component__WEBPACK_IMPORTED_MODULE_1__.a{getComponentName(){return"SubmissionEditComponent"}importThemedComponent(themeName){return __webpack_require__("3aq+")(`./${themeName}/app/submission/edit/submission-edit.component`)}importUnthemedComponent(){return Promise.resolve().then(__webpack_require__.bind(null,"SCNa"))}}ThemedSubmissionEditComponent.\u0275fac=function ThemedSubmissionEditComponent_Factory(t){return \u0275ThemedSubmissionEditComponent_BaseFactory(t||ThemedSubmissionEditComponent)},ThemedSubmissionEditComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineComponent"]({type:ThemedSubmissionEditComponent,selectors:[["ds-themed-submission-edit"]],features:[_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275InheritDefinitionFeature"]],decls:3,vars:0,consts:[["vcr",""]],template:function ThemedSubmissionEditComponent_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](0,ThemedSubmissionEditComponent_ng_template_0_Template,0,0,"ng-template",null,0,_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275templateRefExtractor"]),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](2,"\n"))},encapsulation:2});const \u0275ThemedSubmissionEditComponent_BaseFactory=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275getInheritedFactory"](ThemedSubmissionEditComponent)},b8BE:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return SectionsDirective}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),rxjs_operators__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("lJxs"),lodash__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("LvDl"),_sections_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("YJD6"),_shared_empty_util__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("J3qs"),_utils_parseSectionErrorPaths__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("TTdl"),_submission_service__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("J/vq");__webpack_require__("4GeW");class SectionsDirective{constructor(changeDetectorRef,submissionService,sectionService){this.changeDetectorRef=changeDetectorRef,this.submissionService=submissionService,this.sectionService=sectionService,this.mandatory=!0,this.genericSectionErrors=[],this.allSectionErrors=[],this.active=!0,this.sectionState=this.mandatory,this.subs=[]}ngOnInit(){this.valid=this.sectionService.isSectionValid(this.submissionId,this.sectionId).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_1__.a)((valid=>(valid&&this.resetErrors(),valid)))),this.subs.push(this.sectionService.getShownSectionErrors(this.submissionId,this.sectionId,this.sectionType).subscribe((errors=>{Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_4__.e)(errors)?errors.forEach((errorItem=>{Object(_utils_parseSectionErrorPaths__WEBPACK_IMPORTED_MODULE_5__.a)(errorItem.path).forEach((error=>{error.fieldId?this.allSectionErrors.push(errorItem.message):this.genericSectionErrors=Object(lodash__WEBPACK_IMPORTED_MODULE_2__.uniq)(this.genericSectionErrors.concat(errorItem.message))}))})):this.resetErrors()})),this.submissionService.getActiveSectionId(this.submissionId).subscribe((activeSectionId=>{const previousActive=this.active;this.active=activeSectionId===this.sectionId,previousActive!==this.active&&(this.changeDetectorRef.detectChanges(),!this.active&&Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_4__.g)(activeSectionId)&&this.submissionService.dispatchSave(this.submissionId))}))),this.enabled=this.sectionService.isSectionEnabled(this.submissionId,this.sectionId)}ngOnDestroy(){this.subs.filter((subscription=>Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_4__.b)(subscription))).forEach((subscription=>subscription.unsubscribe()))}sectionChange(event){this.sectionState=event.nextState}isOpen(){return this.sectionState}isMandatory(){return this.mandatory}isSectionActive(){return this.active}isEnabled(){return this.enabled}isValid(){return this.valid}removeSection(submissionId,sectionId){this.sectionService.removeSection(submissionId,sectionId)}hasGenericErrors(){return this.genericSectionErrors&&this.genericSectionErrors.length>0}hasErrors(){return this.genericSectionErrors&&this.genericSectionErrors.length>0||this.allSectionErrors&&this.allSectionErrors.length>0}getErrors(){return this.genericSectionErrors}setFocus(event){this.active||this.submissionService.setActiveSection(this.submissionId,this.sectionId)}removeError(index){this.genericSectionErrors.splice(index)}resetErrors(){Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_4__.e)(this.genericSectionErrors)&&this.sectionService.dispatchRemoveSectionErrors(this.submissionId,this.sectionId),this.genericSectionErrors=[],this.allSectionErrors=[]}}SectionsDirective.\u0275fac=function SectionsDirective_Factory(t){return new(t||SectionsDirective)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__.ChangeDetectorRef),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_submission_service__WEBPACK_IMPORTED_MODULE_6__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_sections_service__WEBPACK_IMPORTED_MODULE_3__.a))},SectionsDirective.\u0275dir=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineDirective"]({type:SectionsDirective,selectors:[["","dsSection",""]],inputs:{mandatory:"mandatory",sectionId:"sectionId",sectionType:"sectionType",submissionId:"submissionId"},exportAs:["sectionRef"]})},bLws:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"ItemPageComponent",(function(){return ItemPageComponent}));var rxjs_operators__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("lJxs"),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("fXoL"),_core_data_item_data_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("iqTE"),_shared_animations_fade__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("mEo1"),_core_shared_operators__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("1QIV"),_core_shared_view_mode_model__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("3jCq"),_core_auth_auth_service__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("Vurf"),_item_page_routing_paths__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("Xioo"),_angular_router__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("tyNb"),_shared_utils_var_directive__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("O/5o"),_angular_common__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("ofXK"),_shared_item_item_alerts_item_alerts_component__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("UX6V"),_shared_item_item_versions_notice_item_versions_notice_component__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("6xaB"),_statistics_angulartics_dspace_view_tracker_component__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("mXNY"),_shared_object_collection_shared_listable_object_listable_object_component_loader_component__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("1aCu"),_shared_item_item_versions_item_versions_component__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("Y9an"),_shared_error_error_component__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("HZwm"),_shared_loading_loading_component__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("Frqi"),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("sYmb");function ItemPageComponent_div_0_div_2_div_2_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_1__["\u0275\u0275elementStart"](0,"div"),_angular_core__WEBPACK_IMPORTED_MODULE_1__["\u0275\u0275text"](1,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_1__["\u0275\u0275element"](2,"ds-item-alerts",6),_angular_core__WEBPACK_IMPORTED_MODULE_1__["\u0275\u0275text"](3,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_1__["\u0275\u0275element"](4,"ds-item-versions-notice",6),_angular_core__WEBPACK_IMPORTED_MODULE_1__["\u0275\u0275text"](5,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_1__["\u0275\u0275element"](6,"ds-view-tracker",7),_angular_core__WEBPACK_IMPORTED_MODULE_1__["\u0275\u0275text"](7,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_1__["\u0275\u0275element"](8,"ds-listable-object-component-loader",8),_angular_core__WEBPACK_IMPORTED_MODULE_1__["\u0275\u0275text"](9,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_1__["\u0275\u0275element"](10,"ds-item-versions",9),_angular_core__WEBPACK_IMPORTED_MODULE_1__["\u0275\u0275text"](11,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_1__["\u0275\u0275elementEnd"]()),2&rf){const item_r6=ctx.ngIf,ctx_r5=_angular_core__WEBPACK_IMPORTED_MODULE_1__["\u0275\u0275nextContext"](3);_angular_core__WEBPACK_IMPORTED_MODULE_1__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_1__["\u0275\u0275property"]("item",item_r6),_angular_core__WEBPACK_IMPORTED_MODULE_1__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_1__["\u0275\u0275property"]("item",item_r6),_angular_core__WEBPACK_IMPORTED_MODULE_1__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_1__["\u0275\u0275property"]("object",item_r6),_angular_core__WEBPACK_IMPORTED_MODULE_1__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_1__["\u0275\u0275property"]("object",item_r6)("viewMode",ctx_r5.viewMode),_angular_core__WEBPACK_IMPORTED_MODULE_1__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_1__["\u0275\u0275property"]("item",item_r6)("displayActions",!1)}}function ItemPageComponent_div_0_div_2_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_1__["\u0275\u0275elementStart"](0,"div",4),_angular_core__WEBPACK_IMPORTED_MODULE_1__["\u0275\u0275text"](1,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_1__["\u0275\u0275template"](2,ItemPageComponent_div_0_div_2_div_2_Template,12,7,"div",5),_angular_core__WEBPACK_IMPORTED_MODULE_1__["\u0275\u0275text"](3,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_1__["\u0275\u0275elementEnd"]()),2&rf){const itemRD_r1=_angular_core__WEBPACK_IMPORTED_MODULE_1__["\u0275\u0275nextContext"]().ngVar;_angular_core__WEBPACK_IMPORTED_MODULE_1__["\u0275\u0275property"]("@fadeInOut",void 0),_angular_core__WEBPACK_IMPORTED_MODULE_1__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_1__["\u0275\u0275property"]("ngIf",null==itemRD_r1?null:itemRD_r1.payload)}}function ItemPageComponent_div_0_ds_error_4_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_1__["\u0275\u0275element"](0,"ds-error",10),_angular_core__WEBPACK_IMPORTED_MODULE_1__["\u0275\u0275pipe"](1,"translate")),2&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_1__["\u0275\u0275propertyInterpolate"]("message",_angular_core__WEBPACK_IMPORTED_MODULE_1__["\u0275\u0275pipeBind1"](1,1,"error.item"))}function ItemPageComponent_div_0_ds_loading_6_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_1__["\u0275\u0275element"](0,"ds-loading",10),_angular_core__WEBPACK_IMPORTED_MODULE_1__["\u0275\u0275pipe"](1,"translate")),2&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_1__["\u0275\u0275propertyInterpolate"]("message",_angular_core__WEBPACK_IMPORTED_MODULE_1__["\u0275\u0275pipeBind1"](1,1,"loading.item"))}function ItemPageComponent_div_0_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_1__["\u0275\u0275elementStart"](0,"div",1),_angular_core__WEBPACK_IMPORTED_MODULE_1__["\u0275\u0275text"](1,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_1__["\u0275\u0275template"](2,ItemPageComponent_div_0_div_2_Template,4,2,"div",2),_angular_core__WEBPACK_IMPORTED_MODULE_1__["\u0275\u0275text"](3,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_1__["\u0275\u0275template"](4,ItemPageComponent_div_0_ds_error_4_Template,2,3,"ds-error",3),_angular_core__WEBPACK_IMPORTED_MODULE_1__["\u0275\u0275text"](5,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_1__["\u0275\u0275template"](6,ItemPageComponent_div_0_ds_loading_6_Template,2,3,"ds-loading",3),_angular_core__WEBPACK_IMPORTED_MODULE_1__["\u0275\u0275text"](7,"\n"),_angular_core__WEBPACK_IMPORTED_MODULE_1__["\u0275\u0275elementEnd"]()),2&rf){const itemRD_r1=ctx.ngVar;_angular_core__WEBPACK_IMPORTED_MODULE_1__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_1__["\u0275\u0275property"]("ngIf",null==itemRD_r1?null:itemRD_r1.hasSucceeded),_angular_core__WEBPACK_IMPORTED_MODULE_1__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_1__["\u0275\u0275property"]("ngIf",null==itemRD_r1?null:itemRD_r1.hasFailed),_angular_core__WEBPACK_IMPORTED_MODULE_1__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_1__["\u0275\u0275property"]("ngIf",null==itemRD_r1?null:itemRD_r1.isLoading)}}class ItemPageComponent{constructor(route,router,items,authService){this.route=route,this.router=router,this.items=items,this.authService=authService,this.viewMode=_core_shared_view_mode_model__WEBPACK_IMPORTED_MODULE_5__.a.StandalonePage}ngOnInit(){this.itemRD$=this.route.data.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_0__.a)((data=>data.dso)),Object(_core_shared_operators__WEBPACK_IMPORTED_MODULE_4__.t)(this.router,this.authService)),this.itemPageRoute$=this.itemRD$.pipe(Object(_core_shared_operators__WEBPACK_IMPORTED_MODULE_4__.d)(),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_0__.a)((item=>Object(_item_page_routing_paths__WEBPACK_IMPORTED_MODULE_7__.h)(item))))}}ItemPageComponent.\u0275fac=function ItemPageComponent_Factory(t){return new(t||ItemPageComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_1__["\u0275\u0275directiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_8__.a),_angular_core__WEBPACK_IMPORTED_MODULE_1__["\u0275\u0275directiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_8__.g),_angular_core__WEBPACK_IMPORTED_MODULE_1__["\u0275\u0275directiveInject"](_core_data_item_data_service__WEBPACK_IMPORTED_MODULE_2__.a),_angular_core__WEBPACK_IMPORTED_MODULE_1__["\u0275\u0275directiveInject"](_core_auth_auth_service__WEBPACK_IMPORTED_MODULE_6__.a))},ItemPageComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_1__["\u0275\u0275defineComponent"]({type:ItemPageComponent,selectors:[["ds-item-page"]],decls:3,vars:3,consts:[["class","container",4,"ngVar"],[1,"container"],["class","item-page",4,"ngIf"],[3,"message",4,"ngIf"],[1,"item-page"],[4,"ngIf"],[3,"item"],[3,"object"],[3,"object","viewMode"],[1,"mt-2",3,"item","displayActions"],[3,"message"]],template:function ItemPageComponent_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_1__["\u0275\u0275template"](0,ItemPageComponent_div_0_Template,8,3,"div",0),_angular_core__WEBPACK_IMPORTED_MODULE_1__["\u0275\u0275pipe"](1,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_1__["\u0275\u0275text"](2,"\n")),2&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_1__["\u0275\u0275property"]("ngVar",_angular_core__WEBPACK_IMPORTED_MODULE_1__["\u0275\u0275pipeBind1"](1,1,ctx.itemRD$))},directives:[_shared_utils_var_directive__WEBPACK_IMPORTED_MODULE_9__.a,_angular_common__WEBPACK_IMPORTED_MODULE_10__.NgIf,_shared_item_item_alerts_item_alerts_component__WEBPACK_IMPORTED_MODULE_11__.a,_shared_item_item_versions_notice_item_versions_notice_component__WEBPACK_IMPORTED_MODULE_12__.a,_statistics_angulartics_dspace_view_tracker_component__WEBPACK_IMPORTED_MODULE_13__.a,_shared_object_collection_shared_listable_object_listable_object_component_loader_component__WEBPACK_IMPORTED_MODULE_14__.a,_shared_item_item_versions_item_versions_component__WEBPACK_IMPORTED_MODULE_15__.a,_shared_error_error_component__WEBPACK_IMPORTED_MODULE_16__.a,_shared_loading_loading_component__WEBPACK_IMPORTED_MODULE_17__.a],pipes:[_angular_common__WEBPACK_IMPORTED_MODULE_10__.AsyncPipe,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_18__.d],styles:["@media (max-width:991.98px){.container[_ngcontent-%COMP%]{width:100%;max-width:none}}"],data:{animation:[_shared_animations_fade__WEBPACK_IMPORTED_MODULE_3__.c]},changeDetection:0})},c3nT:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return SubmissionModule}));var core=__webpack_require__("fXoL"),core_module=__webpack_require__("pKmL"),shared_module=__webpack_require__("PCNd"),tslib=__webpack_require__("zOht"),combineLatest=__webpack_require__("itXk"),map=__webpack_require__("lJxs"),tap=__webpack_require__("vkgz"),mergeMap=__webpack_require__("5+tZ"),take=__webpack_require__("IzEk"),find=__webpack_require__("cBqT"),distinctUntilChanged=__webpack_require__("/uUt"),filter=__webpack_require__("pLZG"),ngx_translate_core=__webpack_require__("sYmb"),lodash=__webpack_require__("LvDl"),form_builder_service=__webpack_require__("Q5/L"),form_component=__webpack_require__("hqmO"),form_service=__webpack_require__("NFsL"),startWith=__webpack_require__("JX91"),empty_util=__webpack_require__("J3qs");class section_model_SectionModelComponent{constructor(injectedCollectionId,injectedSectionData,injectedSubmissionId){this.injectedCollectionId=injectedCollectionId,this.injectedSectionData=injectedSectionData,this.injectedSubmissionId=injectedSubmissionId,this.collectionId=injectedCollectionId,this.sectionData=injectedSectionData,this.submissionId=injectedSubmissionId}ngOnInit(){this.onSectionInit(),this.updateSectionStatus()}updateSectionStatus(){this.sectionStatusSub=this.getSectionStatus().pipe(Object(filter.a)((sectionStatus=>Object(empty_util.h)(sectionStatus))),Object(startWith.a)(!0)).subscribe((sectionStatus=>{this.sectionService.setSectionStatus(this.submissionId,this.sectionData.id,sectionStatus)}))}ngOnDestroy(){Object(empty_util.b)(this.sectionStatusSub)&&this.sectionStatusSub.unsubscribe(),this.onSectionDestroy()}}section_model_SectionModelComponent.\u0275fac=function SectionModelComponent_Factory(t){return new(t||section_model_SectionModelComponent)(core["\u0275\u0275directiveInject"]("collectionIdProvider"),core["\u0275\u0275directiveInject"]("sectionDataProvider"),core["\u0275\u0275directiveInject"]("submissionIdProvider"))},section_model_SectionModelComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:section_model_SectionModelComponent,selectors:[["ds-section-model"]],decls:0,vars:0,template:function SectionModelComponent_Template(rf,ctx){},encapsulation:2});var submission_forms_config_service=__webpack_require__("+ZI/"),json_patch_operation_path_combiner=__webpack_require__("0VLH");class form_field_previous_value_object_FormFieldPreviousValueObject{constructor(path=null,value=null){this._path=path,this._value=value}get path(){return this._path}set path(path){this._path=path}get value(){return this._value}set value(value){this._value=value}delete(){this._value=null,this._path=null}isPathEqual(path){return this._path&&Object(lodash.isEqual)(this._path,path)}}var sections_decorator=__webpack_require__("Uql/"),sections_type=__webpack_require__("4GeW"),submission_service=__webpack_require__("J/vq"),section_form_operations_service=__webpack_require__("ITak"),notifications_service=__webpack_require__("lI3o"),sections_service=__webpack_require__("YJD6"),object_util=__webpack_require__("Gx58"),operators=__webpack_require__("1QIV"),submission_object_data_service=__webpack_require__("fHtB"),object_cache_service=__webpack_require__("mycY"),request_service=__webpack_require__("X/78"),follow_link_config_model=__webpack_require__("84Zn"),environment=__webpack_require__("AytR"),common=__webpack_require__("ofXK"),loading_component=__webpack_require__("Frqi");const _c0=["formRef"];function SubmissionSectionFormComponent_ds_loading_0_Template(rf,ctx){1&rf&&core["\u0275\u0275element"](0,"ds-loading",2)}function SubmissionSectionFormComponent_ds_form_2_Template(rf,ctx){if(1&rf){const _r4=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementStart"](0,"ds-form",3,4),core["\u0275\u0275listener"]("dfChange",(function SubmissionSectionFormComponent_ds_form_2_Template_ds_form_dfChange_0_listener($event){core["\u0275\u0275restoreView"](_r4);return core["\u0275\u0275nextContext"]().onChange($event)}))("dfFocus",(function SubmissionSectionFormComponent_ds_form_2_Template_ds_form_dfFocus_0_listener($event){core["\u0275\u0275restoreView"](_r4);return core["\u0275\u0275nextContext"]().onFocus($event)}))("remove",(function SubmissionSectionFormComponent_ds_form_2_Template_ds_form_remove_0_listener($event){core["\u0275\u0275restoreView"](_r4);return core["\u0275\u0275nextContext"]().onRemove($event)}))("ngbEvent",(function SubmissionSectionFormComponent_ds_form_2_Template_ds_form_ngbEvent_0_listener($event){core["\u0275\u0275restoreView"](_r4);return core["\u0275\u0275nextContext"]().onCustomEvent($event)}))("removeArrayItem",(function SubmissionSectionFormComponent_ds_form_2_Template_ds_form_removeArrayItem_0_listener($event){core["\u0275\u0275restoreView"](_r4);return core["\u0275\u0275nextContext"]().onRemove($event)})),core["\u0275\u0275elementEnd"]()}if(2&rf){const ctx_r1=core["\u0275\u0275nextContext"]();core["\u0275\u0275property"]("formId",ctx_r1.formId)("formModel",ctx_r1.formModel)("displaySubmit",!1)("displayCancel",!1)}}let section_form_component_SubmissionSectionFormComponent=class extends section_model_SectionModelComponent{constructor(cdr,formBuilderService,formOperationsService,formService,formConfigService,notificationsService,sectionService,submissionService,translate,submissionObjectService,objectCache,requestService,injectedCollectionId,injectedSectionData,injectedSubmissionId){super(injectedCollectionId,injectedSectionData,injectedSubmissionId),this.cdr=cdr,this.formBuilderService=formBuilderService,this.formOperationsService=formOperationsService,this.formService=formService,this.formConfigService=formConfigService,this.notificationsService=notificationsService,this.sectionService=sectionService,this.submissionService=submissionService,this.translate=translate,this.submissionObjectService=submissionObjectService,this.objectCache=objectCache,this.requestService=requestService,this.injectedCollectionId=injectedCollectionId,this.injectedSectionData=injectedSectionData,this.injectedSubmissionId=injectedSubmissionId,this.isUpdating=!1,this.isLoading=!0,this.fieldsOnTheirWayToBeRemoved=new Map,this.formData=Object.create({}),this.previousValue=new form_field_previous_value_object_FormFieldPreviousValueObject,this.subs=[]}onSectionInit(){this.pathCombiner=new json_patch_operation_path_combiner.a("sections",this.sectionData.id),this.formId=this.formService.getUniqueId(this.sectionData.id),this.sectionService.dispatchSetSectionFormId(this.submissionId,this.sectionData.id,this.formId),this.formConfigService.findByHref(this.sectionData.config).pipe(Object(map.a)((configData=>configData.payload)),Object(tap.a)((config=>this.formConfig=config)),Object(mergeMap.a)((()=>Object(combineLatest.a)([this.sectionService.getSectionData(this.submissionId,this.sectionData.id,this.sectionData.sectionType),this.submissionObjectService.findById(this.submissionId,!0,!1,Object(follow_link_config_model.a)("item")).pipe(Object(operators.i)(),Object(operators.o)())]))),Object(take.a)(1)).subscribe((([sectionData,workspaceItem])=>{Object(empty_util.j)(this.formModel)&&(this.workspaceItem=workspaceItem,this.initForm(sectionData),this.sectionData.data=sectionData,this.subscriptions(),this.isLoading=!1,this.cdr.detectChanges())}))}onSectionDestroy(){this.subs.filter((subscription=>Object(empty_util.b)(subscription))).forEach((subscription=>subscription.unsubscribe()))}getSectionStatus(){const formStatus$=this.formService.isValid(this.formId),serverValidationStatus$=this.sectionService.getSectionServerErrors(this.submissionId,this.sectionData.id).pipe(Object(map.a)((validationErrors=>Object(empty_util.d)(validationErrors))));return Object(combineLatest.a)([formStatus$,serverValidationStatus$]).pipe(Object(map.a)((([formValidation,serverSideValidation])=>formValidation&&serverSideValidation)))}hasMetadataEnrichment(sectionData){const sectionDataToCheck={};Object.keys(sectionData).forEach((key=>{this.sectionMetadata&&this.sectionMetadata.includes(key)&&(sectionDataToCheck[key]=sectionData[key])}));const diffResult=[],diffObj=Object(object_util.a)(sectionDataToCheck,this.formData);return Object.keys(diffObj).forEach((key=>{diffObj[key].forEach((value=>{value.hasOwnProperty("value")&&Object(lodash.findIndex)(this.formData[key],{value:value.value})<0&&diffResult.push(value)}))})),Object(empty_util.e)(diffResult)}initForm(sectionData){try{this.formModel=this.formBuilderService.modelFromConfiguration(this.submissionId,this.formConfig,this.collectionId,sectionData,this.submissionService.getSubmissionScope());const sectionMetadata=this.sectionService.computeSectionConfiguredMetadata(this.formConfig);this.sectionService.updateSectionData(this.submissionId,this.sectionData.id,sectionData,this.sectionData.errorsToShow,this.sectionData.serverValidationErrors,sectionMetadata)}catch(e){const sectionError={message:this.translate.instant("error.submission.sections.init-form-error")+e.toString(),path:"/sections/"+this.sectionData.id};console.error(e.stack),this.sectionService.setSectionError(this.submissionId,this.sectionData.id,sectionError)}}updateForm(sectionData,errors){Object(empty_util.e)(sectionData)&&!Object(lodash.isEqual)(sectionData,this.sectionData.data)?(this.sectionData.data=sectionData,this.hasMetadataEnrichment(sectionData)?(this.isUpdating=!0,this.formModel=null,this.cdr.detectChanges(),this.initForm(sectionData),this.checksForErrors(errors),this.isUpdating=!1,this.cdr.detectChanges()):(Object(empty_util.e)(errors)||Object(empty_util.e)(this.sectionData.errorsToShow))&&this.checksForErrors(errors)):(Object(empty_util.e)(errors)||Object(empty_util.e)(this.sectionData.errorsToShow))&&this.checksForErrors(errors)}checksForErrors(errors){this.formService.isFormInitialized(this.formId).pipe(Object(find.a)((status=>!0===status&&!this.isUpdating))).subscribe((()=>{this.sectionService.checkSectionErrors(this.submissionId,this.sectionData.id,this.formId,errors,this.sectionData.errorsToShow),this.sectionData.errorsToShow=errors,this.cdr.detectChanges()}))}subscriptions(){this.subs.push(this.formService.getFormData(this.formId).pipe(Object(distinctUntilChanged.a)()).subscribe((formData=>{this.formData=formData})),this.sectionService.getSectionState(this.submissionId,this.sectionData.id,this.sectionData.sectionType).pipe(Object(filter.a)((sectionState=>Object(empty_util.e)(sectionState)&&(Object(empty_util.e)(sectionState.data)||Object(empty_util.e)(sectionState.errorsToShow)))),Object(distinctUntilChanged.a)()).subscribe((sectionState=>{this.fieldsOnTheirWayToBeRemoved=new Map,this.sectionMetadata=sectionState.metadata,this.updateForm(sectionState.data,sectionState.errorsToShow)})))}onChange(event){this.formOperationsService.dispatchOperationsFromEvent(this.pathCombiner,event,this.previousValue,this.hasStoredValue(this.formBuilderService.getId(event.model),this.formOperationsService.getArrayIndexFromEvent(event)));const metadata=this.formOperationsService.getFieldPathSegmentedFromChangeEvent(event),value=this.formOperationsService.getFieldValueFromChangeEvent(event);(-1!==environment.a.submission.autosave.metadata.indexOf(metadata)&&Object(empty_util.e)(value)||this.hasRelatedCustomError(metadata))&&this.submissionService.dispatchSave(this.submissionId)}hasRelatedCustomError(medatata){const index=Object(lodash.findIndex)(this.sectionData.errorsToShow,{path:this.pathCombiner.getPath(medatata).path});if(-1!==index){const validator=this.sectionData.errorsToShow[index].message.replace("error.validation.","");return!environment.a.form.validatorMap.hasOwnProperty(validator)}return!1}onFocus(event){const value=this.formOperationsService.getFieldValueFromChangeEvent(event),path=this.formBuilderService.getPath(event.model);this.formBuilderService.hasMappedGroupValue(event.model)?(this.previousValue.path=path,this.previousValue.value=this.formOperationsService.getQualdropValueMap(event)):Object(empty_util.e)(value)&&("object"==typeof value&&Object(empty_util.e)(value.value)||"string"==typeof value)&&(this.previousValue.path=path,this.previousValue.value=value)}onRemove(event){const fieldId=this.formBuilderService.getId(event.model),fieldIndex=this.formOperationsService.getArrayIndexFromEvent(event);if(this.fieldsOnTheirWayToBeRemoved.has(fieldId)){const indexes=this.fieldsOnTheirWayToBeRemoved.get(fieldId);indexes.push(fieldIndex),this.fieldsOnTheirWayToBeRemoved.set(fieldId,indexes)}else this.fieldsOnTheirWayToBeRemoved.set(fieldId,[fieldIndex]);this.formOperationsService.dispatchOperationsFromEvent(this.pathCombiner,event,this.previousValue,this.hasStoredValue(fieldId,fieldIndex))}hasStoredValue(fieldId,index){return!!Object(empty_util.e)(this.sectionData.data)&&(this.sectionData.data.hasOwnProperty(fieldId)&&Object(empty_util.e)(this.sectionData.data[fieldId][index])&&!this.isFieldToRemove(fieldId,index))}isFieldToRemove(fieldId,index){return this.fieldsOnTheirWayToBeRemoved.has(fieldId)&&this.fieldsOnTheirWayToBeRemoved.get(fieldId).includes(index)}onCustomEvent(event){this.formOperationsService.dispatchOperationsFromEvent(this.pathCombiner,event,this.previousValue,null)}};section_form_component_SubmissionSectionFormComponent.\u0275fac=function SubmissionSectionFormComponent_Factory(t){return new(t||section_form_component_SubmissionSectionFormComponent)(core["\u0275\u0275directiveInject"](core.ChangeDetectorRef),core["\u0275\u0275directiveInject"](form_builder_service.a),core["\u0275\u0275directiveInject"](section_form_operations_service.a),core["\u0275\u0275directiveInject"](form_service.a),core["\u0275\u0275directiveInject"](submission_forms_config_service.a),core["\u0275\u0275directiveInject"](notifications_service.a),core["\u0275\u0275directiveInject"](sections_service.a),core["\u0275\u0275directiveInject"](submission_service.a),core["\u0275\u0275directiveInject"](ngx_translate_core.e),core["\u0275\u0275directiveInject"](submission_object_data_service.a),core["\u0275\u0275directiveInject"](object_cache_service.a),core["\u0275\u0275directiveInject"](request_service.a),core["\u0275\u0275directiveInject"]("collectionIdProvider"),core["\u0275\u0275directiveInject"]("sectionDataProvider"),core["\u0275\u0275directiveInject"]("submissionIdProvider"))},section_form_component_SubmissionSectionFormComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:section_form_component_SubmissionSectionFormComponent,selectors:[["ds-submission-section-form"]],viewQuery:function SubmissionSectionFormComponent_Query(rf,ctx){if(1&rf&&core["\u0275\u0275viewQuery"](_c0,1),2&rf){let _t;core["\u0275\u0275queryRefresh"](_t=core["\u0275\u0275loadQuery"]())&&(ctx.formRef=_t.first)}},features:[core["\u0275\u0275InheritDefinitionFeature"]],decls:4,vars:2,consts:[["message","Loading...",4,"ngIf"],[3,"formId","formModel","displaySubmit","displayCancel","dfChange","dfFocus","remove","ngbEvent","removeArrayItem",4,"ngIf"],["message","Loading..."],[3,"formId","formModel","displaySubmit","displayCancel","dfChange","dfFocus","remove","ngbEvent","removeArrayItem"],["formRef","formComponent"]],template:function SubmissionSectionFormComponent_Template(rf,ctx){1&rf&&(core["\u0275\u0275template"](0,SubmissionSectionFormComponent_ds_loading_0_Template,1,0,"ds-loading",0),core["\u0275\u0275text"](1,"\n"),core["\u0275\u0275template"](2,SubmissionSectionFormComponent_ds_form_2_Template,2,4,"ds-form",1),core["\u0275\u0275text"](3,"\n")),2&rf&&(core["\u0275\u0275property"]("ngIf",ctx.isLoading),core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",!ctx.isLoading&&ctx.formModel))},directives:[common.NgIf,loading_component.a,form_component.a],styles:[""]}),section_form_component_SubmissionSectionFormComponent=Object(tslib.__decorate)([Object(sections_decorator.a)(sections_type.a.SubmissionForm),Object(tslib.__metadata)("design:paramtypes",[core.ChangeDetectorRef,form_builder_service.a,section_form_operations_service.a,form_service.a,submission_forms_config_service.a,notifications_service.a,sections_service.a,submission_service.a,ngx_translate_core.e,submission_object_data_service.a,object_cache_service.a,request_service.a,String,Object,String])],section_form_component_SubmissionSectionFormComponent);var sections_directive=__webpack_require__("b8BE"),submission_form_collection_component=__webpack_require__("wQzj"),submission_form_footer_component=__webpack_require__("yAsG"),submission_form_component=__webpack_require__("m4Gq"),submission_form_section_add_component=__webpack_require__("ph1m"),section_container_component=__webpack_require__("Yfyx"),ngrx_store=__webpack_require__("l7P3"),ngrx_effects=__webpack_require__("9jGm"),submission_reducers=__webpack_require__("33F9"),from=__webpack_require__("Cfvw"),of=__webpack_require__("LRne"),switchMap=__webpack_require__("eIep"),catchError=__webpack_require__("JIr8"),withLatestFrom=__webpack_require__("zp1y"),submission_json_patch_operations_service=__webpack_require__("QjZv"),parseSectionErrors=__webpack_require__("fBXw"),submission_objects_actions=__webpack_require__("4jMI"),parseSectionErrorPaths=__webpack_require__("TTdl");class submission_objects_effects_SubmissionObjectEffects{constructor(actions$,notificationsService,operationsService,sectionService,store$,submissionService,submissionObjectService,translate){this.actions$=actions$,this.notificationsService=notificationsService,this.operationsService=operationsService,this.sectionService=sectionService,this.store$=store$,this.submissionService=submissionService,this.submissionObjectService=submissionObjectService,this.translate=translate,this.loadForm$=this.actions$.pipe(Object(ngrx_effects.f)(submission_objects_actions.F.INIT_SUBMISSION_FORM),Object(map.a)((action=>{const definition=action.payload.submissionDefinition,mappedActions=[];return definition.sections.page.forEach((sectionDefinition=>{const selfLink=sectionDefinition._links.self.href||sectionDefinition._links.self,sectionId=selfLink.substr(selfLink.lastIndexOf("/")+1),config=sectionDefinition._links.config?sectionDefinition._links.config.href||sectionDefinition._links.config:"",enabled=sectionDefinition.mandatory||Object(empty_util.e)(action.payload.sections)&&action.payload.sections.hasOwnProperty(sectionId);let sectionData;sectionData=sectionDefinition.sectionType!==sections_type.a.SubmissionForm?Object(empty_util.h)(action.payload.sections)&&Object(empty_util.h)(action.payload.sections[sectionId])?action.payload.sections[sectionId]:Object.create(null):action.payload.item.metadata;const sectionErrors=Object(empty_util.e)(action.payload.errors)&&action.payload.errors[sectionId]||null;mappedActions.push(new submission_objects_actions.o(action.payload.submissionId,sectionId,sectionDefinition.header,config,sectionDefinition.mandatory,sectionDefinition.sectionType,sectionDefinition.visibility,enabled,sectionData,sectionErrors))})),{action:action,definition:definition,mappedActions:mappedActions}})),Object(mergeMap.a)((result=>Object(from.a)(result.mappedActions.concat(new submission_objects_actions.c(result.action.payload.submissionId)))))),this.resetForm$=this.actions$.pipe(Object(ngrx_effects.f)(submission_objects_actions.F.RESET_SUBMISSION_FORM),Object(map.a)((action=>new submission_objects_actions.p(action.payload.collectionId,action.payload.submissionId,action.payload.selfUrl,action.payload.submissionDefinition,action.payload.sections,action.payload.item,null)))),this.saveSubmission$=this.actions$.pipe(Object(ngrx_effects.f)(submission_objects_actions.F.SAVE_SUBMISSION_FORM),Object(switchMap.a)((action=>this.operationsService.jsonPatchByResourceType(this.submissionService.getSubmissionObjectLinkName(),action.payload.submissionId,"sections").pipe(Object(map.a)((response=>new submission_objects_actions.y(action.payload.submissionId,response,action.payload.isManual))),Object(catchError.a)((()=>Object(of.a)(new submission_objects_actions.x(action.payload.submissionId)))))))),this.saveForLaterSubmission$=this.actions$.pipe(Object(ngrx_effects.f)(submission_objects_actions.F.SAVE_FOR_LATER_SUBMISSION_FORM),Object(switchMap.a)((action=>this.operationsService.jsonPatchByResourceType(this.submissionService.getSubmissionObjectLinkName(),action.payload.submissionId,"sections").pipe(Object(map.a)((response=>new submission_objects_actions.v(action.payload.submissionId,response))),Object(catchError.a)((()=>Object(of.a)(new submission_objects_actions.x(action.payload.submissionId)))))))),this.saveSubmissionSuccess$=this.actions$.pipe(Object(ngrx_effects.f)(submission_objects_actions.F.SAVE_SUBMISSION_FORM_SUCCESS),Object(withLatestFrom.a)(this.store$),Object(map.a)((([action,currentState])=>this.parseSaveResponse(currentState.submission.objects[action.payload.submissionId],action.payload.submissionObject,action.payload.submissionId,currentState.forms,action.payload.notify))),Object(mergeMap.a)((actions=>Object(from.a)(actions)))),this.saveSubmissionSectionSuccess$=this.actions$.pipe(Object(ngrx_effects.f)(submission_objects_actions.F.SAVE_SUBMISSION_SECTION_FORM_SUCCESS),Object(withLatestFrom.a)(this.store$),Object(map.a)((([action,currentState])=>this.parseSaveResponse(currentState.submission.objects[action.payload.submissionId],action.payload.submissionObject,action.payload.submissionId,currentState.forms,!1))),Object(mergeMap.a)((actions=>Object(from.a)(actions)))),this.saveSection$=this.actions$.pipe(Object(ngrx_effects.f)(submission_objects_actions.F.SAVE_SUBMISSION_SECTION_FORM),Object(switchMap.a)((action=>this.operationsService.jsonPatchByResourceID(this.submissionService.getSubmissionObjectLinkName(),action.payload.submissionId,"sections",action.payload.sectionId).pipe(Object(map.a)((response=>new submission_objects_actions.B(action.payload.submissionId,response))),Object(catchError.a)((()=>Object(of.a)(new submission_objects_actions.A(action.payload.submissionId)))))))),this.saveError$=this.actions$.pipe(Object(ngrx_effects.f)(submission_objects_actions.F.SAVE_SUBMISSION_FORM_ERROR,submission_objects_actions.F.SAVE_SUBMISSION_SECTION_FORM_ERROR),Object(withLatestFrom.a)(this.store$),Object(tap.a)((()=>this.notificationsService.error(null,this.translate.get("submission.sections.general.save_error_notice"))))),this.saveAndDeposit$=this.actions$.pipe(Object(ngrx_effects.f)(submission_objects_actions.F.SAVE_AND_DEPOSIT_SUBMISSION),Object(withLatestFrom.a)(this.submissionService.hasUnsavedModification()),Object(switchMap.a)((([action,hasUnsavedModification])=>{let response$;return response$=hasUnsavedModification?this.operationsService.jsonPatchByResourceType(this.submissionService.getSubmissionObjectLinkName(),action.payload.submissionId,"sections"):this.submissionObjectService.findById(action.payload.submissionId,!1,!0).pipe(Object(operators.j)(),Object(map.a)((submissionObject=>[submissionObject]))),response$.pipe(Object(map.a)((response=>this.canDeposit(response)?new submission_objects_actions.e(action.payload.submissionId):new submission_objects_actions.y(action.payload.submissionId,response))),Object(catchError.a)((()=>Object(of.a)(new submission_objects_actions.x(action.payload.submissionId)))))}))),this.depositSubmission$=this.actions$.pipe(Object(ngrx_effects.f)(submission_objects_actions.F.DEPOSIT_SUBMISSION),Object(withLatestFrom.a)(this.store$),Object(switchMap.a)((([action,state])=>this.submissionService.depositSubmission(state.submission.objects[action.payload.submissionId].selfUrl).pipe(Object(map.a)((()=>new submission_objects_actions.g(action.payload.submissionId))),Object(catchError.a)((error=>Object(of.a)(new submission_objects_actions.f(action.payload.submissionId)))))))),this.saveForLaterSubmissionSuccess$=this.actions$.pipe(Object(ngrx_effects.f)(submission_objects_actions.F.SAVE_FOR_LATER_SUBMISSION_FORM_SUCCESS),Object(tap.a)((()=>this.notificationsService.success(null,this.translate.get("submission.sections.general.save_success_notice")))),Object(tap.a)((()=>this.submissionService.redirectToMyDSpace()))),this.depositSubmissionSuccess$=this.actions$.pipe(Object(ngrx_effects.f)(submission_objects_actions.F.DEPOSIT_SUBMISSION_SUCCESS),Object(tap.a)((()=>this.notificationsService.success(null,this.translate.get("submission.sections.general.deposit_success_notice")))),Object(tap.a)((()=>this.submissionService.redirectToMyDSpace()))),this.depositSubmissionError$=this.actions$.pipe(Object(ngrx_effects.f)(submission_objects_actions.F.DEPOSIT_SUBMISSION_ERROR),Object(tap.a)((()=>this.notificationsService.error(null,this.translate.get("submission.sections.general.deposit_error_notice"))))),this.discardSubmission$=this.actions$.pipe(Object(ngrx_effects.f)(submission_objects_actions.F.DISCARD_SUBMISSION),Object(switchMap.a)((action=>this.submissionService.discardSubmission(action.payload.submissionId).pipe(Object(map.a)((()=>new submission_objects_actions.k(action.payload.submissionId))),Object(catchError.a)((()=>Object(of.a)(new submission_objects_actions.j(action.payload.submissionId)))))))),this.addAllMetadataToSectionData=this.actions$.pipe(Object(ngrx_effects.f)(submission_objects_actions.F.UPDATE_SECTION_DATA),Object(switchMap.a)((action=>this.sectionService.getSectionState(action.payload.submissionId,action.payload.sectionId,sections_type.a.Upload).pipe(Object(map.a)((section=>[action,section])),Object(take.a)(1)))),Object(filter.a)((([action,section])=>section.sectionType===sections_type.a.SubmissionForm)),Object(switchMap.a)((([action,section])=>{if(section.sectionType===sections_type.a.SubmissionForm){return this.submissionObjectService.findById(action.payload.submissionId,!0,!1,Object(follow_link_config_model.a)("item")).pipe(Object(operators.j)()).pipe(Object(switchMap.a)((submissionObject=>submissionObject.item.pipe(Object(operators.j)())))).pipe(Object(map.a)((item=>item.metadata)),Object(filter.a)((metadata=>!Object(lodash.isEqual)(action.payload.data,metadata))),Object(map.a)((metadata=>new submission_objects_actions.G(action.payload.submissionId,action.payload.sectionId,metadata,action.payload.errorsToShow,action.payload.serverValidationErrors,action.payload.metadata))))}return Object(of.a)(new submission_objects_actions.H)}))),this.discardSubmissionSuccess$=this.actions$.pipe(Object(ngrx_effects.f)(submission_objects_actions.F.DISCARD_SUBMISSION_SUCCESS),Object(tap.a)((()=>this.notificationsService.success(null,this.translate.get("submission.sections.general.discard_success_notice")))),Object(tap.a)((()=>this.submissionService.redirectToMyDSpace()))),this.discardSubmissionError$=this.actions$.pipe(Object(ngrx_effects.f)(submission_objects_actions.F.DISCARD_SUBMISSION_ERROR),Object(tap.a)((()=>this.notificationsService.error(null,this.translate.get("submission.sections.general.discard_error_notice")))))}canDeposit(response){let canDeposit=!0;return Object(empty_util.e)(response)&&response.forEach((item=>{const{errors:errors}=item;errors&&!Object(empty_util.d)(errors)&&(canDeposit=!1)})),canDeposit}parseSaveResponse(currentState,response,submissionId,forms,notify=!0){const mappedActions=[];return Object(empty_util.e)(response)&&(notify&&this.notificationsService.success(null,this.translate.get("submission.sections.general.save_success_notice")),response.forEach((item=>{let errorsList=Object.create({});const{errors:errors}=item;errors&&!Object(empty_util.d)(errors)&&(errorsList=Object(parseSectionErrors.a)(errors),notify&&this.notificationsService.warning(null,this.translate.get("submission.sections.general.sections_not_valid")));const sections=item.sections&&Object(empty_util.e)(item.sections)?item.sections:{},sectionsKeys=Object(lodash.union)(Object.keys(sections),Object.keys(errorsList));for(const sectionId of sectionsKeys){const sectionErrors=errorsList[sectionId]||[],sectionData=sections[sectionId]||{};if(currentState.sections[sectionId].sectionType===sections_type.a.Upload&&Object(empty_util.d)(sectionData.files)&&!currentState.sections[sectionId].enabled)continue;notify&&!currentState.sections[sectionId].enabled&&this.submissionService.notifyNewSection(submissionId,sectionId,currentState.sections[sectionId].sectionType);const filteredErrors=filterErrors(getForm(forms,currentState,sectionId),sectionErrors,currentState.sections[sectionId].sectionType,notify);mappedActions.push(new submission_objects_actions.G(submissionId,sectionId,sectionData,filteredErrors,sectionErrors))}}))),mappedActions}}function getForm(forms,currentState,sectionId){if(!forms)return null;return forms[currentState.sections[sectionId].formId]}function filterErrors(sectionForm,sectionErrors,sectionType,notify){if(notify||sectionType!==sections_type.a.SubmissionForm)return sectionErrors;if(!sectionForm||!sectionForm.touched)return[];const filteredErrors=[];return sectionErrors.forEach((error=>{Object(parseSectionErrorPaths.a)(error.path).forEach((path=>{path.fieldId&&sectionForm.touched[path.fieldId]&&filteredErrors.push(error)}))})),filteredErrors}submission_objects_effects_SubmissionObjectEffects.\u0275fac=function SubmissionObjectEffects_Factory(t){return new(t||submission_objects_effects_SubmissionObjectEffects)(core["\u0275\u0275inject"](ngrx_effects.a),core["\u0275\u0275inject"](notifications_service.a),core["\u0275\u0275inject"](submission_json_patch_operations_service.a),core["\u0275\u0275inject"](sections_service.a),core["\u0275\u0275inject"](ngrx_store.i),core["\u0275\u0275inject"](submission_service.a),core["\u0275\u0275inject"](submission_object_data_service.a),core["\u0275\u0275inject"](ngx_translate_core.e))},submission_objects_effects_SubmissionObjectEffects.\u0275prov=core["\u0275\u0275defineInjectable"]({token:submission_objects_effects_SubmissionObjectEffects,factory:submission_objects_effects_SubmissionObjectEffects.\u0275fac}),Object(tslib.__decorate)([Object(ngrx_effects.b)(),Object(tslib.__metadata)("design:type",Object)],submission_objects_effects_SubmissionObjectEffects.prototype,"loadForm$",void 0),Object(tslib.__decorate)([Object(ngrx_effects.b)(),Object(tslib.__metadata)("design:type",Object)],submission_objects_effects_SubmissionObjectEffects.prototype,"resetForm$",void 0),Object(tslib.__decorate)([Object(ngrx_effects.b)(),Object(tslib.__metadata)("design:type",Object)],submission_objects_effects_SubmissionObjectEffects.prototype,"saveSubmission$",void 0),Object(tslib.__decorate)([Object(ngrx_effects.b)(),Object(tslib.__metadata)("design:type",Object)],submission_objects_effects_SubmissionObjectEffects.prototype,"saveForLaterSubmission$",void 0),Object(tslib.__decorate)([Object(ngrx_effects.b)(),Object(tslib.__metadata)("design:type",Object)],submission_objects_effects_SubmissionObjectEffects.prototype,"saveSubmissionSuccess$",void 0),Object(tslib.__decorate)([Object(ngrx_effects.b)(),Object(tslib.__metadata)("design:type",Object)],submission_objects_effects_SubmissionObjectEffects.prototype,"saveSubmissionSectionSuccess$",void 0),Object(tslib.__decorate)([Object(ngrx_effects.b)(),Object(tslib.__metadata)("design:type",Object)],submission_objects_effects_SubmissionObjectEffects.prototype,"saveSection$",void 0),Object(tslib.__decorate)([Object(ngrx_effects.b)({dispatch:!1}),Object(tslib.__metadata)("design:type",Object)],submission_objects_effects_SubmissionObjectEffects.prototype,"saveError$",void 0),Object(tslib.__decorate)([Object(ngrx_effects.b)(),Object(tslib.__metadata)("design:type",Object)],submission_objects_effects_SubmissionObjectEffects.prototype,"saveAndDeposit$",void 0),Object(tslib.__decorate)([Object(ngrx_effects.b)(),Object(tslib.__metadata)("design:type",Object)],submission_objects_effects_SubmissionObjectEffects.prototype,"depositSubmission$",void 0),Object(tslib.__decorate)([Object(ngrx_effects.b)({dispatch:!1}),Object(tslib.__metadata)("design:type",Object)],submission_objects_effects_SubmissionObjectEffects.prototype,"saveForLaterSubmissionSuccess$",void 0),Object(tslib.__decorate)([Object(ngrx_effects.b)({dispatch:!1}),Object(tslib.__metadata)("design:type",Object)],submission_objects_effects_SubmissionObjectEffects.prototype,"depositSubmissionSuccess$",void 0),Object(tslib.__decorate)([Object(ngrx_effects.b)({dispatch:!1}),Object(tslib.__metadata)("design:type",Object)],submission_objects_effects_SubmissionObjectEffects.prototype,"depositSubmissionError$",void 0),Object(tslib.__decorate)([Object(ngrx_effects.b)(),Object(tslib.__metadata)("design:type",Object)],submission_objects_effects_SubmissionObjectEffects.prototype,"discardSubmission$",void 0),Object(tslib.__decorate)([Object(ngrx_effects.b)(),Object(tslib.__metadata)("design:type",Object)],submission_objects_effects_SubmissionObjectEffects.prototype,"addAllMetadataToSectionData",void 0),Object(tslib.__decorate)([Object(ngrx_effects.b)({dispatch:!1}),Object(tslib.__metadata)("design:type",Object)],submission_objects_effects_SubmissionObjectEffects.prototype,"discardSubmissionSuccess$",void 0),Object(tslib.__decorate)([Object(ngrx_effects.b)({dispatch:!1}),Object(tslib.__metadata)("design:type",Object)],submission_objects_effects_SubmissionObjectEffects.prototype,"discardSubmissionError$",void 0);const submissionEffects=[submission_objects_effects_SubmissionObjectEffects];var BehaviorSubject=__webpack_require__("2Vo4"),selectors=__webpack_require__("LP5c");class section_upload_service_SectionUploadService{constructor(store){this.store=store}getUploadedFileList(submissionId,sectionId){return this.store.select(Object(selectors.i)(submissionId,sectionId)).pipe(Object(map.a)((state=>state)),Object(distinctUntilChanged.a)())}getFileData(submissionId,sectionId,fileUUID){return this.store.select(Object(selectors.i)(submissionId,sectionId)).pipe(Object(filter.a)((state=>!Object(empty_util.j)(state))),Object(map.a)((state=>{let fileState;return Object.keys(state).filter((key=>state[key].uuid===fileUUID)).forEach((key=>fileState=state[key])),fileState})),Object(distinctUntilChanged.a)())}getDefaultPolicies(submissionId,sectionId,fileUUID){return this.store.select(Object(selectors.h)(submissionId,sectionId,fileUUID)).pipe(Object(map.a)((state=>state)),Object(distinctUntilChanged.a)())}addUploadedFile(submissionId,sectionId,fileUUID,data){this.store.dispatch(new submission_objects_actions.q(submissionId,sectionId,fileUUID,data))}updateFileData(submissionId,sectionId,fileUUID,data){this.store.dispatch(new submission_objects_actions.l(submissionId,sectionId,fileUUID,data))}removeUploadedFile(submissionId,sectionId,fileUUID){this.store.dispatch(new submission_objects_actions.d(submissionId,sectionId,fileUUID))}}section_upload_service_SectionUploadService.\u0275fac=function SectionUploadService_Factory(t){return new(t||section_upload_service_SectionUploadService)(core["\u0275\u0275inject"](ngrx_store.i))},section_upload_service_SectionUploadService.\u0275prov=core["\u0275\u0275defineInjectable"]({token:section_upload_service_SectionUploadService,factory:section_upload_service_SectionUploadService.\u0275fac});var collection_data_service=__webpack_require__("DNva"),group_data_service=__webpack_require__("YIpg"),resource_policy_service=__webpack_require__("8a3C"),config_service=__webpack_require__("EdIQ"),hal_endpoint_service=__webpack_require__("uLZQ"),build_decorators=__webpack_require__("zQ+x"),config_type=__webpack_require__("5HAD"),remote_data_build_service=__webpack_require__("7vy/"),http=__webpack_require__("tk/3"),default_change_analyzer_service=__webpack_require__("VOnO");let submission_uploads_config_service_SubmissionUploadsConfigService=class extends config_service.a{constructor(requestService,rdbService,store,objectCache,halService,notificationsService,http,comparator){super(requestService,rdbService,null,objectCache,halService,notificationsService,http,comparator,"submissionuploads"),this.requestService=requestService,this.rdbService=rdbService,this.store=store,this.objectCache=objectCache,this.halService=halService,this.notificationsService=notificationsService,this.http=http,this.comparator=comparator}findByHref(href,useCachedVersionIfAvailable=!0,reRequestOnStale=!0,...linksToFollow){return super.findByHref(href,useCachedVersionIfAvailable,reRequestOnStale,...linksToFollow)}};submission_uploads_config_service_SubmissionUploadsConfigService.\u0275fac=function SubmissionUploadsConfigService_Factory(t){return new(t||submission_uploads_config_service_SubmissionUploadsConfigService)(core["\u0275\u0275inject"](request_service.a),core["\u0275\u0275inject"](remote_data_build_service.a),core["\u0275\u0275inject"](ngrx_store.i),core["\u0275\u0275inject"](object_cache_service.a),core["\u0275\u0275inject"](hal_endpoint_service.a),core["\u0275\u0275inject"](notifications_service.a),core["\u0275\u0275inject"](http.c),core["\u0275\u0275inject"](default_change_analyzer_service.a))},submission_uploads_config_service_SubmissionUploadsConfigService.\u0275prov=core["\u0275\u0275defineInjectable"]({token:submission_uploads_config_service_SubmissionUploadsConfigService,factory:submission_uploads_config_service_SubmissionUploadsConfigService.\u0275fac}),submission_uploads_config_service_SubmissionUploadsConfigService=Object(tslib.__decorate)([Object(build_decorators.d)(config_type.g),Object(tslib.__metadata)("design:paramtypes",[request_service.a,remote_data_build_service.a,ngrx_store.i,object_cache_service.a,hal_endpoint_service.a,notifications_service.a,http.c,default_change_analyzer_service.a])],submission_uploads_config_service_SubmissionUploadsConfigService);var aletr_type=__webpack_require__("ac5F");function SubmissionSectionUploadComponent_ng_container_2_Template(rf,ctx){1&rf&&(core["\u0275\u0275elementContainerStart"](0),core["\u0275\u0275text"](1,"\n  "),core["\u0275\u0275elementStart"](2,"div",2),core["\u0275\u0275text"](3,"\n    "),core["\u0275\u0275elementStart"](4,"div",3),core["\u0275\u0275text"](5,"\n      "),core["\u0275\u0275elementStart"](6,"h3",4),core["\u0275\u0275elementStart"](7,"span",5),core["\u0275\u0275text"](8),core["\u0275\u0275pipe"](9,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](10,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](11,"\n  "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](12,"\n"),core["\u0275\u0275elementContainerEnd"]()),2&rf&&(core["\u0275\u0275advance"](8),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](9,1,"submission.sections.upload.no-file-uploaded")))}const section_upload_component_c0=function(a0){return{collectionName:a0}};function SubmissionSectionUploadComponent_ng_container_4_div_2_ng_container_6_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementContainerStart"](0),core["\u0275\u0275text"](1),core["\u0275\u0275pipe"](2,"translate"),core["\u0275\u0275elementContainerEnd"]()),2&rf){const ctx_r4=core["\u0275\u0275nextContext"](3);core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate1"]("\n          ",core["\u0275\u0275pipeBind2"](2,1,"submission.sections.upload.header.policy.default.nolist",core["\u0275\u0275pureFunction1"](4,section_upload_component_c0,ctx_r4.collectionName)),"\n        ")}}function SubmissionSectionUploadComponent_ng_container_4_div_2_ng_container_8_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementContainerStart"](0),core["\u0275\u0275text"](1),core["\u0275\u0275pipe"](2,"translate"),core["\u0275\u0275elementContainerEnd"]()),2&rf){const ctx_r5=core["\u0275\u0275nextContext"](3);core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate1"]("\n          ",core["\u0275\u0275pipeBind2"](2,1,"submission.sections.upload.header.policy.default.withlist",core["\u0275\u0275pureFunction1"](4,section_upload_component_c0,ctx_r5.collectionName)),"\n        ")}}function SubmissionSectionUploadComponent_ng_container_4_div_2_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"div",2),core["\u0275\u0275text"](1,"\n    "),core["\u0275\u0275elementStart"](2,"div",8),core["\u0275\u0275text"](3,"\n      "),core["\u0275\u0275elementStart"](4,"ds-alert",9),core["\u0275\u0275text"](5,"\n        "),core["\u0275\u0275template"](6,SubmissionSectionUploadComponent_ng_container_4_div_2_ng_container_6_Template,3,6,"ng-container",1),core["\u0275\u0275text"](7,"\n        "),core["\u0275\u0275template"](8,SubmissionSectionUploadComponent_ng_container_4_div_2_ng_container_8_Template,3,6,"ng-container",1),core["\u0275\u0275text"](9,"\n        "),core["\u0275\u0275element"](10,"span",10),core["\u0275\u0275text"](11,"\n        "),core["\u0275\u0275element"](12,"ds-submission-section-upload-access-conditions",11),core["\u0275\u0275text"](13,"\n      "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](14,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](15,"\n  "),core["\u0275\u0275elementEnd"]()),2&rf){const ctx_r2=core["\u0275\u0275nextContext"](2);core["\u0275\u0275advance"](4),core["\u0275\u0275property"]("type",ctx_r2.AlertTypeEnum.Warning),core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",1===ctx_r2.collectionPolicyType),core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",2===ctx_r2.collectionPolicyType),core["\u0275\u0275advance"](4),core["\u0275\u0275property"]("accessConditions",ctx_r2.collectionDefaultAccessConditions)}}function SubmissionSectionUploadComponent_ng_container_4_ng_container_4_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementContainerStart"](0),core["\u0275\u0275text"](1,"\n    "),core["\u0275\u0275element"](2,"ds-submission-upload-section-file",12),core["\u0275\u0275pipe"](3,"async"),core["\u0275\u0275text"](4,"\n    "),core["\u0275\u0275elementStart"](5,"div",2),core["\u0275\u0275text"](6,"\n      "),core["\u0275\u0275elementStart"](7,"div",3),core["\u0275\u0275text"](8,"\n        "),core["\u0275\u0275element"](9,"hr"),core["\u0275\u0275text"](10,"\n      "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](11,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](12,"\n  "),core["\u0275\u0275elementContainerEnd"]()),2&rf){const fileEntry_r6=ctx.$implicit,ctx_r3=core["\u0275\u0275nextContext"](2);core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("availableAccessConditionOptions",ctx_r3.availableAccessConditionOptions)("collectionId",ctx_r3.collectionId)("collectionPolicyType",ctx_r3.collectionPolicyType)("configMetadataForm",core["\u0275\u0275pipeBind1"](3,9,ctx_r3.configMetadataForm$))("fileId",ctx_r3.fileIndexes[ctx_r3.fileList.indexOf(fileEntry_r6)])("fileIndex",ctx_r3.fileList.indexOf(fileEntry_r6))("fileName",ctx_r3.fileNames[ctx_r3.fileList.indexOf(fileEntry_r6)])("sectionId",ctx_r3.sectionData.id)("submissionId",ctx_r3.submissionId)}}function SubmissionSectionUploadComponent_ng_container_4_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementContainerStart"](0),core["\u0275\u0275text"](1,"\n\n  "),core["\u0275\u0275template"](2,SubmissionSectionUploadComponent_ng_container_4_div_2_Template,16,4,"div",6),core["\u0275\u0275text"](3,"\n\n  "),core["\u0275\u0275template"](4,SubmissionSectionUploadComponent_ng_container_4_ng_container_4_Template,13,11,"ng-container",7),core["\u0275\u0275text"](5,"\n"),core["\u0275\u0275elementContainerEnd"]()),2&rf){const ctx_r1=core["\u0275\u0275nextContext"]();core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",ctx_r1.collectionDefaultAccessConditions.length>0),core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngForOf",ctx_r1.fileList)}}let section_upload_component_SubmissionSectionUploadComponent=class extends section_model_SectionModelComponent{constructor(bitstreamService,changeDetectorRef,collectionDataService,groupService,resourcePolicyService,sectionService,submissionService,uploadsConfigService,injectedSectionData,injectedSubmissionId){super(void 0,injectedSectionData,injectedSubmissionId),this.bitstreamService=bitstreamService,this.changeDetectorRef=changeDetectorRef,this.collectionDataService=collectionDataService,this.groupService=groupService,this.resourcePolicyService=resourcePolicyService,this.sectionService=sectionService,this.submissionService=submissionService,this.uploadsConfigService=uploadsConfigService,this.injectedSectionData=injectedSectionData,this.injectedSubmissionId=injectedSubmissionId,this.AlertTypeEnum=aletr_type.a,this.fileIndexes=[],this.fileList=[],this.fileNames=[],this.collectionDefaultAccessConditions=[],this.required$=new BehaviorSubject.a(!0),this.subs=[]}onSectionInit(){const config$=this.uploadsConfigService.findByHref(this.sectionData.config,!0,!1,Object(follow_link_config_model.a)("metadata")).pipe(Object(operators.i)(),Object(map.a)((config=>config.payload)));this.configMetadataForm$=config$.pipe(Object(switchMap.a)((config=>config.metadata.pipe(Object(operators.i)(),Object(map.a)((remoteData=>remoteData.payload)))))),this.subs.push(this.submissionService.getSubmissionObject(this.submissionId).pipe(Object(filter.a)((submissionObject=>Object(empty_util.h)(submissionObject)&&!submissionObject.isLoading)),Object(filter.a)((submissionObject=>Object(empty_util.j)(this.collectionId)||this.collectionId!==submissionObject.collection)),Object(tap.a)((submissionObject=>this.collectionId=submissionObject.collection)),Object(mergeMap.a)((submissionObject=>this.collectionDataService.findById(submissionObject.collection))),Object(filter.a)((rd=>Object(empty_util.h)(rd.payload))),Object(tap.a)((collectionRemoteData=>this.collectionName=collectionRemoteData.payload.name)),Object(mergeMap.a)((()=>config$))).subscribe((config=>{this.required$.next(config.required),this.availableAccessConditionOptions=Object(empty_util.e)(config.accessConditionOptions)?config.accessConditionOptions:[],this.collectionPolicyType=this.availableAccessConditionOptions.length>0?2:1,this.changeDetectorRef.detectChanges()})),Object(combineLatest.a)(this.configMetadataForm$,this.bitstreamService.getUploadedFileList(this.submissionId,this.sectionData.id)).pipe(Object(filter.a)((([configMetadataForm,fileList])=>Object(empty_util.e)(configMetadataForm)&&Object(empty_util.h)(fileList))),Object(distinctUntilChanged.a)()).subscribe((([configMetadataForm,fileList])=>{this.fileList=[],this.fileIndexes=[],this.fileNames=[],this.changeDetectorRef.detectChanges(),Object(empty_util.h)(fileList)&&fileList.length>0&&fileList.forEach((file=>{this.fileList.push(file),this.fileIndexes.push(file.uuid),this.fileNames.push(this.getFileName(configMetadataForm,file))})),this.changeDetectorRef.detectChanges()})))}getFileName(configMetadataForm,fileData){const metadataName=configMetadataForm.rows[0].fields[0].selectableMetadata[0].metadata;let title;return title=Object(empty_util.e)(fileData.metadata)&&Object(empty_util.e)(fileData.metadata[metadataName])?fileData.metadata[metadataName][0].display:fileData.uuid,title}getSectionStatus(){return Object(combineLatest.a)(this.required$,this.bitstreamService.getUploadedFileList(this.submissionId,this.sectionData.id),((required,fileList)=>!required||Object(empty_util.h)(fileList)&&fileList.length>0))}onSectionDestroy(){this.subs.filter((subscription=>Object(empty_util.b)(subscription))).forEach((subscription=>subscription.unsubscribe()))}};section_upload_component_SubmissionSectionUploadComponent.\u0275fac=function SubmissionSectionUploadComponent_Factory(t){return new(t||section_upload_component_SubmissionSectionUploadComponent)(core["\u0275\u0275directiveInject"](section_upload_service_SectionUploadService),core["\u0275\u0275directiveInject"](core.ChangeDetectorRef),core["\u0275\u0275directiveInject"](collection_data_service.a),core["\u0275\u0275directiveInject"](group_data_service.a),core["\u0275\u0275directiveInject"](resource_policy_service.a),core["\u0275\u0275directiveInject"](sections_service.a),core["\u0275\u0275directiveInject"](submission_service.a),core["\u0275\u0275directiveInject"](submission_uploads_config_service_SubmissionUploadsConfigService),core["\u0275\u0275directiveInject"]("sectionDataProvider"),core["\u0275\u0275directiveInject"]("submissionIdProvider"))},section_upload_component_SubmissionSectionUploadComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:section_upload_component_SubmissionSectionUploadComponent,selectors:[["ds-submission-section-upload"]],features:[core["\u0275\u0275InheritDefinitionFeature"]],decls:6,vars:5,consts:[[3,"content","dismissible","type"],[4,"ngIf"],[1,"row"],[1,"col-md-12"],[1,"text-center"],[1,"text-muted"],["class","row",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"col-sm-12"],[3,"type"],[1,"clearfix"],[3,"accessConditions"],[3,"availableAccessConditionOptions","collectionId","collectionPolicyType","configMetadataForm","fileId","fileIndex","fileName","sectionId","submissionId"]],template:function SubmissionSectionUploadComponent_Template(rf,ctx){1&rf&&(core["\u0275\u0275element"](0,"ds-alert",0),core["\u0275\u0275text"](1,"\n\n"),core["\u0275\u0275template"](2,SubmissionSectionUploadComponent_ng_container_2_Template,13,3,"ng-container",1),core["\u0275\u0275text"](3,"\n\n"),core["\u0275\u0275template"](4,SubmissionSectionUploadComponent_ng_container_4_Template,6,2,"ng-container",1),core["\u0275\u0275text"](5,"\n")),2&rf&&(core["\u0275\u0275property"]("content","submission.sections.upload.info")("dismissible",!0)("type",ctx.AlertTypeEnum.Info),core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",0==ctx.fileList.length),core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",ctx.fileList.length>0))},styles:[""]}),section_upload_component_SubmissionSectionUploadComponent=Object(tslib.__decorate)([Object(sections_decorator.a)(sections_type.a.Upload),Object(tslib.__metadata)("design:paramtypes",[section_upload_service_SectionUploadService,core.ChangeDetectorRef,collection_data_service.a,group_data_service.a,resource_policy_service.a,sections_service.a,submission_service.a,submission_uploads_config_service_SubmissionUploadsConfigService,Object,String])],section_upload_component_SubmissionSectionUploadComponent);var submission_upload_files_component=__webpack_require__("T/iP"),json_patch_operations_builder=__webpack_require__("BVmw");const SECTION_LICENSE_FORM_LAYOUT={granted:{element:{container:"custom-control custom-checkbox pl-1",control:"custom-control-input",label:"custom-control-label pt-1"}}},SECTION_LICENSE_FORM_MODEL=[{id:"granted",label:"I confirm the license above",required:!0,value:!1,validators:{required:null},errorMessages:{required:"You must accept the license",notgranted:"You must accept the license"},type:"CHECKBOX"}],section_license_component_c0=["formRef"];function SubmissionSectionLicenseComponent_ds_form_7_Template(rf,ctx){if(1&rf){const _r3=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementStart"](0,"ds-form",2,3),core["\u0275\u0275listener"]("dfChange",(function SubmissionSectionLicenseComponent_ds_form_7_Template_ds_form_dfChange_0_listener($event){core["\u0275\u0275restoreView"](_r3);return core["\u0275\u0275nextContext"]().onChange($event)})),core["\u0275\u0275elementEnd"]()}if(2&rf){const ctx_r0=core["\u0275\u0275nextContext"]();core["\u0275\u0275property"]("formId",ctx_r0.formId)("formModel",ctx_r0.formModel)("formLayout",ctx_r0.formLayout)("displaySubmit",ctx_r0.displaySubmit)("displayCancel",!1)}}let section_license_component_SubmissionSectionLicenseComponent=class extends section_model_SectionModelComponent{constructor(changeDetectorRef,collectionDataService,formBuilderService,formOperationsService,formService,operationsBuilder,sectionService,submissionService,injectedCollectionId,injectedSectionData,injectedSubmissionId){super(injectedCollectionId,injectedSectionData,injectedSubmissionId),this.changeDetectorRef=changeDetectorRef,this.collectionDataService=collectionDataService,this.formBuilderService=formBuilderService,this.formOperationsService=formOperationsService,this.formService=formService,this.operationsBuilder=operationsBuilder,this.sectionService=sectionService,this.submissionService=submissionService,this.injectedCollectionId=injectedCollectionId,this.injectedSectionData=injectedSectionData,this.injectedSubmissionId=injectedSubmissionId,this.formLayout=SECTION_LICENSE_FORM_LAYOUT,this.displaySubmit=!1,this.subs=[]}onSectionInit(){this.pathCombiner=new json_patch_operation_path_combiner.a("sections",this.sectionData.id),this.formId=this.formService.getUniqueId(this.sectionData.id),this.formModel=this.formBuilderService.fromJSON(SECTION_LICENSE_FORM_MODEL);const model=this.formBuilderService.findById("granted",this.formModel);model.value=this.sectionData.data.granted,this.licenseText$=this.collectionDataService.findById(this.collectionId,!0,!0,Object(follow_link_config_model.a)("license")).pipe(Object(filter.a)((collectionData=>Object(empty_util.h)(collectionData.payload))),Object(mergeMap.a)((collectionData=>collectionData.payload.license)),Object(find.a)((licenseData=>Object(empty_util.h)(licenseData.payload))),Object(map.a)((licenseData=>licenseData.payload.text)),Object(startWith.a)("")),this.subs.push(this.sectionService.isSectionReadOnly(this.submissionId,this.sectionData.id,this.submissionService.getSubmissionScope()).pipe(Object(take.a)(1),Object(filter.a)((isReadOnly=>isReadOnly))).subscribe((()=>{model.disabled=!0})),this.sectionService.getSectionErrors(this.submissionId,this.sectionData.id).pipe(Object(filter.a)((errors=>Object(empty_util.e)(errors))),Object(distinctUntilChanged.a)()).subscribe((errors=>{const newErrors=errors.map((error=>"/sections/license"===error.path?model.checked?null:Object.assign({},error,{path:"/sections/license/granted"}):error)).filter((error=>Object(empty_util.g)(error)));Object(empty_util.e)(newErrors)?(this.sectionService.checkSectionErrors(this.submissionId,this.sectionData.id,this.formId,newErrors),this.sectionData.errors=errors):this.sectionService.dispatchRemoveSectionErrors(this.submissionId,this.sectionData.id),this.changeDetectorRef.detectChanges()})))}getSectionStatus(){const model=this.formBuilderService.findById("granted",this.formModel);return model.valueChanges.pipe(Object(map.a)((value=>!0===value)),Object(startWith.a)(model.value))}onChange(event){const path=this.formOperationsService.getFieldPathSegmentedFromChangeEvent(event),value=this.formOperationsService.getFieldValueFromChangeEvent(event);value?(this.operationsBuilder.add(this.pathCombiner.getPath(path),value.value.toString(),!1,!0),this.sectionService.dispatchRemoveSectionErrors(this.submissionId,this.sectionData.id)):this.operationsBuilder.remove(this.pathCombiner.getPath(path))}onSectionDestroy(){this.subs.filter((subscription=>Object(empty_util.b)(subscription))).forEach((subscription=>subscription.unsubscribe()))}};section_license_component_SubmissionSectionLicenseComponent.\u0275fac=function SubmissionSectionLicenseComponent_Factory(t){return new(t||section_license_component_SubmissionSectionLicenseComponent)(core["\u0275\u0275directiveInject"](core.ChangeDetectorRef),core["\u0275\u0275directiveInject"](collection_data_service.a),core["\u0275\u0275directiveInject"](form_builder_service.a),core["\u0275\u0275directiveInject"](section_form_operations_service.a),core["\u0275\u0275directiveInject"](form_service.a),core["\u0275\u0275directiveInject"](json_patch_operations_builder.a),core["\u0275\u0275directiveInject"](sections_service.a),core["\u0275\u0275directiveInject"](submission_service.a),core["\u0275\u0275directiveInject"]("collectionIdProvider"),core["\u0275\u0275directiveInject"]("sectionDataProvider"),core["\u0275\u0275directiveInject"]("submissionIdProvider"))},section_license_component_SubmissionSectionLicenseComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:section_license_component_SubmissionSectionLicenseComponent,selectors:[["ds-submission-section-license"]],viewQuery:function SubmissionSectionLicenseComponent_Query(rf,ctx){if(1&rf&&core["\u0275\u0275viewQuery"](section_license_component_c0,1),2&rf){let _t;core["\u0275\u0275queryRefresh"](_t=core["\u0275\u0275loadQuery"]())&&(ctx.formRef=_t.first)}},features:[core["\u0275\u0275InheritDefinitionFeature"]],decls:9,vars:4,consts:[[1,"mb-5",3,"innerHTML"],[3,"formId","formModel","formLayout","displaySubmit","displayCancel","dfChange",4,"ngIf"],[3,"formId","formModel","formLayout","displaySubmit","displayCancel","dfChange"],["formRef","formComponent"]],template:function SubmissionSectionLicenseComponent_Template(rf,ctx){1&rf&&(core["\u0275\u0275element"](0,"span",0),core["\u0275\u0275pipe"](1,"async"),core["\u0275\u0275text"](2,"\n"),core["\u0275\u0275element"](3,"br"),core["\u0275\u0275text"](4," "),core["\u0275\u0275element"](5,"br"),core["\u0275\u0275text"](6,"\n"),core["\u0275\u0275template"](7,SubmissionSectionLicenseComponent_ds_form_7_Template,2,5,"ds-form",1),core["\u0275\u0275text"](8,"\n")),2&rf&&(core["\u0275\u0275property"]("innerHTML",core["\u0275\u0275pipeBind1"](1,2,ctx.licenseText$),core["\u0275\u0275sanitizeHtml"]),core["\u0275\u0275advance"](7),core["\u0275\u0275property"]("ngIf",ctx.formModel))},directives:[common.NgIf,form_component.a],pipes:[common.AsyncPipe],styles:[""]}),section_license_component_SubmissionSectionLicenseComponent=Object(tslib.__decorate)([Object(sections_decorator.a)(sections_type.a.License),Object(tslib.__metadata)("design:paramtypes",[core.ChangeDetectorRef,collection_data_service.a,form_builder_service.a,section_form_operations_service.a,form_service.a,json_patch_operations_builder.a,sections_service.a,submission_service.a,String,Object,String])],section_license_component_SubmissionSectionLicenseComponent);var submission_edit_component=__webpack_require__("SCNa"),fesm2015_core=(__webpack_require__("96+Z"),__webpack_require__("e+Av"));const BITSTREAM_METADATA_FORM_GROUP_CONFIG={id:"metadata",group:[]},BITSTREAM_METADATA_FORM_GROUP_LAYOUT={element:{container:"form-group",label:"col-form-label"},grid:{label:"col-sm-3"}},BITSTREAM_ACCESS_CONDITION_GROUP_CONFIG={id:"accessConditionGroup",group:[]},BITSTREAM_ACCESS_CONDITION_GROUP_LAYOUT={element:{host:"form-group access-condition-group col",container:"pl-1 pr-1",control:"form-row "}},BITSTREAM_ACCESS_CONDITIONS_FORM_ARRAY_CONFIG={id:"accessConditions",groupFactory:null},BITSTREAM_ACCESS_CONDITIONS_FORM_ARRAY_LAYOUT={grid:{group:"form-row pt-4"}},BITSTREAM_FORM_ACCESS_CONDITION_TYPE_CONFIG={id:"name",label:"submission.sections.upload.form.access-condition-label",hint:"submission.sections.upload.form.access-condition-hint",options:[]},BITSTREAM_FORM_ACCESS_CONDITION_TYPE_LAYOUT={element:{host:"col-12",label:"col-form-label name-label"}},BITSTREAM_FORM_ACCESS_CONDITION_START_DATE_CONFIG={id:"startDate",label:"submission.sections.upload.form.from-label",hint:"submission.sections.upload.form.from-hint",placeholder:"submission.sections.upload.form.from-placeholder",inline:!1,toggleIcon:"far fa-calendar-alt",relations:[{match:fesm2015_core.Q,operator:fesm2015_core.R,when:[]}],required:!0,validators:{required:null},errorMessages:{required:"submission.sections.upload.form.date-required-from"}},BITSTREAM_FORM_ACCESS_CONDITION_START_DATE_LAYOUT={element:{label:"col-form-label"},grid:{host:"col-6"}},BITSTREAM_FORM_ACCESS_CONDITION_END_DATE_CONFIG={id:"endDate",label:"submission.sections.upload.form.until-label",hint:"submission.sections.upload.form.until-hint",placeholder:"submission.sections.upload.form.until-placeholder",inline:!1,toggleIcon:"far fa-calendar-alt",relations:[{match:fesm2015_core.Q,operator:fesm2015_core.R,when:[]}],required:!0,validators:{required:null},errorMessages:{required:"submission.sections.upload.form.date-required-until"}},BITSTREAM_FORM_ACCESS_CONDITION_END_DATE_LAYOUT={element:{label:"col-form-label"},grid:{host:"col-6"}};var date_util=__webpack_require__("fM99"),ng_bootstrap=__webpack_require__("1kSV");const section_upload_file_edit_component_c0=["formRef"];function SubmissionSectionUploadFileEditComponent_ds_form_17_Template(rf,ctx){if(1&rf){const _r3=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementStart"](0,"ds-form",6,7),core["\u0275\u0275listener"]("submitForm",(function SubmissionSectionUploadFileEditComponent_ds_form_17_Template_ds_form_submitForm_0_listener(){core["\u0275\u0275restoreView"](_r3);return core["\u0275\u0275nextContext"]().onSubmit()}))("cancel",(function SubmissionSectionUploadFileEditComponent_ds_form_17_Template_ds_form_cancel_0_listener(){core["\u0275\u0275restoreView"](_r3);return core["\u0275\u0275nextContext"]().onModalClose()}))("dfChange",(function SubmissionSectionUploadFileEditComponent_ds_form_17_Template_ds_form_dfChange_0_listener($event){core["\u0275\u0275restoreView"](_r3);return core["\u0275\u0275nextContext"]().onChange($event)})),core["\u0275\u0275elementEnd"]()}if(2&rf){const ctx_r0=core["\u0275\u0275nextContext"]();core["\u0275\u0275property"]("formId",ctx_r0.formId)("formModel",ctx_r0.formModel)("displaySubmit",!ctx_r0.isSaving)("displayCancel",!ctx_r0.isSaving)}}class section_upload_file_edit_component_SubmissionSectionUploadFileEditComponent{constructor(activeModal,cdr,formBuilderService,formService,submissionService,operationsBuilder,operationsService,uploadService){this.activeModal=activeModal,this.cdr=cdr,this.formBuilderService=formBuilderService,this.formService=formService,this.submissionService=submissionService,this.operationsBuilder=operationsBuilder,this.operationsService=operationsService,this.uploadService=uploadService,this.formMetadata=[],this.isSaving=!1,this.subscriptions=[]}initModelData(formModel){this.fileData.accessConditions.forEach(((accessCondition,index)=>{Array.of("name","startDate","endDate").filter((key=>accessCondition.hasOwnProperty(key)&&Object(empty_util.e)(accessCondition[key]))).forEach((key=>{const metadataModel=this.formBuilderService.findById(key,formModel,index);if(metadataModel)if(metadataModel.type===fesm2015_core.g){const date=new Date(accessCondition[key]);metadataModel.value={year:date.getUTCFullYear(),month:date.getUTCMonth()+1,day:date.getUTCDate()}}else metadataModel.value=accessCondition[key]}))}))}onChange(event){"name"===event.model.id&&this.setOptions(event.model,event.control)}onModalClose(){this.activeModal.dismiss()}onSubmit(){this.isSaving=!0,this.saveBitstreamData()}setOptions(model,control){let accessCondition=null;if(this.availableAccessConditionOptions.filter((element=>element.name===control.value)).forEach((element=>accessCondition=element)),Object(empty_util.e)(accessCondition)){const showGroups=!0===accessCondition.hasStartDate||!0===accessCondition.hasEndDate,startDateControl=control.parent.get("startDate"),endDateControl=control.parent.get("endDate");if(null==startDateControl||startDateControl.markAsUntouched(),null==endDateControl||endDateControl.markAsUntouched(),null==startDateControl||startDateControl.setValue(null),control.parent.markAsDirty(),null==endDateControl||endDateControl.setValue(null),showGroups){if(accessCondition.hasStartDate){const startDateModel=this.formBuilderService.findById("startDate",model.parent.group),min=new Date(accessCondition.maxStartDate);startDateModel.max={year:min.getUTCFullYear(),month:min.getUTCMonth()+1,day:min.getUTCDate()}}if(accessCondition.hasEndDate){const endDateModel=this.formBuilderService.findById("endDate",model.parent.group),max=new Date(accessCondition.maxEndDate);endDateModel.max={year:max.getUTCFullYear(),month:max.getUTCMonth()+1,day:max.getUTCDate()}}}}}ngOnInit(){this.fileData&&this.formId&&(this.formModel=this.buildFileEditForm(),this.cdr.detectChanges())}ngOnDestroy(){this.unsubscribeAll()}retrieveValueFromField(field){const temp=Array.isArray(field)?field[0]:field;return temp?temp.value:void 0}buildFileEditForm(){const configDescr=Object.assign({},this.configMetadataForm.rows[0].fields[0]);configDescr.repeatable=!1;const configForm=Object.assign({},this.configMetadataForm,{fields:Object.assign([],this.configMetadataForm.rows[0].fields[0],[this.configMetadataForm.rows[0].fields[0],configDescr])}),formModel=[],metadataGroupModelConfig=Object.assign({},BITSTREAM_METADATA_FORM_GROUP_CONFIG);metadataGroupModelConfig.group=this.formBuilderService.modelFromConfiguration(this.submissionId,configForm,this.collectionId,this.fileData.metadata,this.submissionService.getSubmissionScope()),formModel.push(new fesm2015_core.D(metadataGroupModelConfig,BITSTREAM_METADATA_FORM_GROUP_LAYOUT));const accessConditionTypeModelConfig=Object.assign({},BITSTREAM_FORM_ACCESS_CONDITION_TYPE_CONFIG),accessConditionsArrayConfig=Object.assign({},BITSTREAM_ACCESS_CONDITIONS_FORM_ARRAY_CONFIG),accessConditionTypeOptions=[];if(2===this.collectionPolicyType){for(const accessCondition of this.availableAccessConditionOptions)accessConditionTypeOptions.push({label:accessCondition.name,value:accessCondition.name});accessConditionTypeModelConfig.options=accessConditionTypeOptions;const hasStart=[],hasEnd=[],hasGroups=[];this.availableAccessConditionOptions.forEach((condition=>{const showStart=!0===condition.hasStartDate,showEnd=!0===condition.hasEndDate,showGroups=showStart||showEnd;showStart&&hasStart.push({id:"name",value:condition.name}),showEnd&&hasEnd.push({id:"name",value:condition.name}),showGroups&&hasGroups.push({id:"name",value:condition.name})}));const confStart={relations:[{match:fesm2015_core.Q,operator:fesm2015_core.R,when:hasStart}]},confEnd={relations:[{match:fesm2015_core.Q,operator:fesm2015_core.R,when:hasEnd}]};accessConditionsArrayConfig.groupFactory=()=>{const type=new fesm2015_core.N(accessConditionTypeModelConfig,BITSTREAM_FORM_ACCESS_CONDITION_TYPE_LAYOUT),startDateConfig=Object.assign({},BITSTREAM_FORM_ACCESS_CONDITION_START_DATE_CONFIG,confStart),endDateConfig=Object.assign({},BITSTREAM_FORM_ACCESS_CONDITION_END_DATE_CONFIG,confEnd),startDate=new fesm2015_core.t(startDateConfig,BITSTREAM_FORM_ACCESS_CONDITION_START_DATE_LAYOUT),endDate=new fesm2015_core.t(endDateConfig,BITSTREAM_FORM_ACCESS_CONDITION_END_DATE_LAYOUT),accessConditionGroupConfig=Object.assign({},BITSTREAM_ACCESS_CONDITION_GROUP_CONFIG);return accessConditionGroupConfig.group=[type],hasStart.length>0&&accessConditionGroupConfig.group.push(startDate),hasEnd.length>0&&accessConditionGroupConfig.group.push(endDate),[new fesm2015_core.D(accessConditionGroupConfig,BITSTREAM_ACCESS_CONDITION_GROUP_LAYOUT)]},accessConditionsArrayConfig.initialCount=Object(empty_util.e)(this.fileData.accessConditions)?this.fileData.accessConditions.length:1,formModel.push(new fesm2015_core.w(accessConditionsArrayConfig,BITSTREAM_ACCESS_CONDITIONS_FORM_ARRAY_LAYOUT))}return this.initModelData(formModel),formModel}saveBitstreamData(){this.formService.validateAllFormFields(this.formRef.formGroup);const saveBitstreamDataSubscription=this.formService.isValid(this.formId).pipe(Object(take.a)(1),Object(filter.a)((isValid=>isValid)),Object(mergeMap.a)((()=>this.formService.getFormData(this.formId))),Object(take.a)(1),Object(mergeMap.a)((formData=>{Object.keys(formData.metadata).filter((key=>Object(empty_util.e)(formData.metadata[key]))).forEach((key=>{const path=`metadata/${key.replace(/_/g,".")}`;this.operationsBuilder.add(this.pathCombiner.getPath(path),formData.metadata[key],!0)})),Object.keys(this.fileData.metadata).filter((key=>Object(empty_util.e)(this.fileData.metadata[key]))).filter((key=>Object(empty_util.a)(formData.metadata[key]))).filter((key=>this.formMetadata.includes(key))).forEach((key=>{const path=`metadata/${key.replace(/_/g,".")}`;this.operationsBuilder.remove(this.pathCombiner.getPath(path))}));const accessConditionsToSave=[];return formData.accessConditions.map((accessConditions=>accessConditions.accessConditionGroup)).filter((accessCondition=>Object(empty_util.e)(accessCondition))).forEach((accessCondition=>{let accessConditionOpt;if(this.availableAccessConditionOptions.filter((element=>Object(empty_util.g)(accessCondition.name)&&element.name===accessCondition.name[0].value)).forEach((element=>accessConditionOpt=element)),accessConditionOpt){const currentAccessCondition=Object.assign({},accessCondition);if(currentAccessCondition.name=this.retrieveValueFromField(accessCondition.name),accessConditionOpt.hasStartDate){if(accessCondition.startDate){const startDate=this.retrieveValueFromField(accessCondition.startDate);currentAccessCondition.startDate=Object(date_util.a)(startDate)}}else delete currentAccessCondition.startDate;if(accessConditionOpt.hasEndDate){if(accessCondition.endDate){const endDate=this.retrieveValueFromField(accessCondition.endDate);currentAccessCondition.endDate=Object(date_util.a)(endDate)}}else delete currentAccessCondition.endDate;accessConditionsToSave.push(currentAccessCondition)}})),Object(empty_util.e)(accessConditionsToSave)&&this.operationsBuilder.add(this.pathCombiner.getPath("accessConditions"),accessConditionsToSave,!0),this.operationsService.jsonPatchByResourceID(this.submissionService.getSubmissionObjectLinkName(),this.submissionId,this.pathCombiner.rootElement,this.pathCombiner.subRootElement)}))).subscribe((result=>{if(result[0].sections[this.sectionId]){const uploadSection=result[0].sections[this.sectionId];Object.keys(uploadSection.files).filter((key=>uploadSection.files[key].uuid===this.fileId)).forEach((key=>this.uploadService.updateFileData(this.submissionId,this.sectionId,this.fileId,uploadSection.files[key])))}this.isSaving=!1,this.activeModal.close()}));this.subscriptions.push(saveBitstreamDataSubscription)}unsubscribeAll(){this.subscriptions.filter((sub=>Object(empty_util.b)(sub))).forEach((sub=>sub.unsubscribe()))}}section_upload_file_edit_component_SubmissionSectionUploadFileEditComponent.\u0275fac=function SubmissionSectionUploadFileEditComponent_Factory(t){return new(t||section_upload_file_edit_component_SubmissionSectionUploadFileEditComponent)(core["\u0275\u0275directiveInject"](ng_bootstrap.c),core["\u0275\u0275directiveInject"](core.ChangeDetectorRef),core["\u0275\u0275directiveInject"](form_builder_service.a),core["\u0275\u0275directiveInject"](form_service.a),core["\u0275\u0275directiveInject"](submission_service.a),core["\u0275\u0275directiveInject"](json_patch_operations_builder.a),core["\u0275\u0275directiveInject"](submission_json_patch_operations_service.a),core["\u0275\u0275directiveInject"](section_upload_service_SectionUploadService))},section_upload_file_edit_component_SubmissionSectionUploadFileEditComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:section_upload_file_edit_component_SubmissionSectionUploadFileEditComponent,selectors:[["ds-submission-section-upload-file-edit"]],viewQuery:function SubmissionSectionUploadFileEditComponent_Query(rf,ctx){if(1&rf&&core["\u0275\u0275viewQuery"](section_upload_file_edit_component_c0,1),2&rf){let _t;core["\u0275\u0275queryRefresh"](_t=core["\u0275\u0275loadQuery"]())&&(ctx.formRef=_t.first)}},decls:21,vars:5,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"disabled","click"],["aria-hidden","true"],[1,"modal-body"],[3,"formId","formModel","displaySubmit","displayCancel","submitForm","cancel","dfChange",4,"ngIf"],[3,"formId","formModel","displaySubmit","displayCancel","submitForm","cancel","dfChange"],["formRef","formComponent"]],template:function SubmissionSectionUploadFileEditComponent_Template(rf,ctx){1&rf&&(core["\u0275\u0275elementStart"](0,"div"),core["\u0275\u0275text"](1,"\n  "),core["\u0275\u0275elementStart"](2,"div",0),core["\u0275\u0275text"](3,"\n    "),core["\u0275\u0275elementStart"](4,"h4",1),core["\u0275\u0275text"](5),core["\u0275\u0275pipe"](6,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](7,"\n    "),core["\u0275\u0275elementStart"](8,"button",2),core["\u0275\u0275listener"]("click",(function SubmissionSectionUploadFileEditComponent_Template_button_click_8_listener(){return ctx.onModalClose()})),core["\u0275\u0275text"](9,"\n      "),core["\u0275\u0275elementStart"](10,"span",3),core["\u0275\u0275text"](11,"\xd7"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](12,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](13,"\n  "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](14,"\n  "),core["\u0275\u0275elementStart"](15,"div",4),core["\u0275\u0275text"](16,"\n\n    "),core["\u0275\u0275template"](17,SubmissionSectionUploadFileEditComponent_ds_form_17_Template,2,4,"ds-form",5),core["\u0275\u0275text"](18,"\n\n  "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](19,"\n"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](20,"\n")),2&rf&&(core["\u0275\u0275advance"](5),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](6,3,"submission.sections.upload.edit.title")),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("disabled",ctx.isSaving),core["\u0275\u0275advance"](9),core["\u0275\u0275property"]("ngIf",ctx.formModel))},directives:[common.NgIf,form_component.a],pipes:[ngx_translate_core.d],styles:[".access-condition-group{position:relative;top:-2.3rem;margin-bottom:-2.3rem}"]});var bitstream_model=__webpack_require__("PJyI"),thumbnail_component=__webpack_require__("/lGE"),file_download_link_component=__webpack_require__("OXP5");var metadata_utils=__webpack_require__("/eM4");function SubmissionSectionUploadAccessConditionsComponent_ng_container_0_span_2_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"span",3),core["\u0275\u0275text"](1),core["\u0275\u0275elementEnd"]()),2&rf){const accessCondition_r1=core["\u0275\u0275nextContext"]().$implicit;core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate3"]("\n    ",accessCondition_r1.name," ",accessCondition_r1.startDate," ",accessCondition_r1.endDate,"\n  ")}}function SubmissionSectionUploadAccessConditionsComponent_ng_container_0_span_4_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"span",3),core["\u0275\u0275text"](1),core["\u0275\u0275elementEnd"]()),2&rf){const accessCondition_r1=core["\u0275\u0275nextContext"]().$implicit;core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate2"]("",accessCondition_r1.name," from ",accessCondition_r1.endDate,"")}}function SubmissionSectionUploadAccessConditionsComponent_ng_container_0_span_6_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"span",4),core["\u0275\u0275text"](1),core["\u0275\u0275elementEnd"]()),2&rf){const accessCondition_r1=core["\u0275\u0275nextContext"]().$implicit;core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate2"]("",accessCondition_r1.name," until ",accessCondition_r1.startDate,"")}}function SubmissionSectionUploadAccessConditionsComponent_ng_container_0_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementContainerStart"](0),core["\u0275\u0275text"](1,"\n  "),core["\u0275\u0275template"](2,SubmissionSectionUploadAccessConditionsComponent_ng_container_0_span_2_Template,2,3,"span",1),core["\u0275\u0275text"](3,"\n  "),core["\u0275\u0275template"](4,SubmissionSectionUploadAccessConditionsComponent_ng_container_0_span_4_Template,2,2,"span",1),core["\u0275\u0275text"](5,"\n  "),core["\u0275\u0275template"](6,SubmissionSectionUploadAccessConditionsComponent_ng_container_0_span_6_Template,2,2,"span",2),core["\u0275\u0275text"](7,"\n  "),core["\u0275\u0275element"](8,"br"),core["\u0275\u0275text"](9,"\n"),core["\u0275\u0275elementContainerEnd"]()),2&rf){const accessCondition_r1=ctx.$implicit;core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf","DEFAULT_BITSTREAM_READ"==accessCondition_r1.action),core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf","lease"==accessCondition_r1.name),core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf","embargo"==accessCondition_r1.name)}}class submission_section_upload_access_conditions_component_SubmissionSectionUploadAccessConditionsComponent{constructor(groupService){this.groupService=groupService,this.accessConditionsList=[]}ngOnInit(){this.accessConditions.forEach((accessCondition=>{Object(empty_util.d)(accessCondition.name)?this.groupService.findByHref(accessCondition._links.group.href).pipe(Object(find.a)((rd=>!rd.isResponsePending&&rd.hasSucceeded))).subscribe((rd=>{const group=rd.payload,accessConditionEntry=Object.assign({},accessCondition);accessConditionEntry.name=group.name,this.accessConditionsList.push(accessConditionEntry)})):this.accessConditionsList.push(accessCondition)}))}}submission_section_upload_access_conditions_component_SubmissionSectionUploadAccessConditionsComponent.\u0275fac=function SubmissionSectionUploadAccessConditionsComponent_Factory(t){return new(t||submission_section_upload_access_conditions_component_SubmissionSectionUploadAccessConditionsComponent)(core["\u0275\u0275directiveInject"](group_data_service.a))},submission_section_upload_access_conditions_component_SubmissionSectionUploadAccessConditionsComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:submission_section_upload_access_conditions_component_SubmissionSectionUploadAccessConditionsComponent,selectors:[["ds-submission-section-upload-access-conditions"]],inputs:{accessConditions:"accessConditions"},decls:2,vars:1,consts:[[4,"ngFor","ngForOf"],["class","badge badge-primary mt-3 mr-2",4,"ngIf"],["class","badge badge-dark mt-3 mr-2",4,"ngIf"],[1,"badge","badge-primary","mt-3","mr-2"],[1,"badge","badge-dark","mt-3","mr-2"]],template:function SubmissionSectionUploadAccessConditionsComponent_Template(rf,ctx){1&rf&&(core["\u0275\u0275template"](0,SubmissionSectionUploadAccessConditionsComponent_ng_container_0_Template,10,3,"ng-container",0),core["\u0275\u0275text"](1,"\n")),2&rf&&core["\u0275\u0275property"]("ngForOf",ctx.accessConditionsList)},directives:[common.NgForOf,common.NgIf],encapsulation:2});var truncate_pipe=__webpack_require__("BCqK");function SubmissionSectionUploadFileViewComponent_ng_container_2_ng_container_2_ng_container_2_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementContainerStart"](0),core["\u0275\u0275text"](1,"\n        "),core["\u0275\u0275elementStart"](2,"h5"),core["\u0275\u0275text"](3),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](4,"\n      "),core["\u0275\u0275elementContainerEnd"]()),2&rf){const entry_r3=core["\u0275\u0275nextContext"]().$implicit;core["\u0275\u0275advance"](3),core["\u0275\u0275textInterpolate1"]("\n          ",entry_r3.value,"\n        ")}}function SubmissionSectionUploadFileViewComponent_ng_container_2_ng_container_2_ng_container_4_h5_2_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"h5"),core["\u0275\u0275text"](1,"\n          "),core["\u0275\u0275elementStart"](2,"span",4),core["\u0275\u0275text"](3),core["\u0275\u0275pipe"](4,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](5,"\n        "),core["\u0275\u0275elementEnd"]()),2&rf){const ctx_r7=core["\u0275\u0275nextContext"](4);core["\u0275\u0275advance"](3),core["\u0275\u0275textInterpolate2"]("",core["\u0275\u0275pipeBind1"](4,2,"submission.sections.upload.no-entry")," ",ctx_r7.fileTitleKey,"")}}function SubmissionSectionUploadFileViewComponent_ng_container_2_ng_container_2_ng_container_4_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementContainerStart"](0),core["\u0275\u0275text"](1,"\n        "),core["\u0275\u0275template"](2,SubmissionSectionUploadFileViewComponent_ng_container_2_ng_container_2_ng_container_4_h5_2_Template,6,4,"h5",0),core["\u0275\u0275text"](3,"\n      "),core["\u0275\u0275elementContainerEnd"]()),2&rf){const entry_r3=core["\u0275\u0275nextContext"]().$implicit,ctx_r5=core["\u0275\u0275nextContext"](2);core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",0===ctx_r5.metadata[ctx_r5.fileTitleKey].indexOf(entry_r3))}}function SubmissionSectionUploadFileViewComponent_ng_container_2_ng_container_2_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementContainerStart"](0),core["\u0275\u0275text"](1,"\n      "),core["\u0275\u0275template"](2,SubmissionSectionUploadFileViewComponent_ng_container_2_ng_container_2_ng_container_2_Template,5,1,"ng-container",0),core["\u0275\u0275text"](3,"\n      "),core["\u0275\u0275template"](4,SubmissionSectionUploadFileViewComponent_ng_container_2_ng_container_2_ng_container_4_Template,4,1,"ng-container",0),core["\u0275\u0275text"](5,"\n      "),core["\u0275\u0275element"](6,"span",1),core["\u0275\u0275text"](7,"\n    "),core["\u0275\u0275elementContainerEnd"]()),2&rf){const entry_r3=ctx.$implicit;core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",""!==entry_r3.value),core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",""===entry_r3.value)}}const section_upload_file_view_component_c0=function(){return["150"]};function SubmissionSectionUploadFileViewComponent_ng_container_2_ng_container_4_ng_container_2_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementContainerStart"](0),core["\u0275\u0275text"](1),core["\u0275\u0275pipe"](2,"dsTruncate"),core["\u0275\u0275elementContainerEnd"]()),2&rf){const entry_r9=core["\u0275\u0275nextContext"]().$implicit;core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate1"]("\n          ",core["\u0275\u0275pipeBind2"](2,1,entry_r9.value,core["\u0275\u0275pureFunction0"](4,section_upload_file_view_component_c0)),"\n      ")}}function SubmissionSectionUploadFileViewComponent_ng_container_2_ng_container_4_ng_container_4_span_2_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"span",4),core["\u0275\u0275text"](1),core["\u0275\u0275pipe"](2,"translate"),core["\u0275\u0275elementEnd"]()),2&rf){const ctx_r13=core["\u0275\u0275nextContext"](4);core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate2"]("",core["\u0275\u0275pipeBind1"](2,2,"submission.sections.upload.no-entry")," ",ctx_r13.fileDescrKey,"")}}function SubmissionSectionUploadFileViewComponent_ng_container_2_ng_container_4_ng_container_4_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementContainerStart"](0),core["\u0275\u0275text"](1,"\n        "),core["\u0275\u0275template"](2,SubmissionSectionUploadFileViewComponent_ng_container_2_ng_container_4_ng_container_4_span_2_Template,3,4,"span",5),core["\u0275\u0275text"](3,"\n      "),core["\u0275\u0275elementContainerEnd"]()),2&rf){const entry_r9=core["\u0275\u0275nextContext"]().$implicit,ctx_r11=core["\u0275\u0275nextContext"](2);core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",0===ctx_r11.metadata[ctx_r11.fileDescrKey].indexOf(entry_r9))}}function SubmissionSectionUploadFileViewComponent_ng_container_2_ng_container_4_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementContainerStart"](0),core["\u0275\u0275text"](1,"\n      "),core["\u0275\u0275template"](2,SubmissionSectionUploadFileViewComponent_ng_container_2_ng_container_4_ng_container_2_Template,3,5,"ng-container",0),core["\u0275\u0275text"](3,"\n      "),core["\u0275\u0275template"](4,SubmissionSectionUploadFileViewComponent_ng_container_2_ng_container_4_ng_container_4_Template,4,1,"ng-container",0),core["\u0275\u0275text"](5,"\n      "),core["\u0275\u0275element"](6,"span",1),core["\u0275\u0275text"](7,"\n    "),core["\u0275\u0275elementContainerEnd"]()),2&rf){const entry_r9=ctx.$implicit;core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",""!==entry_r9.value),core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",""===entry_r9.value)}}function SubmissionSectionUploadFileViewComponent_ng_container_2_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementContainerStart"](0),core["\u0275\u0275text"](1,"\n    "),core["\u0275\u0275template"](2,SubmissionSectionUploadFileViewComponent_ng_container_2_ng_container_2_Template,8,2,"ng-container",3),core["\u0275\u0275text"](3,"\n    "),core["\u0275\u0275template"](4,SubmissionSectionUploadFileViewComponent_ng_container_2_ng_container_4_Template,8,2,"ng-container",3),core["\u0275\u0275text"](5,"\n  "),core["\u0275\u0275elementContainerEnd"]()),2&rf){const ctx_r0=core["\u0275\u0275nextContext"]();core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngForOf",ctx_r0.getAllMetadataValue(ctx_r0.fileTitleKey)),core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngForOf",ctx_r0.getAllMetadataValue(ctx_r0.fileDescrKey))}}class section_upload_file_view_component_SubmissionSectionUploadFileViewComponent{constructor(){this.metadata=Object.create({}),this.fileTitleKey="Title",this.fileDescrKey="Description"}ngOnInit(){Object(empty_util.e)(this.fileData.metadata)&&(this.metadata[this.fileTitleKey]=metadata_utils.a.all(this.fileData.metadata,"dc.title"),this.metadata[this.fileDescrKey]=metadata_utils.a.all(this.fileData.metadata,"dc.description"))}getAllMetadataValue(metadataKey){return metadata_utils.a.all(this.metadata,metadataKey)}}section_upload_file_view_component_SubmissionSectionUploadFileViewComponent.\u0275fac=function SubmissionSectionUploadFileViewComponent_Factory(t){return new(t||section_upload_file_view_component_SubmissionSectionUploadFileViewComponent)},section_upload_file_view_component_SubmissionSectionUploadFileViewComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:section_upload_file_view_component_SubmissionSectionUploadFileViewComponent,selectors:[["ds-submission-section-upload-file-view"]],inputs:{fileData:"fileData"},decls:9,vars:2,consts:[[4,"ngIf"],[1,"clearfix"],[3,"accessConditions"],[4,"ngFor","ngForOf"],[1,"text-muted"],["class","text-muted",4,"ngIf"]],template:function SubmissionSectionUploadFileViewComponent_Template(rf,ctx){1&rf&&(core["\u0275\u0275elementStart"](0,"div"),core["\u0275\u0275text"](1,"\n  "),core["\u0275\u0275template"](2,SubmissionSectionUploadFileViewComponent_ng_container_2_Template,6,2,"ng-container",0),core["\u0275\u0275text"](3,"\n\n  "),core["\u0275\u0275element"](4,"span",1),core["\u0275\u0275text"](5,"\n  "),core["\u0275\u0275element"](6,"ds-submission-section-upload-access-conditions",2),core["\u0275\u0275text"](7,"\n"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](8,"\n")),2&rf&&(core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",ctx.metadata),core["\u0275\u0275advance"](4),core["\u0275\u0275property"]("accessConditions",ctx.fileData.accessConditions))},directives:[common.NgIf,submission_section_upload_access_conditions_component_SubmissionSectionUploadAccessConditionsComponent,common.NgForOf],pipes:[ngx_translate_core.d,truncate_pipe.a],encapsulation:2});var file_size_pipe=__webpack_require__("t8/W");function SubmissionSectionUploadFileComponent_ng_container_0_i_42_Template(rf,ctx){1&rf&&core["\u0275\u0275element"](0,"i",18)}function SubmissionSectionUploadFileComponent_ng_container_0_i_45_Template(rf,ctx){1&rf&&core["\u0275\u0275element"](0,"i",19)}function SubmissionSectionUploadFileComponent_ng_container_0_Template(rf,ctx){if(1&rf){const _r6=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementContainerStart"](0),core["\u0275\u0275text"](1,"\n  "),core["\u0275\u0275elementStart"](2,"div",2),core["\u0275\u0275text"](3,"\n    "),core["\u0275\u0275elementStart"](4,"div",3),core["\u0275\u0275text"](5,"\n      "),core["\u0275\u0275text"](6,"\n      "),core["\u0275\u0275element"](7,"ds-thumbnail",4),core["\u0275\u0275text"](8,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](9,"\n    "),core["\u0275\u0275elementStart"](10,"div",5),core["\u0275\u0275text"](11,"\n      "),core["\u0275\u0275elementStart"](12,"div",6),core["\u0275\u0275text"](13,"\n        "),core["\u0275\u0275elementStart"](14,"h3"),core["\u0275\u0275text"](15),core["\u0275\u0275elementStart"](16,"span",7),core["\u0275\u0275text"](17),core["\u0275\u0275pipe"](18,"dsFileSize"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](19,"\n      "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](20,"\n      "),core["\u0275\u0275elementStart"](21,"div",8),core["\u0275\u0275text"](22,"\n        "),core["\u0275\u0275elementContainerStart"](23),core["\u0275\u0275text"](24,"\n          "),core["\u0275\u0275elementStart"](25,"ds-file-download-link",9),core["\u0275\u0275text"](26,"\n            "),core["\u0275\u0275element"](27,"i",10),core["\u0275\u0275text"](28,"\n          "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](29,"\n          "),core["\u0275\u0275elementStart"](30,"button",11),core["\u0275\u0275listener"]("click",(function SubmissionSectionUploadFileComponent_ng_container_0_Template_button_click_30_listener($event){core["\u0275\u0275restoreView"](_r6);const ctx_r5=core["\u0275\u0275nextContext"]();return $event.preventDefault(),ctx_r5.editBitstreamData()})),core["\u0275\u0275pipe"](31,"translate"),core["\u0275\u0275pipe"](32,"translate"),core["\u0275\u0275text"](33,"\n            "),core["\u0275\u0275element"](34,"i",12),core["\u0275\u0275text"](35,"\n          "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](36,"\n          "),core["\u0275\u0275elementStart"](37,"button",13),core["\u0275\u0275listener"]("click",(function SubmissionSectionUploadFileComponent_ng_container_0_Template_button_click_37_listener($event){core["\u0275\u0275restoreView"](_r6);const ctx_r7=core["\u0275\u0275nextContext"](),_r1=core["\u0275\u0275reference"](3);return $event.preventDefault(),ctx_r7.confirmDelete(_r1)})),core["\u0275\u0275pipe"](38,"translate"),core["\u0275\u0275pipe"](39,"translate"),core["\u0275\u0275pipe"](40,"async"),core["\u0275\u0275text"](41,"\n            "),core["\u0275\u0275template"](42,SubmissionSectionUploadFileComponent_ng_container_0_i_42_Template,1,0,"i",14),core["\u0275\u0275pipe"](43,"async"),core["\u0275\u0275text"](44,"\n            "),core["\u0275\u0275template"](45,SubmissionSectionUploadFileComponent_ng_container_0_i_45_Template,1,0,"i",15),core["\u0275\u0275pipe"](46,"async"),core["\u0275\u0275text"](47,"\n          "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](48,"\n        "),core["\u0275\u0275elementContainerEnd"](),core["\u0275\u0275text"](49,"\n      "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](50,"\n      "),core["\u0275\u0275element"](51,"div",16),core["\u0275\u0275text"](52,"\n      "),core["\u0275\u0275element"](53,"ds-submission-section-upload-file-view",17),core["\u0275\u0275text"](54,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](55,"\n  "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](56,"\n"),core["\u0275\u0275elementContainerEnd"]()}if(2&rf){const ctx_r0=core["\u0275\u0275nextContext"]();core["\u0275\u0275advance"](7),core["\u0275\u0275property"]("thumbnail",null==ctx_r0.fileData?null:ctx_r0.fileData.thumbnail),core["\u0275\u0275advance"](8),core["\u0275\u0275textInterpolate1"]("",ctx_r0.fileName," "),core["\u0275\u0275advance"](2),core["\u0275\u0275textInterpolate1"]("(",core["\u0275\u0275pipeBind1"](18,15,null==ctx_r0.fileData?null:ctx_r0.fileData.sizeBytes),")"),core["\u0275\u0275advance"](8),core["\u0275\u0275property"]("cssClasses","btn btn-link-focus")("isBlank",!0)("bitstream",ctx_r0.getBitstream())("enableRequestACopy",!1),core["\u0275\u0275advance"](5),core["\u0275\u0275propertyInterpolate"]("title",core["\u0275\u0275pipeBind1"](32,19,"submission.sections.upload.edit.title")),core["\u0275\u0275attribute"]("aria-label",core["\u0275\u0275pipeBind1"](31,17,"submission.sections.upload.edit.title")),core["\u0275\u0275advance"](7),core["\u0275\u0275propertyInterpolate"]("title",core["\u0275\u0275pipeBind1"](39,23,"submission.sections.upload.delete.confirm.title")),core["\u0275\u0275property"]("disabled",core["\u0275\u0275pipeBind1"](40,25,ctx_r0.processingDelete$)),core["\u0275\u0275attribute"]("aria-label",core["\u0275\u0275pipeBind1"](38,21,"submission.sections.upload.delete.confirm.title")),core["\u0275\u0275advance"](5),core["\u0275\u0275property"]("ngIf",core["\u0275\u0275pipeBind1"](43,27,ctx_r0.processingDelete$)),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("ngIf",!core["\u0275\u0275pipeBind1"](46,29,ctx_r0.processingDelete$)),core["\u0275\u0275advance"](8),core["\u0275\u0275property"]("fileData",ctx_r0.fileData)}}function SubmissionSectionUploadFileComponent_ng_template_2_Template(rf,ctx){1&rf&&(core["\u0275\u0275text"](0,"\n  "),core["\u0275\u0275elementStart"](1,"div",20),core["\u0275\u0275text"](2,"\n    "),core["\u0275\u0275elementStart"](3,"h4",21),core["\u0275\u0275text"](4),core["\u0275\u0275pipe"](5,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](6,"\n    "),core["\u0275\u0275elementStart"](7,"button",22),core["\u0275\u0275listener"]("click",(function SubmissionSectionUploadFileComponent_ng_template_2_Template_button_click_7_listener(){return(0,ctx.dismiss)("cancel")})),core["\u0275\u0275text"](8,"\n      "),core["\u0275\u0275elementStart"](9,"span",23),core["\u0275\u0275text"](10,"\xd7"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](11,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](12,"\n  "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](13,"\n  "),core["\u0275\u0275elementStart"](14,"div",24),core["\u0275\u0275text"](15,"\n    "),core["\u0275\u0275elementStart"](16,"p"),core["\u0275\u0275text"](17),core["\u0275\u0275pipe"](18,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](19,"\n  "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](20,"\n  "),core["\u0275\u0275elementStart"](21,"div",25),core["\u0275\u0275text"](22,"\n    "),core["\u0275\u0275elementStart"](23,"button",26),core["\u0275\u0275listener"]("click",(function SubmissionSectionUploadFileComponent_ng_template_2_Template_button_click_23_listener(){return(0,ctx.close)("cancel")})),core["\u0275\u0275text"](24),core["\u0275\u0275pipe"](25,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](26,"\n    "),core["\u0275\u0275elementStart"](27,"button",27),core["\u0275\u0275listener"]("click",(function SubmissionSectionUploadFileComponent_ng_template_2_Template_button_click_27_listener(){return(0,ctx.close)("ok")})),core["\u0275\u0275text"](28),core["\u0275\u0275pipe"](29,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](30,"\n  "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](31,"\n")),2&rf&&(core["\u0275\u0275advance"](4),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](5,4,"submission.sections.upload.delete.confirm.title")),core["\u0275\u0275advance"](13),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](18,6,"submission.sections.upload.delete.confirm.info")),core["\u0275\u0275advance"](7),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](25,8,"submission.sections.upload.delete.confirm.cancel")),core["\u0275\u0275advance"](4),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](29,10,"submission.sections.upload.delete.confirm.submit")))}class section_upload_file_component_SubmissionSectionUploadFileComponent{constructor(cdr,formService,halService,modalService,operationsBuilder,operationsService,submissionService,uploadService){this.cdr=cdr,this.formService=formService,this.halService=halService,this.modalService=modalService,this.operationsBuilder=operationsBuilder,this.operationsService=operationsService,this.submissionService=submissionService,this.uploadService=uploadService,this.processingDelete$=new BehaviorSubject.a(!1),this.subscriptions=[],this.formMetadata=[],this.readMode=!0}ngOnChanges(){this.availableAccessConditionOptions&&this.subscriptions.push(this.uploadService.getFileData(this.submissionId,this.sectionId,this.fileId).pipe(Object(filter.a)((bitstream=>Object(empty_util.h)(bitstream)))).subscribe((bitstream=>{this.fileData=bitstream})))}ngOnInit(){this.formId=this.formService.getUniqueId(this.fileId),this.pathCombiner=new json_patch_operation_path_combiner.a("sections",this.sectionId,"files",this.fileIndex),this.loadFormMetadata()}confirmDelete(content){this.modalService.open(content).result.then((result=>{"ok"===result&&(this.processingDelete$.next(!0),this.deleteFile())}))}getBitstream(){return Object.assign(new bitstream_model.a,{uuid:this.fileData.uuid})}editBitstreamData(){const activeModal=this.modalService.open(section_upload_file_edit_component_SubmissionSectionUploadFileEditComponent,{size:"xl",backdrop:"static"});activeModal.componentInstance.availableAccessConditionOptions=this.availableAccessConditionOptions,activeModal.componentInstance.collectionId=this.collectionId,activeModal.componentInstance.collectionPolicyType=this.collectionPolicyType,activeModal.componentInstance.configMetadataForm=this.configMetadataForm,activeModal.componentInstance.fileData=this.fileData,activeModal.componentInstance.fileId=this.fileId,activeModal.componentInstance.fileIndex=this.fileIndex,activeModal.componentInstance.formId=this.formId,activeModal.componentInstance.sectionId=this.sectionId,activeModal.componentInstance.formMetadata=this.formMetadata,activeModal.componentInstance.pathCombiner=this.pathCombiner,activeModal.componentInstance.submissionId=this.submissionId}ngOnDestroy(){this.unsubscribeAll()}unsubscribeAll(){this.subscriptions.filter((sub=>Object(empty_util.b)(sub))).forEach((sub=>sub.unsubscribe()))}loadFormMetadata(){this.configMetadataForm.rows.forEach((row=>{row.fields.forEach((field=>{field.selectableMetadata.forEach((metadatum=>{this.formMetadata.push(metadatum.metadata)}))}))}))}deleteFile(){this.operationsBuilder.remove(this.pathCombiner.getPath()),this.subscriptions.push(this.operationsService.jsonPatchByResourceID(this.submissionService.getSubmissionObjectLinkName(),this.submissionId,this.pathCombiner.rootElement,this.pathCombiner.subRootElement).subscribe((()=>{this.uploadService.removeUploadedFile(this.submissionId,this.sectionId,this.fileId),this.processingDelete$.next(!1)})))}}section_upload_file_component_SubmissionSectionUploadFileComponent.\u0275fac=function SubmissionSectionUploadFileComponent_Factory(t){return new(t||section_upload_file_component_SubmissionSectionUploadFileComponent)(core["\u0275\u0275directiveInject"](core.ChangeDetectorRef),core["\u0275\u0275directiveInject"](form_service.a),core["\u0275\u0275directiveInject"](hal_endpoint_service.a),core["\u0275\u0275directiveInject"](ng_bootstrap.q),core["\u0275\u0275directiveInject"](json_patch_operations_builder.a),core["\u0275\u0275directiveInject"](submission_json_patch_operations_service.a),core["\u0275\u0275directiveInject"](submission_service.a),core["\u0275\u0275directiveInject"](section_upload_service_SectionUploadService))},section_upload_file_component_SubmissionSectionUploadFileComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:section_upload_file_component_SubmissionSectionUploadFileComponent,selectors:[["ds-submission-upload-section-file"]],viewQuery:function SubmissionSectionUploadFileComponent_Query(rf,ctx){if(1&rf&&core["\u0275\u0275viewQuery"](section_upload_file_edit_component_SubmissionSectionUploadFileEditComponent,1),2&rf){let _t;core["\u0275\u0275queryRefresh"](_t=core["\u0275\u0275loadQuery"]())&&(ctx.fileEditComp=_t.first)}},inputs:{availableAccessConditionOptions:"availableAccessConditionOptions",collectionId:"collectionId",collectionPolicyType:"collectionPolicyType",configMetadataForm:"configMetadataForm",fileId:"fileId",fileIndex:"fileIndex",fileName:"fileName",sectionId:"sectionId",submissionId:"submissionId"},features:[core["\u0275\u0275NgOnChangesFeature"]],decls:5,vars:1,consts:[[4,"ngIf"],["content",""],[1,"row"],[1,"col-md-2"],[3,"thumbnail"],[1,"col-md-10"],[1,"float-left","w-75"],[1,"text-muted"],[1,"float-right","w-15"],[3,"cssClasses","isBlank","bitstream","enableRequestACopy"],["aria-hidden","true",1,"fa","fa-download","fa-2x","text-normal"],[1,"btn","btn-link-focus",3,"title","click"],[1,"fa","fa-edit","fa-2x","text-normal"],[1,"btn","btn-link-focus",3,"title","disabled","click"],["class","fas fa-circle-notch fa-spin fa-2x text-danger",4,"ngIf"],["class","fa fa-trash fa-2x text-danger",4,"ngIf"],[1,"clearfix"],[3,"fileData"],[1,"fas","fa-circle-notch","fa-spin","fa-2x","text-danger"],[1,"fa","fa-trash","fa-2x","text-danger"],[1,"modal-header"],[1,"modal-title","text-danger"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-danger",3,"click"]],template:function SubmissionSectionUploadFileComponent_Template(rf,ctx){1&rf&&(core["\u0275\u0275template"](0,SubmissionSectionUploadFileComponent_ng_container_0_Template,57,31,"ng-container",0),core["\u0275\u0275text"](1,"\n\n"),core["\u0275\u0275template"](2,SubmissionSectionUploadFileComponent_ng_template_2_Template,32,12,"ng-template",null,1,core["\u0275\u0275templateRefExtractor"]),core["\u0275\u0275text"](4,"\n")),2&rf&&core["\u0275\u0275property"]("ngIf",ctx.fileData)},directives:[common.NgIf,thumbnail_component.a,file_download_link_component.a,section_upload_file_view_component_SubmissionSectionUploadFileViewComponent],pipes:[file_size_pipe.a,ngx_translate_core.d,common.AsyncPipe],styles:[""]});var submission_submit_component=__webpack_require__("THnG"),app_reducer=__webpack_require__("a318"),submission_import_external_component=__webpack_require__("RMpN"),submission_import_external_searchbar_component=__webpack_require__("3cpT"),submission_import_external_preview_component=__webpack_require__("20cJ"),submission_import_external_collection_component=__webpack_require__("6c/T"),submission_cc_license_data_service=__webpack_require__("8U9A"),submission_cc_license_url_data_service=__webpack_require__("UXhX"),ds_select_component=__webpack_require__("8aB6"),var_directive=__webpack_require__("O/5o");function SubmissionSectionCcLicensesComponent_span_6_Template(rf,ctx){1&rf&&(core["\u0275\u0275elementStart"](0,"span"),core["\u0275\u0275text"](1,"\n        "),core["\u0275\u0275element"](2,"ds-loading"),core["\u0275\u0275text"](3,"\n      "),core["\u0275\u0275elementEnd"]())}function SubmissionSectionCcLicensesComponent_span_8_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"span"),core["\u0275\u0275text"](1),core["\u0275\u0275elementEnd"]()),2&rf){const ctx_r1=core["\u0275\u0275nextContext"]();core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate1"]("\n        ",ctx_r1.getSelectedCcLicense().name,"\n      ")}}function SubmissionSectionCcLicensesComponent_span_10_ng_container_2_Template(rf,ctx){1&rf&&(core["\u0275\u0275elementContainerStart"](0),core["\u0275\u0275text"](1),core["\u0275\u0275pipe"](2,"translate"),core["\u0275\u0275elementContainerEnd"]()),2&rf&&(core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate1"]("\n          ",core["\u0275\u0275pipeBind1"](2,1,"submission.sections.ccLicense.change"),"\n        "))}function SubmissionSectionCcLicensesComponent_span_10_ng_container_4_Template(rf,ctx){1&rf&&(core["\u0275\u0275elementContainerStart"](0),core["\u0275\u0275text"](1),core["\u0275\u0275pipe"](2,"translate"),core["\u0275\u0275elementContainerEnd"]()),2&rf&&(core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate1"]("\n          ",core["\u0275\u0275pipeBind1"](2,1,"submission.sections.ccLicense.select"),"\n        "))}function SubmissionSectionCcLicensesComponent_span_10_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"span"),core["\u0275\u0275text"](1,"\n        "),core["\u0275\u0275template"](2,SubmissionSectionCcLicensesComponent_span_10_ng_container_2_Template,3,3,"ng-container",3),core["\u0275\u0275text"](3,"\n        "),core["\u0275\u0275template"](4,SubmissionSectionCcLicensesComponent_span_10_ng_container_4_Template,3,3,"ng-container",3),core["\u0275\u0275text"](5,"\n      "),core["\u0275\u0275elementEnd"]()),2&rf){const ctx_r2=core["\u0275\u0275nextContext"]();core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",ctx_r2.storedCcLicenseLink),core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",!ctx_r2.storedCcLicenseLink)}}function SubmissionSectionCcLicensesComponent_button_15_Template(rf,ctx){1&rf&&(core["\u0275\u0275elementStart"](0,"button",7),core["\u0275\u0275text"](1),core["\u0275\u0275pipe"](2,"translate"),core["\u0275\u0275elementEnd"]()),2&rf&&(core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate1"]("\n        ",core["\u0275\u0275pipeBind1"](2,1,"submission.sections.ccLicense.none"),"\n      "))}function SubmissionSectionCcLicensesComponent_button_17_Template(rf,ctx){if(1&rf){const _r11=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementStart"](0,"button",8),core["\u0275\u0275listener"]("click",(function SubmissionSectionCcLicensesComponent_button_17_Template_button_click_0_listener(){core["\u0275\u0275restoreView"](_r11);const license_r9=ctx.$implicit;return core["\u0275\u0275nextContext"]().selectCcLicense(license_r9)})),core["\u0275\u0275text"](1),core["\u0275\u0275elementEnd"]()}if(2&rf){const license_r9=ctx.$implicit;core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate1"]("\n        ",license_r9.name,"\n      ")}}function SubmissionSectionCcLicensesComponent_ng_container_22_div_2_ng_template_13_div_22_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"div",10),core["\u0275\u0275text"](1,"\n            "),core["\u0275\u0275elementStart"](2,"h5"),core["\u0275\u0275text"](3),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](4,"\n            "),core["\u0275\u0275element"](5,"div",20),core["\u0275\u0275text"](6,"\n          "),core["\u0275\u0275elementEnd"]()),2&rf){const value_r19=ctx.$implicit;core["\u0275\u0275advance"](3),core["\u0275\u0275textInterpolate1"]("\n              ",value_r19.label,"\n            "),core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("innerHTML",value_r19.description,core["\u0275\u0275sanitizeHtml"])}}function SubmissionSectionCcLicensesComponent_ng_container_22_div_2_ng_template_13_Template(rf,ctx){if(1&rf){const _r21=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275text"](0,"\n\n      "),core["\u0275\u0275elementStart"](1,"div"),core["\u0275\u0275text"](2,"\n\n        "),core["\u0275\u0275elementStart"](3,"div",15),core["\u0275\u0275text"](4,"\n          "),core["\u0275\u0275elementStart"](5,"div"),core["\u0275\u0275text"](6,"\n            "),core["\u0275\u0275elementStart"](7,"h4"),core["\u0275\u0275text"](8),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](9,"\n            "),core["\u0275\u0275element"](10,"div",16),core["\u0275\u0275text"](11,"\n          "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](12,"\n          "),core["\u0275\u0275elementStart"](13,"button",17),core["\u0275\u0275listener"]("click",(function SubmissionSectionCcLicensesComponent_ng_container_22_div_2_ng_template_13_Template_button_click_13_listener(){core["\u0275\u0275restoreView"](_r21);return core["\u0275\u0275nextContext"](3).closeInfoModal()})),core["\u0275\u0275text"](14,"\n            "),core["\u0275\u0275elementStart"](15,"span",18),core["\u0275\u0275text"](16,"\xd7"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](17,"\n          "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](18,"\n        "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](19,"\n\n        "),core["\u0275\u0275elementStart"](20,"div",19),core["\u0275\u0275text"](21,"\n          "),core["\u0275\u0275template"](22,SubmissionSectionCcLicensesComponent_ng_container_22_div_2_ng_template_13_div_22_Template,7,2,"div",9),core["\u0275\u0275text"](23,"\n        "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](24,"\n\n      "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](25,"\n\n    ")}if(2&rf){const field_r13=core["\u0275\u0275nextContext"]().$implicit;core["\u0275\u0275advance"](8),core["\u0275\u0275textInterpolate1"]("\n              ",field_r13.label,"\n            "),core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("innerHTML",field_r13.description,core["\u0275\u0275sanitizeHtml"]),core["\u0275\u0275advance"](12),core["\u0275\u0275property"]("ngForOf",field_r13.enums)}}function SubmissionSectionCcLicensesComponent_ng_container_22_div_2_ds_select_16_ng_container_2_span_2_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"span"),core["\u0275\u0275text"](1),core["\u0275\u0275elementEnd"]()),2&rf){const option_r25=core["\u0275\u0275nextContext"]().ngVar;core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate1"]("\n          ",option_r25.label,"\n        ")}}function SubmissionSectionCcLicensesComponent_ng_container_22_div_2_ds_select_16_ng_container_2_span_4_Template(rf,ctx){1&rf&&(core["\u0275\u0275elementStart"](0,"span"),core["\u0275\u0275text"](1),core["\u0275\u0275pipe"](2,"translate"),core["\u0275\u0275elementEnd"]()),2&rf&&(core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate1"]("\n          ",core["\u0275\u0275pipeBind1"](2,1,"submission.sections.ccLicense.option.select"),"\n        "))}function SubmissionSectionCcLicensesComponent_ng_container_22_div_2_ds_select_16_ng_container_2_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementContainerStart"](0,2),core["\u0275\u0275text"](1,"\n        "),core["\u0275\u0275template"](2,SubmissionSectionCcLicensesComponent_ng_container_22_div_2_ds_select_16_ng_container_2_span_2_Template,2,1,"span",3),core["\u0275\u0275text"](3,"\n        "),core["\u0275\u0275template"](4,SubmissionSectionCcLicensesComponent_ng_container_22_div_2_ds_select_16_ng_container_2_span_4_Template,3,3,"span",3),core["\u0275\u0275text"](5,"\n      "),core["\u0275\u0275elementContainerEnd"]()),2&rf){const option_r25=ctx.ngVar;core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",option_r25),core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",!option_r25)}}function SubmissionSectionCcLicensesComponent_ng_container_22_div_2_ds_select_16_button_8_Template(rf,ctx){if(1&rf){const _r31=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementStart"](0,"button",8),core["\u0275\u0275listener"]("click",(function SubmissionSectionCcLicensesComponent_ng_container_22_div_2_ds_select_16_button_8_Template_button_click_0_listener(){core["\u0275\u0275restoreView"](_r31);const option_r29=ctx.$implicit,field_r13=core["\u0275\u0275nextContext"](2).$implicit,ctx_r30=core["\u0275\u0275nextContext"](2);return ctx_r30.selectOption(ctx_r30.getSelectedCcLicense(),field_r13,option_r29)})),core["\u0275\u0275text"](1),core["\u0275\u0275elementEnd"]()}if(2&rf){const option_r29=ctx.$implicit;core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate1"]("\n            ",option_r29.label,"\n          ")}}function SubmissionSectionCcLicensesComponent_ng_container_22_div_2_ds_select_16_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"ds-select"),core["\u0275\u0275text"](1,"\n      "),core["\u0275\u0275template"](2,SubmissionSectionCcLicensesComponent_ng_container_22_div_2_ds_select_16_ng_container_2_Template,6,2,"ng-container",21),core["\u0275\u0275text"](3,"\n      "),core["\u0275\u0275elementContainerStart"](4,4),core["\u0275\u0275text"](5,"\n        "),core["\u0275\u0275elementStart"](6,"div",22),core["\u0275\u0275text"](7,"\n          "),core["\u0275\u0275template"](8,SubmissionSectionCcLicensesComponent_ng_container_22_div_2_ds_select_16_button_8_Template,2,1,"button",6),core["\u0275\u0275text"](9,"\n        "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](10,"\n      "),core["\u0275\u0275elementContainerEnd"](),core["\u0275\u0275text"](11,"\n    "),core["\u0275\u0275elementEnd"]()),2&rf){const field_r13=core["\u0275\u0275nextContext"]().$implicit,ctx_r16=core["\u0275\u0275nextContext"](2);core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngVar",ctx_r16.getSelectedOption(ctx_r16.getSelectedCcLicense(),field_r13)),core["\u0275\u0275advance"](6),core["\u0275\u0275property"]("ngForOf",field_r13.enums)}}function SubmissionSectionCcLicensesComponent_ng_container_22_div_2_ng_container_18_div_2_Template(rf,ctx){if(1&rf){const _r37=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementStart"](0,"div",24),core["\u0275\u0275text"](1,"\n        "),core["\u0275\u0275elementStart"](2,"div",25),core["\u0275\u0275listener"]("click",(function SubmissionSectionCcLicensesComponent_ng_container_22_div_2_ng_container_18_div_2_Template_div_click_2_listener(){core["\u0275\u0275restoreView"](_r37);const option_r35=ctx.$implicit,field_r13=core["\u0275\u0275nextContext"](2).$implicit,ctx_r36=core["\u0275\u0275nextContext"](2);return ctx_r36.selectOption(ctx_r36.getSelectedCcLicense(),field_r13,option_r35)})),core["\u0275\u0275text"](3,"\n          "),core["\u0275\u0275element"](4,"input",26),core["\u0275\u0275text"](5,"\n          "),core["\u0275\u0275elementStart"](6,"span"),core["\u0275\u0275text"](7),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](8,"\n        "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](9,"\n      "),core["\u0275\u0275elementEnd"]()}if(2&rf){const option_r35=ctx.$implicit,field_r13=core["\u0275\u0275nextContext"](2).$implicit,ctx_r34=core["\u0275\u0275nextContext"](2);core["\u0275\u0275advance"](4),core["\u0275\u0275propertyInterpolate"]("title",option_r35.label),core["\u0275\u0275property"]("checked",ctx_r34.isSelectedOption(ctx_r34.getSelectedCcLicense(),field_r13,option_r35)),core["\u0275\u0275advance"](3),core["\u0275\u0275textInterpolate"](option_r35.label)}}function SubmissionSectionCcLicensesComponent_ng_container_22_div_2_ng_container_18_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementContainerStart"](0),core["\u0275\u0275text"](1,"\n      "),core["\u0275\u0275template"](2,SubmissionSectionCcLicensesComponent_ng_container_22_div_2_ng_container_18_div_2_Template,10,3,"div",23),core["\u0275\u0275text"](3,"\n    "),core["\u0275\u0275elementContainerEnd"]()),2&rf){const field_r13=core["\u0275\u0275nextContext"]().$implicit;core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngForOf",field_r13.enums)}}function SubmissionSectionCcLicensesComponent_ng_container_22_div_2_Template(rf,ctx){if(1&rf){const _r42=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementStart"](0,"div",10),core["\u0275\u0275text"](1,"\n\n    "),core["\u0275\u0275elementStart"](2,"div",11),core["\u0275\u0275text"](3,"\n      "),core["\u0275\u0275elementStart"](4,"div"),core["\u0275\u0275text"](5),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](6,"\n      "),core["\u0275\u0275elementStart"](7,"button",12),core["\u0275\u0275listener"]("click",(function SubmissionSectionCcLicensesComponent_ng_container_22_div_2_Template_button_click_7_listener(){core["\u0275\u0275restoreView"](_r42);const _r14=core["\u0275\u0275reference"](14);return core["\u0275\u0275nextContext"](2).openInfoModal(_r14)})),core["\u0275\u0275text"](8,"\n        "),core["\u0275\u0275element"](9,"i",13),core["\u0275\u0275text"](10,"\n      "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](11,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](12,"\n\n    "),core["\u0275\u0275template"](13,SubmissionSectionCcLicensesComponent_ng_container_22_div_2_ng_template_13_Template,26,3,"ng-template",null,14,core["\u0275\u0275templateRefExtractor"]),core["\u0275\u0275text"](15,"\n\n    "),core["\u0275\u0275template"](16,SubmissionSectionCcLicensesComponent_ng_container_22_div_2_ds_select_16_Template,12,2,"ds-select",3),core["\u0275\u0275text"](17,"\n\n    "),core["\u0275\u0275template"](18,SubmissionSectionCcLicensesComponent_ng_container_22_div_2_ng_container_18_Template,4,1,"ng-container",3),core["\u0275\u0275text"](19,"\n\n  "),core["\u0275\u0275elementEnd"]()}if(2&rf){const field_r13=ctx.$implicit;core["\u0275\u0275advance"](4),core["\u0275\u0275classMapInterpolate1"]("font-weight-bold ",field_r13.id,""),core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate1"]("\n        ",field_r13.label,"\n      "),core["\u0275\u0275advance"](11),core["\u0275\u0275property"]("ngIf",(null==field_r13.enums?null:field_r13.enums.length)>5),core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",(null==field_r13.enums?null:field_r13.enums.length)<=5)}}function SubmissionSectionCcLicensesComponent_ng_container_22_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementContainerStart"](0),core["\u0275\u0275text"](1,"\n\n  "),core["\u0275\u0275template"](2,SubmissionSectionCcLicensesComponent_ng_container_22_div_2_Template,20,6,"div",9),core["\u0275\u0275text"](3,"\n\n"),core["\u0275\u0275elementContainerEnd"]()),2&rf){const ctx_r5=core["\u0275\u0275nextContext"]();core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngForOf",ctx_r5.getSelectedCcLicense().fields)}}function SubmissionSectionCcLicensesComponent_ng_container_24_ng_container_2_div_2_Template(rf,ctx){1&rf&&(core["\u0275\u0275elementStart"](0,"div"),core["\u0275\u0275text"](1,"\n      "),core["\u0275\u0275element"](2,"ds-loading"),core["\u0275\u0275text"](3,"\n    "),core["\u0275\u0275elementEnd"]())}function SubmissionSectionCcLicensesComponent_ng_container_24_ng_container_2_div_4_Template(rf,ctx){if(1&rf){const _r48=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementStart"](0,"div",29),core["\u0275\u0275text"](1,"\n      "),core["\u0275\u0275elementStart"](2,"div"),core["\u0275\u0275text"](3),core["\u0275\u0275pipe"](4,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](5,"\n      "),core["\u0275\u0275elementStart"](6,"a",30),core["\u0275\u0275text"](7),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](8,"\n      "),core["\u0275\u0275elementStart"](9,"div",31),core["\u0275\u0275text"](10,"\n        "),core["\u0275\u0275elementStart"](11,"div",25),core["\u0275\u0275listener"]("click",(function SubmissionSectionCcLicensesComponent_ng_container_24_ng_container_2_div_4_Template_div_click_11_listener(){core["\u0275\u0275restoreView"](_r48);const ctx_r47=core["\u0275\u0275nextContext"](3);return ctx_r47.setAccepted(!ctx_r47.accepted)})),core["\u0275\u0275text"](12,"\n          "),core["\u0275\u0275element"](13,"input",32),core["\u0275\u0275text"](14,"\n          "),core["\u0275\u0275elementStart"](15,"span"),core["\u0275\u0275text"](16),core["\u0275\u0275pipe"](17,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](18,"\n        "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](19,"\n      "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](20,"\n    "),core["\u0275\u0275elementEnd"]()}if(2&rf){const licenseLink_r44=core["\u0275\u0275nextContext"]().ngVar,ctx_r46=core["\u0275\u0275nextContext"](2);core["\u0275\u0275advance"](3),core["\u0275\u0275textInterpolate1"]("\n        ",core["\u0275\u0275pipeBind1"](4,5,"submission.sections.ccLicense.link"),"\n      "),core["\u0275\u0275advance"](3),core["\u0275\u0275propertyInterpolate"]("href",licenseLink_r44,core["\u0275\u0275sanitizeUrl"]),core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate1"]("\n        ",licenseLink_r44,"\n      "),core["\u0275\u0275advance"](6),core["\u0275\u0275property"]("checked",ctx_r46.accepted),core["\u0275\u0275advance"](3),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](17,7,"submission.sections.ccLicense.confirmation"))}}function SubmissionSectionCcLicensesComponent_ng_container_24_ng_container_2_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementContainerStart"](0),core["\u0275\u0275text"](1,"\n    "),core["\u0275\u0275template"](2,SubmissionSectionCcLicensesComponent_ng_container_24_ng_container_2_div_2_Template,4,0,"div",3),core["\u0275\u0275text"](3,"\n    "),core["\u0275\u0275template"](4,SubmissionSectionCcLicensesComponent_ng_container_24_ng_container_2_div_4_Template,21,9,"div",28),core["\u0275\u0275text"](5,"\n  "),core["\u0275\u0275elementContainerEnd"]()),2&rf){const licenseLink_r44=ctx.ngVar;core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",!licenseLink_r44),core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",licenseLink_r44)}}function SubmissionSectionCcLicensesComponent_ng_container_24_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementContainerStart"](0),core["\u0275\u0275text"](1,"\n  "),core["\u0275\u0275template"](2,SubmissionSectionCcLicensesComponent_ng_container_24_ng_container_2_Template,6,2,"ng-container",27),core["\u0275\u0275pipe"](3,"async"),core["\u0275\u0275text"](4,"\n"),core["\u0275\u0275elementContainerEnd"]()),2&rf){const ctx_r6=core["\u0275\u0275nextContext"]();core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngVar",core["\u0275\u0275pipeBind1"](3,1,ctx_r6.getCcLicenseLink$()))}}let submission_section_cc_licenses_component_SubmissionSectionCcLicensesComponent=class extends section_model_SectionModelComponent{constructor(modalService,sectionService,submissionCcLicensesDataService,submissionCcLicenseUrlDataService,operationsBuilder,injectedCollectionId,injectedSectionData,injectedSubmissionId){super(injectedCollectionId,injectedSectionData,injectedSubmissionId),this.modalService=modalService,this.sectionService=sectionService,this.submissionCcLicensesDataService=submissionCcLicensesDataService,this.submissionCcLicenseUrlDataService=submissionCcLicenseUrlDataService,this.operationsBuilder=operationsBuilder,this.injectedCollectionId=injectedCollectionId,this.injectedSectionData=injectedSectionData,this.injectedSubmissionId=injectedSubmissionId,this.isLoading=!0,this.subscriptions=[]}get storedCcLicenseLink(){return this.data.uri}get accepted(){return void 0===this.data.accepted?!!this.data.uri:this.data.accepted}get data(){return this.sectionData.data}selectCcLicense(ccLicense){this.getSelectedCcLicense()&&this.getSelectedCcLicense().id===ccLicense.id||(this.setAccepted(!1),this.updateSectionData({ccLicense:{id:ccLicense.id,fields:{}},uri:void 0}))}getSelectedCcLicense(){return this.submissionCcLicenses&&this.data.ccLicense?this.submissionCcLicenses.filter((ccLicense=>ccLicense.id===this.data.ccLicense.id))[0]:null}selectOption(ccLicense,field,option){this.isSelectedOption(ccLicense,field,option)||this.updateSectionData({ccLicense:{id:ccLicense.id,fields:Object.assign({},this.data.ccLicense.fields,{[field.id]:option})},accepted:!1})}getSelectedOption(ccLicense,field){return this.data.ccLicense.fields[field.id]}isSelectedOption(ccLicense,field,option){return this.getSelectedOption(ccLicense,field)&&this.getSelectedOption(ccLicense,field).id===option.id}getCcLicenseLink$(){if(this.storedCcLicenseLink)return Object(of.a)(this.storedCcLicenseLink);if(!this.getSelectedCcLicense()||this.getSelectedCcLicense().fields.some((field=>!this.getSelectedOption(this.getSelectedCcLicense(),field))))return;const selectedCcLicense=this.getSelectedCcLicense();return this.submissionCcLicenseUrlDataService.getCcLicenseLink(selectedCcLicense,new Map(selectedCcLicense.fields.map((field=>[field,this.getSelectedOption(selectedCcLicense,field)]))))}openInfoModal(content){this.modalRef=this.modalService.open(content)}closeInfoModal(){this.modalRef.close()}getSectionStatus(){return Object(of.a)(this.accepted)}onSectionDestroy(){this.subscriptions.forEach((subscription=>subscription.unsubscribe()))}onSectionInit(){this.pathCombiner=new json_patch_operation_path_combiner.a("sections",this.sectionData.id),this.subscriptions.push(this.sectionService.getSectionState(this.submissionId,this.sectionData.id,sections_type.a.CcLicense).pipe(Object(filter.a)((sectionState=>Object(empty_util.e)(sectionState)&&(Object(empty_util.e)(sectionState.data)||Object(empty_util.e)(sectionState.errorsToShow)))),Object(distinctUntilChanged.a)(),Object(map.a)((sectionState=>sectionState.data))).subscribe((data=>{if(this.data.accepted!==data.accepted){const path=this.pathCombiner.getPath("uri");data.accepted?this.getCcLicenseLink$().pipe(Object(take.a)(1)).subscribe((link=>{this.operationsBuilder.add(path,link.toString(),!1,!0)})):this.data.uri&&this.operationsBuilder.remove(path)}this.sectionData.data=data})),this.submissionCcLicensesDataService.findAll({elementsPerPage:9999}).pipe(Object(operators.i)(),Object(operators.o)(),Object(map.a)((list=>list.page))).subscribe((licenses=>this.submissionCcLicenses=licenses)))}setAccepted(accepted){this.updateSectionData({accepted:accepted}),this.updateSectionStatus()}updateSectionData(data){this.sectionService.updateSectionData(this.submissionId,this.sectionData.id,Object.assign({},this.data,data))}};submission_section_cc_licenses_component_SubmissionSectionCcLicensesComponent.\u0275fac=function SubmissionSectionCcLicensesComponent_Factory(t){return new(t||submission_section_cc_licenses_component_SubmissionSectionCcLicensesComponent)(core["\u0275\u0275directiveInject"](ng_bootstrap.q),core["\u0275\u0275directiveInject"](sections_service.a),core["\u0275\u0275directiveInject"](submission_cc_license_data_service.a),core["\u0275\u0275directiveInject"](submission_cc_license_url_data_service.a),core["\u0275\u0275directiveInject"](json_patch_operations_builder.a),core["\u0275\u0275directiveInject"]("collectionIdProvider"),core["\u0275\u0275directiveInject"]("sectionDataProvider"),core["\u0275\u0275directiveInject"]("submissionIdProvider"))},submission_section_cc_licenses_component_SubmissionSectionCcLicensesComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:submission_section_cc_licenses_component_SubmissionSectionCcLicensesComponent,selectors:[["ds-submission-section-cc-licenses"]],features:[core["\u0275\u0275InheritDefinitionFeature"]],decls:26,vars:8,consts:[[1,"mb-4","ccLicense-select"],[3,"disabled"],[1,"selection"],[4,"ngIf"],[1,"menu"],["class","dropdown-item disabled",4,"ngIf"],["class","dropdown-item",3,"click",4,"ngFor","ngForOf"],[1,"dropdown-item","disabled"],[1,"dropdown-item",3,"click"],["class","mb-4",4,"ngFor","ngForOf"],[1,"mb-4"],[1,"d-flex","flex-row"],[1,"btn","btn-outline-info","btn-sm","ml-2",3,"click"],[1,"fas","fa-question"],["infoModal",""],[1,"modal-header","mb-4"],[3,"innerHTML"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"font-weight-light",3,"innerHTML"],["class","selection",4,"ngVar"],[1,"options-select-menu","overflow-auto"],["class","d-flex flex-row m-1",4,"ngFor","ngForOf"],[1,"d-flex","flex-row","m-1"],[3,"click"],["type","radio",1,"mr-1",3,"title","checked"],[4,"ngVar"],["class","mt-2 p-4 bg-light text-dark",4,"ngIf"],[1,"mt-2","p-4","bg-light","text-dark"],["target","_blank","rel","noopener noreferrer",1,"license-link",3,"href"],[1,"m-2"],["type","checkbox","title","accepted",3,"checked"]],template:function SubmissionSectionCcLicensesComponent_Template(rf,ctx){1&rf&&(core["\u0275\u0275elementStart"](0,"div",0),core["\u0275\u0275text"](1,"\n  "),core["\u0275\u0275elementStart"](2,"ds-select",1),core["\u0275\u0275text"](3,"\n\n    "),core["\u0275\u0275elementContainerStart"](4,2),core["\u0275\u0275text"](5,"\n      "),core["\u0275\u0275template"](6,SubmissionSectionCcLicensesComponent_span_6_Template,4,0,"span",3),core["\u0275\u0275text"](7,"\n      "),core["\u0275\u0275template"](8,SubmissionSectionCcLicensesComponent_span_8_Template,2,1,"span",3),core["\u0275\u0275text"](9,"\n      "),core["\u0275\u0275template"](10,SubmissionSectionCcLicensesComponent_span_10_Template,6,2,"span",3),core["\u0275\u0275text"](11,"\n    "),core["\u0275\u0275elementContainerEnd"](),core["\u0275\u0275text"](12,"\n\n    "),core["\u0275\u0275elementContainerStart"](13,4),core["\u0275\u0275text"](14,"\n      "),core["\u0275\u0275template"](15,SubmissionSectionCcLicensesComponent_button_15_Template,3,3,"button",5),core["\u0275\u0275text"](16,"\n      "),core["\u0275\u0275template"](17,SubmissionSectionCcLicensesComponent_button_17_Template,2,1,"button",6),core["\u0275\u0275text"](18,"\n    "),core["\u0275\u0275elementContainerEnd"](),core["\u0275\u0275text"](19,"\n\n  "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](20,"\n"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](21,"\n\n"),core["\u0275\u0275template"](22,SubmissionSectionCcLicensesComponent_ng_container_22_Template,4,1,"ng-container",3),core["\u0275\u0275text"](23,"\n\n"),core["\u0275\u0275template"](24,SubmissionSectionCcLicensesComponent_ng_container_24_Template,5,3,"ng-container",3),core["\u0275\u0275text"](25,"\n")),2&rf&&(core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("disabled",!ctx.submissionCcLicenses),core["\u0275\u0275advance"](4),core["\u0275\u0275property"]("ngIf",!ctx.submissionCcLicenses),core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",ctx.getSelectedCcLicense()),core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",ctx.submissionCcLicenses&&!ctx.getSelectedCcLicense()),core["\u0275\u0275advance"](5),core["\u0275\u0275property"]("ngIf",0==(null==ctx.submissionCcLicenses?null:ctx.submissionCcLicenses.length)),core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngForOf",ctx.submissionCcLicenses),core["\u0275\u0275advance"](5),core["\u0275\u0275property"]("ngIf",ctx.getSelectedCcLicense()),core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",ctx.getCcLicenseLink$()))},directives:[ds_select_component.a,common.NgIf,common.NgForOf,loading_component.a,var_directive.a],pipes:[ngx_translate_core.d,common.AsyncPipe],styles:[".options-select-menu[_ngcontent-%COMP%]{max-height:25vh}"]}),submission_section_cc_licenses_component_SubmissionSectionCcLicensesComponent=Object(tslib.__decorate)([Object(sections_decorator.a)(sections_type.a.CcLicense),Object(tslib.__metadata)("design:paramtypes",[ng_bootstrap.q,sections_service.a,submission_cc_license_data_service.a,submission_cc_license_url_data_service.a,json_patch_operations_builder.a,String,Object,String])],submission_section_cc_licenses_component_SubmissionSectionCcLicensesComponent);var journal_entities_module=__webpack_require__("N0eT"),research_entities_module=__webpack_require__("udvk"),themed_submission_edit_component=__webpack_require__("YoQ9"),themed_submission_submit_component=__webpack_require__("Ahb/"),themed_submission_import_external_component=__webpack_require__("qK5G"),form_module=__webpack_require__("kcqd");class section_accesses_service_SectionAccessesService{constructor(store){this.store=store}getAccessesData(submissionId,sectionId){return this.store.select(Object(selectors.d)(submissionId,sectionId)).pipe(Object(filter.a)((state=>Object(empty_util.h)(state))),Object(distinctUntilChanged.a)())}}section_accesses_service_SectionAccessesService.\u0275fac=function SectionAccessesService_Factory(t){return new(t||section_accesses_service_SectionAccessesService)(core["\u0275\u0275inject"](ngrx_store.i))},section_accesses_service_SectionAccessesService.\u0275prov=core["\u0275\u0275defineInjectable"]({token:section_accesses_service_SectionAccessesService,factory:section_accesses_service_SectionAccessesService.\u0275fac});const ACCESS_FORM_CHECKBOX_CONFIG={id:"discoverable",name:"discoverable"},ACCESS_FORM_CHECKBOX_LAYOUT={element:{container:"custom-control custom-checkbox pl-1",control:"custom-control-input",label:"custom-control-label pt-1"}},ACCESS_CONDITION_GROUP_CONFIG={id:"accessConditionGroup",group:[]},ACCESS_CONDITION_GROUP_LAYOUT={element:{host:"form-group access-condition-group col",container:"pl-1 pr-1",control:"form-row "}},ACCESS_CONDITIONS_FORM_ARRAY_CONFIG={id:"accessCondition",groupFactory:null},ACCESS_CONDITIONS_FORM_ARRAY_LAYOUT={grid:{group:"form-row pt-4"}},FORM_ACCESS_CONDITION_TYPE_CONFIG={id:"name",label:"submission.sections.accesses.form.access-condition-label",hint:"submission.sections.accesses.form.access-condition-hint",options:[]},FORM_ACCESS_CONDITION_TYPE_LAYOUT={element:{host:"col-12",label:"col-form-label name-label"}},FORM_ACCESS_CONDITION_START_DATE_CONFIG={id:"startDate",label:"submission.sections.accesses.form.from-label",hint:"submission.sections.accesses.form.from-hint",placeholder:"submission.sections.accesses.form.from-placeholder",inline:!1,toggleIcon:"far fa-calendar-alt",relations:[{match:fesm2015_core.Q,operator:fesm2015_core.R,when:[]}],required:!0,validators:{required:null},errorMessages:{required:"submission.sections.accesses.form.date-required-from"}},FORM_ACCESS_CONDITION_START_DATE_LAYOUT={element:{label:"col-form-label"},grid:{host:"col-6"}},FORM_ACCESS_CONDITION_END_DATE_CONFIG={id:"endDate",label:"submission.sections.accesses.form.until-label",hint:"submission.sections.accesses.form.until-hint",placeholder:"submission.sections.accesses.form.until-placeholder",inline:!1,toggleIcon:"far fa-calendar-alt",relations:[{match:fesm2015_core.Q,operator:fesm2015_core.R,when:[]}],required:!0,validators:{required:null},errorMessages:{required:"submission.sections.accesses.form.date-required-until"}},FORM_ACCESS_CONDITION_END_DATE_LAYOUT={element:{label:"col-form-label"},grid:{host:"col-6"}};let submission_accesses_config_service_SubmissionAccessesConfigService=class extends config_service.a{constructor(requestService,rdbService,store,objectCache,halService,notificationsService,http,comparator){super(requestService,rdbService,null,objectCache,halService,notificationsService,http,comparator,"submissionaccessoptions"),this.requestService=requestService,this.rdbService=rdbService,this.store=store,this.objectCache=objectCache,this.halService=halService,this.notificationsService=notificationsService,this.http=http,this.comparator=comparator}findByHref(href,useCachedVersionIfAvailable=!0,reRequestOnStale=!0,...linksToFollow){return super.findByHref(href,useCachedVersionIfAvailable,reRequestOnStale,...linksToFollow)}};submission_accesses_config_service_SubmissionAccessesConfigService.\u0275fac=function SubmissionAccessesConfigService_Factory(t){return new(t||submission_accesses_config_service_SubmissionAccessesConfigService)(core["\u0275\u0275inject"](request_service.a),core["\u0275\u0275inject"](remote_data_build_service.a),core["\u0275\u0275inject"](ngrx_store.i),core["\u0275\u0275inject"](object_cache_service.a),core["\u0275\u0275inject"](hal_endpoint_service.a),core["\u0275\u0275inject"](notifications_service.a),core["\u0275\u0275inject"](http.c),core["\u0275\u0275inject"](default_change_analyzer_service.a))},submission_accesses_config_service_SubmissionAccessesConfigService.\u0275prov=core["\u0275\u0275defineInjectable"]({token:submission_accesses_config_service_SubmissionAccessesConfigService,factory:submission_accesses_config_service_SubmissionAccessesConfigService.\u0275fac}),submission_accesses_config_service_SubmissionAccessesConfigService=Object(tslib.__decorate)([Object(build_decorators.d)(config_type.a),Object(tslib.__metadata)("design:paramtypes",[request_service.a,remote_data_build_service.a,ngrx_store.i,object_cache_service.a,hal_endpoint_service.a,notifications_service.a,http.c,default_change_analyzer_service.a])],submission_accesses_config_service_SubmissionAccessesConfigService);const section_accesses_component_c0=["formRef"];function SubmissionSectionAccessesComponent_ds_form_0_Template(rf,ctx){if(1&rf){const _r3=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementStart"](0,"ds-form",1,2),core["\u0275\u0275listener"]("dfChange",(function SubmissionSectionAccessesComponent_ds_form_0_Template_ds_form_dfChange_0_listener($event){core["\u0275\u0275restoreView"](_r3);return core["\u0275\u0275nextContext"]().onChange($event)}))("removeArrayItem",(function SubmissionSectionAccessesComponent_ds_form_0_Template_ds_form_removeArrayItem_0_listener($event){core["\u0275\u0275restoreView"](_r3);return core["\u0275\u0275nextContext"]().onRemove($event)})),core["\u0275\u0275elementEnd"]()}if(2&rf){const ctx_r0=core["\u0275\u0275nextContext"]();core["\u0275\u0275property"]("formId",ctx_r0.formId)("formModel",ctx_r0.formModel)("displaySubmit",!1)("displayCancel",!1)}}let section_accesses_component_SubmissionSectionAccessesComponent=class extends section_model_SectionModelComponent{constructor(sectionService,formBuilderService,accessesConfigService,accessesService,formOperationsService,operationsBuilder,formService,translate,operationsService,injectedSectionData,injectedSubmissionId){super(void 0,injectedSectionData,injectedSubmissionId),this.sectionService=sectionService,this.formBuilderService=formBuilderService,this.accessesConfigService=accessesConfigService,this.accessesService=accessesService,this.formOperationsService=formOperationsService,this.operationsBuilder=operationsBuilder,this.formService=formService,this.translate=translate,this.operationsService=operationsService,this.injectedSectionData=injectedSectionData,this.injectedSubmissionId=injectedSubmissionId,this.subs=[]}initModelData(formModel){this.accessesData.accessConditions.forEach(((accessCondition,index)=>{Array.of("name","startDate","endDate").filter((key=>accessCondition.hasOwnProperty(key)&&Object(empty_util.e)(accessCondition[key]))).forEach((key=>{const metadataModel=this.formBuilderService.findById(key,formModel,index);if(metadataModel)if(metadataModel.type===fesm2015_core.g){const date=new Date(accessCondition[key]);metadataModel.value={year:date.getUTCFullYear(),month:date.getUTCMonth()+1,day:date.getUTCDate()}}else metadataModel.value=accessCondition[key]}))}))}onChange(event){if(event.model.type===fesm2015_core.e){const path=this.formOperationsService.getFieldPathSegmentedFromChangeEvent(event),value=this.formOperationsService.getFieldValueFromChangeEvent(event);this.operationsBuilder.replace(this.pathCombiner.getPath(path),value.value,!0)}else{if(event.model.id===FORM_ACCESS_CONDITION_TYPE_CONFIG.id){const startDateControl=event.control.parent.get("startDate"),endDateControl=event.control.parent.get("endDate");null==startDateControl||startDateControl.markAsUntouched(),null==endDateControl||endDateControl.markAsUntouched(),null==startDateControl||startDateControl.setValue(null),null==endDateControl||endDateControl.setValue(null),event.control.parent.markAsDirty()}this.formService.validateAllFormFields(this.formRef.formGroup),this.formService.isValid(this.formId).pipe(Object(take.a)(1),Object(filter.a)((isValid=>isValid)),Object(mergeMap.a)((()=>this.formService.getFormData(this.formId))),Object(take.a)(1)).subscribe((formData=>{const accessConditionsToSave=[];formData.accessCondition.map((accessConditions=>accessConditions.accessConditionGroup)).filter((accessCondition=>Object(empty_util.e)(accessCondition))).forEach((accessCondition=>{let accessConditionOpt;if(this.availableAccessConditionOptions.filter((element=>Object(empty_util.g)(accessCondition.name)&&element.name===accessCondition.name[0].value)).forEach((element=>accessConditionOpt=element)),accessConditionOpt){const currentAccessCondition=Object.assign({},accessCondition);if(currentAccessCondition.name=this.retrieveValueFromField(accessCondition.name),accessConditionOpt.hasStartDate){if(accessCondition.startDate){const startDate=this.retrieveValueFromField(accessCondition.startDate);currentAccessCondition.startDate=Object(date_util.a)(startDate)}}else delete currentAccessCondition.startDate;if(accessConditionOpt.hasEndDate){if(accessCondition.endDate){const endDate=this.retrieveValueFromField(accessCondition.endDate);currentAccessCondition.endDate=Object(date_util.a)(endDate)}}else delete currentAccessCondition.endDate;accessConditionsToSave.push(currentAccessCondition)}})),this.operationsBuilder.add(this.pathCombiner.getPath("accessConditions"),accessConditionsToSave,!0)}))}}onRemove(event){const fieldPath="accessConditions/"+this.formOperationsService.getArrayIndexFromEvent(event);this.operationsBuilder.remove(this.pathCombiner.getPath(fieldPath))}onSectionDestroy(){this.subs.filter((subscription=>Object(empty_util.b)(subscription))).forEach((subscription=>subscription.unsubscribe()))}onSectionInit(){this.pathCombiner=new json_patch_operation_path_combiner.a("sections",this.sectionData.id),this.formId=this.formService.getUniqueId(this.sectionData.id);const config$=this.accessesConfigService.findByHref(this.sectionData.config,!0,!1).pipe(Object(operators.i)(),Object(map.a)((config=>config.payload))),accessData$=this.accessesService.getAccessesData(this.submissionId,this.sectionData.id);Object(combineLatest.a)([config$,accessData$]).subscribe((([config,accessData])=>{this.availableAccessConditionOptions=Object(empty_util.e)(config.accessConditionOptions)?config.accessConditionOptions:[],this.canChangeDiscoverable=!!config.canChangeDiscoverable,this.accessesData=accessData,this.formModel=this.buildFileEditForm()}))}getSectionStatus(){return Object(of.a)(!0)}buildFileEditForm(){const formModel=[];if(this.canChangeDiscoverable){const discoverableCheckboxConfig=Object.assign({},ACCESS_FORM_CHECKBOX_CONFIG,{label:this.translate.instant("submission.sections.accesses.form.discoverable-label"),hint:this.translate.instant("submission.sections.accesses.form.discoverable-description"),value:this.accessesData.discoverable});formModel.push(new fesm2015_core.r(discoverableCheckboxConfig,ACCESS_FORM_CHECKBOX_LAYOUT))}const accessConditionTypeModelConfig=Object.assign({},FORM_ACCESS_CONDITION_TYPE_CONFIG),accessConditionsArrayConfig=Object.assign({},ACCESS_CONDITIONS_FORM_ARRAY_CONFIG),accessConditionTypeOptions=[];for(const accessCondition of this.availableAccessConditionOptions)accessConditionTypeOptions.push({label:accessCondition.name,value:accessCondition.name});accessConditionTypeModelConfig.options=accessConditionTypeOptions;const hasStart=[],hasEnd=[],hasGroups=[];this.availableAccessConditionOptions.forEach((condition=>{const showStart=!0===condition.hasStartDate,showEnd=!0===condition.hasEndDate,showGroups=showStart||showEnd;showStart&&hasStart.push({id:"name",value:condition.name}),showEnd&&hasEnd.push({id:"name",value:condition.name}),showGroups&&hasGroups.push({id:"name",value:condition.name})}));const confStart={relations:[{match:fesm2015_core.Q,operator:fesm2015_core.R,when:hasStart}]},confEnd={relations:[{match:fesm2015_core.Q,operator:fesm2015_core.R,when:hasEnd}]};return accessConditionsArrayConfig.groupFactory=()=>{const type=new fesm2015_core.N(accessConditionTypeModelConfig,FORM_ACCESS_CONDITION_TYPE_LAYOUT),startDateConfig=Object.assign({},FORM_ACCESS_CONDITION_START_DATE_CONFIG,confStart),endDateConfig=Object.assign({},FORM_ACCESS_CONDITION_END_DATE_CONFIG,confEnd),startDate=new fesm2015_core.t(startDateConfig,FORM_ACCESS_CONDITION_START_DATE_LAYOUT),endDate=new fesm2015_core.t(endDateConfig,FORM_ACCESS_CONDITION_END_DATE_LAYOUT),accessConditionGroupConfig=Object.assign({},ACCESS_CONDITION_GROUP_CONFIG);return accessConditionGroupConfig.group=[type],hasStart.length>0&&accessConditionGroupConfig.group.push(startDate),hasEnd.length>0&&accessConditionGroupConfig.group.push(endDate),[new fesm2015_core.D(accessConditionGroupConfig,ACCESS_CONDITION_GROUP_LAYOUT)]},accessConditionsArrayConfig.initialCount=Object(empty_util.e)(this.accessesData.accessConditions)?this.accessesData.accessConditions.length:1,formModel.push(new fesm2015_core.w(accessConditionsArrayConfig,ACCESS_CONDITIONS_FORM_ARRAY_LAYOUT)),this.initModelData(formModel),formModel}retrieveValueFromField(field){const temp=Array.isArray(field)?field[0]:field;return temp?temp.value:void 0}};section_accesses_component_SubmissionSectionAccessesComponent.\u0275fac=function SubmissionSectionAccessesComponent_Factory(t){return new(t||section_accesses_component_SubmissionSectionAccessesComponent)(core["\u0275\u0275directiveInject"](sections_service.a),core["\u0275\u0275directiveInject"](form_builder_service.a),core["\u0275\u0275directiveInject"](submission_accesses_config_service_SubmissionAccessesConfigService),core["\u0275\u0275directiveInject"](section_accesses_service_SectionAccessesService),core["\u0275\u0275directiveInject"](section_form_operations_service.a),core["\u0275\u0275directiveInject"](json_patch_operations_builder.a),core["\u0275\u0275directiveInject"](form_service.a),core["\u0275\u0275directiveInject"](ngx_translate_core.e),core["\u0275\u0275directiveInject"](submission_json_patch_operations_service.a),core["\u0275\u0275directiveInject"]("sectionDataProvider"),core["\u0275\u0275directiveInject"]("submissionIdProvider"))},section_accesses_component_SubmissionSectionAccessesComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:section_accesses_component_SubmissionSectionAccessesComponent,selectors:[["ds-section-accesses"]],viewQuery:function SubmissionSectionAccessesComponent_Query(rf,ctx){if(1&rf&&core["\u0275\u0275viewQuery"](section_accesses_component_c0,1),2&rf){let _t;core["\u0275\u0275queryRefresh"](_t=core["\u0275\u0275loadQuery"]())&&(ctx.formRef=_t.first)}},features:[core["\u0275\u0275InheritDefinitionFeature"]],decls:2,vars:1,consts:[[3,"formId","formModel","displaySubmit","displayCancel","dfChange","removeArrayItem",4,"ngIf"],[3,"formId","formModel","displaySubmit","displayCancel","dfChange","removeArrayItem"],["formRef","formComponent"]],template:function SubmissionSectionAccessesComponent_Template(rf,ctx){1&rf&&(core["\u0275\u0275template"](0,SubmissionSectionAccessesComponent_ds_form_0_Template,2,4,"ds-form",0),core["\u0275\u0275text"](1,"\n")),2&rf&&core["\u0275\u0275property"]("ngIf",!!ctx.formModel)},directives:[common.NgIf,form_component.a],styles:[".access-condition-group{position:relative;top:-2.3rem;margin-bottom:-2.3rem}"]}),section_accesses_component_SubmissionSectionAccessesComponent=Object(tslib.__decorate)([Object(sections_decorator.a)(sections_type.a.AccessesCondition),Object(tslib.__metadata)("design:paramtypes",[sections_service.a,form_builder_service.a,submission_accesses_config_service_SubmissionAccessesConfigService,section_accesses_service_SectionAccessesService,section_form_operations_service.a,json_patch_operations_builder.a,form_service.a,ngx_translate_core.e,submission_json_patch_operations_service.a,Object,String])],section_accesses_component_SubmissionSectionAccessesComponent);var alert_component=__webpack_require__("VYMa");const ENTRY_COMPONENTS=[section_upload_component_SubmissionSectionUploadComponent,section_form_component_SubmissionSectionFormComponent,section_license_component_SubmissionSectionLicenseComponent,submission_section_cc_licenses_component_SubmissionSectionCcLicensesComponent,section_accesses_component_SubmissionSectionAccessesComponent,section_upload_file_edit_component_SubmissionSectionUploadFileEditComponent];sections_directive.a,submission_edit_component.SubmissionEditComponent,themed_submission_edit_component.a,submission_form_section_add_component.a,submission_form_collection_component.a,submission_form_component.a,submission_form_footer_component.a,submission_submit_component.SubmissionSubmitComponent,themed_submission_submit_component.a,submission_upload_files_component.a,section_container_component.a,submission_import_external_component.SubmissionImportExternalComponent,themed_submission_import_external_component.a,submission_import_external_searchbar_component.a,submission_import_external_preview_component.a,submission_import_external_collection_component.a;class SubmissionModule{static withEntryComponents(){return{ngModule:SubmissionModule,providers:ENTRY_COMPONENTS.map((component=>({provide:component})))}}}SubmissionModule.\u0275fac=function SubmissionModule_Factory(t){return new(t||SubmissionModule)},SubmissionModule.\u0275mod=core["\u0275\u0275defineNgModule"]({type:SubmissionModule}),SubmissionModule.\u0275inj=core["\u0275\u0275defineInjector"]({providers:[section_upload_service_SectionUploadService,sections_service.a,submission_uploads_config_service_SubmissionUploadsConfigService,submission_accesses_config_service_SubmissionAccessesConfigService,section_accesses_service_SectionAccessesService],imports:[[common.CommonModule,core_module.a.forRoot(),shared_module.a,ngrx_store.k.forFeature("submission",submission_reducers.a,app_reducer.d),ngrx_effects.c.forFeature(submissionEffects),journal_entities_module.a.withEntryComponents(),research_entities_module.a.withEntryComponents(),form_module.a,ng_bootstrap.b,ng_bootstrap.r]]}),core["\u0275\u0275setComponentScope"](section_upload_component_SubmissionSectionUploadComponent,[alert_component.a,common.NgIf,submission_section_upload_access_conditions_component_SubmissionSectionUploadAccessConditionsComponent,common.NgForOf,section_upload_file_component_SubmissionSectionUploadFileComponent],[ngx_translate_core.d,common.AsyncPipe])},fBXw:function(module,__webpack_exports__,__webpack_require__){"use strict";var _parseSectionErrorPaths__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("TTdl");__webpack_exports__.a=(errors=[])=>{const errorsList=Object.create({});return errors.forEach((error=>{Object(_parseSectionErrorPaths__WEBPACK_IMPORTED_MODULE_0__.a)(error.paths).forEach((path=>{const sectionError={path:path.originalPath,message:error.message};errorsList[path.sectionId]||(errorsList[path.sectionId]=[]),errorsList[path.sectionId].push(sectionError)}))})),errorsList}},hucJ:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return DSOBreadcrumbResolver}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),_dso_breadcrumbs_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("GCaJ"),_data_data_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("h5qW"),_shared_operators__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("1QIV"),rxjs_operators__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("lJxs"),_shared_empty_util__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("J3qs");class DSOBreadcrumbResolver{constructor(breadcrumbService,dataService){this.breadcrumbService=breadcrumbService,this.dataService=dataService}resolve(route,state){const uuid=route.params.id;return this.dataService.findById(uuid,!0,!1,...this.followLinks).pipe(Object(_shared_operators__WEBPACK_IMPORTED_MODULE_3__.g)(),Object(_shared_operators__WEBPACK_IMPORTED_MODULE_3__.o)(),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.a)((object=>{if(Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_5__.b)(object)){const fullPath=state.url,url=fullPath.substr(0,fullPath.indexOf(uuid))+uuid;return{provider:this.breadcrumbService,key:object,url:url}}})))}}DSOBreadcrumbResolver.\u0275fac=function DSOBreadcrumbResolver_Factory(t){return new(t||DSOBreadcrumbResolver)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275inject"](_dso_breadcrumbs_service__WEBPACK_IMPORTED_MODULE_1__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275inject"](_data_data_service__WEBPACK_IMPORTED_MODULE_2__.a))},DSOBreadcrumbResolver.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineInjectable"]({token:DSOBreadcrumbResolver,factory:DSOBreadcrumbResolver.\u0275fac,providedIn:"root"})},iprd:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return SearchPageModule}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),_angular_common__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("ofXK"),_core_core_module__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("pKmL"),_shared_shared_module__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("PCNd"),_shared_sidebar_sidebar_service__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("7LZ0"),_configuration_search_page_guard__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("0qhl"),_search_tracker_component__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("TrCT"),_statistics_statistics_module__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("9i+i"),_search_page_component__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("xSRh"),_shared_sidebar_filter_sidebar_filter_service__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("2XvB"),_core_shared_search_search_filter_service__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("kesd"),_core_shared_search_search_configuration_service__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("joI/"),_entity_groups_journal_entities_journal_entities_module__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("N0eT"),_entity_groups_research_entities_research_entities_module__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("udvk"),_themed_search_page_component__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("ONIj"),_shared_search_search_module__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("kMeL");_search_page_component__WEBPACK_IMPORTED_MODULE_8__.SearchPageComponent,_search_tracker_component__WEBPACK_IMPORTED_MODULE_6__.a,_themed_search_page_component__WEBPACK_IMPORTED_MODULE_14__.a;class SearchPageModule{}SearchPageModule.\u0275fac=function SearchPageModule_Factory(t){return new(t||SearchPageModule)},SearchPageModule.\u0275mod=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineNgModule"]({type:SearchPageModule}),SearchPageModule.\u0275inj=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineInjector"]({providers:[_shared_sidebar_sidebar_service__WEBPACK_IMPORTED_MODULE_4__.a,_shared_sidebar_filter_sidebar_filter_service__WEBPACK_IMPORTED_MODULE_9__.a,_core_shared_search_search_filter_service__WEBPACK_IMPORTED_MODULE_10__.c,_configuration_search_page_guard__WEBPACK_IMPORTED_MODULE_5__.a,_core_shared_search_search_configuration_service__WEBPACK_IMPORTED_MODULE_11__.a],imports:[[_angular_common__WEBPACK_IMPORTED_MODULE_1__.CommonModule,_shared_search_search_module__WEBPACK_IMPORTED_MODULE_15__.a,_shared_shared_module__WEBPACK_IMPORTED_MODULE_3__.a.withEntryComponents(),_core_core_module__WEBPACK_IMPORTED_MODULE_2__.a.forRoot(),_statistics_statistics_module__WEBPACK_IMPORTED_MODULE_7__.a.forRoot(),_entity_groups_journal_entities_journal_entities_module__WEBPACK_IMPORTED_MODULE_12__.a.withEntryComponents(),_entity_groups_research_entities_research_entities_module__WEBPACK_IMPORTED_MODULE_13__.a.withEntryComponents()]]})},jqBZ:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"WorkflowItemSendBackComponent",(function(){return WorkflowItemSendBackComponent}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),_workflow_item_action_page_component__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("5Yl3"),_core_submission_workflowitem_data_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("RMbB"),_core_services_route_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("ppE2"),_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("lI3o"),_core_data_request_service__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("X/78"),_angular_router__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("tyNb"),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("sYmb"),_shared_utils_var_directive__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("O/5o"),_angular_common__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("ofXK"),_item_page_edit_item_page_modify_item_overview_modify_item_overview_component__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("aCx6");function WorkflowItemSendBackComponent_div_0_ds_modify_item_overview_6_Template(rf,ctx){if(1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](0,"ds-modify-item-overview",5),2&rf){const item_r1=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]().ngVar;_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("item",item_r1)}}function WorkflowItemSendBackComponent_div_0_Template(rf,ctx){if(1&rf){const _r5=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275getCurrentView"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div",1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](2,"h2"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](4,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](5,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](6,WorkflowItemSendBackComponent_div_0_ds_modify_item_overview_6_Template,1,1,"ds-modify-item-overview",2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](7,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](8,"button",3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("click",(function WorkflowItemSendBackComponent_div_0_Template_button_click_8_listener(){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r5);return _angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]().previousPage()})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](9),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](10,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](11,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](12,"button",4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("click",(function WorkflowItemSendBackComponent_div_0_Template_button_click_12_listener(){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r5);return _angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]().performAction()})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](13),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](14,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](15,"\n"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()}if(2&rf){const item_r1=ctx.ngVar,ctx_r0=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](4,4,"workflow-item."+ctx_r0.type+".header")),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",item_r1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](10,6,"workflow-item."+ctx_r0.type+".button.cancel")),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](14,8,"workflow-item."+ctx_r0.type+".button.confirm"))}}class WorkflowItemSendBackComponent extends _workflow_item_action_page_component__WEBPACK_IMPORTED_MODULE_1__.a{constructor(route,workflowItemService,router,routeService,notificationsService,translationService,requestService){super(route,workflowItemService,router,routeService,notificationsService,translationService),this.route=route,this.workflowItemService=workflowItemService,this.router=router,this.routeService=routeService,this.notificationsService=notificationsService,this.translationService=translationService,this.requestService=requestService}getType(){return"send-back"}sendRequest(id){return this.requestService.removeByHrefSubstring("/discover"),this.workflowItemService.sendBack(id)}}WorkflowItemSendBackComponent.\u0275fac=function WorkflowItemSendBackComponent_Factory(t){return new(t||WorkflowItemSendBackComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_6__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_core_submission_workflowitem_data_service__WEBPACK_IMPORTED_MODULE_2__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_6__.g),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_core_services_route_service__WEBPACK_IMPORTED_MODULE_3__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_4__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_ngx_translate_core__WEBPACK_IMPORTED_MODULE_7__.e),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_core_data_request_service__WEBPACK_IMPORTED_MODULE_5__.a))},WorkflowItemSendBackComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineComponent"]({type:WorkflowItemSendBackComponent,selectors:[["ds-workflow-item-send-back"]],features:[_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275InheritDefinitionFeature"]],decls:3,vars:3,consts:[["class","container",4,"ngVar"],[1,"container"],[3,"item",4,"ngIf"],[1,"btn","btn-default",3,"click"],[1,"btn","btn-danger",3,"click"],[3,"item"]],template:function WorkflowItemSendBackComponent_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](0,WorkflowItemSendBackComponent_div_0_Template,16,10,"div",0),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](1,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](2,"\n")),2&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngVar",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](1,1,ctx.item$))},directives:[_shared_utils_var_directive__WEBPACK_IMPORTED_MODULE_8__.a,_angular_common__WEBPACK_IMPORTED_MODULE_9__.NgIf,_item_page_edit_item_page_modify_item_overview_modify_item_overview_component__WEBPACK_IMPORTED_MODULE_10__.a],pipes:[_angular_common__WEBPACK_IMPORTED_MODULE_9__.AsyncPipe,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_7__.d],encapsulation:2})},jrTz:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"g",(function(){return ITEM_EDIT_WITHDRAW_PATH})),__webpack_require__.d(__webpack_exports__,"f",(function(){return ITEM_EDIT_REINSTATE_PATH})),__webpack_require__.d(__webpack_exports__,"d",(function(){return ITEM_EDIT_PRIVATE_PATH})),__webpack_require__.d(__webpack_exports__,"e",(function(){return ITEM_EDIT_PUBLIC_PATH})),__webpack_require__.d(__webpack_exports__,"b",(function(){return ITEM_EDIT_DELETE_PATH})),__webpack_require__.d(__webpack_exports__,"c",(function(){return ITEM_EDIT_MOVE_PATH})),__webpack_require__.d(__webpack_exports__,"a",(function(){return ITEM_EDIT_AUTHORIZATIONS_PATH}));const ITEM_EDIT_WITHDRAW_PATH="withdraw",ITEM_EDIT_REINSTATE_PATH="reinstate",ITEM_EDIT_PRIVATE_PATH="private",ITEM_EDIT_PUBLIC_PATH="public",ITEM_EDIT_DELETE_PATH="delete",ITEM_EDIT_MOVE_PATH="move",ITEM_EDIT_AUTHORIZATIONS_PATH="authorizations"},kGaT:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ITEM_PAGE_LINKS_TO_FOLLOW})),__webpack_require__.d(__webpack_exports__,"b",(function(){return ItemResolver}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),_core_data_item_data_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("iqTE"),_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("84Zn"),_core_shared_operators__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("1QIV"),_core_resolving_resolver_actions__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("8jtY"),_ngrx_store__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("l7P3"),_angular_router__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("tyNb");const ITEM_PAGE_LINKS_TO_FOLLOW=[Object(_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_2__.a)("owningCollection",{},Object(_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_2__.a)("parentCommunity",{},Object(_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_2__.a)("parentCommunity"))),Object(_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_2__.a)("relationships"),Object(_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_2__.a)("version",{},Object(_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_2__.a)("versionhistory")),Object(_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_2__.a)("thumbnail")];class ItemResolver{constructor(itemService,store,router){this.itemService=itemService,this.store=store,this.router=router}resolve(route,state){const itemRD$=this.itemService.findById(route.params.id,!0,!1,...ITEM_PAGE_LINKS_TO_FOLLOW).pipe(Object(_core_shared_operators__WEBPACK_IMPORTED_MODULE_3__.g)());return itemRD$.subscribe((itemRD=>{this.store.dispatch(new _core_resolving_resolver_actions__WEBPACK_IMPORTED_MODULE_4__.a(state.url,itemRD.payload))})),itemRD$}}ItemResolver.\u0275fac=function ItemResolver_Factory(t){return new(t||ItemResolver)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275inject"](_core_data_item_data_service__WEBPACK_IMPORTED_MODULE_1__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275inject"](_ngrx_store__WEBPACK_IMPORTED_MODULE_5__.i),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275inject"](_angular_router__WEBPACK_IMPORTED_MODULE_6__.g))},ItemResolver.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineInjectable"]({token:ItemResolver,factory:ItemResolver.\u0275fac})},kcqd:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return FormModule}));var core=__webpack_require__("fXoL"),common=__webpack_require__("ofXK"),form_component=__webpack_require__("hqmO"),fesm2015_core=__webpack_require__("e+Av"),ds_dynamic_form_control_container_component=__webpack_require__("NvTF");function DsDynamicFormComponent_ds_dynamic_form_control_container_0_Template(rf,ctx){if(1&rf){const _r3=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementStart"](0,"ds-dynamic-form-control-container",1),core["\u0275\u0275listener"]("dfBlur",(function DsDynamicFormComponent_ds_dynamic_form_control_container_0_Template_ds_dynamic_form_control_container_dfBlur_0_listener($event){core["\u0275\u0275restoreView"](_r3);const ctx_r2=core["\u0275\u0275nextContext"]();return ctx_r2.onCustomEvent($event,ctx_r2.blur)}))("dfChange",(function DsDynamicFormComponent_ds_dynamic_form_control_container_0_Template_ds_dynamic_form_control_container_dfChange_0_listener($event){core["\u0275\u0275restoreView"](_r3);const ctx_r4=core["\u0275\u0275nextContext"]();return ctx_r4.onCustomEvent($event,ctx_r4.change)}))("dfFocus",(function DsDynamicFormComponent_ds_dynamic_form_control_container_0_Template_ds_dynamic_form_control_container_dfFocus_0_listener($event){core["\u0275\u0275restoreView"](_r3);const ctx_r5=core["\u0275\u0275nextContext"]();return ctx_r5.onCustomEvent($event,ctx_r5.focus)}))("ngbEvent",(function DsDynamicFormComponent_ds_dynamic_form_control_container_0_Template_ds_dynamic_form_control_container_ngbEvent_0_listener($event){core["\u0275\u0275restoreView"](_r3);const ctx_r6=core["\u0275\u0275nextContext"]();return ctx_r6.onCustomEvent($event,ctx_r6.ngbEvent)})),core["\u0275\u0275elementEnd"]()}if(2&rf){const model_r1=ctx.$implicit,ctx_r0=core["\u0275\u0275nextContext"]();core["\u0275\u0275property"]("formId",ctx_r0.formId)("group",ctx_r0.formGroup)("hasErrorMessaging",model_r1.hasErrorMessages)("hidden",model_r1.hidden)("layout",ctx_r0.formLayout)("model",model_r1)("templates",ctx_r0.templates)("asBootstrapFormGroup",!0)}}class ds_dynamic_form_component_DsDynamicFormComponent extends fesm2015_core.x{constructor(changeDetectorRef,componentService){super(changeDetectorRef,componentService),this.blur=new core.EventEmitter,this.change=new core.EventEmitter,this.focus=new core.EventEmitter,this.ngbEvent=new core.EventEmitter}}ds_dynamic_form_component_DsDynamicFormComponent.\u0275fac=function DsDynamicFormComponent_Factory(t){return new(t||ds_dynamic_form_component_DsDynamicFormComponent)(core["\u0275\u0275directiveInject"](core.ChangeDetectorRef),core["\u0275\u0275directiveInject"](fesm2015_core.y))},ds_dynamic_form_component_DsDynamicFormComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:ds_dynamic_form_component_DsDynamicFormComponent,selectors:[["ds-dynamic-form"]],contentQueries:function DsDynamicFormComponent_ContentQueries(rf,ctx,dirIndex){if(1&rf&&core["\u0275\u0275contentQuery"](dirIndex,fesm2015_core.O,0),2&rf){let _t;core["\u0275\u0275queryRefresh"](_t=core["\u0275\u0275loadQuery"]())&&(ctx.templates=_t)}},viewQuery:function DsDynamicFormComponent_Query(rf,ctx){if(1&rf&&core["\u0275\u0275viewQuery"](ds_dynamic_form_control_container_component.a,1),2&rf){let _t;core["\u0275\u0275queryRefresh"](_t=core["\u0275\u0275loadQuery"]())&&(ctx.components=_t)}},inputs:{formId:"formId",formGroup:"formGroup",formModel:"formModel",formLayout:"formLayout"},outputs:{blur:"dfBlur",change:"dfChange",focus:"dfFocus",ngbEvent:"ngbEvent"},features:[core["\u0275\u0275InheritDefinitionFeature"]],decls:2,vars:2,consts:[[3,"formId","group","hasErrorMessaging","hidden","layout","model","templates","asBootstrapFormGroup","dfBlur","dfChange","dfFocus","ngbEvent",4,"ngFor","ngForOf","ngForTrackBy"],[3,"formId","group","hasErrorMessaging","hidden","layout","model","templates","asBootstrapFormGroup","dfBlur","dfChange","dfFocus","ngbEvent"]],template:function DsDynamicFormComponent_Template(rf,ctx){1&rf&&(core["\u0275\u0275template"](0,DsDynamicFormComponent_ds_dynamic_form_control_container_0_Template,1,8,"ds-dynamic-form-control-container",0),core["\u0275\u0275text"](1,"\n")),2&rf&&core["\u0275\u0275property"]("ngForOf",ctx.formModel)("ngForTrackBy",ctx.trackByFn)},directives:[common.NgForOf,ds_dynamic_form_control_container_component.a],encapsulation:2});var dynamic_list_component=__webpack_require__("ZO65"),dynamic_lookup_component=__webpack_require__("0pnk"),dynamic_disabled_component=__webpack_require__("sw+l"),dynamic_lookup_relation_modal_component=__webpack_require__("1Pbu"),dynamic_scrollable_dropdown_component=__webpack_require__("bPV6"),dynamic_tag_component=__webpack_require__("Gu/b"),dynamic_onebox_component=__webpack_require__("A/iK"),dynamic_relation_group_components=__webpack_require__("KKO+"),date_picker_component=__webpack_require__("Ysrn"),dynamic_form_group_component=__webpack_require__("tqJZ"),dynamic_form_array_component=__webpack_require__("ZTun"),dynamic_date_picker_inline_component=__webpack_require__("uyTL"),dynamic_lookup_relation_search_tab_component=__webpack_require__("Ui2r"),dynamic_lookup_relation_selection_tab_component=__webpack_require__("8HnP"),dynamic_lookup_relation_external_source_tab_component=__webpack_require__("zVKZ"),shared_module=__webpack_require__("PCNd"),ngx_translate_core=__webpack_require__("sYmb"),search_module=__webpack_require__("kMeL"),existing_metadata_list_element_component=__webpack_require__("yXJd"),existing_relation_list_element_component=__webpack_require__("/Vzl"),external_source_entry_import_modal_component=__webpack_require__("zGzN"),custom_switch_component=__webpack_require__("xjoE"),ui_ng_bootstrap=__webpack_require__("n7Wa"),fesm2015_forms=__webpack_require__("3Pt+"),drag_drop=__webpack_require__("5+WD");custom_switch_component.a,ds_dynamic_form_control_container_component.a,dynamic_list_component.a,dynamic_lookup_component.a,dynamic_lookup_relation_search_tab_component.a,dynamic_lookup_relation_selection_tab_component.a,dynamic_lookup_relation_external_source_tab_component.a,dynamic_disabled_component.a,dynamic_lookup_relation_modal_component.a,dynamic_scrollable_dropdown_component.a,dynamic_tag_component.a,dynamic_onebox_component.a,dynamic_relation_group_components.a,date_picker_component.b,dynamic_form_group_component.a,dynamic_form_array_component.a,dynamic_date_picker_inline_component.a,existing_metadata_list_element_component.a,existing_relation_list_element_component.a,external_source_entry_import_modal_component.a,form_component.a;class FormModule{}FormModule.\u0275fac=function FormModule_Factory(t){return new(t||FormModule)},FormModule.\u0275mod=core["\u0275\u0275defineNgModule"]({type:FormModule}),FormModule.\u0275inj=core["\u0275\u0275defineInjector"]({providers:[{provide:fesm2015_core.c,useValue:ds_dynamic_form_control_container_component.b}],imports:[[common.CommonModule,fesm2015_core.I,ui_ng_bootstrap.a,search_module.a,shared_module.a,ngx_translate_core.c]]}),core["\u0275\u0275setComponentScope"](dynamic_form_group_component.a,[fesm2015_forms.NgControlStatusGroup,fesm2015_forms.FormGroupDirective,fesm2015_forms.FormGroupName,common.NgClass,common.NgForOf,ds_dynamic_form_control_container_component.a],[]),core["\u0275\u0275setComponentScope"](dynamic_form_array_component.a,[fesm2015_forms.NgControlStatusGroup,fesm2015_forms.FormGroupDirective,fesm2015_forms.FormArrayName,common.NgClass,drag_drop.c,common.NgForOf,drag_drop.a,drag_drop.b,fesm2015_forms.FormGroupName,common.NgTemplateOutlet,ds_dynamic_form_control_container_component.a],[]),core["\u0275\u0275setComponentScope"](form_component.a,[fesm2015_forms["\u0275angular_packages_forms_forms_ba"],fesm2015_forms.NgControlStatusGroup,fesm2015_forms.FormGroupDirective,ds_dynamic_form_component_DsDynamicFormComponent,fesm2015_core.O,common.NgIf],[ngx_translate_core.d,common.AsyncPipe])},m4Gq:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return SubmissionFormComponent}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),rxjs__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("LRne"),rxjs_operators__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("pLZG"),rxjs_operators__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("lJxs"),rxjs_operators__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("/uUt"),rxjs_operators__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("eIep"),_core_auth_auth_service__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("Vurf"),_core_shared_hal_endpoint_service__WEBPACK_IMPORTED_MODULE_8__=(__webpack_require__("U7Y6"),__webpack_require__("uLZQ")),_shared_empty_util__WEBPACK_IMPORTED_MODULE_10__=(__webpack_require__("9S5r"),__webpack_require__("J3qs")),_shared_uploader_uploader_options_model__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("ao5O"),_submission_service__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("J/vq"),_sections_sections_type__WEBPACK_IMPORTED_MODULE_14__=(__webpack_require__("PN+Z"),__webpack_require__("4GeW")),_sections_sections_service__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("YJD6"),_angular_common__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("ofXK"),_collection_submission_form_collection_component__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("wQzj"),_section_add_submission_form_section_add_component__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("ph1m"),_submission_upload_files_submission_upload_files_component__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("T/iP"),_shared_loading_loading_component__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("Frqi"),_sections_container_section_container_component__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("Yfyx"),_footer_submission_form_footer_component__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__("yAsG");function SubmissionFormComponent_div_2_div_2_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div",12),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n            "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](2,"ds-submission-upload-files",13),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3,"\n            "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](4,"div",14),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](5,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()),2&rf){const ctx_r4=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"](2);_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("submissionId",ctx_r4.submissionId)("collectionId",ctx_r4.collectionId)("uploadFilesOptions",ctx_r4.uploadFilesOptions)}}function SubmissionFormComponent_div_2_Template(rf,ctx){if(1&rf){const _r6=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275getCurrentView"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div",6),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](2,SubmissionFormComponent_div_2_div_2_Template,6,3,"div",7),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](3,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](4,"\n\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](5,"div",8),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](6,"\n            "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](7,"ds-submission-form-collection",9),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("collectionChange",(function SubmissionFormComponent_div_2_Template_ds_submission_form_collection_collectionChange_7_listener($event){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r6);return _angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]().onCollectionChange($event)})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](8,"\n            "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](9,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](10,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](11,"div",10),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](12,"\n            "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](13,"ds-submission-form-section-add",11),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](14,"\n            "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](15,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](16,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()}if(2&rf){const ctx_r0=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](3,6,ctx_r0.uploadEnabled$)),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](5),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("currentCollectionId",ctx_r0.collectionId)("currentDefinition",ctx_r0.definitionId)("submissionId",ctx_r0.submissionId),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](6),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("collectionId",ctx_r0.collectionId)("submissionId",ctx_r0.submissionId)}}function SubmissionFormComponent_ds_loading_7_Template(rf,ctx){1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](0,"ds-loading",15)}function SubmissionFormComponent_ng_container_10_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementContainerStart"](0),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n            "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](2,"ds-submission-section-container",16),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementContainerEnd"]()),2&rf){const object_r7=ctx.$implicit,ctx_r2=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("collectionId",ctx_r2.collectionId)("submissionId",ctx_r2.submissionId)("sectionData",object_r7)}}function SubmissionFormComponent_div_14_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div",17),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](2,"ds-submission-form-footer",18),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()),2&rf){const ctx_r3=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("submissionId",ctx_r3.submissionId)}}class SubmissionFormComponent{constructor(authService,changeDetectorRef,halService,submissionService,sectionsService){this.authService=authService,this.changeDetectorRef=changeDetectorRef,this.halService=halService,this.submissionService=submissionService,this.sectionsService=sectionsService,this.loading=Object(rxjs__WEBPACK_IMPORTED_MODULE_1__.a)(!0),this.uploadFilesOptions=new _shared_uploader_uploader_options_model__WEBPACK_IMPORTED_MODULE_11__.a,this.subs=[],this.isActive=!0}ngOnChanges(changes){changes.collectionId&&this.collectionId&&changes.submissionId&&this.submissionId&&(this.isActive=!0,this.submissionSections=this.submissionService.getSubmissionObject(this.submissionId).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.a)((()=>this.isActive)),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.a)((submission=>submission.isLoading)),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.a)((isLoading=>isLoading)),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.a)(),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.a)((isLoading=>isLoading?Object(rxjs__WEBPACK_IMPORTED_MODULE_1__.a)([]):this.getSectionsList()))),this.uploadEnabled$=this.sectionsService.isSectionTypeAvailable(this.submissionId,_sections_sections_type__WEBPACK_IMPORTED_MODULE_14__.a.Upload),this.loading=this.submissionService.getSubmissionObject(this.submissionId).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.a)((()=>this.isActive)),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.a)((submission=>submission.isLoading)),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.a)((isLoading=>isLoading)),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.a)()),this.subs.push(this.halService.getEndpoint(this.submissionService.getSubmissionObjectLinkName()).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.a)((href=>Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_10__.e)(href))),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.a)()).subscribe((endpointURL=>{this.uploadFilesOptions.authToken=this.authService.buildAuthHeader(),this.uploadFilesOptions.url=endpointURL.concat(`/${this.submissionId}`),this.definitionId=this.submissionDefinition.name,this.submissionService.dispatchInit(this.collectionId,this.submissionId,this.selfUrl,this.submissionDefinition,this.sections,this.item,this.submissionErrors),this.changeDetectorRef.detectChanges()}))),this.submissionService.startAutoSave(this.submissionId))}ngOnDestroy(){this.isActive=!1,this.submissionService.stopAutoSave(),this.submissionService.resetAllSubmissionObjects(),this.subs.filter((subscription=>Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_10__.b)(subscription))).forEach((subscription=>subscription.unsubscribe()))}onCollectionChange(submissionObject){this.collectionId=submissionObject.collection.id,this.definitionId!==submissionObject.submissionDefinition.name?(this.sections=submissionObject.sections,this.submissionDefinition=submissionObject.submissionDefinition,this.definitionId=this.submissionDefinition.name,this.submissionService.resetSubmissionObject(this.collectionId,this.submissionId,submissionObject._links.self.href,this.submissionDefinition,this.sections,this.item)):this.changeDetectorRef.detectChanges()}isLoading(){return this.loading}getSectionsList(){return this.submissionService.getSubmissionSections(this.submissionId).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.a)((sections=>Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_10__.e)(sections))),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.a)((sections=>sections)))}}SubmissionFormComponent.\u0275fac=function SubmissionFormComponent_Factory(t){return new(t||SubmissionFormComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_core_auth_auth_service__WEBPACK_IMPORTED_MODULE_6__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__.ChangeDetectorRef),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_core_shared_hal_endpoint_service__WEBPACK_IMPORTED_MODULE_8__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_submission_service__WEBPACK_IMPORTED_MODULE_12__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_sections_sections_service__WEBPACK_IMPORTED_MODULE_15__.a))},SubmissionFormComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineComponent"]({type:SubmissionFormComponent,selectors:[["ds-submission-form"]],inputs:{collectionId:"collectionId",item:"item",sections:"sections",submissionErrors:"submissionErrors",selfUrl:"selfUrl",submissionDefinition:"submissionDefinition",submissionId:"submissionId"},features:[_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275NgOnChangesFeature"]],decls:18,vars:12,consts:[[1,"container-fluid"],["class","submission-form-header mb-3 d-flex flex-wrap position-sticky",4,"ngIf"],[1,"submission-form-content"],["message","Loading...",4,"ngIf"],[4,"ngFor","ngForOf"],["class","submission-form-footer mt-3 mb-3 position-sticky",4,"ngIf"],[1,"submission-form-header","mb-3","d-flex","flex-wrap","position-sticky"],["class","w-100",4,"ngIf"],[1,"submission-form-header-item","mb-3","mb-sm-0","flex-sm-grow-1","flex-md-grow-0"],[3,"currentCollectionId","currentDefinition","submissionId","collectionChange"],[1,"submission-form-header-item","text-right"],[3,"collectionId","submissionId"],[1,"w-100"],[3,"submissionId","collectionId","uploadFilesOptions"],[1,"clearfix"],["message","Loading..."],[3,"collectionId","submissionId","sectionData"],[1,"submission-form-footer","mt-3","mb-3","position-sticky"],[3,"submissionId"]],template:function SubmissionFormComponent_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div",0),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](2,SubmissionFormComponent_div_2_Template,17,8,"div",1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](3,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](4,"\n\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](5,"div",2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](6,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](7,SubmissionFormComponent_ds_loading_7_Template,1,0,"ds-loading",3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](8,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](9,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](10,SubmissionFormComponent_ng_container_10_Template,4,3,"ng-container",4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](11,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](12,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](13,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](14,SubmissionFormComponent_div_14_Template,4,1,"div",5),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](15,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](16,"\n"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](17,"\n")),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",!_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](3,4,ctx.isLoading())),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](5),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](8,6,ctx.isLoading())),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngForOf",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](11,8,ctx.submissionSections)),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",!_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](15,10,ctx.isLoading())))},directives:[_angular_common__WEBPACK_IMPORTED_MODULE_16__.NgIf,_angular_common__WEBPACK_IMPORTED_MODULE_16__.NgForOf,_collection_submission_form_collection_component__WEBPACK_IMPORTED_MODULE_17__.a,_section_add_submission_form_section_add_component__WEBPACK_IMPORTED_MODULE_18__.a,_submission_upload_files_submission_upload_files_component__WEBPACK_IMPORTED_MODULE_19__.a,_shared_loading_loading_component__WEBPACK_IMPORTED_MODULE_20__.a,_sections_container_section_container_component__WEBPACK_IMPORTED_MODULE_21__.a,_footer_submission_form_footer_component__WEBPACK_IMPORTED_MODULE_22__.a],pipes:[_angular_common__WEBPACK_IMPORTED_MODULE_16__.AsyncPipe],styles:[".submission-form-header[_ngcontent-%COMP%]{background-color:hsla(0,0%,100%,.97);padding:calc(var(--bs-spacer) / 2) 0 calc(var(--bs-spacer) / 2) 0;top:0;z-index:var(--ds-submission-header-z-index)}.submission-form-header-item[_ngcontent-%COMP%]{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1}.submission-form-footer[_ngcontent-%COMP%]{border-radius:var(--bs-card-border-radius);bottom:0;background-color:var(--bs-gray-400);padding:calc(var(--bs-spacer) / 2);z-index:var(--ds-submission-footer-z-index)}.btn-link-focus[_ngcontent-%COMP%]{font-weight:400;color:#066;text-decoration:none}.btn-link-focus[_ngcontent-%COMP%]:hover{color:#001a1a;text-decoration:underline}.btn-link-focus.disabled[_ngcontent-%COMP%], .btn-link-focus[_ngcontent-%COMP%]:disabled{color:#6c757d;pointer-events:none}.btn-link-focus.focus[_ngcontent-%COMP%], .btn-link-focus[_ngcontent-%COMP%]:focus{text-decoration:underline}"]})},mJyT:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return FullFileSectionComponent}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),_core_data_bitstream_data_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("PCBh"),_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_3__=(__webpack_require__("PN+Z"),__webpack_require__("84Zn")),_simple_field_components_file_section_file_section_component__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("8g8H"),_shared_pagination_pagination_component_options_model__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("7DXY"),rxjs_operators__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("eIep"),rxjs_operators__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("vkgz"),_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("lI3o"),_shared_empty_util__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("J3qs"),_core_pagination_pagination_service__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("MFUF"),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("sYmb"),_field_components_metadata_field_wrapper_metadata_field_wrapper_component__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("QCrl"),_shared_utils_var_directive__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("O/5o"),_angular_common__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("ofXK"),_shared_pagination_pagination_component__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("Exvd"),_thumbnail_thumbnail_component__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("/lGE"),_shared_file_download_link_file_download_link_component__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("OXP5"),_shared_utils_file_size_pipe__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("t8/W");function FullFileSectionComponent_div_3_div_2_ds_pagination_6_div_2_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div",7),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n                    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](2,"div",8),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3,"\n                        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](4,"ds-thumbnail",9),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](5,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](6,"\n                    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](7,"\n                    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](8,"div",10),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](9,"\n                        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](10,"dl",11),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](11,"\n                            "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](12,"dt",12),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](13),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](14,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](15,"\n                            "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](16,"dd",13),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](17),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](18,"\n\n                            "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](19,"dt",12),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](20),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](21,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](22,"\n                            "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](23,"dd",13),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](24),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](25,"dsFileSize"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](26,"\n\n\n                            "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](27,"dt",12),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](28),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](29,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](30,"\n                            "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](31,"dd",13),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](32),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](33,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](34,"\n\n\n                            "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](35,"dt",12),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](36),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](37,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](38,"\n                            "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](39,"dd",13),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](40),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](41,"\n                        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](42,"\n                    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](43,"\n                    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](44,"div",14),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](45,"\n                        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](46,"ds-file-download-link",15),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](47),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](48,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](49,"\n                    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](50,"\n                "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()),2&rf){const file_r6=ctx.$implicit,ctx_r5=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"](4);let tmp_0_0=null,tmp_6_0=null;_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("thumbnail",null==(tmp_0_0=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](5,12,file_r6.thumbnail))?null:tmp_0_0.payload),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](9),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](14,14,"item.page.filesection.name")),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](file_r6.name),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](21,16,"item.page.filesection.size")),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](25,18,file_r6.sizeBytes)),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](29,20,"item.page.filesection.format")),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](null==(tmp_6_0=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](33,22,file_r6.format))||null==tmp_6_0.payload?null:tmp_6_0.payload.description),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](37,24,"item.page.filesection.description")),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](file_r6.firstMetadataValue("dc.description")),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](6),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("bitstream",file_r6)("item",ctx_r5.item),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate1"]("\n                            ",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](48,26,"item.page.filesection.download"),"\n                        ")}}function FullFileSectionComponent_div_3_div_2_ds_pagination_6_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"ds-pagination",5),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n\n\n                "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](2,FullFileSectionComponent_div_3_div_2_ds_pagination_6_div_2_Template,51,28,"div",6),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3,"\n            "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()),2&rf){const originals_r2=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"](2).ngVar,ctx_r4=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("hideGear",!0)("hidePagerWhenSinglePage",!0)("paginationOptions",ctx_r4.originalOptions)("pageInfoState",originals_r2)("collectionSize",null==originals_r2?null:originals_r2.totalElements)("retainScrollPosition",!0),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngForOf",null==originals_r2?null:originals_r2.page)}}function FullFileSectionComponent_div_3_div_2_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n            "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](2,"h5",3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](4,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](5,"\n            "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](6,FullFileSectionComponent_div_3_div_2_ds_pagination_6_Template,4,7,"ds-pagination",4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](7,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()),2&rf){const originals_r2=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]().ngVar;_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](4,2,"item.page.filesection.original.bundle")),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",(null==originals_r2||null==originals_r2.page?null:originals_r2.page.length)>0)}}function FullFileSectionComponent_div_3_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](2,FullFileSectionComponent_div_3_div_2_Template,8,4,"div",2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()),2&rf){const originals_r2=ctx.ngVar,ctx_r0=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",ctx_r0.hasValuesInBundle(originals_r2))}}function FullFileSectionComponent_div_6_div_2_ds_pagination_6_div_2_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div",17),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n                    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](2,"div",8),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3,"\n                        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](4,"ds-thumbnail",9),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](5,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](6,"\n                    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](7,"\n                    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](8,"div",10),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](9,"\n                        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](10,"dl",11),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](11,"\n                            "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](12,"dt",12),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](13),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](14,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](15,"\n                            "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](16,"dd",13),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](17),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](18,"\n\n                            "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](19,"dt",12),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](20),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](21,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](22,"\n                            "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](23,"dd",13),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](24),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](25,"dsFileSize"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](26,"\n\n                            "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](27,"dt",12),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](28),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](29,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](30,"\n                            "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](31,"dd",13),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](32),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](33,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](34,"\n\n\n                            "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](35,"dt",12),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](36),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](37,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](38,"\n                            "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](39,"dd",13),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](40),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](41,"\n                        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](42,"\n                    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](43,"\n                    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](44,"div",14),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](45,"\n                        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](46,"ds-file-download-link",15),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](47),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](48,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](49,"\n                    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](50,"\n                "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()),2&rf){const file_r13=ctx.$implicit,ctx_r12=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"](4);let tmp_0_0=null,tmp_6_0=null;_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("thumbnail",null==(tmp_0_0=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](5,12,file_r13.thumbnail))?null:tmp_0_0.payload),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](9),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](14,14,"item.page.filesection.name")),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](file_r13.name),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](21,16,"item.page.filesection.size")),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](25,18,file_r13.sizeBytes)),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](29,20,"item.page.filesection.format")),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](null==(tmp_6_0=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](33,22,file_r13.format))||null==tmp_6_0.payload?null:tmp_6_0.payload.description),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](37,24,"item.page.filesection.description")),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](file_r13.firstMetadataValue("dc.description")),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](6),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("bitstream",file_r13)("item",ctx_r12.item),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate1"]("\n                            ",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](48,26,"item.page.filesection.download"),"\n                        ")}}function FullFileSectionComponent_div_6_div_2_ds_pagination_6_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"ds-pagination",5),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n\n\n                "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](2,FullFileSectionComponent_div_6_div_2_ds_pagination_6_div_2_Template,51,28,"div",16),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3,"\n            "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()),2&rf){const licenses_r9=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"](2).ngVar,ctx_r11=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("hideGear",!0)("hidePagerWhenSinglePage",!0)("paginationOptions",ctx_r11.licenseOptions)("pageInfoState",licenses_r9)("collectionSize",null==licenses_r9?null:licenses_r9.totalElements)("retainScrollPosition",!0),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngForOf",null==licenses_r9?null:licenses_r9.page)}}function FullFileSectionComponent_div_6_div_2_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n            "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](2,"h5",3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](4,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](5,"\n            "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](6,FullFileSectionComponent_div_6_div_2_ds_pagination_6_Template,4,7,"ds-pagination",4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](7,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()),2&rf){const licenses_r9=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]().ngVar;_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](4,2,"item.page.filesection.license.bundle")),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",(null==licenses_r9||null==licenses_r9.page?null:licenses_r9.page.length)>0)}}function FullFileSectionComponent_div_6_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](2,FullFileSectionComponent_div_6_div_2_Template,8,4,"div",2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()),2&rf){const licenses_r9=ctx.ngVar,ctx_r1=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",ctx_r1.hasValuesInBundle(licenses_r9))}}class FullFileSectionComponent extends _simple_field_components_file_section_file_section_component__WEBPACK_IMPORTED_MODULE_4__.FileSectionComponent{constructor(bitstreamDataService,notificationsService,translateService,paginationService){super(bitstreamDataService,notificationsService,translateService),this.notificationsService=notificationsService,this.translateService=translateService,this.paginationService=paginationService,this.pageSize=5,this.originalOptions=Object.assign(new _shared_pagination_pagination_component_options_model__WEBPACK_IMPORTED_MODULE_5__.a,{id:"obo",currentPage:1,pageSize:this.pageSize}),this.licenseOptions=Object.assign(new _shared_pagination_pagination_component_options_model__WEBPACK_IMPORTED_MODULE_5__.a,{id:"lbo",currentPage:1,pageSize:this.pageSize})}ngOnInit(){this.initialize()}initialize(){this.originals$=this.paginationService.getCurrentPagination(this.originalOptions.id,this.originalOptions).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.a)((options=>this.bitstreamDataService.findAllByItemAndBundleName(this.item,"ORIGINAL",{elementsPerPage:options.pageSize,currentPage:options.currentPage},!0,!0,Object(_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_3__.a)("format"),Object(_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_3__.a)("thumbnail")))),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.a)((rd=>{Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_9__.b)(rd.errorMessage)&&this.notificationsService.error(this.translateService.get("file-section.error.header"),`${rd.statusCode} ${rd.errorMessage}`)}))),this.licenses$=this.paginationService.getCurrentPagination(this.licenseOptions.id,this.licenseOptions).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.a)((options=>this.bitstreamDataService.findAllByItemAndBundleName(this.item,"LICENSE",{elementsPerPage:options.pageSize,currentPage:options.currentPage},!0,!0,Object(_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_3__.a)("format"),Object(_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_3__.a)("thumbnail")))),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.a)((rd=>{Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_9__.b)(rd.errorMessage)&&this.notificationsService.error(this.translateService.get("file-section.error.header"),`${rd.statusCode} ${rd.errorMessage}`)})))}hasValuesInBundle(bundle){return Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_9__.b)(bundle)&&!Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_9__.d)(bundle.page)}ngOnDestroy(){this.paginationService.clearPagination(this.originalOptions.id),this.paginationService.clearPagination(this.licenseOptions.id)}}FullFileSectionComponent.\u0275fac=function FullFileSectionComponent_Factory(t){return new(t||FullFileSectionComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_core_data_bitstream_data_service__WEBPACK_IMPORTED_MODULE_1__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_8__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_ngx_translate_core__WEBPACK_IMPORTED_MODULE_11__.e),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_core_pagination_pagination_service__WEBPACK_IMPORTED_MODULE_10__.a))},FullFileSectionComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineComponent"]({type:FullFileSectionComponent,selectors:[["ds-item-page-full-file-section"]],inputs:{item:"item"},features:[_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275InheritDefinitionFeature"]],decls:10,vars:9,consts:[[3,"label"],[4,"ngVar"],[4,"ngIf"],[1,"simple-view-element-header"],[3,"hideGear","hidePagerWhenSinglePage","paginationOptions","pageInfoState","collectionSize","retainScrollPosition",4,"ngIf"],[3,"hideGear","hidePagerWhenSinglePage","paginationOptions","pageInfoState","collectionSize","retainScrollPosition"],["class","file-section row mb-3",4,"ngFor","ngForOf"],[1,"file-section","row","mb-3"],[1,"col-3"],[3,"thumbnail"],[1,"col-7"],[1,"row"],[1,"col-md-4"],[1,"col-md-8"],[1,"col-2"],[3,"bitstream","item"],["class","file-section row",4,"ngFor","ngForOf"],[1,"file-section","row"]],template:function FullFileSectionComponent_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"ds-metadata-field-wrapper",0),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](1,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](2,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](3,FullFileSectionComponent_div_3_Template,4,1,"div",1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](4,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](5,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](6,FullFileSectionComponent_div_6_Template,4,1,"div",1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](7,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](8,"\n"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](9,"\n")),2&rf){let tmp_1_0=null,tmp_2_0=null;_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("label",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](1,3,ctx.label)),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngVar",null==(tmp_1_0=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](4,5,ctx.originals$))?null:tmp_1_0.payload),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngVar",null==(tmp_2_0=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](7,7,ctx.licenses$))?null:tmp_2_0.payload)}},directives:[_field_components_metadata_field_wrapper_metadata_field_wrapper_component__WEBPACK_IMPORTED_MODULE_12__.a,_shared_utils_var_directive__WEBPACK_IMPORTED_MODULE_13__.a,_angular_common__WEBPACK_IMPORTED_MODULE_14__.NgIf,_shared_pagination_pagination_component__WEBPACK_IMPORTED_MODULE_15__.a,_angular_common__WEBPACK_IMPORTED_MODULE_14__.NgForOf,_thumbnail_thumbnail_component__WEBPACK_IMPORTED_MODULE_16__.a,_shared_file_download_link_file_download_link_component__WEBPACK_IMPORTED_MODULE_17__.a],pipes:[_ngx_translate_core__WEBPACK_IMPORTED_MODULE_11__.d,_angular_common__WEBPACK_IMPORTED_MODULE_14__.AsyncPipe,_shared_utils_file_size_pipe__WEBPACK_IMPORTED_MODULE_18__.a],styles:["@media screen and (min-width:768px){dt[_ngcontent-%COMP%]{text-align:right}}"]})},mOAm:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return GROUP_EDIT_PATH})),__webpack_require__.d(__webpack_exports__,"b",(function(){return getGroupEditRoute}));var _core_url_combiner_url_combiner__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("zZO8"),_app_routing_paths__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("TVZh");const GROUP_EDIT_PATH="groups";function getGroupEditRoute(id){return new _core_url_combiner_url_combiner__WEBPACK_IMPORTED_MODULE_0__.a(Object(_app_routing_paths__WEBPACK_IMPORTED_MODULE_1__.m)(),GROUP_EDIT_PATH,id).toString()}},mXNY:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ViewTrackerComponent}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),angulartics2__WEBPACK_IMPORTED_MODULE_2__=(__webpack_require__("WIyL"),__webpack_require__("wQXg"));class ViewTrackerComponent{constructor(angulartics2){this.angulartics2=angulartics2}ngOnInit(){this.angulartics2.eventTrack.next({action:"pageView",properties:{object:this.object}})}}ViewTrackerComponent.\u0275fac=function ViewTrackerComponent_Factory(t){return new(t||ViewTrackerComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](angulartics2__WEBPACK_IMPORTED_MODULE_2__.a))},ViewTrackerComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineComponent"]({type:ViewTrackerComponent,selectors:[["ds-view-tracker"]],inputs:{object:"object"},decls:1,vars:0,template:function ViewTrackerComponent_Template(rf,ctx){1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](0,"\xa0\n")},styles:["[_nghost-%COMP%]{display:none}"]})},mo41:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return EditInPlaceFieldComponent}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),_core_shared_operators__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("1QIV"),_shared_empty_util__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("J3qs"),_core_registry_registry_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("Y6Ni"),lodash__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("LvDl"),rxjs__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("2Vo4"),rxjs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("LRne"),rxjs_operators__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("lJxs"),_core_data_object_updates_object_updates_actions__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("X8f1"),_core_data_object_updates_object_updates_service__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("loKC"),_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_11__=(__webpack_require__("cBt8"),__webpack_require__("84Zn")),_angular_common__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("ofXK"),_shared_input_suggestions_validation_suggestions_validation_suggestions_component__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("8pnQ"),_shared_utils_auto_focus_directive__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("aojn"),_angular_forms__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("3Pt+"),_shared_utils_click_outside_directive__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("awfb"),_shared_utils_debounce_directive__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("jOLk"),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("sYmb");function EditInPlaceFieldComponent_div_4_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n            "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](2,"span"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](4,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()),2&rf){const ctx_r0=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](null==ctx_r0.metadata||null==ctx_r0.metadata.key?null:ctx_r0.metadata.key.split(".").join(".\u200b"))}}const _c1=function(){return{standalone:!0}};function EditInPlaceFieldComponent_div_7_Template(rf,ctx){if(1&rf){const _r11=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275getCurrentView"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div",15),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n            "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](2,"ds-validation-suggestions",16,17),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("ngModelChange",(function EditInPlaceFieldComponent_div_7_Template_ds_validation_suggestions_ngModelChange_2_listener($event){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r11);return _angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]().metadata.key=$event}))("submitSuggestion",(function EditInPlaceFieldComponent_div_7_Template_ds_validation_suggestions_submitSuggestion_2_listener(){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r11);const _r9=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275reference"](3);return _angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]().update(_r9)}))("clickSuggestion",(function EditInPlaceFieldComponent_div_7_Template_ds_validation_suggestions_clickSuggestion_2_listener(){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r11);const _r9=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275reference"](3);return _angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]().update(_r9)}))("typeSuggestion",(function EditInPlaceFieldComponent_div_7_Template_ds_validation_suggestions_typeSuggestion_2_listener(){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r11);const _r9=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275reference"](3);return _angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]().update(_r9)}))("dsClickOutside",(function EditInPlaceFieldComponent_div_7_Template_ds_validation_suggestions_dsClickOutside_2_listener(){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r11);const _r9=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275reference"](3);return _angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]().checkValidity(_r9)}))("findSuggestions",(function EditInPlaceFieldComponent_div_7_Template_ds_validation_suggestions_findSuggestions_2_listener($event){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r11);return _angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]().findMetadataFieldSuggestions($event)})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](4,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](5,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](6,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()}if(2&rf){const ctx_r1=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("disable",1!=ctx_r1.fieldUpdate.changeType)("suggestions",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](4,7,ctx_r1.metadataFieldSuggestions))("ngModel",ctx_r1.metadata.key)("url",ctx_r1.url)("metadata",ctx_r1.metadata)("valid",!1!==_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](5,9,ctx_r1.valid))("ngModelOptions",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pureFunction0"](11,_c1))}}function EditInPlaceFieldComponent_small_10_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"small",18),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](2,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](2,1,"item.edit.metadata.metadatafield.invalid")))}function EditInPlaceFieldComponent_div_19_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n            "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](2,"span",19),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](4,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()),2&rf){const ctx_r3=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](null==ctx_r3.metadata?null:ctx_r3.metadata.value)}}function EditInPlaceFieldComponent_div_22_Template(rf,ctx){if(1&rf){const _r18=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275getCurrentView"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div",15),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n            "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](2,"textarea",20),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("ngModelChange",(function EditInPlaceFieldComponent_div_22_Template_textarea_ngModelChange_2_listener($event){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r18);return _angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]().metadata.value=$event}))("onDebounce",(function EditInPlaceFieldComponent_div_22_Template_textarea_onDebounce_2_listener(){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r18);return _angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]().update()})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()}if(2&rf){const ctx_r4=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngModel",ctx_r4.metadata.value)}}function EditInPlaceFieldComponent_div_31_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n            "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](2,"span"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](4,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()),2&rf){const ctx_r5=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](null==ctx_r5.metadata?null:ctx_r5.metadata.language)}}function EditInPlaceFieldComponent_div_34_Template(rf,ctx){if(1&rf){const _r21=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275getCurrentView"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div",15),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n            "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](2,"input",21),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("ngModelChange",(function EditInPlaceFieldComponent_div_34_Template_input_ngModelChange_2_listener($event){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r21);return _angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]().metadata.language=$event}))("onDebounce",(function EditInPlaceFieldComponent_div_34_Template_input_onDebounce_2_listener(){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r21);return _angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]().update()})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()}if(2&rf){const ctx_r6=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngModel",ctx_r6.metadata.language)}}function EditInPlaceFieldComponent_button_43_Template(rf,ctx){if(1&rf){const _r24=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275getCurrentView"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"button",22),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("click",(function EditInPlaceFieldComponent_button_43_Template_button_click_0_listener(){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r24);return _angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]().setEditable(!0)})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](1,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](2,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3,"\n            "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](4,"i",23),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](5,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()}if(2&rf){const ctx_r7=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275propertyInterpolate"]("title",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](2,4,"item.edit.metadata.edit.buttons.edit")),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("disabled",!_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](1,2,ctx_r7.canSetEditable()))}}function EditInPlaceFieldComponent_button_46_Template(rf,ctx){if(1&rf){const _r26=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275getCurrentView"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"button",24),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("click",(function EditInPlaceFieldComponent_button_46_Template_button_click_0_listener(){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r26);return _angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]().setEditable(!1)})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](1,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](2,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](3,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](4,"\n            "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](5,"i",25),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](6,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()}if(2&rf){const ctx_r8=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275propertyInterpolate"]("title",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](3,6,"item.edit.metadata.edit.buttons.unedit")),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("disabled",!_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](1,2,ctx_r8.canSetUneditable())||!1===_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](2,4,ctx_r8.valid))}}class EditInPlaceFieldComponent{constructor(registryService,objectUpdatesService){this.registryService=registryService,this.objectUpdatesService=objectUpdatesService,this.metadataFieldSuggestions=new rxjs__WEBPACK_IMPORTED_MODULE_5__.a([])}ngOnInit(){this.editable=this.objectUpdatesService.isEditable(this.url,this.metadata.uuid),this.valid=this.objectUpdatesService.isValid(this.url,this.metadata.uuid)}update(ngModel){this.objectUpdatesService.saveChangeFieldUpdate(this.url,Object(lodash__WEBPACK_IMPORTED_MODULE_4__.cloneDeep)(this.metadata)),Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_2__.b)(ngModel)&&this.checkValidity(ngModel)}checkValidity(ngModel){ngModel.control.setValue(ngModel.viewModel),ngModel.control.updateValueAndValidity(),this.objectUpdatesService.setValidFieldUpdate(this.url,this.metadata.uuid,ngModel.control.valid)}setEditable(editable){this.objectUpdatesService.setEditableFieldUpdate(this.url,this.metadata.uuid,editable)}remove(){this.objectUpdatesService.saveRemoveFieldUpdate(this.url,Object(lodash__WEBPACK_IMPORTED_MODULE_4__.cloneDeep)(this.metadata))}removeChangesFromField(){this.objectUpdatesService.removeSingleFieldUpdate(this.url,this.metadata.uuid)}ngOnChanges(){this.metadata=Object(lodash__WEBPACK_IMPORTED_MODULE_4__.cloneDeep)(this.fieldUpdate.field)}findMetadataFieldSuggestions(query){if(Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_2__.e)(query))return this.registryService.queryMetadataFields(query,null,!0,!1,Object(_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_11__.a)("schema")).pipe(Object(_core_shared_operators__WEBPACK_IMPORTED_MODULE_1__.i)(),Object(_core_shared_operators__WEBPACK_IMPORTED_MODULE_1__.r)()).subscribe((fieldNames=>{this.setInputSuggestions(fieldNames)}));this.metadataFieldSuggestions.next([])}setInputSuggestions(fields){this.metadataFieldSuggestions.next(fields.map((fieldName=>({displayValue:fieldName.split(".").join(".&#8203;"),value:fieldName}))))}canSetEditable(){return this.editable.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.a)((editable=>!editable&&this.fieldUpdate.changeType!==_core_data_object_updates_object_updates_actions__WEBPACK_IMPORTED_MODULE_8__.c.REMOVE)))}canSetUneditable(){return this.editable}canRemove(){return Object(rxjs__WEBPACK_IMPORTED_MODULE_6__.a)(this.fieldUpdate.changeType!==_core_data_object_updates_object_updates_actions__WEBPACK_IMPORTED_MODULE_8__.c.REMOVE&&this.fieldUpdate.changeType!==_core_data_object_updates_object_updates_actions__WEBPACK_IMPORTED_MODULE_8__.c.ADD)}canUndo(){return this.editable.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.a)((editable=>this.fieldUpdate.changeType>=0||editable)))}isNotEmpty(value){return Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_2__.e)(value)}}EditInPlaceFieldComponent.\u0275fac=function EditInPlaceFieldComponent_Factory(t){return new(t||EditInPlaceFieldComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_core_registry_registry_service__WEBPACK_IMPORTED_MODULE_3__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_core_data_object_updates_object_updates_service__WEBPACK_IMPORTED_MODULE_9__.a))},EditInPlaceFieldComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineComponent"]({type:EditInPlaceFieldComponent,selectors:[["","ds-edit-in-place-field",""]],inputs:{fieldUpdate:"fieldUpdate",url:"url",metadata:"metadata"},features:[_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275NgOnChangesFeature"]],attrs:["ds-edit-in-place-field",""],decls:65,vars:39,consts:[[1,"metadata-field"],[4,"ngIf"],["class","field-container",4,"ngIf"],["class","text-danger",4,"ngIf"],[1,"w-100"],[1,"value-field"],[1,"text-center"],[1,"language-field"],[1,"btn-group","edit-field"],["class","btn btn-outline-primary btn-sm",3,"disabled","title","click",4,"ngIf"],["class","btn btn-outline-success btn-sm",3,"disabled","title","click",4,"ngIf"],[1,"btn","btn-outline-danger","btn-sm",3,"disabled","title","click"],[1,"fas","fa-trash-alt","fa-fw"],[1,"btn","btn-outline-warning","btn-sm",3,"disabled","title","click"],[1,"fas","fa-undo-alt","fa-fw"],[1,"field-container"],["dsAutoFocus","","autoFocusSelector",".suggestion_input",3,"disable","suggestions","ngModel","url","metadata","valid","ngModelOptions","ngModelChange","submitSuggestion","clickSuggestion","typeSuggestion","dsClickOutside","findSuggestions"],["suggestionControl","ngModel"],[1,"text-danger"],[1,"dont-break-out"],["type","textarea","attr.aria-labelledby","fieldValue",1,"form-control",3,"ngModel","dsDebounce","ngModelChange","onDebounce"],["type","text","attr.aria-labelledby","fieldLang",1,"form-control",3,"ngModel","dsDebounce","ngModelChange","onDebounce"],[1,"btn","btn-outline-primary","btn-sm",3,"disabled","title","click"],[1,"fas","fa-edit","fa-fw"],[1,"btn","btn-outline-success","btn-sm",3,"disabled","title","click"],[1,"fas","fa-check","fa-fw"]],template:function EditInPlaceFieldComponent_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"td"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](2,"div",0),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](4,EditInPlaceFieldComponent_div_4_Template,5,1,"div",1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](5,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](6,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](7,EditInPlaceFieldComponent_div_7_Template,7,12,"div",2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](8,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](9,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](10,EditInPlaceFieldComponent_small_10_Template,3,3,"small",3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](11,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](12,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](13,"\n"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](14,"\n"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](15,"td",4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](16,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](17,"div",5),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](18,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](19,EditInPlaceFieldComponent_div_19_Template,5,1,"div",1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](20,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](21,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](22,EditInPlaceFieldComponent_div_22_Template,4,1,"div",2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](23,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](24,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](25,"\n"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](26,"\n"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](27,"td",6),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](28,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](29,"div",7),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](30,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](31,EditInPlaceFieldComponent_div_31_Template,5,1,"div",1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](32,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](33,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](34,EditInPlaceFieldComponent_div_34_Template,4,1,"div",2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](35,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](36,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](37,"\n"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](38,"\n"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](39,"td",6),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](40,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](41,"div",8),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](42,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](43,EditInPlaceFieldComponent_button_43_Template,6,6,"button",9),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](44,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](45,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](46,EditInPlaceFieldComponent_button_46_Template,7,8,"button",10),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](47,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](48,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](49,"button",11),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("click",(function EditInPlaceFieldComponent_Template_button_click_49_listener(){return ctx.remove()})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](50,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](51,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](52,"\n            "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](53,"i",12),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](54,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](55,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](56,"button",13),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("click",(function EditInPlaceFieldComponent_Template_button_click_56_listener(){return ctx.removeChangesFromField()})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](57,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](58,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](59,"\n            "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](60,"i",14),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](61,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](62,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](63,"\n"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](64,"\n")),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",!_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](5,13,ctx.editable)),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](8,15,ctx.editable)),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",!1===_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](11,17,ctx.valid)),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](9),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",!_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](20,19,ctx.editable)),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](23,21,ctx.editable)),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](9),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",!_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](32,23,ctx.editable)),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](35,25,ctx.editable)),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](9),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",!_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](44,27,ctx.editable)),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](47,29,ctx.editable)),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275propertyInterpolate"]("title",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](51,33,"item.edit.metadata.edit.buttons.remove")),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("disabled",!_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](50,31,ctx.canRemove())),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](7),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275propertyInterpolate"]("title",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](58,37,"item.edit.metadata.edit.buttons.undo")),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("disabled",!_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](57,35,ctx.canUndo())))},directives:[_angular_common__WEBPACK_IMPORTED_MODULE_12__.NgIf,_shared_input_suggestions_validation_suggestions_validation_suggestions_component__WEBPACK_IMPORTED_MODULE_13__.a,_shared_utils_auto_focus_directive__WEBPACK_IMPORTED_MODULE_14__.a,_angular_forms__WEBPACK_IMPORTED_MODULE_15__.NgControlStatus,_angular_forms__WEBPACK_IMPORTED_MODULE_15__.NgModel,_shared_utils_click_outside_directive__WEBPACK_IMPORTED_MODULE_16__.a,_angular_forms__WEBPACK_IMPORTED_MODULE_15__.DefaultValueAccessor,_shared_utils_debounce_directive__WEBPACK_IMPORTED_MODULE_17__.a],pipes:[_angular_common__WEBPACK_IMPORTED_MODULE_12__.AsyncPipe,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_18__.d],styles:[".btn[disabled][_ngcontent-%COMP%]{color:var(--bs-gray-600);border-color:var(--bs-gray-600);z-index:0}.metadata-field[_ngcontent-%COMP%]{width:var(--ds-edit-item-metadata-field-width)}.language-field[_ngcontent-%COMP%]{width:var(--ds-edit-item-language-field-width)}"]})},n1Qy:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ResourcePolicyTargetResolver}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),_core_cache_builders_build_decorators__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("zQ+x"),_core_shared_resource_type__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("+1Sv"),_empty_util__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("J3qs"),_core_shared_operators__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("1QIV"),_angular_router__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("tyNb");class ResourcePolicyTargetResolver{constructor(parentInjector,router){this.parentInjector=parentInjector,this.router=router}resolve(route,state){const targetType=route.queryParamMap.get("targetType"),policyTargetId=route.queryParamMap.get("policyTargetId");(Object(_empty_util__WEBPACK_IMPORTED_MODULE_3__.d)(targetType)||Object(_empty_util__WEBPACK_IMPORTED_MODULE_3__.d)(policyTargetId))&&this.router.navigateByUrl("/404",{skipLocationChange:!0});const provider=Object(_core_cache_builders_build_decorators__WEBPACK_IMPORTED_MODULE_1__.f)(new _core_shared_resource_type__WEBPACK_IMPORTED_MODULE_2__.a(targetType));return this.dataService=_angular_core__WEBPACK_IMPORTED_MODULE_0__.Injector.create({providers:[],parent:this.parentInjector}).get(provider),this.dataService.findById(policyTargetId).pipe(Object(_core_shared_operators__WEBPACK_IMPORTED_MODULE_4__.g)())}}ResourcePolicyTargetResolver.\u0275fac=function ResourcePolicyTargetResolver_Factory(t){return new(t||ResourcePolicyTargetResolver)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275inject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__.Injector),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275inject"](_angular_router__WEBPACK_IMPORTED_MODULE_5__.g))},ResourcePolicyTargetResolver.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineInjectable"]({token:ResourcePolicyTargetResolver,factory:ResourcePolicyTargetResolver.\u0275fac})},ph1m:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return SubmissionFormSectionAddComponent}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),rxjs_operators__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("lJxs"),_sections_sections_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("YJD6"),_shared_host_window_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("14tD"),_submission_service__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("J/vq"),_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("1kSV"),_angular_common__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("ofXK"),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("sYmb");function SubmissionFormSectionAddComponent_button_14_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"button",7),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](2,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate1"]("\n      ",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](2,1,"submission.sections.general.no-sections"),"\n    "))}function SubmissionFormSectionAddComponent_button_17_Template(rf,ctx){if(1&rf){const _r5=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275getCurrentView"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"button",8),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("click",(function SubmissionFormSectionAddComponent_button_17_Template_button_click_0_listener(){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r5);const listItem_r3=ctx.$implicit;return _angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]().addSection(listItem_r3.id)})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](2,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()}if(2&rf){const listItem_r3=ctx.$implicit;_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate1"]("\n      ",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](2,1,"submission.sections."+listItem_r3.header),"\n    ")}}const _c0=function(a0){return{"w-100":a0}};class SubmissionFormSectionAddComponent{constructor(sectionService,submissionService,windowService){this.sectionService=sectionService,this.submissionService=submissionService,this.windowService=windowService}ngOnInit(){this.sectionList$=this.submissionService.getDisabledSectionsList(this.submissionId),this.hasSections$=this.sectionList$.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_1__.a)((list=>list.length>0)))}addSection(sectionId){this.sectionService.addSection(this.submissionId,sectionId)}}SubmissionFormSectionAddComponent.\u0275fac=function SubmissionFormSectionAddComponent_Factory(t){return new(t||SubmissionFormSectionAddComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_sections_sections_service__WEBPACK_IMPORTED_MODULE_2__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_submission_service__WEBPACK_IMPORTED_MODULE_4__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_shared_host_window_service__WEBPACK_IMPORTED_MODULE_3__.a))},SubmissionFormSectionAddComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineComponent"]({type:SubmissionFormSectionAddComponent,selectors:[["ds-submission-form-section-add"]],inputs:{collectionId:"collectionId",submissionId:"submissionId"},decls:22,vars:25,consts:[["ngbDropdown","","placement","bottom-right",1,"d-inline-block",3,"ngClass"],["sectionAdd","ngbDropdown"],["id","sectionControls","ngbDropdownToggle","",1,"btn","btn-outline-primary","dropdown-toggle",3,"disabled","ngClass"],["aria-hidden","true",1,"fa","fa-plus"],["ngbDropdownMenu","","aria-labelledby","sectionControls",1,"sections-dropdown-menu",3,"ngClass"],["class","dropdown-item disabled",4,"ngIf"],["class","dropdown-item",3,"click",4,"ngFor","ngForOf"],[1,"dropdown-item","disabled"],[1,"dropdown-item",3,"click"]],template:function SubmissionFormSectionAddComponent_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div",0,1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](2,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](3,"button",2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](4,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](5,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](6),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](7,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](8,"i",3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](9,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](10,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](11,"div",4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](12,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](13,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](14,SubmissionFormSectionAddComponent_button_14_Template,3,3,"button",5),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](15,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](16,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](17,SubmissionFormSectionAddComponent_button_17_Template,3,3,"button",6),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](18,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](19,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](20,"\n"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](21,"\n")),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngClass",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pureFunction1"](19,_c0,ctx.windowService.isXs())),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("disabled",!_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](4,7,ctx.hasSections$))("ngClass",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pureFunction1"](21,_c0,_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](5,9,ctx.windowService.isXs()))),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate1"]("\n          ",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](7,11,"submission.sections.general.add-more")," "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](5),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngClass",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pureFunction1"](23,_c0,_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](12,13,ctx.windowService.isXs()))),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",!_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](15,15,ctx.hasSections$)),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngForOf",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](18,17,ctx.sectionList$)))},directives:[_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_5__.j,_angular_common__WEBPACK_IMPORTED_MODULE_6__.NgClass,_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_5__.o,_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_5__.m,_angular_common__WEBPACK_IMPORTED_MODULE_6__.NgIf,_angular_common__WEBPACK_IMPORTED_MODULE_6__.NgForOf],pipes:[_angular_common__WEBPACK_IMPORTED_MODULE_6__.AsyncPipe,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_7__.d],styles:[".dropdown-toggle[_ngcontent-%COMP%]:after{display:none}.sections-dropdown-menu[_ngcontent-%COMP%]{z-index:var(--ds-submission-header-z-index)}"]})},puXh:function(module,exports,__webpack_require__){var map={"./custom/app/item-page/full/full-item-page.component":["TgpW",50]};function webpackAsyncContext(req){if(!__webpack_require__.o(map,req))return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}));var ids=map[req],id=ids[0];return __webpack_require__.e(ids[1]).then((function(){return __webpack_require__(id)}))}webpackAsyncContext.keys=function webpackAsyncContextKeys(){return Object.keys(map)},webpackAsyncContext.id="puXh",module.exports=webpackAsyncContext},qK5G:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ThemedSubmissionImportExternalComponent}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),_shared_theme_support_themed_component__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("JTKQ");function ThemedSubmissionImportExternalComponent_ng_template_0_Template(rf,ctx){}class ThemedSubmissionImportExternalComponent extends _shared_theme_support_themed_component__WEBPACK_IMPORTED_MODULE_1__.a{getComponentName(){return"SubmissionImportExternalComponent"}importThemedComponent(themeName){return __webpack_require__("JHLN")(`./${themeName}/app/submission/import-external/submission-import-external.component`)}importUnthemedComponent(){return Promise.resolve().then(__webpack_require__.bind(null,"RMpN"))}}ThemedSubmissionImportExternalComponent.\u0275fac=function ThemedSubmissionImportExternalComponent_Factory(t){return \u0275ThemedSubmissionImportExternalComponent_BaseFactory(t||ThemedSubmissionImportExternalComponent)},ThemedSubmissionImportExternalComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineComponent"]({type:ThemedSubmissionImportExternalComponent,selectors:[["ds-themed-submission-import-external"]],features:[_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275InheritDefinitionFeature"]],decls:3,vars:0,consts:[["vcr",""]],template:function ThemedSubmissionImportExternalComponent_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](0,ThemedSubmissionImportExternalComponent_ng_template_0_Template,0,0,"ng-template",null,0,_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275templateRefExtractor"]),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](2,"\n"))},encapsulation:2});const \u0275ThemedSubmissionImportExternalComponent_BaseFactory=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275getInheritedFactory"](ThemedSubmissionImportExternalComponent)},tv3Y:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return I18nBreadcrumbsService}));var _breadcrumbs_breadcrumb_breadcrumb_model__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("zr/d"),rxjs__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("LRne"),_angular_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("fXoL");class I18nBreadcrumbsService{getBreadcrumbs(key,url){return Object(rxjs__WEBPACK_IMPORTED_MODULE_1__.a)([new _breadcrumbs_breadcrumb_breadcrumb_model__WEBPACK_IMPORTED_MODULE_0__.a(key+".breadcrumbs",url)])}}I18nBreadcrumbsService.\u0275fac=function I18nBreadcrumbsService_Factory(t){return new(t||I18nBreadcrumbsService)},I18nBreadcrumbsService.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275defineInjectable"]({token:I18nBreadcrumbsService,factory:I18nBreadcrumbsService.\u0275fac,providedIn:"root"})},wQzj:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return SubmissionFormCollectionComponent}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),rxjs__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("2Vo4"),rxjs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("LRne"),rxjs_operators__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("cBqT"),rxjs_operators__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("lJxs"),rxjs_operators__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("5+tZ"),_shared_empty_util__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("J3qs"),_core_json_patch_builder_json_patch_operation_path_combiner__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("0VLH"),_core_json_patch_builder_json_patch_operations_builder__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("BVmw"),_submission_service__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("J/vq"),_core_submission_submission_json_patch_operations_service__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("QjZv"),_core_data_collection_data_service__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("DNva"),_shared_collection_dropdown_collection_dropdown_component__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("Oqsf"),_sections_sections_service__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("YJD6"),_core_shared_operators__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("1QIV"),_sections_sections_type__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("4GeW"),_angular_common__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("ofXK"),_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("1kSV"),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("sYmb");function SubmissionFormCollectionComponent_div_2_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div",2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](2,"div",3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](4,"span",4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](5),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](6,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](7,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](8,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](9,"div",5),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](10,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](11,"span",4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](12),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](13,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](14,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](15,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()),2&rf){const ctx_r0=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](5),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](6,2,"submission.sections.general.collection")),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](7),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](13,4,ctx_r0.selectedCollectionName$))}}function SubmissionFormCollectionComponent_div_5_span_13_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"span"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](1,"i",13),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]())}function SubmissionFormCollectionComponent_div_5_span_16_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"span"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](2,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()),2&rf){const ctx_r4=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"](2);_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](2,1,ctx_r4.selectedCollectionName$))}}function SubmissionFormCollectionComponent_div_5_Template(rf,ctx){if(1&rf){const _r6=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275getCurrentView"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div",6,7),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("openChange",(function SubmissionFormCollectionComponent_div_5_Template_div_openChange_0_listener($event){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r6);return _angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]().toggled($event)})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](2,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](3,"div",3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](4,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](5,"span",8),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](6),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](7,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](8,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](9,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](10,"button",9),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("blur",(function SubmissionFormCollectionComponent_div_5_Template_button_blur_10_listener(){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r6);return _angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]().onClose()}))("click",(function SubmissionFormCollectionComponent_div_5_Template_button_click_10_listener(){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r6);return _angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]().onClose()})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](11,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](12,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](13,SubmissionFormCollectionComponent_div_5_span_13_Template,2,0,"span",10),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](14,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](15,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](16,SubmissionFormCollectionComponent_div_5_span_16_Template,3,3,"span",10),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](17,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](18,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](19,"\n\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](20,"div",11),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](21,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](22,"ds-collection-dropdown",12),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("selectionChange",(function SubmissionFormCollectionComponent_div_5_Template_ds_collection_dropdown_selectionChange_22_listener($event){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r6);return _angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]().onSelect($event)})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](23,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](24,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](25,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()}if(2&rf){const ctx_r1=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](6),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate1"]("\n        ",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](7,4,"submission.sections.general.collection"),"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("disabled",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](11,6,ctx_r1.processingChange$)),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](14,8,ctx_r1.processingChange$)),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",!_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](17,10,ctx_r1.processingChange$))}}class SubmissionFormCollectionComponent{constructor(cdr,collectionDataService,operationsBuilder,operationsService,submissionService,sectionsService){this.cdr=cdr,this.collectionDataService=collectionDataService,this.operationsBuilder=operationsBuilder,this.operationsService=operationsService,this.submissionService=submissionService,this.sectionsService=sectionsService,this.collectionChange=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.EventEmitter,this.processingChange$=new rxjs__WEBPACK_IMPORTED_MODULE_1__.a(!1),this.subs=[]}ngOnChanges(changes){Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_6__.b)(changes.currentCollectionId)&&Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_6__.b)(changes.currentCollectionId.currentValue)&&(this.selectedCollectionId=this.currentCollectionId,this.selectedCollectionName$=this.collectionDataService.findById(this.currentCollectionId).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.a)((collectionRD=>Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_6__.e)(collectionRD.payload))),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.a)((collectionRD=>collectionRD.payload.name))))}ngOnInit(){this.pathCombiner=new _core_json_patch_builder_json_patch_operation_path_combiner__WEBPACK_IMPORTED_MODULE_7__.a("sections","collection"),this.available$=this.sectionsService.isSectionTypeAvailable(this.submissionId,_sections_sections_type__WEBPACK_IMPORTED_MODULE_15__.a.collection)}ngOnDestroy(){this.subs.filter((sub=>Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_6__.b)(sub))).forEach((sub=>sub.unsubscribe()))}onSelect(event){this.processingChange$.next(!0),this.operationsBuilder.replace(this.pathCombiner.getPath(),event.collection.id,!0),this.subs.push(this.operationsService.jsonPatchByResourceID(this.submissionService.getSubmissionObjectLinkName(),this.submissionId,"sections","collection").pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.a)((submissionObject=>this.submissionService.retrieveSubmission(submissionObject[0].id).pipe(Object(_core_shared_operators__WEBPACK_IMPORTED_MODULE_14__.j)())))).subscribe((submissionObject=>{this.selectedCollectionId=event.collection.id,this.selectedCollectionName$=Object(rxjs__WEBPACK_IMPORTED_MODULE_2__.a)(event.collection.name),this.collectionChange.emit(submissionObject),this.submissionService.changeSubmissionCollection(this.submissionId,event.collection.id),this.processingChange$.next(!1),this.cdr.detectChanges()})))}onClose(){this.collectionDropdown.reset()}toggled(isOpen){isOpen||this.collectionDropdown.reset()}}SubmissionFormCollectionComponent.\u0275fac=function SubmissionFormCollectionComponent_Factory(t){return new(t||SubmissionFormCollectionComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__.ChangeDetectorRef),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_core_data_collection_data_service__WEBPACK_IMPORTED_MODULE_11__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_core_json_patch_builder_json_patch_operations_builder__WEBPACK_IMPORTED_MODULE_8__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_core_submission_submission_json_patch_operations_service__WEBPACK_IMPORTED_MODULE_10__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_submission_service__WEBPACK_IMPORTED_MODULE_9__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_sections_sections_service__WEBPACK_IMPORTED_MODULE_13__.a))},SubmissionFormCollectionComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineComponent"]({type:SubmissionFormCollectionComponent,selectors:[["ds-submission-form-collection"]],viewQuery:function SubmissionFormCollectionComponent_Query(rf,ctx){if(1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275viewQuery"](_shared_collection_dropdown_collection_dropdown_component__WEBPACK_IMPORTED_MODULE_12__.a,1),2&rf){let _t;_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275queryRefresh"](_t=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275loadQuery"]())&&(ctx.collectionDropdown=_t.first)}},inputs:{currentCollectionId:"currentCollectionId",currentDefinition:"currentDefinition",submissionId:"submissionId"},outputs:{collectionChange:"collectionChange"},features:[_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275NgOnChangesFeature"]],decls:9,vars:6,consts:[["class","input-group mb-3",4,"ngIf"],["ngbDropdown","","class","btn-group input-group",3,"openChange",4,"ngIf"],[1,"input-group","mb-3"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"input-group-append"],["ngbDropdown","",1,"btn-group","input-group",3,"openChange"],["collectionControls","ngbDropdown"],["id","collectionControlsMenuLabel",1,"input-group-text"],["aria-describedby","collectionControlsMenuLabel","id","collectionControlsMenuButton","ngbDropdownToggle","",1,"btn","btn-outline-primary",3,"disabled","blur","click"],[4,"ngIf"],["ngbDropdownMenu","","id","collectionControlsDropdownMenu","aria-labelledby","collectionControlsMenuButton",1,"dropdown-menu"],[3,"selectionChange"],[1,"fas","fa-circle-notch","fa-spin"]],template:function SubmissionFormCollectionComponent_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](2,SubmissionFormCollectionComponent_div_2_Template,16,6,"div",0),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](3,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](4,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](5,SubmissionFormCollectionComponent_div_5_Template,26,12,"div",1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](6,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](7,"\n"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](8,"\n")),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",!_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](3,2,ctx.available$)),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](6,4,ctx.available$)))},directives:[_angular_common__WEBPACK_IMPORTED_MODULE_16__.NgIf,_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_17__.j,_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_17__.o,_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_17__.m,_shared_collection_dropdown_collection_dropdown_component__WEBPACK_IMPORTED_MODULE_12__.a],pipes:[_angular_common__WEBPACK_IMPORTED_MODULE_16__.AsyncPipe,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_18__.d],styles:[".scrollable-menu[_ngcontent-%COMP%]{height:auto;max-height:var(--ds-dropdown-menu-max-height);overflow-x:hidden}.collection-item[_ngcontent-%COMP%]{border-bottom:var(--bs-dropdown-border-width) solid var(--bs-dropdown-border-color)}#collectionControlsDropdownMenu[_ngcontent-%COMP%]{outline:0;left:0!important;-webkit-box-shadow:var(--bs-btn-focus-box-shadow);box-shadow:var(--bs-btn-focus-box-shadow)}"]})},wzod:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"FullItemPageComponent",(function(){return FullItemPageComponent}));var rxjs_operators__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("lJxs"),rxjs_operators__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("pLZG"),_angular_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("fXoL"),_simple_item_page_component__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("bLws"),_core_data_item_data_service__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("iqTE"),_shared_animations_fade__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("mEo1"),_shared_empty_util__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("J3qs"),_core_auth_auth_service__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("Vurf"),_angular_router__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("tyNb"),_angular_common__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("ofXK"),_shared_utils_var_directive__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("O/5o"),_shared_item_item_alerts_item_alerts_component__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("UX6V"),_shared_item_item_versions_notice_item_versions_notice_component__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("6xaB"),_statistics_angulartics_dspace_view_tracker_component__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("mXNY"),_simple_field_components_specific_field_title_item_page_title_field_component__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("7Ido"),_shared_dso_page_dso_page_edit_button_dso_page_edit_button_component__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("uVW2"),_field_components_file_section_full_file_section_component__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("mJyT"),_field_components_collections_collections_component__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("xsD3"),_shared_item_item_versions_item_versions_component__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("Y9an"),_shared_error_error_component__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("HZwm"),_shared_loading_loading_component__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("Frqi"),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("sYmb");const _c0=function(a0){return[a0]};function FullItemPageComponent_div_0_div_2_div_2_div_19_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275elementStart"](0,"div",17),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275text"](1,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275elementStart"](2,"a",18),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275pipe"](3,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275text"](4),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275pipe"](5,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275text"](6,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275elementEnd"]()),2&rf){const ctx_r7=_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275nextContext"](4);_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275property"]("routerLink",_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275pureFunction1"](6,_c0,_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275pipeBind1"](3,2,ctx_r7.itemPageRoute$))),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275textInterpolate1"]("\n          ",_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275pipeBind1"](5,4,"item.page.link.simple"),"\n        ")}}function FullItemPageComponent_div_0_div_2_div_2_ng_container_25_tr_2_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275elementStart"](0,"tr"),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275text"](1,"\n              "),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275elementStart"](2,"td"),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275text"](3),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275text"](4,"\n              "),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275elementStart"](5,"td"),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275text"](6),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275text"](7,"\n              "),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275elementStart"](8,"td"),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275text"](9),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275text"](10,"\n            "),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275elementEnd"]()),2&rf){const mdValue_r12=ctx.$implicit,mdEntry_r10=_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275nextContext"]().$implicit;_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275textInterpolate"](mdEntry_r10.key),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275textInterpolate"](mdValue_r12.value),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275textInterpolate"](mdValue_r12.language)}}function FullItemPageComponent_div_0_div_2_div_2_ng_container_25_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275elementContainerStart"](0),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275text"](1,"\n            "),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275template"](2,FullItemPageComponent_div_0_div_2_div_2_ng_container_25_tr_2_Template,11,3,"tr",14),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275text"](3,"\n          "),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275elementContainerEnd"]()),2&rf){const mdEntry_r10=ctx.$implicit;_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275property"]("ngForOf",mdEntry_r10.value)}}function FullItemPageComponent_div_0_div_2_div_2_div_37_Template(rf,ctx){if(1&rf){const _r15=_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275getCurrentView"]();_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275elementStart"](0,"div",19),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275text"](1,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275elementStart"](2,"div",20),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275text"](3,"\n          "),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275elementStart"](4,"button",21),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275listener"]("click",(function FullItemPageComponent_div_0_div_2_div_2_div_37_Template_button_click_4_listener(){_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275restoreView"](_r15);return _angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275nextContext"](4).back()})),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275element"](5,"i",22),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275text"](6),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275pipe"](7,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275text"](8,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275text"](9,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275elementEnd"]()}2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275advance"](6),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275textInterpolate1"](" ",_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275pipeBind1"](7,1,"item.page.return"),""))}function FullItemPageComponent_div_0_div_2_div_2_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275elementStart"](0,"div"),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275text"](1,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275element"](2,"ds-item-alerts",6),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275text"](3,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275element"](4,"ds-item-versions-notice",6),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275text"](5,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275element"](6,"ds-view-tracker",7),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275text"](7,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275elementStart"](8,"div",8),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275text"](9,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275element"](10,"ds-item-page-title-field",9),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275text"](11,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275elementStart"](12,"div",10),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275text"](13,"\n          "),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275element"](14,"ds-dso-page-edit-button",11),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275pipe"](15,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275text"](16,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275text"](17,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275text"](18,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275template"](19,FullItemPageComponent_div_0_div_2_div_2_div_19_Template,7,8,"div",12),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275text"](20,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275elementStart"](21,"table",13),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275text"](22,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275elementStart"](23,"tbody"),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275text"](24,"\n          "),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275template"](25,FullItemPageComponent_div_0_div_2_div_2_ng_container_25_Template,4,1,"ng-container",14),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275pipe"](26,"keyvalue"),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275pipe"](27,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275text"](28,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275text"](29,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275text"](30,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275element"](31,"ds-item-page-full-file-section",6),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275text"](32,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275element"](33,"ds-item-page-collections",6),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275text"](34,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275element"](35,"ds-item-versions",15),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275text"](36,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275template"](37,FullItemPageComponent_div_0_div_2_div_2_div_37_Template,10,3,"div",16),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275text"](38,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275elementEnd"]()),2&rf){const item_r6=ctx.ngIf,ctx_r5=_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275nextContext"](3);_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275property"]("item",item_r6),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275property"]("item",item_r6),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275property"]("object",item_r6),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275advance"](4),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275property"]("item",item_r6),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275advance"](4),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275property"]("pageRoute",_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275pipeBind1"](15,13,ctx_r5.itemPageRoute$))("dso",item_r6)("tooltipMsg","item.page.edit"),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275advance"](5),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275property"]("ngIf",!ctx_r5.fromWfi),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275advance"](6),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275property"]("ngForOf",_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275pipeBind1"](26,15,_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275pipeBind1"](27,17,ctx_r5.metadata$))),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275advance"](6),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275property"]("item",item_r6),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275property"]("item",item_r6),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275property"]("item",item_r6),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275property"]("ngIf",ctx_r5.fromWfi)}}function FullItemPageComponent_div_0_div_2_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275elementStart"](0,"div",4),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275text"](1,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275template"](2,FullItemPageComponent_div_0_div_2_div_2_Template,39,19,"div",5),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275text"](3,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275elementEnd"]()),2&rf){const itemRD_r1=_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275nextContext"]().ngVar;_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275property"]("@fadeInOut",void 0),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275property"]("ngIf",null==itemRD_r1?null:itemRD_r1.payload)}}function FullItemPageComponent_div_0_ds_error_4_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275element"](0,"ds-error",23),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275pipe"](1,"translate")),2&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275propertyInterpolate"]("message",_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275pipeBind1"](1,1,"error.item"))}function FullItemPageComponent_div_0_ds_loading_6_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275element"](0,"ds-loading",23),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275pipe"](1,"translate")),2&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275propertyInterpolate"]("message",_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275pipeBind1"](1,1,"loading.item"))}function FullItemPageComponent_div_0_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275elementStart"](0,"div",1),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275text"](1,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275template"](2,FullItemPageComponent_div_0_div_2_Template,4,2,"div",2),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275text"](3,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275template"](4,FullItemPageComponent_div_0_ds_error_4_Template,2,3,"ds-error",3),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275text"](5,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275template"](6,FullItemPageComponent_div_0_ds_loading_6_Template,2,3,"ds-loading",3),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275text"](7,"\n"),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275elementEnd"]()),2&rf){const itemRD_r1=ctx.ngVar;_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275property"]("ngIf",null==itemRD_r1?null:itemRD_r1.hasSucceeded),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275property"]("ngIf",null==itemRD_r1?null:itemRD_r1.hasFailed),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275property"]("ngIf",null==itemRD_r1?null:itemRD_r1.isLoading)}}class FullItemPageComponent extends _simple_item_page_component__WEBPACK_IMPORTED_MODULE_3__.ItemPageComponent{constructor(route,router,items,authService,_location){super(route,router,items,authService),this.route=route,this._location=_location,this.fromWfi=!1,this.subs=[]}ngOnInit(){super.ngOnInit(),this.metadata$=this.itemRD$.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_0__.a)((rd=>rd.payload)),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_1__.a)((item=>Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_6__.b)(item))),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_0__.a)((item=>item.metadata))),this.subs.push(this.route.data.subscribe((data=>{this.fromWfi=Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_6__.b)(data.wfi)})))}back(){this._location.back()}ngOnDestroy(){this.subs.filter((sub=>Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_6__.b)(sub))).forEach((sub=>sub.unsubscribe()))}}FullItemPageComponent.\u0275fac=function FullItemPageComponent_Factory(t){return new(t||FullItemPageComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275directiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_8__.a),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275directiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_8__.g),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275directiveInject"](_core_data_item_data_service__WEBPACK_IMPORTED_MODULE_4__.a),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275directiveInject"](_core_auth_auth_service__WEBPACK_IMPORTED_MODULE_7__.a),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275directiveInject"](_angular_common__WEBPACK_IMPORTED_MODULE_9__.Location))},FullItemPageComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275defineComponent"]({type:FullItemPageComponent,selectors:[["ds-full-item-page"]],features:[_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275InheritDefinitionFeature"]],decls:3,vars:3,consts:[["class","container",4,"ngVar"],[1,"container"],["class","item-page",4,"ngIf"],[3,"message",4,"ngIf"],[1,"item-page"],[4,"ngIf"],[3,"item"],[3,"object"],[1,"d-flex","flex-row"],[1,"mr-auto",3,"item"],[1,"pl-2"],[3,"pageRoute","dso","tooltipMsg"],["class","simple-view-link my-3",4,"ngIf"],[1,"table","table-responsive","table-striped"],[4,"ngFor","ngForOf"],[1,"mt-2",3,"item"],["class","button-row bottom",4,"ngIf"],[1,"simple-view-link","my-3"],[1,"btn","btn-outline-primary",3,"routerLink"],[1,"button-row","bottom"],[1,"text-right"],[1,"btn","btn-outline-secondary","mr-1",3,"click"],[1,"fas","fa-arrow-left"],[3,"message"]],template:function FullItemPageComponent_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275template"](0,FullItemPageComponent_div_0_Template,8,3,"div",0),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275pipe"](1,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275text"](2,"\n")),2&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275property"]("ngVar",_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275pipeBind1"](1,1,ctx.itemRD$))},directives:[_shared_utils_var_directive__WEBPACK_IMPORTED_MODULE_10__.a,_angular_common__WEBPACK_IMPORTED_MODULE_9__.NgIf,_shared_item_item_alerts_item_alerts_component__WEBPACK_IMPORTED_MODULE_11__.a,_shared_item_item_versions_notice_item_versions_notice_component__WEBPACK_IMPORTED_MODULE_12__.a,_statistics_angulartics_dspace_view_tracker_component__WEBPACK_IMPORTED_MODULE_13__.a,_simple_field_components_specific_field_title_item_page_title_field_component__WEBPACK_IMPORTED_MODULE_14__.a,_shared_dso_page_dso_page_edit_button_dso_page_edit_button_component__WEBPACK_IMPORTED_MODULE_15__.a,_angular_common__WEBPACK_IMPORTED_MODULE_9__.NgForOf,_field_components_file_section_full_file_section_component__WEBPACK_IMPORTED_MODULE_16__.a,_field_components_collections_collections_component__WEBPACK_IMPORTED_MODULE_17__.a,_shared_item_item_versions_item_versions_component__WEBPACK_IMPORTED_MODULE_18__.a,_angular_router__WEBPACK_IMPORTED_MODULE_8__.j,_shared_error_error_component__WEBPACK_IMPORTED_MODULE_19__.a,_shared_loading_loading_component__WEBPACK_IMPORTED_MODULE_20__.a],pipes:[_angular_common__WEBPACK_IMPORTED_MODULE_9__.AsyncPipe,_angular_common__WEBPACK_IMPORTED_MODULE_9__.KeyValuePipe,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_21__.d],styles:["[_nghost-%COMP%]   div.simple-view-link[_ngcontent-%COMP%]{text-align:center}[_nghost-%COMP%]   div.simple-view-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{min-width:25%}"],data:{animation:[_shared_animations_fade__WEBPACK_IMPORTED_MODULE_5__.c]},changeDetection:0})},xSRh:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"SearchPageComponent",(function(){return SearchPageComponent}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),_my_dspace_page_my_dspace_page_component__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("dtp9"),_core_shared_search_search_configuration_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("joI/"),_shared_search_search_component__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("9H8w"),_search_tracker_component__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("TrCT");class SearchPageComponent{}SearchPageComponent.\u0275fac=function SearchPageComponent_Factory(t){return new(t||SearchPageComponent)},SearchPageComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineComponent"]({type:SearchPageComponent,selectors:[["ds-search-page"]],features:[_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275ProvidersFeature"]([{provide:_my_dspace_page_my_dspace_page_component__WEBPACK_IMPORTED_MODULE_1__.SEARCH_CONFIG_SERVICE,useClass:_core_shared_search_search_configuration_service__WEBPACK_IMPORTED_MODULE_2__.a}])],decls:4,vars:0,template:function SearchPageComponent_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](0,"ds-search"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](2,"ds-search-tracker"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3,"\n"))},directives:[_shared_search_search_component__WEBPACK_IMPORTED_MODULE_3__.a,_search_tracker_component__WEBPACK_IMPORTED_MODULE_4__.a],encapsulation:2})},yAsG:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return SubmissionFormFooterComponent}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),rxjs__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("LRne"),rxjs_operators__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("lJxs"),_core_submission_submission_rest_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("8nsN"),_submission_service__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("J/vq"),_core_submission_submission_scope_type__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("drGc"),_shared_empty_util__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("J3qs"),_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("1kSV"),_angular_common__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("ofXK"),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("sYmb");function SubmissionFormFooterComponent_div_0_button_4_Template(rf,ctx){if(1&rf){const _r9=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275getCurrentView"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"button",13),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("click",(function SubmissionFormFooterComponent_div_0_button_4_Template_button_click_0_listener($event){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r9);const ctx_r8=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"](2),_r1=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275reference"](3);return $event.preventDefault(),ctx_r8.confirmDiscard(_r1)})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](1,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](2,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](4,"i",14),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](5),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](6,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()}if(2&rf){const ctx_r3=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"](2);_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("disabled",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](1,2,ctx_r3.processingSaveStatus)||_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](2,4,ctx_r3.processingDepositStatus)),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](5),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate1"](" ",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](6,6,"submission.general.discard.submit"),"\n    ")}}function SubmissionFormFooterComponent_div_0_span_10_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"span"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](2,"i",15),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](4,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate1"](" ",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](4,1,"submission.general.info.saved"),"\n    "))}function SubmissionFormFooterComponent_div_0_span_15_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"span"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](2,"i",16),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](4,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate1"](" ",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](4,1,"submission.general.info.pending-changes"),"\n    "))}function SubmissionFormFooterComponent_div_0_div_20_div_4_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div",20),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"Saving..."),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()),2&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275styleProp"]("width","100%")}function SubmissionFormFooterComponent_div_0_div_20_div_7_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div",20),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"Depositing..."),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()),2&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275styleProp"]("width","100%")}function SubmissionFormFooterComponent_div_0_div_20_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div",17),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](2,"div",18),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](4,SubmissionFormFooterComponent_div_0_div_20_div_4_Template,2,2,"div",19),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](5,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](6,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](7,SubmissionFormFooterComponent_div_0_div_20_div_7_Template,2,2,"div",19),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](8,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](9,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](10,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()),2&rf){const ctx_r6=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"](2);_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](5,2,ctx_r6.processingSaveStatus)),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](8,4,ctx_r6.processingDepositStatus))}}function SubmissionFormFooterComponent_div_0_button_48_Template(rf,ctx){if(1&rf){const _r13=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275getCurrentView"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"button",21),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("click",(function SubmissionFormFooterComponent_div_0_button_48_Template_button_click_0_listener($event){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r13);return _angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"](2).deposit($event)})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](1,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](2,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](4,"span"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](5,"i",22),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](6),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](7,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](8,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()}if(2&rf){const ctx_r7=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"](2);_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("disabled",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](1,2,ctx_r7.processingSaveStatus)||_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](2,4,ctx_r7.processingDepositStatus)),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](6),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate1"](" ",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](7,6,"submission.general.deposit"),"")}}function SubmissionFormFooterComponent_div_0_Template(rf,ctx){if(1&rf){const _r15=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275getCurrentView"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div",2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](2,"div",3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](4,SubmissionFormFooterComponent_div_0_button_4_Template,7,8,"button",4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](5,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](6,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](7,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](8,"div",5),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](9,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](10,SubmissionFormFooterComponent_div_0_span_10_Template,5,3,"span",6),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](11,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](12,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](13,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](14,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](15,SubmissionFormFooterComponent_div_0_span_15_Template,5,3,"span",6),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](16,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](17,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](18,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](19,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](20,SubmissionFormFooterComponent_div_0_div_20_Template,11,6,"div",7),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](21,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](22,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](23,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](24,"div",8),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](25,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](26,"button",9),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("click",(function SubmissionFormFooterComponent_div_0_Template_button_click_26_listener($event){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r15);return _angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]().save($event)})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](27,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](28,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](29,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](30,"span"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](31,"i",10),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](32),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](33,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](34,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](35,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](36,"button",11),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("click",(function SubmissionFormFooterComponent_div_0_Template_button_click_36_listener($event){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r15);return _angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]().saveLater($event)})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](37,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](38,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](39,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](40,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](41,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](42,"span"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](43,"i",10),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](44),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](45,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](46,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](47,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](48,SubmissionFormFooterComponent_div_0_button_48_Template,9,8,"button",12),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](49,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](50,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](51,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](52,"\n"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()}if(2&rf){const ctx_r0=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](5,13,ctx_r0.showDepositAndDiscard)),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](6),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",!_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](11,15,ctx_r0.hasUnsavedModification)&&!_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](12,17,ctx_r0.processingSaveStatus)&&!_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](13,19,ctx_r0.processingDepositStatus)),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](5),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](16,21,ctx_r0.hasUnsavedModification)&&!_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](17,23,ctx_r0.processingSaveStatus)&&!_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](18,25,ctx_r0.processingDepositStatus)),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](5),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](21,27,ctx_r0.processingSaveStatus)||_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](22,29,ctx_r0.processingDepositStatus)),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](6),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("disabled",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](27,31,ctx_r0.processingSaveStatus)||!_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](28,33,ctx_r0.hasUnsavedModification)),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](6),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate1"](" ",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](33,35,"submission.general.save"),""),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275classProp"]("btn-primary",!_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](37,37,ctx_r0.showDepositAndDiscard))("btn-secondary",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](38,39,ctx_r0.showDepositAndDiscard)),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("disabled",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](39,41,ctx_r0.processingSaveStatus)||_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](40,43,ctx_r0.processingDepositStatus)),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](8),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate1"](" ",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](45,45,"submission.general.save-later"),""),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](49,47,ctx_r0.showDepositAndDiscard))}}function SubmissionFormFooterComponent_ng_template_2_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](0,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](1,"div",23),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](2,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](3,"h4",24),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](5,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](6,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](7,"button",25),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("click",(function SubmissionFormFooterComponent_ng_template_2_Template_button_click_7_listener(){return(0,ctx.dismiss)("cancel")})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](8,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](9,"span",26),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](10,"\xd7"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](11,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](12,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](13,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](14,"div",27),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](15,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](16,"p"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](17),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](18,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](19,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](20,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](21,"div",28),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](22,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](23,"button",29),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("click",(function SubmissionFormFooterComponent_ng_template_2_Template_button_click_23_listener(){return(0,ctx.close)("cancel")})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](24),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](25,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](26,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](27,"button",30),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("click",(function SubmissionFormFooterComponent_ng_template_2_Template_button_click_27_listener(){return(0,ctx.close)("ok")})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](28),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](29,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](30,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](31,"\n")),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](5,4,"submission.general.discard.confirm.title")),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](13),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](18,6,"submission.general.discard.confirm.info")),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](7),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](25,8,"submission.general.discard.confirm.cancel")),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](29,10,"submission.general.discard.confirm.submit")))}class SubmissionFormFooterComponent{constructor(modalService,restService,submissionService){this.modalService=modalService,this.restService=restService,this.submissionService=submissionService,this.submissionIsInvalid=Object(rxjs__WEBPACK_IMPORTED_MODULE_1__.a)(!0)}ngOnChanges(changes){Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_6__.e)(this.submissionId)&&(this.submissionIsInvalid=this.submissionService.getSubmissionStatus(this.submissionId).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.a)((isValid=>!1===isValid))),this.processingSaveStatus=this.submissionService.getSubmissionSaveProcessingStatus(this.submissionId),this.processingDepositStatus=this.submissionService.getSubmissionDepositProcessingStatus(this.submissionId),this.showDepositAndDiscard=Object(rxjs__WEBPACK_IMPORTED_MODULE_1__.a)(this.submissionService.getSubmissionScope()===_core_submission_submission_scope_type__WEBPACK_IMPORTED_MODULE_5__.a.WorkspaceItem),this.hasUnsavedModification=this.submissionService.hasUnsavedModification())}save(event){this.submissionService.dispatchSave(this.submissionId,!0)}saveLater(event){this.submissionService.dispatchSaveForLater(this.submissionId)}deposit(event){this.submissionService.dispatchDeposit(this.submissionId)}confirmDiscard(content){this.modalService.open(content).result.then((result=>{"ok"===result&&this.submissionService.dispatchDiscard(this.submissionId)}))}}SubmissionFormFooterComponent.\u0275fac=function SubmissionFormFooterComponent_Factory(t){return new(t||SubmissionFormFooterComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_7__.q),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_core_submission_submission_rest_service__WEBPACK_IMPORTED_MODULE_3__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_submission_service__WEBPACK_IMPORTED_MODULE_4__.a))},SubmissionFormFooterComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineComponent"]({type:SubmissionFormFooterComponent,selectors:[["ds-submission-form-footer"]],inputs:{submissionId:"submissionId"},features:[_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275NgOnChangesFeature"]],decls:5,vars:1,consts:[["class","row",4,"ngIf"],["content",""],[1,"row"],[1,"col"],["type","button","class","btn btn-danger",3,"disabled","click",4,"ngIf"],[1,"col","text-right","d-flex","justify-content-end","align-items-center"],[4,"ngIf"],["class","col d-flex justify-content-end align-items-center",4,"ngIf"],[1,"ml-2"],["type","button","id","save",1,"btn","btn-secondary",3,"disabled","click"],[1,"fas","fa-save"],["type","button","id","saveForLater",1,"btn",3,"disabled","click"],["type","button","class","btn btn-success",3,"disabled","click",4,"ngIf"],["type","button",1,"btn","btn-danger",3,"disabled","click"],[1,"fas","fa-trash"],[1,"fas","fa-check-circle"],[1,"fas","fa-exclamation-circle"],[1,"col","d-flex","justify-content-end","align-items-center"],[1,"progress","w-75"],["class","progress-bar progress-bar-striped progress-bar-animated bg-info","role","progressbar","aria-valuenow","100","aria-valuemin","0","aria-valuemax","100",3,"width",4,"ngIf"],["role","progressbar","aria-valuenow","100","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","progress-bar-striped","progress-bar-animated","bg-info"],["type","button",1,"btn","btn-success",3,"disabled","click"],[1,"fas","fa-plus"],[1,"modal-header"],[1,"modal-title","text-danger"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-danger",3,"click"]],template:function SubmissionFormFooterComponent_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](0,SubmissionFormFooterComponent_div_0_Template,53,49,"div",0),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n\n"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](2,SubmissionFormFooterComponent_ng_template_2_Template,32,12,"ng-template",null,1,_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275templateRefExtractor"]),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](4,"\n")),2&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",!!ctx.submissionId)},directives:[_angular_common__WEBPACK_IMPORTED_MODULE_8__.NgIf],pipes:[_angular_common__WEBPACK_IMPORTED_MODULE_8__.AsyncPipe,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_9__.d],styles:[""]})},"z3/6":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ItemPageResolver}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),_core_data_item_data_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("iqTE"),rxjs_operators__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("lJxs"),_shared_empty_util__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("J3qs"),_item_page_routing_paths__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("Xioo"),_item_resolver__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("kGaT"),_ngrx_store__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("l7P3"),_angular_router__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("tyNb");class ItemPageResolver extends _item_resolver__WEBPACK_IMPORTED_MODULE_5__.b{constructor(itemService,store,router){super(itemService,store,router),this.itemService=itemService,this.store=store,this.router=router}resolve(route,state){return super.resolve(route,state).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.a)((rd=>{if(rd.hasSucceeded&&Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_3__.b)(rd.payload)){const itemRoute=Object(_item_page_routing_paths__WEBPACK_IMPORTED_MODULE_4__.h)(rd.payload),thisRoute=state.url;if(!thisRoute.startsWith(itemRoute)){const itemId=rd.payload.uuid,subRoute=thisRoute.substring(thisRoute.indexOf(itemId)+itemId.length,thisRoute.length);this.router.navigateByUrl(itemRoute+subRoute)}}return rd})))}}ItemPageResolver.\u0275fac=function ItemPageResolver_Factory(t){return new(t||ItemPageResolver)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275inject"](_core_data_item_data_service__WEBPACK_IMPORTED_MODULE_1__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275inject"](_ngrx_store__WEBPACK_IMPORTED_MODULE_6__.i),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275inject"](_angular_router__WEBPACK_IMPORTED_MODULE_7__.g))},ItemPageResolver.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineInjectable"]({token:ItemPageResolver,factory:ItemPageResolver.\u0275fac})},"zr/d":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return Breadcrumb}));class Breadcrumb{constructor(text,url){this.text=text,this.url=url}}}};