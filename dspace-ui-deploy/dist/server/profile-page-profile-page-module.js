exports.ids=[4],exports.modules={A0IO:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return I18nBreadcrumbResolver}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),_i18n_breadcrumbs_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("tv3Y"),_shared_empty_util__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("J3qs"),_shared_utils_route_utils__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("q5u1");class I18nBreadcrumbResolver{constructor(breadcrumbService){this.breadcrumbService=breadcrumbService}resolve(route,state){const key=route.data.breadcrumbKey;if(Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_2__.a)(key))throw new Error('You provided an i18nBreadcrumbResolver for url "'+route.url+"\" but no breadcrumbKey in the route's data");const fullPath=Object(_shared_utils_route_utils__WEBPACK_IMPORTED_MODULE_3__.b)(route);return{provider:this.breadcrumbService,key:key,url:fullPath}}}I18nBreadcrumbResolver.\u0275fac=function I18nBreadcrumbResolver_Factory(t){return new(t||I18nBreadcrumbResolver)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275inject"](_i18n_breadcrumbs_service__WEBPACK_IMPORTED_MODULE_1__.a))},I18nBreadcrumbResolver.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineInjectable"]({token:I18nBreadcrumbResolver,factory:I18nBreadcrumbResolver.\u0275fac,providedIn:"root"})},GVwY:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"ProfilePageModule",(function(){return ProfilePageModule}));var core=__webpack_require__("fXoL"),common=__webpack_require__("ofXK"),shared_module=__webpack_require__("PCNd"),router=__webpack_require__("tyNb"),i18n_breadcrumb_resolver=__webpack_require__("A0IO"),themed_component=__webpack_require__("JTKQ");function ThemedProfilePageComponent_ng_template_0_Template(rf,ctx){}class themed_profile_page_component_ThemedProfilePageComponent extends themed_component.a{getComponentName(){return"ProfilePageComponent"}importThemedComponent(themeName){return __webpack_require__("gG8J")(`./${themeName}/app/profile-page/profile-page.component`)}importUnthemedComponent(){return Promise.resolve().then(__webpack_require__.bind(null,"wStq"))}}themed_profile_page_component_ThemedProfilePageComponent.\u0275fac=function ThemedProfilePageComponent_Factory(t){return \u0275ThemedProfilePageComponent_BaseFactory(t||themed_profile_page_component_ThemedProfilePageComponent)},themed_profile_page_component_ThemedProfilePageComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:themed_profile_page_component_ThemedProfilePageComponent,selectors:[["ds-themed-profile-page"]],features:[core["\u0275\u0275InheritDefinitionFeature"]],decls:3,vars:0,consts:[["vcr",""]],template:function ThemedProfilePageComponent_Template(rf,ctx){1&rf&&(core["\u0275\u0275template"](0,ThemedProfilePageComponent_ng_template_0_Template,0,0,"ng-template",null,0,core["\u0275\u0275templateRefExtractor"]),core["\u0275\u0275text"](2,"\n"))},encapsulation:2});const \u0275ThemedProfilePageComponent_BaseFactory=core["\u0275\u0275getInheritedFactory"](themed_profile_page_component_ThemedProfilePageComponent);class ProfilePageRoutingModule{}ProfilePageRoutingModule.\u0275fac=function ProfilePageRoutingModule_Factory(t){return new(t||ProfilePageRoutingModule)},ProfilePageRoutingModule.\u0275mod=core["\u0275\u0275defineNgModule"]({type:ProfilePageRoutingModule}),ProfilePageRoutingModule.\u0275inj=core["\u0275\u0275defineInjector"]({imports:[[router.k.forChild([{path:"",pathMatch:"full",component:themed_profile_page_component_ThemedProfilePageComponent,resolve:{breadcrumb:i18n_breadcrumb_resolver.a},data:{breadcrumbKey:"profile",title:"profile.title"}}])]]});__webpack_require__("wStq"),__webpack_require__("ibDM"),__webpack_require__("JKx6");var form_module=__webpack_require__("kcqd");class ProfilePageModule{}ProfilePageModule.\u0275fac=function ProfilePageModule_Factory(t){return new(t||ProfilePageModule)},ProfilePageModule.\u0275mod=core["\u0275\u0275defineNgModule"]({type:ProfilePageModule}),ProfilePageModule.\u0275inj=core["\u0275\u0275defineInjector"]({imports:[[ProfilePageRoutingModule,common.CommonModule,shared_module.a,form_module.a]]})},JKx6:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ProfilePageSecurityFormComponent}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),_ng_dynamic_forms_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("e+Av"),_shared_empty_util__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("J3qs"),_core_eperson_eperson_data_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("wLgS"),_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("lI3o"),rxjs_operators__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("Kj3r"),rxjs_operators__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("lJxs"),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("sYmb"),_angular_common__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("ofXK"),_shared_form_form_component__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("hqmO"),_angular_forms__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("3Pt+");function ProfilePageSecurityFormComponent_ds_form_4_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"ds-form",5),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()),2&rf){const ctx_r0=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("formId",ctx_r0.FORM_PREFIX)("formModel",ctx_r0.formModel)("formGroup",ctx_r0.formGroup)("displaySubmit",!1)("displayCancel",!1)}}function ProfilePageSecurityFormComponent_div_6_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div",6),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](2,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()),2&rf){const ctx_r1=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](2,1,ctx_r1.FORM_PREFIX+"error.password-length"))}}function ProfilePageSecurityFormComponent_div_8_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div",7),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](2,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()),2&rf){const ctx_r2=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](2,1,ctx_r2.FORM_PREFIX+"error.matching-passwords"))}}function ProfilePageSecurityFormComponent_div_10_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div",8),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](2,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()),2&rf){const ctx_r3=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](2,1,ctx_r3.FORM_PREFIX+"error.empty-password"))}}class ProfilePageSecurityFormComponent{constructor(formService,translate,epersonService,notificationsService){this.formService=formService,this.translate=translate,this.epersonService=epersonService,this.notificationsService=notificationsService,this.isInvalid=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.EventEmitter,this.passwordValue=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.EventEmitter,this.formModel=[new _ng_dynamic_forms_core__WEBPACK_IMPORTED_MODULE_1__.J({id:"password",name:"password",inputType:"password"}),new _ng_dynamic_forms_core__WEBPACK_IMPORTED_MODULE_1__.J({id:"passwordrepeat",name:"passwordrepeat",inputType:"password"})],this.passwordCanBeEmpty=!0,this.subs=[]}ngOnInit(){this.passwordCanBeEmpty?this.formGroup=this.formService.createFormGroup(this.formModel,{validators:[this.checkPasswordsEqual,this.checkPasswordLength]}):this.formGroup=this.formService.createFormGroup(this.formModel,{validators:[this.checkPasswordsEqual,this.checkPasswordLength,this.checkPasswordEmpty]}),this.updateFieldTranslations(),this.translate.onLangChange.subscribe((()=>{this.updateFieldTranslations()})),this.subs.push(this.formGroup.statusChanges.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.a)(300),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.a)((status=>"VALID"!==status))).subscribe((status=>this.isInvalid.emit(status)))),this.subs.push(this.formGroup.valueChanges.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.a)(300)).subscribe((valueChange=>{this.passwordValue.emit(valueChange.password)})))}updateFieldTranslations(){this.formModel.forEach((fieldModel=>{fieldModel.label=this.translate.instant(this.FORM_PREFIX+"label."+fieldModel.id)}))}checkPasswordsEqual(group){return group.get("password").value===group.get("passwordrepeat").value?null:{notSame:!0}}checkPasswordLength(group){const pass=group.get("password").value;return Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_2__.d)(pass)||pass.length>=6?null:{notLongEnough:!0}}checkPasswordEmpty(group){const pass=group.get("password").value;return Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_2__.d)(pass)?{emptyPassword:!0}:null}ngOnDestroy(){this.subs.filter((sub=>Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_2__.b)(sub))).forEach((sub=>sub.unsubscribe()))}}ProfilePageSecurityFormComponent.\u0275fac=function ProfilePageSecurityFormComponent_Factory(t){return new(t||ProfilePageSecurityFormComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_ng_dynamic_forms_core__WEBPACK_IMPORTED_MODULE_1__.G),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_ngx_translate_core__WEBPACK_IMPORTED_MODULE_7__.e),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_core_eperson_eperson_data_service__WEBPACK_IMPORTED_MODULE_3__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_4__.a))},ProfilePageSecurityFormComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineComponent"]({type:ProfilePageSecurityFormComponent,selectors:[["ds-profile-page-security-form"]],inputs:{passwordCanBeEmpty:"passwordCanBeEmpty",FORM_PREFIX:"FORM_PREFIX"},outputs:{isInvalid:"isInvalid",passwordValue:"passwordValue"},decls:12,vars:7,consts:[[1,"container-fluid","mb-4"],[3,"formId","formModel","formGroup","displaySubmit","displayCancel",4,"ngIf"],["id","notLongEnough","class","container-fluid text-danger",4,"ngIf"],["id","notSame","class","container-fluid text-danger",4,"ngIf"],["id","emptyPassword","class","container-fluid text-danger",4,"ngIf"],[3,"formId","formModel","formGroup","displaySubmit","displayCancel"],["id","notLongEnough",1,"container-fluid","text-danger"],["id","notSame",1,"container-fluid","text-danger"],["id","emptyPassword",1,"container-fluid","text-danger"]],template:function ProfilePageSecurityFormComponent_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div",0),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](2,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3,"\n"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](4,ProfilePageSecurityFormComponent_ds_form_4_Template,2,5,"ds-form",1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](5,"\n"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](6,ProfilePageSecurityFormComponent_div_6_Template,3,3,"div",2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](7,"\n"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](8,ProfilePageSecurityFormComponent_div_8_Template,3,3,"div",3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](9,"\n"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](10,ProfilePageSecurityFormComponent_div_10_Template,3,3,"div",4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](11,"\n")),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](2,5,ctx.FORM_PREFIX+"info")),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",ctx.formModel),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",ctx.formGroup.hasError("notLongEnough")),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",ctx.formGroup.hasError("notSame")),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",(ctx.formGroup.dirty||ctx.formGroup.touched)&&ctx.formGroup.hasError("emptyPassword")))},directives:[_angular_common__WEBPACK_IMPORTED_MODULE_8__.NgIf,_shared_form_form_component__WEBPACK_IMPORTED_MODULE_9__.a,_angular_forms__WEBPACK_IMPORTED_MODULE_10__.NgControlStatusGroup,_angular_forms__WEBPACK_IMPORTED_MODULE_10__.FormGroupDirective],pipes:[_ngx_translate_core__WEBPACK_IMPORTED_MODULE_7__.d],encapsulation:2})},gG8J:function(module,exports,__webpack_require__){var map={"./custom/app/profile-page/profile-page.component":["qgOg",59]};function webpackAsyncContext(req){if(!__webpack_require__.o(map,req))return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}));var ids=map[req],id=ids[0];return __webpack_require__.e(ids[1]).then((function(){return __webpack_require__(id)}))}webpackAsyncContext.keys=function webpackAsyncContextKeys(){return Object.keys(map)},webpackAsyncContext.id="gG8J",module.exports=webpackAsyncContext},ibDM:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ProfilePageMetadataFormComponent}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),_ng_dynamic_forms_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("e+Av"),_shared_empty_util__WEBPACK_IMPORTED_MODULE_3__=(__webpack_require__("Anbb"),__webpack_require__("J3qs")),_core_eperson_eperson_data_service__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("wLgS"),lodash__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("LvDl"),_core_shared_operators__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("1QIV"),_shared_form_builder_form_builder_service__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("Q5/L"),_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("lI3o"),_environments_environment__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("AytR"),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("sYmb"),_angular_common__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("ofXK"),_shared_form_form_component__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("hqmO"),_angular_forms__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("3Pt+");function ProfilePageMetadataFormComponent_ds_form_0_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"ds-form",1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()),2&rf){const ctx_r0=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("formId","profile-page-metadata-form-id")("formModel",ctx_r0.formModel)("formGroup",ctx_r0.formGroup)("displaySubmit",!1)("displayCancel",!1)}}class ProfilePageMetadataFormComponent{constructor(formBuilderService,translate,epersonService,notificationsService){this.formBuilderService=formBuilderService,this.translate=translate,this.epersonService=epersonService,this.notificationsService=notificationsService,this.formModel=[new _ng_dynamic_forms_core__WEBPACK_IMPORTED_MODULE_1__.J({id:"email",name:"email",readOnly:!0}),new _ng_dynamic_forms_core__WEBPACK_IMPORTED_MODULE_1__.J({id:"firstname",name:"eperson.firstname",required:!0,validators:{required:null},errorMessages:{required:"This field is required"}}),new _ng_dynamic_forms_core__WEBPACK_IMPORTED_MODULE_1__.J({id:"lastname",name:"eperson.lastname",required:!0,validators:{required:null},errorMessages:{required:"This field is required"}}),new _ng_dynamic_forms_core__WEBPACK_IMPORTED_MODULE_1__.J({id:"phone",name:"eperson.phone"}),new _ng_dynamic_forms_core__WEBPACK_IMPORTED_MODULE_1__.N({id:"language",name:"eperson.language"})],this.LABEL_PREFIX="profile.metadata.form.label.",this.ERROR_PREFIX="profile.metadata.form.error.",this.NOTIFICATION_PREFIX="profile.metadata.form.notifications."}ngOnInit(){this.activeLangs=_environments_environment__WEBPACK_IMPORTED_MODULE_9__.a.languages.filter((MyLangConfig=>!0===MyLangConfig.active)),this.setFormValues(),this.updateFieldTranslations(),this.translate.onLangChange.subscribe((()=>{this.updateFieldTranslations()}))}setFormValues(){this.formModel.forEach((fieldModel=>{"email"===fieldModel.name?fieldModel.value=this.user.email:fieldModel.value=this.user.firstMetadataValue(fieldModel.name),"language"===fieldModel.id&&(fieldModel.options=this.activeLangs.map((langConfig=>Object.assign({value:langConfig.code,label:langConfig.label}))))})),this.formGroup=this.formBuilderService.createFormGroup(this.formModel)}updateFieldTranslations(){this.formModel.forEach((fieldModel=>{fieldModel.label=this.translate.instant(this.LABEL_PREFIX+fieldModel.id),Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_3__.e)(fieldModel.validators)&&(fieldModel.errorMessages={},Object.keys(fieldModel.validators).forEach((key=>{fieldModel.errorMessages[key]=this.translate.instant(this.ERROR_PREFIX+fieldModel.id+"."+key)})))}))}updateProfile(){if(!this.formGroup.valid)return!1;const newMetadata=Object(lodash__WEBPACK_IMPORTED_MODULE_5__.cloneDeep)(this.user.metadata);let changed=!1;return this.formModel.filter((fieldModel=>"email"!==fieldModel.id)).forEach((fieldModel=>{newMetadata.hasOwnProperty(fieldModel.name)&&newMetadata[fieldModel.name].length>0?Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_3__.b)(fieldModel.value)?newMetadata[fieldModel.name][0].value!==fieldModel.value&&(newMetadata[fieldModel.name][0].value=fieldModel.value,changed=!0):(newMetadata[fieldModel.name]=[],changed=!0):Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_3__.b)(fieldModel.value)&&(newMetadata[fieldModel.name]=[{value:fieldModel.value,language:null}],changed=!0)})),changed&&this.epersonService.update(Object.assign(Object(lodash__WEBPACK_IMPORTED_MODULE_5__.cloneDeep)(this.user),{metadata:newMetadata})).pipe(Object(_core_shared_operators__WEBPACK_IMPORTED_MODULE_6__.i)(),Object(_core_shared_operators__WEBPACK_IMPORTED_MODULE_6__.o)()).subscribe((user=>{this.user=user,this.setFormValues(),this.notificationsService.success(this.translate.instant(this.NOTIFICATION_PREFIX+"success.title"),this.translate.instant(this.NOTIFICATION_PREFIX+"success.content"))})),changed}}ProfilePageMetadataFormComponent.\u0275fac=function ProfilePageMetadataFormComponent_Factory(t){return new(t||ProfilePageMetadataFormComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_shared_form_builder_form_builder_service__WEBPACK_IMPORTED_MODULE_7__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_ngx_translate_core__WEBPACK_IMPORTED_MODULE_10__.e),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_core_eperson_eperson_data_service__WEBPACK_IMPORTED_MODULE_4__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_8__.a))},ProfilePageMetadataFormComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineComponent"]({type:ProfilePageMetadataFormComponent,selectors:[["ds-profile-page-metadata-form"]],inputs:{user:"user"},decls:2,vars:1,consts:[[3,"formId","formModel","formGroup","displaySubmit","displayCancel",4,"ngIf"],[3,"formId","formModel","formGroup","displaySubmit","displayCancel"]],template:function ProfilePageMetadataFormComponent_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](0,ProfilePageMetadataFormComponent_ds_form_0_Template,2,5,"ds-form",0),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n")),2&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",ctx.formModel)},directives:[_angular_common__WEBPACK_IMPORTED_MODULE_11__.NgIf,_shared_form_form_component__WEBPACK_IMPORTED_MODULE_12__.a,_angular_forms__WEBPACK_IMPORTED_MODULE_13__.NgControlStatusGroup,_angular_forms__WEBPACK_IMPORTED_MODULE_13__.FormGroupDirective],encapsulation:2})},kcqd:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return FormModule}));var core=__webpack_require__("fXoL"),common=__webpack_require__("ofXK"),form_component=__webpack_require__("hqmO"),fesm2015_core=__webpack_require__("e+Av"),ds_dynamic_form_control_container_component=__webpack_require__("NvTF");function DsDynamicFormComponent_ds_dynamic_form_control_container_0_Template(rf,ctx){if(1&rf){const _r3=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementStart"](0,"ds-dynamic-form-control-container",1),core["\u0275\u0275listener"]("dfBlur",(function DsDynamicFormComponent_ds_dynamic_form_control_container_0_Template_ds_dynamic_form_control_container_dfBlur_0_listener($event){core["\u0275\u0275restoreView"](_r3);const ctx_r2=core["\u0275\u0275nextContext"]();return ctx_r2.onCustomEvent($event,ctx_r2.blur)}))("dfChange",(function DsDynamicFormComponent_ds_dynamic_form_control_container_0_Template_ds_dynamic_form_control_container_dfChange_0_listener($event){core["\u0275\u0275restoreView"](_r3);const ctx_r4=core["\u0275\u0275nextContext"]();return ctx_r4.onCustomEvent($event,ctx_r4.change)}))("dfFocus",(function DsDynamicFormComponent_ds_dynamic_form_control_container_0_Template_ds_dynamic_form_control_container_dfFocus_0_listener($event){core["\u0275\u0275restoreView"](_r3);const ctx_r5=core["\u0275\u0275nextContext"]();return ctx_r5.onCustomEvent($event,ctx_r5.focus)}))("ngbEvent",(function DsDynamicFormComponent_ds_dynamic_form_control_container_0_Template_ds_dynamic_form_control_container_ngbEvent_0_listener($event){core["\u0275\u0275restoreView"](_r3);const ctx_r6=core["\u0275\u0275nextContext"]();return ctx_r6.onCustomEvent($event,ctx_r6.ngbEvent)})),core["\u0275\u0275elementEnd"]()}if(2&rf){const model_r1=ctx.$implicit,ctx_r0=core["\u0275\u0275nextContext"]();core["\u0275\u0275property"]("formId",ctx_r0.formId)("group",ctx_r0.formGroup)("hasErrorMessaging",model_r1.hasErrorMessages)("hidden",model_r1.hidden)("layout",ctx_r0.formLayout)("model",model_r1)("templates",ctx_r0.templates)("asBootstrapFormGroup",!0)}}class ds_dynamic_form_component_DsDynamicFormComponent extends fesm2015_core.x{constructor(changeDetectorRef,componentService){super(changeDetectorRef,componentService),this.blur=new core.EventEmitter,this.change=new core.EventEmitter,this.focus=new core.EventEmitter,this.ngbEvent=new core.EventEmitter}}ds_dynamic_form_component_DsDynamicFormComponent.\u0275fac=function DsDynamicFormComponent_Factory(t){return new(t||ds_dynamic_form_component_DsDynamicFormComponent)(core["\u0275\u0275directiveInject"](core.ChangeDetectorRef),core["\u0275\u0275directiveInject"](fesm2015_core.y))},ds_dynamic_form_component_DsDynamicFormComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:ds_dynamic_form_component_DsDynamicFormComponent,selectors:[["ds-dynamic-form"]],contentQueries:function DsDynamicFormComponent_ContentQueries(rf,ctx,dirIndex){if(1&rf&&core["\u0275\u0275contentQuery"](dirIndex,fesm2015_core.O,0),2&rf){let _t;core["\u0275\u0275queryRefresh"](_t=core["\u0275\u0275loadQuery"]())&&(ctx.templates=_t)}},viewQuery:function DsDynamicFormComponent_Query(rf,ctx){if(1&rf&&core["\u0275\u0275viewQuery"](ds_dynamic_form_control_container_component.a,1),2&rf){let _t;core["\u0275\u0275queryRefresh"](_t=core["\u0275\u0275loadQuery"]())&&(ctx.components=_t)}},inputs:{formId:"formId",formGroup:"formGroup",formModel:"formModel",formLayout:"formLayout"},outputs:{blur:"dfBlur",change:"dfChange",focus:"dfFocus",ngbEvent:"ngbEvent"},features:[core["\u0275\u0275InheritDefinitionFeature"]],decls:2,vars:2,consts:[[3,"formId","group","hasErrorMessaging","hidden","layout","model","templates","asBootstrapFormGroup","dfBlur","dfChange","dfFocus","ngbEvent",4,"ngFor","ngForOf","ngForTrackBy"],[3,"formId","group","hasErrorMessaging","hidden","layout","model","templates","asBootstrapFormGroup","dfBlur","dfChange","dfFocus","ngbEvent"]],template:function DsDynamicFormComponent_Template(rf,ctx){1&rf&&(core["\u0275\u0275template"](0,DsDynamicFormComponent_ds_dynamic_form_control_container_0_Template,1,8,"ds-dynamic-form-control-container",0),core["\u0275\u0275text"](1,"\n")),2&rf&&core["\u0275\u0275property"]("ngForOf",ctx.formModel)("ngForTrackBy",ctx.trackByFn)},directives:[common.NgForOf,ds_dynamic_form_control_container_component.a],encapsulation:2});var dynamic_list_component=__webpack_require__("ZO65"),dynamic_lookup_component=__webpack_require__("0pnk"),dynamic_disabled_component=__webpack_require__("sw+l"),dynamic_lookup_relation_modal_component=__webpack_require__("1Pbu"),dynamic_scrollable_dropdown_component=__webpack_require__("bPV6"),dynamic_tag_component=__webpack_require__("Gu/b"),dynamic_onebox_component=__webpack_require__("A/iK"),dynamic_relation_group_components=__webpack_require__("KKO+"),date_picker_component=__webpack_require__("Ysrn"),dynamic_form_group_component=__webpack_require__("tqJZ"),dynamic_form_array_component=__webpack_require__("ZTun"),dynamic_date_picker_inline_component=__webpack_require__("uyTL"),dynamic_lookup_relation_search_tab_component=__webpack_require__("Ui2r"),dynamic_lookup_relation_selection_tab_component=__webpack_require__("8HnP"),dynamic_lookup_relation_external_source_tab_component=__webpack_require__("zVKZ"),shared_module=__webpack_require__("PCNd"),ngx_translate_core=__webpack_require__("sYmb"),search_module=__webpack_require__("kMeL"),existing_metadata_list_element_component=__webpack_require__("yXJd"),existing_relation_list_element_component=__webpack_require__("/Vzl"),external_source_entry_import_modal_component=__webpack_require__("zGzN"),custom_switch_component=__webpack_require__("xjoE"),ui_ng_bootstrap=__webpack_require__("n7Wa"),fesm2015_forms=__webpack_require__("3Pt+"),drag_drop=__webpack_require__("5+WD");custom_switch_component.a,ds_dynamic_form_control_container_component.a,dynamic_list_component.a,dynamic_lookup_component.a,dynamic_lookup_relation_search_tab_component.a,dynamic_lookup_relation_selection_tab_component.a,dynamic_lookup_relation_external_source_tab_component.a,dynamic_disabled_component.a,dynamic_lookup_relation_modal_component.a,dynamic_scrollable_dropdown_component.a,dynamic_tag_component.a,dynamic_onebox_component.a,dynamic_relation_group_components.a,date_picker_component.b,dynamic_form_group_component.a,dynamic_form_array_component.a,dynamic_date_picker_inline_component.a,existing_metadata_list_element_component.a,existing_relation_list_element_component.a,external_source_entry_import_modal_component.a,form_component.a;class FormModule{}FormModule.\u0275fac=function FormModule_Factory(t){return new(t||FormModule)},FormModule.\u0275mod=core["\u0275\u0275defineNgModule"]({type:FormModule}),FormModule.\u0275inj=core["\u0275\u0275defineInjector"]({providers:[{provide:fesm2015_core.c,useValue:ds_dynamic_form_control_container_component.b}],imports:[[common.CommonModule,fesm2015_core.I,ui_ng_bootstrap.a,search_module.a,shared_module.a,ngx_translate_core.c]]}),core["\u0275\u0275setComponentScope"](dynamic_form_group_component.a,[fesm2015_forms.NgControlStatusGroup,fesm2015_forms.FormGroupDirective,fesm2015_forms.FormGroupName,common.NgClass,common.NgForOf,ds_dynamic_form_control_container_component.a],[]),core["\u0275\u0275setComponentScope"](dynamic_form_array_component.a,[fesm2015_forms.NgControlStatusGroup,fesm2015_forms.FormGroupDirective,fesm2015_forms.FormArrayName,common.NgClass,drag_drop.c,common.NgForOf,drag_drop.a,drag_drop.b,fesm2015_forms.FormGroupName,common.NgTemplateOutlet,ds_dynamic_form_control_container_component.a],[]),core["\u0275\u0275setComponentScope"](form_component.a,[fesm2015_forms["\u0275angular_packages_forms_forms_ba"],fesm2015_forms.NgControlStatusGroup,fesm2015_forms.FormGroupDirective,ds_dynamic_form_component_DsDynamicFormComponent,fesm2015_core.O,common.NgIf],[ngx_translate_core.d,common.AsyncPipe])},tv3Y:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return I18nBreadcrumbsService}));var _breadcrumbs_breadcrumb_breadcrumb_model__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("zr/d"),rxjs__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("LRne"),_angular_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("fXoL");class I18nBreadcrumbsService{getBreadcrumbs(key,url){return Object(rxjs__WEBPACK_IMPORTED_MODULE_1__.a)([new _breadcrumbs_breadcrumb_breadcrumb_model__WEBPACK_IMPORTED_MODULE_0__.a(key+".breadcrumbs",url)])}}I18nBreadcrumbsService.\u0275fac=function I18nBreadcrumbsService_Factory(t){return new(t||I18nBreadcrumbsService)},I18nBreadcrumbsService.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275defineInjectable"]({token:I18nBreadcrumbsService,factory:I18nBreadcrumbsService.\u0275fac,providedIn:"root"})},wStq:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"ProfilePageComponent",(function(){return ProfilePageComponent}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),_profile_page_metadata_form_profile_page_metadata_form_component__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("ibDM"),_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("lI3o"),rxjs_operators__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("pLZG"),rxjs_operators__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("eIep"),rxjs_operators__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("vkgz"),_core_eperson_eperson_data_service__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("wLgS"),_core_shared_operators__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("1QIV"),_shared_empty_util__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("J3qs"),_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("84Zn"),_core_auth_auth_service__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("Vurf"),_core_data_feature_authorization_authorization_data_service__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("1mcE"),_core_data_feature_authorization_feature_id__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("FU+A"),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("sYmb"),_shared_utils_var_directive__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("O/5o"),_angular_common__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("ofXK"),_profile_page_security_form_profile_page_security_form_component__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("JKx6");function ProfilePageComponent_ng_container_0_div_2_div_18_Template(rf,ctx){if(1&rf){const _r6=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275getCurrentView"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div",12),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](2,"div",5),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](4,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](5,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](6,"div",6),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](7,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](8,"ds-profile-page-security-form",13),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("isInvalid",(function ProfilePageComponent_ng_container_0_div_2_div_18_Template_ds_profile_page_security_form_isInvalid_8_listener($event){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r6);return _angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"](3).setInvalid($event)}))("passwordValue",(function ProfilePageComponent_ng_container_0_div_2_div_18_Template_ds_profile_page_security_form_passwordValue_8_listener($event){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r6);return _angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"](3).setPasswordValue($event)})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](9,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](10,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()}2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](4,2,"profile.card.security")),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](5),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("FORM_PREFIX","profile.security.form."))}function ProfilePageComponent_ng_container_0_div_2_ng_container_29_div_2_li_8_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"li",18),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()),2&rf){const group_r11=ctx.$implicit;_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](group_r11.name)}}function ProfilePageComponent_ng_container_0_div_2_ng_container_29_div_2_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](2,"h3",15),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](4,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](5,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](6,"ul",16),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](7,"\n          "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](8,ProfilePageComponent_ng_container_0_div_2_ng_container_29_div_2_li_8_Template,2,1,"li",17),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](9,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](10,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()),2&rf){const groups_r8=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]().ngVar;_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](4,2,"profile.groups.head")),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](5),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngForOf",groups_r8)}}function ProfilePageComponent_ng_container_0_div_2_ng_container_29_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementContainerStart"](0),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](2,ProfilePageComponent_ng_container_0_div_2_ng_container_29_div_2_Template,11,4,"div",14),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementContainerEnd"]()),2&rf){const groups_r8=ctx.ngVar;_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",groups_r8)}}function ProfilePageComponent_ng_container_0_div_2_Template(rf,ctx){if(1&rf){const _r14=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275getCurrentView"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div",2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](2,"h3",3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](4,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](5,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](6,"div",4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](7,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](8,"div",5),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](9),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](10,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](11,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](12,"div",6),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](13,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](14,"ds-profile-page-metadata-form",7),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](15,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](16,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](17,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](18,ProfilePageComponent_ng_container_0_div_2_div_18_Template,11,4,"div",8),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](19,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](20,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](21,"div",9),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](22,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](23,"button",10),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("click",(function ProfilePageComponent_ng_container_0_div_2_Template_button_click_23_listener(){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r14);return _angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"](2).updateProfile()})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](24,"i",11),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](25),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](26,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](27,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](28,"\n\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](29,ProfilePageComponent_ng_container_0_div_2_ng_container_29_Template,4,1,"ng-container",0),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](30,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](31,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()}if(2&rf){const user_r1=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]().ngVar,ctx_r2=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]();let tmp_5_0=null;_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](4,6,"profile.head")),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](6),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](10,8,"profile.card.identify")),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](5),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("user",user_r1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](19,10,ctx_r2.canChangePassword$)),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](7),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate1"](" ",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](26,12,"profile.form.submit"),""),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngVar",null==(tmp_5_0=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](30,14,ctx_r2.groupsRD$))||null==tmp_5_0.payload?null:tmp_5_0.payload.page)}}function ProfilePageComponent_ng_container_0_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementContainerStart"](0),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](2,ProfilePageComponent_ng_container_0_div_2_Template,32,16,"div",1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3,"\n"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementContainerEnd"]()),2&rf){const user_r1=ctx.ngVar;_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",user_r1)}}class ProfilePageComponent{constructor(authService,notificationsService,translate,epersonService,authorizationService){this.authService=authService,this.notificationsService=notificationsService,this.translate=translate,this.epersonService=epersonService,this.authorizationService=authorizationService,this.NOTIFICATIONS_PREFIX="profile.notifications.",this.PASSWORD_NOTIFICATIONS_PREFIX="profile.security.form.notifications."}ngOnInit(){this.user$=this.authService.getAuthenticatedUserFromStore().pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.a)((user=>Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_8__.b)(user.id))),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.a)((user=>this.epersonService.findById(user.id,!0,!0,Object(_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_9__.a)("groups")))),Object(_core_shared_operators__WEBPACK_IMPORTED_MODULE_7__.c)(),Object(_core_shared_operators__WEBPACK_IMPORTED_MODULE_7__.o)(),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.a)((user=>this.currentUser=user))),this.groupsRD$=this.user$.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.a)((user=>user.groups))),this.canChangePassword$=this.user$.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.a)((user=>this.authorizationService.isAuthorized(_core_data_feature_authorization_feature_id__WEBPACK_IMPORTED_MODULE_12__.a.CanChangePassword,user._links.self.href))))}updateProfile(){const metadataChanged=this.metadataForm.updateProfile(),securityChanged=this.updateSecurity();metadataChanged||securityChanged||this.notificationsService.warning(this.translate.instant(this.NOTIFICATIONS_PREFIX+"warning.no-changes.title"),this.translate.instant(this.NOTIFICATIONS_PREFIX+"warning.no-changes.content"))}setInvalid($event){this.invalidSecurity=$event}updateSecurity(){const passEntered=Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_8__.e)(this.password);if(this.invalidSecurity&&this.notificationsService.error(this.translate.instant(this.PASSWORD_NOTIFICATIONS_PREFIX+"error.general")),!this.invalidSecurity&&passEntered){const operation={op:"add",path:"/password",value:this.password};this.epersonService.patch(this.currentUser,[operation]).pipe(Object(_core_shared_operators__WEBPACK_IMPORTED_MODULE_7__.g)()).subscribe((response=>{response.hasSucceeded?this.notificationsService.success(this.translate.instant(this.PASSWORD_NOTIFICATIONS_PREFIX+"success.title"),this.translate.instant(this.PASSWORD_NOTIFICATIONS_PREFIX+"success.content")):this.notificationsService.error(this.translate.instant(this.PASSWORD_NOTIFICATIONS_PREFIX+"error.title"),response.errorMessage)}))}return passEntered}setPasswordValue($event){this.password=$event}submit(){this.updateProfile()}}ProfilePageComponent.\u0275fac=function ProfilePageComponent_Factory(t){return new(t||ProfilePageComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_core_auth_auth_service__WEBPACK_IMPORTED_MODULE_10__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_2__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_ngx_translate_core__WEBPACK_IMPORTED_MODULE_13__.e),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_core_eperson_eperson_data_service__WEBPACK_IMPORTED_MODULE_6__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_core_data_feature_authorization_authorization_data_service__WEBPACK_IMPORTED_MODULE_11__.a))},ProfilePageComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineComponent"]({type:ProfilePageComponent,selectors:[["ds-profile-page"]],viewQuery:function ProfilePageComponent_Query(rf,ctx){if(1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275viewQuery"](_profile_page_metadata_form_profile_page_metadata_form_component__WEBPACK_IMPORTED_MODULE_1__.a,1),2&rf){let _t;_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275queryRefresh"](_t=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275loadQuery"]())&&(ctx.metadataForm=_t.first)}},decls:3,vars:3,consts:[[4,"ngVar"],["class","container",4,"ngIf"],[1,"container"],[1,"mb-4"],[1,"card","mb-4"],[1,"card-header"],[1,"card-body"],[3,"user"],["class","card mb-4 security-section",4,"ngIf"],[1,"col-12","text-right","pr-0"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-edit"],[1,"card","mb-4","security-section"],[3,"FORM_PREFIX","isInvalid","passwordValue"],[4,"ngIf"],[1,"mt-4"],[1,"list-group","list-group-flush"],["class","list-group-item",4,"ngFor","ngForOf"],[1,"list-group-item"]],template:function ProfilePageComponent_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](0,ProfilePageComponent_ng_container_0_Template,4,1,"ng-container",0),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](1,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](2,"\n")),2&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngVar",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](1,1,ctx.user$))},directives:[_shared_utils_var_directive__WEBPACK_IMPORTED_MODULE_14__.a,_angular_common__WEBPACK_IMPORTED_MODULE_15__.NgIf,_profile_page_metadata_form_profile_page_metadata_form_component__WEBPACK_IMPORTED_MODULE_1__.a,_profile_page_security_form_profile_page_security_form_component__WEBPACK_IMPORTED_MODULE_16__.a,_angular_common__WEBPACK_IMPORTED_MODULE_15__.NgForOf],pipes:[_angular_common__WEBPACK_IMPORTED_MODULE_15__.AsyncPipe,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_13__.d],styles:[""]})},"zr/d":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return Breadcrumb}));class Breadcrumb{constructor(text,url){this.text=text,this.url=url}}}};