exports.ids=[31],exports.modules={"0VLH":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return JsonPatchOperationPathCombiner}));var _shared_empty_util__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("J3qs"),_url_combiner_url_combiner__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("zZO8");class JsonPatchOperationPathCombiner extends _url_combiner_url_combiner__WEBPACK_IMPORTED_MODULE_1__.a{constructor(rootElement,...subRootElements){super(rootElement,...subRootElements),this._rootElement=rootElement,this._subRootElement=subRootElements.join("/")}get rootElement(){return this._rootElement}get subRootElement(){return this._subRootElement}getPath(fragment){Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_0__.h)(fragment)&&Array.isArray(fragment)&&(fragment=fragment.join("/"));let path="/"+this.toString();return Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_0__.h)(fragment)&&(path+="/"+fragment),{rootElement:this._rootElement,subRootElement:this._subRootElement,path:path}}}},"20cJ":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return SubmissionImportExternalPreviewComponent}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),_core_shared_metadata_utils__WEBPACK_IMPORTED_MODULE_2__=(__webpack_require__("bBsm"),__webpack_require__("/eM4")),rxjs_operators__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("5+tZ"),_submission_service__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("J/vq"),_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("lI3o"),_import_external_collection_submission_import_external_collection_component__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("6c/T"),_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("1kSV"),_angular_router__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("tyNb"),_angular_common__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("ofXK"),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("sYmb");function SubmissionImportExternalPreviewComponent_div_35_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div",5),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](2,"div",6),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](4,"strong"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](5),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](6,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](7,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](8,"p"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](9),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](10,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](11,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()),2&rf){const metadata_r1=ctx.$implicit;_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](5),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](6,2,"item.preview."+metadata_r1.key)),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](metadata_r1.value.value)}}class SubmissionImportExternalPreviewComponent{constructor(activeModal,submissionService,modalService,router,notificationService){this.activeModal=activeModal,this.submissionService=submissionService,this.modalService=modalService,this.router=router,this.notificationService=notificationService}ngOnInit(){this.metadataList=[];Object.keys(this.externalSourceEntry.metadata).forEach((key=>{this.metadataList.push({key:key,value:_core_shared_metadata_utils__WEBPACK_IMPORTED_MODULE_2__.a.first(this.externalSourceEntry.metadata,key)})}))}closeMetadataModal(){this.activeModal.dismiss(!1)}import(){this.modalRef=this.modalService.open(_import_external_collection_submission_import_external_collection_component__WEBPACK_IMPORTED_MODULE_6__.a,{size:"lg"}),this.modalRef.componentInstance.entityType=this.labelPrefix,this.closeMetadataModal(),this.modalRef.componentInstance.selectedEvent.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.a)((collectionListEntry=>this.submissionService.createSubmissionFromExternalSource(this.externalSourceEntry._links.self.href,collectionListEntry.collection.id)))).subscribe((submissionObjects=>{let isValid=!1;1===submissionObjects.length&&null!==submissionObjects[0]&&(isValid=!0,this.router.navigateByUrl("/workspaceitems/"+submissionObjects[0].id+"/edit")),isValid||this.notificationService.error("submission.import-external.preview.error.import.title","submission.import-external.preview.error.import.body"),this.modalRef.close()}))}}SubmissionImportExternalPreviewComponent.\u0275fac=function SubmissionImportExternalPreviewComponent_Factory(t){return new(t||SubmissionImportExternalPreviewComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_7__.c),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_submission_service__WEBPACK_IMPORTED_MODULE_4__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_7__.q),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_8__.g),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_5__.a))},SubmissionImportExternalPreviewComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineComponent"]({type:SubmissionImportExternalPreviewComponent,selectors:[["ds-submission-import-external-preview"]],inputs:{externalSourceEntry:"externalSourceEntry"},decls:59,vars:10,consts:[[1,"modal-header"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"container"],[1,"row"],[1,"col-md-12"],["class","row",4,"ngFor","ngForOf"],[1,"col-md-12","text-right"],["role","button",1,"btn","btn-success",3,"click"],["aria-hidden","true",1,"fa","fa-file-import"]],template:function SubmissionImportExternalPreviewComponent_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div",0),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](2,"h2"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](4,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](5,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](6,"button",1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("click",(function SubmissionImportExternalPreviewComponent_Template_button_click_6_listener(){return ctx.closeMetadataModal()})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](7,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](8,"span",2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](9,"\xd7"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](10,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](11,"\n"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](12,"\n"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](13,"div",3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](14,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](15,"div",4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](16,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](17,"div",5),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](18,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](19,"div",6),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](20,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](21,"p"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](22),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](23,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](24,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](25,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](26,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](27,"div",5),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](28,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](29,"div",6),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](30,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](31,"hr"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](32,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](33,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](34,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](35,SubmissionImportExternalPreviewComponent_div_35_Template,12,4,"div",7),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](36,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](37,"div",5),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](38,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](39,"div",6),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](40,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](41,"hr"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](42,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](43,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](44,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](45,"div",5),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](46,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](47,"div",8),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](48,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](49,"button",9),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("click",(function SubmissionImportExternalPreviewComponent_Template_button_click_49_listener(){return ctx.import()})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](50,"\n          "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](51,"i",10),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](52),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](53,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](54,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](55,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](56,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](57,"\n"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](58,"\n")),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](4,4,"submission.import-external.preview.title."+ctx.labelPrefix)),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](19),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](23,6,"submission.import-external.preview.subtitle")),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](13),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngForOf",ctx.metadataList),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](17),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate1"](" ",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](53,8,"submission.import-external.preview.button.import"),"\n        "))},directives:[_angular_common__WEBPACK_IMPORTED_MODULE_9__.NgForOf],pipes:[_ngx_translate_core__WEBPACK_IMPORTED_MODULE_10__.d],styles:[".close[_ngcontent-%COMP%]:focus{outline:none!important}"]})},"3aq+":function(module,exports,__webpack_require__){var map={"./custom/app/submission/edit/submission-edit.component":["OutP",68]};function webpackAsyncContext(req){if(!__webpack_require__.o(map,req))return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}));var ids=map[req],id=ids[0];return __webpack_require__.e(ids[1]).then((function(){return __webpack_require__(id)}))}webpackAsyncContext.keys=function webpackAsyncContextKeys(){return Object.keys(map)},webpackAsyncContext.id="3aq+",module.exports=webpackAsyncContext},"3cpT":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return SubmissionImportExternalSearchbarComponent}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),rxjs__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("LRne"),rxjs_operators__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("JIr8"),rxjs_operators__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("vkgz"),_core_cache_models_request_param_model__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("Hl3I"),_core_data_external_source_service__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("dHui"),_core_data_paginated_list_model__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("f+Ev"),_core_shared_page_info_model__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("oBfO"),_shared_remote_data_utils__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("GG8d"),_core_data_request_models__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("B/au"),_core_shared_operators__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("1QIV"),_shared_host_window_service__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("14tD"),_shared_empty_util__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("J3qs"),_angular_common__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("ofXK"),_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("1kSV"),ngx_infinite_scroll__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("dlKe"),_angular_forms__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("3Pt+"),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("sYmb");function SubmissionImportExternalSearchbarComponent_div_0_Template(rf,ctx){if(1&rf){const _r5=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275getCurrentView"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div",10),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](2,"input",11),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("keyup.enter",(function SubmissionImportExternalSearchbarComponent_div_0_Template_input_keyup_enter_2_listener(){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r5);const ctx_r4=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]();return""===ctx_r4.searchString?null:ctx_r4.search()}))("ngModelChange",(function SubmissionImportExternalSearchbarComponent_div_0_Template_input_ngModelChange_2_listener($event){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r5);return _angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]().searchString=$event})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](3,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](4,"\n"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()}if(2&rf){const ctx_r0=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275propertyInterpolate"]("placeholder",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](3,2,"submission.import-external.search.placeholder")),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngModel",ctx_r0.searchString)}}function SubmissionImportExternalSearchbarComponent_input_5_Template(rf,ctx){if(1&rf){const _r8=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275getCurrentView"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"input",11),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("keyup.enter",(function SubmissionImportExternalSearchbarComponent_input_5_Template_input_keyup_enter_0_listener(){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r8);const ctx_r7=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]();return""===ctx_r7.searchString?null:ctx_r7.search()}))("ngModelChange",(function SubmissionImportExternalSearchbarComponent_input_5_Template_input_ngModelChange_0_listener($event){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r8);return _angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]().searchString=$event})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](1,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()}if(2&rf){const ctx_r1=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275propertyInterpolate"]("placeholder",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](1,2,"submission.import-external.search.placeholder")),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngModel",ctx_r1.searchString)}}function SubmissionImportExternalSearchbarComponent_button_20_Template(rf,ctx){if(1&rf){const _r12=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275getCurrentView"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"button",12),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("click",(function SubmissionImportExternalSearchbarComponent_button_20_Template_button_click_0_listener(){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r12);const source_r10=ctx.$implicit;return _angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]().makeSourceSelection(source_r10)})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](1,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](3,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()}if(2&rf){const source_r10=ctx.$implicit;_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275propertyInterpolate"]("title",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](1,2,"submission.import-external.source."+(null==source_r10?null:source_r10.name))),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](3,4,"submission.import-external.source."+(null==source_r10?null:source_r10.name)))}}function SubmissionImportExternalSearchbarComponent_div_22_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div",13),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](1,"p"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](3,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](3,1,"submission.import-external.source.loading")))}const _c0=function(a0){return{"input-group-append":a0}};class SubmissionImportExternalSearchbarComponent{constructor(externalService,cdr,windowService){this.externalService=externalService,this.cdr=cdr,this.windowService=windowService,this.sourceListLoading=!1,this.externalSourceData=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.EventEmitter}ngOnInit(){this.selectedElement={id:"",name:"loading"},this.searchString="",this.sourceList=[],this.findListOptions=Object.assign({},new _core_data_request_models__WEBPACK_IMPORTED_MODULE_9__.f,{elementsPerPage:5,currentPage:1,searchParams:[new _core_cache_models_request_param_model__WEBPACK_IMPORTED_MODULE_4__.a("entityType",this.initExternalSourceData.entity)]}),this.externalService.searchBy("findByEntityType",this.findListOptions).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.a)((()=>{const pageInfo=new _core_shared_page_info_model__WEBPACK_IMPORTED_MODULE_7__.a,paginatedList=Object(_core_data_paginated_list_model__WEBPACK_IMPORTED_MODULE_6__.b)(pageInfo,[]),paginatedListRD=Object(_shared_remote_data_utils__WEBPACK_IMPORTED_MODULE_8__.c)(paginatedList);return Object(rxjs__WEBPACK_IMPORTED_MODULE_1__.a)(paginatedListRD)})),Object(_core_shared_operators__WEBPACK_IMPORTED_MODULE_10__.j)()).subscribe((externalSource=>{externalSource.page.forEach((element=>{this.sourceList.push({id:element.id,name:element.name}),this.initExternalSourceData.sourceId===element.id&&(this.selectedElement={id:element.id,name:element.name},this.searchString=this.initExternalSourceData.query)})),""===this.selectedElement.id&&(this.selectedElement=this.sourceList[0]),this.pageInfo=externalSource.pageInfo,this.cdr.detectChanges()})),this.isXsOrSm$=this.windowService.isXsOrSm()}makeSourceSelection(source){this.selectedElement=source}onScroll(){!this.sourceListLoading&&this.pageInfo.currentPage+1<=this.pageInfo.totalPages&&(this.sourceListLoading=!0,this.findListOptions=Object.assign({},new _core_data_request_models__WEBPACK_IMPORTED_MODULE_9__.f,{elementsPerPage:5,currentPage:this.findListOptions.currentPage+1,searchParams:[new _core_cache_models_request_param_model__WEBPACK_IMPORTED_MODULE_4__.a("entityType",this.initExternalSourceData.entity)]}),this.externalService.searchBy("findByEntityType",this.findListOptions).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.a)((()=>{const pageInfo=new _core_shared_page_info_model__WEBPACK_IMPORTED_MODULE_7__.a,paginatedList=Object(_core_data_paginated_list_model__WEBPACK_IMPORTED_MODULE_6__.b)(pageInfo,[]),paginatedListRD=Object(_shared_remote_data_utils__WEBPACK_IMPORTED_MODULE_8__.c)(paginatedList);return Object(rxjs__WEBPACK_IMPORTED_MODULE_1__.a)(paginatedListRD)})),Object(_core_shared_operators__WEBPACK_IMPORTED_MODULE_10__.i)(),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.a)((()=>this.sourceListLoading=!1))).subscribe((externalSource=>{externalSource.payload.page.forEach((element=>{this.sourceList.push({id:element.id,name:element.name})})),this.pageInfo=externalSource.payload.pageInfo,this.cdr.detectChanges()})))}search(){this.externalSourceData.emit({entity:this.initExternalSourceData.entity,sourceId:this.selectedElement.id,query:this.searchString})}ngOnDestroy(){Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_12__.b)(this.sub)&&this.sub.unsubscribe()}}SubmissionImportExternalSearchbarComponent.\u0275fac=function SubmissionImportExternalSearchbarComponent_Factory(t){return new(t||SubmissionImportExternalSearchbarComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_core_data_external_source_service__WEBPACK_IMPORTED_MODULE_5__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__.ChangeDetectorRef),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_shared_host_window_service__WEBPACK_IMPORTED_MODULE_11__.a))},SubmissionImportExternalSearchbarComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineComponent"]({type:SubmissionImportExternalSearchbarComponent,selectors:[["ds-submission-import-external-searchbar"]],inputs:{initExternalSourceData:"initExternalSourceData"},outputs:{externalSourceData:"externalSourceData"},decls:34,vars:31,consts:[["class","input-group mb-2",4,"ngIf"],[1,"input-group","mb-5"],["type","text","class","form-control","aria-label","","aria-describedby","",3,"ngModel","placeholder","keyup.enter","ngModelChange",4,"ngIf"],["ngbDropdown","","role","group","aria-label","",3,"ngClass"],["ngbDropdownToggle","",1,"btn","btn-outline-secondary","w-fx",3,"title"],["ngbDropdownMenu","","aria-haspopup","true","aria-expanded","false","aria-labelledby","scrollableDropdownMenuButton",1,"dropdown-menu","scrollable-dropdown-menu","w-100"],["aria-labelledby","scrollableDropdownMenuButton","infiniteScroll","",1,"scrollable-menu",3,"infiniteScrollDistance","infiniteScrollThrottle","scrollWindow","scrolled"],["ngbDropdownItem","","class","dropdown-item text-truncate",3,"title","click",4,"ngFor","ngForOf"],["ngbDropdownItem","","class","scrollable-dropdown-loading text-center",4,"ngIf"],["type","button",1,"btn","btn-primary",3,"title","disabled","click"],[1,"input-group","mb-2"],["type","text","aria-label","","aria-describedby","",1,"form-control",3,"ngModel","placeholder","keyup.enter","ngModelChange"],["ngbDropdownItem","",1,"dropdown-item","text-truncate",3,"title","click"],["ngbDropdownItem","",1,"scrollable-dropdown-loading","text-center"]],template:function SubmissionImportExternalSearchbarComponent_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](0,SubmissionImportExternalSearchbarComponent_div_0_Template,5,4,"div",0),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](1,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](2,"\n"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](3,"div",1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](4,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](5,SubmissionImportExternalSearchbarComponent_input_5_Template,2,4,"input",2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](6,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](7,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](8,"div",3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](9,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](10,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](11,"button",4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](12,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](13),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](14,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](15,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](16,"div",5),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](17,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](18,"div",6),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("scrolled",(function SubmissionImportExternalSearchbarComponent_Template_div_scrolled_18_listener(){return ctx.onScroll()})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](19,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](20,SubmissionImportExternalSearchbarComponent_button_20_Template,4,6,"button",7),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](21,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](22,SubmissionImportExternalSearchbarComponent_div_22_Template,4,3,"div",8),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](23,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](24,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](25,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](26,"button",9),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("click",(function SubmissionImportExternalSearchbarComponent_Template_button_click_26_listener(){return ctx.search()})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](27,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](28,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](29),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](30,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](31,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](32,"\n"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](33,"\n")),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](1,13,ctx.isXsOrSm$)),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](5),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",!_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](6,15,ctx.isXsOrSm$)),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngClass",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pureFunction1"](29,_c0,!_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](9,17,ctx.isXsOrSm$))),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275propertyInterpolate"]("title",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](12,19,"submission.import-external.search.source.hint")),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](14,21,"submission.import-external.source."+(null==ctx.selectedElement?null:ctx.selectedElement.name))),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](5),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("infiniteScrollDistance",2)("infiniteScrollThrottle",50)("scrollWindow",!1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngForOf",ctx.sourceList),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",ctx.sourceListLoading),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("title",""===ctx.searchString?_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](27,23,"submission.import-external.search.button.hint"):_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](28,25,"submission.import-external.search.button"))("disabled",""===ctx.searchString),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](30,27,"submission.import-external.search.button")))},directives:[_angular_common__WEBPACK_IMPORTED_MODULE_13__.NgIf,_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_14__.j,_angular_common__WEBPACK_IMPORTED_MODULE_13__.NgClass,_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_14__.o,_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_14__.m,ngx_infinite_scroll__WEBPACK_IMPORTED_MODULE_15__.a,_angular_common__WEBPACK_IMPORTED_MODULE_13__.NgForOf,_angular_forms__WEBPACK_IMPORTED_MODULE_16__.DefaultValueAccessor,_angular_forms__WEBPACK_IMPORTED_MODULE_16__.NgControlStatus,_angular_forms__WEBPACK_IMPORTED_MODULE_16__.NgModel,_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_14__.l],pipes:[_angular_common__WEBPACK_IMPORTED_MODULE_13__.AsyncPipe,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_17__.d],styles:[".input-group-append[_ngcontent-%COMP%]:last-child > .btn[_ngcontent-%COMP%]:not(:last-child):not(.dropdown-toggle){margin-left:-1px;border-radius:0 .25rem .25rem 0}.input-group-append[_ngcontent-%COMP%]   .dropdown-toggle[_ngcontent-%COMP%]{border-radius:0}.w-fx[_ngcontent-%COMP%]{min-width:200px}.scrollable-menu[_ngcontent-%COMP%]{height:auto;max-height:calc(var(--ds-dropdown-menu-max-height) / 2);overflow-x:hidden}.scrollable-dropdown-loading[_ngcontent-%COMP%]{background-color:var(--bs-primary);color:#fff;height:calc(var(--bs-spacer) * 2)!important;line-height:calc(var(--bs-spacer) * 2);position:-webkit-sticky;position:sticky;bottom:0}"]})},A0IO:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return I18nBreadcrumbResolver}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),_i18n_breadcrumbs_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("tv3Y"),_shared_empty_util__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("J3qs"),_shared_utils_route_utils__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("q5u1");class I18nBreadcrumbResolver{constructor(breadcrumbService){this.breadcrumbService=breadcrumbService}resolve(route,state){const key=route.data.breadcrumbKey;if(Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_2__.a)(key))throw new Error('You provided an i18nBreadcrumbResolver for url "'+route.url+"\" but no breadcrumbKey in the route's data");const fullPath=Object(_shared_utils_route_utils__WEBPACK_IMPORTED_MODULE_3__.b)(route);return{provider:this.breadcrumbService,key:key,url:fullPath}}}I18nBreadcrumbResolver.\u0275fac=function I18nBreadcrumbResolver_Factory(t){return new(t||I18nBreadcrumbResolver)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275inject"](_i18n_breadcrumbs_service__WEBPACK_IMPORTED_MODULE_1__.a))},I18nBreadcrumbResolver.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineInjectable"]({token:I18nBreadcrumbResolver,factory:I18nBreadcrumbResolver.\u0275fac,providedIn:"root"})},"Ahb/":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ThemedSubmissionSubmitComponent}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),_shared_theme_support_themed_component__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("JTKQ");function ThemedSubmissionSubmitComponent_ng_template_0_Template(rf,ctx){}class ThemedSubmissionSubmitComponent extends _shared_theme_support_themed_component__WEBPACK_IMPORTED_MODULE_1__.a{getComponentName(){return"SubmissionSubmitComponent"}importThemedComponent(themeName){return __webpack_require__("TkMu")(`./${themeName}/app/submission/submit/submission-submit.component`)}importUnthemedComponent(){return Promise.resolve().then(__webpack_require__.bind(null,"THnG"))}}ThemedSubmissionSubmitComponent.\u0275fac=function ThemedSubmissionSubmitComponent_Factory(t){return \u0275ThemedSubmissionSubmitComponent_BaseFactory(t||ThemedSubmissionSubmitComponent)},ThemedSubmissionSubmitComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineComponent"]({type:ThemedSubmissionSubmitComponent,selectors:[["ds-themed-submission-submit"]],features:[_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275InheritDefinitionFeature"]],decls:3,vars:0,consts:[["vcr",""]],template:function ThemedSubmissionSubmitComponent_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](0,ThemedSubmissionSubmitComponent_ng_template_0_Template,0,0,"ng-template",null,0,_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275templateRefExtractor"]),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](2,"\n"))},encapsulation:2});const \u0275ThemedSubmissionSubmitComponent_BaseFactory=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275getInheritedFactory"](ThemedSubmissionSubmitComponent)},"FQ+h":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"SubmitPageModule",(function(){return SubmitPageModule}));var common=__webpack_require__("ofXK"),core=__webpack_require__("fXoL"),shared_module=__webpack_require__("PCNd"),router=__webpack_require__("tyNb"),authenticated_guard=__webpack_require__("tPZA"),themed_submission_submit_component=__webpack_require__("Ahb/"),i18n_breadcrumb_resolver=__webpack_require__("A0IO");class SubmitPageRoutingModule{}SubmitPageRoutingModule.\u0275fac=function SubmitPageRoutingModule_Factory(t){return new(t||SubmitPageRoutingModule)},SubmitPageRoutingModule.\u0275mod=core["\u0275\u0275defineNgModule"]({type:SubmitPageRoutingModule}),SubmitPageRoutingModule.\u0275inj=core["\u0275\u0275defineInjector"]({imports:[[router.k.forChild([{canActivate:[authenticated_guard.a],path:"",pathMatch:"full",component:themed_submission_submit_component.a,resolve:{breadcrumb:i18n_breadcrumb_resolver.a},data:{title:"submission.submit.title",breadcrumbKey:"submission.submit"}}])]]});var submission_module=__webpack_require__("c3nT");class SubmitPageModule{}SubmitPageModule.\u0275fac=function SubmitPageModule_Factory(t){return new(t||SubmitPageModule)},SubmitPageModule.\u0275mod=core["\u0275\u0275defineNgModule"]({type:SubmitPageModule}),SubmitPageModule.\u0275inj=core["\u0275\u0275defineInjector"]({imports:[[SubmitPageRoutingModule,common.CommonModule,shared_module.a,submission_module.a]]})},JHLN:function(module,exports,__webpack_require__){var map={"./custom/app/submission/import-external/submission-import-external.component":["mVFA",69]};function webpackAsyncContext(req){if(!__webpack_require__.o(map,req))return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}));var ids=map[req],id=ids[0];return __webpack_require__.e(ids[1]).then((function(){return __webpack_require__(id)}))}webpackAsyncContext.keys=function webpackAsyncContextKeys(){return Object.keys(map)},webpackAsyncContext.id="JHLN",module.exports=webpackAsyncContext},RMpN:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"SubmissionImportExternalComponent",(function(){return SubmissionImportExternalComponent}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),rxjs__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("2Vo4"),rxjs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("itXk"),rxjs_operators__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("IzEk"),rxjs_operators__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("pLZG"),rxjs_operators__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("eIep"),rxjs_operators__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("vkgz"),rxjs_operators__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("5+tZ"),_core_data_external_source_service__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("dHui"),_core_data_paginated_list_model__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("f+Ev"),_core_shared_search_search_configuration_service__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("joI/"),_core_shared_context_model__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("ynxc"),_shared_pagination_pagination_component_options_model__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("7DXY"),_core_services_route_service__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("ppE2"),_shared_remote_data_utils__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("GG8d"),_import_external_preview_submission_import_external_preview_component__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("20cJ"),_shared_animations_fade__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("mEo1"),_core_shared_page_info_model__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("oBfO"),_shared_empty_util__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("J3qs"),_core_shared_operators__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("1QIV"),_core_shared_item_relationships_item_type_resource_type__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("dnwH"),_angular_router__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("tyNb"),_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__("1kSV"),_import_external_searchbar_submission_import_external_searchbar_component__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__("3cpT"),_angular_common__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__("ofXK"),_shared_utils_var_directive__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__("O/5o"),_shared_object_collection_object_collection_component__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__("jLV+"),_shared_loading_loading_component__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__("Frqi"),_shared_alert_alert_component__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__("VYMa"),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__("sYmb");function SubmissionImportExternalComponent_div_15_div_2_ng_container_2_h3_2_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"h3"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](2,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](2,1,"submission.sections.describe.relationship-lookup.selection-tab.title")))}const _c0=function(a0,a1){return{repeatable:a0,listId:a1}};function SubmissionImportExternalComponent_div_15_div_2_ng_container_2_ds_viewable_collection_4_Template(rf,ctx){if(1&rf){const _r10=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275getCurrentView"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"ds-viewable-collection",14),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("importObject",(function SubmissionImportExternalComponent_div_15_div_2_ng_container_2_ds_viewable_collection_4_Template_ds_viewable_collection_importObject_0_listener($event){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r10);return _angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"](4).import($event)})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()}if(2&rf){const entriesRD_r4=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]().ngVar,ctx_r6=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"](3);_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("@fadeIn",void 0)("objects",entriesRD_r4)("selectionConfig",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pureFunction2"](8,_c0,ctx_r6.repeatable,ctx_r6.listId))("config",ctx_r6.initialPagination)("hideGear",!0)("context",ctx_r6.context)("importable",!0)("importConfig",ctx_r6.importConfig)}}function SubmissionImportExternalComponent_div_15_div_2_ng_container_2_ds_loading_7_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](0,"ds-loading",15),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](1,"translate")),2&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275propertyInterpolate"]("message",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](1,1,"loading.search-results"))}function SubmissionImportExternalComponent_div_15_div_2_ng_container_2_div_10_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div",16),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n          "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](2,"ds-alert",17),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](4,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](5,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("type","alert-info"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](4,2,"search.results.empty")))}function SubmissionImportExternalComponent_div_15_div_2_ng_container_2_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementContainerStart"](0),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](2,SubmissionImportExternalComponent_div_15_div_2_ng_container_2_h3_2_Template,3,3,"h3",10),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](4,SubmissionImportExternalComponent_div_15_div_2_ng_container_2_ds_viewable_collection_4_Template,2,11,"ds-viewable-collection",11),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](5,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](6,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](7,SubmissionImportExternalComponent_div_15_div_2_ng_container_2_ds_loading_7_Template,2,3,"ds-loading",12),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](8,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](9,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](10,SubmissionImportExternalComponent_div_15_div_2_ng_container_2_div_10_Template,6,4,"div",13),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](11,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](12,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementContainerEnd"]()),2&rf){const entriesRD_r4=ctx.ngVar,ctx_r3=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"](3);_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",entriesRD_r4&&0!==(null==entriesRD_r4||null==entriesRD_r4.payload||null==entriesRD_r4.payload.page?null:entriesRD_r4.payload.page.length)),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",(null==entriesRD_r4?null:entriesRD_r4.hasSucceeded)&&!_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](5,4,ctx_r3.isLoading$)&&(null==entriesRD_r4||null==entriesRD_r4.payload||null==entriesRD_r4.payload.page?null:entriesRD_r4.payload.page.length)>0),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](8,6,ctx_r3.isLoading$)),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",!_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](11,8,ctx_r3.isLoading$)&&0===(null==entriesRD_r4||null==entriesRD_r4.payload||null==entriesRD_r4.payload.page?null:entriesRD_r4.payload.page.length))}}function SubmissionImportExternalComponent_div_15_div_2_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div",2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](2,SubmissionImportExternalComponent_div_15_div_2_ng_container_2_Template,13,10,"ng-container",9),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](3,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](4,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()),2&rf){const ctx_r1=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"](2);_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngVar",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](3,1,ctx_r1.entriesRD$))}}function SubmissionImportExternalComponent_div_15_div_4_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div",2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](2,"ds-alert",17),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](4,"p",18),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](5),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](6,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](7,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](8,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("type","alert-info"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](6,2,"submission.import-external.page.hint")))}function SubmissionImportExternalComponent_div_15_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div",1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](2,SubmissionImportExternalComponent_div_15_div_2_Template,5,3,"div",8),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](4,SubmissionImportExternalComponent_div_15_div_4_Template,9,4,"div",8),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](5,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()),2&rf){const ctx_r0=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",""!==ctx_r0.reload$.value.sourceId),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",""===ctx_r0.reload$.value.sourceId)}}const _c1=function(){return["/mydspace"]};class SubmissionImportExternalComponent{constructor(searchConfigService,externalService,routeService,router,modalService){this.searchConfigService=searchConfigService,this.externalService=externalService,this.routeService=routeService,this.router=router,this.modalService=modalService,this.entriesRD$=new rxjs__WEBPACK_IMPORTED_MODULE_1__.a(null),this.isLoading$=new rxjs__WEBPACK_IMPORTED_MODULE_1__.a(!1),this.reload$=new rxjs__WEBPACK_IMPORTED_MODULE_1__.a({entity:"",query:"",sourceId:""}),this.initialPagination=Object.assign(new _shared_pagination_pagination_component_options_model__WEBPACK_IMPORTED_MODULE_12__.a,{id:"spc",pageSize:10}),this.subs=[]}ngOnInit(){this.listId="list-submission-external-sources",this.context=_core_shared_context_model__WEBPACK_IMPORTED_MODULE_11__.a.EntitySearchModalWithNameVariants,this.repeatable=!1,this.routeData={entity:"",sourceId:"",query:""},this.importConfig={buttonLabel:"submission.sections.describe.relationship-lookup.external-source.import-button-title."+this.label},this.entriesRD$=new rxjs__WEBPACK_IMPORTED_MODULE_1__.a(Object(_shared_remote_data_utils__WEBPACK_IMPORTED_MODULE_14__.c)(Object(_core_data_paginated_list_model__WEBPACK_IMPORTED_MODULE_9__.b)(new _core_shared_page_info_model__WEBPACK_IMPORTED_MODULE_17__.a,[]))),this.isLoading$=new rxjs__WEBPACK_IMPORTED_MODULE_1__.a(!1),this.subs.push(Object(rxjs__WEBPACK_IMPORTED_MODULE_2__.a)([this.routeService.getQueryParameterValue("entity"),this.routeService.getQueryParameterValue("sourceId"),this.routeService.getQueryParameterValue("query")]).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.a)(1)).subscribe((([entity,sourceId,query])=>{this.reload$.next({entity:entity||_core_shared_item_relationships_item_type_resource_type__WEBPACK_IMPORTED_MODULE_20__.b,query:query,sourceId:sourceId}),this.selectLabel(entity),this.retrieveExternalSources()})))}getExternalSourceData(event){this.router.navigate([],{queryParams:event,replaceUrl:!0}).then((()=>{this.reload$.next(event),this.retrieveExternalSources()}))}import(entry){this.modalRef=this.modalService.open(_import_external_preview_submission_import_external_preview_component__WEBPACK_IMPORTED_MODULE_15__.a,{size:"lg"});const modalComp=this.modalRef.componentInstance;modalComp.externalSourceEntry=entry,modalComp.labelPrefix=this.label}ngOnDestroy(){this.subs.filter((sub=>Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_18__.b)(sub))).forEach((sub=>sub.unsubscribe())),Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_18__.b)(this.retrieveExternalSourcesSub)&&this.retrieveExternalSourcesSub.unsubscribe()}retrieveExternalSources(){Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_18__.b)(this.retrieveExternalSourcesSub)&&this.retrieveExternalSourcesSub.unsubscribe(),this.retrieveExternalSourcesSub=this.reload$.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.a)((sourceQueryObject=>Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_18__.e)(sourceQueryObject.sourceId)&&Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_18__.e)(sourceQueryObject.query))),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.a)((sourceQueryObject=>{const query=sourceQueryObject.query;return this.routeData=sourceQueryObject,this.searchConfigService.paginatedSearchOptions.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.a)((()=>this.isLoading$.next(!0))),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.a)((searchOptions=>searchOptions.query===query)),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.a)((searchOptions=>this.externalService.getExternalSourceEntries(this.routeData.sourceId,searchOptions).pipe(Object(_core_shared_operators__WEBPACK_IMPORTED_MODULE_19__.f)()))))}))).subscribe((rdData=>{this.entriesRD$.next(rdData),this.isLoading$.next(!1)}))}selectLabel(entity){this.label=entity,this.importConfig={buttonLabel:"submission.sections.describe.relationship-lookup.external-source.import-button-title."+this.label}}}SubmissionImportExternalComponent.\u0275fac=function SubmissionImportExternalComponent_Factory(t){return new(t||SubmissionImportExternalComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_core_shared_search_search_configuration_service__WEBPACK_IMPORTED_MODULE_10__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_core_data_external_source_service__WEBPACK_IMPORTED_MODULE_8__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_core_services_route_service__WEBPACK_IMPORTED_MODULE_13__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_21__.g),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_22__.q))},SubmissionImportExternalComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineComponent"]({type:SubmissionImportExternalComponent,selectors:[["ds-submission-import-external"]],decls:32,vars:10,consts:[[1,"container"],[1,"row"],[1,"col-md-12"],["id","header",1,"pb-2"],[3,"initExternalSourceData","externalSourceData"],["class","row",4,"ngIf"],["role","button",1,"btn","btn-outline-secondary",3,"routerLink"],["aria-hidden","true",1,"fa","fa-chevron-left"],["class","col-md-12",4,"ngIf"],[4,"ngVar"],[4,"ngIf"],[3,"objects","selectionConfig","config","hideGear","context","importable","importConfig","importObject",4,"ngIf"],[3,"message",4,"ngIf"],["id","empty-external-entry-list",4,"ngIf"],[3,"objects","selectionConfig","config","hideGear","context","importable","importConfig","importObject"],[3,"message"],["id","empty-external-entry-list"],[3,"type"],[1,"lead","mb-0"]],template:function SubmissionImportExternalComponent_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div",0),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](2,"div",1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](4,"div",2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](5,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](6,"h2",3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](7),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](8,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](9,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](10,"ds-submission-import-external-searchbar",4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("externalSourceData",(function SubmissionImportExternalComponent_Template_ds_submission_import_external_searchbar_externalSourceData_10_listener($event){return ctx.getExternalSourceData($event)})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](11,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](12,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](13,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](14,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](15,SubmissionImportExternalComponent_div_15_Template,6,2,"div",5),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](16,"\n\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](17,"div",1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](18,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](19,"div",2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](20,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](21,"hr"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](22,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](23,"a",6),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](24,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](25,"i",7),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](26),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](27,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](28,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](29,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](30,"\n"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](31,"\n")),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](7),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](8,5,"submission.import-external.title"+(ctx.label?"."+ctx.label:""))),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("initExternalSourceData",ctx.reload$.value),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](5),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",ctx.reload$.value.entity),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](8),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("routerLink",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pureFunction0"](9,_c1)),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate1"](" ",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](27,7,"submission.import-external.back-to-my-dspace"),"\n      "))},directives:[_import_external_searchbar_submission_import_external_searchbar_component__WEBPACK_IMPORTED_MODULE_23__.a,_angular_common__WEBPACK_IMPORTED_MODULE_24__.NgIf,_angular_router__WEBPACK_IMPORTED_MODULE_21__.j,_shared_utils_var_directive__WEBPACK_IMPORTED_MODULE_25__.a,_shared_object_collection_object_collection_component__WEBPACK_IMPORTED_MODULE_26__.a,_shared_loading_loading_component__WEBPACK_IMPORTED_MODULE_27__.a,_shared_alert_alert_component__WEBPACK_IMPORTED_MODULE_28__.a],pipes:[_ngx_translate_core__WEBPACK_IMPORTED_MODULE_29__.d,_angular_common__WEBPACK_IMPORTED_MODULE_24__.AsyncPipe],styles:[""],data:{animation:[_shared_animations_fade__WEBPACK_IMPORTED_MODULE_16__.a]}})},SCNa:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"SubmissionEditComponent",(function(){return SubmissionEditComponent}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),rxjs__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("2Vo4"),rxjs_operators__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("eIep"),rxjs_operators__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("pLZG"),rxjs_operators__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("Kj3r"),_shared_empty_util__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("J3qs"),_submission_service__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("J/vq"),_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("lI3o"),_core_shared_operators__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("1QIV"),_core_data_item_data_service__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("iqTE"),_core_submission_submission_json_patch_operations_service__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("QjZv"),_utils_parseSectionErrors__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("fBXw"),_angular_router__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("tyNb"),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("sYmb"),_form_submission_form_component__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("m4Gq");class SubmissionEditComponent{constructor(changeDetectorRef,notificationsService,route,router,itemDataService,submissionService,translate,submissionJsonPatchOperationsService){this.changeDetectorRef=changeDetectorRef,this.notificationsService=notificationsService,this.route=route,this.router=router,this.itemDataService=itemDataService,this.submissionService=submissionService,this.translate=translate,this.submissionJsonPatchOperationsService=submissionJsonPatchOperationsService,this.subs=[],this.itemLink$=new rxjs__WEBPACK_IMPORTED_MODULE_1__.a(void 0)}ngOnInit(){this.subs.push(this.route.paramMap.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.a)((params=>this.submissionService.retrieveSubmission(params.get("id")))),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.a)((submissionObjectRD=>Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_5__.g)(submissionObjectRD)))).subscribe((submissionObjectRD=>{if(submissionObjectRD.hasSucceeded)if(Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_5__.d)(submissionObjectRD.payload))this.notificationsService.info(null,this.translate.get("submission.general.cannot_submit")),this.router.navigate(["/mydspace"]);else{const{errors:errors}=submissionObjectRD.payload;this.submissionErrors=Object(_utils_parseSectionErrors__WEBPACK_IMPORTED_MODULE_11__.a)(errors),this.submissionId=submissionObjectRD.payload.id.toString(),this.collectionId=submissionObjectRD.payload.collection.id,this.selfUrl=submissionObjectRD.payload._links.self.href,this.sections=submissionObjectRD.payload.sections,this.itemLink$.next(submissionObjectRD.payload._links.item.href),this.item=submissionObjectRD.payload.item,this.submissionDefinition=submissionObjectRD.payload.submissionDefinition}else 404===submissionObjectRD.statusCode&&this.router.navigate(["/404"],{skipLocationChange:!0})})),this.itemLink$.pipe(Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_5__.f)(),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.a)((itemLink=>this.itemDataService.findByHref(itemLink))),Object(_core_shared_operators__WEBPACK_IMPORTED_MODULE_8__.c)(),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.a)(300)).subscribe((itemRd=>{this.item=itemRd.payload,this.changeDetectorRef.detectChanges()})))}ngOnDestroy(){this.subs.filter((sub=>Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_5__.b)(sub))).forEach((sub=>sub.unsubscribe())),this.submissionJsonPatchOperationsService.deletePendingJsonPatchOperations()}}SubmissionEditComponent.\u0275fac=function SubmissionEditComponent_Factory(t){return new(t||SubmissionEditComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__.ChangeDetectorRef),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_7__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_12__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_12__.g),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_core_data_item_data_service__WEBPACK_IMPORTED_MODULE_9__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_submission_service__WEBPACK_IMPORTED_MODULE_6__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_ngx_translate_core__WEBPACK_IMPORTED_MODULE_13__.e),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_core_submission_submission_json_patch_operations_service__WEBPACK_IMPORTED_MODULE_10__.a))},SubmissionEditComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineComponent"]({type:SubmissionEditComponent,selectors:[["ds-submission-edit"]],decls:5,vars:7,consts:[[1,"submission-submit-container"],[3,"collectionId","sections","selfUrl","submissionDefinition","submissionErrors","item","submissionId"]],template:function SubmissionEditComponent_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div",0),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](2,"ds-submission-form",1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3,"\n"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](4,"\n")),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("collectionId",ctx.collectionId)("sections",ctx.sections)("selfUrl",ctx.selfUrl)("submissionDefinition",ctx.submissionDefinition)("submissionErrors",ctx.submissionErrors)("item",ctx.item)("submissionId",ctx.submissionId))},directives:[_form_submission_form_component__WEBPACK_IMPORTED_MODULE_14__.a],styles:[""]})},"T/iP":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return SubmissionUploadFilesComponent}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),rxjs__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("LRne"),rxjs_operators__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("SxV6"),rxjs_operators__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("IzEk"),_sections_sections_service__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("YJD6"),_shared_empty_util__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("J3qs"),_core_submission_submission_response_parsing_service__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("oOMw"),_submission_service__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("J/vq"),_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("lI3o"),_utils_parseSectionErrors__WEBPACK_IMPORTED_MODULE_10__=(__webpack_require__("ao5O"),__webpack_require__("fBXw")),_core_submission_submission_json_patch_operations_service__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("QjZv"),_sections_sections_type__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("4GeW"),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("sYmb"),_angular_common__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("ofXK"),_shared_uploader_uploader_component__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("4zj/");function SubmissionUploadFilesComponent_ds_uploader_0_Template(rf,ctx){if(1&rf){const _r2=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275getCurrentView"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"ds-uploader",1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("onCompleteItem",(function SubmissionUploadFilesComponent_ds_uploader_0_Template_ds_uploader_onCompleteItem_0_listener($event){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r2);return _angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]().onCompleteItem($event)}))("onUploadError",(function SubmissionUploadFilesComponent_ds_uploader_0_Template_ds_uploader_onUploadError_0_listener(){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r2);return _angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]().onUploadError()})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()}if(2&rf){const ctx_r0=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("dropMsg",ctx_r0.dropMsg)("dropOverDocumentMsg",ctx_r0.dropOverDocumentMsg)("enableDragOverDocument",ctx_r0.enableDragOverDocument)("onBeforeUpload",ctx_r0.onBeforeUpload)("uploadFilesOptions",ctx_r0.uploadFilesOptions)}}class SubmissionUploadFilesComponent{constructor(notificationsService,operationsService,sectionService,submissionService,translate){this.notificationsService=notificationsService,this.operationsService=operationsService,this.sectionService=sectionService,this.submissionService=submissionService,this.translate=translate,this.enableDragOverDocument=!0,this.dropOverDocumentMsg="submission.sections.upload.drop-message",this.dropMsg="submission.sections.upload.drop-message",this.subs=[],this.uploadEnabled=Object(rxjs__WEBPACK_IMPORTED_MODULE_1__.a)(!1),this.onBeforeUpload=()=>{const sub=this.operationsService.jsonPatchByResourceType(this.submissionService.getSubmissionObjectLinkName(),this.submissionId,"sections").subscribe();return this.subs.push(sub),sub}}ngOnChanges(){this.uploadEnabled=this.sectionService.isSectionTypeAvailable(this.submissionId,_sections_sections_type__WEBPACK_IMPORTED_MODULE_12__.a.Upload)}onCompleteItem(workspaceitem){this.subs.push(this.uploadEnabled.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.a)()).subscribe((isUploadEnabled=>{if(isUploadEnabled){const{sections:sections}=workspaceitem,{errors:errors}=workspaceitem,errorsList=Object(_utils_parseSectionErrors__WEBPACK_IMPORTED_MODULE_10__.a)(errors);sections&&Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_5__.e)(sections)&&Object.keys(sections).forEach((sectionId=>{const sectionData=Object(_core_submission_submission_response_parsing_service__WEBPACK_IMPORTED_MODULE_6__.b)(sections[sectionId]),sectionErrors=errorsList[sectionId];this.sectionService.isSectionType(this.submissionId,sectionId,_sections_sections_type__WEBPACK_IMPORTED_MODULE_12__.a.Upload).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.a)(1)).subscribe((isUpload=>{isUpload&&(Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_5__.d)(sectionErrors)?this.notificationsService.success(null,this.translate.get("submission.sections.upload.upload-successful")):this.notificationsService.error(null,this.translate.get("submission.sections.upload.upload-failed")))})),this.sectionService.updateSectionData(this.submissionId,sectionId,sectionData,sectionErrors,sectionErrors)}))}})))}onUploadError(){this.notificationsService.error(null,this.translate.get("submission.sections.upload.upload-failed"))}ngOnDestroy(){this.subs.filter((subscription=>Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_5__.b)(subscription))).forEach((subscription=>subscription.unsubscribe()))}}SubmissionUploadFilesComponent.\u0275fac=function SubmissionUploadFilesComponent_Factory(t){return new(t||SubmissionUploadFilesComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_8__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_core_submission_submission_json_patch_operations_service__WEBPACK_IMPORTED_MODULE_11__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_sections_sections_service__WEBPACK_IMPORTED_MODULE_4__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_submission_service__WEBPACK_IMPORTED_MODULE_7__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_ngx_translate_core__WEBPACK_IMPORTED_MODULE_13__.e))},SubmissionUploadFilesComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineComponent"]({type:SubmissionUploadFilesComponent,selectors:[["ds-submission-upload-files"]],inputs:{collectionId:"collectionId",submissionId:"submissionId",uploadFilesOptions:"uploadFilesOptions"},features:[_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275NgOnChangesFeature"]],decls:2,vars:1,consts:[[3,"dropMsg","dropOverDocumentMsg","enableDragOverDocument","onBeforeUpload","uploadFilesOptions","onCompleteItem","onUploadError",4,"ngIf"],[3,"dropMsg","dropOverDocumentMsg","enableDragOverDocument","onBeforeUpload","uploadFilesOptions","onCompleteItem","onUploadError"]],template:function SubmissionUploadFilesComponent_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](0,SubmissionUploadFilesComponent_ds_uploader_0_Template,1,5,"ds-uploader",0),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n")),2&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",ctx.uploadFilesOptions.url)},directives:[_angular_common__WEBPACK_IMPORTED_MODULE_14__.NgIf,_shared_uploader_uploader_component__WEBPACK_IMPORTED_MODULE_15__.a],encapsulation:2})},THnG:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"SubmissionSubmitComponent",(function(){return SubmissionSubmitComponent}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),rxjs__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("2Vo4"),rxjs_operators__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("eIep"),rxjs_operators__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("Kj3r"),_shared_empty_util__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("J3qs"),_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("lI3o"),_submission_service__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("J/vq"),_core_shared_operators__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("1QIV"),_core_data_item_data_service__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("iqTE"),_angular_router__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("tyNb"),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("sYmb");class SubmissionSubmitComponent{constructor(changeDetectorRef,notificationsService,router,itemDataService,submissionService,translate,viewContainerRef,route){this.changeDetectorRef=changeDetectorRef,this.notificationsService=notificationsService,this.router=router,this.itemDataService=itemDataService,this.submissionService=submissionService,this.translate=translate,this.viewContainerRef=viewContainerRef,this.route=route,this.itemLink$=new rxjs__WEBPACK_IMPORTED_MODULE_1__.a(void 0),this.subs=[],this.route.queryParams.subscribe((params=>{this.collectionParam=params.collection}))}ngOnInit(){this.subs.push(this.submissionService.createSubmission(this.collectionParam).subscribe((submissionObject=>{Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_4__.g)(submissionObject)&&(Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_4__.d)(submissionObject)?(this.notificationsService.info(null,this.translate.get("submission.general.cannot_submit")),this.router.navigate(["/mydspace"])):this.router.navigate(["/workspaceitems",submissionObject.id,"edit"],{replaceUrl:!0}))})),this.itemLink$.pipe(Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_4__.f)(),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.a)((itemLink=>this.itemDataService.findByHref(itemLink))),Object(_core_shared_operators__WEBPACK_IMPORTED_MODULE_7__.c)(),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.a)(300)).subscribe((itemRd=>{this.item=itemRd.payload,this.changeDetectorRef.detectChanges()})))}ngOnDestroy(){this.subs.filter((subscription=>Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_4__.b)(subscription))).forEach((subscription=>subscription.unsubscribe())),this.viewContainerRef.clear(),this.changeDetectorRef.markForCheck()}}SubmissionSubmitComponent.\u0275fac=function SubmissionSubmitComponent_Factory(t){return new(t||SubmissionSubmitComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__.ChangeDetectorRef),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_5__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_9__.g),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_core_data_item_data_service__WEBPACK_IMPORTED_MODULE_8__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_submission_service__WEBPACK_IMPORTED_MODULE_6__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_ngx_translate_core__WEBPACK_IMPORTED_MODULE_10__.e),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__.ViewContainerRef),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_9__.a))},SubmissionSubmitComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineComponent"]({type:SubmissionSubmitComponent,selectors:[["ds-submission-submit"]],decls:0,vars:0,template:function SubmissionSubmitComponent_Template(rf,ctx){},styles:[""]})},TTdl:function(module,__webpack_exports__,__webpack_require__){"use strict";var _shared_empty_util__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("J3qs");const regex=/([^\/]+)/g,regexShort=/\/sections\/(.*)/;__webpack_exports__.a=path=>("string"==typeof path?[path]:path).map((item=>item.match(regex)&&item.match(regex).length>2?{sectionId:item.match(regex)[1],fieldId:item.match(regex)[2],fieldIndex:Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_0__.b)(item.match(regex)[3])?+item.match(regex)[3]:0,originalPath:item}:{sectionId:item.match(regexShort)[1],originalPath:item}))},TkMu:function(module,exports,__webpack_require__){var map={"./custom/app/submission/submit/submission-submit.component":["cSSl",70]};function webpackAsyncContext(req){if(!__webpack_require__.o(map,req))return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}));var ids=map[req],id=ids[0];return __webpack_require__.e(ids[1]).then((function(){return __webpack_require__(id)}))}webpackAsyncContext.keys=function webpackAsyncContextKeys(){return Object.keys(map)},webpackAsyncContext.id="TkMu",module.exports=webpackAsyncContext},"Uql/":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return renderSectionFor})),__webpack_require__.d(__webpack_exports__,"b",(function(){return rendersSectionType}));const submissionSectionsMap=new Map;function renderSectionFor(sectionType){return function decorator(objectElement){objectElement&&submissionSectionsMap.set(sectionType,objectElement)}}function rendersSectionType(sectionType){return submissionSectionsMap.get(sectionType)}},YJD6:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return SectionsService}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),rxjs__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("itXk"),rxjs_operators__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("lJxs"),rxjs_operators__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("/uUt"),rxjs_operators__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("5+tZ"),rxjs_operators__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("pLZG"),rxjs_operators__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("IzEk"),lodash__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("LvDl"),_shared_empty_util__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("J3qs"),_objects_submission_objects_actions__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("4jMI"),_selectors__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("LP5c"),_core_submission_submission_scope_type__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("drGc"),_utils_parseSectionErrorPaths__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("TTdl"),_shared_form_form_actions__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("xvwT"),_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("lI3o"),_submission_service__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("J/vq"),_sections_type__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("4GeW"),_core_submission_submission_response_parsing_service__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("oOMw"),_ng_dynamic_forms_core__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("e+Av"),_shared_form_form_service__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("NFsL"),_core_json_patch_builder_json_patch_operation_path_combiner__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("0VLH"),_nicky_lenaers_ngx_scroll_to__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("KZTq"),_ngrx_store__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__("l7P3"),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__("sYmb");class SectionsService{constructor(formService,notificationsService,scrollToService,submissionService,store,translate){this.formService=formService,this.notificationsService=notificationsService,this.scrollToService=scrollToService,this.submissionService=submissionService,this.store=store,this.translate=translate}checkSectionErrors(submissionId,sectionId,formId,currentErrors,prevErrors=[]){if(Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_8__.d)(currentErrors))this.store.dispatch(new _objects_submission_objects_actions__WEBPACK_IMPORTED_MODULE_9__.r(submissionId,sectionId)),this.store.dispatch(new _shared_form_form_actions__WEBPACK_IMPORTED_MODULE_13__.e(formId));else if(!Object(lodash__WEBPACK_IMPORTED_MODULE_7__.isEqual)(currentErrors,prevErrors)){const dispatchedErrors=[];currentErrors.forEach((error=>{Object(_utils_parseSectionErrorPaths__WEBPACK_IMPORTED_MODULE_12__.a)(error.path).forEach((path=>{path.fieldId&&(this.formService.addError(formId,path.fieldId,path.fieldIndex,error.message),dispatchedErrors.push(path.fieldId))}))})),prevErrors.forEach((error=>{Object(_utils_parseSectionErrorPaths__WEBPACK_IMPORTED_MODULE_12__.a)(error.path).forEach((path=>{path.fieldId&&(dispatchedErrors.includes(path.fieldId)||this.formService.removeError(formId,path.fieldId,path.fieldIndex))}))}))}}dispatchRemoveSectionErrors(submissionId,sectionId){this.store.dispatch(new _objects_submission_objects_actions__WEBPACK_IMPORTED_MODULE_9__.r(submissionId,sectionId))}dispatchSetSectionFormId(submissionId,sectionId,formId){this.store.dispatch(new _objects_submission_objects_actions__WEBPACK_IMPORTED_MODULE_9__.E(submissionId,sectionId,formId))}getSectionData(submissionId,sectionId,sectionType){return this.store.select(Object(_selectors__WEBPACK_IMPORTED_MODULE_10__.d)(submissionId,sectionId)).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.a)((sectionData=>sectionType===_sections_type__WEBPACK_IMPORTED_MODULE_16__.a.SubmissionForm?Object(_core_submission_submission_response_parsing_service__WEBPACK_IMPORTED_MODULE_17__.b)(sectionData):sectionData)),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.a)())}getShownSectionErrors(submissionId,sectionId,sectionType){let errorsState$;return errorsState$=sectionType!==_sections_type__WEBPACK_IMPORTED_MODULE_16__.a.SubmissionForm?this.getSectionErrors(submissionId,sectionId):this.getSectionState(submissionId,sectionId,sectionType).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.a)((state=>this.formService.getFormErrors(state.formId).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.a)((formErrors=>{const pathCombiner=new _core_json_patch_builder_json_patch_operation_path_combiner__WEBPACK_IMPORTED_MODULE_20__.a("sections",sectionId),sectionErrors=formErrors.map((error=>({path:pathCombiner.getPath(error.fieldId.replace(/\_/g,".")).path,message:error.message}))).filter((sectionError=>-1===Object(lodash__WEBPACK_IMPORTED_MODULE_7__.findIndex)(state.errorsToShow,{path:sectionError.path})));return[...state.errorsToShow,...sectionErrors]})))))),errorsState$}getSectionErrors(submissionId,sectionId){return this.store.select(Object(_selectors__WEBPACK_IMPORTED_MODULE_10__.e)(submissionId,sectionId)).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.a)())}getSectionServerErrors(submissionId,sectionId){return this.store.select(Object(_selectors__WEBPACK_IMPORTED_MODULE_10__.g)(submissionId,sectionId)).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.a)())}getSectionState(submissionId,sectionId,sectionType){return this.store.select(Object(_selectors__WEBPACK_IMPORTED_MODULE_10__.f)(submissionId,sectionId)).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.a)((sectionObj=>Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_8__.b)(sectionObj))),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.a)((sectionObj=>sectionObj)),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.a)((sectionState=>Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_8__.b)(sectionState.data)&&sectionType===_sections_type__WEBPACK_IMPORTED_MODULE_16__.a.SubmissionForm?Object.assign({},sectionState,{data:Object(_core_submission_submission_response_parsing_service__WEBPACK_IMPORTED_MODULE_17__.b)(sectionState.data)}):sectionState)),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.a)())}isSectionValid(submissionId,sectionId){return this.store.select(Object(_selectors__WEBPACK_IMPORTED_MODULE_10__.f)(submissionId,sectionId)).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.a)((sectionObj=>Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_8__.b)(sectionObj))),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.a)((sectionObj=>sectionObj.isValid)),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.a)())}isSectionActive(submissionId,sectionId){return this.submissionService.getActiveSectionId(submissionId).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.a)((activeSectionId=>sectionId===activeSectionId)),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.a)())}isSectionEnabled(submissionId,sectionId){return this.store.select(Object(_selectors__WEBPACK_IMPORTED_MODULE_10__.f)(submissionId,sectionId)).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.a)((sectionObj=>Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_8__.b)(sectionObj))),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.a)((sectionObj=>sectionObj.enabled)),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.a)())}isSectionReadOnly(submissionId,sectionId,submissionScope){return this.store.select(Object(_selectors__WEBPACK_IMPORTED_MODULE_10__.f)(submissionId,sectionId)).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.a)((sectionObj=>Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_8__.b)(sectionObj))),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.a)((sectionObj=>Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_8__.e)(sectionObj.visibility)&&"READONLY"===sectionObj.visibility.other&&submissionScope!==_core_submission_submission_scope_type__WEBPACK_IMPORTED_MODULE_11__.a.WorkspaceItem)),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.a)())}isSectionAvailable(submissionId,sectionId){return this.store.select(Object(_selectors__WEBPACK_IMPORTED_MODULE_10__.c)(submissionId)).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.a)((submissionState=>Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_8__.h)(submissionState))),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.a)((submissionState=>Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_8__.h)(submissionState.sections)&&Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_8__.h)(submissionState.sections[sectionId]))),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.a)())}isSectionTypeAvailable(submissionId,sectionType){return this.store.select(Object(_selectors__WEBPACK_IMPORTED_MODULE_10__.c)(submissionId)).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.a)((submissionState=>Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_8__.h)(submissionState))),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.a)((submissionState=>Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_8__.h)(submissionState.sections)&&Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_8__.h)(Object(lodash__WEBPACK_IMPORTED_MODULE_7__.findKey)(submissionState.sections,{sectionType:sectionType})))),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.a)())}isSectionType(submissionId,sectionId,sectionType){return this.store.select(Object(_selectors__WEBPACK_IMPORTED_MODULE_10__.c)(submissionId)).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.a)((submissionState=>Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_8__.h)(submissionState))),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.a)((submissionState=>Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_8__.h)(submissionState.sections)&&Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_8__.h)(submissionState.sections[sectionId])&&submissionState.sections[sectionId].sectionType===sectionType)),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.a)())}addSection(submissionId,sectionId){this.store.dispatch(new _objects_submission_objects_actions__WEBPACK_IMPORTED_MODULE_9__.m(submissionId,sectionId));const config={target:sectionId,offset:-70};this.scrollToService.scrollTo(config)}removeSection(submissionId,sectionId){this.store.dispatch(new _objects_submission_objects_actions__WEBPACK_IMPORTED_MODULE_9__.h(submissionId,sectionId))}updateSectionData(submissionId,sectionId,data,errorsToShow=[],serverValidationErrors=[],metadata){if(Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_8__.e)(data)){const isAvailable$=this.isSectionAvailable(submissionId,sectionId),isEnabled$=this.isSectionEnabled(submissionId,sectionId);Object(rxjs__WEBPACK_IMPORTED_MODULE_1__.a)(isAvailable$,isEnabled$).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.a)(1),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.a)((([available,enabled])=>available))).subscribe((([available,enabled])=>{this.store.dispatch(new _objects_submission_objects_actions__WEBPACK_IMPORTED_MODULE_9__.G(submissionId,sectionId,data,errorsToShow,serverValidationErrors,metadata))}))}}setSectionError(submissionId,sectionId,error){this.store.dispatch(new _objects_submission_objects_actions__WEBPACK_IMPORTED_MODULE_9__.n(submissionId,sectionId,error))}setSectionStatus(submissionId,sectionId,status){this.store.dispatch(new _objects_submission_objects_actions__WEBPACK_IMPORTED_MODULE_9__.C(submissionId,sectionId,status))}computeSectionConfiguredMetadata(formConfig){const metadata=[],rawData="string"==typeof formConfig?JSON.parse(formConfig,_ng_dynamic_forms_core__WEBPACK_IMPORTED_MODULE_18__.T):formConfig;return rawData.rows&&!Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_8__.d)(rawData.rows)&&rawData.rows.forEach((currentRow=>{currentRow.fields&&!Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_8__.d)(currentRow.fields)&&currentRow.fields.forEach((field=>{field.selectableMetadata&&!Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_8__.d)(field.selectableMetadata)&&field.selectableMetadata.forEach((selectableMetadata=>{metadata.includes(selectableMetadata.metadata)||metadata.push(selectableMetadata.metadata)}))}))})),metadata}}SectionsService.\u0275fac=function SectionsService_Factory(t){return new(t||SectionsService)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275inject"](_shared_form_form_service__WEBPACK_IMPORTED_MODULE_19__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275inject"](_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_14__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275inject"](_nicky_lenaers_ngx_scroll_to__WEBPACK_IMPORTED_MODULE_21__.b),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275inject"](_submission_service__WEBPACK_IMPORTED_MODULE_15__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275inject"](_ngrx_store__WEBPACK_IMPORTED_MODULE_22__.i),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275inject"](_ngx_translate_core__WEBPACK_IMPORTED_MODULE_23__.e))},SectionsService.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineInjectable"]({token:SectionsService,factory:SectionsService.\u0275fac})},Yfyx:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return SubmissionSectionContainerComponent}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),_sections_directive__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("b8BE"),_sections_decorator__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("Uql/"),_shared_alert_aletr_type__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("ac5F"),_angular_common__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("ofXK"),_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("1kSV"),_shared_alert_alert_component__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("VYMa"),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("sYmb");const _c0=["sectionRef"];function SubmissionSectionContainerComponent_ngb_accordion_3_ng_template_5_i_7_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](0,"i",17),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](1,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](2,"translate")),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275propertyInterpolate"]("title",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](1,2,"submission.sections.status.warnings.title")),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275attribute"]("aria-label",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](2,4,"submission.sections.status.warnings.aria")))}function SubmissionSectionContainerComponent_ngb_accordion_3_ng_template_5_i_10_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](0,"i",18),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](1,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](2,"translate")),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275propertyInterpolate"]("title",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](1,2,"submission.sections.status.errors.title")),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275attribute"]("aria-label",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](2,4,"submission.sections.status.errors.aria")))}function SubmissionSectionContainerComponent_ngb_accordion_3_ng_template_5_i_12_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](0,"i",19),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](1,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](2,"translate")),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275propertyInterpolate"]("title",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](1,2,"submission.sections.status.valid.title")),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275attribute"]("aria-label",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](2,4,"submission.sections.status.valid.aria")))}function SubmissionSectionContainerComponent_ngb_accordion_3_ng_template_5_span_20_Template(rf,ctx){1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](0,"span",20)}function SubmissionSectionContainerComponent_ngb_accordion_3_ng_template_5_span_22_Template(rf,ctx){1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](0,"span",21)}function SubmissionSectionContainerComponent_ngb_accordion_3_ng_template_5_a_25_Template(rf,ctx){if(1&rf){const _r12=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275getCurrentView"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"a",22),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("click",(function SubmissionSectionContainerComponent_ngb_accordion_3_ng_template_5_a_25_Template_a_click_0_listener($event){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r12);return _angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"](3).removeSection($event)})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n            "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](2,"i",23),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3,"\n          "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()}}const _c1=function(a0){return{sectionHeader:a0}};function SubmissionSectionContainerComponent_ngb_accordion_3_ng_template_5_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](0,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](1,"span",8),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](3,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](4,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](5,"div",9),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](6,"\n          "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](7,SubmissionSectionContainerComponent_ngb_accordion_3_ng_template_5_i_7_Template,3,6,"i",10),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](8,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](9,"\n          "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](10,SubmissionSectionContainerComponent_ngb_accordion_3_ng_template_5_i_10_Template,3,6,"i",11),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](11,"\n          "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](12,SubmissionSectionContainerComponent_ngb_accordion_3_ng_template_5_i_12_Template,3,6,"i",12),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](13,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](14,"\n          "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](15,"a",13),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](16,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](17,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](18,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](19,"\n            "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](20,SubmissionSectionContainerComponent_ngb_accordion_3_ng_template_5_span_20_Template,1,0,"span",14),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](21,"\n            "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](22,SubmissionSectionContainerComponent_ngb_accordion_3_ng_template_5_span_22_Template,1,0,"span",15),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](23,"\n          "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](24,"\n          "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](25,SubmissionSectionContainerComponent_ngb_accordion_3_ng_template_5_a_25_Template,4,0,"a",16),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](26,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](27,"\n      ")),2&rf){const ctx_r3=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"](2),_r0=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275reference"](1);_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](3,9,"submission.sections."+ctx_r3.sectionData.header)),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](5),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",!_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](8,11,_r0.isValid())&&!_r0.hasErrors()),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",_r0.hasErrors()),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](13,13,_r0.isValid())&&!_r0.hasErrors()),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("title",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](18,20,_r0.isOpen()?"submission.sections.toggle.close":"submission.sections.toggle.open")),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275attribute"]("aria-label",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind2"](16,15,_r0.isOpen()?"submission.sections.toggle.aria.close":"submission.sections.toggle.aria.open",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pureFunction1"](22,_c1,_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](17,18,"submission.sections."+ctx_r3.sectionData.header)))),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](5),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",_r0.isOpen()),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",!_r0.isOpen()),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",!_r0.isMandatory())}}function SubmissionSectionContainerComponent_ngb_accordion_3_ng_template_7_div_1_ds_alert_2_Template(rf,ctx){if(1&rf){const _r19=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275getCurrentView"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"ds-alert",28),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("close",(function SubmissionSectionContainerComponent_ngb_accordion_3_ng_template_7_div_1_ds_alert_2_Template_ds_alert_close_0_listener(){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r19);const i_r17=ctx.index;_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"](4);return _angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275reference"](1).removeError(i_r17)})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()}if(2&rf){const error_r16=ctx.$implicit,ctx_r15=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"](4);_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("content",error_r16)("dismissible",!0)("type",ctx_r15.AlertTypeEnum.Error)}}function SubmissionSectionContainerComponent_ngb_accordion_3_ng_template_7_div_1_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div",5),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n          "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](2,SubmissionSectionContainerComponent_ngb_accordion_3_ng_template_7_div_1_ds_alert_2_Template,1,3,"ds-alert",27),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()),2&rf){const ctx_r13=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"](3),_r0=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275reference"](1);_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275propertyInterpolate1"]("id","sectionGenericError_",ctx_r13.sectionData.id,""),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngForOf",_r0.getErrors())}}function SubmissionSectionContainerComponent_ngb_accordion_3_ng_template_7_ng_container_5_Template(rf,ctx){1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementContainer"](0)}function SubmissionSectionContainerComponent_ngb_accordion_3_ng_template_7_Template(rf,ctx){if(1&rf){const _r21=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275getCurrentView"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](0,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](1,SubmissionSectionContainerComponent_ngb_accordion_3_ng_template_7_div_1_Template,4,2,"div",24),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](2,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](3,"div",25),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("click",(function SubmissionSectionContainerComponent_ngb_accordion_3_ng_template_7_Template_div_click_3_listener($event){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r21),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"](2);return _angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275reference"](1).setFocus($event)})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](4,"\n          "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](5,SubmissionSectionContainerComponent_ngb_accordion_3_ng_template_7_ng_container_5_Template,1,0,"ng-container",26),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](6,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](7,"\n      ")}if(2&rf){const ctx_r4=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"](2),_r0=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275reference"](1);_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",_r0.hasGenericErrors()),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275propertyInterpolate1"]("id","sectionContent_",ctx_r4.sectionData.id,""),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngComponentOutlet",ctx_r4.getSectionContent())("ngComponentOutletInjector",ctx_r4.objectInjector)}}function SubmissionSectionContainerComponent_ngb_accordion_3_Template(rf,ctx){if(1&rf){const _r23=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275getCurrentView"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"ngb-accordion",3,4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("panelChange",(function SubmissionSectionContainerComponent_ngb_accordion_3_Template_ngb_accordion_panelChange_0_listener($event){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r23),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]();return _angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275reference"](1).sectionChange($event)})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](2,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](3,"ngb-panel",5),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](4,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](5,SubmissionSectionContainerComponent_ngb_accordion_3_ng_template_5_Template,28,24,"ng-template",6),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](6,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](7,SubmissionSectionContainerComponent_ngb_accordion_3_ng_template_7_Template,8,4,"ng-template",7),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](8,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](9,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()}if(2&rf){const ctx_r1=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275propertyInterpolate"]("activeIds",ctx_r1.sectionData.id),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("destroyOnHide",!1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275propertyInterpolate"]("id",ctx_r1.sectionData.id)}}const _c2=function(a0){return{"section-focus":a0}};class SubmissionSectionContainerComponent{constructor(injector){this.injector=injector,this.AlertTypeEnum=_shared_alert_aletr_type__WEBPACK_IMPORTED_MODULE_3__.a}ngOnInit(){this.objectInjector=_angular_core__WEBPACK_IMPORTED_MODULE_0__.Injector.create({providers:[{provide:"collectionIdProvider",useFactory:()=>this.collectionId,deps:[]},{provide:"sectionDataProvider",useFactory:()=>this.sectionData,deps:[]},{provide:"submissionIdProvider",useFactory:()=>this.submissionId,deps:[]}],parent:this.injector})}removeSection(event){event.preventDefault(),event.stopPropagation(),this.sectionRef.removeSection(this.submissionId,this.sectionData.id)}getSectionContent(){return Object(_sections_decorator__WEBPACK_IMPORTED_MODULE_2__.b)(this.sectionData.sectionType)}}SubmissionSectionContainerComponent.\u0275fac=function SubmissionSectionContainerComponent_Factory(t){return new(t||SubmissionSectionContainerComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__.Injector))},SubmissionSectionContainerComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineComponent"]({type:SubmissionSectionContainerComponent,selectors:[["ds-submission-section-container"]],viewQuery:function SubmissionSectionContainerComponent_Query(rf,ctx){if(1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275viewQuery"](_c0,1),2&rf){let _t;_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275queryRefresh"](_t=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275loadQuery"]())&&(ctx.sectionRef=_t.first)}},inputs:{collectionId:"collectionId",sectionData:"sectionData",submissionId:"submissionId"},decls:7,vars:11,consts:[["dsSection","",3,"ngClass","mandatory","submissionId","sectionType","sectionId"],["sectionRef","sectionRef"],[3,"activeIds","destroyOnHide","panelChange",4,"ngIf"],[3,"activeIds","destroyOnHide","panelChange"],["acc","ngbAccordion"],[3,"id"],["ngbPanelTitle",""],["ngbPanelContent",""],["tabindex","0",1,"float-left","section-title"],[1,"d-inline-block","float-right"],["class","fas fa-exclamation-circle text-warning mr-3","role","img",3,"title",4,"ngIf"],["class","fas fa-exclamation-circle text-danger mr-3","role","img",3,"title",4,"ngIf"],["class","fas fa-check-circle text-success mr-3","role","img",3,"title",4,"ngIf"],["tabindex","0","role","button",1,"close",3,"title"],["class","fas fa-chevron-up fa-fw",4,"ngIf"],["class","fas fa-chevron-down fa-fw",4,"ngIf"],["href","javascript:void(0);","class","close mr-3",3,"click",4,"ngIf"],["role","img",1,"fas","fa-exclamation-circle","text-warning","mr-3",3,"title"],["role","img",1,"fas","fa-exclamation-circle","text-danger","mr-3",3,"title"],["role","img",1,"fas","fa-check-circle","text-success","mr-3",3,"title"],[1,"fas","fa-chevron-up","fa-fw"],[1,"fas","fa-chevron-down","fa-fw"],["href","javascript:void(0);",1,"close","mr-3",3,"click"],["aria-hidden","true","tabindex","0",1,"fas","fa-trash-o"],[3,"id",4,"ngIf"],[3,"id","click"],[4,"ngComponentOutlet","ngComponentOutletInjector"],[3,"content","dismissible","type","close",4,"ngFor","ngForOf"],[3,"content","dismissible","type","close"]],template:function SubmissionSectionContainerComponent_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div",0,1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](2,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](3,SubmissionSectionContainerComponent_ngb_accordion_3_Template,10,3,"ngb-accordion",2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](4,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](5,"\n"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](6,"\n")),2&rf){const _r0=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275reference"](1);_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngClass",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pureFunction1"](9,_c2,_r0.isSectionActive()))("mandatory",ctx.sectionData.mandatory)("submissionId",ctx.submissionId)("sectionType",ctx.sectionData.sectionType)("sectionId",ctx.sectionData.id),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275attribute"]("id","section_"+ctx.sectionData.id),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](4,7,_r0.isEnabled()))}},directives:[_sections_directive__WEBPACK_IMPORTED_MODULE_1__.a,_angular_common__WEBPACK_IMPORTED_MODULE_4__.NgClass,_angular_common__WEBPACK_IMPORTED_MODULE_4__.NgIf,_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_5__.a,_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_5__.D,_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_5__.F,_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_5__.E,_angular_common__WEBPACK_IMPORTED_MODULE_4__.NgComponentOutlet,_angular_common__WEBPACK_IMPORTED_MODULE_4__.NgForOf,_shared_alert_alert_component__WEBPACK_IMPORTED_MODULE_6__.a],pipes:[_angular_common__WEBPACK_IMPORTED_MODULE_4__.AsyncPipe,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_7__.d],styles:["[_nghost-%COMP%]     .card{margin-bottom:var(--ds-submission-sections-margin-bottom);overflow:unset}.section-focus[_ngcontent-%COMP%]{border-radius:var(--bs-border-radius);-webkit-box-shadow:var(--bs-btn-focus-box-shadow);box-shadow:var(--bs-btn-focus-box-shadow)}[_nghost-%COMP%]     .card:first-of-type{border-bottom:var(--bs-card-border-width) solid var(--bs-card-border-color)!important;border-bottom-left-radius:var(--bs-card-border-radius)!important;border-bottom-right-radius:var(--bs-card-border-radius)!important}[_nghost-%COMP%]     .card-header button{-webkit-box-shadow:none!important;box-shadow:none!important;width:100%}"]})},YoQ9:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ThemedSubmissionEditComponent}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),_shared_theme_support_themed_component__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("JTKQ");function ThemedSubmissionEditComponent_ng_template_0_Template(rf,ctx){}class ThemedSubmissionEditComponent extends _shared_theme_support_themed_component__WEBPACK_IMPORTED_MODULE_1__.a{getComponentName(){return"SubmissionEditComponent"}importThemedComponent(themeName){return __webpack_require__("3aq+")(`./${themeName}/app/submission/edit/submission-edit.component`)}importUnthemedComponent(){return Promise.resolve().then(__webpack_require__.bind(null,"SCNa"))}}ThemedSubmissionEditComponent.\u0275fac=function ThemedSubmissionEditComponent_Factory(t){return \u0275ThemedSubmissionEditComponent_BaseFactory(t||ThemedSubmissionEditComponent)},ThemedSubmissionEditComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineComponent"]({type:ThemedSubmissionEditComponent,selectors:[["ds-themed-submission-edit"]],features:[_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275InheritDefinitionFeature"]],decls:3,vars:0,consts:[["vcr",""]],template:function ThemedSubmissionEditComponent_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](0,ThemedSubmissionEditComponent_ng_template_0_Template,0,0,"ng-template",null,0,_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275templateRefExtractor"]),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](2,"\n"))},encapsulation:2});const \u0275ThemedSubmissionEditComponent_BaseFactory=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275getInheritedFactory"](ThemedSubmissionEditComponent)},b8BE:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return SectionsDirective}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),rxjs_operators__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("lJxs"),lodash__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("LvDl"),_sections_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("YJD6"),_shared_empty_util__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("J3qs"),_utils_parseSectionErrorPaths__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("TTdl"),_submission_service__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("J/vq");__webpack_require__("4GeW");class SectionsDirective{constructor(changeDetectorRef,submissionService,sectionService){this.changeDetectorRef=changeDetectorRef,this.submissionService=submissionService,this.sectionService=sectionService,this.mandatory=!0,this.genericSectionErrors=[],this.allSectionErrors=[],this.active=!0,this.sectionState=this.mandatory,this.subs=[]}ngOnInit(){this.valid=this.sectionService.isSectionValid(this.submissionId,this.sectionId).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_1__.a)((valid=>(valid&&this.resetErrors(),valid)))),this.subs.push(this.sectionService.getShownSectionErrors(this.submissionId,this.sectionId,this.sectionType).subscribe((errors=>{Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_4__.e)(errors)?errors.forEach((errorItem=>{Object(_utils_parseSectionErrorPaths__WEBPACK_IMPORTED_MODULE_5__.a)(errorItem.path).forEach((error=>{error.fieldId?this.allSectionErrors.push(errorItem.message):this.genericSectionErrors=Object(lodash__WEBPACK_IMPORTED_MODULE_2__.uniq)(this.genericSectionErrors.concat(errorItem.message))}))})):this.resetErrors()})),this.submissionService.getActiveSectionId(this.submissionId).subscribe((activeSectionId=>{const previousActive=this.active;this.active=activeSectionId===this.sectionId,previousActive!==this.active&&(this.changeDetectorRef.detectChanges(),!this.active&&Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_4__.g)(activeSectionId)&&this.submissionService.dispatchSave(this.submissionId))}))),this.enabled=this.sectionService.isSectionEnabled(this.submissionId,this.sectionId)}ngOnDestroy(){this.subs.filter((subscription=>Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_4__.b)(subscription))).forEach((subscription=>subscription.unsubscribe()))}sectionChange(event){this.sectionState=event.nextState}isOpen(){return this.sectionState}isMandatory(){return this.mandatory}isSectionActive(){return this.active}isEnabled(){return this.enabled}isValid(){return this.valid}removeSection(submissionId,sectionId){this.sectionService.removeSection(submissionId,sectionId)}hasGenericErrors(){return this.genericSectionErrors&&this.genericSectionErrors.length>0}hasErrors(){return this.genericSectionErrors&&this.genericSectionErrors.length>0||this.allSectionErrors&&this.allSectionErrors.length>0}getErrors(){return this.genericSectionErrors}setFocus(event){this.active||this.submissionService.setActiveSection(this.submissionId,this.sectionId)}removeError(index){this.genericSectionErrors.splice(index)}resetErrors(){Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_4__.e)(this.genericSectionErrors)&&this.sectionService.dispatchRemoveSectionErrors(this.submissionId,this.sectionId),this.genericSectionErrors=[],this.allSectionErrors=[]}}SectionsDirective.\u0275fac=function SectionsDirective_Factory(t){return new(t||SectionsDirective)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__.ChangeDetectorRef),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_submission_service__WEBPACK_IMPORTED_MODULE_6__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_sections_service__WEBPACK_IMPORTED_MODULE_3__.a))},SectionsDirective.\u0275dir=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineDirective"]({type:SectionsDirective,selectors:[["","dsSection",""]],inputs:{mandatory:"mandatory",sectionId:"sectionId",sectionType:"sectionType",submissionId:"submissionId"},exportAs:["sectionRef"]})},c3nT:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return SubmissionModule}));var core=__webpack_require__("fXoL"),core_module=__webpack_require__("pKmL"),shared_module=__webpack_require__("PCNd"),tslib=__webpack_require__("zOht"),combineLatest=__webpack_require__("itXk"),map=__webpack_require__("lJxs"),tap=__webpack_require__("vkgz"),mergeMap=__webpack_require__("5+tZ"),take=__webpack_require__("IzEk"),find=__webpack_require__("cBqT"),distinctUntilChanged=__webpack_require__("/uUt"),filter=__webpack_require__("pLZG"),ngx_translate_core=__webpack_require__("sYmb"),lodash=__webpack_require__("LvDl"),form_builder_service=__webpack_require__("Q5/L"),form_component=__webpack_require__("hqmO"),form_service=__webpack_require__("NFsL"),startWith=__webpack_require__("JX91"),empty_util=__webpack_require__("J3qs");class section_model_SectionModelComponent{constructor(injectedCollectionId,injectedSectionData,injectedSubmissionId){this.injectedCollectionId=injectedCollectionId,this.injectedSectionData=injectedSectionData,this.injectedSubmissionId=injectedSubmissionId,this.collectionId=injectedCollectionId,this.sectionData=injectedSectionData,this.submissionId=injectedSubmissionId}ngOnInit(){this.onSectionInit(),this.updateSectionStatus()}updateSectionStatus(){this.sectionStatusSub=this.getSectionStatus().pipe(Object(filter.a)((sectionStatus=>Object(empty_util.h)(sectionStatus))),Object(startWith.a)(!0)).subscribe((sectionStatus=>{this.sectionService.setSectionStatus(this.submissionId,this.sectionData.id,sectionStatus)}))}ngOnDestroy(){Object(empty_util.b)(this.sectionStatusSub)&&this.sectionStatusSub.unsubscribe(),this.onSectionDestroy()}}section_model_SectionModelComponent.\u0275fac=function SectionModelComponent_Factory(t){return new(t||section_model_SectionModelComponent)(core["\u0275\u0275directiveInject"]("collectionIdProvider"),core["\u0275\u0275directiveInject"]("sectionDataProvider"),core["\u0275\u0275directiveInject"]("submissionIdProvider"))},section_model_SectionModelComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:section_model_SectionModelComponent,selectors:[["ds-section-model"]],decls:0,vars:0,template:function SectionModelComponent_Template(rf,ctx){},encapsulation:2});var submission_forms_config_service=__webpack_require__("+ZI/"),json_patch_operation_path_combiner=__webpack_require__("0VLH");class form_field_previous_value_object_FormFieldPreviousValueObject{constructor(path=null,value=null){this._path=path,this._value=value}get path(){return this._path}set path(path){this._path=path}get value(){return this._value}set value(value){this._value=value}delete(){this._value=null,this._path=null}isPathEqual(path){return this._path&&Object(lodash.isEqual)(this._path,path)}}var sections_decorator=__webpack_require__("Uql/"),sections_type=__webpack_require__("4GeW"),submission_service=__webpack_require__("J/vq"),section_form_operations_service=__webpack_require__("ITak"),notifications_service=__webpack_require__("lI3o"),sections_service=__webpack_require__("YJD6"),object_util=__webpack_require__("Gx58"),operators=__webpack_require__("1QIV"),submission_object_data_service=__webpack_require__("fHtB"),object_cache_service=__webpack_require__("mycY"),request_service=__webpack_require__("X/78"),follow_link_config_model=__webpack_require__("84Zn"),environment=__webpack_require__("AytR"),common=__webpack_require__("ofXK"),loading_component=__webpack_require__("Frqi");const _c0=["formRef"];function SubmissionSectionFormComponent_ds_loading_0_Template(rf,ctx){1&rf&&core["\u0275\u0275element"](0,"ds-loading",2)}function SubmissionSectionFormComponent_ds_form_2_Template(rf,ctx){if(1&rf){const _r4=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementStart"](0,"ds-form",3,4),core["\u0275\u0275listener"]("dfChange",(function SubmissionSectionFormComponent_ds_form_2_Template_ds_form_dfChange_0_listener($event){core["\u0275\u0275restoreView"](_r4);return core["\u0275\u0275nextContext"]().onChange($event)}))("dfFocus",(function SubmissionSectionFormComponent_ds_form_2_Template_ds_form_dfFocus_0_listener($event){core["\u0275\u0275restoreView"](_r4);return core["\u0275\u0275nextContext"]().onFocus($event)}))("remove",(function SubmissionSectionFormComponent_ds_form_2_Template_ds_form_remove_0_listener($event){core["\u0275\u0275restoreView"](_r4);return core["\u0275\u0275nextContext"]().onRemove($event)}))("ngbEvent",(function SubmissionSectionFormComponent_ds_form_2_Template_ds_form_ngbEvent_0_listener($event){core["\u0275\u0275restoreView"](_r4);return core["\u0275\u0275nextContext"]().onCustomEvent($event)}))("removeArrayItem",(function SubmissionSectionFormComponent_ds_form_2_Template_ds_form_removeArrayItem_0_listener($event){core["\u0275\u0275restoreView"](_r4);return core["\u0275\u0275nextContext"]().onRemove($event)})),core["\u0275\u0275elementEnd"]()}if(2&rf){const ctx_r1=core["\u0275\u0275nextContext"]();core["\u0275\u0275property"]("formId",ctx_r1.formId)("formModel",ctx_r1.formModel)("displaySubmit",!1)("displayCancel",!1)}}let section_form_component_SubmissionSectionFormComponent=class extends section_model_SectionModelComponent{constructor(cdr,formBuilderService,formOperationsService,formService,formConfigService,notificationsService,sectionService,submissionService,translate,submissionObjectService,objectCache,requestService,injectedCollectionId,injectedSectionData,injectedSubmissionId){super(injectedCollectionId,injectedSectionData,injectedSubmissionId),this.cdr=cdr,this.formBuilderService=formBuilderService,this.formOperationsService=formOperationsService,this.formService=formService,this.formConfigService=formConfigService,this.notificationsService=notificationsService,this.sectionService=sectionService,this.submissionService=submissionService,this.translate=translate,this.submissionObjectService=submissionObjectService,this.objectCache=objectCache,this.requestService=requestService,this.injectedCollectionId=injectedCollectionId,this.injectedSectionData=injectedSectionData,this.injectedSubmissionId=injectedSubmissionId,this.isUpdating=!1,this.isLoading=!0,this.fieldsOnTheirWayToBeRemoved=new Map,this.formData=Object.create({}),this.previousValue=new form_field_previous_value_object_FormFieldPreviousValueObject,this.subs=[]}onSectionInit(){this.pathCombiner=new json_patch_operation_path_combiner.a("sections",this.sectionData.id),this.formId=this.formService.getUniqueId(this.sectionData.id),this.sectionService.dispatchSetSectionFormId(this.submissionId,this.sectionData.id,this.formId),this.formConfigService.findByHref(this.sectionData.config).pipe(Object(map.a)((configData=>configData.payload)),Object(tap.a)((config=>this.formConfig=config)),Object(mergeMap.a)((()=>Object(combineLatest.a)([this.sectionService.getSectionData(this.submissionId,this.sectionData.id,this.sectionData.sectionType),this.submissionObjectService.findById(this.submissionId,!0,!1,Object(follow_link_config_model.a)("item")).pipe(Object(operators.i)(),Object(operators.o)())]))),Object(take.a)(1)).subscribe((([sectionData,workspaceItem])=>{Object(empty_util.j)(this.formModel)&&(this.workspaceItem=workspaceItem,this.initForm(sectionData),this.sectionData.data=sectionData,this.subscriptions(),this.isLoading=!1,this.cdr.detectChanges())}))}onSectionDestroy(){this.subs.filter((subscription=>Object(empty_util.b)(subscription))).forEach((subscription=>subscription.unsubscribe()))}getSectionStatus(){const formStatus$=this.formService.isValid(this.formId),serverValidationStatus$=this.sectionService.getSectionServerErrors(this.submissionId,this.sectionData.id).pipe(Object(map.a)((validationErrors=>Object(empty_util.d)(validationErrors))));return Object(combineLatest.a)([formStatus$,serverValidationStatus$]).pipe(Object(map.a)((([formValidation,serverSideValidation])=>formValidation&&serverSideValidation)))}hasMetadataEnrichment(sectionData){const sectionDataToCheck={};Object.keys(sectionData).forEach((key=>{this.sectionMetadata&&this.sectionMetadata.includes(key)&&(sectionDataToCheck[key]=sectionData[key])}));const diffResult=[],diffObj=Object(object_util.a)(sectionDataToCheck,this.formData);return Object.keys(diffObj).forEach((key=>{diffObj[key].forEach((value=>{value.hasOwnProperty("value")&&Object(lodash.findIndex)(this.formData[key],{value:value.value})<0&&diffResult.push(value)}))})),Object(empty_util.e)(diffResult)}initForm(sectionData){try{this.formModel=this.formBuilderService.modelFromConfiguration(this.submissionId,this.formConfig,this.collectionId,sectionData,this.submissionService.getSubmissionScope());const sectionMetadata=this.sectionService.computeSectionConfiguredMetadata(this.formConfig);this.sectionService.updateSectionData(this.submissionId,this.sectionData.id,sectionData,this.sectionData.errorsToShow,this.sectionData.serverValidationErrors,sectionMetadata)}catch(e){const sectionError={message:this.translate.instant("error.submission.sections.init-form-error")+e.toString(),path:"/sections/"+this.sectionData.id};console.error(e.stack),this.sectionService.setSectionError(this.submissionId,this.sectionData.id,sectionError)}}updateForm(sectionData,errors){Object(empty_util.e)(sectionData)&&!Object(lodash.isEqual)(sectionData,this.sectionData.data)?(this.sectionData.data=sectionData,this.hasMetadataEnrichment(sectionData)?(this.isUpdating=!0,this.formModel=null,this.cdr.detectChanges(),this.initForm(sectionData),this.checksForErrors(errors),this.isUpdating=!1,this.cdr.detectChanges()):(Object(empty_util.e)(errors)||Object(empty_util.e)(this.sectionData.errorsToShow))&&this.checksForErrors(errors)):(Object(empty_util.e)(errors)||Object(empty_util.e)(this.sectionData.errorsToShow))&&this.checksForErrors(errors)}checksForErrors(errors){this.formService.isFormInitialized(this.formId).pipe(Object(find.a)((status=>!0===status&&!this.isUpdating))).subscribe((()=>{this.sectionService.checkSectionErrors(this.submissionId,this.sectionData.id,this.formId,errors,this.sectionData.errorsToShow),this.sectionData.errorsToShow=errors,this.cdr.detectChanges()}))}subscriptions(){this.subs.push(this.formService.getFormData(this.formId).pipe(Object(distinctUntilChanged.a)()).subscribe((formData=>{this.formData=formData})),this.sectionService.getSectionState(this.submissionId,this.sectionData.id,this.sectionData.sectionType).pipe(Object(filter.a)((sectionState=>Object(empty_util.e)(sectionState)&&(Object(empty_util.e)(sectionState.data)||Object(empty_util.e)(sectionState.errorsToShow)))),Object(distinctUntilChanged.a)()).subscribe((sectionState=>{this.fieldsOnTheirWayToBeRemoved=new Map,this.sectionMetadata=sectionState.metadata,this.updateForm(sectionState.data,sectionState.errorsToShow)})))}onChange(event){this.formOperationsService.dispatchOperationsFromEvent(this.pathCombiner,event,this.previousValue,this.hasStoredValue(this.formBuilderService.getId(event.model),this.formOperationsService.getArrayIndexFromEvent(event)));const metadata=this.formOperationsService.getFieldPathSegmentedFromChangeEvent(event),value=this.formOperationsService.getFieldValueFromChangeEvent(event);(-1!==environment.a.submission.autosave.metadata.indexOf(metadata)&&Object(empty_util.e)(value)||this.hasRelatedCustomError(metadata))&&this.submissionService.dispatchSave(this.submissionId)}hasRelatedCustomError(medatata){const index=Object(lodash.findIndex)(this.sectionData.errorsToShow,{path:this.pathCombiner.getPath(medatata).path});if(-1!==index){const validator=this.sectionData.errorsToShow[index].message.replace("error.validation.","");return!environment.a.form.validatorMap.hasOwnProperty(validator)}return!1}onFocus(event){const value=this.formOperationsService.getFieldValueFromChangeEvent(event),path=this.formBuilderService.getPath(event.model);this.formBuilderService.hasMappedGroupValue(event.model)?(this.previousValue.path=path,this.previousValue.value=this.formOperationsService.getQualdropValueMap(event)):Object(empty_util.e)(value)&&("object"==typeof value&&Object(empty_util.e)(value.value)||"string"==typeof value)&&(this.previousValue.path=path,this.previousValue.value=value)}onRemove(event){const fieldId=this.formBuilderService.getId(event.model),fieldIndex=this.formOperationsService.getArrayIndexFromEvent(event);if(this.fieldsOnTheirWayToBeRemoved.has(fieldId)){const indexes=this.fieldsOnTheirWayToBeRemoved.get(fieldId);indexes.push(fieldIndex),this.fieldsOnTheirWayToBeRemoved.set(fieldId,indexes)}else this.fieldsOnTheirWayToBeRemoved.set(fieldId,[fieldIndex]);this.formOperationsService.dispatchOperationsFromEvent(this.pathCombiner,event,this.previousValue,this.hasStoredValue(fieldId,fieldIndex))}hasStoredValue(fieldId,index){return!!Object(empty_util.e)(this.sectionData.data)&&(this.sectionData.data.hasOwnProperty(fieldId)&&Object(empty_util.e)(this.sectionData.data[fieldId][index])&&!this.isFieldToRemove(fieldId,index))}isFieldToRemove(fieldId,index){return this.fieldsOnTheirWayToBeRemoved.has(fieldId)&&this.fieldsOnTheirWayToBeRemoved.get(fieldId).includes(index)}onCustomEvent(event){this.formOperationsService.dispatchOperationsFromEvent(this.pathCombiner,event,this.previousValue,null)}};section_form_component_SubmissionSectionFormComponent.\u0275fac=function SubmissionSectionFormComponent_Factory(t){return new(t||section_form_component_SubmissionSectionFormComponent)(core["\u0275\u0275directiveInject"](core.ChangeDetectorRef),core["\u0275\u0275directiveInject"](form_builder_service.a),core["\u0275\u0275directiveInject"](section_form_operations_service.a),core["\u0275\u0275directiveInject"](form_service.a),core["\u0275\u0275directiveInject"](submission_forms_config_service.a),core["\u0275\u0275directiveInject"](notifications_service.a),core["\u0275\u0275directiveInject"](sections_service.a),core["\u0275\u0275directiveInject"](submission_service.a),core["\u0275\u0275directiveInject"](ngx_translate_core.e),core["\u0275\u0275directiveInject"](submission_object_data_service.a),core["\u0275\u0275directiveInject"](object_cache_service.a),core["\u0275\u0275directiveInject"](request_service.a),core["\u0275\u0275directiveInject"]("collectionIdProvider"),core["\u0275\u0275directiveInject"]("sectionDataProvider"),core["\u0275\u0275directiveInject"]("submissionIdProvider"))},section_form_component_SubmissionSectionFormComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:section_form_component_SubmissionSectionFormComponent,selectors:[["ds-submission-section-form"]],viewQuery:function SubmissionSectionFormComponent_Query(rf,ctx){if(1&rf&&core["\u0275\u0275viewQuery"](_c0,1),2&rf){let _t;core["\u0275\u0275queryRefresh"](_t=core["\u0275\u0275loadQuery"]())&&(ctx.formRef=_t.first)}},features:[core["\u0275\u0275InheritDefinitionFeature"]],decls:4,vars:2,consts:[["message","Loading...",4,"ngIf"],[3,"formId","formModel","displaySubmit","displayCancel","dfChange","dfFocus","remove","ngbEvent","removeArrayItem",4,"ngIf"],["message","Loading..."],[3,"formId","formModel","displaySubmit","displayCancel","dfChange","dfFocus","remove","ngbEvent","removeArrayItem"],["formRef","formComponent"]],template:function SubmissionSectionFormComponent_Template(rf,ctx){1&rf&&(core["\u0275\u0275template"](0,SubmissionSectionFormComponent_ds_loading_0_Template,1,0,"ds-loading",0),core["\u0275\u0275text"](1,"\n"),core["\u0275\u0275template"](2,SubmissionSectionFormComponent_ds_form_2_Template,2,4,"ds-form",1),core["\u0275\u0275text"](3,"\n")),2&rf&&(core["\u0275\u0275property"]("ngIf",ctx.isLoading),core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",!ctx.isLoading&&ctx.formModel))},directives:[common.NgIf,loading_component.a,form_component.a],styles:[""]}),section_form_component_SubmissionSectionFormComponent=Object(tslib.__decorate)([Object(sections_decorator.a)(sections_type.a.SubmissionForm),Object(tslib.__metadata)("design:paramtypes",[core.ChangeDetectorRef,form_builder_service.a,section_form_operations_service.a,form_service.a,submission_forms_config_service.a,notifications_service.a,sections_service.a,submission_service.a,ngx_translate_core.e,submission_object_data_service.a,object_cache_service.a,request_service.a,String,Object,String])],section_form_component_SubmissionSectionFormComponent);var sections_directive=__webpack_require__("b8BE"),submission_form_collection_component=__webpack_require__("wQzj"),submission_form_footer_component=__webpack_require__("yAsG"),submission_form_component=__webpack_require__("m4Gq"),submission_form_section_add_component=__webpack_require__("ph1m"),section_container_component=__webpack_require__("Yfyx"),ngrx_store=__webpack_require__("l7P3"),ngrx_effects=__webpack_require__("9jGm"),submission_reducers=__webpack_require__("33F9"),from=__webpack_require__("Cfvw"),of=__webpack_require__("LRne"),switchMap=__webpack_require__("eIep"),catchError=__webpack_require__("JIr8"),withLatestFrom=__webpack_require__("zp1y"),submission_json_patch_operations_service=__webpack_require__("QjZv"),parseSectionErrors=__webpack_require__("fBXw"),submission_objects_actions=__webpack_require__("4jMI"),parseSectionErrorPaths=__webpack_require__("TTdl");class submission_objects_effects_SubmissionObjectEffects{constructor(actions$,notificationsService,operationsService,sectionService,store$,submissionService,submissionObjectService,translate){this.actions$=actions$,this.notificationsService=notificationsService,this.operationsService=operationsService,this.sectionService=sectionService,this.store$=store$,this.submissionService=submissionService,this.submissionObjectService=submissionObjectService,this.translate=translate,this.loadForm$=this.actions$.pipe(Object(ngrx_effects.f)(submission_objects_actions.F.INIT_SUBMISSION_FORM),Object(map.a)((action=>{const definition=action.payload.submissionDefinition,mappedActions=[];return definition.sections.page.forEach((sectionDefinition=>{const selfLink=sectionDefinition._links.self.href||sectionDefinition._links.self,sectionId=selfLink.substr(selfLink.lastIndexOf("/")+1),config=sectionDefinition._links.config?sectionDefinition._links.config.href||sectionDefinition._links.config:"",enabled=sectionDefinition.mandatory||Object(empty_util.e)(action.payload.sections)&&action.payload.sections.hasOwnProperty(sectionId);let sectionData;sectionData=sectionDefinition.sectionType!==sections_type.a.SubmissionForm?Object(empty_util.h)(action.payload.sections)&&Object(empty_util.h)(action.payload.sections[sectionId])?action.payload.sections[sectionId]:Object.create(null):action.payload.item.metadata;const sectionErrors=Object(empty_util.e)(action.payload.errors)&&action.payload.errors[sectionId]||null;mappedActions.push(new submission_objects_actions.o(action.payload.submissionId,sectionId,sectionDefinition.header,config,sectionDefinition.mandatory,sectionDefinition.sectionType,sectionDefinition.visibility,enabled,sectionData,sectionErrors))})),{action:action,definition:definition,mappedActions:mappedActions}})),Object(mergeMap.a)((result=>Object(from.a)(result.mappedActions.concat(new submission_objects_actions.c(result.action.payload.submissionId)))))),this.resetForm$=this.actions$.pipe(Object(ngrx_effects.f)(submission_objects_actions.F.RESET_SUBMISSION_FORM),Object(map.a)((action=>new submission_objects_actions.p(action.payload.collectionId,action.payload.submissionId,action.payload.selfUrl,action.payload.submissionDefinition,action.payload.sections,action.payload.item,null)))),this.saveSubmission$=this.actions$.pipe(Object(ngrx_effects.f)(submission_objects_actions.F.SAVE_SUBMISSION_FORM),Object(switchMap.a)((action=>this.operationsService.jsonPatchByResourceType(this.submissionService.getSubmissionObjectLinkName(),action.payload.submissionId,"sections").pipe(Object(map.a)((response=>new submission_objects_actions.y(action.payload.submissionId,response,action.payload.isManual))),Object(catchError.a)((()=>Object(of.a)(new submission_objects_actions.x(action.payload.submissionId)))))))),this.saveForLaterSubmission$=this.actions$.pipe(Object(ngrx_effects.f)(submission_objects_actions.F.SAVE_FOR_LATER_SUBMISSION_FORM),Object(switchMap.a)((action=>this.operationsService.jsonPatchByResourceType(this.submissionService.getSubmissionObjectLinkName(),action.payload.submissionId,"sections").pipe(Object(map.a)((response=>new submission_objects_actions.v(action.payload.submissionId,response))),Object(catchError.a)((()=>Object(of.a)(new submission_objects_actions.x(action.payload.submissionId)))))))),this.saveSubmissionSuccess$=this.actions$.pipe(Object(ngrx_effects.f)(submission_objects_actions.F.SAVE_SUBMISSION_FORM_SUCCESS),Object(withLatestFrom.a)(this.store$),Object(map.a)((([action,currentState])=>this.parseSaveResponse(currentState.submission.objects[action.payload.submissionId],action.payload.submissionObject,action.payload.submissionId,currentState.forms,action.payload.notify))),Object(mergeMap.a)((actions=>Object(from.a)(actions)))),this.saveSubmissionSectionSuccess$=this.actions$.pipe(Object(ngrx_effects.f)(submission_objects_actions.F.SAVE_SUBMISSION_SECTION_FORM_SUCCESS),Object(withLatestFrom.a)(this.store$),Object(map.a)((([action,currentState])=>this.parseSaveResponse(currentState.submission.objects[action.payload.submissionId],action.payload.submissionObject,action.payload.submissionId,currentState.forms,!1))),Object(mergeMap.a)((actions=>Object(from.a)(actions)))),this.saveSection$=this.actions$.pipe(Object(ngrx_effects.f)(submission_objects_actions.F.SAVE_SUBMISSION_SECTION_FORM),Object(switchMap.a)((action=>this.operationsService.jsonPatchByResourceID(this.submissionService.getSubmissionObjectLinkName(),action.payload.submissionId,"sections",action.payload.sectionId).pipe(Object(map.a)((response=>new submission_objects_actions.B(action.payload.submissionId,response))),Object(catchError.a)((()=>Object(of.a)(new submission_objects_actions.A(action.payload.submissionId)))))))),this.saveError$=this.actions$.pipe(Object(ngrx_effects.f)(submission_objects_actions.F.SAVE_SUBMISSION_FORM_ERROR,submission_objects_actions.F.SAVE_SUBMISSION_SECTION_FORM_ERROR),Object(withLatestFrom.a)(this.store$),Object(tap.a)((()=>this.notificationsService.error(null,this.translate.get("submission.sections.general.save_error_notice"))))),this.saveAndDeposit$=this.actions$.pipe(Object(ngrx_effects.f)(submission_objects_actions.F.SAVE_AND_DEPOSIT_SUBMISSION),Object(withLatestFrom.a)(this.submissionService.hasUnsavedModification()),Object(switchMap.a)((([action,hasUnsavedModification])=>{let response$;return response$=hasUnsavedModification?this.operationsService.jsonPatchByResourceType(this.submissionService.getSubmissionObjectLinkName(),action.payload.submissionId,"sections"):this.submissionObjectService.findById(action.payload.submissionId,!1,!0).pipe(Object(operators.j)(),Object(map.a)((submissionObject=>[submissionObject]))),response$.pipe(Object(map.a)((response=>this.canDeposit(response)?new submission_objects_actions.e(action.payload.submissionId):new submission_objects_actions.y(action.payload.submissionId,response))),Object(catchError.a)((()=>Object(of.a)(new submission_objects_actions.x(action.payload.submissionId)))))}))),this.depositSubmission$=this.actions$.pipe(Object(ngrx_effects.f)(submission_objects_actions.F.DEPOSIT_SUBMISSION),Object(withLatestFrom.a)(this.store$),Object(switchMap.a)((([action,state])=>this.submissionService.depositSubmission(state.submission.objects[action.payload.submissionId].selfUrl).pipe(Object(map.a)((()=>new submission_objects_actions.g(action.payload.submissionId))),Object(catchError.a)((error=>Object(of.a)(new submission_objects_actions.f(action.payload.submissionId)))))))),this.saveForLaterSubmissionSuccess$=this.actions$.pipe(Object(ngrx_effects.f)(submission_objects_actions.F.SAVE_FOR_LATER_SUBMISSION_FORM_SUCCESS),Object(tap.a)((()=>this.notificationsService.success(null,this.translate.get("submission.sections.general.save_success_notice")))),Object(tap.a)((()=>this.submissionService.redirectToMyDSpace()))),this.depositSubmissionSuccess$=this.actions$.pipe(Object(ngrx_effects.f)(submission_objects_actions.F.DEPOSIT_SUBMISSION_SUCCESS),Object(tap.a)((()=>this.notificationsService.success(null,this.translate.get("submission.sections.general.deposit_success_notice")))),Object(tap.a)((()=>this.submissionService.redirectToMyDSpace()))),this.depositSubmissionError$=this.actions$.pipe(Object(ngrx_effects.f)(submission_objects_actions.F.DEPOSIT_SUBMISSION_ERROR),Object(tap.a)((()=>this.notificationsService.error(null,this.translate.get("submission.sections.general.deposit_error_notice"))))),this.discardSubmission$=this.actions$.pipe(Object(ngrx_effects.f)(submission_objects_actions.F.DISCARD_SUBMISSION),Object(switchMap.a)((action=>this.submissionService.discardSubmission(action.payload.submissionId).pipe(Object(map.a)((()=>new submission_objects_actions.k(action.payload.submissionId))),Object(catchError.a)((()=>Object(of.a)(new submission_objects_actions.j(action.payload.submissionId)))))))),this.addAllMetadataToSectionData=this.actions$.pipe(Object(ngrx_effects.f)(submission_objects_actions.F.UPDATE_SECTION_DATA),Object(switchMap.a)((action=>this.sectionService.getSectionState(action.payload.submissionId,action.payload.sectionId,sections_type.a.Upload).pipe(Object(map.a)((section=>[action,section])),Object(take.a)(1)))),Object(filter.a)((([action,section])=>section.sectionType===sections_type.a.SubmissionForm)),Object(switchMap.a)((([action,section])=>{if(section.sectionType===sections_type.a.SubmissionForm){return this.submissionObjectService.findById(action.payload.submissionId,!0,!1,Object(follow_link_config_model.a)("item")).pipe(Object(operators.j)()).pipe(Object(switchMap.a)((submissionObject=>submissionObject.item.pipe(Object(operators.j)())))).pipe(Object(map.a)((item=>item.metadata)),Object(filter.a)((metadata=>!Object(lodash.isEqual)(action.payload.data,metadata))),Object(map.a)((metadata=>new submission_objects_actions.G(action.payload.submissionId,action.payload.sectionId,metadata,action.payload.errorsToShow,action.payload.serverValidationErrors,action.payload.metadata))))}return Object(of.a)(new submission_objects_actions.H)}))),this.discardSubmissionSuccess$=this.actions$.pipe(Object(ngrx_effects.f)(submission_objects_actions.F.DISCARD_SUBMISSION_SUCCESS),Object(tap.a)((()=>this.notificationsService.success(null,this.translate.get("submission.sections.general.discard_success_notice")))),Object(tap.a)((()=>this.submissionService.redirectToMyDSpace()))),this.discardSubmissionError$=this.actions$.pipe(Object(ngrx_effects.f)(submission_objects_actions.F.DISCARD_SUBMISSION_ERROR),Object(tap.a)((()=>this.notificationsService.error(null,this.translate.get("submission.sections.general.discard_error_notice")))))}canDeposit(response){let canDeposit=!0;return Object(empty_util.e)(response)&&response.forEach((item=>{const{errors:errors}=item;errors&&!Object(empty_util.d)(errors)&&(canDeposit=!1)})),canDeposit}parseSaveResponse(currentState,response,submissionId,forms,notify=!0){const mappedActions=[];return Object(empty_util.e)(response)&&(notify&&this.notificationsService.success(null,this.translate.get("submission.sections.general.save_success_notice")),response.forEach((item=>{let errorsList=Object.create({});const{errors:errors}=item;errors&&!Object(empty_util.d)(errors)&&(errorsList=Object(parseSectionErrors.a)(errors),notify&&this.notificationsService.warning(null,this.translate.get("submission.sections.general.sections_not_valid")));const sections=item.sections&&Object(empty_util.e)(item.sections)?item.sections:{},sectionsKeys=Object(lodash.union)(Object.keys(sections),Object.keys(errorsList));for(const sectionId of sectionsKeys){const sectionErrors=errorsList[sectionId]||[],sectionData=sections[sectionId]||{};if(currentState.sections[sectionId].sectionType===sections_type.a.Upload&&Object(empty_util.d)(sectionData.files)&&!currentState.sections[sectionId].enabled)continue;notify&&!currentState.sections[sectionId].enabled&&this.submissionService.notifyNewSection(submissionId,sectionId,currentState.sections[sectionId].sectionType);const filteredErrors=filterErrors(getForm(forms,currentState,sectionId),sectionErrors,currentState.sections[sectionId].sectionType,notify);mappedActions.push(new submission_objects_actions.G(submissionId,sectionId,sectionData,filteredErrors,sectionErrors))}}))),mappedActions}}function getForm(forms,currentState,sectionId){if(!forms)return null;return forms[currentState.sections[sectionId].formId]}function filterErrors(sectionForm,sectionErrors,sectionType,notify){if(notify||sectionType!==sections_type.a.SubmissionForm)return sectionErrors;if(!sectionForm||!sectionForm.touched)return[];const filteredErrors=[];return sectionErrors.forEach((error=>{Object(parseSectionErrorPaths.a)(error.path).forEach((path=>{path.fieldId&&sectionForm.touched[path.fieldId]&&filteredErrors.push(error)}))})),filteredErrors}submission_objects_effects_SubmissionObjectEffects.\u0275fac=function SubmissionObjectEffects_Factory(t){return new(t||submission_objects_effects_SubmissionObjectEffects)(core["\u0275\u0275inject"](ngrx_effects.a),core["\u0275\u0275inject"](notifications_service.a),core["\u0275\u0275inject"](submission_json_patch_operations_service.a),core["\u0275\u0275inject"](sections_service.a),core["\u0275\u0275inject"](ngrx_store.i),core["\u0275\u0275inject"](submission_service.a),core["\u0275\u0275inject"](submission_object_data_service.a),core["\u0275\u0275inject"](ngx_translate_core.e))},submission_objects_effects_SubmissionObjectEffects.\u0275prov=core["\u0275\u0275defineInjectable"]({token:submission_objects_effects_SubmissionObjectEffects,factory:submission_objects_effects_SubmissionObjectEffects.\u0275fac}),Object(tslib.__decorate)([Object(ngrx_effects.b)(),Object(tslib.__metadata)("design:type",Object)],submission_objects_effects_SubmissionObjectEffects.prototype,"loadForm$",void 0),Object(tslib.__decorate)([Object(ngrx_effects.b)(),Object(tslib.__metadata)("design:type",Object)],submission_objects_effects_SubmissionObjectEffects.prototype,"resetForm$",void 0),Object(tslib.__decorate)([Object(ngrx_effects.b)(),Object(tslib.__metadata)("design:type",Object)],submission_objects_effects_SubmissionObjectEffects.prototype,"saveSubmission$",void 0),Object(tslib.__decorate)([Object(ngrx_effects.b)(),Object(tslib.__metadata)("design:type",Object)],submission_objects_effects_SubmissionObjectEffects.prototype,"saveForLaterSubmission$",void 0),Object(tslib.__decorate)([Object(ngrx_effects.b)(),Object(tslib.__metadata)("design:type",Object)],submission_objects_effects_SubmissionObjectEffects.prototype,"saveSubmissionSuccess$",void 0),Object(tslib.__decorate)([Object(ngrx_effects.b)(),Object(tslib.__metadata)("design:type",Object)],submission_objects_effects_SubmissionObjectEffects.prototype,"saveSubmissionSectionSuccess$",void 0),Object(tslib.__decorate)([Object(ngrx_effects.b)(),Object(tslib.__metadata)("design:type",Object)],submission_objects_effects_SubmissionObjectEffects.prototype,"saveSection$",void 0),Object(tslib.__decorate)([Object(ngrx_effects.b)({dispatch:!1}),Object(tslib.__metadata)("design:type",Object)],submission_objects_effects_SubmissionObjectEffects.prototype,"saveError$",void 0),Object(tslib.__decorate)([Object(ngrx_effects.b)(),Object(tslib.__metadata)("design:type",Object)],submission_objects_effects_SubmissionObjectEffects.prototype,"saveAndDeposit$",void 0),Object(tslib.__decorate)([Object(ngrx_effects.b)(),Object(tslib.__metadata)("design:type",Object)],submission_objects_effects_SubmissionObjectEffects.prototype,"depositSubmission$",void 0),Object(tslib.__decorate)([Object(ngrx_effects.b)({dispatch:!1}),Object(tslib.__metadata)("design:type",Object)],submission_objects_effects_SubmissionObjectEffects.prototype,"saveForLaterSubmissionSuccess$",void 0),Object(tslib.__decorate)([Object(ngrx_effects.b)({dispatch:!1}),Object(tslib.__metadata)("design:type",Object)],submission_objects_effects_SubmissionObjectEffects.prototype,"depositSubmissionSuccess$",void 0),Object(tslib.__decorate)([Object(ngrx_effects.b)({dispatch:!1}),Object(tslib.__metadata)("design:type",Object)],submission_objects_effects_SubmissionObjectEffects.prototype,"depositSubmissionError$",void 0),Object(tslib.__decorate)([Object(ngrx_effects.b)(),Object(tslib.__metadata)("design:type",Object)],submission_objects_effects_SubmissionObjectEffects.prototype,"discardSubmission$",void 0),Object(tslib.__decorate)([Object(ngrx_effects.b)(),Object(tslib.__metadata)("design:type",Object)],submission_objects_effects_SubmissionObjectEffects.prototype,"addAllMetadataToSectionData",void 0),Object(tslib.__decorate)([Object(ngrx_effects.b)({dispatch:!1}),Object(tslib.__metadata)("design:type",Object)],submission_objects_effects_SubmissionObjectEffects.prototype,"discardSubmissionSuccess$",void 0),Object(tslib.__decorate)([Object(ngrx_effects.b)({dispatch:!1}),Object(tslib.__metadata)("design:type",Object)],submission_objects_effects_SubmissionObjectEffects.prototype,"discardSubmissionError$",void 0);const submissionEffects=[submission_objects_effects_SubmissionObjectEffects];var BehaviorSubject=__webpack_require__("2Vo4"),selectors=__webpack_require__("LP5c");class section_upload_service_SectionUploadService{constructor(store){this.store=store}getUploadedFileList(submissionId,sectionId){return this.store.select(Object(selectors.i)(submissionId,sectionId)).pipe(Object(map.a)((state=>state)),Object(distinctUntilChanged.a)())}getFileData(submissionId,sectionId,fileUUID){return this.store.select(Object(selectors.i)(submissionId,sectionId)).pipe(Object(filter.a)((state=>!Object(empty_util.j)(state))),Object(map.a)((state=>{let fileState;return Object.keys(state).filter((key=>state[key].uuid===fileUUID)).forEach((key=>fileState=state[key])),fileState})),Object(distinctUntilChanged.a)())}getDefaultPolicies(submissionId,sectionId,fileUUID){return this.store.select(Object(selectors.h)(submissionId,sectionId,fileUUID)).pipe(Object(map.a)((state=>state)),Object(distinctUntilChanged.a)())}addUploadedFile(submissionId,sectionId,fileUUID,data){this.store.dispatch(new submission_objects_actions.q(submissionId,sectionId,fileUUID,data))}updateFileData(submissionId,sectionId,fileUUID,data){this.store.dispatch(new submission_objects_actions.l(submissionId,sectionId,fileUUID,data))}removeUploadedFile(submissionId,sectionId,fileUUID){this.store.dispatch(new submission_objects_actions.d(submissionId,sectionId,fileUUID))}}section_upload_service_SectionUploadService.\u0275fac=function SectionUploadService_Factory(t){return new(t||section_upload_service_SectionUploadService)(core["\u0275\u0275inject"](ngrx_store.i))},section_upload_service_SectionUploadService.\u0275prov=core["\u0275\u0275defineInjectable"]({token:section_upload_service_SectionUploadService,factory:section_upload_service_SectionUploadService.\u0275fac});var collection_data_service=__webpack_require__("DNva"),group_data_service=__webpack_require__("YIpg"),resource_policy_service=__webpack_require__("8a3C"),config_service=__webpack_require__("EdIQ"),hal_endpoint_service=__webpack_require__("uLZQ"),build_decorators=__webpack_require__("zQ+x"),config_type=__webpack_require__("5HAD"),remote_data_build_service=__webpack_require__("7vy/"),http=__webpack_require__("tk/3"),default_change_analyzer_service=__webpack_require__("VOnO");let submission_uploads_config_service_SubmissionUploadsConfigService=class extends config_service.a{constructor(requestService,rdbService,store,objectCache,halService,notificationsService,http,comparator){super(requestService,rdbService,null,objectCache,halService,notificationsService,http,comparator,"submissionuploads"),this.requestService=requestService,this.rdbService=rdbService,this.store=store,this.objectCache=objectCache,this.halService=halService,this.notificationsService=notificationsService,this.http=http,this.comparator=comparator}findByHref(href,useCachedVersionIfAvailable=!0,reRequestOnStale=!0,...linksToFollow){return super.findByHref(href,useCachedVersionIfAvailable,reRequestOnStale,...linksToFollow)}};submission_uploads_config_service_SubmissionUploadsConfigService.\u0275fac=function SubmissionUploadsConfigService_Factory(t){return new(t||submission_uploads_config_service_SubmissionUploadsConfigService)(core["\u0275\u0275inject"](request_service.a),core["\u0275\u0275inject"](remote_data_build_service.a),core["\u0275\u0275inject"](ngrx_store.i),core["\u0275\u0275inject"](object_cache_service.a),core["\u0275\u0275inject"](hal_endpoint_service.a),core["\u0275\u0275inject"](notifications_service.a),core["\u0275\u0275inject"](http.c),core["\u0275\u0275inject"](default_change_analyzer_service.a))},submission_uploads_config_service_SubmissionUploadsConfigService.\u0275prov=core["\u0275\u0275defineInjectable"]({token:submission_uploads_config_service_SubmissionUploadsConfigService,factory:submission_uploads_config_service_SubmissionUploadsConfigService.\u0275fac}),submission_uploads_config_service_SubmissionUploadsConfigService=Object(tslib.__decorate)([Object(build_decorators.d)(config_type.g),Object(tslib.__metadata)("design:paramtypes",[request_service.a,remote_data_build_service.a,ngrx_store.i,object_cache_service.a,hal_endpoint_service.a,notifications_service.a,http.c,default_change_analyzer_service.a])],submission_uploads_config_service_SubmissionUploadsConfigService);var aletr_type=__webpack_require__("ac5F");function SubmissionSectionUploadComponent_ng_container_2_Template(rf,ctx){1&rf&&(core["\u0275\u0275elementContainerStart"](0),core["\u0275\u0275text"](1,"\n  "),core["\u0275\u0275elementStart"](2,"div",2),core["\u0275\u0275text"](3,"\n    "),core["\u0275\u0275elementStart"](4,"div",3),core["\u0275\u0275text"](5,"\n      "),core["\u0275\u0275elementStart"](6,"h3",4),core["\u0275\u0275elementStart"](7,"span",5),core["\u0275\u0275text"](8),core["\u0275\u0275pipe"](9,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](10,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](11,"\n  "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](12,"\n"),core["\u0275\u0275elementContainerEnd"]()),2&rf&&(core["\u0275\u0275advance"](8),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](9,1,"submission.sections.upload.no-file-uploaded")))}const section_upload_component_c0=function(a0){return{collectionName:a0}};function SubmissionSectionUploadComponent_ng_container_4_div_2_ng_container_6_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementContainerStart"](0),core["\u0275\u0275text"](1),core["\u0275\u0275pipe"](2,"translate"),core["\u0275\u0275elementContainerEnd"]()),2&rf){const ctx_r4=core["\u0275\u0275nextContext"](3);core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate1"]("\n          ",core["\u0275\u0275pipeBind2"](2,1,"submission.sections.upload.header.policy.default.nolist",core["\u0275\u0275pureFunction1"](4,section_upload_component_c0,ctx_r4.collectionName)),"\n        ")}}function SubmissionSectionUploadComponent_ng_container_4_div_2_ng_container_8_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementContainerStart"](0),core["\u0275\u0275text"](1),core["\u0275\u0275pipe"](2,"translate"),core["\u0275\u0275elementContainerEnd"]()),2&rf){const ctx_r5=core["\u0275\u0275nextContext"](3);core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate1"]("\n          ",core["\u0275\u0275pipeBind2"](2,1,"submission.sections.upload.header.policy.default.withlist",core["\u0275\u0275pureFunction1"](4,section_upload_component_c0,ctx_r5.collectionName)),"\n        ")}}function SubmissionSectionUploadComponent_ng_container_4_div_2_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"div",2),core["\u0275\u0275text"](1,"\n    "),core["\u0275\u0275elementStart"](2,"div",8),core["\u0275\u0275text"](3,"\n      "),core["\u0275\u0275elementStart"](4,"ds-alert",9),core["\u0275\u0275text"](5,"\n        "),core["\u0275\u0275template"](6,SubmissionSectionUploadComponent_ng_container_4_div_2_ng_container_6_Template,3,6,"ng-container",1),core["\u0275\u0275text"](7,"\n        "),core["\u0275\u0275template"](8,SubmissionSectionUploadComponent_ng_container_4_div_2_ng_container_8_Template,3,6,"ng-container",1),core["\u0275\u0275text"](9,"\n        "),core["\u0275\u0275element"](10,"span",10),core["\u0275\u0275text"](11,"\n        "),core["\u0275\u0275element"](12,"ds-submission-section-upload-access-conditions",11),core["\u0275\u0275text"](13,"\n      "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](14,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](15,"\n  "),core["\u0275\u0275elementEnd"]()),2&rf){const ctx_r2=core["\u0275\u0275nextContext"](2);core["\u0275\u0275advance"](4),core["\u0275\u0275property"]("type",ctx_r2.AlertTypeEnum.Warning),core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",1===ctx_r2.collectionPolicyType),core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",2===ctx_r2.collectionPolicyType),core["\u0275\u0275advance"](4),core["\u0275\u0275property"]("accessConditions",ctx_r2.collectionDefaultAccessConditions)}}function SubmissionSectionUploadComponent_ng_container_4_ng_container_4_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementContainerStart"](0),core["\u0275\u0275text"](1,"\n    "),core["\u0275\u0275element"](2,"ds-submission-upload-section-file",12),core["\u0275\u0275pipe"](3,"async"),core["\u0275\u0275text"](4,"\n    "),core["\u0275\u0275elementStart"](5,"div",2),core["\u0275\u0275text"](6,"\n      "),core["\u0275\u0275elementStart"](7,"div",3),core["\u0275\u0275text"](8,"\n        "),core["\u0275\u0275element"](9,"hr"),core["\u0275\u0275text"](10,"\n      "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](11,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](12,"\n  "),core["\u0275\u0275elementContainerEnd"]()),2&rf){const fileEntry_r6=ctx.$implicit,ctx_r3=core["\u0275\u0275nextContext"](2);core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("availableAccessConditionOptions",ctx_r3.availableAccessConditionOptions)("collectionId",ctx_r3.collectionId)("collectionPolicyType",ctx_r3.collectionPolicyType)("configMetadataForm",core["\u0275\u0275pipeBind1"](3,9,ctx_r3.configMetadataForm$))("fileId",ctx_r3.fileIndexes[ctx_r3.fileList.indexOf(fileEntry_r6)])("fileIndex",ctx_r3.fileList.indexOf(fileEntry_r6))("fileName",ctx_r3.fileNames[ctx_r3.fileList.indexOf(fileEntry_r6)])("sectionId",ctx_r3.sectionData.id)("submissionId",ctx_r3.submissionId)}}function SubmissionSectionUploadComponent_ng_container_4_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementContainerStart"](0),core["\u0275\u0275text"](1,"\n\n  "),core["\u0275\u0275template"](2,SubmissionSectionUploadComponent_ng_container_4_div_2_Template,16,4,"div",6),core["\u0275\u0275text"](3,"\n\n  "),core["\u0275\u0275template"](4,SubmissionSectionUploadComponent_ng_container_4_ng_container_4_Template,13,11,"ng-container",7),core["\u0275\u0275text"](5,"\n"),core["\u0275\u0275elementContainerEnd"]()),2&rf){const ctx_r1=core["\u0275\u0275nextContext"]();core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",ctx_r1.collectionDefaultAccessConditions.length>0),core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngForOf",ctx_r1.fileList)}}let section_upload_component_SubmissionSectionUploadComponent=class extends section_model_SectionModelComponent{constructor(bitstreamService,changeDetectorRef,collectionDataService,groupService,resourcePolicyService,sectionService,submissionService,uploadsConfigService,injectedSectionData,injectedSubmissionId){super(void 0,injectedSectionData,injectedSubmissionId),this.bitstreamService=bitstreamService,this.changeDetectorRef=changeDetectorRef,this.collectionDataService=collectionDataService,this.groupService=groupService,this.resourcePolicyService=resourcePolicyService,this.sectionService=sectionService,this.submissionService=submissionService,this.uploadsConfigService=uploadsConfigService,this.injectedSectionData=injectedSectionData,this.injectedSubmissionId=injectedSubmissionId,this.AlertTypeEnum=aletr_type.a,this.fileIndexes=[],this.fileList=[],this.fileNames=[],this.collectionDefaultAccessConditions=[],this.required$=new BehaviorSubject.a(!0),this.subs=[]}onSectionInit(){const config$=this.uploadsConfigService.findByHref(this.sectionData.config,!0,!1,Object(follow_link_config_model.a)("metadata")).pipe(Object(operators.i)(),Object(map.a)((config=>config.payload)));this.configMetadataForm$=config$.pipe(Object(switchMap.a)((config=>config.metadata.pipe(Object(operators.i)(),Object(map.a)((remoteData=>remoteData.payload)))))),this.subs.push(this.submissionService.getSubmissionObject(this.submissionId).pipe(Object(filter.a)((submissionObject=>Object(empty_util.h)(submissionObject)&&!submissionObject.isLoading)),Object(filter.a)((submissionObject=>Object(empty_util.j)(this.collectionId)||this.collectionId!==submissionObject.collection)),Object(tap.a)((submissionObject=>this.collectionId=submissionObject.collection)),Object(mergeMap.a)((submissionObject=>this.collectionDataService.findById(submissionObject.collection))),Object(filter.a)((rd=>Object(empty_util.h)(rd.payload))),Object(tap.a)((collectionRemoteData=>this.collectionName=collectionRemoteData.payload.name)),Object(mergeMap.a)((()=>config$))).subscribe((config=>{this.required$.next(config.required),this.availableAccessConditionOptions=Object(empty_util.e)(config.accessConditionOptions)?config.accessConditionOptions:[],this.collectionPolicyType=this.availableAccessConditionOptions.length>0?2:1,this.changeDetectorRef.detectChanges()})),Object(combineLatest.a)(this.configMetadataForm$,this.bitstreamService.getUploadedFileList(this.submissionId,this.sectionData.id)).pipe(Object(filter.a)((([configMetadataForm,fileList])=>Object(empty_util.e)(configMetadataForm)&&Object(empty_util.h)(fileList))),Object(distinctUntilChanged.a)()).subscribe((([configMetadataForm,fileList])=>{this.fileList=[],this.fileIndexes=[],this.fileNames=[],this.changeDetectorRef.detectChanges(),Object(empty_util.h)(fileList)&&fileList.length>0&&fileList.forEach((file=>{this.fileList.push(file),this.fileIndexes.push(file.uuid),this.fileNames.push(this.getFileName(configMetadataForm,file))})),this.changeDetectorRef.detectChanges()})))}getFileName(configMetadataForm,fileData){const metadataName=configMetadataForm.rows[0].fields[0].selectableMetadata[0].metadata;let title;return title=Object(empty_util.e)(fileData.metadata)&&Object(empty_util.e)(fileData.metadata[metadataName])?fileData.metadata[metadataName][0].display:fileData.uuid,title}getSectionStatus(){return Object(combineLatest.a)(this.required$,this.bitstreamService.getUploadedFileList(this.submissionId,this.sectionData.id),((required,fileList)=>!required||Object(empty_util.h)(fileList)&&fileList.length>0))}onSectionDestroy(){this.subs.filter((subscription=>Object(empty_util.b)(subscription))).forEach((subscription=>subscription.unsubscribe()))}};section_upload_component_SubmissionSectionUploadComponent.\u0275fac=function SubmissionSectionUploadComponent_Factory(t){return new(t||section_upload_component_SubmissionSectionUploadComponent)(core["\u0275\u0275directiveInject"](section_upload_service_SectionUploadService),core["\u0275\u0275directiveInject"](core.ChangeDetectorRef),core["\u0275\u0275directiveInject"](collection_data_service.a),core["\u0275\u0275directiveInject"](group_data_service.a),core["\u0275\u0275directiveInject"](resource_policy_service.a),core["\u0275\u0275directiveInject"](sections_service.a),core["\u0275\u0275directiveInject"](submission_service.a),core["\u0275\u0275directiveInject"](submission_uploads_config_service_SubmissionUploadsConfigService),core["\u0275\u0275directiveInject"]("sectionDataProvider"),core["\u0275\u0275directiveInject"]("submissionIdProvider"))},section_upload_component_SubmissionSectionUploadComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:section_upload_component_SubmissionSectionUploadComponent,selectors:[["ds-submission-section-upload"]],features:[core["\u0275\u0275InheritDefinitionFeature"]],decls:6,vars:5,consts:[[3,"content","dismissible","type"],[4,"ngIf"],[1,"row"],[1,"col-md-12"],[1,"text-center"],[1,"text-muted"],["class","row",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"col-sm-12"],[3,"type"],[1,"clearfix"],[3,"accessConditions"],[3,"availableAccessConditionOptions","collectionId","collectionPolicyType","configMetadataForm","fileId","fileIndex","fileName","sectionId","submissionId"]],template:function SubmissionSectionUploadComponent_Template(rf,ctx){1&rf&&(core["\u0275\u0275element"](0,"ds-alert",0),core["\u0275\u0275text"](1,"\n\n"),core["\u0275\u0275template"](2,SubmissionSectionUploadComponent_ng_container_2_Template,13,3,"ng-container",1),core["\u0275\u0275text"](3,"\n\n"),core["\u0275\u0275template"](4,SubmissionSectionUploadComponent_ng_container_4_Template,6,2,"ng-container",1),core["\u0275\u0275text"](5,"\n")),2&rf&&(core["\u0275\u0275property"]("content","submission.sections.upload.info")("dismissible",!0)("type",ctx.AlertTypeEnum.Info),core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",0==ctx.fileList.length),core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",ctx.fileList.length>0))},styles:[""]}),section_upload_component_SubmissionSectionUploadComponent=Object(tslib.__decorate)([Object(sections_decorator.a)(sections_type.a.Upload),Object(tslib.__metadata)("design:paramtypes",[section_upload_service_SectionUploadService,core.ChangeDetectorRef,collection_data_service.a,group_data_service.a,resource_policy_service.a,sections_service.a,submission_service.a,submission_uploads_config_service_SubmissionUploadsConfigService,Object,String])],section_upload_component_SubmissionSectionUploadComponent);var submission_upload_files_component=__webpack_require__("T/iP"),json_patch_operations_builder=__webpack_require__("BVmw");const SECTION_LICENSE_FORM_LAYOUT={granted:{element:{container:"custom-control custom-checkbox pl-1",control:"custom-control-input",label:"custom-control-label pt-1"}}},SECTION_LICENSE_FORM_MODEL=[{id:"granted",label:"I confirm the license above",required:!0,value:!1,validators:{required:null},errorMessages:{required:"You must accept the license",notgranted:"You must accept the license"},type:"CHECKBOX"}],section_license_component_c0=["formRef"];function SubmissionSectionLicenseComponent_ds_form_7_Template(rf,ctx){if(1&rf){const _r3=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementStart"](0,"ds-form",2,3),core["\u0275\u0275listener"]("dfChange",(function SubmissionSectionLicenseComponent_ds_form_7_Template_ds_form_dfChange_0_listener($event){core["\u0275\u0275restoreView"](_r3);return core["\u0275\u0275nextContext"]().onChange($event)})),core["\u0275\u0275elementEnd"]()}if(2&rf){const ctx_r0=core["\u0275\u0275nextContext"]();core["\u0275\u0275property"]("formId",ctx_r0.formId)("formModel",ctx_r0.formModel)("formLayout",ctx_r0.formLayout)("displaySubmit",ctx_r0.displaySubmit)("displayCancel",!1)}}let section_license_component_SubmissionSectionLicenseComponent=class extends section_model_SectionModelComponent{constructor(changeDetectorRef,collectionDataService,formBuilderService,formOperationsService,formService,operationsBuilder,sectionService,submissionService,injectedCollectionId,injectedSectionData,injectedSubmissionId){super(injectedCollectionId,injectedSectionData,injectedSubmissionId),this.changeDetectorRef=changeDetectorRef,this.collectionDataService=collectionDataService,this.formBuilderService=formBuilderService,this.formOperationsService=formOperationsService,this.formService=formService,this.operationsBuilder=operationsBuilder,this.sectionService=sectionService,this.submissionService=submissionService,this.injectedCollectionId=injectedCollectionId,this.injectedSectionData=injectedSectionData,this.injectedSubmissionId=injectedSubmissionId,this.formLayout=SECTION_LICENSE_FORM_LAYOUT,this.displaySubmit=!1,this.subs=[]}onSectionInit(){this.pathCombiner=new json_patch_operation_path_combiner.a("sections",this.sectionData.id),this.formId=this.formService.getUniqueId(this.sectionData.id),this.formModel=this.formBuilderService.fromJSON(SECTION_LICENSE_FORM_MODEL);const model=this.formBuilderService.findById("granted",this.formModel);model.value=this.sectionData.data.granted,this.licenseText$=this.collectionDataService.findById(this.collectionId,!0,!0,Object(follow_link_config_model.a)("license")).pipe(Object(filter.a)((collectionData=>Object(empty_util.h)(collectionData.payload))),Object(mergeMap.a)((collectionData=>collectionData.payload.license)),Object(find.a)((licenseData=>Object(empty_util.h)(licenseData.payload))),Object(map.a)((licenseData=>licenseData.payload.text)),Object(startWith.a)("")),this.subs.push(this.sectionService.isSectionReadOnly(this.submissionId,this.sectionData.id,this.submissionService.getSubmissionScope()).pipe(Object(take.a)(1),Object(filter.a)((isReadOnly=>isReadOnly))).subscribe((()=>{model.disabled=!0})),this.sectionService.getSectionErrors(this.submissionId,this.sectionData.id).pipe(Object(filter.a)((errors=>Object(empty_util.e)(errors))),Object(distinctUntilChanged.a)()).subscribe((errors=>{const newErrors=errors.map((error=>"/sections/license"===error.path?model.checked?null:Object.assign({},error,{path:"/sections/license/granted"}):error)).filter((error=>Object(empty_util.g)(error)));Object(empty_util.e)(newErrors)?(this.sectionService.checkSectionErrors(this.submissionId,this.sectionData.id,this.formId,newErrors),this.sectionData.errors=errors):this.sectionService.dispatchRemoveSectionErrors(this.submissionId,this.sectionData.id),this.changeDetectorRef.detectChanges()})))}getSectionStatus(){const model=this.formBuilderService.findById("granted",this.formModel);return model.valueChanges.pipe(Object(map.a)((value=>!0===value)),Object(startWith.a)(model.value))}onChange(event){const path=this.formOperationsService.getFieldPathSegmentedFromChangeEvent(event),value=this.formOperationsService.getFieldValueFromChangeEvent(event);value?(this.operationsBuilder.add(this.pathCombiner.getPath(path),value.value.toString(),!1,!0),this.sectionService.dispatchRemoveSectionErrors(this.submissionId,this.sectionData.id)):this.operationsBuilder.remove(this.pathCombiner.getPath(path))}onSectionDestroy(){this.subs.filter((subscription=>Object(empty_util.b)(subscription))).forEach((subscription=>subscription.unsubscribe()))}};section_license_component_SubmissionSectionLicenseComponent.\u0275fac=function SubmissionSectionLicenseComponent_Factory(t){return new(t||section_license_component_SubmissionSectionLicenseComponent)(core["\u0275\u0275directiveInject"](core.ChangeDetectorRef),core["\u0275\u0275directiveInject"](collection_data_service.a),core["\u0275\u0275directiveInject"](form_builder_service.a),core["\u0275\u0275directiveInject"](section_form_operations_service.a),core["\u0275\u0275directiveInject"](form_service.a),core["\u0275\u0275directiveInject"](json_patch_operations_builder.a),core["\u0275\u0275directiveInject"](sections_service.a),core["\u0275\u0275directiveInject"](submission_service.a),core["\u0275\u0275directiveInject"]("collectionIdProvider"),core["\u0275\u0275directiveInject"]("sectionDataProvider"),core["\u0275\u0275directiveInject"]("submissionIdProvider"))},section_license_component_SubmissionSectionLicenseComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:section_license_component_SubmissionSectionLicenseComponent,selectors:[["ds-submission-section-license"]],viewQuery:function SubmissionSectionLicenseComponent_Query(rf,ctx){if(1&rf&&core["\u0275\u0275viewQuery"](section_license_component_c0,1),2&rf){let _t;core["\u0275\u0275queryRefresh"](_t=core["\u0275\u0275loadQuery"]())&&(ctx.formRef=_t.first)}},features:[core["\u0275\u0275InheritDefinitionFeature"]],decls:9,vars:4,consts:[[1,"mb-5",3,"innerHTML"],[3,"formId","formModel","formLayout","displaySubmit","displayCancel","dfChange",4,"ngIf"],[3,"formId","formModel","formLayout","displaySubmit","displayCancel","dfChange"],["formRef","formComponent"]],template:function SubmissionSectionLicenseComponent_Template(rf,ctx){1&rf&&(core["\u0275\u0275element"](0,"span",0),core["\u0275\u0275pipe"](1,"async"),core["\u0275\u0275text"](2,"\n"),core["\u0275\u0275element"](3,"br"),core["\u0275\u0275text"](4," "),core["\u0275\u0275element"](5,"br"),core["\u0275\u0275text"](6,"\n"),core["\u0275\u0275template"](7,SubmissionSectionLicenseComponent_ds_form_7_Template,2,5,"ds-form",1),core["\u0275\u0275text"](8,"\n")),2&rf&&(core["\u0275\u0275property"]("innerHTML",core["\u0275\u0275pipeBind1"](1,2,ctx.licenseText$),core["\u0275\u0275sanitizeHtml"]),core["\u0275\u0275advance"](7),core["\u0275\u0275property"]("ngIf",ctx.formModel))},directives:[common.NgIf,form_component.a],pipes:[common.AsyncPipe],styles:[""]}),section_license_component_SubmissionSectionLicenseComponent=Object(tslib.__decorate)([Object(sections_decorator.a)(sections_type.a.License),Object(tslib.__metadata)("design:paramtypes",[core.ChangeDetectorRef,collection_data_service.a,form_builder_service.a,section_form_operations_service.a,form_service.a,json_patch_operations_builder.a,sections_service.a,submission_service.a,String,Object,String])],section_license_component_SubmissionSectionLicenseComponent);var submission_edit_component=__webpack_require__("SCNa"),fesm2015_core=(__webpack_require__("96+Z"),__webpack_require__("e+Av"));const BITSTREAM_METADATA_FORM_GROUP_CONFIG={id:"metadata",group:[]},BITSTREAM_METADATA_FORM_GROUP_LAYOUT={element:{container:"form-group",label:"col-form-label"},grid:{label:"col-sm-3"}},BITSTREAM_ACCESS_CONDITION_GROUP_CONFIG={id:"accessConditionGroup",group:[]},BITSTREAM_ACCESS_CONDITION_GROUP_LAYOUT={element:{host:"form-group access-condition-group col",container:"pl-1 pr-1",control:"form-row "}},BITSTREAM_ACCESS_CONDITIONS_FORM_ARRAY_CONFIG={id:"accessConditions",groupFactory:null},BITSTREAM_ACCESS_CONDITIONS_FORM_ARRAY_LAYOUT={grid:{group:"form-row pt-4"}},BITSTREAM_FORM_ACCESS_CONDITION_TYPE_CONFIG={id:"name",label:"submission.sections.upload.form.access-condition-label",hint:"submission.sections.upload.form.access-condition-hint",options:[]},BITSTREAM_FORM_ACCESS_CONDITION_TYPE_LAYOUT={element:{host:"col-12",label:"col-form-label name-label"}},BITSTREAM_FORM_ACCESS_CONDITION_START_DATE_CONFIG={id:"startDate",label:"submission.sections.upload.form.from-label",hint:"submission.sections.upload.form.from-hint",placeholder:"submission.sections.upload.form.from-placeholder",inline:!1,toggleIcon:"far fa-calendar-alt",relations:[{match:fesm2015_core.Q,operator:fesm2015_core.R,when:[]}],required:!0,validators:{required:null},errorMessages:{required:"submission.sections.upload.form.date-required-from"}},BITSTREAM_FORM_ACCESS_CONDITION_START_DATE_LAYOUT={element:{label:"col-form-label"},grid:{host:"col-6"}},BITSTREAM_FORM_ACCESS_CONDITION_END_DATE_CONFIG={id:"endDate",label:"submission.sections.upload.form.until-label",hint:"submission.sections.upload.form.until-hint",placeholder:"submission.sections.upload.form.until-placeholder",inline:!1,toggleIcon:"far fa-calendar-alt",relations:[{match:fesm2015_core.Q,operator:fesm2015_core.R,when:[]}],required:!0,validators:{required:null},errorMessages:{required:"submission.sections.upload.form.date-required-until"}},BITSTREAM_FORM_ACCESS_CONDITION_END_DATE_LAYOUT={element:{label:"col-form-label"},grid:{host:"col-6"}};var date_util=__webpack_require__("fM99"),ng_bootstrap=__webpack_require__("1kSV");const section_upload_file_edit_component_c0=["formRef"];function SubmissionSectionUploadFileEditComponent_ds_form_17_Template(rf,ctx){if(1&rf){const _r3=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementStart"](0,"ds-form",6,7),core["\u0275\u0275listener"]("submitForm",(function SubmissionSectionUploadFileEditComponent_ds_form_17_Template_ds_form_submitForm_0_listener(){core["\u0275\u0275restoreView"](_r3);return core["\u0275\u0275nextContext"]().onSubmit()}))("cancel",(function SubmissionSectionUploadFileEditComponent_ds_form_17_Template_ds_form_cancel_0_listener(){core["\u0275\u0275restoreView"](_r3);return core["\u0275\u0275nextContext"]().onModalClose()}))("dfChange",(function SubmissionSectionUploadFileEditComponent_ds_form_17_Template_ds_form_dfChange_0_listener($event){core["\u0275\u0275restoreView"](_r3);return core["\u0275\u0275nextContext"]().onChange($event)})),core["\u0275\u0275elementEnd"]()}if(2&rf){const ctx_r0=core["\u0275\u0275nextContext"]();core["\u0275\u0275property"]("formId",ctx_r0.formId)("formModel",ctx_r0.formModel)("displaySubmit",!ctx_r0.isSaving)("displayCancel",!ctx_r0.isSaving)}}class section_upload_file_edit_component_SubmissionSectionUploadFileEditComponent{constructor(activeModal,cdr,formBuilderService,formService,submissionService,operationsBuilder,operationsService,uploadService){this.activeModal=activeModal,this.cdr=cdr,this.formBuilderService=formBuilderService,this.formService=formService,this.submissionService=submissionService,this.operationsBuilder=operationsBuilder,this.operationsService=operationsService,this.uploadService=uploadService,this.formMetadata=[],this.isSaving=!1,this.subscriptions=[]}initModelData(formModel){this.fileData.accessConditions.forEach(((accessCondition,index)=>{Array.of("name","startDate","endDate").filter((key=>accessCondition.hasOwnProperty(key)&&Object(empty_util.e)(accessCondition[key]))).forEach((key=>{const metadataModel=this.formBuilderService.findById(key,formModel,index);if(metadataModel)if(metadataModel.type===fesm2015_core.g){const date=new Date(accessCondition[key]);metadataModel.value={year:date.getUTCFullYear(),month:date.getUTCMonth()+1,day:date.getUTCDate()}}else metadataModel.value=accessCondition[key]}))}))}onChange(event){"name"===event.model.id&&this.setOptions(event.model,event.control)}onModalClose(){this.activeModal.dismiss()}onSubmit(){this.isSaving=!0,this.saveBitstreamData()}setOptions(model,control){let accessCondition=null;if(this.availableAccessConditionOptions.filter((element=>element.name===control.value)).forEach((element=>accessCondition=element)),Object(empty_util.e)(accessCondition)){const showGroups=!0===accessCondition.hasStartDate||!0===accessCondition.hasEndDate,startDateControl=control.parent.get("startDate"),endDateControl=control.parent.get("endDate");if(null==startDateControl||startDateControl.markAsUntouched(),null==endDateControl||endDateControl.markAsUntouched(),null==startDateControl||startDateControl.setValue(null),control.parent.markAsDirty(),null==endDateControl||endDateControl.setValue(null),showGroups){if(accessCondition.hasStartDate){const startDateModel=this.formBuilderService.findById("startDate",model.parent.group),min=new Date(accessCondition.maxStartDate);startDateModel.max={year:min.getUTCFullYear(),month:min.getUTCMonth()+1,day:min.getUTCDate()}}if(accessCondition.hasEndDate){const endDateModel=this.formBuilderService.findById("endDate",model.parent.group),max=new Date(accessCondition.maxEndDate);endDateModel.max={year:max.getUTCFullYear(),month:max.getUTCMonth()+1,day:max.getUTCDate()}}}}}ngOnInit(){this.fileData&&this.formId&&(this.formModel=this.buildFileEditForm(),this.cdr.detectChanges())}ngOnDestroy(){this.unsubscribeAll()}retrieveValueFromField(field){const temp=Array.isArray(field)?field[0]:field;return temp?temp.value:void 0}buildFileEditForm(){const configDescr=Object.assign({},this.configMetadataForm.rows[0].fields[0]);configDescr.repeatable=!1;const configForm=Object.assign({},this.configMetadataForm,{fields:Object.assign([],this.configMetadataForm.rows[0].fields[0],[this.configMetadataForm.rows[0].fields[0],configDescr])}),formModel=[],metadataGroupModelConfig=Object.assign({},BITSTREAM_METADATA_FORM_GROUP_CONFIG);metadataGroupModelConfig.group=this.formBuilderService.modelFromConfiguration(this.submissionId,configForm,this.collectionId,this.fileData.metadata,this.submissionService.getSubmissionScope()),formModel.push(new fesm2015_core.D(metadataGroupModelConfig,BITSTREAM_METADATA_FORM_GROUP_LAYOUT));const accessConditionTypeModelConfig=Object.assign({},BITSTREAM_FORM_ACCESS_CONDITION_TYPE_CONFIG),accessConditionsArrayConfig=Object.assign({},BITSTREAM_ACCESS_CONDITIONS_FORM_ARRAY_CONFIG),accessConditionTypeOptions=[];if(2===this.collectionPolicyType){for(const accessCondition of this.availableAccessConditionOptions)accessConditionTypeOptions.push({label:accessCondition.name,value:accessCondition.name});accessConditionTypeModelConfig.options=accessConditionTypeOptions;const hasStart=[],hasEnd=[],hasGroups=[];this.availableAccessConditionOptions.forEach((condition=>{const showStart=!0===condition.hasStartDate,showEnd=!0===condition.hasEndDate,showGroups=showStart||showEnd;showStart&&hasStart.push({id:"name",value:condition.name}),showEnd&&hasEnd.push({id:"name",value:condition.name}),showGroups&&hasGroups.push({id:"name",value:condition.name})}));const confStart={relations:[{match:fesm2015_core.Q,operator:fesm2015_core.R,when:hasStart}]},confEnd={relations:[{match:fesm2015_core.Q,operator:fesm2015_core.R,when:hasEnd}]};accessConditionsArrayConfig.groupFactory=()=>{const type=new fesm2015_core.N(accessConditionTypeModelConfig,BITSTREAM_FORM_ACCESS_CONDITION_TYPE_LAYOUT),startDateConfig=Object.assign({},BITSTREAM_FORM_ACCESS_CONDITION_START_DATE_CONFIG,confStart),endDateConfig=Object.assign({},BITSTREAM_FORM_ACCESS_CONDITION_END_DATE_CONFIG,confEnd),startDate=new fesm2015_core.t(startDateConfig,BITSTREAM_FORM_ACCESS_CONDITION_START_DATE_LAYOUT),endDate=new fesm2015_core.t(endDateConfig,BITSTREAM_FORM_ACCESS_CONDITION_END_DATE_LAYOUT),accessConditionGroupConfig=Object.assign({},BITSTREAM_ACCESS_CONDITION_GROUP_CONFIG);return accessConditionGroupConfig.group=[type],hasStart.length>0&&accessConditionGroupConfig.group.push(startDate),hasEnd.length>0&&accessConditionGroupConfig.group.push(endDate),[new fesm2015_core.D(accessConditionGroupConfig,BITSTREAM_ACCESS_CONDITION_GROUP_LAYOUT)]},accessConditionsArrayConfig.initialCount=Object(empty_util.e)(this.fileData.accessConditions)?this.fileData.accessConditions.length:1,formModel.push(new fesm2015_core.w(accessConditionsArrayConfig,BITSTREAM_ACCESS_CONDITIONS_FORM_ARRAY_LAYOUT))}return this.initModelData(formModel),formModel}saveBitstreamData(){this.formService.validateAllFormFields(this.formRef.formGroup);const saveBitstreamDataSubscription=this.formService.isValid(this.formId).pipe(Object(take.a)(1),Object(filter.a)((isValid=>isValid)),Object(mergeMap.a)((()=>this.formService.getFormData(this.formId))),Object(take.a)(1),Object(mergeMap.a)((formData=>{Object.keys(formData.metadata).filter((key=>Object(empty_util.e)(formData.metadata[key]))).forEach((key=>{const path=`metadata/${key.replace(/_/g,".")}`;this.operationsBuilder.add(this.pathCombiner.getPath(path),formData.metadata[key],!0)})),Object.keys(this.fileData.metadata).filter((key=>Object(empty_util.e)(this.fileData.metadata[key]))).filter((key=>Object(empty_util.a)(formData.metadata[key]))).filter((key=>this.formMetadata.includes(key))).forEach((key=>{const path=`metadata/${key.replace(/_/g,".")}`;this.operationsBuilder.remove(this.pathCombiner.getPath(path))}));const accessConditionsToSave=[];return formData.accessConditions.map((accessConditions=>accessConditions.accessConditionGroup)).filter((accessCondition=>Object(empty_util.e)(accessCondition))).forEach((accessCondition=>{let accessConditionOpt;if(this.availableAccessConditionOptions.filter((element=>Object(empty_util.g)(accessCondition.name)&&element.name===accessCondition.name[0].value)).forEach((element=>accessConditionOpt=element)),accessConditionOpt){const currentAccessCondition=Object.assign({},accessCondition);if(currentAccessCondition.name=this.retrieveValueFromField(accessCondition.name),accessConditionOpt.hasStartDate){if(accessCondition.startDate){const startDate=this.retrieveValueFromField(accessCondition.startDate);currentAccessCondition.startDate=Object(date_util.a)(startDate)}}else delete currentAccessCondition.startDate;if(accessConditionOpt.hasEndDate){if(accessCondition.endDate){const endDate=this.retrieveValueFromField(accessCondition.endDate);currentAccessCondition.endDate=Object(date_util.a)(endDate)}}else delete currentAccessCondition.endDate;accessConditionsToSave.push(currentAccessCondition)}})),Object(empty_util.e)(accessConditionsToSave)&&this.operationsBuilder.add(this.pathCombiner.getPath("accessConditions"),accessConditionsToSave,!0),this.operationsService.jsonPatchByResourceID(this.submissionService.getSubmissionObjectLinkName(),this.submissionId,this.pathCombiner.rootElement,this.pathCombiner.subRootElement)}))).subscribe((result=>{if(result[0].sections[this.sectionId]){const uploadSection=result[0].sections[this.sectionId];Object.keys(uploadSection.files).filter((key=>uploadSection.files[key].uuid===this.fileId)).forEach((key=>this.uploadService.updateFileData(this.submissionId,this.sectionId,this.fileId,uploadSection.files[key])))}this.isSaving=!1,this.activeModal.close()}));this.subscriptions.push(saveBitstreamDataSubscription)}unsubscribeAll(){this.subscriptions.filter((sub=>Object(empty_util.b)(sub))).forEach((sub=>sub.unsubscribe()))}}section_upload_file_edit_component_SubmissionSectionUploadFileEditComponent.\u0275fac=function SubmissionSectionUploadFileEditComponent_Factory(t){return new(t||section_upload_file_edit_component_SubmissionSectionUploadFileEditComponent)(core["\u0275\u0275directiveInject"](ng_bootstrap.c),core["\u0275\u0275directiveInject"](core.ChangeDetectorRef),core["\u0275\u0275directiveInject"](form_builder_service.a),core["\u0275\u0275directiveInject"](form_service.a),core["\u0275\u0275directiveInject"](submission_service.a),core["\u0275\u0275directiveInject"](json_patch_operations_builder.a),core["\u0275\u0275directiveInject"](submission_json_patch_operations_service.a),core["\u0275\u0275directiveInject"](section_upload_service_SectionUploadService))},section_upload_file_edit_component_SubmissionSectionUploadFileEditComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:section_upload_file_edit_component_SubmissionSectionUploadFileEditComponent,selectors:[["ds-submission-section-upload-file-edit"]],viewQuery:function SubmissionSectionUploadFileEditComponent_Query(rf,ctx){if(1&rf&&core["\u0275\u0275viewQuery"](section_upload_file_edit_component_c0,1),2&rf){let _t;core["\u0275\u0275queryRefresh"](_t=core["\u0275\u0275loadQuery"]())&&(ctx.formRef=_t.first)}},decls:21,vars:5,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"disabled","click"],["aria-hidden","true"],[1,"modal-body"],[3,"formId","formModel","displaySubmit","displayCancel","submitForm","cancel","dfChange",4,"ngIf"],[3,"formId","formModel","displaySubmit","displayCancel","submitForm","cancel","dfChange"],["formRef","formComponent"]],template:function SubmissionSectionUploadFileEditComponent_Template(rf,ctx){1&rf&&(core["\u0275\u0275elementStart"](0,"div"),core["\u0275\u0275text"](1,"\n  "),core["\u0275\u0275elementStart"](2,"div",0),core["\u0275\u0275text"](3,"\n    "),core["\u0275\u0275elementStart"](4,"h4",1),core["\u0275\u0275text"](5),core["\u0275\u0275pipe"](6,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](7,"\n    "),core["\u0275\u0275elementStart"](8,"button",2),core["\u0275\u0275listener"]("click",(function SubmissionSectionUploadFileEditComponent_Template_button_click_8_listener(){return ctx.onModalClose()})),core["\u0275\u0275text"](9,"\n      "),core["\u0275\u0275elementStart"](10,"span",3),core["\u0275\u0275text"](11,"\xd7"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](12,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](13,"\n  "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](14,"\n  "),core["\u0275\u0275elementStart"](15,"div",4),core["\u0275\u0275text"](16,"\n\n    "),core["\u0275\u0275template"](17,SubmissionSectionUploadFileEditComponent_ds_form_17_Template,2,4,"ds-form",5),core["\u0275\u0275text"](18,"\n\n  "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](19,"\n"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](20,"\n")),2&rf&&(core["\u0275\u0275advance"](5),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](6,3,"submission.sections.upload.edit.title")),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("disabled",ctx.isSaving),core["\u0275\u0275advance"](9),core["\u0275\u0275property"]("ngIf",ctx.formModel))},directives:[common.NgIf,form_component.a],pipes:[ngx_translate_core.d],styles:[".access-condition-group{position:relative;top:-2.3rem;margin-bottom:-2.3rem}"]});var bitstream_model=__webpack_require__("PJyI"),thumbnail_component=__webpack_require__("/lGE"),file_download_link_component=__webpack_require__("OXP5");var metadata_utils=__webpack_require__("/eM4");function SubmissionSectionUploadAccessConditionsComponent_ng_container_0_span_2_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"span",3),core["\u0275\u0275text"](1),core["\u0275\u0275elementEnd"]()),2&rf){const accessCondition_r1=core["\u0275\u0275nextContext"]().$implicit;core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate3"]("\n    ",accessCondition_r1.name," ",accessCondition_r1.startDate," ",accessCondition_r1.endDate,"\n  ")}}function SubmissionSectionUploadAccessConditionsComponent_ng_container_0_span_4_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"span",3),core["\u0275\u0275text"](1),core["\u0275\u0275elementEnd"]()),2&rf){const accessCondition_r1=core["\u0275\u0275nextContext"]().$implicit;core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate2"]("",accessCondition_r1.name," from ",accessCondition_r1.endDate,"")}}function SubmissionSectionUploadAccessConditionsComponent_ng_container_0_span_6_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"span",4),core["\u0275\u0275text"](1),core["\u0275\u0275elementEnd"]()),2&rf){const accessCondition_r1=core["\u0275\u0275nextContext"]().$implicit;core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate2"]("",accessCondition_r1.name," until ",accessCondition_r1.startDate,"")}}function SubmissionSectionUploadAccessConditionsComponent_ng_container_0_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementContainerStart"](0),core["\u0275\u0275text"](1,"\n  "),core["\u0275\u0275template"](2,SubmissionSectionUploadAccessConditionsComponent_ng_container_0_span_2_Template,2,3,"span",1),core["\u0275\u0275text"](3,"\n  "),core["\u0275\u0275template"](4,SubmissionSectionUploadAccessConditionsComponent_ng_container_0_span_4_Template,2,2,"span",1),core["\u0275\u0275text"](5,"\n  "),core["\u0275\u0275template"](6,SubmissionSectionUploadAccessConditionsComponent_ng_container_0_span_6_Template,2,2,"span",2),core["\u0275\u0275text"](7,"\n  "),core["\u0275\u0275element"](8,"br"),core["\u0275\u0275text"](9,"\n"),core["\u0275\u0275elementContainerEnd"]()),2&rf){const accessCondition_r1=ctx.$implicit;core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf","DEFAULT_BITSTREAM_READ"==accessCondition_r1.action),core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf","lease"==accessCondition_r1.name),core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf","embargo"==accessCondition_r1.name)}}class submission_section_upload_access_conditions_component_SubmissionSectionUploadAccessConditionsComponent{constructor(groupService){this.groupService=groupService,this.accessConditionsList=[]}ngOnInit(){this.accessConditions.forEach((accessCondition=>{Object(empty_util.d)(accessCondition.name)?this.groupService.findByHref(accessCondition._links.group.href).pipe(Object(find.a)((rd=>!rd.isResponsePending&&rd.hasSucceeded))).subscribe((rd=>{const group=rd.payload,accessConditionEntry=Object.assign({},accessCondition);accessConditionEntry.name=group.name,this.accessConditionsList.push(accessConditionEntry)})):this.accessConditionsList.push(accessCondition)}))}}submission_section_upload_access_conditions_component_SubmissionSectionUploadAccessConditionsComponent.\u0275fac=function SubmissionSectionUploadAccessConditionsComponent_Factory(t){return new(t||submission_section_upload_access_conditions_component_SubmissionSectionUploadAccessConditionsComponent)(core["\u0275\u0275directiveInject"](group_data_service.a))},submission_section_upload_access_conditions_component_SubmissionSectionUploadAccessConditionsComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:submission_section_upload_access_conditions_component_SubmissionSectionUploadAccessConditionsComponent,selectors:[["ds-submission-section-upload-access-conditions"]],inputs:{accessConditions:"accessConditions"},decls:2,vars:1,consts:[[4,"ngFor","ngForOf"],["class","badge badge-primary mt-3 mr-2",4,"ngIf"],["class","badge badge-dark mt-3 mr-2",4,"ngIf"],[1,"badge","badge-primary","mt-3","mr-2"],[1,"badge","badge-dark","mt-3","mr-2"]],template:function SubmissionSectionUploadAccessConditionsComponent_Template(rf,ctx){1&rf&&(core["\u0275\u0275template"](0,SubmissionSectionUploadAccessConditionsComponent_ng_container_0_Template,10,3,"ng-container",0),core["\u0275\u0275text"](1,"\n")),2&rf&&core["\u0275\u0275property"]("ngForOf",ctx.accessConditionsList)},directives:[common.NgForOf,common.NgIf],encapsulation:2});var truncate_pipe=__webpack_require__("BCqK");function SubmissionSectionUploadFileViewComponent_ng_container_2_ng_container_2_ng_container_2_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementContainerStart"](0),core["\u0275\u0275text"](1,"\n        "),core["\u0275\u0275elementStart"](2,"h5"),core["\u0275\u0275text"](3),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](4,"\n      "),core["\u0275\u0275elementContainerEnd"]()),2&rf){const entry_r3=core["\u0275\u0275nextContext"]().$implicit;core["\u0275\u0275advance"](3),core["\u0275\u0275textInterpolate1"]("\n          ",entry_r3.value,"\n        ")}}function SubmissionSectionUploadFileViewComponent_ng_container_2_ng_container_2_ng_container_4_h5_2_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"h5"),core["\u0275\u0275text"](1,"\n          "),core["\u0275\u0275elementStart"](2,"span",4),core["\u0275\u0275text"](3),core["\u0275\u0275pipe"](4,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](5,"\n        "),core["\u0275\u0275elementEnd"]()),2&rf){const ctx_r7=core["\u0275\u0275nextContext"](4);core["\u0275\u0275advance"](3),core["\u0275\u0275textInterpolate2"]("",core["\u0275\u0275pipeBind1"](4,2,"submission.sections.upload.no-entry")," ",ctx_r7.fileTitleKey,"")}}function SubmissionSectionUploadFileViewComponent_ng_container_2_ng_container_2_ng_container_4_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementContainerStart"](0),core["\u0275\u0275text"](1,"\n        "),core["\u0275\u0275template"](2,SubmissionSectionUploadFileViewComponent_ng_container_2_ng_container_2_ng_container_4_h5_2_Template,6,4,"h5",0),core["\u0275\u0275text"](3,"\n      "),core["\u0275\u0275elementContainerEnd"]()),2&rf){const entry_r3=core["\u0275\u0275nextContext"]().$implicit,ctx_r5=core["\u0275\u0275nextContext"](2);core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",0===ctx_r5.metadata[ctx_r5.fileTitleKey].indexOf(entry_r3))}}function SubmissionSectionUploadFileViewComponent_ng_container_2_ng_container_2_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementContainerStart"](0),core["\u0275\u0275text"](1,"\n      "),core["\u0275\u0275template"](2,SubmissionSectionUploadFileViewComponent_ng_container_2_ng_container_2_ng_container_2_Template,5,1,"ng-container",0),core["\u0275\u0275text"](3,"\n      "),core["\u0275\u0275template"](4,SubmissionSectionUploadFileViewComponent_ng_container_2_ng_container_2_ng_container_4_Template,4,1,"ng-container",0),core["\u0275\u0275text"](5,"\n      "),core["\u0275\u0275element"](6,"span",1),core["\u0275\u0275text"](7,"\n    "),core["\u0275\u0275elementContainerEnd"]()),2&rf){const entry_r3=ctx.$implicit;core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",""!==entry_r3.value),core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",""===entry_r3.value)}}const section_upload_file_view_component_c0=function(){return["150"]};function SubmissionSectionUploadFileViewComponent_ng_container_2_ng_container_4_ng_container_2_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementContainerStart"](0),core["\u0275\u0275text"](1),core["\u0275\u0275pipe"](2,"dsTruncate"),core["\u0275\u0275elementContainerEnd"]()),2&rf){const entry_r9=core["\u0275\u0275nextContext"]().$implicit;core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate1"]("\n          ",core["\u0275\u0275pipeBind2"](2,1,entry_r9.value,core["\u0275\u0275pureFunction0"](4,section_upload_file_view_component_c0)),"\n      ")}}function SubmissionSectionUploadFileViewComponent_ng_container_2_ng_container_4_ng_container_4_span_2_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"span",4),core["\u0275\u0275text"](1),core["\u0275\u0275pipe"](2,"translate"),core["\u0275\u0275elementEnd"]()),2&rf){const ctx_r13=core["\u0275\u0275nextContext"](4);core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate2"]("",core["\u0275\u0275pipeBind1"](2,2,"submission.sections.upload.no-entry")," ",ctx_r13.fileDescrKey,"")}}function SubmissionSectionUploadFileViewComponent_ng_container_2_ng_container_4_ng_container_4_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementContainerStart"](0),core["\u0275\u0275text"](1,"\n        "),core["\u0275\u0275template"](2,SubmissionSectionUploadFileViewComponent_ng_container_2_ng_container_4_ng_container_4_span_2_Template,3,4,"span",5),core["\u0275\u0275text"](3,"\n      "),core["\u0275\u0275elementContainerEnd"]()),2&rf){const entry_r9=core["\u0275\u0275nextContext"]().$implicit,ctx_r11=core["\u0275\u0275nextContext"](2);core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",0===ctx_r11.metadata[ctx_r11.fileDescrKey].indexOf(entry_r9))}}function SubmissionSectionUploadFileViewComponent_ng_container_2_ng_container_4_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementContainerStart"](0),core["\u0275\u0275text"](1,"\n      "),core["\u0275\u0275template"](2,SubmissionSectionUploadFileViewComponent_ng_container_2_ng_container_4_ng_container_2_Template,3,5,"ng-container",0),core["\u0275\u0275text"](3,"\n      "),core["\u0275\u0275template"](4,SubmissionSectionUploadFileViewComponent_ng_container_2_ng_container_4_ng_container_4_Template,4,1,"ng-container",0),core["\u0275\u0275text"](5,"\n      "),core["\u0275\u0275element"](6,"span",1),core["\u0275\u0275text"](7,"\n    "),core["\u0275\u0275elementContainerEnd"]()),2&rf){const entry_r9=ctx.$implicit;core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",""!==entry_r9.value),core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",""===entry_r9.value)}}function SubmissionSectionUploadFileViewComponent_ng_container_2_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementContainerStart"](0),core["\u0275\u0275text"](1,"\n    "),core["\u0275\u0275template"](2,SubmissionSectionUploadFileViewComponent_ng_container_2_ng_container_2_Template,8,2,"ng-container",3),core["\u0275\u0275text"](3,"\n    "),core["\u0275\u0275template"](4,SubmissionSectionUploadFileViewComponent_ng_container_2_ng_container_4_Template,8,2,"ng-container",3),core["\u0275\u0275text"](5,"\n  "),core["\u0275\u0275elementContainerEnd"]()),2&rf){const ctx_r0=core["\u0275\u0275nextContext"]();core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngForOf",ctx_r0.getAllMetadataValue(ctx_r0.fileTitleKey)),core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngForOf",ctx_r0.getAllMetadataValue(ctx_r0.fileDescrKey))}}class section_upload_file_view_component_SubmissionSectionUploadFileViewComponent{constructor(){this.metadata=Object.create({}),this.fileTitleKey="Title",this.fileDescrKey="Description"}ngOnInit(){Object(empty_util.e)(this.fileData.metadata)&&(this.metadata[this.fileTitleKey]=metadata_utils.a.all(this.fileData.metadata,"dc.title"),this.metadata[this.fileDescrKey]=metadata_utils.a.all(this.fileData.metadata,"dc.description"))}getAllMetadataValue(metadataKey){return metadata_utils.a.all(this.metadata,metadataKey)}}section_upload_file_view_component_SubmissionSectionUploadFileViewComponent.\u0275fac=function SubmissionSectionUploadFileViewComponent_Factory(t){return new(t||section_upload_file_view_component_SubmissionSectionUploadFileViewComponent)},section_upload_file_view_component_SubmissionSectionUploadFileViewComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:section_upload_file_view_component_SubmissionSectionUploadFileViewComponent,selectors:[["ds-submission-section-upload-file-view"]],inputs:{fileData:"fileData"},decls:9,vars:2,consts:[[4,"ngIf"],[1,"clearfix"],[3,"accessConditions"],[4,"ngFor","ngForOf"],[1,"text-muted"],["class","text-muted",4,"ngIf"]],template:function SubmissionSectionUploadFileViewComponent_Template(rf,ctx){1&rf&&(core["\u0275\u0275elementStart"](0,"div"),core["\u0275\u0275text"](1,"\n  "),core["\u0275\u0275template"](2,SubmissionSectionUploadFileViewComponent_ng_container_2_Template,6,2,"ng-container",0),core["\u0275\u0275text"](3,"\n\n  "),core["\u0275\u0275element"](4,"span",1),core["\u0275\u0275text"](5,"\n  "),core["\u0275\u0275element"](6,"ds-submission-section-upload-access-conditions",2),core["\u0275\u0275text"](7,"\n"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](8,"\n")),2&rf&&(core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",ctx.metadata),core["\u0275\u0275advance"](4),core["\u0275\u0275property"]("accessConditions",ctx.fileData.accessConditions))},directives:[common.NgIf,submission_section_upload_access_conditions_component_SubmissionSectionUploadAccessConditionsComponent,common.NgForOf],pipes:[ngx_translate_core.d,truncate_pipe.a],encapsulation:2});var file_size_pipe=__webpack_require__("t8/W");function SubmissionSectionUploadFileComponent_ng_container_0_i_42_Template(rf,ctx){1&rf&&core["\u0275\u0275element"](0,"i",18)}function SubmissionSectionUploadFileComponent_ng_container_0_i_45_Template(rf,ctx){1&rf&&core["\u0275\u0275element"](0,"i",19)}function SubmissionSectionUploadFileComponent_ng_container_0_Template(rf,ctx){if(1&rf){const _r6=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementContainerStart"](0),core["\u0275\u0275text"](1,"\n  "),core["\u0275\u0275elementStart"](2,"div",2),core["\u0275\u0275text"](3,"\n    "),core["\u0275\u0275elementStart"](4,"div",3),core["\u0275\u0275text"](5,"\n      "),core["\u0275\u0275text"](6,"\n      "),core["\u0275\u0275element"](7,"ds-thumbnail",4),core["\u0275\u0275text"](8,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](9,"\n    "),core["\u0275\u0275elementStart"](10,"div",5),core["\u0275\u0275text"](11,"\n      "),core["\u0275\u0275elementStart"](12,"div",6),core["\u0275\u0275text"](13,"\n        "),core["\u0275\u0275elementStart"](14,"h3"),core["\u0275\u0275text"](15),core["\u0275\u0275elementStart"](16,"span",7),core["\u0275\u0275text"](17),core["\u0275\u0275pipe"](18,"dsFileSize"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](19,"\n      "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](20,"\n      "),core["\u0275\u0275elementStart"](21,"div",8),core["\u0275\u0275text"](22,"\n        "),core["\u0275\u0275elementContainerStart"](23),core["\u0275\u0275text"](24,"\n          "),core["\u0275\u0275elementStart"](25,"ds-file-download-link",9),core["\u0275\u0275text"](26,"\n            "),core["\u0275\u0275element"](27,"i",10),core["\u0275\u0275text"](28,"\n          "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](29,"\n          "),core["\u0275\u0275elementStart"](30,"button",11),core["\u0275\u0275listener"]("click",(function SubmissionSectionUploadFileComponent_ng_container_0_Template_button_click_30_listener($event){core["\u0275\u0275restoreView"](_r6);const ctx_r5=core["\u0275\u0275nextContext"]();return $event.preventDefault(),ctx_r5.editBitstreamData()})),core["\u0275\u0275pipe"](31,"translate"),core["\u0275\u0275pipe"](32,"translate"),core["\u0275\u0275text"](33,"\n            "),core["\u0275\u0275element"](34,"i",12),core["\u0275\u0275text"](35,"\n          "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](36,"\n          "),core["\u0275\u0275elementStart"](37,"button",13),core["\u0275\u0275listener"]("click",(function SubmissionSectionUploadFileComponent_ng_container_0_Template_button_click_37_listener($event){core["\u0275\u0275restoreView"](_r6);const ctx_r7=core["\u0275\u0275nextContext"](),_r1=core["\u0275\u0275reference"](3);return $event.preventDefault(),ctx_r7.confirmDelete(_r1)})),core["\u0275\u0275pipe"](38,"translate"),core["\u0275\u0275pipe"](39,"translate"),core["\u0275\u0275pipe"](40,"async"),core["\u0275\u0275text"](41,"\n            "),core["\u0275\u0275template"](42,SubmissionSectionUploadFileComponent_ng_container_0_i_42_Template,1,0,"i",14),core["\u0275\u0275pipe"](43,"async"),core["\u0275\u0275text"](44,"\n            "),core["\u0275\u0275template"](45,SubmissionSectionUploadFileComponent_ng_container_0_i_45_Template,1,0,"i",15),core["\u0275\u0275pipe"](46,"async"),core["\u0275\u0275text"](47,"\n          "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](48,"\n        "),core["\u0275\u0275elementContainerEnd"](),core["\u0275\u0275text"](49,"\n      "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](50,"\n      "),core["\u0275\u0275element"](51,"div",16),core["\u0275\u0275text"](52,"\n      "),core["\u0275\u0275element"](53,"ds-submission-section-upload-file-view",17),core["\u0275\u0275text"](54,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](55,"\n  "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](56,"\n"),core["\u0275\u0275elementContainerEnd"]()}if(2&rf){const ctx_r0=core["\u0275\u0275nextContext"]();core["\u0275\u0275advance"](7),core["\u0275\u0275property"]("thumbnail",null==ctx_r0.fileData?null:ctx_r0.fileData.thumbnail),core["\u0275\u0275advance"](8),core["\u0275\u0275textInterpolate1"]("",ctx_r0.fileName," "),core["\u0275\u0275advance"](2),core["\u0275\u0275textInterpolate1"]("(",core["\u0275\u0275pipeBind1"](18,15,null==ctx_r0.fileData?null:ctx_r0.fileData.sizeBytes),")"),core["\u0275\u0275advance"](8),core["\u0275\u0275property"]("cssClasses","btn btn-link-focus")("isBlank",!0)("bitstream",ctx_r0.getBitstream())("enableRequestACopy",!1),core["\u0275\u0275advance"](5),core["\u0275\u0275propertyInterpolate"]("title",core["\u0275\u0275pipeBind1"](32,19,"submission.sections.upload.edit.title")),core["\u0275\u0275attribute"]("aria-label",core["\u0275\u0275pipeBind1"](31,17,"submission.sections.upload.edit.title")),core["\u0275\u0275advance"](7),core["\u0275\u0275propertyInterpolate"]("title",core["\u0275\u0275pipeBind1"](39,23,"submission.sections.upload.delete.confirm.title")),core["\u0275\u0275property"]("disabled",core["\u0275\u0275pipeBind1"](40,25,ctx_r0.processingDelete$)),core["\u0275\u0275attribute"]("aria-label",core["\u0275\u0275pipeBind1"](38,21,"submission.sections.upload.delete.confirm.title")),core["\u0275\u0275advance"](5),core["\u0275\u0275property"]("ngIf",core["\u0275\u0275pipeBind1"](43,27,ctx_r0.processingDelete$)),core["\u0275\u0275advance"](3),core["\u0275\u0275property"]("ngIf",!core["\u0275\u0275pipeBind1"](46,29,ctx_r0.processingDelete$)),core["\u0275\u0275advance"](8),core["\u0275\u0275property"]("fileData",ctx_r0.fileData)}}function SubmissionSectionUploadFileComponent_ng_template_2_Template(rf,ctx){1&rf&&(core["\u0275\u0275text"](0,"\n  "),core["\u0275\u0275elementStart"](1,"div",20),core["\u0275\u0275text"](2,"\n    "),core["\u0275\u0275elementStart"](3,"h4",21),core["\u0275\u0275text"](4),core["\u0275\u0275pipe"](5,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](6,"\n    "),core["\u0275\u0275elementStart"](7,"button",22),core["\u0275\u0275listener"]("click",(function SubmissionSectionUploadFileComponent_ng_template_2_Template_button_click_7_listener(){return(0,ctx.dismiss)("cancel")})),core["\u0275\u0275text"](8,"\n      "),core["\u0275\u0275elementStart"](9,"span",23),core["\u0275\u0275text"](10,"\xd7"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](11,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](12,"\n  "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](13,"\n  "),core["\u0275\u0275elementStart"](14,"div",24),core["\u0275\u0275text"](15,"\n    "),core["\u0275\u0275elementStart"](16,"p"),core["\u0275\u0275text"](17),core["\u0275\u0275pipe"](18,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](19,"\n  "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](20,"\n  "),core["\u0275\u0275elementStart"](21,"div",25),core["\u0275\u0275text"](22,"\n    "),core["\u0275\u0275elementStart"](23,"button",26),core["\u0275\u0275listener"]("click",(function SubmissionSectionUploadFileComponent_ng_template_2_Template_button_click_23_listener(){return(0,ctx.close)("cancel")})),core["\u0275\u0275text"](24),core["\u0275\u0275pipe"](25,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](26,"\n    "),core["\u0275\u0275elementStart"](27,"button",27),core["\u0275\u0275listener"]("click",(function SubmissionSectionUploadFileComponent_ng_template_2_Template_button_click_27_listener(){return(0,ctx.close)("ok")})),core["\u0275\u0275text"](28),core["\u0275\u0275pipe"](29,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](30,"\n  "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](31,"\n")),2&rf&&(core["\u0275\u0275advance"](4),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](5,4,"submission.sections.upload.delete.confirm.title")),core["\u0275\u0275advance"](13),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](18,6,"submission.sections.upload.delete.confirm.info")),core["\u0275\u0275advance"](7),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](25,8,"submission.sections.upload.delete.confirm.cancel")),core["\u0275\u0275advance"](4),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](29,10,"submission.sections.upload.delete.confirm.submit")))}class section_upload_file_component_SubmissionSectionUploadFileComponent{constructor(cdr,formService,halService,modalService,operationsBuilder,operationsService,submissionService,uploadService){this.cdr=cdr,this.formService=formService,this.halService=halService,this.modalService=modalService,this.operationsBuilder=operationsBuilder,this.operationsService=operationsService,this.submissionService=submissionService,this.uploadService=uploadService,this.processingDelete$=new BehaviorSubject.a(!1),this.subscriptions=[],this.formMetadata=[],this.readMode=!0}ngOnChanges(){this.availableAccessConditionOptions&&this.subscriptions.push(this.uploadService.getFileData(this.submissionId,this.sectionId,this.fileId).pipe(Object(filter.a)((bitstream=>Object(empty_util.h)(bitstream)))).subscribe((bitstream=>{this.fileData=bitstream})))}ngOnInit(){this.formId=this.formService.getUniqueId(this.fileId),this.pathCombiner=new json_patch_operation_path_combiner.a("sections",this.sectionId,"files",this.fileIndex),this.loadFormMetadata()}confirmDelete(content){this.modalService.open(content).result.then((result=>{"ok"===result&&(this.processingDelete$.next(!0),this.deleteFile())}))}getBitstream(){return Object.assign(new bitstream_model.a,{uuid:this.fileData.uuid})}editBitstreamData(){const activeModal=this.modalService.open(section_upload_file_edit_component_SubmissionSectionUploadFileEditComponent,{size:"xl",backdrop:"static"});activeModal.componentInstance.availableAccessConditionOptions=this.availableAccessConditionOptions,activeModal.componentInstance.collectionId=this.collectionId,activeModal.componentInstance.collectionPolicyType=this.collectionPolicyType,activeModal.componentInstance.configMetadataForm=this.configMetadataForm,activeModal.componentInstance.fileData=this.fileData,activeModal.componentInstance.fileId=this.fileId,activeModal.componentInstance.fileIndex=this.fileIndex,activeModal.componentInstance.formId=this.formId,activeModal.componentInstance.sectionId=this.sectionId,activeModal.componentInstance.formMetadata=this.formMetadata,activeModal.componentInstance.pathCombiner=this.pathCombiner,activeModal.componentInstance.submissionId=this.submissionId}ngOnDestroy(){this.unsubscribeAll()}unsubscribeAll(){this.subscriptions.filter((sub=>Object(empty_util.b)(sub))).forEach((sub=>sub.unsubscribe()))}loadFormMetadata(){this.configMetadataForm.rows.forEach((row=>{row.fields.forEach((field=>{field.selectableMetadata.forEach((metadatum=>{this.formMetadata.push(metadatum.metadata)}))}))}))}deleteFile(){this.operationsBuilder.remove(this.pathCombiner.getPath()),this.subscriptions.push(this.operationsService.jsonPatchByResourceID(this.submissionService.getSubmissionObjectLinkName(),this.submissionId,this.pathCombiner.rootElement,this.pathCombiner.subRootElement).subscribe((()=>{this.uploadService.removeUploadedFile(this.submissionId,this.sectionId,this.fileId),this.processingDelete$.next(!1)})))}}section_upload_file_component_SubmissionSectionUploadFileComponent.\u0275fac=function SubmissionSectionUploadFileComponent_Factory(t){return new(t||section_upload_file_component_SubmissionSectionUploadFileComponent)(core["\u0275\u0275directiveInject"](core.ChangeDetectorRef),core["\u0275\u0275directiveInject"](form_service.a),core["\u0275\u0275directiveInject"](hal_endpoint_service.a),core["\u0275\u0275directiveInject"](ng_bootstrap.q),core["\u0275\u0275directiveInject"](json_patch_operations_builder.a),core["\u0275\u0275directiveInject"](submission_json_patch_operations_service.a),core["\u0275\u0275directiveInject"](submission_service.a),core["\u0275\u0275directiveInject"](section_upload_service_SectionUploadService))},section_upload_file_component_SubmissionSectionUploadFileComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:section_upload_file_component_SubmissionSectionUploadFileComponent,selectors:[["ds-submission-upload-section-file"]],viewQuery:function SubmissionSectionUploadFileComponent_Query(rf,ctx){if(1&rf&&core["\u0275\u0275viewQuery"](section_upload_file_edit_component_SubmissionSectionUploadFileEditComponent,1),2&rf){let _t;core["\u0275\u0275queryRefresh"](_t=core["\u0275\u0275loadQuery"]())&&(ctx.fileEditComp=_t.first)}},inputs:{availableAccessConditionOptions:"availableAccessConditionOptions",collectionId:"collectionId",collectionPolicyType:"collectionPolicyType",configMetadataForm:"configMetadataForm",fileId:"fileId",fileIndex:"fileIndex",fileName:"fileName",sectionId:"sectionId",submissionId:"submissionId"},features:[core["\u0275\u0275NgOnChangesFeature"]],decls:5,vars:1,consts:[[4,"ngIf"],["content",""],[1,"row"],[1,"col-md-2"],[3,"thumbnail"],[1,"col-md-10"],[1,"float-left","w-75"],[1,"text-muted"],[1,"float-right","w-15"],[3,"cssClasses","isBlank","bitstream","enableRequestACopy"],["aria-hidden","true",1,"fa","fa-download","fa-2x","text-normal"],[1,"btn","btn-link-focus",3,"title","click"],[1,"fa","fa-edit","fa-2x","text-normal"],[1,"btn","btn-link-focus",3,"title","disabled","click"],["class","fas fa-circle-notch fa-spin fa-2x text-danger",4,"ngIf"],["class","fa fa-trash fa-2x text-danger",4,"ngIf"],[1,"clearfix"],[3,"fileData"],[1,"fas","fa-circle-notch","fa-spin","fa-2x","text-danger"],[1,"fa","fa-trash","fa-2x","text-danger"],[1,"modal-header"],[1,"modal-title","text-danger"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-danger",3,"click"]],template:function SubmissionSectionUploadFileComponent_Template(rf,ctx){1&rf&&(core["\u0275\u0275template"](0,SubmissionSectionUploadFileComponent_ng_container_0_Template,57,31,"ng-container",0),core["\u0275\u0275text"](1,"\n\n"),core["\u0275\u0275template"](2,SubmissionSectionUploadFileComponent_ng_template_2_Template,32,12,"ng-template",null,1,core["\u0275\u0275templateRefExtractor"]),core["\u0275\u0275text"](4,"\n")),2&rf&&core["\u0275\u0275property"]("ngIf",ctx.fileData)},directives:[common.NgIf,thumbnail_component.a,file_download_link_component.a,section_upload_file_view_component_SubmissionSectionUploadFileViewComponent],pipes:[file_size_pipe.a,ngx_translate_core.d,common.AsyncPipe],styles:[""]});var submission_submit_component=__webpack_require__("THnG"),app_reducer=__webpack_require__("a318"),submission_import_external_component=__webpack_require__("RMpN"),submission_import_external_searchbar_component=__webpack_require__("3cpT"),submission_import_external_preview_component=__webpack_require__("20cJ"),submission_import_external_collection_component=__webpack_require__("6c/T"),submission_cc_license_data_service=__webpack_require__("8U9A"),submission_cc_license_url_data_service=__webpack_require__("UXhX"),ds_select_component=__webpack_require__("8aB6"),var_directive=__webpack_require__("O/5o");function SubmissionSectionCcLicensesComponent_span_6_Template(rf,ctx){1&rf&&(core["\u0275\u0275elementStart"](0,"span"),core["\u0275\u0275text"](1,"\n        "),core["\u0275\u0275element"](2,"ds-loading"),core["\u0275\u0275text"](3,"\n      "),core["\u0275\u0275elementEnd"]())}function SubmissionSectionCcLicensesComponent_span_8_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"span"),core["\u0275\u0275text"](1),core["\u0275\u0275elementEnd"]()),2&rf){const ctx_r1=core["\u0275\u0275nextContext"]();core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate1"]("\n        ",ctx_r1.getSelectedCcLicense().name,"\n      ")}}function SubmissionSectionCcLicensesComponent_span_10_ng_container_2_Template(rf,ctx){1&rf&&(core["\u0275\u0275elementContainerStart"](0),core["\u0275\u0275text"](1),core["\u0275\u0275pipe"](2,"translate"),core["\u0275\u0275elementContainerEnd"]()),2&rf&&(core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate1"]("\n          ",core["\u0275\u0275pipeBind1"](2,1,"submission.sections.ccLicense.change"),"\n        "))}function SubmissionSectionCcLicensesComponent_span_10_ng_container_4_Template(rf,ctx){1&rf&&(core["\u0275\u0275elementContainerStart"](0),core["\u0275\u0275text"](1),core["\u0275\u0275pipe"](2,"translate"),core["\u0275\u0275elementContainerEnd"]()),2&rf&&(core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate1"]("\n          ",core["\u0275\u0275pipeBind1"](2,1,"submission.sections.ccLicense.select"),"\n        "))}function SubmissionSectionCcLicensesComponent_span_10_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"span"),core["\u0275\u0275text"](1,"\n        "),core["\u0275\u0275template"](2,SubmissionSectionCcLicensesComponent_span_10_ng_container_2_Template,3,3,"ng-container",3),core["\u0275\u0275text"](3,"\n        "),core["\u0275\u0275template"](4,SubmissionSectionCcLicensesComponent_span_10_ng_container_4_Template,3,3,"ng-container",3),core["\u0275\u0275text"](5,"\n      "),core["\u0275\u0275elementEnd"]()),2&rf){const ctx_r2=core["\u0275\u0275nextContext"]();core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",ctx_r2.storedCcLicenseLink),core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",!ctx_r2.storedCcLicenseLink)}}function SubmissionSectionCcLicensesComponent_button_15_Template(rf,ctx){1&rf&&(core["\u0275\u0275elementStart"](0,"button",7),core["\u0275\u0275text"](1),core["\u0275\u0275pipe"](2,"translate"),core["\u0275\u0275elementEnd"]()),2&rf&&(core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate1"]("\n        ",core["\u0275\u0275pipeBind1"](2,1,"submission.sections.ccLicense.none"),"\n      "))}function SubmissionSectionCcLicensesComponent_button_17_Template(rf,ctx){if(1&rf){const _r11=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementStart"](0,"button",8),core["\u0275\u0275listener"]("click",(function SubmissionSectionCcLicensesComponent_button_17_Template_button_click_0_listener(){core["\u0275\u0275restoreView"](_r11);const license_r9=ctx.$implicit;return core["\u0275\u0275nextContext"]().selectCcLicense(license_r9)})),core["\u0275\u0275text"](1),core["\u0275\u0275elementEnd"]()}if(2&rf){const license_r9=ctx.$implicit;core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate1"]("\n        ",license_r9.name,"\n      ")}}function SubmissionSectionCcLicensesComponent_ng_container_22_div_2_ng_template_13_div_22_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"div",10),core["\u0275\u0275text"](1,"\n            "),core["\u0275\u0275elementStart"](2,"h5"),core["\u0275\u0275text"](3),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](4,"\n            "),core["\u0275\u0275element"](5,"div",20),core["\u0275\u0275text"](6,"\n          "),core["\u0275\u0275elementEnd"]()),2&rf){const value_r19=ctx.$implicit;core["\u0275\u0275advance"](3),core["\u0275\u0275textInterpolate1"]("\n              ",value_r19.label,"\n            "),core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("innerHTML",value_r19.description,core["\u0275\u0275sanitizeHtml"])}}function SubmissionSectionCcLicensesComponent_ng_container_22_div_2_ng_template_13_Template(rf,ctx){if(1&rf){const _r21=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275text"](0,"\n\n      "),core["\u0275\u0275elementStart"](1,"div"),core["\u0275\u0275text"](2,"\n\n        "),core["\u0275\u0275elementStart"](3,"div",15),core["\u0275\u0275text"](4,"\n          "),core["\u0275\u0275elementStart"](5,"div"),core["\u0275\u0275text"](6,"\n            "),core["\u0275\u0275elementStart"](7,"h4"),core["\u0275\u0275text"](8),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](9,"\n            "),core["\u0275\u0275element"](10,"div",16),core["\u0275\u0275text"](11,"\n          "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](12,"\n          "),core["\u0275\u0275elementStart"](13,"button",17),core["\u0275\u0275listener"]("click",(function SubmissionSectionCcLicensesComponent_ng_container_22_div_2_ng_template_13_Template_button_click_13_listener(){core["\u0275\u0275restoreView"](_r21);return core["\u0275\u0275nextContext"](3).closeInfoModal()})),core["\u0275\u0275text"](14,"\n            "),core["\u0275\u0275elementStart"](15,"span",18),core["\u0275\u0275text"](16,"\xd7"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](17,"\n          "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](18,"\n        "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](19,"\n\n        "),core["\u0275\u0275elementStart"](20,"div",19),core["\u0275\u0275text"](21,"\n          "),core["\u0275\u0275template"](22,SubmissionSectionCcLicensesComponent_ng_container_22_div_2_ng_template_13_div_22_Template,7,2,"div",9),core["\u0275\u0275text"](23,"\n        "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](24,"\n\n      "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](25,"\n\n    ")}if(2&rf){const field_r13=core["\u0275\u0275nextContext"]().$implicit;core["\u0275\u0275advance"](8),core["\u0275\u0275textInterpolate1"]("\n              ",field_r13.label,"\n            "),core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("innerHTML",field_r13.description,core["\u0275\u0275sanitizeHtml"]),core["\u0275\u0275advance"](12),core["\u0275\u0275property"]("ngForOf",field_r13.enums)}}function SubmissionSectionCcLicensesComponent_ng_container_22_div_2_ds_select_16_ng_container_2_span_2_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"span"),core["\u0275\u0275text"](1),core["\u0275\u0275elementEnd"]()),2&rf){const option_r25=core["\u0275\u0275nextContext"]().ngVar;core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate1"]("\n          ",option_r25.label,"\n        ")}}function SubmissionSectionCcLicensesComponent_ng_container_22_div_2_ds_select_16_ng_container_2_span_4_Template(rf,ctx){1&rf&&(core["\u0275\u0275elementStart"](0,"span"),core["\u0275\u0275text"](1),core["\u0275\u0275pipe"](2,"translate"),core["\u0275\u0275elementEnd"]()),2&rf&&(core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate1"]("\n          ",core["\u0275\u0275pipeBind1"](2,1,"submission.sections.ccLicense.option.select"),"\n        "))}function SubmissionSectionCcLicensesComponent_ng_container_22_div_2_ds_select_16_ng_container_2_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementContainerStart"](0,2),core["\u0275\u0275text"](1,"\n        "),core["\u0275\u0275template"](2,SubmissionSectionCcLicensesComponent_ng_container_22_div_2_ds_select_16_ng_container_2_span_2_Template,2,1,"span",3),core["\u0275\u0275text"](3,"\n        "),core["\u0275\u0275template"](4,SubmissionSectionCcLicensesComponent_ng_container_22_div_2_ds_select_16_ng_container_2_span_4_Template,3,3,"span",3),core["\u0275\u0275text"](5,"\n      "),core["\u0275\u0275elementContainerEnd"]()),2&rf){const option_r25=ctx.ngVar;core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",option_r25),core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",!option_r25)}}function SubmissionSectionCcLicensesComponent_ng_container_22_div_2_ds_select_16_button_8_Template(rf,ctx){if(1&rf){const _r31=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementStart"](0,"button",8),core["\u0275\u0275listener"]("click",(function SubmissionSectionCcLicensesComponent_ng_container_22_div_2_ds_select_16_button_8_Template_button_click_0_listener(){core["\u0275\u0275restoreView"](_r31);const option_r29=ctx.$implicit,field_r13=core["\u0275\u0275nextContext"](2).$implicit,ctx_r30=core["\u0275\u0275nextContext"](2);return ctx_r30.selectOption(ctx_r30.getSelectedCcLicense(),field_r13,option_r29)})),core["\u0275\u0275text"](1),core["\u0275\u0275elementEnd"]()}if(2&rf){const option_r29=ctx.$implicit;core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate1"]("\n            ",option_r29.label,"\n          ")}}function SubmissionSectionCcLicensesComponent_ng_container_22_div_2_ds_select_16_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"ds-select"),core["\u0275\u0275text"](1,"\n      "),core["\u0275\u0275template"](2,SubmissionSectionCcLicensesComponent_ng_container_22_div_2_ds_select_16_ng_container_2_Template,6,2,"ng-container",21),core["\u0275\u0275text"](3,"\n      "),core["\u0275\u0275elementContainerStart"](4,4),core["\u0275\u0275text"](5,"\n        "),core["\u0275\u0275elementStart"](6,"div",22),core["\u0275\u0275text"](7,"\n          "),core["\u0275\u0275template"](8,SubmissionSectionCcLicensesComponent_ng_container_22_div_2_ds_select_16_button_8_Template,2,1,"button",6),core["\u0275\u0275text"](9,"\n        "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](10,"\n      "),core["\u0275\u0275elementContainerEnd"](),core["\u0275\u0275text"](11,"\n    "),core["\u0275\u0275elementEnd"]()),2&rf){const field_r13=core["\u0275\u0275nextContext"]().$implicit,ctx_r16=core["\u0275\u0275nextContext"](2);core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngVar",ctx_r16.getSelectedOption(ctx_r16.getSelectedCcLicense(),field_r13)),core["\u0275\u0275advance"](6),core["\u0275\u0275property"]("ngForOf",field_r13.enums)}}function SubmissionSectionCcLicensesComponent_ng_container_22_div_2_ng_container_18_div_2_Template(rf,ctx){if(1&rf){const _r37=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementStart"](0,"div",24),core["\u0275\u0275text"](1,"\n        "),core["\u0275\u0275elementStart"](2,"div",25),core["\u0275\u0275listener"]("click",(function SubmissionSectionCcLicensesComponent_ng_container_22_div_2_ng_container_18_div_2_Template_div_click_2_listener(){core["\u0275\u0275restoreView"](_r37);const option_r35=ctx.$implicit,field_r13=core["\u0275\u0275nextContext"](2).$implicit,ctx_r36=core["\u0275\u0275nextContext"](2);return ctx_r36.selectOption(ctx_r36.getSelectedCcLicense(),field_r13,option_r35)})),core["\u0275\u0275text"](3,"\n          "),core["\u0275\u0275element"](4,"input",26),core["\u0275\u0275text"](5,"\n          "),core["\u0275\u0275elementStart"](6,"span"),core["\u0275\u0275text"](7),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](8,"\n        "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](9,"\n      "),core["\u0275\u0275elementEnd"]()}if(2&rf){const option_r35=ctx.$implicit,field_r13=core["\u0275\u0275nextContext"](2).$implicit,ctx_r34=core["\u0275\u0275nextContext"](2);core["\u0275\u0275advance"](4),core["\u0275\u0275propertyInterpolate"]("title",option_r35.label),core["\u0275\u0275property"]("checked",ctx_r34.isSelectedOption(ctx_r34.getSelectedCcLicense(),field_r13,option_r35)),core["\u0275\u0275advance"](3),core["\u0275\u0275textInterpolate"](option_r35.label)}}function SubmissionSectionCcLicensesComponent_ng_container_22_div_2_ng_container_18_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementContainerStart"](0),core["\u0275\u0275text"](1,"\n      "),core["\u0275\u0275template"](2,SubmissionSectionCcLicensesComponent_ng_container_22_div_2_ng_container_18_div_2_Template,10,3,"div",23),core["\u0275\u0275text"](3,"\n    "),core["\u0275\u0275elementContainerEnd"]()),2&rf){const field_r13=core["\u0275\u0275nextContext"]().$implicit;core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngForOf",field_r13.enums)}}function SubmissionSectionCcLicensesComponent_ng_container_22_div_2_Template(rf,ctx){if(1&rf){const _r42=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementStart"](0,"div",10),core["\u0275\u0275text"](1,"\n\n    "),core["\u0275\u0275elementStart"](2,"div",11),core["\u0275\u0275text"](3,"\n      "),core["\u0275\u0275elementStart"](4,"div"),core["\u0275\u0275text"](5),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](6,"\n      "),core["\u0275\u0275elementStart"](7,"button",12),core["\u0275\u0275listener"]("click",(function SubmissionSectionCcLicensesComponent_ng_container_22_div_2_Template_button_click_7_listener(){core["\u0275\u0275restoreView"](_r42);const _r14=core["\u0275\u0275reference"](14);return core["\u0275\u0275nextContext"](2).openInfoModal(_r14)})),core["\u0275\u0275text"](8,"\n        "),core["\u0275\u0275element"](9,"i",13),core["\u0275\u0275text"](10,"\n      "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](11,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](12,"\n\n    "),core["\u0275\u0275template"](13,SubmissionSectionCcLicensesComponent_ng_container_22_div_2_ng_template_13_Template,26,3,"ng-template",null,14,core["\u0275\u0275templateRefExtractor"]),core["\u0275\u0275text"](15,"\n\n    "),core["\u0275\u0275template"](16,SubmissionSectionCcLicensesComponent_ng_container_22_div_2_ds_select_16_Template,12,2,"ds-select",3),core["\u0275\u0275text"](17,"\n\n    "),core["\u0275\u0275template"](18,SubmissionSectionCcLicensesComponent_ng_container_22_div_2_ng_container_18_Template,4,1,"ng-container",3),core["\u0275\u0275text"](19,"\n\n  "),core["\u0275\u0275elementEnd"]()}if(2&rf){const field_r13=ctx.$implicit;core["\u0275\u0275advance"](4),core["\u0275\u0275classMapInterpolate1"]("font-weight-bold ",field_r13.id,""),core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate1"]("\n        ",field_r13.label,"\n      "),core["\u0275\u0275advance"](11),core["\u0275\u0275property"]("ngIf",(null==field_r13.enums?null:field_r13.enums.length)>5),core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",(null==field_r13.enums?null:field_r13.enums.length)<=5)}}function SubmissionSectionCcLicensesComponent_ng_container_22_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementContainerStart"](0),core["\u0275\u0275text"](1,"\n\n  "),core["\u0275\u0275template"](2,SubmissionSectionCcLicensesComponent_ng_container_22_div_2_Template,20,6,"div",9),core["\u0275\u0275text"](3,"\n\n"),core["\u0275\u0275elementContainerEnd"]()),2&rf){const ctx_r5=core["\u0275\u0275nextContext"]();core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngForOf",ctx_r5.getSelectedCcLicense().fields)}}function SubmissionSectionCcLicensesComponent_ng_container_24_ng_container_2_div_2_Template(rf,ctx){1&rf&&(core["\u0275\u0275elementStart"](0,"div"),core["\u0275\u0275text"](1,"\n      "),core["\u0275\u0275element"](2,"ds-loading"),core["\u0275\u0275text"](3,"\n    "),core["\u0275\u0275elementEnd"]())}function SubmissionSectionCcLicensesComponent_ng_container_24_ng_container_2_div_4_Template(rf,ctx){if(1&rf){const _r48=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementStart"](0,"div",29),core["\u0275\u0275text"](1,"\n      "),core["\u0275\u0275elementStart"](2,"div"),core["\u0275\u0275text"](3),core["\u0275\u0275pipe"](4,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](5,"\n      "),core["\u0275\u0275elementStart"](6,"a",30),core["\u0275\u0275text"](7),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](8,"\n      "),core["\u0275\u0275elementStart"](9,"div",31),core["\u0275\u0275text"](10,"\n        "),core["\u0275\u0275elementStart"](11,"div",25),core["\u0275\u0275listener"]("click",(function SubmissionSectionCcLicensesComponent_ng_container_24_ng_container_2_div_4_Template_div_click_11_listener(){core["\u0275\u0275restoreView"](_r48);const ctx_r47=core["\u0275\u0275nextContext"](3);return ctx_r47.setAccepted(!ctx_r47.accepted)})),core["\u0275\u0275text"](12,"\n          "),core["\u0275\u0275element"](13,"input",32),core["\u0275\u0275text"](14,"\n          "),core["\u0275\u0275elementStart"](15,"span"),core["\u0275\u0275text"](16),core["\u0275\u0275pipe"](17,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](18,"\n        "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](19,"\n      "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](20,"\n    "),core["\u0275\u0275elementEnd"]()}if(2&rf){const licenseLink_r44=core["\u0275\u0275nextContext"]().ngVar,ctx_r46=core["\u0275\u0275nextContext"](2);core["\u0275\u0275advance"](3),core["\u0275\u0275textInterpolate1"]("\n        ",core["\u0275\u0275pipeBind1"](4,5,"submission.sections.ccLicense.link"),"\n      "),core["\u0275\u0275advance"](3),core["\u0275\u0275propertyInterpolate"]("href",licenseLink_r44,core["\u0275\u0275sanitizeUrl"]),core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate1"]("\n        ",licenseLink_r44,"\n      "),core["\u0275\u0275advance"](6),core["\u0275\u0275property"]("checked",ctx_r46.accepted),core["\u0275\u0275advance"](3),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](17,7,"submission.sections.ccLicense.confirmation"))}}function SubmissionSectionCcLicensesComponent_ng_container_24_ng_container_2_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementContainerStart"](0),core["\u0275\u0275text"](1,"\n    "),core["\u0275\u0275template"](2,SubmissionSectionCcLicensesComponent_ng_container_24_ng_container_2_div_2_Template,4,0,"div",3),core["\u0275\u0275text"](3,"\n    "),core["\u0275\u0275template"](4,SubmissionSectionCcLicensesComponent_ng_container_24_ng_container_2_div_4_Template,21,9,"div",28),core["\u0275\u0275text"](5,"\n  "),core["\u0275\u0275elementContainerEnd"]()),2&rf){const licenseLink_r44=ctx.ngVar;core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",!licenseLink_r44),core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",licenseLink_r44)}}function SubmissionSectionCcLicensesComponent_ng_container_24_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementContainerStart"](0),core["\u0275\u0275text"](1,"\n  "),core["\u0275\u0275template"](2,SubmissionSectionCcLicensesComponent_ng_container_24_ng_container_2_Template,6,2,"ng-container",27),core["\u0275\u0275pipe"](3,"async"),core["\u0275\u0275text"](4,"\n"),core["\u0275\u0275elementContainerEnd"]()),2&rf){const ctx_r6=core["\u0275\u0275nextContext"]();core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngVar",core["\u0275\u0275pipeBind1"](3,1,ctx_r6.getCcLicenseLink$()))}}let submission_section_cc_licenses_component_SubmissionSectionCcLicensesComponent=class extends section_model_SectionModelComponent{constructor(modalService,sectionService,submissionCcLicensesDataService,submissionCcLicenseUrlDataService,operationsBuilder,injectedCollectionId,injectedSectionData,injectedSubmissionId){super(injectedCollectionId,injectedSectionData,injectedSubmissionId),this.modalService=modalService,this.sectionService=sectionService,this.submissionCcLicensesDataService=submissionCcLicensesDataService,this.submissionCcLicenseUrlDataService=submissionCcLicenseUrlDataService,this.operationsBuilder=operationsBuilder,this.injectedCollectionId=injectedCollectionId,this.injectedSectionData=injectedSectionData,this.injectedSubmissionId=injectedSubmissionId,this.isLoading=!0,this.subscriptions=[]}get storedCcLicenseLink(){return this.data.uri}get accepted(){return void 0===this.data.accepted?!!this.data.uri:this.data.accepted}get data(){return this.sectionData.data}selectCcLicense(ccLicense){this.getSelectedCcLicense()&&this.getSelectedCcLicense().id===ccLicense.id||(this.setAccepted(!1),this.updateSectionData({ccLicense:{id:ccLicense.id,fields:{}},uri:void 0}))}getSelectedCcLicense(){return this.submissionCcLicenses&&this.data.ccLicense?this.submissionCcLicenses.filter((ccLicense=>ccLicense.id===this.data.ccLicense.id))[0]:null}selectOption(ccLicense,field,option){this.isSelectedOption(ccLicense,field,option)||this.updateSectionData({ccLicense:{id:ccLicense.id,fields:Object.assign({},this.data.ccLicense.fields,{[field.id]:option})},accepted:!1})}getSelectedOption(ccLicense,field){return this.data.ccLicense.fields[field.id]}isSelectedOption(ccLicense,field,option){return this.getSelectedOption(ccLicense,field)&&this.getSelectedOption(ccLicense,field).id===option.id}getCcLicenseLink$(){if(this.storedCcLicenseLink)return Object(of.a)(this.storedCcLicenseLink);if(!this.getSelectedCcLicense()||this.getSelectedCcLicense().fields.some((field=>!this.getSelectedOption(this.getSelectedCcLicense(),field))))return;const selectedCcLicense=this.getSelectedCcLicense();return this.submissionCcLicenseUrlDataService.getCcLicenseLink(selectedCcLicense,new Map(selectedCcLicense.fields.map((field=>[field,this.getSelectedOption(selectedCcLicense,field)]))))}openInfoModal(content){this.modalRef=this.modalService.open(content)}closeInfoModal(){this.modalRef.close()}getSectionStatus(){return Object(of.a)(this.accepted)}onSectionDestroy(){this.subscriptions.forEach((subscription=>subscription.unsubscribe()))}onSectionInit(){this.pathCombiner=new json_patch_operation_path_combiner.a("sections",this.sectionData.id),this.subscriptions.push(this.sectionService.getSectionState(this.submissionId,this.sectionData.id,sections_type.a.CcLicense).pipe(Object(filter.a)((sectionState=>Object(empty_util.e)(sectionState)&&(Object(empty_util.e)(sectionState.data)||Object(empty_util.e)(sectionState.errorsToShow)))),Object(distinctUntilChanged.a)(),Object(map.a)((sectionState=>sectionState.data))).subscribe((data=>{if(this.data.accepted!==data.accepted){const path=this.pathCombiner.getPath("uri");data.accepted?this.getCcLicenseLink$().pipe(Object(take.a)(1)).subscribe((link=>{this.operationsBuilder.add(path,link.toString(),!1,!0)})):this.data.uri&&this.operationsBuilder.remove(path)}this.sectionData.data=data})),this.submissionCcLicensesDataService.findAll({elementsPerPage:9999}).pipe(Object(operators.i)(),Object(operators.o)(),Object(map.a)((list=>list.page))).subscribe((licenses=>this.submissionCcLicenses=licenses)))}setAccepted(accepted){this.updateSectionData({accepted:accepted}),this.updateSectionStatus()}updateSectionData(data){this.sectionService.updateSectionData(this.submissionId,this.sectionData.id,Object.assign({},this.data,data))}};submission_section_cc_licenses_component_SubmissionSectionCcLicensesComponent.\u0275fac=function SubmissionSectionCcLicensesComponent_Factory(t){return new(t||submission_section_cc_licenses_component_SubmissionSectionCcLicensesComponent)(core["\u0275\u0275directiveInject"](ng_bootstrap.q),core["\u0275\u0275directiveInject"](sections_service.a),core["\u0275\u0275directiveInject"](submission_cc_license_data_service.a),core["\u0275\u0275directiveInject"](submission_cc_license_url_data_service.a),core["\u0275\u0275directiveInject"](json_patch_operations_builder.a),core["\u0275\u0275directiveInject"]("collectionIdProvider"),core["\u0275\u0275directiveInject"]("sectionDataProvider"),core["\u0275\u0275directiveInject"]("submissionIdProvider"))},submission_section_cc_licenses_component_SubmissionSectionCcLicensesComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:submission_section_cc_licenses_component_SubmissionSectionCcLicensesComponent,selectors:[["ds-submission-section-cc-licenses"]],features:[core["\u0275\u0275InheritDefinitionFeature"]],decls:26,vars:8,consts:[[1,"mb-4","ccLicense-select"],[3,"disabled"],[1,"selection"],[4,"ngIf"],[1,"menu"],["class","dropdown-item disabled",4,"ngIf"],["class","dropdown-item",3,"click",4,"ngFor","ngForOf"],[1,"dropdown-item","disabled"],[1,"dropdown-item",3,"click"],["class","mb-4",4,"ngFor","ngForOf"],[1,"mb-4"],[1,"d-flex","flex-row"],[1,"btn","btn-outline-info","btn-sm","ml-2",3,"click"],[1,"fas","fa-question"],["infoModal",""],[1,"modal-header","mb-4"],[3,"innerHTML"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"font-weight-light",3,"innerHTML"],["class","selection",4,"ngVar"],[1,"options-select-menu","overflow-auto"],["class","d-flex flex-row m-1",4,"ngFor","ngForOf"],[1,"d-flex","flex-row","m-1"],[3,"click"],["type","radio",1,"mr-1",3,"title","checked"],[4,"ngVar"],["class","mt-2 p-4 bg-light text-dark",4,"ngIf"],[1,"mt-2","p-4","bg-light","text-dark"],["target","_blank","rel","noopener noreferrer",1,"license-link",3,"href"],[1,"m-2"],["type","checkbox","title","accepted",3,"checked"]],template:function SubmissionSectionCcLicensesComponent_Template(rf,ctx){1&rf&&(core["\u0275\u0275elementStart"](0,"div",0),core["\u0275\u0275text"](1,"\n  "),core["\u0275\u0275elementStart"](2,"ds-select",1),core["\u0275\u0275text"](3,"\n\n    "),core["\u0275\u0275elementContainerStart"](4,2),core["\u0275\u0275text"](5,"\n      "),core["\u0275\u0275template"](6,SubmissionSectionCcLicensesComponent_span_6_Template,4,0,"span",3),core["\u0275\u0275text"](7,"\n      "),core["\u0275\u0275template"](8,SubmissionSectionCcLicensesComponent_span_8_Template,2,1,"span",3),core["\u0275\u0275text"](9,"\n      "),core["\u0275\u0275template"](10,SubmissionSectionCcLicensesComponent_span_10_Template,6,2,"span",3),core["\u0275\u0275text"](11,"\n    "),core["\u0275\u0275elementContainerEnd"](),core["\u0275\u0275text"](12,"\n\n    "),core["\u0275\u0275elementContainerStart"](13,4),core["\u0275\u0275text"](14,"\n      "),core["\u0275\u0275template"](15,SubmissionSectionCcLicensesComponent_button_15_Template,3,3,"button",5),core["\u0275\u0275text"](16,"\n      "),core["\u0275\u0275template"](17,SubmissionSectionCcLicensesComponent_button_17_Template,2,1,"button",6),core["\u0275\u0275text"](18,"\n    "),core["\u0275\u0275elementContainerEnd"](),core["\u0275\u0275text"](19,"\n\n  "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](20,"\n"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](21,"\n\n"),core["\u0275\u0275template"](22,SubmissionSectionCcLicensesComponent_ng_container_22_Template,4,1,"ng-container",3),core["\u0275\u0275text"](23,"\n\n"),core["\u0275\u0275template"](24,SubmissionSectionCcLicensesComponent_ng_container_24_Template,5,3,"ng-container",3),core["\u0275\u0275text"](25,"\n")),2&rf&&(core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("disabled",!ctx.submissionCcLicenses),core["\u0275\u0275advance"](4),core["\u0275\u0275property"]("ngIf",!ctx.submissionCcLicenses),core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",ctx.getSelectedCcLicense()),core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",ctx.submissionCcLicenses&&!ctx.getSelectedCcLicense()),core["\u0275\u0275advance"](5),core["\u0275\u0275property"]("ngIf",0==(null==ctx.submissionCcLicenses?null:ctx.submissionCcLicenses.length)),core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngForOf",ctx.submissionCcLicenses),core["\u0275\u0275advance"](5),core["\u0275\u0275property"]("ngIf",ctx.getSelectedCcLicense()),core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",ctx.getCcLicenseLink$()))},directives:[ds_select_component.a,common.NgIf,common.NgForOf,loading_component.a,var_directive.a],pipes:[ngx_translate_core.d,common.AsyncPipe],styles:[".options-select-menu[_ngcontent-%COMP%]{max-height:25vh}"]}),submission_section_cc_licenses_component_SubmissionSectionCcLicensesComponent=Object(tslib.__decorate)([Object(sections_decorator.a)(sections_type.a.CcLicense),Object(tslib.__metadata)("design:paramtypes",[ng_bootstrap.q,sections_service.a,submission_cc_license_data_service.a,submission_cc_license_url_data_service.a,json_patch_operations_builder.a,String,Object,String])],submission_section_cc_licenses_component_SubmissionSectionCcLicensesComponent);var journal_entities_module=__webpack_require__("N0eT"),research_entities_module=__webpack_require__("udvk"),themed_submission_edit_component=__webpack_require__("YoQ9"),themed_submission_submit_component=__webpack_require__("Ahb/"),themed_submission_import_external_component=__webpack_require__("qK5G"),form_module=__webpack_require__("kcqd");class section_accesses_service_SectionAccessesService{constructor(store){this.store=store}getAccessesData(submissionId,sectionId){return this.store.select(Object(selectors.d)(submissionId,sectionId)).pipe(Object(filter.a)((state=>Object(empty_util.h)(state))),Object(distinctUntilChanged.a)())}}section_accesses_service_SectionAccessesService.\u0275fac=function SectionAccessesService_Factory(t){return new(t||section_accesses_service_SectionAccessesService)(core["\u0275\u0275inject"](ngrx_store.i))},section_accesses_service_SectionAccessesService.\u0275prov=core["\u0275\u0275defineInjectable"]({token:section_accesses_service_SectionAccessesService,factory:section_accesses_service_SectionAccessesService.\u0275fac});const ACCESS_FORM_CHECKBOX_CONFIG={id:"discoverable",name:"discoverable"},ACCESS_FORM_CHECKBOX_LAYOUT={element:{container:"custom-control custom-checkbox pl-1",control:"custom-control-input",label:"custom-control-label pt-1"}},ACCESS_CONDITION_GROUP_CONFIG={id:"accessConditionGroup",group:[]},ACCESS_CONDITION_GROUP_LAYOUT={element:{host:"form-group access-condition-group col",container:"pl-1 pr-1",control:"form-row "}},ACCESS_CONDITIONS_FORM_ARRAY_CONFIG={id:"accessCondition",groupFactory:null},ACCESS_CONDITIONS_FORM_ARRAY_LAYOUT={grid:{group:"form-row pt-4"}},FORM_ACCESS_CONDITION_TYPE_CONFIG={id:"name",label:"submission.sections.accesses.form.access-condition-label",hint:"submission.sections.accesses.form.access-condition-hint",options:[]},FORM_ACCESS_CONDITION_TYPE_LAYOUT={element:{host:"col-12",label:"col-form-label name-label"}},FORM_ACCESS_CONDITION_START_DATE_CONFIG={id:"startDate",label:"submission.sections.accesses.form.from-label",hint:"submission.sections.accesses.form.from-hint",placeholder:"submission.sections.accesses.form.from-placeholder",inline:!1,toggleIcon:"far fa-calendar-alt",relations:[{match:fesm2015_core.Q,operator:fesm2015_core.R,when:[]}],required:!0,validators:{required:null},errorMessages:{required:"submission.sections.accesses.form.date-required-from"}},FORM_ACCESS_CONDITION_START_DATE_LAYOUT={element:{label:"col-form-label"},grid:{host:"col-6"}},FORM_ACCESS_CONDITION_END_DATE_CONFIG={id:"endDate",label:"submission.sections.accesses.form.until-label",hint:"submission.sections.accesses.form.until-hint",placeholder:"submission.sections.accesses.form.until-placeholder",inline:!1,toggleIcon:"far fa-calendar-alt",relations:[{match:fesm2015_core.Q,operator:fesm2015_core.R,when:[]}],required:!0,validators:{required:null},errorMessages:{required:"submission.sections.accesses.form.date-required-until"}},FORM_ACCESS_CONDITION_END_DATE_LAYOUT={element:{label:"col-form-label"},grid:{host:"col-6"}};let submission_accesses_config_service_SubmissionAccessesConfigService=class extends config_service.a{constructor(requestService,rdbService,store,objectCache,halService,notificationsService,http,comparator){super(requestService,rdbService,null,objectCache,halService,notificationsService,http,comparator,"submissionaccessoptions"),this.requestService=requestService,this.rdbService=rdbService,this.store=store,this.objectCache=objectCache,this.halService=halService,this.notificationsService=notificationsService,this.http=http,this.comparator=comparator}findByHref(href,useCachedVersionIfAvailable=!0,reRequestOnStale=!0,...linksToFollow){return super.findByHref(href,useCachedVersionIfAvailable,reRequestOnStale,...linksToFollow)}};submission_accesses_config_service_SubmissionAccessesConfigService.\u0275fac=function SubmissionAccessesConfigService_Factory(t){return new(t||submission_accesses_config_service_SubmissionAccessesConfigService)(core["\u0275\u0275inject"](request_service.a),core["\u0275\u0275inject"](remote_data_build_service.a),core["\u0275\u0275inject"](ngrx_store.i),core["\u0275\u0275inject"](object_cache_service.a),core["\u0275\u0275inject"](hal_endpoint_service.a),core["\u0275\u0275inject"](notifications_service.a),core["\u0275\u0275inject"](http.c),core["\u0275\u0275inject"](default_change_analyzer_service.a))},submission_accesses_config_service_SubmissionAccessesConfigService.\u0275prov=core["\u0275\u0275defineInjectable"]({token:submission_accesses_config_service_SubmissionAccessesConfigService,factory:submission_accesses_config_service_SubmissionAccessesConfigService.\u0275fac}),submission_accesses_config_service_SubmissionAccessesConfigService=Object(tslib.__decorate)([Object(build_decorators.d)(config_type.a),Object(tslib.__metadata)("design:paramtypes",[request_service.a,remote_data_build_service.a,ngrx_store.i,object_cache_service.a,hal_endpoint_service.a,notifications_service.a,http.c,default_change_analyzer_service.a])],submission_accesses_config_service_SubmissionAccessesConfigService);const section_accesses_component_c0=["formRef"];function SubmissionSectionAccessesComponent_ds_form_0_Template(rf,ctx){if(1&rf){const _r3=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementStart"](0,"ds-form",1,2),core["\u0275\u0275listener"]("dfChange",(function SubmissionSectionAccessesComponent_ds_form_0_Template_ds_form_dfChange_0_listener($event){core["\u0275\u0275restoreView"](_r3);return core["\u0275\u0275nextContext"]().onChange($event)}))("removeArrayItem",(function SubmissionSectionAccessesComponent_ds_form_0_Template_ds_form_removeArrayItem_0_listener($event){core["\u0275\u0275restoreView"](_r3);return core["\u0275\u0275nextContext"]().onRemove($event)})),core["\u0275\u0275elementEnd"]()}if(2&rf){const ctx_r0=core["\u0275\u0275nextContext"]();core["\u0275\u0275property"]("formId",ctx_r0.formId)("formModel",ctx_r0.formModel)("displaySubmit",!1)("displayCancel",!1)}}let section_accesses_component_SubmissionSectionAccessesComponent=class extends section_model_SectionModelComponent{constructor(sectionService,formBuilderService,accessesConfigService,accessesService,formOperationsService,operationsBuilder,formService,translate,operationsService,injectedSectionData,injectedSubmissionId){super(void 0,injectedSectionData,injectedSubmissionId),this.sectionService=sectionService,this.formBuilderService=formBuilderService,this.accessesConfigService=accessesConfigService,this.accessesService=accessesService,this.formOperationsService=formOperationsService,this.operationsBuilder=operationsBuilder,this.formService=formService,this.translate=translate,this.operationsService=operationsService,this.injectedSectionData=injectedSectionData,this.injectedSubmissionId=injectedSubmissionId,this.subs=[]}initModelData(formModel){this.accessesData.accessConditions.forEach(((accessCondition,index)=>{Array.of("name","startDate","endDate").filter((key=>accessCondition.hasOwnProperty(key)&&Object(empty_util.e)(accessCondition[key]))).forEach((key=>{const metadataModel=this.formBuilderService.findById(key,formModel,index);if(metadataModel)if(metadataModel.type===fesm2015_core.g){const date=new Date(accessCondition[key]);metadataModel.value={year:date.getUTCFullYear(),month:date.getUTCMonth()+1,day:date.getUTCDate()}}else metadataModel.value=accessCondition[key]}))}))}onChange(event){if(event.model.type===fesm2015_core.e){const path=this.formOperationsService.getFieldPathSegmentedFromChangeEvent(event),value=this.formOperationsService.getFieldValueFromChangeEvent(event);this.operationsBuilder.replace(this.pathCombiner.getPath(path),value.value,!0)}else{if(event.model.id===FORM_ACCESS_CONDITION_TYPE_CONFIG.id){const startDateControl=event.control.parent.get("startDate"),endDateControl=event.control.parent.get("endDate");null==startDateControl||startDateControl.markAsUntouched(),null==endDateControl||endDateControl.markAsUntouched(),null==startDateControl||startDateControl.setValue(null),null==endDateControl||endDateControl.setValue(null),event.control.parent.markAsDirty()}this.formService.validateAllFormFields(this.formRef.formGroup),this.formService.isValid(this.formId).pipe(Object(take.a)(1),Object(filter.a)((isValid=>isValid)),Object(mergeMap.a)((()=>this.formService.getFormData(this.formId))),Object(take.a)(1)).subscribe((formData=>{const accessConditionsToSave=[];formData.accessCondition.map((accessConditions=>accessConditions.accessConditionGroup)).filter((accessCondition=>Object(empty_util.e)(accessCondition))).forEach((accessCondition=>{let accessConditionOpt;if(this.availableAccessConditionOptions.filter((element=>Object(empty_util.g)(accessCondition.name)&&element.name===accessCondition.name[0].value)).forEach((element=>accessConditionOpt=element)),accessConditionOpt){const currentAccessCondition=Object.assign({},accessCondition);if(currentAccessCondition.name=this.retrieveValueFromField(accessCondition.name),accessConditionOpt.hasStartDate){if(accessCondition.startDate){const startDate=this.retrieveValueFromField(accessCondition.startDate);currentAccessCondition.startDate=Object(date_util.a)(startDate)}}else delete currentAccessCondition.startDate;if(accessConditionOpt.hasEndDate){if(accessCondition.endDate){const endDate=this.retrieveValueFromField(accessCondition.endDate);currentAccessCondition.endDate=Object(date_util.a)(endDate)}}else delete currentAccessCondition.endDate;accessConditionsToSave.push(currentAccessCondition)}})),this.operationsBuilder.add(this.pathCombiner.getPath("accessConditions"),accessConditionsToSave,!0)}))}}onRemove(event){const fieldPath="accessConditions/"+this.formOperationsService.getArrayIndexFromEvent(event);this.operationsBuilder.remove(this.pathCombiner.getPath(fieldPath))}onSectionDestroy(){this.subs.filter((subscription=>Object(empty_util.b)(subscription))).forEach((subscription=>subscription.unsubscribe()))}onSectionInit(){this.pathCombiner=new json_patch_operation_path_combiner.a("sections",this.sectionData.id),this.formId=this.formService.getUniqueId(this.sectionData.id);const config$=this.accessesConfigService.findByHref(this.sectionData.config,!0,!1).pipe(Object(operators.i)(),Object(map.a)((config=>config.payload))),accessData$=this.accessesService.getAccessesData(this.submissionId,this.sectionData.id);Object(combineLatest.a)([config$,accessData$]).subscribe((([config,accessData])=>{this.availableAccessConditionOptions=Object(empty_util.e)(config.accessConditionOptions)?config.accessConditionOptions:[],this.canChangeDiscoverable=!!config.canChangeDiscoverable,this.accessesData=accessData,this.formModel=this.buildFileEditForm()}))}getSectionStatus(){return Object(of.a)(!0)}buildFileEditForm(){const formModel=[];if(this.canChangeDiscoverable){const discoverableCheckboxConfig=Object.assign({},ACCESS_FORM_CHECKBOX_CONFIG,{label:this.translate.instant("submission.sections.accesses.form.discoverable-label"),hint:this.translate.instant("submission.sections.accesses.form.discoverable-description"),value:this.accessesData.discoverable});formModel.push(new fesm2015_core.r(discoverableCheckboxConfig,ACCESS_FORM_CHECKBOX_LAYOUT))}const accessConditionTypeModelConfig=Object.assign({},FORM_ACCESS_CONDITION_TYPE_CONFIG),accessConditionsArrayConfig=Object.assign({},ACCESS_CONDITIONS_FORM_ARRAY_CONFIG),accessConditionTypeOptions=[];for(const accessCondition of this.availableAccessConditionOptions)accessConditionTypeOptions.push({label:accessCondition.name,value:accessCondition.name});accessConditionTypeModelConfig.options=accessConditionTypeOptions;const hasStart=[],hasEnd=[],hasGroups=[];this.availableAccessConditionOptions.forEach((condition=>{const showStart=!0===condition.hasStartDate,showEnd=!0===condition.hasEndDate,showGroups=showStart||showEnd;showStart&&hasStart.push({id:"name",value:condition.name}),showEnd&&hasEnd.push({id:"name",value:condition.name}),showGroups&&hasGroups.push({id:"name",value:condition.name})}));const confStart={relations:[{match:fesm2015_core.Q,operator:fesm2015_core.R,when:hasStart}]},confEnd={relations:[{match:fesm2015_core.Q,operator:fesm2015_core.R,when:hasEnd}]};return accessConditionsArrayConfig.groupFactory=()=>{const type=new fesm2015_core.N(accessConditionTypeModelConfig,FORM_ACCESS_CONDITION_TYPE_LAYOUT),startDateConfig=Object.assign({},FORM_ACCESS_CONDITION_START_DATE_CONFIG,confStart),endDateConfig=Object.assign({},FORM_ACCESS_CONDITION_END_DATE_CONFIG,confEnd),startDate=new fesm2015_core.t(startDateConfig,FORM_ACCESS_CONDITION_START_DATE_LAYOUT),endDate=new fesm2015_core.t(endDateConfig,FORM_ACCESS_CONDITION_END_DATE_LAYOUT),accessConditionGroupConfig=Object.assign({},ACCESS_CONDITION_GROUP_CONFIG);return accessConditionGroupConfig.group=[type],hasStart.length>0&&accessConditionGroupConfig.group.push(startDate),hasEnd.length>0&&accessConditionGroupConfig.group.push(endDate),[new fesm2015_core.D(accessConditionGroupConfig,ACCESS_CONDITION_GROUP_LAYOUT)]},accessConditionsArrayConfig.initialCount=Object(empty_util.e)(this.accessesData.accessConditions)?this.accessesData.accessConditions.length:1,formModel.push(new fesm2015_core.w(accessConditionsArrayConfig,ACCESS_CONDITIONS_FORM_ARRAY_LAYOUT)),this.initModelData(formModel),formModel}retrieveValueFromField(field){const temp=Array.isArray(field)?field[0]:field;return temp?temp.value:void 0}};section_accesses_component_SubmissionSectionAccessesComponent.\u0275fac=function SubmissionSectionAccessesComponent_Factory(t){return new(t||section_accesses_component_SubmissionSectionAccessesComponent)(core["\u0275\u0275directiveInject"](sections_service.a),core["\u0275\u0275directiveInject"](form_builder_service.a),core["\u0275\u0275directiveInject"](submission_accesses_config_service_SubmissionAccessesConfigService),core["\u0275\u0275directiveInject"](section_accesses_service_SectionAccessesService),core["\u0275\u0275directiveInject"](section_form_operations_service.a),core["\u0275\u0275directiveInject"](json_patch_operations_builder.a),core["\u0275\u0275directiveInject"](form_service.a),core["\u0275\u0275directiveInject"](ngx_translate_core.e),core["\u0275\u0275directiveInject"](submission_json_patch_operations_service.a),core["\u0275\u0275directiveInject"]("sectionDataProvider"),core["\u0275\u0275directiveInject"]("submissionIdProvider"))},section_accesses_component_SubmissionSectionAccessesComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:section_accesses_component_SubmissionSectionAccessesComponent,selectors:[["ds-section-accesses"]],viewQuery:function SubmissionSectionAccessesComponent_Query(rf,ctx){if(1&rf&&core["\u0275\u0275viewQuery"](section_accesses_component_c0,1),2&rf){let _t;core["\u0275\u0275queryRefresh"](_t=core["\u0275\u0275loadQuery"]())&&(ctx.formRef=_t.first)}},features:[core["\u0275\u0275InheritDefinitionFeature"]],decls:2,vars:1,consts:[[3,"formId","formModel","displaySubmit","displayCancel","dfChange","removeArrayItem",4,"ngIf"],[3,"formId","formModel","displaySubmit","displayCancel","dfChange","removeArrayItem"],["formRef","formComponent"]],template:function SubmissionSectionAccessesComponent_Template(rf,ctx){1&rf&&(core["\u0275\u0275template"](0,SubmissionSectionAccessesComponent_ds_form_0_Template,2,4,"ds-form",0),core["\u0275\u0275text"](1,"\n")),2&rf&&core["\u0275\u0275property"]("ngIf",!!ctx.formModel)},directives:[common.NgIf,form_component.a],styles:[".access-condition-group{position:relative;top:-2.3rem;margin-bottom:-2.3rem}"]}),section_accesses_component_SubmissionSectionAccessesComponent=Object(tslib.__decorate)([Object(sections_decorator.a)(sections_type.a.AccessesCondition),Object(tslib.__metadata)("design:paramtypes",[sections_service.a,form_builder_service.a,submission_accesses_config_service_SubmissionAccessesConfigService,section_accesses_service_SectionAccessesService,section_form_operations_service.a,json_patch_operations_builder.a,form_service.a,ngx_translate_core.e,submission_json_patch_operations_service.a,Object,String])],section_accesses_component_SubmissionSectionAccessesComponent);var alert_component=__webpack_require__("VYMa");const ENTRY_COMPONENTS=[section_upload_component_SubmissionSectionUploadComponent,section_form_component_SubmissionSectionFormComponent,section_license_component_SubmissionSectionLicenseComponent,submission_section_cc_licenses_component_SubmissionSectionCcLicensesComponent,section_accesses_component_SubmissionSectionAccessesComponent,section_upload_file_edit_component_SubmissionSectionUploadFileEditComponent];sections_directive.a,submission_edit_component.SubmissionEditComponent,themed_submission_edit_component.a,submission_form_section_add_component.a,submission_form_collection_component.a,submission_form_component.a,submission_form_footer_component.a,submission_submit_component.SubmissionSubmitComponent,themed_submission_submit_component.a,submission_upload_files_component.a,section_container_component.a,submission_import_external_component.SubmissionImportExternalComponent,themed_submission_import_external_component.a,submission_import_external_searchbar_component.a,submission_import_external_preview_component.a,submission_import_external_collection_component.a;class SubmissionModule{static withEntryComponents(){return{ngModule:SubmissionModule,providers:ENTRY_COMPONENTS.map((component=>({provide:component})))}}}SubmissionModule.\u0275fac=function SubmissionModule_Factory(t){return new(t||SubmissionModule)},SubmissionModule.\u0275mod=core["\u0275\u0275defineNgModule"]({type:SubmissionModule}),SubmissionModule.\u0275inj=core["\u0275\u0275defineInjector"]({providers:[section_upload_service_SectionUploadService,sections_service.a,submission_uploads_config_service_SubmissionUploadsConfigService,submission_accesses_config_service_SubmissionAccessesConfigService,section_accesses_service_SectionAccessesService],imports:[[common.CommonModule,core_module.a.forRoot(),shared_module.a,ngrx_store.k.forFeature("submission",submission_reducers.a,app_reducer.d),ngrx_effects.c.forFeature(submissionEffects),journal_entities_module.a.withEntryComponents(),research_entities_module.a.withEntryComponents(),form_module.a,ng_bootstrap.b,ng_bootstrap.r]]}),core["\u0275\u0275setComponentScope"](section_upload_component_SubmissionSectionUploadComponent,[alert_component.a,common.NgIf,submission_section_upload_access_conditions_component_SubmissionSectionUploadAccessConditionsComponent,common.NgForOf,section_upload_file_component_SubmissionSectionUploadFileComponent],[ngx_translate_core.d,common.AsyncPipe])},fBXw:function(module,__webpack_exports__,__webpack_require__){"use strict";var _parseSectionErrorPaths__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("TTdl");__webpack_exports__.a=(errors=[])=>{const errorsList=Object.create({});return errors.forEach((error=>{Object(_parseSectionErrorPaths__WEBPACK_IMPORTED_MODULE_0__.a)(error.paths).forEach((path=>{const sectionError={path:path.originalPath,message:error.message};errorsList[path.sectionId]||(errorsList[path.sectionId]=[]),errorsList[path.sectionId].push(sectionError)}))})),errorsList}},kcqd:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return FormModule}));var core=__webpack_require__("fXoL"),common=__webpack_require__("ofXK"),form_component=__webpack_require__("hqmO"),fesm2015_core=__webpack_require__("e+Av"),ds_dynamic_form_control_container_component=__webpack_require__("NvTF");function DsDynamicFormComponent_ds_dynamic_form_control_container_0_Template(rf,ctx){if(1&rf){const _r3=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementStart"](0,"ds-dynamic-form-control-container",1),core["\u0275\u0275listener"]("dfBlur",(function DsDynamicFormComponent_ds_dynamic_form_control_container_0_Template_ds_dynamic_form_control_container_dfBlur_0_listener($event){core["\u0275\u0275restoreView"](_r3);const ctx_r2=core["\u0275\u0275nextContext"]();return ctx_r2.onCustomEvent($event,ctx_r2.blur)}))("dfChange",(function DsDynamicFormComponent_ds_dynamic_form_control_container_0_Template_ds_dynamic_form_control_container_dfChange_0_listener($event){core["\u0275\u0275restoreView"](_r3);const ctx_r4=core["\u0275\u0275nextContext"]();return ctx_r4.onCustomEvent($event,ctx_r4.change)}))("dfFocus",(function DsDynamicFormComponent_ds_dynamic_form_control_container_0_Template_ds_dynamic_form_control_container_dfFocus_0_listener($event){core["\u0275\u0275restoreView"](_r3);const ctx_r5=core["\u0275\u0275nextContext"]();return ctx_r5.onCustomEvent($event,ctx_r5.focus)}))("ngbEvent",(function DsDynamicFormComponent_ds_dynamic_form_control_container_0_Template_ds_dynamic_form_control_container_ngbEvent_0_listener($event){core["\u0275\u0275restoreView"](_r3);const ctx_r6=core["\u0275\u0275nextContext"]();return ctx_r6.onCustomEvent($event,ctx_r6.ngbEvent)})),core["\u0275\u0275elementEnd"]()}if(2&rf){const model_r1=ctx.$implicit,ctx_r0=core["\u0275\u0275nextContext"]();core["\u0275\u0275property"]("formId",ctx_r0.formId)("group",ctx_r0.formGroup)("hasErrorMessaging",model_r1.hasErrorMessages)("hidden",model_r1.hidden)("layout",ctx_r0.formLayout)("model",model_r1)("templates",ctx_r0.templates)("asBootstrapFormGroup",!0)}}class ds_dynamic_form_component_DsDynamicFormComponent extends fesm2015_core.x{constructor(changeDetectorRef,componentService){super(changeDetectorRef,componentService),this.blur=new core.EventEmitter,this.change=new core.EventEmitter,this.focus=new core.EventEmitter,this.ngbEvent=new core.EventEmitter}}ds_dynamic_form_component_DsDynamicFormComponent.\u0275fac=function DsDynamicFormComponent_Factory(t){return new(t||ds_dynamic_form_component_DsDynamicFormComponent)(core["\u0275\u0275directiveInject"](core.ChangeDetectorRef),core["\u0275\u0275directiveInject"](fesm2015_core.y))},ds_dynamic_form_component_DsDynamicFormComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:ds_dynamic_form_component_DsDynamicFormComponent,selectors:[["ds-dynamic-form"]],contentQueries:function DsDynamicFormComponent_ContentQueries(rf,ctx,dirIndex){if(1&rf&&core["\u0275\u0275contentQuery"](dirIndex,fesm2015_core.O,0),2&rf){let _t;core["\u0275\u0275queryRefresh"](_t=core["\u0275\u0275loadQuery"]())&&(ctx.templates=_t)}},viewQuery:function DsDynamicFormComponent_Query(rf,ctx){if(1&rf&&core["\u0275\u0275viewQuery"](ds_dynamic_form_control_container_component.a,1),2&rf){let _t;core["\u0275\u0275queryRefresh"](_t=core["\u0275\u0275loadQuery"]())&&(ctx.components=_t)}},inputs:{formId:"formId",formGroup:"formGroup",formModel:"formModel",formLayout:"formLayout"},outputs:{blur:"dfBlur",change:"dfChange",focus:"dfFocus",ngbEvent:"ngbEvent"},features:[core["\u0275\u0275InheritDefinitionFeature"]],decls:2,vars:2,consts:[[3,"formId","group","hasErrorMessaging","hidden","layout","model","templates","asBootstrapFormGroup","dfBlur","dfChange","dfFocus","ngbEvent",4,"ngFor","ngForOf","ngForTrackBy"],[3,"formId","group","hasErrorMessaging","hidden","layout","model","templates","asBootstrapFormGroup","dfBlur","dfChange","dfFocus","ngbEvent"]],template:function DsDynamicFormComponent_Template(rf,ctx){1&rf&&(core["\u0275\u0275template"](0,DsDynamicFormComponent_ds_dynamic_form_control_container_0_Template,1,8,"ds-dynamic-form-control-container",0),core["\u0275\u0275text"](1,"\n")),2&rf&&core["\u0275\u0275property"]("ngForOf",ctx.formModel)("ngForTrackBy",ctx.trackByFn)},directives:[common.NgForOf,ds_dynamic_form_control_container_component.a],encapsulation:2});var dynamic_list_component=__webpack_require__("ZO65"),dynamic_lookup_component=__webpack_require__("0pnk"),dynamic_disabled_component=__webpack_require__("sw+l"),dynamic_lookup_relation_modal_component=__webpack_require__("1Pbu"),dynamic_scrollable_dropdown_component=__webpack_require__("bPV6"),dynamic_tag_component=__webpack_require__("Gu/b"),dynamic_onebox_component=__webpack_require__("A/iK"),dynamic_relation_group_components=__webpack_require__("KKO+"),date_picker_component=__webpack_require__("Ysrn"),dynamic_form_group_component=__webpack_require__("tqJZ"),dynamic_form_array_component=__webpack_require__("ZTun"),dynamic_date_picker_inline_component=__webpack_require__("uyTL"),dynamic_lookup_relation_search_tab_component=__webpack_require__("Ui2r"),dynamic_lookup_relation_selection_tab_component=__webpack_require__("8HnP"),dynamic_lookup_relation_external_source_tab_component=__webpack_require__("zVKZ"),shared_module=__webpack_require__("PCNd"),ngx_translate_core=__webpack_require__("sYmb"),search_module=__webpack_require__("kMeL"),existing_metadata_list_element_component=__webpack_require__("yXJd"),existing_relation_list_element_component=__webpack_require__("/Vzl"),external_source_entry_import_modal_component=__webpack_require__("zGzN"),custom_switch_component=__webpack_require__("xjoE"),ui_ng_bootstrap=__webpack_require__("n7Wa"),fesm2015_forms=__webpack_require__("3Pt+"),drag_drop=__webpack_require__("5+WD");custom_switch_component.a,ds_dynamic_form_control_container_component.a,dynamic_list_component.a,dynamic_lookup_component.a,dynamic_lookup_relation_search_tab_component.a,dynamic_lookup_relation_selection_tab_component.a,dynamic_lookup_relation_external_source_tab_component.a,dynamic_disabled_component.a,dynamic_lookup_relation_modal_component.a,dynamic_scrollable_dropdown_component.a,dynamic_tag_component.a,dynamic_onebox_component.a,dynamic_relation_group_components.a,date_picker_component.b,dynamic_form_group_component.a,dynamic_form_array_component.a,dynamic_date_picker_inline_component.a,existing_metadata_list_element_component.a,existing_relation_list_element_component.a,external_source_entry_import_modal_component.a,form_component.a;class FormModule{}FormModule.\u0275fac=function FormModule_Factory(t){return new(t||FormModule)},FormModule.\u0275mod=core["\u0275\u0275defineNgModule"]({type:FormModule}),FormModule.\u0275inj=core["\u0275\u0275defineInjector"]({providers:[{provide:fesm2015_core.c,useValue:ds_dynamic_form_control_container_component.b}],imports:[[common.CommonModule,fesm2015_core.I,ui_ng_bootstrap.a,search_module.a,shared_module.a,ngx_translate_core.c]]}),core["\u0275\u0275setComponentScope"](dynamic_form_group_component.a,[fesm2015_forms.NgControlStatusGroup,fesm2015_forms.FormGroupDirective,fesm2015_forms.FormGroupName,common.NgClass,common.NgForOf,ds_dynamic_form_control_container_component.a],[]),core["\u0275\u0275setComponentScope"](dynamic_form_array_component.a,[fesm2015_forms.NgControlStatusGroup,fesm2015_forms.FormGroupDirective,fesm2015_forms.FormArrayName,common.NgClass,drag_drop.c,common.NgForOf,drag_drop.a,drag_drop.b,fesm2015_forms.FormGroupName,common.NgTemplateOutlet,ds_dynamic_form_control_container_component.a],[]),core["\u0275\u0275setComponentScope"](form_component.a,[fesm2015_forms["\u0275angular_packages_forms_forms_ba"],fesm2015_forms.NgControlStatusGroup,fesm2015_forms.FormGroupDirective,ds_dynamic_form_component_DsDynamicFormComponent,fesm2015_core.O,common.NgIf],[ngx_translate_core.d,common.AsyncPipe])},m4Gq:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return SubmissionFormComponent}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),rxjs__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("LRne"),rxjs_operators__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("pLZG"),rxjs_operators__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("lJxs"),rxjs_operators__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("/uUt"),rxjs_operators__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("eIep"),_core_auth_auth_service__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("Vurf"),_core_shared_hal_endpoint_service__WEBPACK_IMPORTED_MODULE_8__=(__webpack_require__("U7Y6"),__webpack_require__("uLZQ")),_shared_empty_util__WEBPACK_IMPORTED_MODULE_10__=(__webpack_require__("9S5r"),__webpack_require__("J3qs")),_shared_uploader_uploader_options_model__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("ao5O"),_submission_service__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("J/vq"),_sections_sections_type__WEBPACK_IMPORTED_MODULE_14__=(__webpack_require__("PN+Z"),__webpack_require__("4GeW")),_sections_sections_service__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("YJD6"),_angular_common__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("ofXK"),_collection_submission_form_collection_component__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("wQzj"),_section_add_submission_form_section_add_component__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("ph1m"),_submission_upload_files_submission_upload_files_component__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("T/iP"),_shared_loading_loading_component__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("Frqi"),_sections_container_section_container_component__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("Yfyx"),_footer_submission_form_footer_component__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__("yAsG");function SubmissionFormComponent_div_2_div_2_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div",12),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n            "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](2,"ds-submission-upload-files",13),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3,"\n            "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](4,"div",14),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](5,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()),2&rf){const ctx_r4=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"](2);_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("submissionId",ctx_r4.submissionId)("collectionId",ctx_r4.collectionId)("uploadFilesOptions",ctx_r4.uploadFilesOptions)}}function SubmissionFormComponent_div_2_Template(rf,ctx){if(1&rf){const _r6=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275getCurrentView"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div",6),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](2,SubmissionFormComponent_div_2_div_2_Template,6,3,"div",7),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](3,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](4,"\n\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](5,"div",8),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](6,"\n            "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](7,"ds-submission-form-collection",9),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("collectionChange",(function SubmissionFormComponent_div_2_Template_ds_submission_form_collection_collectionChange_7_listener($event){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r6);return _angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]().onCollectionChange($event)})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](8,"\n            "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](9,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](10,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](11,"div",10),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](12,"\n            "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](13,"ds-submission-form-section-add",11),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](14,"\n            "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](15,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](16,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()}if(2&rf){const ctx_r0=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](3,6,ctx_r0.uploadEnabled$)),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](5),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("currentCollectionId",ctx_r0.collectionId)("currentDefinition",ctx_r0.definitionId)("submissionId",ctx_r0.submissionId),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](6),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("collectionId",ctx_r0.collectionId)("submissionId",ctx_r0.submissionId)}}function SubmissionFormComponent_ds_loading_7_Template(rf,ctx){1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](0,"ds-loading",15)}function SubmissionFormComponent_ng_container_10_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementContainerStart"](0),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n            "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](2,"ds-submission-section-container",16),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementContainerEnd"]()),2&rf){const object_r7=ctx.$implicit,ctx_r2=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("collectionId",ctx_r2.collectionId)("submissionId",ctx_r2.submissionId)("sectionData",object_r7)}}function SubmissionFormComponent_div_14_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div",17),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](2,"ds-submission-form-footer",18),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()),2&rf){const ctx_r3=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("submissionId",ctx_r3.submissionId)}}class SubmissionFormComponent{constructor(authService,changeDetectorRef,halService,submissionService,sectionsService){this.authService=authService,this.changeDetectorRef=changeDetectorRef,this.halService=halService,this.submissionService=submissionService,this.sectionsService=sectionsService,this.loading=Object(rxjs__WEBPACK_IMPORTED_MODULE_1__.a)(!0),this.uploadFilesOptions=new _shared_uploader_uploader_options_model__WEBPACK_IMPORTED_MODULE_11__.a,this.subs=[],this.isActive=!0}ngOnChanges(changes){changes.collectionId&&this.collectionId&&changes.submissionId&&this.submissionId&&(this.isActive=!0,this.submissionSections=this.submissionService.getSubmissionObject(this.submissionId).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.a)((()=>this.isActive)),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.a)((submission=>submission.isLoading)),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.a)((isLoading=>isLoading)),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.a)(),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.a)((isLoading=>isLoading?Object(rxjs__WEBPACK_IMPORTED_MODULE_1__.a)([]):this.getSectionsList()))),this.uploadEnabled$=this.sectionsService.isSectionTypeAvailable(this.submissionId,_sections_sections_type__WEBPACK_IMPORTED_MODULE_14__.a.Upload),this.loading=this.submissionService.getSubmissionObject(this.submissionId).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.a)((()=>this.isActive)),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.a)((submission=>submission.isLoading)),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.a)((isLoading=>isLoading)),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.a)()),this.subs.push(this.halService.getEndpoint(this.submissionService.getSubmissionObjectLinkName()).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.a)((href=>Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_10__.e)(href))),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.a)()).subscribe((endpointURL=>{this.uploadFilesOptions.authToken=this.authService.buildAuthHeader(),this.uploadFilesOptions.url=endpointURL.concat(`/${this.submissionId}`),this.definitionId=this.submissionDefinition.name,this.submissionService.dispatchInit(this.collectionId,this.submissionId,this.selfUrl,this.submissionDefinition,this.sections,this.item,this.submissionErrors),this.changeDetectorRef.detectChanges()}))),this.submissionService.startAutoSave(this.submissionId))}ngOnDestroy(){this.isActive=!1,this.submissionService.stopAutoSave(),this.submissionService.resetAllSubmissionObjects(),this.subs.filter((subscription=>Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_10__.b)(subscription))).forEach((subscription=>subscription.unsubscribe()))}onCollectionChange(submissionObject){this.collectionId=submissionObject.collection.id,this.definitionId!==submissionObject.submissionDefinition.name?(this.sections=submissionObject.sections,this.submissionDefinition=submissionObject.submissionDefinition,this.definitionId=this.submissionDefinition.name,this.submissionService.resetSubmissionObject(this.collectionId,this.submissionId,submissionObject._links.self.href,this.submissionDefinition,this.sections,this.item)):this.changeDetectorRef.detectChanges()}isLoading(){return this.loading}getSectionsList(){return this.submissionService.getSubmissionSections(this.submissionId).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.a)((sections=>Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_10__.e)(sections))),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.a)((sections=>sections)))}}SubmissionFormComponent.\u0275fac=function SubmissionFormComponent_Factory(t){return new(t||SubmissionFormComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_core_auth_auth_service__WEBPACK_IMPORTED_MODULE_6__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__.ChangeDetectorRef),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_core_shared_hal_endpoint_service__WEBPACK_IMPORTED_MODULE_8__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_submission_service__WEBPACK_IMPORTED_MODULE_12__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_sections_sections_service__WEBPACK_IMPORTED_MODULE_15__.a))},SubmissionFormComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineComponent"]({type:SubmissionFormComponent,selectors:[["ds-submission-form"]],inputs:{collectionId:"collectionId",item:"item",sections:"sections",submissionErrors:"submissionErrors",selfUrl:"selfUrl",submissionDefinition:"submissionDefinition",submissionId:"submissionId"},features:[_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275NgOnChangesFeature"]],decls:18,vars:12,consts:[[1,"container-fluid"],["class","submission-form-header mb-3 d-flex flex-wrap position-sticky",4,"ngIf"],[1,"submission-form-content"],["message","Loading...",4,"ngIf"],[4,"ngFor","ngForOf"],["class","submission-form-footer mt-3 mb-3 position-sticky",4,"ngIf"],[1,"submission-form-header","mb-3","d-flex","flex-wrap","position-sticky"],["class","w-100",4,"ngIf"],[1,"submission-form-header-item","mb-3","mb-sm-0","flex-sm-grow-1","flex-md-grow-0"],[3,"currentCollectionId","currentDefinition","submissionId","collectionChange"],[1,"submission-form-header-item","text-right"],[3,"collectionId","submissionId"],[1,"w-100"],[3,"submissionId","collectionId","uploadFilesOptions"],[1,"clearfix"],["message","Loading..."],[3,"collectionId","submissionId","sectionData"],[1,"submission-form-footer","mt-3","mb-3","position-sticky"],[3,"submissionId"]],template:function SubmissionFormComponent_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div",0),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](2,SubmissionFormComponent_div_2_Template,17,8,"div",1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](3,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](4,"\n\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](5,"div",2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](6,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](7,SubmissionFormComponent_ds_loading_7_Template,1,0,"ds-loading",3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](8,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](9,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](10,SubmissionFormComponent_ng_container_10_Template,4,3,"ng-container",4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](11,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](12,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](13,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](14,SubmissionFormComponent_div_14_Template,4,1,"div",5),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](15,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](16,"\n"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](17,"\n")),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",!_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](3,4,ctx.isLoading())),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](5),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](8,6,ctx.isLoading())),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngForOf",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](11,8,ctx.submissionSections)),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",!_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](15,10,ctx.isLoading())))},directives:[_angular_common__WEBPACK_IMPORTED_MODULE_16__.NgIf,_angular_common__WEBPACK_IMPORTED_MODULE_16__.NgForOf,_collection_submission_form_collection_component__WEBPACK_IMPORTED_MODULE_17__.a,_section_add_submission_form_section_add_component__WEBPACK_IMPORTED_MODULE_18__.a,_submission_upload_files_submission_upload_files_component__WEBPACK_IMPORTED_MODULE_19__.a,_shared_loading_loading_component__WEBPACK_IMPORTED_MODULE_20__.a,_sections_container_section_container_component__WEBPACK_IMPORTED_MODULE_21__.a,_footer_submission_form_footer_component__WEBPACK_IMPORTED_MODULE_22__.a],pipes:[_angular_common__WEBPACK_IMPORTED_MODULE_16__.AsyncPipe],styles:[".submission-form-header[_ngcontent-%COMP%]{background-color:hsla(0,0%,100%,.97);padding:calc(var(--bs-spacer) / 2) 0 calc(var(--bs-spacer) / 2) 0;top:0;z-index:var(--ds-submission-header-z-index)}.submission-form-header-item[_ngcontent-%COMP%]{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1}.submission-form-footer[_ngcontent-%COMP%]{border-radius:var(--bs-card-border-radius);bottom:0;background-color:var(--bs-gray-400);padding:calc(var(--bs-spacer) / 2);z-index:var(--ds-submission-footer-z-index)}.btn-link-focus[_ngcontent-%COMP%]{font-weight:400;color:#066;text-decoration:none}.btn-link-focus[_ngcontent-%COMP%]:hover{color:#001a1a;text-decoration:underline}.btn-link-focus.disabled[_ngcontent-%COMP%], .btn-link-focus[_ngcontent-%COMP%]:disabled{color:#6c757d;pointer-events:none}.btn-link-focus.focus[_ngcontent-%COMP%], .btn-link-focus[_ngcontent-%COMP%]:focus{text-decoration:underline}"]})},ph1m:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return SubmissionFormSectionAddComponent}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),rxjs_operators__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("lJxs"),_sections_sections_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("YJD6"),_shared_host_window_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("14tD"),_submission_service__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("J/vq"),_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("1kSV"),_angular_common__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("ofXK"),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("sYmb");function SubmissionFormSectionAddComponent_button_14_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"button",7),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](2,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate1"]("\n      ",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](2,1,"submission.sections.general.no-sections"),"\n    "))}function SubmissionFormSectionAddComponent_button_17_Template(rf,ctx){if(1&rf){const _r5=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275getCurrentView"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"button",8),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("click",(function SubmissionFormSectionAddComponent_button_17_Template_button_click_0_listener(){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r5);const listItem_r3=ctx.$implicit;return _angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]().addSection(listItem_r3.id)})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](2,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()}if(2&rf){const listItem_r3=ctx.$implicit;_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate1"]("\n      ",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](2,1,"submission.sections."+listItem_r3.header),"\n    ")}}const _c0=function(a0){return{"w-100":a0}};class SubmissionFormSectionAddComponent{constructor(sectionService,submissionService,windowService){this.sectionService=sectionService,this.submissionService=submissionService,this.windowService=windowService}ngOnInit(){this.sectionList$=this.submissionService.getDisabledSectionsList(this.submissionId),this.hasSections$=this.sectionList$.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_1__.a)((list=>list.length>0)))}addSection(sectionId){this.sectionService.addSection(this.submissionId,sectionId)}}SubmissionFormSectionAddComponent.\u0275fac=function SubmissionFormSectionAddComponent_Factory(t){return new(t||SubmissionFormSectionAddComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_sections_sections_service__WEBPACK_IMPORTED_MODULE_2__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_submission_service__WEBPACK_IMPORTED_MODULE_4__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_shared_host_window_service__WEBPACK_IMPORTED_MODULE_3__.a))},SubmissionFormSectionAddComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineComponent"]({type:SubmissionFormSectionAddComponent,selectors:[["ds-submission-form-section-add"]],inputs:{collectionId:"collectionId",submissionId:"submissionId"},decls:22,vars:25,consts:[["ngbDropdown","","placement","bottom-right",1,"d-inline-block",3,"ngClass"],["sectionAdd","ngbDropdown"],["id","sectionControls","ngbDropdownToggle","",1,"btn","btn-outline-primary","dropdown-toggle",3,"disabled","ngClass"],["aria-hidden","true",1,"fa","fa-plus"],["ngbDropdownMenu","","aria-labelledby","sectionControls",1,"sections-dropdown-menu",3,"ngClass"],["class","dropdown-item disabled",4,"ngIf"],["class","dropdown-item",3,"click",4,"ngFor","ngForOf"],[1,"dropdown-item","disabled"],[1,"dropdown-item",3,"click"]],template:function SubmissionFormSectionAddComponent_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div",0,1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](2,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](3,"button",2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](4,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](5,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](6),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](7,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](8,"i",3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](9,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](10,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](11,"div",4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](12,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](13,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](14,SubmissionFormSectionAddComponent_button_14_Template,3,3,"button",5),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](15,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](16,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](17,SubmissionFormSectionAddComponent_button_17_Template,3,3,"button",6),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](18,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](19,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](20,"\n"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](21,"\n")),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngClass",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pureFunction1"](19,_c0,ctx.windowService.isXs())),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("disabled",!_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](4,7,ctx.hasSections$))("ngClass",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pureFunction1"](21,_c0,_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](5,9,ctx.windowService.isXs()))),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate1"]("\n          ",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](7,11,"submission.sections.general.add-more")," "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](5),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngClass",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pureFunction1"](23,_c0,_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](12,13,ctx.windowService.isXs()))),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",!_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](15,15,ctx.hasSections$)),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngForOf",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](18,17,ctx.sectionList$)))},directives:[_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_5__.j,_angular_common__WEBPACK_IMPORTED_MODULE_6__.NgClass,_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_5__.o,_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_5__.m,_angular_common__WEBPACK_IMPORTED_MODULE_6__.NgIf,_angular_common__WEBPACK_IMPORTED_MODULE_6__.NgForOf],pipes:[_angular_common__WEBPACK_IMPORTED_MODULE_6__.AsyncPipe,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_7__.d],styles:[".dropdown-toggle[_ngcontent-%COMP%]:after{display:none}.sections-dropdown-menu[_ngcontent-%COMP%]{z-index:var(--ds-submission-header-z-index)}"]})},qK5G:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ThemedSubmissionImportExternalComponent}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),_shared_theme_support_themed_component__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("JTKQ");function ThemedSubmissionImportExternalComponent_ng_template_0_Template(rf,ctx){}class ThemedSubmissionImportExternalComponent extends _shared_theme_support_themed_component__WEBPACK_IMPORTED_MODULE_1__.a{getComponentName(){return"SubmissionImportExternalComponent"}importThemedComponent(themeName){return __webpack_require__("JHLN")(`./${themeName}/app/submission/import-external/submission-import-external.component`)}importUnthemedComponent(){return Promise.resolve().then(__webpack_require__.bind(null,"RMpN"))}}ThemedSubmissionImportExternalComponent.\u0275fac=function ThemedSubmissionImportExternalComponent_Factory(t){return \u0275ThemedSubmissionImportExternalComponent_BaseFactory(t||ThemedSubmissionImportExternalComponent)},ThemedSubmissionImportExternalComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineComponent"]({type:ThemedSubmissionImportExternalComponent,selectors:[["ds-themed-submission-import-external"]],features:[_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275InheritDefinitionFeature"]],decls:3,vars:0,consts:[["vcr",""]],template:function ThemedSubmissionImportExternalComponent_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](0,ThemedSubmissionImportExternalComponent_ng_template_0_Template,0,0,"ng-template",null,0,_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275templateRefExtractor"]),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](2,"\n"))},encapsulation:2});const \u0275ThemedSubmissionImportExternalComponent_BaseFactory=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275getInheritedFactory"](ThemedSubmissionImportExternalComponent)},tv3Y:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return I18nBreadcrumbsService}));var _breadcrumbs_breadcrumb_breadcrumb_model__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("zr/d"),rxjs__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("LRne"),_angular_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("fXoL");class I18nBreadcrumbsService{getBreadcrumbs(key,url){return Object(rxjs__WEBPACK_IMPORTED_MODULE_1__.a)([new _breadcrumbs_breadcrumb_breadcrumb_model__WEBPACK_IMPORTED_MODULE_0__.a(key+".breadcrumbs",url)])}}I18nBreadcrumbsService.\u0275fac=function I18nBreadcrumbsService_Factory(t){return new(t||I18nBreadcrumbsService)},I18nBreadcrumbsService.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_2__["\u0275\u0275defineInjectable"]({token:I18nBreadcrumbsService,factory:I18nBreadcrumbsService.\u0275fac,providedIn:"root"})},wQzj:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return SubmissionFormCollectionComponent}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),rxjs__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("2Vo4"),rxjs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("LRne"),rxjs_operators__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("cBqT"),rxjs_operators__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("lJxs"),rxjs_operators__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("5+tZ"),_shared_empty_util__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("J3qs"),_core_json_patch_builder_json_patch_operation_path_combiner__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("0VLH"),_core_json_patch_builder_json_patch_operations_builder__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("BVmw"),_submission_service__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("J/vq"),_core_submission_submission_json_patch_operations_service__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("QjZv"),_core_data_collection_data_service__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("DNva"),_shared_collection_dropdown_collection_dropdown_component__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("Oqsf"),_sections_sections_service__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("YJD6"),_core_shared_operators__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("1QIV"),_sections_sections_type__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("4GeW"),_angular_common__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("ofXK"),_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("1kSV"),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("sYmb");function SubmissionFormCollectionComponent_div_2_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div",2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](2,"div",3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](4,"span",4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](5),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](6,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](7,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](8,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](9,"div",5),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](10,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](11,"span",4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](12),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](13,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](14,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](15,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()),2&rf){const ctx_r0=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](5),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](6,2,"submission.sections.general.collection")),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](7),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](13,4,ctx_r0.selectedCollectionName$))}}function SubmissionFormCollectionComponent_div_5_span_13_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"span"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](1,"i",13),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]())}function SubmissionFormCollectionComponent_div_5_span_16_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"span"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](2,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()),2&rf){const ctx_r4=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"](2);_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](2,1,ctx_r4.selectedCollectionName$))}}function SubmissionFormCollectionComponent_div_5_Template(rf,ctx){if(1&rf){const _r6=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275getCurrentView"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div",6,7),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("openChange",(function SubmissionFormCollectionComponent_div_5_Template_div_openChange_0_listener($event){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r6);return _angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]().toggled($event)})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](2,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](3,"div",3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](4,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](5,"span",8),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](6),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](7,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](8,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](9,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](10,"button",9),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("blur",(function SubmissionFormCollectionComponent_div_5_Template_button_blur_10_listener(){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r6);return _angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]().onClose()}))("click",(function SubmissionFormCollectionComponent_div_5_Template_button_click_10_listener(){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r6);return _angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]().onClose()})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](11,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](12,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](13,SubmissionFormCollectionComponent_div_5_span_13_Template,2,0,"span",10),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](14,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](15,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](16,SubmissionFormCollectionComponent_div_5_span_16_Template,3,3,"span",10),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](17,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](18,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](19,"\n\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](20,"div",11),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](21,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](22,"ds-collection-dropdown",12),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("selectionChange",(function SubmissionFormCollectionComponent_div_5_Template_ds_collection_dropdown_selectionChange_22_listener($event){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r6);return _angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]().onSelect($event)})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](23,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](24,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](25,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()}if(2&rf){const ctx_r1=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](6),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate1"]("\n        ",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](7,4,"submission.sections.general.collection"),"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("disabled",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](11,6,ctx_r1.processingChange$)),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](14,8,ctx_r1.processingChange$)),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",!_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](17,10,ctx_r1.processingChange$))}}class SubmissionFormCollectionComponent{constructor(cdr,collectionDataService,operationsBuilder,operationsService,submissionService,sectionsService){this.cdr=cdr,this.collectionDataService=collectionDataService,this.operationsBuilder=operationsBuilder,this.operationsService=operationsService,this.submissionService=submissionService,this.sectionsService=sectionsService,this.collectionChange=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.EventEmitter,this.processingChange$=new rxjs__WEBPACK_IMPORTED_MODULE_1__.a(!1),this.subs=[]}ngOnChanges(changes){Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_6__.b)(changes.currentCollectionId)&&Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_6__.b)(changes.currentCollectionId.currentValue)&&(this.selectedCollectionId=this.currentCollectionId,this.selectedCollectionName$=this.collectionDataService.findById(this.currentCollectionId).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.a)((collectionRD=>Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_6__.e)(collectionRD.payload))),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.a)((collectionRD=>collectionRD.payload.name))))}ngOnInit(){this.pathCombiner=new _core_json_patch_builder_json_patch_operation_path_combiner__WEBPACK_IMPORTED_MODULE_7__.a("sections","collection"),this.available$=this.sectionsService.isSectionTypeAvailable(this.submissionId,_sections_sections_type__WEBPACK_IMPORTED_MODULE_15__.a.collection)}ngOnDestroy(){this.subs.filter((sub=>Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_6__.b)(sub))).forEach((sub=>sub.unsubscribe()))}onSelect(event){this.processingChange$.next(!0),this.operationsBuilder.replace(this.pathCombiner.getPath(),event.collection.id,!0),this.subs.push(this.operationsService.jsonPatchByResourceID(this.submissionService.getSubmissionObjectLinkName(),this.submissionId,"sections","collection").pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.a)((submissionObject=>this.submissionService.retrieveSubmission(submissionObject[0].id).pipe(Object(_core_shared_operators__WEBPACK_IMPORTED_MODULE_14__.j)())))).subscribe((submissionObject=>{this.selectedCollectionId=event.collection.id,this.selectedCollectionName$=Object(rxjs__WEBPACK_IMPORTED_MODULE_2__.a)(event.collection.name),this.collectionChange.emit(submissionObject),this.submissionService.changeSubmissionCollection(this.submissionId,event.collection.id),this.processingChange$.next(!1),this.cdr.detectChanges()})))}onClose(){this.collectionDropdown.reset()}toggled(isOpen){isOpen||this.collectionDropdown.reset()}}SubmissionFormCollectionComponent.\u0275fac=function SubmissionFormCollectionComponent_Factory(t){return new(t||SubmissionFormCollectionComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__.ChangeDetectorRef),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_core_data_collection_data_service__WEBPACK_IMPORTED_MODULE_11__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_core_json_patch_builder_json_patch_operations_builder__WEBPACK_IMPORTED_MODULE_8__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_core_submission_submission_json_patch_operations_service__WEBPACK_IMPORTED_MODULE_10__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_submission_service__WEBPACK_IMPORTED_MODULE_9__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_sections_sections_service__WEBPACK_IMPORTED_MODULE_13__.a))},SubmissionFormCollectionComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineComponent"]({type:SubmissionFormCollectionComponent,selectors:[["ds-submission-form-collection"]],viewQuery:function SubmissionFormCollectionComponent_Query(rf,ctx){if(1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275viewQuery"](_shared_collection_dropdown_collection_dropdown_component__WEBPACK_IMPORTED_MODULE_12__.a,1),2&rf){let _t;_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275queryRefresh"](_t=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275loadQuery"]())&&(ctx.collectionDropdown=_t.first)}},inputs:{currentCollectionId:"currentCollectionId",currentDefinition:"currentDefinition",submissionId:"submissionId"},outputs:{collectionChange:"collectionChange"},features:[_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275NgOnChangesFeature"]],decls:9,vars:6,consts:[["class","input-group mb-3",4,"ngIf"],["ngbDropdown","","class","btn-group input-group",3,"openChange",4,"ngIf"],[1,"input-group","mb-3"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"input-group-append"],["ngbDropdown","",1,"btn-group","input-group",3,"openChange"],["collectionControls","ngbDropdown"],["id","collectionControlsMenuLabel",1,"input-group-text"],["aria-describedby","collectionControlsMenuLabel","id","collectionControlsMenuButton","ngbDropdownToggle","",1,"btn","btn-outline-primary",3,"disabled","blur","click"],[4,"ngIf"],["ngbDropdownMenu","","id","collectionControlsDropdownMenu","aria-labelledby","collectionControlsMenuButton",1,"dropdown-menu"],[3,"selectionChange"],[1,"fas","fa-circle-notch","fa-spin"]],template:function SubmissionFormCollectionComponent_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](2,SubmissionFormCollectionComponent_div_2_Template,16,6,"div",0),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](3,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](4,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](5,SubmissionFormCollectionComponent_div_5_Template,26,12,"div",1),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](6,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](7,"\n"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](8,"\n")),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",!_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](3,2,ctx.available$)),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](6,4,ctx.available$)))},directives:[_angular_common__WEBPACK_IMPORTED_MODULE_16__.NgIf,_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_17__.j,_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_17__.o,_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_17__.m,_shared_collection_dropdown_collection_dropdown_component__WEBPACK_IMPORTED_MODULE_12__.a],pipes:[_angular_common__WEBPACK_IMPORTED_MODULE_16__.AsyncPipe,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_18__.d],styles:[".scrollable-menu[_ngcontent-%COMP%]{height:auto;max-height:var(--ds-dropdown-menu-max-height);overflow-x:hidden}.collection-item[_ngcontent-%COMP%]{border-bottom:var(--bs-dropdown-border-width) solid var(--bs-dropdown-border-color)}#collectionControlsDropdownMenu[_ngcontent-%COMP%]{outline:0;left:0!important;-webkit-box-shadow:var(--bs-btn-focus-box-shadow);box-shadow:var(--bs-btn-focus-box-shadow)}"]})},yAsG:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return SubmissionFormFooterComponent}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),rxjs__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("LRne"),rxjs_operators__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("lJxs"),_core_submission_submission_rest_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("8nsN"),_submission_service__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("J/vq"),_core_submission_submission_scope_type__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("drGc"),_shared_empty_util__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("J3qs"),_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("1kSV"),_angular_common__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("ofXK"),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("sYmb");function SubmissionFormFooterComponent_div_0_button_4_Template(rf,ctx){if(1&rf){const _r9=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275getCurrentView"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"button",13),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("click",(function SubmissionFormFooterComponent_div_0_button_4_Template_button_click_0_listener($event){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r9);const ctx_r8=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"](2),_r1=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275reference"](3);return $event.preventDefault(),ctx_r8.confirmDiscard(_r1)})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](1,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](2,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](4,"i",14),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](5),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](6,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()}if(2&rf){const ctx_r3=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"](2);_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("disabled",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](1,2,ctx_r3.processingSaveStatus)||_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](2,4,ctx_r3.processingDepositStatus)),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](5),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate1"](" ",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](6,6,"submission.general.discard.submit"),"\n    ")}}function SubmissionFormFooterComponent_div_0_span_10_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"span"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](2,"i",15),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](4,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate1"](" ",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](4,1,"submission.general.info.saved"),"\n    "))}function SubmissionFormFooterComponent_div_0_span_15_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"span"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](2,"i",16),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](4,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate1"](" ",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](4,1,"submission.general.info.pending-changes"),"\n    "))}function SubmissionFormFooterComponent_div_0_div_20_div_4_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div",20),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"Saving..."),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()),2&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275styleProp"]("width","100%")}function SubmissionFormFooterComponent_div_0_div_20_div_7_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div",20),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"Depositing..."),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()),2&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275styleProp"]("width","100%")}function SubmissionFormFooterComponent_div_0_div_20_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div",17),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](2,"div",18),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](4,SubmissionFormFooterComponent_div_0_div_20_div_4_Template,2,2,"div",19),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](5,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](6,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](7,SubmissionFormFooterComponent_div_0_div_20_div_7_Template,2,2,"div",19),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](8,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](9,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](10,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()),2&rf){const ctx_r6=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"](2);_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](5,2,ctx_r6.processingSaveStatus)),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](8,4,ctx_r6.processingDepositStatus))}}function SubmissionFormFooterComponent_div_0_button_48_Template(rf,ctx){if(1&rf){const _r13=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275getCurrentView"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"button",21),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("click",(function SubmissionFormFooterComponent_div_0_button_48_Template_button_click_0_listener($event){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r13);return _angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"](2).deposit($event)})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](1,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](2,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](4,"span"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](5,"i",22),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](6),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](7,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](8,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()}if(2&rf){const ctx_r7=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"](2);_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("disabled",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](1,2,ctx_r7.processingSaveStatus)||_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](2,4,ctx_r7.processingDepositStatus)),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](6),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate1"](" ",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](7,6,"submission.general.deposit"),"")}}function SubmissionFormFooterComponent_div_0_Template(rf,ctx){if(1&rf){const _r15=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275getCurrentView"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](0,"div",2),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](2,"div",3),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](3,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](4,SubmissionFormFooterComponent_div_0_button_4_Template,7,8,"button",4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](5,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](6,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](7,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](8,"div",5),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](9,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](10,SubmissionFormFooterComponent_div_0_span_10_Template,5,3,"span",6),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](11,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](12,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](13,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](14,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](15,SubmissionFormFooterComponent_div_0_span_15_Template,5,3,"span",6),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](16,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](17,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](18,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](19,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](20,SubmissionFormFooterComponent_div_0_div_20_Template,11,6,"div",7),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](21,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](22,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](23,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](24,"div",8),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](25,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](26,"button",9),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("click",(function SubmissionFormFooterComponent_div_0_Template_button_click_26_listener($event){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r15);return _angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]().save($event)})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](27,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](28,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](29,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](30,"span"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](31,"i",10),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](32),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](33,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](34,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](35,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](36,"button",11),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("click",(function SubmissionFormFooterComponent_div_0_Template_button_click_36_listener($event){_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275restoreView"](_r15);return _angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]().saveLater($event)})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](37,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](38,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](39,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](40,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](41,"\n        "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](42,"span"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275element"](43,"i",10),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](44),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](45,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](46,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](47,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](48,SubmissionFormFooterComponent_div_0_button_48_Template,9,8,"button",12),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](49,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](50,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](51,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](52,"\n"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"]()}if(2&rf){const ctx_r0=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275nextContext"]();_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](5,13,ctx_r0.showDepositAndDiscard)),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](6),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",!_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](11,15,ctx_r0.hasUnsavedModification)&&!_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](12,17,ctx_r0.processingSaveStatus)&&!_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](13,19,ctx_r0.processingDepositStatus)),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](5),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](16,21,ctx_r0.hasUnsavedModification)&&!_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](17,23,ctx_r0.processingSaveStatus)&&!_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](18,25,ctx_r0.processingDepositStatus)),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](5),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](21,27,ctx_r0.processingSaveStatus)||_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](22,29,ctx_r0.processingDepositStatus)),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](6),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("disabled",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](27,31,ctx_r0.processingSaveStatus)||!_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](28,33,ctx_r0.hasUnsavedModification)),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](6),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate1"](" ",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](33,35,"submission.general.save"),""),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275classProp"]("btn-primary",!_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](37,37,ctx_r0.showDepositAndDiscard))("btn-secondary",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](38,39,ctx_r0.showDepositAndDiscard)),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("disabled",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](39,41,ctx_r0.processingSaveStatus)||_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](40,43,ctx_r0.processingDepositStatus)),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](8),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate1"](" ",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](45,45,"submission.general.save-later"),""),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](49,47,ctx_r0.showDepositAndDiscard))}}function SubmissionFormFooterComponent_ng_template_2_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](0,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](1,"div",23),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](2,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](3,"h4",24),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](5,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](6,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](7,"button",25),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("click",(function SubmissionFormFooterComponent_ng_template_2_Template_button_click_7_listener(){return(0,ctx.dismiss)("cancel")})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](8,"\n      "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](9,"span",26),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](10,"\xd7"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](11,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](12,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](13,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](14,"div",27),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](15,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](16,"p"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](17),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](18,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](19,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](20,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](21,"div",28),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](22,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](23,"button",29),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("click",(function SubmissionFormFooterComponent_ng_template_2_Template_button_click_23_listener(){return(0,ctx.close)("cancel")})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](24),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](25,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](26,"\n    "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementStart"](27,"button",30),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275listener"]("click",(function SubmissionFormFooterComponent_ng_template_2_Template_button_click_27_listener(){return(0,ctx.close)("ok")})),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](28),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipe"](29,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](30,"\n  "),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275elementEnd"](),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](31,"\n")),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](5,4,"submission.general.discard.confirm.title")),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](13),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](18,6,"submission.general.discard.confirm.info")),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](7),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](25,8,"submission.general.discard.confirm.cancel")),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275advance"](4),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275textInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275pipeBind1"](29,10,"submission.general.discard.confirm.submit")))}class SubmissionFormFooterComponent{constructor(modalService,restService,submissionService){this.modalService=modalService,this.restService=restService,this.submissionService=submissionService,this.submissionIsInvalid=Object(rxjs__WEBPACK_IMPORTED_MODULE_1__.a)(!0)}ngOnChanges(changes){Object(_shared_empty_util__WEBPACK_IMPORTED_MODULE_6__.e)(this.submissionId)&&(this.submissionIsInvalid=this.submissionService.getSubmissionStatus(this.submissionId).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.a)((isValid=>!1===isValid))),this.processingSaveStatus=this.submissionService.getSubmissionSaveProcessingStatus(this.submissionId),this.processingDepositStatus=this.submissionService.getSubmissionDepositProcessingStatus(this.submissionId),this.showDepositAndDiscard=Object(rxjs__WEBPACK_IMPORTED_MODULE_1__.a)(this.submissionService.getSubmissionScope()===_core_submission_submission_scope_type__WEBPACK_IMPORTED_MODULE_5__.a.WorkspaceItem),this.hasUnsavedModification=this.submissionService.hasUnsavedModification())}save(event){this.submissionService.dispatchSave(this.submissionId,!0)}saveLater(event){this.submissionService.dispatchSaveForLater(this.submissionId)}deposit(event){this.submissionService.dispatchDeposit(this.submissionId)}confirmDiscard(content){this.modalService.open(content).result.then((result=>{"ok"===result&&this.submissionService.dispatchDiscard(this.submissionId)}))}}SubmissionFormFooterComponent.\u0275fac=function SubmissionFormFooterComponent_Factory(t){return new(t||SubmissionFormFooterComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_7__.q),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_core_submission_submission_rest_service__WEBPACK_IMPORTED_MODULE_3__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275directiveInject"](_submission_service__WEBPACK_IMPORTED_MODULE_4__.a))},SubmissionFormFooterComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275defineComponent"]({type:SubmissionFormFooterComponent,selectors:[["ds-submission-form-footer"]],inputs:{submissionId:"submissionId"},features:[_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275NgOnChangesFeature"]],decls:5,vars:1,consts:[["class","row",4,"ngIf"],["content",""],[1,"row"],[1,"col"],["type","button","class","btn btn-danger",3,"disabled","click",4,"ngIf"],[1,"col","text-right","d-flex","justify-content-end","align-items-center"],[4,"ngIf"],["class","col d-flex justify-content-end align-items-center",4,"ngIf"],[1,"ml-2"],["type","button","id","save",1,"btn","btn-secondary",3,"disabled","click"],[1,"fas","fa-save"],["type","button","id","saveForLater",1,"btn",3,"disabled","click"],["type","button","class","btn btn-success",3,"disabled","click",4,"ngIf"],["type","button",1,"btn","btn-danger",3,"disabled","click"],[1,"fas","fa-trash"],[1,"fas","fa-check-circle"],[1,"fas","fa-exclamation-circle"],[1,"col","d-flex","justify-content-end","align-items-center"],[1,"progress","w-75"],["class","progress-bar progress-bar-striped progress-bar-animated bg-info","role","progressbar","aria-valuenow","100","aria-valuemin","0","aria-valuemax","100",3,"width",4,"ngIf"],["role","progressbar","aria-valuenow","100","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","progress-bar-striped","progress-bar-animated","bg-info"],["type","button",1,"btn","btn-success",3,"disabled","click"],[1,"fas","fa-plus"],[1,"modal-header"],[1,"modal-title","text-danger"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-danger",3,"click"]],template:function SubmissionFormFooterComponent_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](0,SubmissionFormFooterComponent_div_0_Template,53,49,"div",0),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](1,"\n\n"),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275template"](2,SubmissionFormFooterComponent_ng_template_2_Template,32,12,"ng-template",null,1,_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275templateRefExtractor"]),_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275text"](4,"\n")),2&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_0__["\u0275\u0275property"]("ngIf",!!ctx.submissionId)},directives:[_angular_common__WEBPACK_IMPORTED_MODULE_8__.NgIf],pipes:[_angular_common__WEBPACK_IMPORTED_MODULE_8__.AsyncPipe,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_9__.d],styles:[""]})},"zr/d":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return Breadcrumb}));class Breadcrumb{constructor(text,url){this.text=text,this.url=url}}}};