exports.ids=[9],exports.modules={cuVu:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"BitstreamPageModule",(function(){return BitstreamPageModule}));var core=__webpack_require__("fXoL"),common=__webpack_require__("ofXK"),shared_module=__webpack_require__("PCNd"),map=__webpack_require__("lJxs"),switchMap=__webpack_require__("eIep"),mergeMap=__webpack_require__("5+tZ"),combineLatest=__webpack_require__("itXk"),of=__webpack_require__("LRne"),fesm2015_core=__webpack_require__("e+Av"),custom_switch_model=__webpack_require__("JN36"),lodash=__webpack_require__("LvDl"),bitstream_data_service=__webpack_require__("PCBh"),operators=__webpack_require__("1QIV"),notifications_service=__webpack_require__("lI3o"),bitstream_format_data_service=__webpack_require__("B7d6"),bitstream_format_support_level=__webpack_require__("87+M"),empty_util=__webpack_require__("J3qs"),metadata_utils=__webpack_require__("/eM4"),item_page_routing_paths=__webpack_require__("Xioo"),dso_name_service=__webpack_require__("C765"),ds_dynamic_input_model=__webpack_require__("JGHn"),ds_dynamic_textarea_model=__webpack_require__("c/qf"),fesm2015_router=__webpack_require__("tyNb"),ngx_translate_core=__webpack_require__("sYmb"),var_directive=__webpack_require__("O/5o"),thumbnail_component=__webpack_require__("/lGE"),form_component=__webpack_require__("hqmO"),fesm2015_forms=__webpack_require__("3Pt+"),error_component=__webpack_require__("HZwm"),loading_component=__webpack_require__("Frqi"),file_size_pipe=__webpack_require__("t8/W");const _c0=function(a1){return["/bitstreams",a1,"authorizations"]};function EditBitstreamPageComponent_ng_container_0_div_2_div_2_ds_form_24_Template(rf,ctx){if(1&rf){const _r9=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementStart"](0,"ds-form",12),core["\u0275\u0275listener"]("submitForm",(function EditBitstreamPageComponent_ng_container_0_div_2_div_2_ds_form_24_Template_ds_form_submitForm_0_listener(){core["\u0275\u0275restoreView"](_r9);return core["\u0275\u0275nextContext"](4).onSubmit()}))("cancel",(function EditBitstreamPageComponent_ng_container_0_div_2_div_2_ds_form_24_Template_ds_form_cancel_0_listener(){core["\u0275\u0275restoreView"](_r9);return core["\u0275\u0275nextContext"](4).onCancel()}))("dfChange",(function EditBitstreamPageComponent_ng_container_0_div_2_div_2_ds_form_24_Template_ds_form_dfChange_0_listener($event){core["\u0275\u0275restoreView"](_r9);return core["\u0275\u0275nextContext"](4).onChange($event)})),core["\u0275\u0275text"](1,"\n          "),core["\u0275\u0275elementStart"](2,"div",13),core["\u0275\u0275text"](3,"\n            "),core["\u0275\u0275elementStart"](4,"a",14),core["\u0275\u0275text"](5),core["\u0275\u0275pipe"](6,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](7,"\n          "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](8,"\n        "),core["\u0275\u0275elementEnd"]()}if(2&rf){const bitstreamRD_r1=core["\u0275\u0275nextContext"](3).ngVar,ctx_r7=core["\u0275\u0275nextContext"]();core["\u0275\u0275property"]("formId","edit-bitstream-form-id")("formGroup",ctx_r7.formGroup)("formModel",ctx_r7.formModel)("formLayout",ctx_r7.formLayout)("submitLabel","form.save"),core["\u0275\u0275advance"](4),core["\u0275\u0275property"]("routerLink",core["\u0275\u0275pureFunction1"](9,_c0,null==bitstreamRD_r1||null==bitstreamRD_r1.payload?null:bitstreamRD_r1.payload.id)),core["\u0275\u0275advance"](1),core["\u0275\u0275textInterpolate"](core["\u0275\u0275pipeBind1"](6,7,"bitstream.edit.authorizations.link"))}}function EditBitstreamPageComponent_ng_container_0_div_2_div_2_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"div",5),core["\u0275\u0275text"](1,"\n      "),core["\u0275\u0275elementStart"](2,"div",6),core["\u0275\u0275text"](3,"\n        "),core["\u0275\u0275element"](4,"ds-thumbnail",7),core["\u0275\u0275text"](5,"\n      "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](6,"\n      "),core["\u0275\u0275elementStart"](7,"div",8),core["\u0275\u0275text"](8,"\n        "),core["\u0275\u0275elementStart"](9,"div",2),core["\u0275\u0275text"](10,"\n          "),core["\u0275\u0275elementStart"](11,"div",5),core["\u0275\u0275text"](12,"\n            "),core["\u0275\u0275elementStart"](13,"div",9),core["\u0275\u0275text"](14,"\n              "),core["\u0275\u0275elementStart"](15,"h3"),core["\u0275\u0275text"](16),core["\u0275\u0275elementStart"](17,"span",10),core["\u0275\u0275text"](18),core["\u0275\u0275pipe"](19,"dsFileSize"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](20,"\n            "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](21,"\n          "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](22,"\n        "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](23,"\n        "),core["\u0275\u0275template"](24,EditBitstreamPageComponent_ng_container_0_div_2_div_2_ds_form_24_Template,9,11,"ds-form",11),core["\u0275\u0275text"](25,"\n      "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](26,"\n    "),core["\u0275\u0275elementEnd"]()),2&rf){const bitstreamRD_r1=core["\u0275\u0275nextContext"](2).ngVar,ctx_r4=core["\u0275\u0275nextContext"]();core["\u0275\u0275advance"](4),core["\u0275\u0275property"]("thumbnail",null==bitstreamRD_r1?null:bitstreamRD_r1.payload),core["\u0275\u0275advance"](12),core["\u0275\u0275textInterpolate1"]("",null==bitstreamRD_r1||null==bitstreamRD_r1.payload?null:bitstreamRD_r1.payload.name," "),core["\u0275\u0275advance"](2),core["\u0275\u0275textInterpolate1"]("(",core["\u0275\u0275pipeBind1"](19,4,null==bitstreamRD_r1||null==bitstreamRD_r1.payload?null:bitstreamRD_r1.payload.sizeBytes),")"),core["\u0275\u0275advance"](6),core["\u0275\u0275property"]("ngIf",ctx_r4.formGroup)}}function EditBitstreamPageComponent_ng_container_0_div_2_ds_error_4_Template(rf,ctx){1&rf&&(core["\u0275\u0275element"](0,"ds-error",15),core["\u0275\u0275pipe"](1,"translate")),2&rf&&core["\u0275\u0275propertyInterpolate"]("message",core["\u0275\u0275pipeBind1"](1,1,"error.bitstream"))}function EditBitstreamPageComponent_ng_container_0_div_2_ds_loading_6_Template(rf,ctx){1&rf&&(core["\u0275\u0275element"](0,"ds-loading",15),core["\u0275\u0275pipe"](1,"translate")),2&rf&&core["\u0275\u0275propertyInterpolate"]("message",core["\u0275\u0275pipeBind1"](1,1,"loading.bitstream"))}function EditBitstreamPageComponent_ng_container_0_div_2_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"div",2),core["\u0275\u0275text"](1,"\n    "),core["\u0275\u0275template"](2,EditBitstreamPageComponent_ng_container_0_div_2_div_2_Template,27,6,"div",3),core["\u0275\u0275text"](3,"\n    "),core["\u0275\u0275template"](4,EditBitstreamPageComponent_ng_container_0_div_2_ds_error_4_Template,2,3,"ds-error",4),core["\u0275\u0275text"](5,"\n    "),core["\u0275\u0275template"](6,EditBitstreamPageComponent_ng_container_0_div_2_ds_loading_6_Template,2,3,"ds-loading",4),core["\u0275\u0275text"](7,"\n  "),core["\u0275\u0275elementEnd"]()),2&rf){const formatsRD_r3=ctx.ngVar,bitstreamRD_r1=core["\u0275\u0275nextContext"]().ngVar;core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",(null==bitstreamRD_r1?null:bitstreamRD_r1.hasSucceeded)&&(null==formatsRD_r3?null:formatsRD_r3.hasSucceeded)),core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",null==bitstreamRD_r1?null:bitstreamRD_r1.hasFailed),core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngIf",!bitstreamRD_r1||!formatsRD_r3||(null==bitstreamRD_r1?null:bitstreamRD_r1.isLoading)||(null==formatsRD_r3?null:formatsRD_r3.isLoading))}}function EditBitstreamPageComponent_ng_container_0_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementContainerStart"](0),core["\u0275\u0275text"](1,"\n  "),core["\u0275\u0275template"](2,EditBitstreamPageComponent_ng_container_0_div_2_Template,8,3,"div",1),core["\u0275\u0275pipe"](3,"async"),core["\u0275\u0275text"](4,"\n"),core["\u0275\u0275elementContainerEnd"]()),2&rf){const ctx_r0=core["\u0275\u0275nextContext"]();core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("ngVar",core["\u0275\u0275pipeBind1"](3,1,ctx_r0.bitstreamFormatsRD$))}}class edit_bitstream_page_component_EditBitstreamPageComponent{constructor(route,router,changeDetectorRef,location,formService,translate,bitstreamService,dsoNameService,notificationsService,bitstreamFormatService){this.route=route,this.router=router,this.changeDetectorRef=changeDetectorRef,this.location=location,this.formService=formService,this.translate=translate,this.bitstreamService=bitstreamService,this.dsoNameService=dsoNameService,this.notificationsService=notificationsService,this.bitstreamFormatService=bitstreamFormatService,this.KEY_PREFIX="bitstream.edit.form.",this.LABEL_KEY_SUFFIX=".label",this.HINT_KEY_SUFFIX=".hint",this.NOTIFICATIONS_PREFIX="bitstream.edit.notifications.",this.IMAGE_WIDTH_METADATA="iiif.image.width",this.IMAGE_HEIGHT_METADATA="iiif.image.height",this.IIIF_TOC_METADATA="iiif.toc",this.IIIF_LABEL_METADATA="iiif.label",this.findAllOptions={elementsPerPage:9999},this.fileNameModel=new ds_dynamic_input_model.a({hasSelectableMetadata:!1,metadataFields:[],repeatable:!1,submissionId:"",id:"fileName",name:"fileName",required:!0,validators:{required:null},errorMessages:{required:"You must provide a file name for the bitstream"}}),this.primaryBitstreamModel=new custom_switch_model.b({id:"primaryBitstream",name:"primaryBitstream"}),this.descriptionModel=new ds_dynamic_textarea_model.a({hasSelectableMetadata:!1,metadataFields:[],repeatable:!1,submissionId:"",id:"description",name:"description",rows:10}),this.selectedFormatModel=new fesm2015_core.N({id:"selectedFormat",name:"selectedFormat"}),this.newFormatModel=new fesm2015_core.J({id:"newFormat",name:"newFormat"}),this.iiifLabelModel=new ds_dynamic_input_model.a({hasSelectableMetadata:!1,metadataFields:[],repeatable:!1,submissionId:"",id:"iiifLabel",name:"iiifLabel"},{grid:{host:"col col-lg-6 d-inline-block"}}),this.iiifLabelContainer=new fesm2015_core.D({id:"iiifLabelContainer",group:[this.iiifLabelModel]},{grid:{host:"form-row"}}),this.iiifTocModel=new ds_dynamic_input_model.a({hasSelectableMetadata:!1,metadataFields:[],repeatable:!1,submissionId:"",id:"iiifToc",name:"iiifToc"},{grid:{host:"col col-lg-6 d-inline-block"}}),this.iiifTocContainer=new fesm2015_core.D({id:"iiifTocContainer",group:[this.iiifTocModel]},{grid:{host:"form-row"}}),this.iiifWidthModel=new ds_dynamic_input_model.a({hasSelectableMetadata:!1,metadataFields:[],repeatable:!1,submissionId:"",id:"iiifWidth",name:"iiifWidth"},{grid:{host:"col col-lg-6 d-inline-block"}}),this.iiifWidthContainer=new fesm2015_core.D({id:"iiifWidthContainer",group:[this.iiifWidthModel]},{grid:{host:"form-row"}}),this.iiifHeightModel=new ds_dynamic_input_model.a({hasSelectableMetadata:!1,metadataFields:[],repeatable:!1,submissionId:"",id:"iiifHeight",name:"iiifHeight"},{grid:{host:"col col-lg-6 d-inline-block"}}),this.iiifHeightContainer=new fesm2015_core.D({id:"iiifHeightContainer",group:[this.iiifHeightModel]},{grid:{host:"form-row"}}),this.inputModels=[this.fileNameModel,this.primaryBitstreamModel,this.descriptionModel,this.selectedFormatModel,this.newFormatModel],this.formModel=[new fesm2015_core.D({id:"fileNamePrimaryContainer",group:[this.fileNameModel,this.primaryBitstreamModel]},{grid:{host:"form-row"}}),new fesm2015_core.D({id:"descriptionContainer",group:[this.descriptionModel]}),new fesm2015_core.D({id:"formatContainer",group:[this.selectedFormatModel,this.newFormatModel]})],this.newFormatBaseLayout="col col-sm-6 d-inline-block",this.formLayout={fileName:{grid:{host:"col col-sm-8 d-inline-block"}},primaryBitstream:{grid:{host:"col col-sm-4 d-inline-block switch"}},description:{grid:{host:"col-12 d-inline-block"}},embargo:{grid:{host:"col-12 d-inline-block"}},selectedFormat:{grid:{host:"col col-sm-6 d-inline-block"}},newFormat:{grid:{host:this.newFormatBaseLayout+" invisible"}},fileNamePrimaryContainer:{grid:{host:"row position-relative"}},descriptionContainer:{grid:{host:"row"}},formatContainer:{grid:{host:"row"}}},this.isIIIF=!1,this.subs=[]}ngOnInit(){this.itemId=this.route.snapshot.queryParams.itemId,this.entityType=this.route.snapshot.queryParams.entityType,this.bitstreamRD$=this.route.data.pipe(Object(map.a)((data=>data.bitstream))),this.bitstreamFormatsRD$=this.bitstreamFormatService.findAll(this.findAllOptions);const bitstream$=this.bitstreamRD$.pipe(Object(operators.i)(),Object(operators.o)()),allFormats$=this.bitstreamFormatsRD$.pipe(Object(operators.i)(),Object(operators.o)());this.subs.push(Object(combineLatest.a)(bitstream$,allFormats$).subscribe((([bitstream,allFormats])=>{this.bitstream=bitstream,this.formats=allFormats.page,this.setIiifStatus(this.bitstream)}))),this.subs.push(this.translate.onLangChange.subscribe((()=>{this.updateFieldTranslations()})))}setForm(){this.formGroup=this.formService.createFormGroup(this.formModel),this.updateFormatModel(),this.updateForm(this.bitstream),this.updateFieldTranslations()}updateForm(bitstream){this.formGroup.patchValue({fileNamePrimaryContainer:{fileName:bitstream.name,primaryBitstream:!1},descriptionContainer:{description:bitstream.firstMetadataValue("dc.description")},formatContainer:{newFormat:Object(empty_util.b)(bitstream.firstMetadata("dc.format"))?bitstream.firstMetadata("dc.format").value:void 0}}),this.isIIIF&&this.formGroup.patchValue({iiifLabelContainer:{iiifLabel:bitstream.firstMetadataValue(this.IIIF_LABEL_METADATA)},iiifTocContainer:{iiifToc:bitstream.firstMetadataValue(this.IIIF_TOC_METADATA)},iiifWidthContainer:{iiifWidth:bitstream.firstMetadataValue(this.IMAGE_WIDTH_METADATA)},iiifHeightContainer:{iiifHeight:bitstream.firstMetadataValue(this.IMAGE_HEIGHT_METADATA)}}),this.bitstream.format.pipe(Object(operators.d)()).subscribe((format=>{this.originalFormat=format,this.formGroup.patchValue({formatContainer:{selectedFormat:format.id}}),this.updateNewFormatLayout(format.id)}))}updateFormatModel(){this.selectedFormatModel.options=this.formats.map((format=>Object.assign({value:format.id,label:this.isUnknownFormat(format.id)?this.translate.instant(this.KEY_PREFIX+"selectedFormat.unknown"):format.shortDescription})))}updateNewFormatLayout(selectedId){this.isUnknownFormat(selectedId)?this.formLayout.newFormat.grid.host=this.newFormatBaseLayout:this.formLayout.newFormat.grid.host=this.newFormatBaseLayout+" invisible"}isUnknownFormat(id){const format=this.formats.find((f=>f.id===id));return Object(empty_util.b)(format)&&format.supportLevel===bitstream_format_support_level.a.Unknown}updateFieldTranslations(){this.inputModels.forEach((fieldModel=>{this.updateFieldTranslation(fieldModel)}))}updateFieldTranslation(fieldModel){fieldModel.label=this.translate.instant(this.KEY_PREFIX+fieldModel.id+this.LABEL_KEY_SUFFIX),fieldModel.id!==this.primaryBitstreamModel.id&&(fieldModel.hint=this.translate.instant(this.KEY_PREFIX+fieldModel.id+this.HINT_KEY_SUFFIX))}onChange(event){const model=event.model;model.id===this.selectedFormatModel.id&&this.updateNewFormatLayout(model.value)}onSubmit(){const updatedValues=this.formGroup.getRawValue(),updatedBitstream=this.formToBitstream(updatedValues),selectedFormat=this.formats.find((f=>f.id===updatedValues.formatContainer.selectedFormat));let bitstream$;bitstream$=selectedFormat.id!==this.originalFormat.id?this.bitstreamService.updateFormat(this.bitstream,selectedFormat).pipe(Object(operators.g)(),Object(map.a)((formatResponse=>{if(!Object(empty_util.b)(formatResponse)||!formatResponse.hasFailed)return formatResponse.payload;this.notificationsService.error(this.translate.instant(this.NOTIFICATIONS_PREFIX+"error.format.title"),formatResponse.errorMessage)}))):Object(of.a)(this.bitstream),bitstream$.pipe(Object(switchMap.a)((()=>this.bitstreamService.update(updatedBitstream).pipe(Object(operators.j)())))).subscribe((()=>{this.bitstreamService.commitUpdates(),this.notificationsService.success(this.translate.instant(this.NOTIFICATIONS_PREFIX+"saved.title"),this.translate.instant(this.NOTIFICATIONS_PREFIX+"saved.content")),this.navigateToItemEditBitstreams()}))}formToBitstream(rawForm){const updatedBitstream=Object(lodash.cloneDeep)(this.bitstream),newMetadata=updatedBitstream.metadata;rawForm.fileNamePrimaryContainer.primaryBitstream;return metadata_utils.a.setFirstValue(newMetadata,"dc.title",rawForm.fileNamePrimaryContainer.fileName),metadata_utils.a.setFirstValue(newMetadata,"dc.description",rawForm.descriptionContainer.description),this.isIIIF&&(Object(empty_util.d)(rawForm.iiifLabelContainer.iiifLabel)?delete newMetadata[this.IIIF_LABEL_METADATA]:metadata_utils.a.setFirstValue(newMetadata,this.IIIF_LABEL_METADATA,rawForm.iiifLabelContainer.iiifLabel),Object(empty_util.d)(rawForm.iiifTocContainer.iiifToc)?delete newMetadata[this.IIIF_TOC_METADATA]:metadata_utils.a.setFirstValue(newMetadata,this.IIIF_TOC_METADATA,rawForm.iiifTocContainer.iiifToc),Object(empty_util.d)(rawForm.iiifWidthContainer.iiifWidth)?delete newMetadata[this.IMAGE_WIDTH_METADATA]:metadata_utils.a.setFirstValue(newMetadata,this.IMAGE_WIDTH_METADATA,rawForm.iiifWidthContainer.iiifWidth),Object(empty_util.d)(rawForm.iiifHeightContainer.iiifHeight)?delete newMetadata[this.IMAGE_HEIGHT_METADATA]:metadata_utils.a.setFirstValue(newMetadata,this.IMAGE_HEIGHT_METADATA,rawForm.iiifHeightContainer.iiifHeight)),Object(empty_util.e)(rawForm.formatContainer.newFormat)&&metadata_utils.a.setFirstValue(newMetadata,"dc.format",rawForm.formatContainer.newFormat),updatedBitstream.metadata=newMetadata,updatedBitstream}onCancel(){this.navigateToItemEditBitstreams()}navigateToItemEditBitstreams(){Object(empty_util.b)(this.itemId)?this.router.navigate([Object(item_page_routing_paths.d)(this.entityType,this.itemId),"bitstreams"]):this.bitstream.bundle.pipe(Object(operators.j)(),Object(mergeMap.a)((bundle=>bundle.item.pipe(Object(operators.j)())))).subscribe((item=>{this.router.navigate([Object(item_page_routing_paths.e)(item),"bitstreams"])}))}setIiifStatus(bitstream){const regexExcludeBundles=/OTHERCONTENT|THUMBNAIL|LICENSE/,regexIIIFItem=/true|yes/i,isImage$=this.bitstream.format.pipe(Object(operators.i)(),Object(map.a)((format=>format.payload.mimetype.includes("image/")))),isIIIFBundle$=this.bitstream.bundle.pipe(Object(operators.i)(),Object(map.a)((bundle=>null==this.dsoNameService.getName(bundle.payload).match(regexExcludeBundles)))),isEnabled$=this.bitstream.bundle.pipe(Object(operators.i)(),Object(map.a)((bundle=>bundle.payload.item.pipe(Object(operators.i)(),Object(map.a)((item=>item.payload.firstMetadataValue("dspace.iiif.enabled")&&null!==item.payload.firstMetadataValue("dspace.iiif.enabled").match(regexIIIFItem))))))),iiifSub=Object(combineLatest.a)(isImage$,isIIIFBundle$,isEnabled$).subscribe((([isImage,isIIIFBundle,isEnabled])=>{isImage&&isIIIFBundle&&isEnabled&&(this.isIIIF=!0,this.inputModels.push(this.iiifLabelModel),this.formModel.push(this.iiifLabelContainer),this.inputModels.push(this.iiifTocModel),this.formModel.push(this.iiifTocContainer),this.inputModels.push(this.iiifWidthModel),this.formModel.push(this.iiifWidthContainer),this.inputModels.push(this.iiifHeightModel),this.formModel.push(this.iiifHeightContainer)),this.setForm(),this.changeDetectorRef.detectChanges()}));this.subs.push(iiifSub)}ngOnDestroy(){this.subs.filter((subscription=>Object(empty_util.b)(subscription))).forEach((subscription=>subscription.unsubscribe()))}}edit_bitstream_page_component_EditBitstreamPageComponent.\u0275fac=function EditBitstreamPageComponent_Factory(t){return new(t||edit_bitstream_page_component_EditBitstreamPageComponent)(core["\u0275\u0275directiveInject"](fesm2015_router.a),core["\u0275\u0275directiveInject"](fesm2015_router.g),core["\u0275\u0275directiveInject"](core.ChangeDetectorRef),core["\u0275\u0275directiveInject"](common.Location),core["\u0275\u0275directiveInject"](fesm2015_core.G),core["\u0275\u0275directiveInject"](ngx_translate_core.e),core["\u0275\u0275directiveInject"](bitstream_data_service.a),core["\u0275\u0275directiveInject"](dso_name_service.a),core["\u0275\u0275directiveInject"](notifications_service.a),core["\u0275\u0275directiveInject"](bitstream_format_data_service.a))},edit_bitstream_page_component_EditBitstreamPageComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:edit_bitstream_page_component_EditBitstreamPageComponent,selectors:[["ds-edit-bitstream-page"]],decls:3,vars:3,consts:[[4,"ngVar"],["class","container",4,"ngVar"],[1,"container"],["class","row",4,"ngIf"],[3,"message",4,"ngIf"],[1,"row"],[1,"col-md-2"],[3,"thumbnail"],[1,"col-md-10"],[1,"col-12"],[1,"text-muted"],[3,"formId","formGroup","formModel","formLayout","submitLabel","submitForm","cancel","dfChange",4,"ngIf"],[3,"formId","formGroup","formModel","formLayout","submitLabel","submitForm","cancel","dfChange"],["additional","",1,"container","py-3"],[3,"routerLink"],[3,"message"]],template:function EditBitstreamPageComponent_Template(rf,ctx){1&rf&&(core["\u0275\u0275template"](0,EditBitstreamPageComponent_ng_container_0_Template,5,3,"ng-container",0),core["\u0275\u0275pipe"](1,"async"),core["\u0275\u0275text"](2,"\n")),2&rf&&core["\u0275\u0275property"]("ngVar",core["\u0275\u0275pipeBind1"](1,1,ctx.bitstreamRD$))},directives:[var_directive.a,common.NgIf,thumbnail_component.a,form_component.a,fesm2015_forms.NgControlStatusGroup,fesm2015_forms.FormGroupDirective,fesm2015_router.j,error_component.a,loading_component.a],pipes:[common.AsyncPipe,file_size_pipe.a,ngx_translate_core.d],styles:["[_nghost-%COMP%]     .switch{position:absolute;top:calc(var(--bs-spacer) * 2.5)}[_nghost-%COMP%]     ds-dynamic-form-control-container>div>label{margin-top:1.75rem}"],changeDetection:0});var authenticated_guard=__webpack_require__("tPZA"),follow_link_config_model=__webpack_require__("84Zn");class bitstream_page_resolver_BitstreamPageResolver{constructor(bitstreamService){this.bitstreamService=bitstreamService}resolve(route,state){return this.bitstreamService.findById(route.params.id,!0,!1,...this.followLinks).pipe(Object(operators.g)())}get followLinks(){return[Object(follow_link_config_model.a)("bundle",{},Object(follow_link_config_model.a)("item")),Object(follow_link_config_model.a)("format")]}}bitstream_page_resolver_BitstreamPageResolver.\u0275fac=function BitstreamPageResolver_Factory(t){return new(t||bitstream_page_resolver_BitstreamPageResolver)(core["\u0275\u0275inject"](bitstream_data_service.a))},bitstream_page_resolver_BitstreamPageResolver.\u0275prov=core["\u0275\u0275defineInjectable"]({token:bitstream_page_resolver_BitstreamPageResolver,factory:bitstream_page_resolver_BitstreamPageResolver.\u0275fac});var bitstream_download_page_component=__webpack_require__("Gt6B"),resource_policy_target_resolver=__webpack_require__("n1Qy"),resource_policy_create_component=__webpack_require__("EEUA"),resource_policy_resolver=__webpack_require__("G5zm"),resource_policy_edit_component=__webpack_require__("ALMP"),first=__webpack_require__("SxV6"),resource_policies_component=__webpack_require__("+Bs4");const bitstream_authorizations_component_c0=function(a1){return["/bitstreams",a1,"edit"]};class bitstream_authorizations_component_BitstreamAuthorizationsComponent{constructor(route){this.route=route}ngOnInit(){this.dsoRD$=this.route.data.pipe(Object(first.a)(),Object(map.a)((data=>data.bitstream)))}}bitstream_authorizations_component_BitstreamAuthorizationsComponent.\u0275fac=function BitstreamAuthorizationsComponent_Factory(t){return new(t||bitstream_authorizations_component_BitstreamAuthorizationsComponent)(core["\u0275\u0275directiveInject"](fesm2015_router.a))},bitstream_authorizations_component_BitstreamAuthorizationsComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:bitstream_authorizations_component_BitstreamAuthorizationsComponent,selectors:[["ds-collection-authorizations"]],decls:19,vars:12,consts:[[1,"container"],[3,"resourceType","resourceUUID"],[1,"button-row","bottom"],[1,"text-right"],["role","button",1,"btn","btn-outline-secondary","mr-1",3,"routerLink"],[1,"fas","fa-arrow-left"]],template:function BitstreamAuthorizationsComponent_Template(rf,ctx){if(1&rf&&(core["\u0275\u0275elementStart"](0,"div",0),core["\u0275\u0275text"](1,"\n  "),core["\u0275\u0275element"](2,"ds-resource-policies",1),core["\u0275\u0275pipe"](3,"async"),core["\u0275\u0275text"](4,"\n  "),core["\u0275\u0275elementStart"](5,"div",2),core["\u0275\u0275text"](6,"\n    "),core["\u0275\u0275elementStart"](7,"div",3),core["\u0275\u0275text"](8,"\n      "),core["\u0275\u0275elementStart"](9,"a",4),core["\u0275\u0275pipe"](10,"async"),core["\u0275\u0275text"](11,"\n        "),core["\u0275\u0275element"](12,"i",5),core["\u0275\u0275text"](13),core["\u0275\u0275pipe"](14,"translate"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](15,"\n    "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](16,"\n  "),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](17,"\n"),core["\u0275\u0275elementEnd"](),core["\u0275\u0275text"](18,"\n")),2&rf){let tmp_1_0=null,tmp_2_0=null;core["\u0275\u0275advance"](2),core["\u0275\u0275property"]("resourceType","bitstream")("resourceUUID",null==(tmp_1_0=core["\u0275\u0275pipeBind1"](3,4,ctx.dsoRD$))||null==tmp_1_0.payload?null:tmp_1_0.payload.id),core["\u0275\u0275advance"](7),core["\u0275\u0275property"]("routerLink",core["\u0275\u0275pureFunction1"](10,bitstream_authorizations_component_c0,null==(tmp_2_0=core["\u0275\u0275pipeBind1"](10,6,ctx.dsoRD$))||null==tmp_2_0.payload?null:tmp_2_0.payload.id)),core["\u0275\u0275advance"](4),core["\u0275\u0275textInterpolate1"](" ",core["\u0275\u0275pipeBind1"](14,8,"bitstream.edit.return"),"\n      ")}},directives:[resource_policies_component.a,fesm2015_router.j],pipes:[common.AsyncPipe,ngx_translate_core.d],encapsulation:2});class legacy_bitstream_url_resolver_LegacyBitstreamUrlResolver{constructor(bitstreamDataService){this.bitstreamDataService=bitstreamDataService}resolve(route,state){const prefix=route.params.prefix,suffix=route.params.suffix,filename=route.params.filename;let sequenceId=route.params.sequence_id;return Object(empty_util.a)(sequenceId)&&(sequenceId=route.queryParams.sequenceId),this.bitstreamDataService.findByItemHandle(`${prefix}/${suffix}`,sequenceId,filename).pipe(Object(operators.g)())}}legacy_bitstream_url_resolver_LegacyBitstreamUrlResolver.\u0275fac=function LegacyBitstreamUrlResolver_Factory(t){return new(t||legacy_bitstream_url_resolver_LegacyBitstreamUrlResolver)(core["\u0275\u0275inject"](bitstream_data_service.a))},legacy_bitstream_url_resolver_LegacyBitstreamUrlResolver.\u0275prov=core["\u0275\u0275defineInjectable"]({token:legacy_bitstream_url_resolver_LegacyBitstreamUrlResolver,factory:legacy_bitstream_url_resolver_LegacyBitstreamUrlResolver.\u0275fac,providedIn:"root"});class BitstreamPageRoutingModule{}BitstreamPageRoutingModule.\u0275fac=function BitstreamPageRoutingModule_Factory(t){return new(t||BitstreamPageRoutingModule)},BitstreamPageRoutingModule.\u0275mod=core["\u0275\u0275defineNgModule"]({type:BitstreamPageRoutingModule}),BitstreamPageRoutingModule.\u0275inj=core["\u0275\u0275defineInjector"]({providers:[bitstream_page_resolver_BitstreamPageResolver],imports:[[fesm2015_router.k.forChild([{path:"handle/:prefix/:suffix/:filename",component:bitstream_download_page_component.a,resolve:{bitstream:legacy_bitstream_url_resolver_LegacyBitstreamUrlResolver}},{path:":prefix/:suffix/:sequence_id/:filename",component:bitstream_download_page_component.a,resolve:{bitstream:legacy_bitstream_url_resolver_LegacyBitstreamUrlResolver}},{path:":id/download",component:bitstream_download_page_component.a,resolve:{bitstream:bitstream_page_resolver_BitstreamPageResolver}},{path:":id/edit",component:edit_bitstream_page_component_EditBitstreamPageComponent,resolve:{bitstream:bitstream_page_resolver_BitstreamPageResolver},canActivate:[authenticated_guard.a]},{path:":id/authorizations",children:[{path:"create",resolve:{resourcePolicyTarget:resource_policy_target_resolver.a},component:resource_policy_create_component.a,data:{title:"resource-policies.create.page.title",showBreadcrumbs:!0}},{path:"edit",resolve:{resourcePolicy:resource_policy_resolver.a},component:resource_policy_edit_component.a,data:{title:"resource-policies.edit.page.title",showBreadcrumbs:!0}},{path:"",resolve:{bitstream:bitstream_page_resolver_BitstreamPageResolver},component:bitstream_authorizations_component_BitstreamAuthorizationsComponent,data:{title:"bitstream.edit.authorizations.title",showBreadcrumbs:!0}}]}])]]});var form_module=__webpack_require__("kcqd"),resource_policies_module=__webpack_require__("GFj5");class BitstreamPageModule{}BitstreamPageModule.\u0275fac=function BitstreamPageModule_Factory(t){return new(t||BitstreamPageModule)},BitstreamPageModule.\u0275mod=core["\u0275\u0275defineNgModule"]({type:BitstreamPageModule}),BitstreamPageModule.\u0275inj=core["\u0275\u0275defineInjector"]({imports:[[common.CommonModule,shared_module.a,BitstreamPageRoutingModule,form_module.a,resource_policies_module.a]]})},kcqd:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return FormModule}));var core=__webpack_require__("fXoL"),common=__webpack_require__("ofXK"),form_component=__webpack_require__("hqmO"),fesm2015_core=__webpack_require__("e+Av"),ds_dynamic_form_control_container_component=__webpack_require__("NvTF");function DsDynamicFormComponent_ds_dynamic_form_control_container_0_Template(rf,ctx){if(1&rf){const _r3=core["\u0275\u0275getCurrentView"]();core["\u0275\u0275elementStart"](0,"ds-dynamic-form-control-container",1),core["\u0275\u0275listener"]("dfBlur",(function DsDynamicFormComponent_ds_dynamic_form_control_container_0_Template_ds_dynamic_form_control_container_dfBlur_0_listener($event){core["\u0275\u0275restoreView"](_r3);const ctx_r2=core["\u0275\u0275nextContext"]();return ctx_r2.onCustomEvent($event,ctx_r2.blur)}))("dfChange",(function DsDynamicFormComponent_ds_dynamic_form_control_container_0_Template_ds_dynamic_form_control_container_dfChange_0_listener($event){core["\u0275\u0275restoreView"](_r3);const ctx_r4=core["\u0275\u0275nextContext"]();return ctx_r4.onCustomEvent($event,ctx_r4.change)}))("dfFocus",(function DsDynamicFormComponent_ds_dynamic_form_control_container_0_Template_ds_dynamic_form_control_container_dfFocus_0_listener($event){core["\u0275\u0275restoreView"](_r3);const ctx_r5=core["\u0275\u0275nextContext"]();return ctx_r5.onCustomEvent($event,ctx_r5.focus)}))("ngbEvent",(function DsDynamicFormComponent_ds_dynamic_form_control_container_0_Template_ds_dynamic_form_control_container_ngbEvent_0_listener($event){core["\u0275\u0275restoreView"](_r3);const ctx_r6=core["\u0275\u0275nextContext"]();return ctx_r6.onCustomEvent($event,ctx_r6.ngbEvent)})),core["\u0275\u0275elementEnd"]()}if(2&rf){const model_r1=ctx.$implicit,ctx_r0=core["\u0275\u0275nextContext"]();core["\u0275\u0275property"]("formId",ctx_r0.formId)("group",ctx_r0.formGroup)("hasErrorMessaging",model_r1.hasErrorMessages)("hidden",model_r1.hidden)("layout",ctx_r0.formLayout)("model",model_r1)("templates",ctx_r0.templates)("asBootstrapFormGroup",!0)}}class ds_dynamic_form_component_DsDynamicFormComponent extends fesm2015_core.x{constructor(changeDetectorRef,componentService){super(changeDetectorRef,componentService),this.blur=new core.EventEmitter,this.change=new core.EventEmitter,this.focus=new core.EventEmitter,this.ngbEvent=new core.EventEmitter}}ds_dynamic_form_component_DsDynamicFormComponent.\u0275fac=function DsDynamicFormComponent_Factory(t){return new(t||ds_dynamic_form_component_DsDynamicFormComponent)(core["\u0275\u0275directiveInject"](core.ChangeDetectorRef),core["\u0275\u0275directiveInject"](fesm2015_core.y))},ds_dynamic_form_component_DsDynamicFormComponent.\u0275cmp=core["\u0275\u0275defineComponent"]({type:ds_dynamic_form_component_DsDynamicFormComponent,selectors:[["ds-dynamic-form"]],contentQueries:function DsDynamicFormComponent_ContentQueries(rf,ctx,dirIndex){if(1&rf&&core["\u0275\u0275contentQuery"](dirIndex,fesm2015_core.O,0),2&rf){let _t;core["\u0275\u0275queryRefresh"](_t=core["\u0275\u0275loadQuery"]())&&(ctx.templates=_t)}},viewQuery:function DsDynamicFormComponent_Query(rf,ctx){if(1&rf&&core["\u0275\u0275viewQuery"](ds_dynamic_form_control_container_component.a,1),2&rf){let _t;core["\u0275\u0275queryRefresh"](_t=core["\u0275\u0275loadQuery"]())&&(ctx.components=_t)}},inputs:{formId:"formId",formGroup:"formGroup",formModel:"formModel",formLayout:"formLayout"},outputs:{blur:"dfBlur",change:"dfChange",focus:"dfFocus",ngbEvent:"ngbEvent"},features:[core["\u0275\u0275InheritDefinitionFeature"]],decls:2,vars:2,consts:[[3,"formId","group","hasErrorMessaging","hidden","layout","model","templates","asBootstrapFormGroup","dfBlur","dfChange","dfFocus","ngbEvent",4,"ngFor","ngForOf","ngForTrackBy"],[3,"formId","group","hasErrorMessaging","hidden","layout","model","templates","asBootstrapFormGroup","dfBlur","dfChange","dfFocus","ngbEvent"]],template:function DsDynamicFormComponent_Template(rf,ctx){1&rf&&(core["\u0275\u0275template"](0,DsDynamicFormComponent_ds_dynamic_form_control_container_0_Template,1,8,"ds-dynamic-form-control-container",0),core["\u0275\u0275text"](1,"\n")),2&rf&&core["\u0275\u0275property"]("ngForOf",ctx.formModel)("ngForTrackBy",ctx.trackByFn)},directives:[common.NgForOf,ds_dynamic_form_control_container_component.a],encapsulation:2});var dynamic_list_component=__webpack_require__("ZO65"),dynamic_lookup_component=__webpack_require__("0pnk"),dynamic_disabled_component=__webpack_require__("sw+l"),dynamic_lookup_relation_modal_component=__webpack_require__("1Pbu"),dynamic_scrollable_dropdown_component=__webpack_require__("bPV6"),dynamic_tag_component=__webpack_require__("Gu/b"),dynamic_onebox_component=__webpack_require__("A/iK"),dynamic_relation_group_components=__webpack_require__("KKO+"),date_picker_component=__webpack_require__("Ysrn"),dynamic_form_group_component=__webpack_require__("tqJZ"),dynamic_form_array_component=__webpack_require__("ZTun"),dynamic_date_picker_inline_component=__webpack_require__("uyTL"),dynamic_lookup_relation_search_tab_component=__webpack_require__("Ui2r"),dynamic_lookup_relation_selection_tab_component=__webpack_require__("8HnP"),dynamic_lookup_relation_external_source_tab_component=__webpack_require__("zVKZ"),shared_module=__webpack_require__("PCNd"),ngx_translate_core=__webpack_require__("sYmb"),search_module=__webpack_require__("kMeL"),existing_metadata_list_element_component=__webpack_require__("yXJd"),existing_relation_list_element_component=__webpack_require__("/Vzl"),external_source_entry_import_modal_component=__webpack_require__("zGzN"),custom_switch_component=__webpack_require__("xjoE"),ui_ng_bootstrap=__webpack_require__("n7Wa"),fesm2015_forms=__webpack_require__("3Pt+"),drag_drop=__webpack_require__("5+WD");custom_switch_component.a,ds_dynamic_form_control_container_component.a,dynamic_list_component.a,dynamic_lookup_component.a,dynamic_lookup_relation_search_tab_component.a,dynamic_lookup_relation_selection_tab_component.a,dynamic_lookup_relation_external_source_tab_component.a,dynamic_disabled_component.a,dynamic_lookup_relation_modal_component.a,dynamic_scrollable_dropdown_component.a,dynamic_tag_component.a,dynamic_onebox_component.a,dynamic_relation_group_components.a,date_picker_component.b,dynamic_form_group_component.a,dynamic_form_array_component.a,dynamic_date_picker_inline_component.a,existing_metadata_list_element_component.a,existing_relation_list_element_component.a,external_source_entry_import_modal_component.a,form_component.a;class FormModule{}FormModule.\u0275fac=function FormModule_Factory(t){return new(t||FormModule)},FormModule.\u0275mod=core["\u0275\u0275defineNgModule"]({type:FormModule}),FormModule.\u0275inj=core["\u0275\u0275defineInjector"]({providers:[{provide:fesm2015_core.c,useValue:ds_dynamic_form_control_container_component.b}],imports:[[common.CommonModule,fesm2015_core.I,ui_ng_bootstrap.a,search_module.a,shared_module.a,ngx_translate_core.c]]}),core["\u0275\u0275setComponentScope"](dynamic_form_group_component.a,[fesm2015_forms.NgControlStatusGroup,fesm2015_forms.FormGroupDirective,fesm2015_forms.FormGroupName,common.NgClass,common.NgForOf,ds_dynamic_form_control_container_component.a],[]),core["\u0275\u0275setComponentScope"](dynamic_form_array_component.a,[fesm2015_forms.NgControlStatusGroup,fesm2015_forms.FormGroupDirective,fesm2015_forms.FormArrayName,common.NgClass,drag_drop.c,common.NgForOf,drag_drop.a,drag_drop.b,fesm2015_forms.FormGroupName,common.NgTemplateOutlet,ds_dynamic_form_control_container_component.a],[]),core["\u0275\u0275setComponentScope"](form_component.a,[fesm2015_forms["\u0275angular_packages_forms_forms_ba"],fesm2015_forms.NgControlStatusGroup,fesm2015_forms.FormGroupDirective,ds_dynamic_form_component_DsDynamicFormComponent,fesm2015_core.O,common.NgIf],[ngx_translate_core.d,common.AsyncPipe])},mOAm:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return GROUP_EDIT_PATH})),__webpack_require__.d(__webpack_exports__,"b",(function(){return getGroupEditRoute}));var _core_url_combiner_url_combiner__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("zZO8"),_app_routing_paths__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("TVZh");const GROUP_EDIT_PATH="groups";function getGroupEditRoute(id){return new _core_url_combiner_url_combiner__WEBPACK_IMPORTED_MODULE_0__.a(Object(_app_routing_paths__WEBPACK_IMPORTED_MODULE_1__.m)(),GROUP_EDIT_PATH,id).toString()}}};