!function(){function e(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&t(e,n)}function t(e,n){return(t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,n)}function n(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=o(e);if(t){var a=o(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return r(this,n)}}function r(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[9,14],{A0IO:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("fXoL"),o=n("J3qs"),a=n("q5u1"),u=n("tv3Y"),c=function(){var e=function(){function e(t){i(this,e),this.breadcrumbService=t}return s(e,[{key:"resolve",value:function(e,t){var n=e.data.breadcrumbKey;if(Object(o.a)(n))throw new Error('You provided an i18nBreadcrumbResolver for url "'+e.url+"\" but no breadcrumbKey in the route's data");var r=Object(a.b)(e);return{provider:this.breadcrumbService,key:n,url:r}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275inject"](u.a))},e.\u0275prov=r["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},GVwY:function(t,r,o){"use strict";o.r(r),o.d(r,"ProfilePageModule",(function(){return w}));var a=o("fXoL"),u=o("ofXK"),c=o("PCNd"),l=o("tyNb"),d=o("A0IO"),f=o("JTKQ");function p(e,t){}var m,v,h=((m=function(t){e(a,t);var r=n(a);function a(){return i(this,a),r.apply(this,arguments)}return s(a,[{key:"getComponentName",value:function(){return"ProfilePageComponent"}},{key:"importThemedComponent",value:function(e){return o("gG8J")("./".concat(e,"/app/profile-page/profile-page.component"))}},{key:"importUnthemedComponent",value:function(){return Promise.resolve().then(o.bind(null,"wStq"))}}]),a}(f.a)).\u0275fac=function(e){return g(e||m)},m.\u0275cmp=a["\u0275\u0275defineComponent"]({type:m,selectors:[["ds-themed-profile-page"]],features:[a["\u0275\u0275InheritDefinitionFeature"]],decls:3,vars:0,consts:[["vcr",""]],template:function(e,t){1&e&&(a["\u0275\u0275template"](0,p,0,0,"ng-template",null,0,a["\u0275\u0275templateRefExtractor"]),a["\u0275\u0275text"](2,"\n"))},encapsulation:2}),m),g=a["\u0275\u0275getInheritedFactory"](h),y=((v=function e(){i(this,e)}).\u0275fac=function(e){return new(e||v)},v.\u0275mod=a["\u0275\u0275defineNgModule"]({type:v}),v.\u0275inj=a["\u0275\u0275defineInjector"]({imports:[[l.l.forChild([{path:"",pathMatch:"full",component:h,resolve:{breadcrumb:d.a},data:{breadcrumbKey:"profile",title:"profile.title"}}])]]}),v);o("wStq"),o("ibDM"),o("JKx6");var I,b=o("kcqd"),w=((I=function e(){i(this,e)}).\u0275fac=function(e){return new(e||I)},I.\u0275mod=a["\u0275\u0275defineNgModule"]({type:I}),I.\u0275inj=a["\u0275\u0275defineInjector"]({imports:[[y,u.c,c.a,b.a]]}),I)},JKx6:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n("fXoL"),o=n("e+Av"),a=n("J3qs"),u=n("Kj3r"),c=n("lJxs"),l=n("sYmb"),d=n("wLgS"),f=n("lI3o"),p=n("ofXK"),m=n("hqmO"),v=n("3Pt+");function h(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"ds-form",5),r["\u0275\u0275text"](1,"\n"),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("formId",n.FORM_PREFIX)("formModel",n.formModel)("formGroup",n.formGroup)("displaySubmit",!1)("displayCancel",!1)}}function g(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"div",6),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind1"](2,1,n.FORM_PREFIX+"error.password-length"))}}function y(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"div",7),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind1"](2,1,n.FORM_PREFIX+"error.matching-passwords"))}}function I(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"div",8),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind1"](2,1,n.FORM_PREFIX+"error.empty-password"))}}var b=function(){var e=function(){function e(t,n,a,s){i(this,e),this.formService=t,this.translate=n,this.epersonService=a,this.notificationsService=s,this.isInvalid=new r.EventEmitter,this.passwordValue=new r.EventEmitter,this.formModel=[new o.J({id:"password",name:"password",inputType:"password"}),new o.J({id:"passwordrepeat",name:"passwordrepeat",inputType:"password"})],this.passwordCanBeEmpty=!0,this.subs=[]}return s(e,[{key:"ngOnInit",value:function(){var e=this;this.formGroup=this.formService.createFormGroup(this.formModel,this.passwordCanBeEmpty?{validators:[this.checkPasswordsEqual,this.checkPasswordLength]}:{validators:[this.checkPasswordsEqual,this.checkPasswordLength,this.checkPasswordEmpty]}),this.updateFieldTranslations(),this.translate.onLangChange.subscribe((function(){e.updateFieldTranslations()})),this.subs.push(this.formGroup.statusChanges.pipe(Object(u.a)(300),Object(c.a)((function(e){return"VALID"!==e}))).subscribe((function(t){return e.isInvalid.emit(t)}))),this.subs.push(this.formGroup.valueChanges.pipe(Object(u.a)(300)).subscribe((function(t){e.passwordValue.emit(t.password)})))}},{key:"updateFieldTranslations",value:function(){var e=this;this.formModel.forEach((function(t){t.label=e.translate.instant(e.FORM_PREFIX+"label."+t.id)}))}},{key:"checkPasswordsEqual",value:function(e){return e.get("password").value===e.get("passwordrepeat").value?null:{notSame:!0}}},{key:"checkPasswordLength",value:function(e){var t=e.get("password").value;return Object(a.d)(t)||t.length>=6?null:{notLongEnough:!0}}},{key:"checkPasswordEmpty",value:function(e){var t=e.get("password").value;return Object(a.d)(t)?{emptyPassword:!0}:null}},{key:"ngOnDestroy",value:function(){this.subs.filter((function(e){return Object(a.b)(e)})).forEach((function(e){return e.unsubscribe()}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](o.G),r["\u0275\u0275directiveInject"](l.e),r["\u0275\u0275directiveInject"](d.a),r["\u0275\u0275directiveInject"](f.a))},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-profile-page-security-form"]],inputs:{passwordCanBeEmpty:"passwordCanBeEmpty",FORM_PREFIX:"FORM_PREFIX"},outputs:{isInvalid:"isInvalid",passwordValue:"passwordValue"},decls:12,vars:7,consts:[[1,"container-fluid","mb-4"],[3,"formId","formModel","formGroup","displaySubmit","displayCancel",4,"ngIf"],["id","notLongEnough","class","container-fluid text-danger",4,"ngIf"],["id","notSame","class","container-fluid text-danger",4,"ngIf"],["id","emptyPassword","class","container-fluid text-danger",4,"ngIf"],[3,"formId","formModel","formGroup","displaySubmit","displayCancel"],["id","notLongEnough",1,"container-fluid","text-danger"],["id","notSame",1,"container-fluid","text-danger"],["id","emptyPassword",1,"container-fluid","text-danger"]],template:function(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"div",0),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](3,"\n"),r["\u0275\u0275template"](4,h,2,5,"ds-form",1),r["\u0275\u0275text"](5,"\n"),r["\u0275\u0275template"](6,g,3,3,"div",2),r["\u0275\u0275text"](7,"\n"),r["\u0275\u0275template"](8,y,3,3,"div",3),r["\u0275\u0275text"](9,"\n"),r["\u0275\u0275template"](10,I,3,3,"div",4),r["\u0275\u0275text"](11,"\n")),2&e&&(r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind1"](2,5,t.FORM_PREFIX+"info")),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngIf",t.formModel),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",t.formGroup.hasError("notLongEnough")),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",t.formGroup.hasError("notSame")),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",(t.formGroup.dirty||t.formGroup.touched)&&t.formGroup.hasError("emptyPassword")))},directives:[p.p,m.a,v.NgControlStatusGroup,v.FormGroupDirective],pipes:[l.d],encapsulation:2}),e}()},gG8J:function(e,t,n){var r={"./custom/app/profile-page/profile-page.component":["qgOg",69]};function o(e){if(!n.o(r,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],o=t[0];return n.e(t[1]).then((function(){return n(o)}))}o.keys=function(){return Object.keys(r)},o.id="gG8J",e.exports=o},ibDM:function(e,t,n){"use strict";n.d(t,"a",(function(){return I}));var r=n("fXoL"),o=n("e+Av"),a=n("J3qs"),u=n("LvDl"),c=n("1QIV"),l=n("AytR"),d=n("Q5/L"),f=n("sYmb"),p=n("wLgS"),m=n("lI3o"),v=n("ofXK"),h=n("hqmO"),g=n("3Pt+");function y(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"ds-form",1),r["\u0275\u0275text"](1,"\n"),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("formId","profile-page-metadata-form-id")("formModel",n.formModel)("formGroup",n.formGroup)("displaySubmit",!1)("displayCancel",!1)}}var I=function(){var e=function(){function e(t,n,r,a){i(this,e),this.formBuilderService=t,this.translate=n,this.epersonService=r,this.notificationsService=a,this.formModel=[new o.J({id:"email",name:"email",readOnly:!0}),new o.J({id:"firstname",name:"eperson.firstname",required:!0,validators:{required:null},errorMessages:{required:"This field is required"}}),new o.J({id:"lastname",name:"eperson.lastname",required:!0,validators:{required:null},errorMessages:{required:"This field is required"}}),new o.J({id:"phone",name:"eperson.phone"}),new o.N({id:"language",name:"eperson.language"})],this.LABEL_PREFIX="profile.metadata.form.label.",this.ERROR_PREFIX="profile.metadata.form.error.",this.NOTIFICATION_PREFIX="profile.metadata.form.notifications."}return s(e,[{key:"ngOnInit",value:function(){var e=this;this.activeLangs=l.a.languages.filter((function(e){return!0===e.active})),this.setFormValues(),this.updateFieldTranslations(),this.translate.onLangChange.subscribe((function(){e.updateFieldTranslations()}))}},{key:"setFormValues",value:function(){var e=this;this.formModel.forEach((function(t){t.value="email"===t.name?e.user.email:e.user.firstMetadataValue(t.name),"language"===t.id&&(t.options=e.activeLangs.map((function(e){return Object.assign({value:e.code,label:e.label})})))})),this.formGroup=this.formBuilderService.createFormGroup(this.formModel)}},{key:"updateFieldTranslations",value:function(){var e=this;this.formModel.forEach((function(t){t.label=e.translate.instant(e.LABEL_PREFIX+t.id),Object(a.e)(t.validators)&&(t.errorMessages={},Object.keys(t.validators).forEach((function(n){t.errorMessages[n]=e.translate.instant(e.ERROR_PREFIX+t.id+"."+n)})))}))}},{key:"updateProfile",value:function(){var e=this;if(!this.formGroup.valid)return!1;var t=Object(u.cloneDeep)(this.user.metadata),n=!1;return this.formModel.filter((function(e){return"email"!==e.id})).forEach((function(e){t.hasOwnProperty(e.name)&&t[e.name].length>0?Object(a.b)(e.value)?t[e.name][0].value!==e.value&&(t[e.name][0].value=e.value,n=!0):(t[e.name]=[],n=!0):Object(a.b)(e.value)&&(t[e.name]=[{value:e.value,language:null}],n=!0)})),n&&this.epersonService.update(Object.assign(Object(u.cloneDeep)(this.user),{metadata:t})).pipe(Object(c.i)(),Object(c.o)()).subscribe((function(t){e.user=t,e.setFormValues(),e.notificationsService.success(e.translate.instant(e.NOTIFICATION_PREFIX+"success.title"),e.translate.instant(e.NOTIFICATION_PREFIX+"success.content"))})),n}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](d.a),r["\u0275\u0275directiveInject"](f.e),r["\u0275\u0275directiveInject"](p.a),r["\u0275\u0275directiveInject"](m.a))},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-profile-page-metadata-form"]],inputs:{user:"user"},decls:2,vars:1,consts:[[3,"formId","formModel","formGroup","displaySubmit","displayCancel",4,"ngIf"],[3,"formId","formModel","formGroup","displaySubmit","displayCancel"]],template:function(e,t){1&e&&(r["\u0275\u0275template"](0,y,2,5,"ds-form",0),r["\u0275\u0275text"](1,"\n")),2&e&&r["\u0275\u0275property"]("ngIf",t.formModel)},directives:[v.p,h.a,g.NgControlStatusGroup,g.FormGroupDirective],encapsulation:2}),e}()},kcqd:function(t,r,o){"use strict";o.d(r,"a",(function(){return x}));var a=o("fXoL"),s=o("ofXK"),u=o("hqmO"),c=o("e+Av"),l=o("NvTF");function d(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"ds-dynamic-form-control-container",1),a["\u0275\u0275listener"]("dfBlur",(function(e){a["\u0275\u0275restoreView"](n);var t=a["\u0275\u0275nextContext"]();return t.onCustomEvent(e,t.blur)}))("dfChange",(function(e){a["\u0275\u0275restoreView"](n);var t=a["\u0275\u0275nextContext"]();return t.onCustomEvent(e,t.change)}))("dfFocus",(function(e){a["\u0275\u0275restoreView"](n);var t=a["\u0275\u0275nextContext"]();return t.onCustomEvent(e,t.focus)}))("ngbEvent",(function(e){a["\u0275\u0275restoreView"](n);var t=a["\u0275\u0275nextContext"]();return t.onCustomEvent(e,t.ngbEvent)})),a["\u0275\u0275elementEnd"]()}if(2&e){var r=t.$implicit,o=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("formId",o.formId)("group",o.formGroup)("hasErrorMessaging",r.hasErrorMessages)("hidden",r.hidden)("layout",o.formLayout)("model",r)("templates",o.templates)("asBootstrapFormGroup",!0)}}var f,p=((f=function(t){e(o,t);var r=n(o);function o(e,t){var n;return i(this,o),(n=r.call(this,e,t)).blur=new a.EventEmitter,n.change=new a.EventEmitter,n.focus=new a.EventEmitter,n.ngbEvent=new a.EventEmitter,n}return o}(c.x)).\u0275fac=function(e){return new(e||f)(a["\u0275\u0275directiveInject"](a.ChangeDetectorRef),a["\u0275\u0275directiveInject"](c.y))},f.\u0275cmp=a["\u0275\u0275defineComponent"]({type:f,selectors:[["ds-dynamic-form"]],contentQueries:function(e,t,n){var r;1&e&&a["\u0275\u0275contentQuery"](n,c.O,0),2&e&&a["\u0275\u0275queryRefresh"](r=a["\u0275\u0275loadQuery"]())&&(t.templates=r)},viewQuery:function(e,t){var n;1&e&&a["\u0275\u0275viewQuery"](l.a,1),2&e&&a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.components=n)},inputs:{formId:"formId",formGroup:"formGroup",formModel:"formModel",formLayout:"formLayout"},outputs:{blur:"dfBlur",change:"dfChange",focus:"dfFocus",ngbEvent:"ngbEvent"},features:[a["\u0275\u0275InheritDefinitionFeature"]],decls:2,vars:2,consts:[[3,"formId","group","hasErrorMessaging","hidden","layout","model","templates","asBootstrapFormGroup","dfBlur","dfChange","dfFocus","ngbEvent",4,"ngFor","ngForOf","ngForTrackBy"],[3,"formId","group","hasErrorMessaging","hidden","layout","model","templates","asBootstrapFormGroup","dfBlur","dfChange","dfFocus","ngbEvent"]],template:function(e,t){1&e&&(a["\u0275\u0275template"](0,d,1,8,"ds-dynamic-form-control-container",0),a["\u0275\u0275text"](1,"\n")),2&e&&a["\u0275\u0275property"]("ngForOf",t.formModel)("ngForTrackBy",t.trackByFn)},directives:[s.o,l.a],encapsulation:2}),f);o("ZO65"),o("0pnk"),o("sw+l"),o("1Pbu"),o("bPV6"),o("Gu/b"),o("A/iK"),o("KKO+"),o("Ysrn");var m,v=o("tqJZ"),h=o("ZTun"),g=(o("uyTL"),o("Ui2r"),o("8HnP"),o("zVKZ"),o("PCNd")),y=o("sYmb"),I=o("kMeL"),b=(o("yXJd"),o("/Vzl"),o("zGzN"),o("xjoE"),o("n7Wa")),w=o("3Pt+"),E=o("5+WD"),x=((m=function e(){i(this,e)}).\u0275fac=function(e){return new(e||m)},m.\u0275mod=a["\u0275\u0275defineNgModule"]({type:m}),m.\u0275inj=a["\u0275\u0275defineInjector"]({providers:[{provide:c.c,useValue:l.b}],imports:[[s.c,c.I,b.a,I.a,g.a,y.c]]}),m);a["\u0275\u0275setComponentScope"](v.a,[w.NgControlStatusGroup,w.FormGroupDirective,w.FormGroupName,s.m,s.o,l.a],[]),a["\u0275\u0275setComponentScope"](h.a,[w.NgControlStatusGroup,w.FormGroupDirective,w.FormArrayName,s.m,E.c,s.o,E.a,E.b,w.FormGroupName,s.t,l.a],[]),a["\u0275\u0275setComponentScope"](u.a,[w["\u0275angular_packages_forms_forms_ba"],w.NgControlStatusGroup,w.FormGroupDirective,p,c.O,s.p],[y.d,s.b])},tv3Y:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("zr/d"),o=n("LRne"),a=n("fXoL"),u=function(){var e=function(){function e(){i(this,e)}return s(e,[{key:"getBreadcrumbs",value:function(e,t){return Object(o.a)([new r.a(e+".breadcrumbs",t)])}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=a["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},wStq:function(e,t,n){"use strict";n.r(t),n.d(t,"ProfilePageComponent",(function(){return P}));var r=n("fXoL"),o=n("ibDM"),a=n("pLZG"),u=n("eIep"),c=n("vkgz"),l=n("1QIV"),d=n("J3qs"),f=n("84Zn"),p=n("FU+A"),m=n("Vurf"),v=n("lI3o"),h=n("sYmb"),g=n("wLgS"),y=n("1mcE"),I=n("O/5o"),b=n("ofXK"),w=n("JKx6");function E(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",12),r["\u0275\u0275text"](1,"\n      "),r["\u0275\u0275elementStart"](2,"div",5),r["\u0275\u0275text"](3),r["\u0275\u0275pipe"](4,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](5,"\n      "),r["\u0275\u0275elementStart"](6,"div",6),r["\u0275\u0275text"](7,"\n        "),r["\u0275\u0275elementStart"](8,"ds-profile-page-security-form",13),r["\u0275\u0275listener"]("isInvalid",(function(e){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"](3).setInvalid(e)}))("passwordValue",(function(e){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"](3).setPasswordValue(e)})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](9,"\n      "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](10,"\n    "),r["\u0275\u0275elementEnd"]()}2&e&&(r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind1"](4,2,"profile.card.security")),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("FORM_PREFIX","profile.security.form."))}function x(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"li",18),r["\u0275\u0275text"](1),r["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate"](n.name)}}function O(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"div"),r["\u0275\u0275text"](1,"\n        "),r["\u0275\u0275elementStart"](2,"h3",15),r["\u0275\u0275text"](3),r["\u0275\u0275pipe"](4,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](5,"\n        "),r["\u0275\u0275elementStart"](6,"ul",16),r["\u0275\u0275text"](7,"\n          "),r["\u0275\u0275template"](8,x,2,1,"li",17),r["\u0275\u0275text"](9,"\n        "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](10,"\n      "),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275nextContext"]().ngVar;r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind1"](4,2,"profile.groups.head")),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngForOf",n)}}function S(e,t){if(1&e&&(r["\u0275\u0275elementContainerStart"](0),r["\u0275\u0275text"](1,"\n      "),r["\u0275\u0275template"](2,O,11,4,"div",14),r["\u0275\u0275text"](3,"\n    "),r["\u0275\u0275elementContainerEnd"]()),2&e){var n=t.ngVar;r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",n)}}function F(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",2),r["\u0275\u0275text"](1,"\n    "),r["\u0275\u0275elementStart"](2,"h3",3),r["\u0275\u0275text"](3),r["\u0275\u0275pipe"](4,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](5,"\n    "),r["\u0275\u0275elementStart"](6,"div",4),r["\u0275\u0275text"](7,"\n      "),r["\u0275\u0275elementStart"](8,"div",5),r["\u0275\u0275text"](9),r["\u0275\u0275pipe"](10,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](11,"\n      "),r["\u0275\u0275elementStart"](12,"div",6),r["\u0275\u0275text"](13,"\n        "),r["\u0275\u0275element"](14,"ds-profile-page-metadata-form",7),r["\u0275\u0275text"](15,"\n      "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](16,"\n    "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](17,"\n    "),r["\u0275\u0275template"](18,E,11,4,"div",8),r["\u0275\u0275pipe"](19,"async"),r["\u0275\u0275text"](20,"\n    "),r["\u0275\u0275elementStart"](21,"div",9),r["\u0275\u0275text"](22,"\n      "),r["\u0275\u0275elementStart"](23,"button",10),r["\u0275\u0275listener"]("click",(function(){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"](2).updateProfile()})),r["\u0275\u0275element"](24,"i",11),r["\u0275\u0275text"](25),r["\u0275\u0275pipe"](26,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](27,"\n    "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](28,"\n\n    "),r["\u0275\u0275template"](29,S,4,1,"ng-container",0),r["\u0275\u0275pipe"](30,"async"),r["\u0275\u0275text"](31,"\n  "),r["\u0275\u0275elementEnd"]()}if(2&e){var o,i=r["\u0275\u0275nextContext"]().ngVar,a=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind1"](4,6,"profile.head")),r["\u0275\u0275advance"](6),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind1"](10,8,"profile.card.identify")),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("user",i),r["\u0275\u0275advance"](4),r["\u0275\u0275property"]("ngIf",r["\u0275\u0275pipeBind1"](19,10,a.canChangePassword$)),r["\u0275\u0275advance"](7),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](26,12,"profile.form.submit"),""),r["\u0275\u0275advance"](4),r["\u0275\u0275property"]("ngVar",null==(o=r["\u0275\u0275pipeBind1"](30,14,a.groupsRD$))||null==o.payload?null:o.payload.page)}}function C(e,t){if(1&e&&(r["\u0275\u0275elementContainerStart"](0),r["\u0275\u0275text"](1,"\n  "),r["\u0275\u0275template"](2,F,32,16,"div",1),r["\u0275\u0275text"](3,"\n"),r["\u0275\u0275elementContainerEnd"]()),2&e){var n=t.ngVar;r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",n)}}var P=function(){var e=function(){function e(t,n,r,o,a){i(this,e),this.authService=t,this.notificationsService=n,this.translate=r,this.epersonService=o,this.authorizationService=a,this.NOTIFICATIONS_PREFIX="profile.notifications.",this.PASSWORD_NOTIFICATIONS_PREFIX="profile.security.form.notifications."}return s(e,[{key:"ngOnInit",value:function(){var e=this;this.user$=this.authService.getAuthenticatedUserFromStore().pipe(Object(a.a)((function(e){return Object(d.b)(e.id)})),Object(u.a)((function(t){return e.epersonService.findById(t.id,!0,!0,Object(f.a)("groups"))})),Object(l.c)(),Object(l.o)(),Object(c.a)((function(t){return e.currentUser=t}))),this.groupsRD$=this.user$.pipe(Object(u.a)((function(e){return e.groups}))),this.canChangePassword$=this.user$.pipe(Object(u.a)((function(t){return e.authorizationService.isAuthorized(p.a.CanChangePassword,t._links.self.href)})))}},{key:"updateProfile",value:function(){var e=this.metadataForm.updateProfile(),t=this.updateSecurity();e||t||this.notificationsService.warning(this.translate.instant(this.NOTIFICATIONS_PREFIX+"warning.no-changes.title"),this.translate.instant(this.NOTIFICATIONS_PREFIX+"warning.no-changes.content"))}},{key:"setInvalid",value:function(e){this.invalidSecurity=e}},{key:"updateSecurity",value:function(){var e=this,t=Object(d.e)(this.password);return this.invalidSecurity&&this.notificationsService.error(this.translate.instant(this.PASSWORD_NOTIFICATIONS_PREFIX+"error.general")),!this.invalidSecurity&&t&&this.epersonService.patch(this.currentUser,[{op:"add",path:"/password",value:this.password}]).pipe(Object(l.g)()).subscribe((function(t){t.hasSucceeded?e.notificationsService.success(e.translate.instant(e.PASSWORD_NOTIFICATIONS_PREFIX+"success.title"),e.translate.instant(e.PASSWORD_NOTIFICATIONS_PREFIX+"success.content")):e.notificationsService.error(e.translate.instant(e.PASSWORD_NOTIFICATIONS_PREFIX+"error.title"),t.errorMessage)})),t}},{key:"setPasswordValue",value:function(e){this.password=e}},{key:"submit",value:function(){this.updateProfile()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](m.a),r["\u0275\u0275directiveInject"](v.a),r["\u0275\u0275directiveInject"](h.e),r["\u0275\u0275directiveInject"](g.a),r["\u0275\u0275directiveInject"](y.a))},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-profile-page"]],viewQuery:function(e,t){var n;(1&e&&r["\u0275\u0275viewQuery"](o.a,1),2&e)&&(r["\u0275\u0275queryRefresh"](n=r["\u0275\u0275loadQuery"]())&&(t.metadataForm=n.first))},decls:3,vars:3,consts:[[4,"ngVar"],["class","container",4,"ngIf"],[1,"container"],[1,"mb-4"],[1,"card","mb-4"],[1,"card-header"],[1,"card-body"],[3,"user"],["class","card mb-4 security-section",4,"ngIf"],[1,"col-12","text-right","pr-0"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-edit"],[1,"card","mb-4","security-section"],[3,"FORM_PREFIX","isInvalid","passwordValue"],[4,"ngIf"],[1,"mt-4"],[1,"list-group","list-group-flush"],["class","list-group-item",4,"ngFor","ngForOf"],[1,"list-group-item"]],template:function(e,t){1&e&&(r["\u0275\u0275template"](0,C,4,1,"ng-container",0),r["\u0275\u0275pipe"](1,"async"),r["\u0275\u0275text"](2,"\n")),2&e&&r["\u0275\u0275property"]("ngVar",r["\u0275\u0275pipeBind1"](1,1,t.user$))},directives:[I.a,b.p,o.a,w.a,b.o],pipes:[b.b,h.d],styles:[""]}),e}()},"zr/d":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function e(t,n){i(this,e),this.text=t,this.url=n}}}])}();
//# sourceMappingURL=9-es5.0fc906ffd139e4e628b7.js.map