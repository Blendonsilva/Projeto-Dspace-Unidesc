(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{FJQs:function(e,t,n){"use strict";n.r(t),n.d(t,"RequestCopyModule",(function(){return P}));var i=n("fXoL"),a=n("ofXK"),r=n("PCNd"),s=n("lJxs"),c=n("eIep"),p=n("1QIV"),o=n("zZO8"),d=n("TVZh");function l(e){return new o.a(Object(d.A)(),e).toString()}var m=n("Xioo"),u=n("tyNb"),g=n("Vurf"),v=n("iqTE"),h=n("C765"),y=n("O/5o"),f=n("Frqi"),x=n("sYmb");const b=function(e,t){return{url:e,name:t}};function j(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275text"](1,"\n      "),i["\u0275\u0275element"](2,"p",5),i["\u0275\u0275pipe"](3,"translate"),i["\u0275\u0275pipe"](4,"async"),i["\u0275\u0275pipe"](5,"async"),i["\u0275\u0275text"](6,"\n      "),i["\u0275\u0275elementStart"](7,"p"),i["\u0275\u0275text"](8),i["\u0275\u0275pipe"](9,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](10,"\n\n      "),i["\u0275\u0275elementStart"](11,"div",6),i["\u0275\u0275text"](12,"\n        "),i["\u0275\u0275elementStart"](13,"a",7),i["\u0275\u0275pipe"](14,"async"),i["\u0275\u0275pipe"](15,"translate"),i["\u0275\u0275text"](16),i["\u0275\u0275pipe"](17,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](18,"\n\n        "),i["\u0275\u0275elementStart"](19,"a",8),i["\u0275\u0275pipe"](20,"async"),i["\u0275\u0275pipe"](21,"translate"),i["\u0275\u0275text"](22),i["\u0275\u0275pipe"](23,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](24,"\n      "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](25,"\n    "),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"](3);i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("innerHTML",i["\u0275\u0275pipeBind2"](3,8,"grant-deny-request-copy.intro1",i["\u0275\u0275pureFunction2"](29,b,i["\u0275\u0275pipeBind1"](4,11,e.itemUrl$),i["\u0275\u0275pipeBind1"](5,13,e.itemName$))),i["\u0275\u0275sanitizeHtml"]),i["\u0275\u0275advance"](6),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](9,15,"grant-deny-request-copy.intro2")),i["\u0275\u0275advance"](5),i["\u0275\u0275propertyInterpolate"]("title",i["\u0275\u0275pipeBind1"](15,19,"grant-deny-request-copy.grant")),i["\u0275\u0275property"]("routerLink",i["\u0275\u0275pipeBind1"](14,17,e.grantRoute$)),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate1"]("\n          ",i["\u0275\u0275pipeBind1"](17,21,"grant-deny-request-copy.grant"),"\n        "),i["\u0275\u0275advance"](3),i["\u0275\u0275propertyInterpolate"]("title",i["\u0275\u0275pipeBind1"](21,25,"grant-deny-request-copy.deny")),i["\u0275\u0275property"]("routerLink",i["\u0275\u0275pipeBind1"](20,23,e.denyRoute$)),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate1"]("\n          ",i["\u0275\u0275pipeBind1"](23,27,"grant-deny-request-copy.deny"),"\n        ")}}function S(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",9),i["\u0275\u0275text"](1,"\n      "),i["\u0275\u0275elementStart"](2,"p"),i["\u0275\u0275text"](3),i["\u0275\u0275pipe"](4,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](5,"\n      "),i["\u0275\u0275elementStart"](6,"p",10),i["\u0275\u0275text"](7,"\n        "),i["\u0275\u0275elementStart"](8,"a",11),i["\u0275\u0275text"](9),i["\u0275\u0275pipe"](10,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](11,"\n      "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](12,"\n    "),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](4,2,"grant-deny-request-copy.processed")),i["\u0275\u0275advance"](6),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](10,4,"grant-deny-request-copy.home-page")))}function I(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275text"](1,"\n    "),i["\u0275\u0275template"](2,j,26,32,"div",3),i["\u0275\u0275text"](3,"\n    "),i["\u0275\u0275template"](4,S,13,6,"div",4),i["\u0275\u0275text"](5,"\n  "),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]().ngVar;i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!e.payload.decisionDate),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",e.payload.decisionDate)}}function q(e,t){1&e&&i["\u0275\u0275element"](0,"ds-loading")}function O(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",1),i["\u0275\u0275text"](1,"\n  "),i["\u0275\u0275elementStart"](2,"h3",2),i["\u0275\u0275text"](3),i["\u0275\u0275pipe"](4,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](5,"\n  "),i["\u0275\u0275template"](6,I,6,2,"div",3),i["\u0275\u0275text"](7,"\n  "),i["\u0275\u0275template"](8,q,1,0,"ds-loading",3),i["\u0275\u0275text"](9,"\n"),i["\u0275\u0275elementEnd"]()),2&e){const e=t.ngVar;i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](4,3,"grant-deny-request-copy.header")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",e&&e.hasSucceeded),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!e||(null==e?null:e.isLoading))}}let E=(()=>{class e{constructor(e,t,n,i,a){this.router=e,this.route=t,this.authService=n,this.itemDataService=i,this.nameService=a}ngOnInit(){this.itemRequestRD$=this.route.data.pipe(Object(s.a)(e=>e.request),Object(p.g)(),Object(p.t)(this.router,this.authService)),this.itemRD$=this.itemRequestRD$.pipe(Object(p.j)(),Object(c.a)(e=>this.itemDataService.findById(e.itemId))),this.itemName$=this.itemRD$.pipe(Object(p.j)(),Object(s.a)(e=>this.nameService.getName(e))),this.itemUrl$=this.itemRD$.pipe(Object(p.j)(),Object(s.a)(e=>Object(m.h)(e))),this.denyRoute$=this.itemRequestRD$.pipe(Object(p.j)(),Object(s.a)(e=>new o.a(l(e.token),"deny").toString())),this.grantRoute$=this.itemRequestRD$.pipe(Object(p.j)(),Object(s.a)(e=>new o.a(l(e.token),"grant").toString()))}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](u.h),i["\u0275\u0275directiveInject"](u.a),i["\u0275\u0275directiveInject"](g.a),i["\u0275\u0275directiveInject"](v.a),i["\u0275\u0275directiveInject"](h.a))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-grant-deny-request-copy"]],decls:3,vars:3,consts:[["class","container",4,"ngVar"],[1,"container"],[1,"mb-4"],[4,"ngIf"],["class","processed-message",4,"ngIf"],[3,"innerHTML"],[1,"btn-group"],[1,"btn","btn-outline-primary",3,"routerLink","title"],[1,"btn","btn-outline-danger",3,"routerLink","title"],[1,"processed-message"],[1,"text-center"],["routerLink","/home",1,"btn","btn-primary"]],template:function(e,t){1&e&&(i["\u0275\u0275template"](0,O,10,5,"div",0),i["\u0275\u0275pipe"](1,"async"),i["\u0275\u0275text"](2,"\n")),2&e&&i["\u0275\u0275property"]("ngVar",i["\u0275\u0275pipeBind1"](1,1,t.itemRequestRD$))},directives:[y.a,a.p,u.k,f.a],pipes:[a.b,x.d],styles:[""]}),e})();var B=n("Ub/z");let R=(()=>{class e{constructor(e){this.itemRequestDataService=e}resolve(e,t){return this.itemRequestDataService.findById(e.params.token).pipe(Object(p.g)())}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275inject"](B.a))},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e})();var C=n("itXk"),k=n("J3qs"),$=n("lI3o");class D{constructor(e,t){this.subject=e,this.message=t}}var w=n("3Pt+");function N(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",11),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"]("\n      ",i["\u0275\u0275pipeBind1"](2,1,"grant-deny-request-copy.email.subject.empty"),"\n    "))}function M(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",11),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"]("\n      ",i["\u0275\u0275pipeBind1"](2,1,"grant-deny-request-copy.email.message.empty"),"\n    "))}const V=function(e){return{"is-invalid":e}},L=["*"];let A=(()=>{class e{constructor(e){this.location=e,this.send=new i.EventEmitter}submit(){this.send.emit(new D(this.subject,this.message))}return(){this.location.back()}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](a.k))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-email-request-copy"]],inputs:{subject:"subject",message:"message"},outputs:{send:"send"},ngContentSelectors:L,decls:44,vars:29,consts:[[1,"form-group"],["for","subject"],["type","text","id","subject","name","subject",1,"form-control",3,"ngClass","ngModel","ngModelChange"],["class","invalid-feedback",4,"ngIf"],["for","message"],["id","message","rows","8","name","message",1,"form-control",3,"ngClass","ngModel","ngModelChange"],[1,"d-flex","flex-row-reverse"],[1,"btn","btn-primary",3,"disabled","title","click"],[1,"fas","fa-envelope"],[1,"btn","btn-outline-secondary","mr-1",3,"title","click"],[1,"fas","fa-arrow-left"],[1,"invalid-feedback"]],template:function(e,t){1&e&&(i["\u0275\u0275projectionDef"](),i["\u0275\u0275elementStart"](0,"form"),i["\u0275\u0275text"](1,"\n  "),i["\u0275\u0275elementStart"](2,"div",0),i["\u0275\u0275text"](3,"\n    "),i["\u0275\u0275elementStart"](4,"label",1),i["\u0275\u0275text"](5),i["\u0275\u0275pipe"](6,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](7,"\n    "),i["\u0275\u0275elementStart"](8,"input",2),i["\u0275\u0275listener"]("ngModelChange",(function(e){return t.subject=e})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](9,"\n    "),i["\u0275\u0275template"](10,N,3,3,"div",3),i["\u0275\u0275text"](11,"\n  "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](12,"\n  "),i["\u0275\u0275elementStart"](13,"div",0),i["\u0275\u0275text"](14,"\n    "),i["\u0275\u0275elementStart"](15,"label",4),i["\u0275\u0275text"](16),i["\u0275\u0275pipe"](17,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](18,"\n    "),i["\u0275\u0275elementStart"](19,"textarea",5),i["\u0275\u0275listener"]("ngModelChange",(function(e){return t.message=e})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](20,"\n    "),i["\u0275\u0275template"](21,M,3,3,"div",3),i["\u0275\u0275text"](22,"\n  "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](23,"\n  "),i["\u0275\u0275projection"](24),i["\u0275\u0275text"](25,"\n  "),i["\u0275\u0275elementStart"](26,"div",6),i["\u0275\u0275text"](27,"\n    "),i["\u0275\u0275elementStart"](28,"button",7),i["\u0275\u0275listener"]("click",(function(){return t.submit()})),i["\u0275\u0275pipe"](29,"translate"),i["\u0275\u0275text"](30,"\n      "),i["\u0275\u0275element"](31,"i",8),i["\u0275\u0275text"](32),i["\u0275\u0275pipe"](33,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](34,"\n    "),i["\u0275\u0275elementStart"](35,"button",9),i["\u0275\u0275listener"]("click",(function(){return t.return()})),i["\u0275\u0275pipe"](36,"translate"),i["\u0275\u0275text"](37,"\n      "),i["\u0275\u0275element"](38,"i",10),i["\u0275\u0275text"](39),i["\u0275\u0275pipe"](40,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](41,"\n  "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](42,"\n"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](43,"\n")),2&e&&(i["\u0275\u0275advance"](5),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](6,13,"grant-deny-request-copy.email.subject")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngClass",i["\u0275\u0275pureFunction1"](25,V,!t.subject||0===t.subject.length))("ngModel",t.subject),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!t.subject||0===t.subject.length),i["\u0275\u0275advance"](6),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](17,15,"grant-deny-request-copy.email.message")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngClass",i["\u0275\u0275pureFunction1"](27,V,!t.message||0===t.message.length))("ngModel",t.message),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!t.message||0===t.message.length),i["\u0275\u0275advance"](7),i["\u0275\u0275propertyInterpolate"]("title",i["\u0275\u0275pipeBind1"](29,17,"grant-deny-request-copy.email.send")),i["\u0275\u0275property"]("disabled",!t.message||0===t.message.length||!t.subject||0===t.subject.length),i["\u0275\u0275advance"](4),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](33,19,"grant-deny-request-copy.email.send"),"\n    "),i["\u0275\u0275advance"](3),i["\u0275\u0275propertyInterpolate"]("title",i["\u0275\u0275pipeBind1"](36,21,"grant-deny-request-copy.email.back")),i["\u0275\u0275advance"](4),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](40,23,"grant-deny-request-copy.email.back"),"\n    "))},directives:[w["\u0275angular_packages_forms_forms_ba"],w.NgControlStatusGroup,w.NgForm,w.DefaultValueAccessor,a.m,w.NgControlStatus,w.NgModel,a.p],pipes:[x.d],styles:[""]}),e})();function F(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275text"](1,"\n    "),i["\u0275\u0275elementStart"](2,"p"),i["\u0275\u0275text"](3),i["\u0275\u0275pipe"](4,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](5,"\n\n    "),i["\u0275\u0275elementStart"](6,"ds-email-request-copy",4),i["\u0275\u0275listener"]("send",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](2).deny(t)})),i["\u0275\u0275pipe"](7,"async"),i["\u0275\u0275pipe"](8,"async"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](9,"\n  "),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](4,3,"deny-request-copy.intro")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("subject",i["\u0275\u0275pipeBind1"](7,5,e.subject$))("message",i["\u0275\u0275pipeBind1"](8,7,e.message$))}}function U(e,t){1&e&&i["\u0275\u0275element"](0,"ds-loading")}function _(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",1),i["\u0275\u0275text"](1,"\n  "),i["\u0275\u0275elementStart"](2,"h3",2),i["\u0275\u0275text"](3),i["\u0275\u0275pipe"](4,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](5,"\n  "),i["\u0275\u0275template"](6,F,10,9,"div",3),i["\u0275\u0275text"](7,"\n  "),i["\u0275\u0275template"](8,U,1,0,"ds-loading",3),i["\u0275\u0275text"](9,"\n"),i["\u0275\u0275elementEnd"]()),2&e){const e=t.ngVar;i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](4,3,"deny-request-copy.header")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",e&&e.hasSucceeded),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!e||(null==e?null:e.isLoading))}}let J=(()=>{class e{constructor(e,t,n,i,a,r,s,c){this.router=e,this.route=t,this.authService=n,this.translateService=i,this.itemDataService=a,this.nameService=r,this.itemRequestService=s,this.notificationsService=c}ngOnInit(){this.itemRequestRD$=this.route.data.pipe(Object(s.a)(e=>e.request),Object(p.g)(),Object(p.t)(this.router,this.authService));const e=Object(C.a)(this.itemRequestRD$.pipe(Object(p.j)()),this.authService.getAuthenticatedUserFromStore()).pipe(Object(c.a)(([e,t])=>this.itemDataService.findById(e.itemId).pipe(Object(p.j)(),Object(s.a)(n=>{const i=n.firstMetadataValue("dc.identifier.uri");return Object.assign({recipientName:e.requestName,itemUrl:Object(k.e)(i)?i:n.handle,itemName:this.nameService.getName(n),authorName:t.name,authorEmail:t.email})}))));this.subject$=this.translateService.get("deny-request-copy.email.subject"),this.message$=e.pipe(Object(c.a)(e=>this.translateService.get("deny-request-copy.email.message",e)))}deny(e){this.itemRequestRD$.pipe(Object(p.j)(),Object(c.a)(t=>this.itemRequestService.deny(t.token,e)),Object(p.g)()).subscribe(e=>{e.hasSucceeded?(this.notificationsService.success(this.translateService.get("deny-request-copy.success")),this.router.navigateByUrl("/")):this.notificationsService.error(this.translateService.get("deny-request-copy.error"),e.errorMessage)})}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](u.h),i["\u0275\u0275directiveInject"](u.a),i["\u0275\u0275directiveInject"](g.a),i["\u0275\u0275directiveInject"](x.e),i["\u0275\u0275directiveInject"](v.a),i["\u0275\u0275directiveInject"](h.a),i["\u0275\u0275directiveInject"](B.a),i["\u0275\u0275directiveInject"]($.a))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-deny-request-copy"]],decls:3,vars:3,consts:[["class","container",4,"ngVar"],[1,"container"],[1,"mb-4"],[4,"ngIf"],[3,"subject","message","send"]],template:function(e,t){1&e&&(i["\u0275\u0275template"](0,_,10,5,"div",0),i["\u0275\u0275pipe"](1,"async"),i["\u0275\u0275text"](2,"\n")),2&e&&i["\u0275\u0275property"]("ngVar",i["\u0275\u0275pipeBind1"](1,1,t.itemRequestRD$))},directives:[y.a,a.p,A,f.a],pipes:[a.b,x.d],styles:[""]}),e})();function T(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275text"](1,"\n    "),i["\u0275\u0275elementStart"](2,"p"),i["\u0275\u0275text"](3),i["\u0275\u0275pipe"](4,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](5,"\n\n    "),i["\u0275\u0275elementStart"](6,"ds-email-request-copy",4),i["\u0275\u0275listener"]("send",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](2).grant(t)})),i["\u0275\u0275pipe"](7,"async"),i["\u0275\u0275pipe"](8,"async"),i["\u0275\u0275text"](9,"\n      "),i["\u0275\u0275elementStart"](10,"p"),i["\u0275\u0275text"](11),i["\u0275\u0275pipe"](12,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](13,"\n      "),i["\u0275\u0275elementStart"](14,"form",5),i["\u0275\u0275text"](15,"\n        "),i["\u0275\u0275elementStart"](16,"div",6),i["\u0275\u0275text"](17,"\n          "),i["\u0275\u0275elementStart"](18,"input",7),i["\u0275\u0275listener"]("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](2).suggestOpenAccess=t})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](19,"\n          "),i["\u0275\u0275elementStart"](20,"label",8),i["\u0275\u0275text"](21),i["\u0275\u0275pipe"](22,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](23,"\n        "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](24,"\n      "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](25,"\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](26,"\n  "),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](4,6,"grant-request-copy.intro")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("subject",i["\u0275\u0275pipeBind1"](7,8,e.subject$))("message",i["\u0275\u0275pipeBind1"](8,10,e.message$)),i["\u0275\u0275advance"](5),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](12,12,"grant-deny-request-copy.email.permissions.info")),i["\u0275\u0275advance"](7),i["\u0275\u0275property"]("ngModel",e.suggestOpenAccess),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](22,14,"grant-deny-request-copy.email.permissions.label"))}}function X(e,t){1&e&&i["\u0275\u0275element"](0,"ds-loading")}function z(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",1),i["\u0275\u0275text"](1,"\n  "),i["\u0275\u0275elementStart"](2,"h3",2),i["\u0275\u0275text"](3),i["\u0275\u0275pipe"](4,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](5,"\n  "),i["\u0275\u0275template"](6,T,27,16,"div",3),i["\u0275\u0275text"](7,"\n  "),i["\u0275\u0275template"](8,X,1,0,"ds-loading",3),i["\u0275\u0275text"](9,"\n"),i["\u0275\u0275elementEnd"]()),2&e){const e=t.ngVar;i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](4,3,"grant-request-copy.header")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",e&&e.hasSucceeded),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!e||(null==e?null:e.isLoading))}}let H=(()=>{class e{constructor(e,t,n,i,a,r,s,c){this.router=e,this.route=t,this.authService=n,this.translateService=i,this.itemDataService=a,this.nameService=r,this.itemRequestService=s,this.notificationsService=c,this.suggestOpenAccess=!1}ngOnInit(){this.itemRequestRD$=this.route.data.pipe(Object(s.a)(e=>e.request),Object(p.g)(),Object(p.t)(this.router,this.authService));const e=Object(C.a)(this.itemRequestRD$.pipe(Object(p.j)()),this.authService.getAuthenticatedUserFromStore()).pipe(Object(c.a)(([e,t])=>this.itemDataService.findById(e.itemId).pipe(Object(p.j)(),Object(s.a)(n=>{const i=n.firstMetadataValue("dc.identifier.uri");return Object.assign({recipientName:e.requestName,itemUrl:Object(k.e)(i)?i:n.handle,itemName:this.nameService.getName(n),authorName:t.name,authorEmail:t.email})}))));this.subject$=this.translateService.get("grant-request-copy.email.subject"),this.message$=e.pipe(Object(c.a)(e=>this.translateService.get("grant-request-copy.email.message",e)))}grant(e){this.itemRequestRD$.pipe(Object(p.j)(),Object(c.a)(t=>this.itemRequestService.grant(t.token,e,this.suggestOpenAccess)),Object(p.g)()).subscribe(e=>{e.hasSucceeded?(this.notificationsService.success(this.translateService.get("grant-request-copy.success")),this.router.navigateByUrl("/")):this.notificationsService.error(this.translateService.get("grant-request-copy.error"),e.errorMessage)})}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](u.h),i["\u0275\u0275directiveInject"](u.a),i["\u0275\u0275directiveInject"](g.a),i["\u0275\u0275directiveInject"](x.e),i["\u0275\u0275directiveInject"](v.a),i["\u0275\u0275directiveInject"](h.a),i["\u0275\u0275directiveInject"](B.a),i["\u0275\u0275directiveInject"]($.a))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-grant-request-copy"]],decls:3,vars:3,consts:[["class","container",4,"ngVar"],[1,"container"],[1,"mb-4"],[4,"ngIf"],[3,"subject","message","send"],[1,"mb-3"],[1,"form-check"],["type","checkbox","value","","id","permissions","name","permissions",1,"form-check-input",3,"ngModel","ngModelChange"],["for","permissions",1,"form-check-label"]],template:function(e,t){1&e&&(i["\u0275\u0275template"](0,z,10,5,"div",0),i["\u0275\u0275pipe"](1,"async"),i["\u0275\u0275text"](2,"\n")),2&e&&i["\u0275\u0275property"]("ngVar",i["\u0275\u0275pipeBind1"](1,1,t.itemRequestRD$))},directives:[y.a,a.p,A,w["\u0275angular_packages_forms_forms_ba"],w.NgControlStatusGroup,w.NgForm,w.CheckboxControlValueAccessor,w.NgControlStatus,w.NgModel,f.a],pipes:[a.b,x.d],styles:[""]}),e})(),G=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({providers:[R,E],imports:[[u.l.forChild([{path:":token",resolve:{request:R},children:[{path:"",component:E},{path:"deny",component:J},{path:"grant",component:H}]}])]]}),e})(),P=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({providers:[],imports:[[a.c,r.a,G]]}),e})()}}]);
//# sourceMappingURL=36-es2015.e644ec44d84d51297506.js.map