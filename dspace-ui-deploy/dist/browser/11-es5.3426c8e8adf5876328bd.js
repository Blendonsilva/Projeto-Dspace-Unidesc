!function(){function e(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&t(e,n)}function t(e,n){return(t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,n)}function n(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=i(e);if(t){var o=i(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return r(this,n)}}function r(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=s(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){c=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw a}}}}function o(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,c=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(s){c=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(c)throw i}}return a}(e,t)||s(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[11,14],{A0IO:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("fXoL"),i=n("J3qs"),a=n("q5u1"),o=n("tv3Y"),c=function(){var e=function(){function e(t){p(this,e),this.breadcrumbService=t}return d(e,[{key:"resolve",value:function(e,t){var n=e.data.breadcrumbKey;if(Object(i.a)(n))throw new Error('You provided an i18nBreadcrumbResolver for url "'+e.url+"\" but no breadcrumbKey in the route's data");var r=Object(a.b)(e);return{provider:this.breadcrumbService,key:n,url:r}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275inject"](o.a))},e.\u0275prov=r["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},Ssd4:function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var r,i,a=n("fXoL"),o=n("B/au"),c=n("pLZG"),s=n("lJxs"),l=n("cBqT"),u=n("32Ea"),m=n("J3qs"),f=n("zBnI"),g=n("1QIV"),b=n("Kvit"),v=((r=function(){function e(){p(this,e)}return d(e,[{key:"parse",value:function(e,t){var n=t.payload,r=Object.assign(new f.a,n);return new b.c(t.statusCode,void 0,r)}}]),e}()).\u0275fac=function(e){return new(e||r)},r.\u0275prov=a["\u0275\u0275defineInjectable"]({token:r,factory:r.\u0275fac,providedIn:"root"}),r),h=n("X/78"),x=n("7vy/"),S=n("uLZQ"),y=((i=function(){function e(t,n,r){p(this,e),this.requestService=t,this.rdbService=n,this.halService=r,this.linkPath="registrations",this.searchByTokenPath="/search/findByToken?token="}return d(e,[{key:"getRegistrationEndpoint",value:function(){return this.halService.getEndpoint(this.linkPath)}},{key:"getTokenSearchEndpoint",value:function(e){var t=this;return this.halService.getEndpoint(this.linkPath).pipe(Object(c.a)((function(e){return Object(m.e)(e)})),Object(s.a)((function(n){return"".concat(n).concat(t.searchByTokenPath).concat(e)})))}},{key:"registerEmail",value:function(e){var t=this,n=new f.a;n.email=e;var r=this.requestService.generateRequestId();return this.getRegistrationEndpoint().pipe(Object(l.a)((function(e){return Object(m.b)(e)})),Object(s.a)((function(e){var i=new o.l(r,e,n);t.requestService.send(i)}))).subscribe(),this.rdbService.buildFromRequestUUID(r).pipe(Object(g.g)())}},{key:"searchByToken",value:function(e){var t=this,n=this.requestService.generateRequestId(),r=this.getTokenSearchEndpoint(e).pipe(Object(l.a)((function(e){return Object(m.b)(e)})));return r.subscribe((function(e){var r=new o.g(n,e);Object.assign(r,{getResponseParser:function(){return v}}),t.requestService.send(r,!0)})),this.rdbService.buildSingle(r).pipe(Object(u.a)((function(e){return e.isStale})),Object(g.i)(),Object(s.a)((function(t){return Object.assign(new f.a,{email:t.payload.email,token:e,user:t.payload.user})})))}}]),e}()).\u0275fac=function(e){return new(e||i)(a["\u0275\u0275inject"](h.a),a["\u0275\u0275inject"](x.a),a["\u0275\u0275inject"](S.a))},i.\u0275prov=a["\u0275\u0275defineInjectable"]({token:i,factory:i.\u0275fac,providedIn:"root"}),i)},esCw:function(t,r,i){"use strict";i.r(r),i.d(r,"AccessControlModule",(function(){return Rt}));var s=i("ofXK"),l=i("fXoL"),u=i("tyNb"),m=i("PCNd"),f=i("2Vo4"),g=i("itXk"),b=i("eIep"),v=i("lJxs"),h=i("IzEk"),x=i("f+Ev"),S=i("J3qs"),y=i("7DXY"),E=function e(){p(this,e)},I=i("FU+A"),P=i("1QIV"),O=i("Q8wr"),j=i("oBfO"),k=i("wLgS"),w=i("sYmb"),B=i("lI3o"),C=i("1mcE"),G=i("3Pt+"),D=i("1kSV"),F=i("MFUF"),A=i("X/78"),L=i("e+Av"),N=i("LRne"),q=i("Kj3r"),V=i("Anbb"),$=i("84Zn"),R=i("YIpg"),M=i("Q5/L"),z=i("Vurf"),T=i("Ssd4"),_=i("hqmO"),Q=i("Frqi"),W=i("Exvd");function H(e,t){1&e&&l["\u0275\u0275element"](0,"div")}function U(e,t){if(1&e&&(l["\u0275\u0275text"](0,"\n  "),l["\u0275\u0275elementStart"](1,"h4"),l["\u0275\u0275text"](2),l["\u0275\u0275pipe"](3,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](4,"\n")),2&e){var n=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](3,1,n.messagePrefix+".create"))}}function J(e,t){if(1&e&&(l["\u0275\u0275text"](0,"\n  "),l["\u0275\u0275elementStart"](1,"h4"),l["\u0275\u0275text"](2),l["\u0275\u0275pipe"](3,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](4,"\n")),2&e){var n=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](3,1,n.messagePrefix+".edit"))}}var K=function(e){return{"d-none":e}};function Z(e,t){if(1&e){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"button",17),l["\u0275\u0275listener"]("click",(function(){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"]().impersonate()})),l["\u0275\u0275pipe"](1,"async"),l["\u0275\u0275text"](2,"\n      "),l["\u0275\u0275element"](3,"i",18),l["\u0275\u0275text"](4),l["\u0275\u0275pipe"](5,"translate"),l["\u0275\u0275elementEnd"]()}if(2&e){var r=l["\u0275\u0275nextContext"]();l["\u0275\u0275property"]("ngClass",l["\u0275\u0275pureFunction1"](6,K,!l["\u0275\u0275pipeBind1"](1,2,r.canImpersonate$))),l["\u0275\u0275advance"](4),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](5,4,"admin.access-control.epeople.actions.impersonate"),"\n    ")}}function X(e,t){if(1&e){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"button",19),l["\u0275\u0275listener"]("click",(function(){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"]().stopImpersonating()})),l["\u0275\u0275text"](1,"\n      "),l["\u0275\u0275element"](2,"i",18),l["\u0275\u0275text"](3),l["\u0275\u0275pipe"](4,"translate"),l["\u0275\u0275elementEnd"]()}2&e&&(l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](4,1,"admin.access-control.epeople.actions.stop-impersonating"),"\n    "))}function Y(e,t){1&e&&l["\u0275\u0275element"](0,"ds-loading",20),2&e&&l["\u0275\u0275property"]("showMessage",!1)}function ee(e,t){1&e&&l["\u0275\u0275element"](0,"ds-loading",20),2&e&&l["\u0275\u0275property"]("showMessage",!1)}var te=function(e){return[e]};function ne(e,t){if(1&e){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"tr"),l["\u0275\u0275text"](1,"\n          "),l["\u0275\u0275elementStart"](2,"td",28),l["\u0275\u0275text"](3),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](4,"\n          "),l["\u0275\u0275elementStart"](5,"td",28),l["\u0275\u0275elementStart"](6,"a",29),l["\u0275\u0275listener"]("click",(function(){l["\u0275\u0275restoreView"](n);var e=t.$implicit;return l["\u0275\u0275nextContext"](3).groupsDataService.startEditingNewGroup(e)})),l["\u0275\u0275text"](7),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](8,"\n          "),l["\u0275\u0275elementStart"](9,"td",28),l["\u0275\u0275text"](10),l["\u0275\u0275pipe"](11,"async"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](12,"\n        "),l["\u0275\u0275elementEnd"]()}if(2&e){var r,i=t.$implicit,a=l["\u0275\u0275nextContext"](3);l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate"](i.id),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("routerLink",l["\u0275\u0275pureFunction1"](6,te,a.groupsDataService.getGroupEditPageRouterLink(i))),l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate"](i.name),l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate"](null==(r=l["\u0275\u0275pipeBind1"](11,4,i.object))||null==r.payload?null:r.payload.name)}}function re(e,t){if(1&e){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"ds-pagination",23),l["\u0275\u0275listener"]("pageChange",(function(e){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"](2).onPageChange(e)})),l["\u0275\u0275pipe"](1,"async"),l["\u0275\u0275pipe"](2,"async"),l["\u0275\u0275text"](3,"\n\n    "),l["\u0275\u0275elementStart"](4,"div",24),l["\u0275\u0275text"](5,"\n      "),l["\u0275\u0275elementStart"](6,"table",25),l["\u0275\u0275text"](7,"\n        "),l["\u0275\u0275elementStart"](8,"thead"),l["\u0275\u0275text"](9,"\n        "),l["\u0275\u0275elementStart"](10,"tr"),l["\u0275\u0275text"](11,"\n          "),l["\u0275\u0275elementStart"](12,"th",26),l["\u0275\u0275text"](13),l["\u0275\u0275pipe"](14,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](15,"\n          "),l["\u0275\u0275elementStart"](16,"th",26),l["\u0275\u0275text"](17),l["\u0275\u0275pipe"](18,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](19,"\n          "),l["\u0275\u0275elementStart"](20,"th",26),l["\u0275\u0275text"](21),l["\u0275\u0275pipe"](22,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](23,"\n        "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](24,"\n        "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](25,"\n        "),l["\u0275\u0275elementStart"](26,"tbody"),l["\u0275\u0275text"](27,"\n        "),l["\u0275\u0275template"](28,ne,13,8,"tr",27),l["\u0275\u0275pipe"](29,"async"),l["\u0275\u0275text"](30,"\n        "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](31,"\n      "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](32,"\n    "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](33,"\n\n  "),l["\u0275\u0275elementEnd"]()}if(2&e){var r,i,a,o=l["\u0275\u0275nextContext"](2);l["\u0275\u0275property"]("paginationOptions",o.config)("pageInfoState",null==(r=l["\u0275\u0275pipeBind1"](1,9,o.groups))?null:r.payload)("collectionSize",null==(i=l["\u0275\u0275pipeBind1"](2,11,o.groups))||null==i.payload?null:i.payload.totalElements)("hideGear",!0)("hidePagerWhenSinglePage",!0),l["\u0275\u0275advance"](13),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](14,13,o.messagePrefix+".table.id")),l["\u0275\u0275advance"](4),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](18,15,o.messagePrefix+".table.name")),l["\u0275\u0275advance"](4),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](22,17,o.messagePrefix+".table.collectionOrCommunity")),l["\u0275\u0275advance"](7),l["\u0275\u0275property"]("ngForOf",null==(a=l["\u0275\u0275pipeBind1"](29,19,o.groups))||null==a.payload?null:a.payload.page)}}function ie(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"div",30),l["\u0275\u0275text"](1,"\n    "),l["\u0275\u0275elementStart"](2,"div"),l["\u0275\u0275text"](3),l["\u0275\u0275pipe"](4,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](5,"\n    "),l["\u0275\u0275elementStart"](6,"div"),l["\u0275\u0275text"](7,"\n      "),l["\u0275\u0275elementStart"](8,"button",31),l["\u0275\u0275text"](9),l["\u0275\u0275pipe"](10,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](11,"\n    "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](12,"\n  "),l["\u0275\u0275elementEnd"]()),2&e){var n=l["\u0275\u0275nextContext"](2);l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](4,3,n.messagePrefix+".memberOfNoGroups")),l["\u0275\u0275advance"](5),l["\u0275\u0275property"]("routerLink",l["\u0275\u0275pureFunction1"](7,te,n.groupsDataService.getGroupRegistryRouterLink())),l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](10,5,n.messagePrefix+".goToGroups"))}}function ae(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"div"),l["\u0275\u0275text"](1,"\n  "),l["\u0275\u0275elementStart"](2,"h5"),l["\u0275\u0275text"](3),l["\u0275\u0275pipe"](4,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](5,"\n\n  "),l["\u0275\u0275template"](6,ee,1,1,"ds-loading",15),l["\u0275\u0275pipe"](7,"async"),l["\u0275\u0275text"](8,"\n\n  "),l["\u0275\u0275template"](9,re,34,21,"ds-pagination",21),l["\u0275\u0275pipe"](10,"async"),l["\u0275\u0275text"](11,"\n\n  "),l["\u0275\u0275template"](12,ie,13,9,"div",22),l["\u0275\u0275pipe"](13,"async"),l["\u0275\u0275text"](14,"\n"),l["\u0275\u0275elementEnd"]()),2&e){var n,r,i=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](4,4,i.messagePrefix+".groupsEPersonIsMemberOf")),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("ngIf",!l["\u0275\u0275pipeBind1"](7,6,i.groups)),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("ngIf",(null==(n=l["\u0275\u0275pipeBind1"](10,8,i.groups))||null==n.payload?null:n.payload.totalElements)>0),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("ngIf",0==(null==(r=l["\u0275\u0275pipeBind1"](13,10,i.groups))||null==r.payload?null:r.payload.totalElements))}}var oe,ce=((oe=function(){function e(t,n,r,i,a,o,c,s,u,d,m,f){var g=this;p(this,e),this.changeDetectorRef=t,this.epersonService=n,this.groupsDataService=r,this.formBuilderService=i,this.translateService=a,this.notificationsService=o,this.authService=c,this.authorizationService=s,this.modalService=u,this.paginationService=d,this.requestService=m,this.epersonRegistrationService=f,this.labelPrefix="admin.access-control.epeople.form.",this.formId="eperson-form",this.messagePrefix="admin.access-control.epeople.form",this.formLayout={firstName:{grid:{host:"row"}},lastName:{grid:{host:"row"}},email:{grid:{host:"row"}},canLogIn:{grid:{host:"col col-sm-6 d-inline-block"}},requireCertificate:{grid:{host:"col col-sm-6 d-inline-block"}}},this.submitForm=new l.EventEmitter,this.cancelForm=new l.EventEmitter,this.subs=[],this.config=Object.assign(new y.a,{id:"gem",pageSize:5,currentPage:1}),this.isImpersonated=!1,this.subs.push(this.epersonService.getActiveEPerson().subscribe((function(e){g.epersonInitial=e,Object(S.b)(e)&&(g.isImpersonated=g.authService.isImpersonatingUser(e.id))})))}return d(e,[{key:"ngOnInit",value:function(){this.initialisePage()}},{key:"initialisePage",value:function(){var e=this;Object(g.a)(this.translateService.get("".concat(this.messagePrefix,".firstName")),this.translateService.get("".concat(this.messagePrefix,".lastName")),this.translateService.get("".concat(this.messagePrefix,".email")),this.translateService.get("".concat(this.messagePrefix,".canLogIn")),this.translateService.get("".concat(this.messagePrefix,".requireCertificate")),this.translateService.get("".concat(this.messagePrefix,".emailHint"))).subscribe((function(t){var n=c(t,6),r=n[0],i=n[1],a=n[2],o=n[3],s=n[4],l=n[5];e.firstName=new L.J({id:"firstName",label:r,name:"firstName",validators:{required:null},required:!0}),e.lastName=new L.J({id:"lastName",label:i,name:"lastName",validators:{required:null},required:!0}),e.email=new L.J({id:"email",label:a,name:"email",validators:{required:null,pattern:"^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$"},required:!0,errorMessages:{emailTaken:"error.validation.emailTaken",pattern:"error.validation.NotValidEmail"},hint:l}),e.canLogIn=new L.r({id:"canLogIn",label:o,name:"canLogIn",value:null==e.epersonInitial||e.epersonInitial.canLogIn}),e.requireCertificate=new L.r({id:"requireCertificate",label:s,name:"requireCertificate",value:null!=e.epersonInitial&&e.epersonInitial.requireCertificate}),e.formModel=[e.firstName,e.lastName,e.email,e.canLogIn,e.requireCertificate],e.formGroup=e.formBuilderService.createFormGroup(e.formModel),e.subs.push(e.epersonService.getActiveEPerson().subscribe((function(t){null!=t&&(e.groups=e.groupsDataService.findAllByHref(t._links.groups.href,{currentPage:1,elementsPerPage:e.config.pageSize})),e.formGroup.patchValue({firstName:null!=t?t.firstMetadataValue("eperson.firstname"):"",lastName:null!=t?t.firstMetadataValue("eperson.lastname"):"",email:null!=t?t.email:"",canLogIn:null==t||t.canLogIn,requireCertificate:null!=t&&t.requireCertificate}),null===t&&e.formGroup.controls.email&&(e.formGroup.controls.email.setAsyncValidators(function(){function e(){p(this,e)}return d(e,null,[{key:"createValidator",value:function(e){return function(t){return e.getEPersonByEmail(t.value).pipe(Object(P.i)(),Object(v.a)((function(e){return e.payload?{emailTaken:!0}:null})))}}}]),e}().createValidator(e.epersonService)),e.emailValueChangeSubscribe=e.email.valueChanges.pipe(Object(q.a)(300)).subscribe((function(){e.changeDetectorRef.detectChanges()})))})));var u=e.epersonService.getActiveEPerson();e.groups=u.pipe(Object(b.a)((function(t){return Object(g.a)([Object(N.a)(t),e.paginationService.getFindListOptions(e.config.id,{currentPage:1,elementsPerPage:e.config.pageSize})])})),Object(b.a)((function(t){var n=c(t,2),r=n[0],i=n[1];return null!=r?e.groupsDataService.findAllByHref(r._links.groups.href,i,!0,!0,Object($.a)("object")):Object(N.a)(void 0)}))),e.canImpersonate$=u.pipe(Object(b.a)((function(t){return Object(S.b)(t)?e.authorizationService.isAuthorized(I.a.LoginOnBehalfOf,t.self):Object(N.a)(!1)}))),e.canDelete$=u.pipe(Object(b.a)((function(t){return e.authorizationService.isAuthorized(I.a.CanDelete,Object(S.b)(t)?t.self:void 0)}))),e.canReset$=Object(N.a)(!0)}))}},{key:"onCancel",value:function(){this.epersonService.cancelEditEPerson(),this.cancelForm.emit()}},{key:"onSubmit",value:function(){var e=this;this.epersonService.getActiveEPerson().pipe(Object(h.a)(1)).subscribe((function(t){var n={metadata:{"eperson.firstname":[{value:e.firstName.value}],"eperson.lastname":[{value:e.lastName.value}]},email:e.email.value,canLogIn:e.canLogIn.value,requireCertificate:e.requireCertificate.value};null==t?e.createNewEPerson(n):e.editEPerson(t,n)}))}},{key:"createNewEPerson",value:function(e){var t=this,n=Object.assign(new V.a,e);this.epersonService.create(n).pipe(Object(P.g)()).subscribe((function(e){e.hasSucceeded?(t.notificationsService.success(t.translateService.get(t.labelPrefix+"notification.created.success",{name:n.name})),t.submitForm.emit(n)):(t.notificationsService.error(t.translateService.get(t.labelPrefix+"notification.created.failure",{name:n.name})),t.cancelForm.emit())})),this.showNotificationIfEmailInUse(n,"created")}},{key:"editEPerson",value:function(e,t){var n=this,r=Object.assign(new V.a,{id:e.id,metadata:{"eperson.firstname":[{value:this.firstName.value?this.firstName.value:e.firstMetadataValue("eperson.firstname")}],"eperson.lastname":[{value:this.lastName.value?this.lastName.value:e.firstMetadataValue("eperson.lastname")}]},email:Object(S.b)(t.email)?t.email:e.email,canLogIn:Object(S.b)(t.canLogIn)?t.canLogIn:e.canLogIn,requireCertificate:Object(S.b)(t.requireCertificate)?t.requireCertificate:e.requireCertificate,_links:e._links});this.epersonService.updateEPerson(r).pipe(Object(P.g)()).subscribe((function(e){e.hasSucceeded?(n.notificationsService.success(n.translateService.get(n.labelPrefix+"notification.edited.success",{name:r.name})),n.submitForm.emit(r)):(n.notificationsService.error(n.translateService.get(n.labelPrefix+"notification.edited.failure",{name:r.name})),n.cancelForm.emit())})),null!=t.email&&t.email!==e.email&&this.showNotificationIfEmailInUse(r,"edited")}},{key:"onPageChange",value:function(e){this.updateGroups({currentPage:e,elementsPerPage:this.config.pageSize})}},{key:"impersonate",value:function(){this.authService.impersonate(this.epersonInitial.id),this.isImpersonated=!0}},{key:"delete",value:function(){var e=this;this.epersonService.getActiveEPerson().pipe(Object(h.a)(1)).subscribe((function(t){var n=e.modalService.open(O.a);n.componentInstance.dso=t,n.componentInstance.headerLabel="confirmation-modal.delete-eperson.header",n.componentInstance.infoLabel="confirmation-modal.delete-eperson.info",n.componentInstance.cancelLabel="confirmation-modal.delete-eperson.cancel",n.componentInstance.confirmLabel="confirmation-modal.delete-eperson.confirm",n.componentInstance.brandColor="danger",n.componentInstance.confirmIcon="fas fa-trash",n.componentInstance.response.pipe(Object(h.a)(1)).subscribe((function(n){n&&Object(S.b)(t.id)&&e.epersonService.deleteEPerson(t).pipe(Object(P.g)()).subscribe((function(n){n.hasSucceeded?(e.notificationsService.success(e.translateService.get(e.labelPrefix+"notification.deleted.success",{name:t.name})),e.submitForm.emit()):e.notificationsService.error("Error occured when trying to delete EPerson with id: "+t.id+" with code: "+n.statusCode+" and message: "+n.errorMessage),e.cancelForm.emit()}))}))}))}},{key:"stopImpersonating",value:function(){this.authService.stopImpersonatingAndRefresh(),this.isImpersonated=!1}},{key:"resetPassword",value:function(){var e=this;Object(S.b)(this.epersonInitial.email)&&this.epersonRegistrationService.registerEmail(this.epersonInitial.email).pipe(Object(P.g)()).subscribe((function(t){t.hasSucceeded?e.notificationsService.success(e.translateService.get("admin.access-control.epeople.actions.reset"),e.translateService.get("forgot-email.form.success.content",{email:e.epersonInitial.email})):e.notificationsService.error(e.translateService.get("forgot-email.form.error.head"),e.translateService.get("forgot-email.form.error.content",{email:e.epersonInitial.email}))}))}},{key:"ngOnDestroy",value:function(){this.onCancel(),this.subs.filter((function(e){return Object(S.b)(e)})).forEach((function(e){return e.unsubscribe()})),this.paginationService.clearPagination(this.config.id),Object(S.b)(this.emailValueChangeSubscribe)&&this.emailValueChangeSubscribe.unsubscribe()}},{key:"reset",value:function(){var e=this;this.epersonService.getActiveEPerson().pipe(Object(h.a)(1)).subscribe((function(t){e.requestService.removeByHrefSubstring(t.self)})),this.initialisePage()}},{key:"showNotificationIfEmailInUse",value:function(e,t){var n=this;this.subs.push(this.epersonService.searchByScope("email",e.email,{currentPage:1,elementsPerPage:0}).pipe(Object(P.i)(),Object(P.o)()).subscribe((function(r){r.totalElements>0&&n.notificationsService.error(n.translateService.get(n.labelPrefix+"notification."+t+".failure.emailInUse",{name:e.name,email:e.email}))})))}},{key:"updateGroups",value:function(e){var t=this;this.subs.push(this.epersonService.getActiveEPerson().subscribe((function(n){t.groups=t.groupsDataService.findAllByHref(n._links.groups.href,e)})))}}]),e}()).\u0275fac=function(e){return new(e||oe)(l["\u0275\u0275directiveInject"](l.ChangeDetectorRef),l["\u0275\u0275directiveInject"](k.a),l["\u0275\u0275directiveInject"](R.a),l["\u0275\u0275directiveInject"](M.a),l["\u0275\u0275directiveInject"](w.e),l["\u0275\u0275directiveInject"](B.a),l["\u0275\u0275directiveInject"](z.a),l["\u0275\u0275directiveInject"](C.a),l["\u0275\u0275directiveInject"](D.q),l["\u0275\u0275directiveInject"](F.a),l["\u0275\u0275directiveInject"](A.a),l["\u0275\u0275directiveInject"](T.a))},oe.\u0275cmp=l["\u0275\u0275defineComponent"]({type:oe,selectors:[["ds-eperson-form"]],outputs:{submitForm:"submitForm",cancelForm:"cancelForm"},decls:49,vars:31,consts:[[4,"ngIf","ngIfThen","ngIfElse"],["createHeader",""],["editheader",""],[3,"formId","formModel","formGroup","formLayout","displayCancel","submitForm"],["before","",1,"btn-group"],[1,"btn","btn-outline-secondary",3,"click"],[1,"fas","fa-arrow-left"],["between","",1,"btn-group"],[1,"btn","btn-primary",3,"disabled","click"],[1,"fa","fa-key"],["between","",1,"btn-group","ml-1"],["class","btn btn-primary",3,"ngClass","click",4,"ngIf"],["class","btn btn-primary",3,"click",4,"ngIf"],["after","",1,"btn","btn-danger","delete-button",3,"disabled","click"],[1,"fas","fa-trash"],[3,"showMessage",4,"ngIf"],[4,"ngIf"],[1,"btn","btn-primary",3,"ngClass","click"],[1,"fa","fa-user-secret"],[1,"btn","btn-primary",3,"click"],[3,"showMessage"],[3,"paginationOptions","pageInfoState","collectionSize","hideGear","hidePagerWhenSinglePage","pageChange",4,"ngIf"],["class","alert alert-info w-100 mb-2","role","alert",4,"ngIf"],[3,"paginationOptions","pageInfoState","collectionSize","hideGear","hidePagerWhenSinglePage","pageChange"],[1,"table-responsive"],["id","groups",1,"table","table-striped","table-hover","table-bordered"],["scope","col",1,"align-middle"],[4,"ngFor","ngForOf"],[1,"align-middle"],[3,"routerLink","click"],["role","alert",1,"alert","alert-info","w-100","mb-2"],[1,"btn","btn-primary",3,"routerLink"]],template:function(e,t){if(1&e&&(l["\u0275\u0275template"](0,H,1,0,"div",0),l["\u0275\u0275pipe"](1,"async"),l["\u0275\u0275text"](2,"\n\n"),l["\u0275\u0275template"](3,U,5,3,"ng-template",null,1,l["\u0275\u0275templateRefExtractor"]),l["\u0275\u0275text"](5,"\n\n"),l["\u0275\u0275template"](6,J,5,3,"ng-template",null,2,l["\u0275\u0275templateRefExtractor"]),l["\u0275\u0275text"](8,"\n\n"),l["\u0275\u0275elementStart"](9,"ds-form",3),l["\u0275\u0275listener"]("submitForm",(function(){return t.onSubmit()})),l["\u0275\u0275text"](10,"\n  "),l["\u0275\u0275elementStart"](11,"div",4),l["\u0275\u0275text"](12,"\n    "),l["\u0275\u0275elementStart"](13,"button",5),l["\u0275\u0275listener"]("click",(function(){return t.onCancel()})),l["\u0275\u0275element"](14,"i",6),l["\u0275\u0275text"](15),l["\u0275\u0275pipe"](16,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](17,"\n  "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](18,"\n  "),l["\u0275\u0275elementStart"](19,"div",7),l["\u0275\u0275text"](20,"\n    "),l["\u0275\u0275elementStart"](21,"button",8),l["\u0275\u0275listener"]("click",(function(){return t.resetPassword()})),l["\u0275\u0275pipe"](22,"async"),l["\u0275\u0275text"](23,"\n      "),l["\u0275\u0275element"](24,"i",9),l["\u0275\u0275text"](25),l["\u0275\u0275pipe"](26,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](27,"\n  "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](28,"\n  "),l["\u0275\u0275elementStart"](29,"div",10),l["\u0275\u0275text"](30,"\n    "),l["\u0275\u0275template"](31,Z,6,8,"button",11),l["\u0275\u0275text"](32,"\n    "),l["\u0275\u0275template"](33,X,5,3,"button",12),l["\u0275\u0275text"](34,"\n  "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](35,"\n  "),l["\u0275\u0275elementStart"](36,"button",13),l["\u0275\u0275listener"]("click",(function(){return t.delete()})),l["\u0275\u0275pipe"](37,"async"),l["\u0275\u0275text"](38,"\n    "),l["\u0275\u0275element"](39,"i",14),l["\u0275\u0275text"](40),l["\u0275\u0275pipe"](41,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](42,"\n"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](43,"\n\n"),l["\u0275\u0275template"](44,Y,1,1,"ds-loading",15),l["\u0275\u0275text"](45,"\n\n"),l["\u0275\u0275template"](46,ae,15,12,"div",16),l["\u0275\u0275pipe"](47,"async"),l["\u0275\u0275text"](48,"\n")),2&e){var n=l["\u0275\u0275reference"](4),r=l["\u0275\u0275reference"](7);l["\u0275\u0275property"]("ngIf",l["\u0275\u0275pipeBind1"](1,17,t.epersonService.getActiveEPerson()))("ngIfThen",r)("ngIfElse",n),l["\u0275\u0275advance"](9),l["\u0275\u0275property"]("formId",t.formId)("formModel",t.formModel)("formGroup",t.formGroup)("formLayout",t.formLayout)("displayCancel",!1),l["\u0275\u0275advance"](6),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](16,19,t.messagePrefix+".return"),""),l["\u0275\u0275advance"](6),l["\u0275\u0275property"]("disabled",!l["\u0275\u0275pipeBind1"](22,21,t.canReset$)),l["\u0275\u0275advance"](4),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](26,23,"admin.access-control.epeople.actions.reset"),"\n    "),l["\u0275\u0275advance"](6),l["\u0275\u0275property"]("ngIf",!t.isImpersonated),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("ngIf",t.isImpersonated),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("disabled",!l["\u0275\u0275pipeBind1"](37,25,t.canDelete$)),l["\u0275\u0275advance"](4),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](41,27,"admin.access-control.epeople.actions.delete"),"\n  "),l["\u0275\u0275advance"](4),l["\u0275\u0275property"]("ngIf",!t.formGroup),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("ngIf",l["\u0275\u0275pipeBind1"](47,29,t.epersonService.getActiveEPerson()))}},directives:[s.p,_.a,G.NgControlStatusGroup,G.FormGroupDirective,s.m,Q.a,W.a,s.o,u.k,u.i],pipes:[s.b,w.d],encapsulation:2}),oe);function se(e,t){if(1&e){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"div"),l["\u0275\u0275text"](1,"\n          "),l["\u0275\u0275elementStart"](2,"button",7),l["\u0275\u0275listener"]("click",(function(){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"]().isEPersonFormShown=!0})),l["\u0275\u0275text"](3,"\n            "),l["\u0275\u0275element"](4,"i",8),l["\u0275\u0275text"](5,"\n            "),l["\u0275\u0275elementStart"](6,"span",9),l["\u0275\u0275text"](7),l["\u0275\u0275pipe"](8,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](9,"\n          "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](10,"\n        "),l["\u0275\u0275elementEnd"]()}if(2&e){var r=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](7),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](8,1,r.labelPrefix+"button.add"))}}function le(e,t){if(1&e){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"ds-eperson-form",10),l["\u0275\u0275listener"]("submitForm",(function(){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"]().reset()}))("cancelForm",(function(){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"]().isEPersonFormShown=!1})),l["\u0275\u0275elementEnd"]()}}function pe(e,t){1&e&&l["\u0275\u0275element"](0,"ds-loading")}var ue=function(e){return{"table-primary":e}},de=function(e){return{name:e}};function me(e,t){if(1&e){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"tr",30),l["\u0275\u0275pipe"](1,"async"),l["\u0275\u0275text"](2,"\n                "),l["\u0275\u0275elementStart"](3,"td"),l["\u0275\u0275text"](4),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](5,"\n                "),l["\u0275\u0275elementStart"](6,"td"),l["\u0275\u0275text"](7),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](8,"\n                "),l["\u0275\u0275elementStart"](9,"td"),l["\u0275\u0275text"](10),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](11,"\n                "),l["\u0275\u0275elementStart"](12,"td"),l["\u0275\u0275text"](13,"\n                  "),l["\u0275\u0275elementStart"](14,"div",31),l["\u0275\u0275text"](15,"\n                    "),l["\u0275\u0275elementStart"](16,"button",32),l["\u0275\u0275listener"]("click",(function(){l["\u0275\u0275restoreView"](n);var e=t.$implicit;return l["\u0275\u0275nextContext"](3).toggleEditEPerson(e.eperson)})),l["\u0275\u0275pipe"](17,"translate"),l["\u0275\u0275text"](18,"\n                      "),l["\u0275\u0275element"](19,"i",33),l["\u0275\u0275text"](20,"\n                    "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](21,"\n                    "),l["\u0275\u0275elementStart"](22,"button",34),l["\u0275\u0275listener"]("click",(function(){l["\u0275\u0275restoreView"](n);var e=t.$implicit;return l["\u0275\u0275nextContext"](3).deleteEPerson(e.eperson)})),l["\u0275\u0275pipe"](23,"translate"),l["\u0275\u0275text"](24,"\n                      "),l["\u0275\u0275element"](25,"i",35),l["\u0275\u0275text"](26,"\n                    "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](27,"\n                  "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](28,"\n                "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](29,"\n              "),l["\u0275\u0275elementEnd"]()}if(2&e){var r=t.$implicit,i=l["\u0275\u0275nextContext"](3);l["\u0275\u0275property"]("ngClass",l["\u0275\u0275pureFunction1"](15,ue,l["\u0275\u0275pipeBind1"](1,7,i.isActive(r.eperson)))),l["\u0275\u0275advance"](4),l["\u0275\u0275textInterpolate"](r.eperson.id),l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate"](r.eperson.name),l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate"](r.eperson.email),l["\u0275\u0275advance"](6),l["\u0275\u0275propertyInterpolate"]("title",l["\u0275\u0275pipeBind2"](17,9,i.labelPrefix+"table.edit.buttons.edit",l["\u0275\u0275pureFunction1"](17,de,r.eperson.name))),l["\u0275\u0275advance"](6),l["\u0275\u0275propertyInterpolate"]("title",l["\u0275\u0275pipeBind2"](23,12,i.labelPrefix+"table.edit.buttons.remove",l["\u0275\u0275pureFunction1"](19,de,r.eperson.name))),l["\u0275\u0275property"]("disabled",!r.ableToDelete)}}function fe(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"ds-pagination",25),l["\u0275\u0275pipe"](1,"async"),l["\u0275\u0275text"](2,"\n\n          "),l["\u0275\u0275elementStart"](3,"div",26),l["\u0275\u0275text"](4,"\n            "),l["\u0275\u0275elementStart"](5,"table",27),l["\u0275\u0275text"](6,"\n              "),l["\u0275\u0275elementStart"](7,"thead"),l["\u0275\u0275text"](8,"\n              "),l["\u0275\u0275elementStart"](9,"tr"),l["\u0275\u0275text"](10,"\n                "),l["\u0275\u0275elementStart"](11,"th",28),l["\u0275\u0275text"](12),l["\u0275\u0275pipe"](13,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](14,"\n                "),l["\u0275\u0275elementStart"](15,"th",28),l["\u0275\u0275text"](16),l["\u0275\u0275pipe"](17,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](18,"\n                "),l["\u0275\u0275elementStart"](19,"th",28),l["\u0275\u0275text"](20),l["\u0275\u0275pipe"](21,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](22,"\n                "),l["\u0275\u0275elementStart"](23,"th"),l["\u0275\u0275text"](24),l["\u0275\u0275pipe"](25,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](26,"\n              "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](27,"\n              "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](28,"\n              "),l["\u0275\u0275elementStart"](29,"tbody"),l["\u0275\u0275text"](30,"\n              "),l["\u0275\u0275template"](31,me,30,21,"tr",29),l["\u0275\u0275pipe"](32,"async"),l["\u0275\u0275text"](33,"\n              "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](34,"\n            "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](35,"\n          "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](36,"\n\n        "),l["\u0275\u0275elementEnd"]()),2&e){var n,r,i=l["\u0275\u0275nextContext"](2);l["\u0275\u0275property"]("paginationOptions",i.config)("pageInfoState",i.pageInfoState$)("collectionSize",null==(n=l["\u0275\u0275pipeBind1"](1,10,i.pageInfoState$))?null:n.totalElements)("hideGear",!0)("hidePagerWhenSinglePage",!0),l["\u0275\u0275advance"](12),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](13,12,i.labelPrefix+"table.id")),l["\u0275\u0275advance"](4),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](17,14,i.labelPrefix+"table.name")),l["\u0275\u0275advance"](4),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](21,16,i.labelPrefix+"table.email")),l["\u0275\u0275advance"](4),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](25,18,i.labelPrefix+"table.edit")),l["\u0275\u0275advance"](7),l["\u0275\u0275property"]("ngForOf",null==(r=l["\u0275\u0275pipeBind1"](32,20,i.ePeopleDto$))?null:r.page)}}function ge(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"div",36),l["\u0275\u0275text"](1),l["\u0275\u0275pipe"](2,"translate"),l["\u0275\u0275elementEnd"]()),2&e){var n=l["\u0275\u0275nextContext"](2);l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate1"]("\n          ",l["\u0275\u0275pipeBind1"](2,1,n.labelPrefix+"no-items"),"\n        ")}}function be(e,t){if(1&e){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"div"),l["\u0275\u0275text"](1,"\n        "),l["\u0275\u0275elementStart"](2,"h3",11),l["\u0275\u0275text"](3),l["\u0275\u0275pipe"](4,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](5,"\n        "),l["\u0275\u0275elementStart"](6,"form",12),l["\u0275\u0275listener"]("ngSubmit",(function(){l["\u0275\u0275restoreView"](n);var e=l["\u0275\u0275nextContext"]();return e.search(e.searchForm.value)})),l["\u0275\u0275text"](7,"\n          "),l["\u0275\u0275elementStart"](8,"div"),l["\u0275\u0275text"](9,"\n            "),l["\u0275\u0275elementStart"](10,"select",13),l["\u0275\u0275text"](11,"\n              "),l["\u0275\u0275elementStart"](12,"option",14),l["\u0275\u0275text"](13),l["\u0275\u0275pipe"](14,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](15,"\n              "),l["\u0275\u0275elementStart"](16,"option",15),l["\u0275\u0275text"](17),l["\u0275\u0275pipe"](18,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](19,"\n            "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](20,"\n          "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](21,"\n          "),l["\u0275\u0275elementStart"](22,"div",16),l["\u0275\u0275text"](23,"\n            "),l["\u0275\u0275elementStart"](24,"div",17),l["\u0275\u0275text"](25,"\n              "),l["\u0275\u0275element"](26,"input",18),l["\u0275\u0275pipe"](27,"translate"),l["\u0275\u0275pipe"](28,"translate"),l["\u0275\u0275text"](29,"\n              "),l["\u0275\u0275elementStart"](30,"span",19),l["\u0275\u0275text"](31,"\n                "),l["\u0275\u0275elementStart"](32,"button",20),l["\u0275\u0275text"](33,"\n                  "),l["\u0275\u0275element"](34,"i",21),l["\u0275\u0275text"](35),l["\u0275\u0275pipe"](36,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](37,"\n              "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](38,"\n            "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](39,"\n          "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](40,"\n          "),l["\u0275\u0275elementStart"](41,"div"),l["\u0275\u0275text"](42,"\n            "),l["\u0275\u0275elementStart"](43,"button",22),l["\u0275\u0275listener"]("click",(function(){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"]().clearFormAndResetResult()})),l["\u0275\u0275text"](44),l["\u0275\u0275pipe"](45,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](46,"\n          "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](47,"\n        "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](48,"\n\n        "),l["\u0275\u0275template"](49,pe,1,0,"ds-loading",5),l["\u0275\u0275pipe"](50,"async"),l["\u0275\u0275text"](51,"\n        "),l["\u0275\u0275template"](52,fe,37,22,"ds-pagination",23),l["\u0275\u0275pipe"](53,"async"),l["\u0275\u0275pipe"](54,"async"),l["\u0275\u0275text"](55,"\n\n        "),l["\u0275\u0275template"](56,ge,3,3,"div",24),l["\u0275\u0275pipe"](57,"async"),l["\u0275\u0275text"](58,"\n      "),l["\u0275\u0275elementEnd"]()}if(2&e){var r,i,a=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate1"]("",l["\u0275\u0275pipeBind1"](4,11,a.labelPrefix+"search.head"),"\n\n        "),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("formGroup",a.searchForm),l["\u0275\u0275advance"](7),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](14,13,a.labelPrefix+"search.scope.metadata")),l["\u0275\u0275advance"](4),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](18,15,a.labelPrefix+"search.scope.email")),l["\u0275\u0275advance"](9),l["\u0275\u0275property"]("placeholder",l["\u0275\u0275pipeBind1"](28,19,a.labelPrefix+"search.placeholder")),l["\u0275\u0275attribute"]("aria-label",l["\u0275\u0275pipeBind1"](27,17,a.labelPrefix+"search.placeholder")),l["\u0275\u0275advance"](9),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](36,21,a.labelPrefix+"search.button"),"\n                "),l["\u0275\u0275advance"](9),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](45,23,a.labelPrefix+"button.see-all")),l["\u0275\u0275advance"](5),l["\u0275\u0275property"]("ngIf",l["\u0275\u0275pipeBind1"](50,25,a.searching$)),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("ngIf",(null==(r=l["\u0275\u0275pipeBind1"](53,27,a.pageInfoState$))?null:r.totalElements)>0&&!l["\u0275\u0275pipeBind1"](54,29,a.searching$)),l["\u0275\u0275advance"](4),l["\u0275\u0275property"]("ngIf",0==(null==(i=l["\u0275\u0275pipeBind1"](57,31,a.pageInfoState$))?null:i.totalElements))}}var ve,he=((ve=function(){function e(t,n,r,i,a,o,c,s,l){p(this,e),this.epersonService=t,this.translateService=n,this.notificationsService=r,this.authorizationService=i,this.formBuilder=a,this.router=o,this.modalService=c,this.paginationService=s,this.requestService=l,this.labelPrefix="admin.access-control.epeople.",this.ePeople$=new f.a(Object(x.b)(new j.a,[])),this.ePeopleDto$=new f.a({}),this.pageInfoState$=new f.a(void 0),this.searching$=new f.a(!1),this.config=Object.assign(new y.a,{id:"elp",pageSize:5,currentPage:1}),this.subs=[],this.currentSearchQuery="",this.currentSearchScope="metadata",this.searchForm=this.formBuilder.group({scope:"metadata",query:""})}return d(e,[{key:"ngOnInit",value:function(){this.initialisePage()}},{key:"initialisePage",value:function(){var e=this;this.searching$.next(!0),this.isEPersonFormShown=!1,this.search({scope:this.currentSearchScope,query:this.currentSearchQuery}),this.subs.push(this.epersonService.getActiveEPerson().subscribe((function(t){null!=t&&t.id&&(e.isEPersonFormShown=!0)}))),this.subs.push(this.ePeople$.pipe(Object(b.a)((function(t){return t.pageInfo.totalElements>0?Object(g.a).apply(void 0,o(t.page.map((function(t){return e.authorizationService.isAuthorized(I.a.CanDelete,Object(S.b)(t)?t.self:void 0).pipe(Object(v.a)((function(e){var n=new E;return n.ableToDelete=e,n.eperson=t,n})))})))).pipe(Object(v.a)((function(e){return Object(x.b)(t.pageInfo,e)}))):[t]}))).subscribe((function(t){e.searching$.next(!1),e.ePeopleDto$.next(t),e.pageInfoState$.next(t.pageInfo)})))}},{key:"search",value:function(e){var t=this;this.searching$.next(!0),Object(S.b)(this.findListOptionsSub)&&this.findListOptionsSub.unsubscribe(),this.findListOptionsSub=this.paginationService.getCurrentPagination(this.config.id,this.config).pipe(Object(b.a)((function(n){var r=e.query,i=e.scope;return null!=r&&t.currentSearchQuery!==r&&(t.router.navigate([t.epersonService.getEPeoplePageRouterLink()],{queryParamsHandling:"merge"}),t.currentSearchQuery=r,t.paginationService.resetPage(t.config.id)),null!=i&&t.currentSearchScope!==i&&(t.router.navigate([t.epersonService.getEPeoplePageRouterLink()],{queryParamsHandling:"merge"}),t.currentSearchScope=i,t.paginationService.resetPage(t.config.id)),t.epersonService.searchByScope(t.currentSearchScope,t.currentSearchQuery,{currentPage:n.currentPage,elementsPerPage:n.pageSize})})),Object(P.c)()).subscribe((function(e){t.ePeople$.next(e.payload),t.pageInfoState$.next(e.payload.pageInfo)}))}},{key:"isActive",value:function(e){return this.getActiveEPerson().pipe(Object(v.a)((function(t){return e===t})))}},{key:"getActiveEPerson",value:function(){return this.epersonService.getActiveEPerson()}},{key:"toggleEditEPerson",value:function(e){var t=this;this.getActiveEPerson().pipe(Object(h.a)(1)).subscribe((function(n){e===n?(t.epersonService.cancelEditEPerson(),t.isEPersonFormShown=!1):(t.epersonService.editEPerson(e),t.isEPersonFormShown=!0)})),this.scrollToTop()}},{key:"deleteEPerson",value:function(e){var t=this;if(Object(S.b)(e.id)){var n=this.modalService.open(O.a);n.componentInstance.dso=e,n.componentInstance.headerLabel="confirmation-modal.delete-eperson.header",n.componentInstance.infoLabel="confirmation-modal.delete-eperson.info",n.componentInstance.cancelLabel="confirmation-modal.delete-eperson.cancel",n.componentInstance.confirmLabel="confirmation-modal.delete-eperson.confirm",n.componentInstance.brandColor="danger",n.componentInstance.confirmIcon="fas fa-trash",n.componentInstance.response.pipe(Object(h.a)(1)).subscribe((function(n){n&&Object(S.b)(e.id)&&t.epersonService.deleteEPerson(e).pipe(Object(P.g)()).subscribe((function(n){n.hasSucceeded?(t.notificationsService.success(t.translateService.get(t.labelPrefix+"notification.deleted.success",{name:e.name})),t.reset()):t.notificationsService.error("Error occured when trying to delete EPerson with id: "+e.id+" with code: "+n.statusCode+" and message: "+n.errorMessage)}))}))}}},{key:"ngOnDestroy",value:function(){this.cleanupSubscribes(),this.paginationService.clearPagination(this.config.id)}},{key:"cleanupSubscribes",value:function(){this.subs.filter((function(e){return Object(S.b)(e)})).forEach((function(e){return e.unsubscribe()}))}},{key:"scrollToTop",value:function(){!function e(){var t=document.documentElement.scrollTop||document.body.scrollTop;t>0&&(window.requestAnimationFrame(e),window.scrollTo(0,t-t/8))}()}},{key:"clearFormAndResetResult",value:function(){this.searchForm.patchValue({query:""}),this.search({query:""})}},{key:"reset",value:function(){var e=this;this.epersonService.getBrowseEndpoint().pipe(Object(h.a)(1)).subscribe((function(t){e.requestService.setStaleByHrefSubstring(t).pipe(Object(h.a)(1)).subscribe((function(){e.epersonService.cancelEditEPerson(),e.isEPersonFormShown=!1}))}))}}]),e}()).\u0275fac=function(e){return new(e||ve)(l["\u0275\u0275directiveInject"](k.a),l["\u0275\u0275directiveInject"](w.e),l["\u0275\u0275directiveInject"](B.a),l["\u0275\u0275directiveInject"](C.a),l["\u0275\u0275directiveInject"](G.FormBuilder),l["\u0275\u0275directiveInject"](u.h),l["\u0275\u0275directiveInject"](D.q),l["\u0275\u0275directiveInject"](F.a),l["\u0275\u0275directiveInject"](A.a))},ve.\u0275cmp=l["\u0275\u0275defineComponent"]({type:ve,selectors:[["ds-epeople-registry"]],decls:22,vars:6,consts:[[1,"container"],[1,"epeople-registry","row"],[1,"col-12"],[1,"d-flex","justify-content-between","border-bottom","mb-3"],["id","header",1,"pb-2"],[4,"ngIf"],[3,"submitForm","cancelForm",4,"ngIf"],[1,"mr-auto","btn","btn-success","addEPerson-button",3,"click"],[1,"fas","fa-plus"],[1,"d-none","d-sm-inline"],[3,"submitForm","cancelForm"],["id","search",1,"border-bottom","pb-2"],[1,"d-flex","justify-content-between",3,"formGroup","ngSubmit"],["name","scope","id","scope","formControlName","scope","aria-label","Search scope",1,"form-control"],["value","metadata"],["value","email"],[1,"flex-grow-1","mr-3","ml-3"],[1,"form-group","input-group"],["type","text","name","query","id","query","formControlName","query",1,"form-control",3,"placeholder"],[1,"input-group-append"],["type","submit",1,"search-button","btn","btn-primary"],[1,"fas","fa-search"],[1,"search-button","btn","btn-secondary",3,"click"],[3,"paginationOptions","pageInfoState","collectionSize","hideGear","hidePagerWhenSinglePage",4,"ngIf"],["class","alert alert-info w-100 mb-2","role","alert",4,"ngIf"],[3,"paginationOptions","pageInfoState","collectionSize","hideGear","hidePagerWhenSinglePage"],[1,"table-responsive"],["id","epeople",1,"table","table-striped","table-hover","table-bordered"],["scope","col"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[1,"btn-group","edit-field"],[1,"btn","btn-outline-primary","btn-sm","access-control-editEPersonButton",3,"title","click"],[1,"fas","fa-edit","fa-fw"],[1,"btn","btn-outline-danger","btn-sm","access-control-deleteEPersonButton",3,"disabled","title","click"],[1,"fas","fa-trash-alt","fa-fw"],["role","alert",1,"alert","alert-info","w-100","mb-2"]],template:function(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"div",0),l["\u0275\u0275text"](1,"\n  "),l["\u0275\u0275elementStart"](2,"div",1),l["\u0275\u0275text"](3,"\n    "),l["\u0275\u0275elementStart"](4,"div",2),l["\u0275\u0275text"](5,"\n      "),l["\u0275\u0275elementStart"](6,"div",3),l["\u0275\u0275text"](7,"\n        "),l["\u0275\u0275elementStart"](8,"h2",4),l["\u0275\u0275text"](9),l["\u0275\u0275pipe"](10,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](11,"\n\n        "),l["\u0275\u0275template"](12,se,11,3,"div",5),l["\u0275\u0275text"](13,"\n      "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](14,"\n\n      "),l["\u0275\u0275template"](15,le,1,0,"ds-eperson-form",6),l["\u0275\u0275text"](16,"\n\n      "),l["\u0275\u0275template"](17,be,59,33,"div",5),l["\u0275\u0275text"](18,"\n    "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](19,"\n  "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](20,"\n"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](21,"\n")),2&e&&(l["\u0275\u0275advance"](9),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](10,4,t.labelPrefix+"head")),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("ngIf",!t.isEPersonFormShown),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("ngIf",t.isEPersonFormShown),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("ngIf",!t.isEPersonFormShown))},directives:[s.p,ce,G["\u0275angular_packages_forms_forms_ba"],G.NgControlStatusGroup,G.FormGroupDirective,G.SelectControlValueAccessor,G.NgControlStatus,G.FormControlName,G.NgSelectOption,G["\u0275angular_packages_forms_forms_z"],G.DefaultValueAccessor,Q.a,W.a,s.o,s.m],pipes:[w.d,s.b],encapsulation:2}),ve),xe=i("pLZG"),Se=i("JIr8"),ye=i("Obj/"),Ee=i("krCT"),Ie=i("ArZ3"),Pe=i("ye/0"),Oe=i("YLTE"),je=i("ac5F"),ke=i("/O7Z"),we=i("VYMa"),Be=i("5+tZ"),Ce=function(e){return{name:e}};function Ge(e,t){if(1&e){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"button",25),l["\u0275\u0275listener"]("click",(function(){l["\u0275\u0275restoreView"](n);var e=l["\u0275\u0275nextContext"]().$implicit;return l["\u0275\u0275nextContext"](2).deleteMemberFromGroup(e)})),l["\u0275\u0275pipe"](1,"translate"),l["\u0275\u0275text"](2,"\n                "),l["\u0275\u0275element"](3,"i",26),l["\u0275\u0275text"](4,"\n              "),l["\u0275\u0275elementEnd"]()}if(2&e){var r=l["\u0275\u0275nextContext"]().$implicit,i=l["\u0275\u0275nextContext"](2);l["\u0275\u0275propertyInterpolate"]("title",l["\u0275\u0275pipeBind2"](1,1,i.messagePrefix+".table.edit.buttons.remove",l["\u0275\u0275pureFunction1"](4,Ce,r.eperson.name)))}}function De(e,t){if(1&e){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"button",27),l["\u0275\u0275listener"]("click",(function(){l["\u0275\u0275restoreView"](n);var e=l["\u0275\u0275nextContext"]().$implicit;return l["\u0275\u0275nextContext"](2).addMemberToGroup(e)})),l["\u0275\u0275pipe"](1,"translate"),l["\u0275\u0275text"](2,"\n                "),l["\u0275\u0275element"](3,"i",28),l["\u0275\u0275text"](4,"\n              "),l["\u0275\u0275elementEnd"]()}if(2&e){var r=l["\u0275\u0275nextContext"]().$implicit,i=l["\u0275\u0275nextContext"](2);l["\u0275\u0275propertyInterpolate"]("title",l["\u0275\u0275pipeBind2"](1,1,i.messagePrefix+".table.edit.buttons.add",l["\u0275\u0275pureFunction1"](4,Ce,r.eperson.name)))}}var Fe=function(e){return[e]};function Ae(e,t){if(1&e){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"tr"),l["\u0275\u0275text"](1,"\n          "),l["\u0275\u0275elementStart"](2,"td",19),l["\u0275\u0275text"](3),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](4,"\n          "),l["\u0275\u0275elementStart"](5,"td",19),l["\u0275\u0275elementStart"](6,"a",21),l["\u0275\u0275listener"]("click",(function(){l["\u0275\u0275restoreView"](n);var e=t.$implicit;return l["\u0275\u0275nextContext"](2).ePersonDataService.startEditingNewEPerson(e.eperson)})),l["\u0275\u0275text"](7),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](8,"\n          "),l["\u0275\u0275elementStart"](9,"td",19),l["\u0275\u0275text"](10),l["\u0275\u0275pipe"](11,"translate"),l["\u0275\u0275element"](12,"br"),l["\u0275\u0275text"](13),l["\u0275\u0275pipe"](14,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](15,"\n          "),l["\u0275\u0275elementStart"](16,"td",19),l["\u0275\u0275text"](17,"\n            "),l["\u0275\u0275elementStart"](18,"div",22),l["\u0275\u0275text"](19,"\n              "),l["\u0275\u0275template"](20,Ge,5,6,"button",23),l["\u0275\u0275text"](21,"\n\n              "),l["\u0275\u0275template"](22,De,5,6,"button",24),l["\u0275\u0275text"](23,"\n            "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](24,"\n          "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](25,"\n        "),l["\u0275\u0275elementEnd"]()}if(2&e){var r=t.$implicit,i=l["\u0275\u0275nextContext"](2);l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate"](r.eperson.id),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("routerLink",l["\u0275\u0275pureFunction1"](13,Fe,i.ePersonDataService.getEPeoplePageRouterLink())),l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate"](r.eperson.name),l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate2"]("\n            ",l["\u0275\u0275pipeBind1"](11,9,i.messagePrefix+".table.email"),": ",r.eperson.email?r.eperson.email:"-",""),l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate2"]("\n            ",l["\u0275\u0275pipeBind1"](14,11,i.messagePrefix+".table.netid"),": ",r.eperson.netid?r.eperson.netid:"-","\n          "),l["\u0275\u0275advance"](7),l["\u0275\u0275property"]("ngIf",r.memberOfGroup),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("ngIf",!r.memberOfGroup)}}function Le(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"ds-pagination",15),l["\u0275\u0275pipe"](1,"async"),l["\u0275\u0275pipe"](2,"async"),l["\u0275\u0275text"](3,"\n\n    "),l["\u0275\u0275elementStart"](4,"div",16),l["\u0275\u0275text"](5,"\n      "),l["\u0275\u0275elementStart"](6,"table",17),l["\u0275\u0275text"](7,"\n        "),l["\u0275\u0275elementStart"](8,"thead"),l["\u0275\u0275text"](9,"\n        "),l["\u0275\u0275elementStart"](10,"tr"),l["\u0275\u0275text"](11,"\n          "),l["\u0275\u0275elementStart"](12,"th",18),l["\u0275\u0275text"](13),l["\u0275\u0275pipe"](14,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](15,"\n          "),l["\u0275\u0275elementStart"](16,"th",18),l["\u0275\u0275text"](17),l["\u0275\u0275pipe"](18,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](19,"\n          "),l["\u0275\u0275elementStart"](20,"th",18),l["\u0275\u0275text"](21),l["\u0275\u0275pipe"](22,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](23,"\n          "),l["\u0275\u0275elementStart"](24,"th",19),l["\u0275\u0275text"](25),l["\u0275\u0275pipe"](26,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](27,"\n        "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](28,"\n        "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](29,"\n        "),l["\u0275\u0275elementStart"](30,"tbody"),l["\u0275\u0275text"](31,"\n        "),l["\u0275\u0275template"](32,Ae,26,15,"tr",20),l["\u0275\u0275pipe"](33,"async"),l["\u0275\u0275text"](34,"\n        "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](35,"\n      "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](36,"\n    "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](37,"\n\n  "),l["\u0275\u0275elementEnd"]()),2&e){var n,r,i=l["\u0275\u0275nextContext"]();l["\u0275\u0275property"]("paginationOptions",i.configSearch)("pageInfoState",l["\u0275\u0275pipeBind1"](1,10,i.ePeopleSearchDtos))("collectionSize",null==(n=l["\u0275\u0275pipeBind1"](2,12,i.ePeopleSearchDtos))?null:n.totalElements)("hideGear",!0)("hidePagerWhenSinglePage",!0),l["\u0275\u0275advance"](13),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](14,14,i.messagePrefix+".table.id")),l["\u0275\u0275advance"](4),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](18,16,i.messagePrefix+".table.name")),l["\u0275\u0275advance"](4),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](22,18,i.messagePrefix+".table.identity")),l["\u0275\u0275advance"](4),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](26,20,i.messagePrefix+".table.edit")),l["\u0275\u0275advance"](7),l["\u0275\u0275property"]("ngForOf",null==(r=l["\u0275\u0275pipeBind1"](33,22,i.ePeopleSearchDtos))?null:r.page)}}function Ne(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"div",29),l["\u0275\u0275text"](1),l["\u0275\u0275pipe"](2,"translate"),l["\u0275\u0275elementEnd"]()),2&e){var n=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate1"]("\n    ",l["\u0275\u0275pipeBind1"](2,1,n.messagePrefix+".no-items"),"\n  ")}}function qe(e,t){if(1&e){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"tr"),l["\u0275\u0275text"](1,"\n          "),l["\u0275\u0275elementStart"](2,"td",19),l["\u0275\u0275text"](3),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](4,"\n          "),l["\u0275\u0275elementStart"](5,"td",19),l["\u0275\u0275elementStart"](6,"a",21),l["\u0275\u0275listener"]("click",(function(){l["\u0275\u0275restoreView"](n);var e=t.$implicit;return l["\u0275\u0275nextContext"](2).ePersonDataService.startEditingNewEPerson(e.eperson)})),l["\u0275\u0275text"](7),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](8,"\n          "),l["\u0275\u0275elementStart"](9,"td",19),l["\u0275\u0275text"](10),l["\u0275\u0275pipe"](11,"translate"),l["\u0275\u0275element"](12,"br"),l["\u0275\u0275text"](13),l["\u0275\u0275pipe"](14,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](15,"\n          "),l["\u0275\u0275elementStart"](16,"td",19),l["\u0275\u0275text"](17,"\n            "),l["\u0275\u0275elementStart"](18,"div",22),l["\u0275\u0275text"](19,"\n              "),l["\u0275\u0275elementStart"](20,"button",25),l["\u0275\u0275listener"]("click",(function(){l["\u0275\u0275restoreView"](n);var e=t.$implicit;return l["\u0275\u0275nextContext"](2).deleteMemberFromGroup(e)})),l["\u0275\u0275pipe"](21,"translate"),l["\u0275\u0275text"](22,"\n                "),l["\u0275\u0275element"](23,"i",26),l["\u0275\u0275text"](24,"\n              "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](25,"\n            "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](26,"\n          "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](27,"\n        "),l["\u0275\u0275elementEnd"]()}if(2&e){var r=t.$implicit,i=l["\u0275\u0275nextContext"](2);l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate"](r.eperson.id),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("routerLink",l["\u0275\u0275pureFunction1"](15,Fe,i.ePersonDataService.getEPeoplePageRouterLink())),l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate"](r.eperson.name),l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate2"]("\n            ",l["\u0275\u0275pipeBind1"](11,8,i.messagePrefix+".table.email"),": ",r.eperson.email?r.eperson.email:"-",""),l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate2"]("\n            ",l["\u0275\u0275pipeBind1"](14,10,i.messagePrefix+".table.netid"),": ",r.eperson.netid?r.eperson.netid:"-","\n          "),l["\u0275\u0275advance"](7),l["\u0275\u0275propertyInterpolate"]("title",l["\u0275\u0275pipeBind2"](21,12,i.messagePrefix+".table.edit.buttons.remove",l["\u0275\u0275pureFunction1"](17,Ce,r.eperson.name)))}}function Ve(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"ds-pagination",15),l["\u0275\u0275pipe"](1,"async"),l["\u0275\u0275pipe"](2,"async"),l["\u0275\u0275text"](3,"\n\n    "),l["\u0275\u0275elementStart"](4,"div",16),l["\u0275\u0275text"](5,"\n      "),l["\u0275\u0275elementStart"](6,"table",30),l["\u0275\u0275text"](7,"\n        "),l["\u0275\u0275elementStart"](8,"thead"),l["\u0275\u0275text"](9,"\n        "),l["\u0275\u0275elementStart"](10,"tr"),l["\u0275\u0275text"](11,"\n          "),l["\u0275\u0275elementStart"](12,"th",18),l["\u0275\u0275text"](13),l["\u0275\u0275pipe"](14,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](15,"\n          "),l["\u0275\u0275elementStart"](16,"th",18),l["\u0275\u0275text"](17),l["\u0275\u0275pipe"](18,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](19,"\n          "),l["\u0275\u0275elementStart"](20,"th",18),l["\u0275\u0275text"](21),l["\u0275\u0275pipe"](22,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](23,"\n          "),l["\u0275\u0275elementStart"](24,"th",19),l["\u0275\u0275text"](25),l["\u0275\u0275pipe"](26,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](27,"\n        "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](28,"\n        "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](29,"\n        "),l["\u0275\u0275elementStart"](30,"tbody"),l["\u0275\u0275text"](31,"\n        "),l["\u0275\u0275template"](32,qe,28,19,"tr",20),l["\u0275\u0275pipe"](33,"async"),l["\u0275\u0275text"](34,"\n        "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](35,"\n      "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](36,"\n    "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](37,"\n\n  "),l["\u0275\u0275elementEnd"]()),2&e){var n,r,i=l["\u0275\u0275nextContext"]();l["\u0275\u0275property"]("paginationOptions",i.config)("pageInfoState",l["\u0275\u0275pipeBind1"](1,10,i.ePeopleMembersOfGroupDtos))("collectionSize",null==(n=l["\u0275\u0275pipeBind1"](2,12,i.ePeopleMembersOfGroupDtos))?null:n.totalElements)("hideGear",!0)("hidePagerWhenSinglePage",!0),l["\u0275\u0275advance"](13),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](14,14,i.messagePrefix+".table.id")),l["\u0275\u0275advance"](4),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](18,16,i.messagePrefix+".table.name")),l["\u0275\u0275advance"](4),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](22,18,i.messagePrefix+".table.identity")),l["\u0275\u0275advance"](4),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](26,20,i.messagePrefix+".table.edit")),l["\u0275\u0275advance"](7),l["\u0275\u0275property"]("ngForOf",null==(r=l["\u0275\u0275pipeBind1"](33,22,i.ePeopleMembersOfGroupDtos))?null:r.page)}}function $e(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"div",29),l["\u0275\u0275text"](1),l["\u0275\u0275pipe"](2,"translate"),l["\u0275\u0275elementEnd"]()),2&e){var n=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate1"]("\n    ",l["\u0275\u0275pipeBind1"](2,1,n.messagePrefix+".no-members-yet"),"\n  ")}}var Re,Me=function(e){return e[e.ActiveGroup=0]="ActiveGroup",e[e.MembersDTO=1]="MembersDTO",e[e.SearchResultsDTO=2]="SearchResultsDTO",e}({}),ze=((Re=function(){function e(t,n,r,i,a,o,c){p(this,e),this.groupDataService=t,this.ePersonDataService=n,this.translateService=r,this.notificationsService=i,this.formBuilder=a,this.paginationService=o,this.router=c,this.ePeopleSearchDtos=new f.a(void 0),this.ePeopleMembersOfGroupDtos=new f.a(void 0),this.configSearch=Object.assign(new y.a,{id:"sml",pageSize:5,currentPage:1}),this.config=Object.assign(new y.a,{id:"ml",pageSize:5,currentPage:1}),this.subs=new Map,this.currentSearchQuery="",this.currentSearchScope="metadata"}return d(e,[{key:"ngOnInit",value:function(){var e=this;this.searchForm=this.formBuilder.group({scope:"metadata",query:""}),this.subs.set(Me.ActiveGroup,this.groupDataService.getActiveGroup().subscribe((function(t){null!=t&&(e.groupBeingEdited=t,e.retrieveMembers(e.config.currentPage))})))}},{key:"retrieveMembers",value:function(e){var t=this;this.unsubFrom(Me.MembersDTO),this.subs.set(Me.MembersDTO,this.paginationService.getCurrentPagination(this.config.id,this.config).pipe(Object(b.a)((function(e){return t.ePersonDataService.findAllByHref(t.groupBeingEdited._links.epersons.href,{currentPage:e.currentPage,elementsPerPage:e.pageSize})})),Object(P.b)(),Object(v.a)((function(e){if(!e.hasFailed)return e;t.notificationsService.error(t.translateService.get(t.messagePrefix+".notification.failure",{cause:e.errorMessage}))})),Object(b.a)((function(e){return Object(g.a).apply(void 0,o(e.payload.page.map((function(e){return Object(g.a)(t.isMemberOfGroup(e),(function(t){var n=new E;return n.eperson=e,n.memberOfGroup=t,n}))})))).pipe(Object(v.a)((function(t){return Object(x.b)(e.payload.pageInfo,t)})))}))).subscribe((function(e){t.ePeopleMembersOfGroupDtos.next(e)})))}},{key:"isMemberOfGroup",value:function(e){var t=this;return this.groupDataService.getActiveGroup().pipe(Object(h.a)(1),Object(Be.a)((function(n){return null!=n?t.ePersonDataService.findAllByHref(n._links.epersons.href,{currentPage:1,elementsPerPage:9999},!1).pipe(Object(P.i)(),Object(P.o)(),Object(v.a)((function(t){return t.page.filter((function(t){return t.id===e.id}))})),Object(v.a)((function(e){return e.length>0}))):Object(N.a)(!1)})))}},{key:"unsubFrom",value:function(e){this.subs.has(e)&&(this.subs.get(e).unsubscribe(),this.subs.delete(e))}},{key:"deleteMemberFromGroup",value:function(e){var t=this;this.groupDataService.getActiveGroup().pipe(Object(h.a)(1)).subscribe((function(n){if(null!=n){var r=t.groupDataService.deleteMemberFromGroup(n,e.eperson);t.showNotifications("deleteMember",r,e.eperson.name,n),t.search({scope:t.currentSearchScope,query:t.currentSearchQuery})}else t.notificationsService.error(t.translateService.get(t.messagePrefix+".notification.failure.noActiveGroup"))}))}},{key:"addMemberToGroup",value:function(e){var t=this;e.memberOfGroup=!0,this.groupDataService.getActiveGroup().pipe(Object(h.a)(1)).subscribe((function(n){if(null!=n){var r=t.groupDataService.addMemberToGroup(n,e.eperson);t.showNotifications("addMember",r,e.eperson.name,n)}else t.notificationsService.error(t.translateService.get(t.messagePrefix+".notification.failure.noActiveGroup"))}))}},{key:"search",value:function(e){var t=this;this.unsubFrom(Me.SearchResultsDTO),this.subs.set(Me.SearchResultsDTO,this.paginationService.getCurrentPagination(this.configSearch.id,this.configSearch).pipe(Object(b.a)((function(n){var r=e.query,i=e.scope;return null!=r&&t.currentSearchQuery!==r&&t.groupBeingEdited&&(t.router.navigate([],{queryParamsHandling:"merge"}),t.currentSearchQuery=r,t.paginationService.resetPage(t.configSearch.id)),null!=i&&t.currentSearchScope!==i&&t.groupBeingEdited&&(t.router.navigate([],{queryParamsHandling:"merge"}),t.currentSearchScope=i,t.paginationService.resetPage(t.configSearch.id)),t.searchDone=!0,t.ePersonDataService.searchByScope(t.currentSearchScope,t.currentSearchQuery,{currentPage:n.currentPage,elementsPerPage:n.pageSize})})),Object(P.b)(),Object(v.a)((function(e){if(!e.hasFailed)return e;t.notificationsService.error(t.translateService.get(t.messagePrefix+".notification.failure",{cause:e.errorMessage}))})),Object(b.a)((function(e){return Object(g.a).apply(void 0,o(e.payload.page.map((function(e){return Object(g.a)(t.isMemberOfGroup(e),(function(t){var n=new E;return n.eperson=e,n.memberOfGroup=t,n}))})))).pipe(Object(v.a)((function(t){return Object(x.b)(e.payload.pageInfo,t)})))}))).subscribe((function(e){t.ePeopleSearchDtos.next(e)})))}},{key:"ngOnDestroy",value:function(){var e,t=a(this.subs.keys());try{for(t.s();!(e=t.n()).done;){var n=e.value;this.unsubFrom(n)}}catch(r){t.e(r)}finally{t.f()}this.paginationService.clearPagination(this.config.id),this.paginationService.clearPagination(this.configSearch.id)}},{key:"showNotifications",value:function(e,t,n,r){var i=this;t.pipe(Object(P.g)()).subscribe((function(t){t.hasSucceeded?(i.notificationsService.success(i.translateService.get(i.messagePrefix+".notification.success."+e,{name:n})),i.ePersonDataService.clearLinkRequests(r._links.epersons.href)):i.notificationsService.error(i.translateService.get(i.messagePrefix+".notification.failure."+e,{name:n}))}))}},{key:"clearFormAndResetResult",value:function(){this.searchForm.patchValue({query:""}),this.search({query:""})}}]),e}()).\u0275fac=function(e){return new(e||Re)(l["\u0275\u0275directiveInject"](R.a),l["\u0275\u0275directiveInject"](k.a),l["\u0275\u0275directiveInject"](w.e),l["\u0275\u0275directiveInject"](B.a),l["\u0275\u0275directiveInject"](G.FormBuilder),l["\u0275\u0275directiveInject"](F.a),l["\u0275\u0275directiveInject"](u.h))},Re.\u0275cmp=l["\u0275\u0275defineComponent"]({type:Re,selectors:[["ds-members-list"]],inputs:{messagePrefix:"messagePrefix"},decls:69,vars:36,consts:[[1,"border-bottom","pb-2"],["id","search",1,"border-bottom","pb-2"],[1,"d-flex","justify-content-between",3,"formGroup","ngSubmit"],["name","scope","id","scope","formControlName","scope","aria-label","Search scope",1,"form-control"],["value","metadata"],["value","email"],[1,"flex-grow-1","mr-3","ml-3"],[1,"form-group","input-group"],["type","text","name","query","id","query","formControlName","query","aria-label","Search input",1,"form-control"],[1,"input-group-append"],["type","submit",1,"search-button","btn","btn-primary"],[1,"fas","fa-search"],[1,"btn","btn-secondary",3,"click"],[3,"paginationOptions","pageInfoState","collectionSize","hideGear","hidePagerWhenSinglePage",4,"ngIf"],["class","alert alert-info w-100 mb-2","role","alert",4,"ngIf"],[3,"paginationOptions","pageInfoState","collectionSize","hideGear","hidePagerWhenSinglePage"],[1,"table-responsive"],["id","epersonsSearch",1,"table","table-striped","table-hover","table-bordered"],["scope","col",1,"align-middle"],[1,"align-middle"],[4,"ngFor","ngForOf"],[3,"routerLink","click"],[1,"btn-group","edit-field"],["class","btn btn-outline-danger btn-sm",3,"title","click",4,"ngIf"],["class","btn btn-outline-primary btn-sm",3,"title","click",4,"ngIf"],[1,"btn","btn-outline-danger","btn-sm",3,"title","click"],[1,"fas","fa-trash-alt","fa-fw"],[1,"btn","btn-outline-primary","btn-sm",3,"title","click"],[1,"fas","fa-plus","fa-fw"],["role","alert",1,"alert","alert-info","w-100","mb-2"],["id","ePeopleMembersOfGroup",1,"table","table-striped","table-hover","table-bordered"]],template:function(e,t){if(1&e&&(l["\u0275\u0275elementContainerStart"](0),l["\u0275\u0275text"](1,"\n  "),l["\u0275\u0275elementStart"](2,"h3",0),l["\u0275\u0275text"](3),l["\u0275\u0275pipe"](4,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](5,"\n\n  "),l["\u0275\u0275elementStart"](6,"h4",1),l["\u0275\u0275text"](7),l["\u0275\u0275pipe"](8,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](9,"\n  "),l["\u0275\u0275elementStart"](10,"form",2),l["\u0275\u0275listener"]("ngSubmit",(function(){return t.search(t.searchForm.value)})),l["\u0275\u0275text"](11,"\n    "),l["\u0275\u0275elementStart"](12,"div"),l["\u0275\u0275text"](13,"\n      "),l["\u0275\u0275elementStart"](14,"select",3),l["\u0275\u0275text"](15,"\n        "),l["\u0275\u0275elementStart"](16,"option",4),l["\u0275\u0275text"](17),l["\u0275\u0275pipe"](18,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](19,"\n        "),l["\u0275\u0275elementStart"](20,"option",5),l["\u0275\u0275text"](21),l["\u0275\u0275pipe"](22,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](23,"\n      "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](24,"\n    "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](25,"\n    "),l["\u0275\u0275elementStart"](26,"div",6),l["\u0275\u0275text"](27,"\n      "),l["\u0275\u0275elementStart"](28,"div",7),l["\u0275\u0275text"](29,"\n        "),l["\u0275\u0275element"](30,"input",8),l["\u0275\u0275text"](31,"\n        "),l["\u0275\u0275elementStart"](32,"span",9),l["\u0275\u0275text"](33,"\n            "),l["\u0275\u0275elementStart"](34,"button",10),l["\u0275\u0275text"](35,"\n              "),l["\u0275\u0275element"](36,"i",11),l["\u0275\u0275text"](37),l["\u0275\u0275pipe"](38,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](39,"\n        "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](40,"\n      "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](41,"\n    "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](42,"\n    "),l["\u0275\u0275elementStart"](43,"div"),l["\u0275\u0275text"](44,"\n      "),l["\u0275\u0275elementStart"](45,"button",12),l["\u0275\u0275listener"]("click",(function(){return t.clearFormAndResetResult()})),l["\u0275\u0275text"](46),l["\u0275\u0275pipe"](47,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](48,"\n    "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](49,"\n  "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](50,"\n\n  "),l["\u0275\u0275template"](51,Le,38,24,"ds-pagination",13),l["\u0275\u0275pipe"](52,"async"),l["\u0275\u0275text"](53,"\n\n  "),l["\u0275\u0275template"](54,Ne,3,3,"div",14),l["\u0275\u0275pipe"](55,"async"),l["\u0275\u0275text"](56,"\n\n  "),l["\u0275\u0275elementStart"](57,"h4"),l["\u0275\u0275text"](58),l["\u0275\u0275pipe"](59,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](60,"\n\n  "),l["\u0275\u0275template"](61,Ve,38,24,"ds-pagination",13),l["\u0275\u0275pipe"](62,"async"),l["\u0275\u0275text"](63,"\n\n  "),l["\u0275\u0275template"](64,$e,3,3,"div",14),l["\u0275\u0275pipe"](65,"async"),l["\u0275\u0275pipe"](66,"async"),l["\u0275\u0275text"](67,"\n\n"),l["\u0275\u0275elementContainerEnd"](),l["\u0275\u0275text"](68,"\n")),2&e){var n,r,i,a=null;l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](4,12,t.messagePrefix+".head")),l["\u0275\u0275advance"](4),l["\u0275\u0275textInterpolate1"]("",l["\u0275\u0275pipeBind1"](8,14,t.messagePrefix+".search.head"),"\n\n  "),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("formGroup",t.searchForm),l["\u0275\u0275advance"](7),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](18,16,t.messagePrefix+".search.scope.metadata")),l["\u0275\u0275advance"](4),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](22,18,t.messagePrefix+".search.scope.email")),l["\u0275\u0275advance"](16),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](38,20,t.messagePrefix+".search.button"),""),l["\u0275\u0275advance"](9),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](47,22,t.messagePrefix+".button.see-all")),l["\u0275\u0275advance"](5),l["\u0275\u0275property"]("ngIf",(null==(n=l["\u0275\u0275pipeBind1"](52,24,t.ePeopleSearchDtos))?null:n.totalElements)>0),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("ngIf",0==(null==(r=l["\u0275\u0275pipeBind1"](55,26,t.ePeopleSearchDtos))?null:r.totalElements)&&t.searchDone),l["\u0275\u0275advance"](4),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](59,28,t.messagePrefix+".headMembers")),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("ngIf",(null==(i=l["\u0275\u0275pipeBind1"](62,30,t.ePeopleMembersOfGroupDtos))?null:i.totalElements)>0),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("ngIf",null==l["\u0275\u0275pipeBind1"](65,32,t.ePeopleMembersOfGroupDtos)||0==(null==(a=l["\u0275\u0275pipeBind1"](66,34,t.ePeopleMembersOfGroupDtos))?null:a.totalElements))}},directives:[G["\u0275angular_packages_forms_forms_ba"],G.NgControlStatusGroup,G.FormGroupDirective,G.SelectControlValueAccessor,G.NgControlStatus,G.FormControlName,G.NgSelectOption,G["\u0275angular_packages_forms_forms_z"],G.DefaultValueAccessor,s.p,W.a,s.o,u.k],pipes:[w.d,s.b],encapsulation:2}),Re),Te=function(e){return{name:e}};function _e(e,t){if(1&e){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"button",23),l["\u0275\u0275listener"]("click",(function(){l["\u0275\u0275restoreView"](n);var e=l["\u0275\u0275nextContext"]().$implicit;return l["\u0275\u0275nextContext"](2).deleteSubgroupFromGroup(e)})),l["\u0275\u0275pipe"](1,"translate"),l["\u0275\u0275text"](2,"\n                "),l["\u0275\u0275element"](3,"i",24),l["\u0275\u0275text"](4,"\n              "),l["\u0275\u0275elementEnd"]()}if(2&e){var r=l["\u0275\u0275nextContext"]().$implicit,i=l["\u0275\u0275nextContext"](2);l["\u0275\u0275propertyInterpolate"]("title",l["\u0275\u0275pipeBind2"](1,1,i.messagePrefix+".table.edit.buttons.remove",l["\u0275\u0275pureFunction1"](4,Te,r.name)))}}function Qe(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"p"),l["\u0275\u0275text"](1),l["\u0275\u0275pipe"](2,"translate"),l["\u0275\u0275elementEnd"]()),2&e){var n=l["\u0275\u0275nextContext"](3);l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](2,1,n.messagePrefix+".table.edit.currentGroup"))}}function We(e,t){if(1&e){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"button",25),l["\u0275\u0275listener"]("click",(function(){l["\u0275\u0275restoreView"](n);var e=l["\u0275\u0275nextContext"]().$implicit;return l["\u0275\u0275nextContext"](2).addSubgroupToGroup(e)})),l["\u0275\u0275pipe"](1,"translate"),l["\u0275\u0275text"](2,"\n                "),l["\u0275\u0275element"](3,"i",26),l["\u0275\u0275text"](4,"\n              "),l["\u0275\u0275elementEnd"]()}if(2&e){var r=l["\u0275\u0275nextContext"]().$implicit,i=l["\u0275\u0275nextContext"](2);l["\u0275\u0275propertyInterpolate"]("title",l["\u0275\u0275pipeBind2"](1,1,i.messagePrefix+".table.edit.buttons.add",l["\u0275\u0275pureFunction1"](4,Te,r.name)))}}var He=function(e){return[e]};function Ue(e,t){if(1&e){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"tr"),l["\u0275\u0275text"](1,"\n          "),l["\u0275\u0275elementStart"](2,"td",16),l["\u0275\u0275text"](3),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](4,"\n          "),l["\u0275\u0275elementStart"](5,"td",16),l["\u0275\u0275elementStart"](6,"a",18),l["\u0275\u0275listener"]("click",(function(){l["\u0275\u0275restoreView"](n);var e=t.$implicit;return l["\u0275\u0275nextContext"](2).groupDataService.startEditingNewGroup(e)})),l["\u0275\u0275text"](7),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](8,"\n          "),l["\u0275\u0275elementStart"](9,"td",16),l["\u0275\u0275text"](10),l["\u0275\u0275pipe"](11,"async"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](12,"\n          "),l["\u0275\u0275elementStart"](13,"td",16),l["\u0275\u0275text"](14,"\n            "),l["\u0275\u0275elementStart"](15,"div",19),l["\u0275\u0275text"](16,"\n              "),l["\u0275\u0275template"](17,_e,5,6,"button",20),l["\u0275\u0275pipe"](18,"async"),l["\u0275\u0275pipe"](19,"async"),l["\u0275\u0275text"](20,"\n\n              "),l["\u0275\u0275template"](21,Qe,3,3,"p",21),l["\u0275\u0275pipe"](22,"async"),l["\u0275\u0275text"](23,"\n\n              "),l["\u0275\u0275template"](24,We,5,6,"button",22),l["\u0275\u0275pipe"](25,"async"),l["\u0275\u0275pipe"](26,"async"),l["\u0275\u0275text"](27,"\n            "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](28,"\n          "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](29,"\n        "),l["\u0275\u0275elementEnd"]()}if(2&e){var r,i=t.$implicit,a=l["\u0275\u0275nextContext"](2);l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate"](i.id),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("routerLink",l["\u0275\u0275pureFunction1"](19,He,a.groupDataService.getGroupEditPageRouterLink(i))),l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate"](i.name),l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate"](null==(r=l["\u0275\u0275pipeBind1"](11,7,i.object))||null==r.payload?null:r.payload.name),l["\u0275\u0275advance"](7),l["\u0275\u0275property"]("ngIf",l["\u0275\u0275pipeBind1"](18,9,a.isSubgroupOfGroup(i))&&!l["\u0275\u0275pipeBind1"](19,11,a.isActiveGroup(i))),l["\u0275\u0275advance"](4),l["\u0275\u0275property"]("ngIf",l["\u0275\u0275pipeBind1"](22,13,a.isActiveGroup(i))),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("ngIf",!l["\u0275\u0275pipeBind1"](25,15,a.isSubgroupOfGroup(i))&&!l["\u0275\u0275pipeBind1"](26,17,a.isActiveGroup(i)))}}function Je(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"ds-pagination",12),l["\u0275\u0275pipe"](1,"async"),l["\u0275\u0275pipe"](2,"async"),l["\u0275\u0275text"](3,"\n\n    "),l["\u0275\u0275elementStart"](4,"div",13),l["\u0275\u0275text"](5,"\n      "),l["\u0275\u0275elementStart"](6,"table",14),l["\u0275\u0275text"](7,"\n        "),l["\u0275\u0275elementStart"](8,"thead"),l["\u0275\u0275text"](9,"\n        "),l["\u0275\u0275elementStart"](10,"tr"),l["\u0275\u0275text"](11,"\n          "),l["\u0275\u0275elementStart"](12,"th",15),l["\u0275\u0275text"](13),l["\u0275\u0275pipe"](14,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](15,"\n          "),l["\u0275\u0275elementStart"](16,"th",15),l["\u0275\u0275text"](17),l["\u0275\u0275pipe"](18,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](19,"\n          "),l["\u0275\u0275elementStart"](20,"th",15),l["\u0275\u0275text"](21),l["\u0275\u0275pipe"](22,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](23,"\n          "),l["\u0275\u0275elementStart"](24,"th",16),l["\u0275\u0275text"](25),l["\u0275\u0275pipe"](26,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](27,"\n        "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](28,"\n        "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](29,"\n        "),l["\u0275\u0275elementStart"](30,"tbody"),l["\u0275\u0275text"](31,"\n        "),l["\u0275\u0275template"](32,Ue,30,21,"tr",17),l["\u0275\u0275pipe"](33,"async"),l["\u0275\u0275text"](34,"\n        "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](35,"\n      "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](36,"\n    "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](37,"\n  "),l["\u0275\u0275elementEnd"]()),2&e){var n,r,i,a=l["\u0275\u0275nextContext"]();l["\u0275\u0275property"]("paginationOptions",a.configSearch)("pageInfoState",null==(n=l["\u0275\u0275pipeBind1"](1,10,a.searchResults$))?null:n.payload)("collectionSize",null==(r=l["\u0275\u0275pipeBind1"](2,12,a.searchResults$))||null==r.payload?null:r.payload.totalElements)("hideGear",!0)("hidePagerWhenSinglePage",!0),l["\u0275\u0275advance"](13),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](14,14,a.messagePrefix+".table.id")),l["\u0275\u0275advance"](4),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](18,16,a.messagePrefix+".table.name")),l["\u0275\u0275advance"](4),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](22,18,a.messagePrefix+".table.collectionOrCommunity")),l["\u0275\u0275advance"](4),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](26,20,a.messagePrefix+".table.edit")),l["\u0275\u0275advance"](7),l["\u0275\u0275property"]("ngForOf",null==(i=l["\u0275\u0275pipeBind1"](33,22,a.searchResults$))||null==i.payload?null:i.payload.page)}}function Ke(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"div",27),l["\u0275\u0275text"](1),l["\u0275\u0275pipe"](2,"translate"),l["\u0275\u0275elementEnd"]()),2&e){var n=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate1"]("\n    ",l["\u0275\u0275pipeBind1"](2,1,n.messagePrefix+".no-items"),"\n  ")}}function Ze(e,t){if(1&e){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"tr"),l["\u0275\u0275text"](1,"\n          "),l["\u0275\u0275elementStart"](2,"td",16),l["\u0275\u0275text"](3),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](4,"\n          "),l["\u0275\u0275elementStart"](5,"td",16),l["\u0275\u0275elementStart"](6,"a",18),l["\u0275\u0275listener"]("click",(function(){l["\u0275\u0275restoreView"](n);var e=t.$implicit;return l["\u0275\u0275nextContext"](2).groupDataService.startEditingNewGroup(e)})),l["\u0275\u0275text"](7),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](8,"\n          "),l["\u0275\u0275elementStart"](9,"td",16),l["\u0275\u0275text"](10),l["\u0275\u0275pipe"](11,"async"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](12,"\n          "),l["\u0275\u0275elementStart"](13,"td",16),l["\u0275\u0275text"](14,"\n            "),l["\u0275\u0275elementStart"](15,"div",19),l["\u0275\u0275text"](16,"\n              "),l["\u0275\u0275elementStart"](17,"button",23),l["\u0275\u0275listener"]("click",(function(){l["\u0275\u0275restoreView"](n);var e=t.$implicit;return l["\u0275\u0275nextContext"](2).deleteSubgroupFromGroup(e)})),l["\u0275\u0275pipe"](18,"translate"),l["\u0275\u0275text"](19,"\n                "),l["\u0275\u0275element"](20,"i",24),l["\u0275\u0275text"](21,"\n              "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](22,"\n            "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](23,"\n          "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](24,"\n        "),l["\u0275\u0275elementEnd"]()}if(2&e){var r,i=t.$implicit,a=l["\u0275\u0275nextContext"](2);l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate"](i.id),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("routerLink",l["\u0275\u0275pureFunction1"](10,He,a.groupDataService.getGroupEditPageRouterLink(i))),l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate"](i.name),l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate"](null==(r=l["\u0275\u0275pipeBind1"](11,5,i.object))||null==r.payload?null:r.payload.name),l["\u0275\u0275advance"](7),l["\u0275\u0275propertyInterpolate"]("title",l["\u0275\u0275pipeBind2"](18,7,a.messagePrefix+".table.edit.buttons.remove",l["\u0275\u0275pureFunction1"](12,Te,i.name)))}}function Xe(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"ds-pagination",12),l["\u0275\u0275pipe"](1,"async"),l["\u0275\u0275pipe"](2,"async"),l["\u0275\u0275text"](3,"\n\n    "),l["\u0275\u0275elementStart"](4,"div",13),l["\u0275\u0275text"](5,"\n      "),l["\u0275\u0275elementStart"](6,"table",28),l["\u0275\u0275text"](7,"\n        "),l["\u0275\u0275elementStart"](8,"thead"),l["\u0275\u0275text"](9,"\n        "),l["\u0275\u0275elementStart"](10,"tr"),l["\u0275\u0275text"](11,"\n          "),l["\u0275\u0275elementStart"](12,"th",15),l["\u0275\u0275text"](13),l["\u0275\u0275pipe"](14,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](15,"\n          "),l["\u0275\u0275elementStart"](16,"th",15),l["\u0275\u0275text"](17),l["\u0275\u0275pipe"](18,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](19,"\n          "),l["\u0275\u0275elementStart"](20,"th",15),l["\u0275\u0275text"](21),l["\u0275\u0275pipe"](22,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](23,"\n          "),l["\u0275\u0275elementStart"](24,"th"),l["\u0275\u0275text"](25),l["\u0275\u0275pipe"](26,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](27,"\n        "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](28,"\n        "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](29,"\n        "),l["\u0275\u0275elementStart"](30,"tbody"),l["\u0275\u0275text"](31,"\n        "),l["\u0275\u0275template"](32,Ze,25,14,"tr",17),l["\u0275\u0275pipe"](33,"async"),l["\u0275\u0275text"](34,"\n        "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](35,"\n      "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](36,"\n    "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](37,"\n  "),l["\u0275\u0275elementEnd"]()),2&e){var n,r,i,a=l["\u0275\u0275nextContext"]();l["\u0275\u0275property"]("paginationOptions",a.config)("pageInfoState",null==(n=l["\u0275\u0275pipeBind1"](1,10,a.subGroups$))?null:n.payload)("collectionSize",null==(r=l["\u0275\u0275pipeBind1"](2,12,a.subGroups$))||null==r.payload?null:r.payload.totalElements)("hideGear",!0)("hidePagerWhenSinglePage",!0),l["\u0275\u0275advance"](13),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](14,14,a.messagePrefix+".table.id")),l["\u0275\u0275advance"](4),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](18,16,a.messagePrefix+".table.name")),l["\u0275\u0275advance"](4),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](22,18,a.messagePrefix+".table.collectionOrCommunity")),l["\u0275\u0275advance"](4),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](26,20,a.messagePrefix+".table.edit")),l["\u0275\u0275advance"](7),l["\u0275\u0275property"]("ngForOf",null==(i=l["\u0275\u0275pipeBind1"](33,22,a.subGroups$))||null==i.payload?null:i.payload.page)}}function Ye(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"div",27),l["\u0275\u0275text"](1),l["\u0275\u0275pipe"](2,"translate"),l["\u0275\u0275elementEnd"]()),2&e){var n=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate1"]("\n    ",l["\u0275\u0275pipeBind1"](2,1,n.messagePrefix+".no-subgroups-yet"),"\n  ")}}var et,tt=function(e){return e[e.Members=0]="Members",e[e.ActiveGroup=1]="ActiveGroup",e[e.SearchResults=2]="SearchResults",e}({}),nt=((et=function(){function e(t,n,r,i,a,o){p(this,e),this.groupDataService=t,this.translateService=n,this.notificationsService=r,this.formBuilder=i,this.paginationService=a,this.router=o,this.searchResults$=new f.a(void 0),this.subGroups$=new f.a(void 0),this.subs=new Map,this.configSearch=Object.assign(new y.a,{id:"ssgl",pageSize:5,currentPage:1}),this.config=Object.assign(new y.a,{id:"sgl",pageSize:5,currentPage:1}),this.currentSearchQuery=""}return d(e,[{key:"ngOnInit",value:function(){var e=this;this.searchForm=this.formBuilder.group({query:""}),this.subs.set(tt.ActiveGroup,this.groupDataService.getActiveGroup().subscribe((function(t){null!=t&&(e.groupBeingEdited=t,e.retrieveSubGroups())})))}},{key:"retrieveSubGroups",value:function(){var e=this;this.unsubFrom(tt.Members),this.subs.set(tt.Members,this.paginationService.getCurrentPagination(this.config.id,this.config).pipe(Object(b.a)((function(t){return e.groupDataService.findAllByHref(e.groupBeingEdited._links.subgroups.href,{currentPage:t.currentPage,elementsPerPage:t.pageSize},!0,!0,Object($.a)("object"))}))).subscribe((function(t){e.subGroups$.next(t)})))}},{key:"isSubgroupOfGroup",value:function(e){var t=this;return this.groupDataService.getActiveGroup().pipe(Object(h.a)(1),Object(Be.a)((function(n){return null!=n?n.uuid===e.uuid?Object(N.a)(!1):t.groupDataService.findAllByHref(n._links.subgroups.href,{currentPage:1,elementsPerPage:9999}).pipe(Object(P.i)(),Object(P.o)(),Object(v.a)((function(t){return t.page.filter((function(t){return t.id===e.id}))})),Object(v.a)((function(e){return e.length>0}))):Object(N.a)(!1)})))}},{key:"isActiveGroup",value:function(e){return this.groupDataService.getActiveGroup().pipe(Object(h.a)(1),Object(Be.a)((function(t){return null!=t&&t.uuid===e.uuid?Object(N.a)(!0):Object(N.a)(!1)})))}},{key:"deleteSubgroupFromGroup",value:function(e){var t=this;this.groupDataService.getActiveGroup().pipe(Object(h.a)(1)).subscribe((function(n){if(null!=n){var r=t.groupDataService.deleteSubGroupFromGroup(n,e);t.showNotifications("deleteSubgroup",r,e.name,n)}else t.notificationsService.error(t.translateService.get(t.messagePrefix+".notification.failure.noActiveGroup"))}))}},{key:"addSubgroupToGroup",value:function(e){var t=this;this.groupDataService.getActiveGroup().pipe(Object(h.a)(1)).subscribe((function(n){if(null!=n)if(n.uuid!==e.uuid){var r=t.groupDataService.addSubGroupToGroup(n,e);t.showNotifications("addSubgroup",r,e.name,n)}else t.notificationsService.error(t.translateService.get(t.messagePrefix+".notification.failure.subgroupToAddIsActiveGroup"));else t.notificationsService.error(t.translateService.get(t.messagePrefix+".notification.failure.noActiveGroup"))}))}},{key:"search",value:function(e){var t=this,n=e.query;null!=n&&this.currentSearchQuery!==n&&(this.router.navigateByUrl(this.groupDataService.getGroupEditPageRouterLink(this.groupBeingEdited)),this.currentSearchQuery=n,this.configSearch.currentPage=1),this.searchDone=!0,this.unsubFrom(tt.SearchResults),this.subs.set(tt.SearchResults,this.paginationService.getCurrentPagination(this.configSearch.id,this.configSearch).pipe(Object(b.a)((function(e){return t.groupDataService.searchGroups(t.currentSearchQuery,{currentPage:e.currentPage,elementsPerPage:e.pageSize},!0,!0,Object($.a)("object"))}))).subscribe((function(e){t.searchResults$.next(e)})))}},{key:"unsubFrom",value:function(e){this.subs.has(e)&&(this.subs.get(e).unsubscribe(),this.subs.delete(e))}},{key:"ngOnDestroy",value:function(){var e,t=a(this.subs.keys());try{for(t.s();!(e=t.n()).done;){var n=e.value;this.unsubFrom(n)}}catch(r){t.e(r)}finally{t.f()}this.paginationService.clearPagination(this.config.id),this.paginationService.clearPagination(this.configSearch.id)}},{key:"showNotifications",value:function(e,t,n,r){var i=this;t.pipe(Object(P.g)()).subscribe((function(t){t.hasSucceeded?(i.notificationsService.success(i.translateService.get(i.messagePrefix+".notification.success."+e,{name:n})),i.groupDataService.clearGroupLinkRequests(r._links.subgroups.href)):i.notificationsService.error(i.translateService.get(i.messagePrefix+".notification.failure."+e,{name:n}))}))}},{key:"clearFormAndResetResult",value:function(){this.searchForm.patchValue({query:""}),this.search({query:""})}}]),e}()).\u0275fac=function(e){return new(e||et)(l["\u0275\u0275directiveInject"](R.a),l["\u0275\u0275directiveInject"](w.e),l["\u0275\u0275directiveInject"](B.a),l["\u0275\u0275directiveInject"](G.FormBuilder),l["\u0275\u0275directiveInject"](F.a),l["\u0275\u0275directiveInject"](u.h))},et.\u0275cmp=l["\u0275\u0275defineComponent"]({type:et,selectors:[["ds-subgroups-list"]],inputs:{messagePrefix:"messagePrefix"},decls:54,vars:28,consts:[[1,"border-bottom","pb-2"],["id","search",1,"border-bottom","pb-2"],[1,"d-flex","justify-content-between",3,"formGroup","ngSubmit"],[1,"flex-grow-1","mr-3"],[1,"form-group","input-group","mr-3"],["type","text","name","query","id","query","formControlName","query","aria-label","Search input",1,"form-control"],[1,"input-group-append"],["type","submit",1,"search-button","btn","btn-primary"],[1,"fas","fa-search"],[1,"btn","btn-secondary","float-right",3,"click"],[3,"paginationOptions","pageInfoState","collectionSize","hideGear","hidePagerWhenSinglePage",4,"ngIf"],["class","alert alert-info w-100 mb-2","role","alert",4,"ngIf"],[3,"paginationOptions","pageInfoState","collectionSize","hideGear","hidePagerWhenSinglePage"],[1,"table-responsive"],["id","groupsSearch",1,"table","table-striped","table-hover","table-bordered"],["scope","col",1,"align-middle"],[1,"align-middle"],[4,"ngFor","ngForOf"],[3,"routerLink","click"],[1,"btn-group","edit-field"],["class","btn btn-outline-danger btn-sm deleteButton",3,"title","click",4,"ngIf"],[4,"ngIf"],["class","btn btn-outline-primary btn-sm addButton",3,"title","click",4,"ngIf"],[1,"btn","btn-outline-danger","btn-sm","deleteButton",3,"title","click"],[1,"fas","fa-trash-alt","fa-fw"],[1,"btn","btn-outline-primary","btn-sm","addButton",3,"title","click"],[1,"fas","fa-plus","fa-fw"],["role","alert",1,"alert","alert-info","w-100","mb-2"],["id","subgroupsOfGroup",1,"table","table-striped","table-hover","table-bordered"]],template:function(e,t){var n,r,i,a;(1&e&&(l["\u0275\u0275elementContainerStart"](0),l["\u0275\u0275text"](1,"\n  "),l["\u0275\u0275elementStart"](2,"h3",0),l["\u0275\u0275text"](3),l["\u0275\u0275pipe"](4,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](5,"\n\n  "),l["\u0275\u0275elementStart"](6,"h4",1),l["\u0275\u0275text"](7),l["\u0275\u0275pipe"](8,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](9,"\n  "),l["\u0275\u0275elementStart"](10,"form",2),l["\u0275\u0275listener"]("ngSubmit",(function(){return t.search(t.searchForm.value)})),l["\u0275\u0275text"](11,"\n    "),l["\u0275\u0275elementStart"](12,"div",3),l["\u0275\u0275text"](13,"\n      "),l["\u0275\u0275elementStart"](14,"div",4),l["\u0275\u0275text"](15,"\n        "),l["\u0275\u0275element"](16,"input",5),l["\u0275\u0275text"](17,"\n        "),l["\u0275\u0275elementStart"](18,"span",6),l["\u0275\u0275text"](19,"\n            "),l["\u0275\u0275elementStart"](20,"button",7),l["\u0275\u0275text"](21,"\n              "),l["\u0275\u0275element"](22,"i",8),l["\u0275\u0275text"](23),l["\u0275\u0275pipe"](24,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](25,"\n        "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](26,"\n\n      "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](27,"\n    "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](28,"\n    "),l["\u0275\u0275elementStart"](29,"div"),l["\u0275\u0275text"](30,"\n      "),l["\u0275\u0275elementStart"](31,"button",9),l["\u0275\u0275listener"]("click",(function(){return t.clearFormAndResetResult()})),l["\u0275\u0275text"](32),l["\u0275\u0275pipe"](33,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](34,"\n    "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](35,"\n  "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](36,"\n\n  "),l["\u0275\u0275template"](37,Je,38,24,"ds-pagination",10),l["\u0275\u0275pipe"](38,"async"),l["\u0275\u0275text"](39,"\n\n  "),l["\u0275\u0275template"](40,Ke,3,3,"div",11),l["\u0275\u0275pipe"](41,"async"),l["\u0275\u0275text"](42,"\n\n  "),l["\u0275\u0275elementStart"](43,"h4"),l["\u0275\u0275text"](44),l["\u0275\u0275pipe"](45,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](46,"\n\n  "),l["\u0275\u0275template"](47,Xe,38,24,"ds-pagination",10),l["\u0275\u0275pipe"](48,"async"),l["\u0275\u0275text"](49,"\n\n  "),l["\u0275\u0275template"](50,Ye,3,3,"div",11),l["\u0275\u0275pipe"](51,"async"),l["\u0275\u0275text"](52,"\n\n"),l["\u0275\u0275elementContainerEnd"](),l["\u0275\u0275text"](53,"\n")),2&e)&&(l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](4,10,t.messagePrefix+".head")),l["\u0275\u0275advance"](4),l["\u0275\u0275textInterpolate1"]("",l["\u0275\u0275pipeBind1"](8,12,t.messagePrefix+".search.head"),"\n\n  "),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("formGroup",t.searchForm),l["\u0275\u0275advance"](13),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](24,14,t.messagePrefix+".search.button"),"\n            "),l["\u0275\u0275advance"](9),l["\u0275\u0275textInterpolate1"]("\n        ",l["\u0275\u0275pipeBind1"](33,16,t.messagePrefix+".button.see-all"),"\n      "),l["\u0275\u0275advance"](5),l["\u0275\u0275property"]("ngIf",(null==(n=l["\u0275\u0275pipeBind1"](38,18,t.searchResults$))||null==n.payload?null:n.payload.totalElements)>0),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("ngIf",0==(null==(r=l["\u0275\u0275pipeBind1"](41,20,t.searchResults$))||null==r.payload?null:r.payload.totalElements)&&t.searchDone),l["\u0275\u0275advance"](4),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](45,22,t.messagePrefix+".headSubgroups")),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("ngIf",(null==(i=l["\u0275\u0275pipeBind1"](48,24,t.subGroups$))||null==i.payload?null:i.payload.totalElements)>0),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("ngIf",0==(null==(a=l["\u0275\u0275pipeBind1"](51,26,t.subGroups$))||null==a.payload?null:a.payload.totalElements)))},directives:[G["\u0275angular_packages_forms_forms_ba"],G.NgControlStatusGroup,G.FormGroupDirective,G.DefaultValueAccessor,G.NgControlStatus,G.FormControlName,s.p,W.a,s.o,u.k],pipes:[w.d,s.b],encapsulation:2}),et);function rt(e,t){1&e&&l["\u0275\u0275element"](0,"div")}function it(e,t){if(1&e&&(l["\u0275\u0275text"](0,"\n        "),l["\u0275\u0275elementStart"](1,"h2",14),l["\u0275\u0275text"](2),l["\u0275\u0275pipe"](3,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](4,"\n      ")),2&e){var n=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](3,1,n.messagePrefix+".head.create"))}}function at(e,t){if(1&e&&(l["\u0275\u0275text"](0,"\n        "),l["\u0275\u0275elementStart"](1,"h2",14),l["\u0275\u0275text"](2),l["\u0275\u0275pipe"](3,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](4,"\n      ")),2&e){var n=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](3,1,n.messagePrefix+".head.edit"))}}function ot(e,t){if(1&e&&l["\u0275\u0275element"](0,"ds-alert",15),2&e){var n=l["\u0275\u0275nextContext"]();l["\u0275\u0275property"]("type",n.AlertTypeEnum.Warning)("content",n.messagePrefix+".alert.permanent")}}var ct=function(e,t,n){return{name:e,comcol:t,comcolEditRolesRoute:n}};function st(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"ds-alert",15),l["\u0275\u0275pipe"](1,"translate"),l["\u0275\u0275pipe"](2,"async"),l["\u0275\u0275pipe"](3,"async"),l["\u0275\u0275pipe"](4,"async"),l["\u0275\u0275text"](5,"\n      "),l["\u0275\u0275elementEnd"]()),2&e){var n=l["\u0275\u0275nextContext"](),r=null;l["\u0275\u0275property"]("type",n.AlertTypeEnum.Warning)("content",l["\u0275\u0275pipeBind2"](1,2,n.messagePrefix+".alert.workflowGroup",l["\u0275\u0275pureFunction3"](11,ct,null==(r=l["\u0275\u0275pipeBind1"](2,5,n.getLinkedDSO(n.groupBeingEdited)))||null==r.payload?null:r.payload.name,null==(r=l["\u0275\u0275pipeBind1"](3,7,n.getLinkedDSO(n.groupBeingEdited)))||null==r.payload?null:r.payload.type,l["\u0275\u0275pipeBind1"](4,9,n.getLinkedEditRolesRoute(n.groupBeingEdited)))))}}function lt(e,t){if(1&e){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"div",16),l["\u0275\u0275text"](1,"\n          "),l["\u0275\u0275elementStart"](2,"button",17),l["\u0275\u0275listener"]("click",(function(){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"]().delete()})),l["\u0275\u0275pipe"](3,"async"),l["\u0275\u0275text"](4,"\n            "),l["\u0275\u0275element"](5,"i",18),l["\u0275\u0275text"](6),l["\u0275\u0275pipe"](7,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](8,"\n        "),l["\u0275\u0275elementEnd"]()}if(2&e){var r=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("disabled",!l["\u0275\u0275pipeBind1"](3,2,r.canEdit$)||r.groupBeingEdited.permanent),l["\u0275\u0275advance"](4),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](7,4,r.messagePrefix+".actions.delete"),"\n          ")}}function pt(e,t){if(1&e&&l["\u0275\u0275element"](0,"ds-members-list",19),2&e){var n=l["\u0275\u0275nextContext"]();l["\u0275\u0275property"]("messagePrefix",n.messagePrefix+".members-list")}}function ut(e,t){if(1&e&&l["\u0275\u0275element"](0,"ds-subgroups-list",19),2&e){var n=l["\u0275\u0275nextContext"]();l["\u0275\u0275property"]("messagePrefix",n.messagePrefix+".subgroups-list")}}var dt,mt=((dt=function(){function e(t,n,r,i,a,o,c,s,u,d,m,f){p(this,e),this.groupDataService=t,this.ePersonDataService=n,this.dSpaceObjectDataService=r,this.formBuilderService=i,this.translateService=a,this.notificationsService=o,this.route=c,this.router=s,this.authorizationService=u,this.modalService=d,this.requestService=m,this.changeDetectorRef=f,this.messagePrefix="admin.access-control.groups.form",this.formId="group-form",this.formLayout={groupName:{grid:{host:"row"}},groupDescription:{grid:{host:"row"}}},this.submitForm=new l.EventEmitter,this.cancelForm=new l.EventEmitter,this.subs=[],this.AlertTypeEnum=je.a}return d(e,[{key:"ngOnInit",value:function(){this.initialisePage()}},{key:"initialisePage",value:function(){var e=this;this.subs.push(this.route.params.subscribe((function(t){"newGroup"!==t.groupId&&e.setActiveGroup(t.groupId)}))),this.canEdit$=this.groupDataService.getActiveGroup().pipe(Object(S.c)(),Object(b.a)((function(t){return Object(g.a)(e.authorizationService.isAuthorized(I.a.CanDelete,Object(S.e)(t)?t.self:void 0),e.hasLinkedDSO(t),(function(e,t){return e&&!t}))}))),Object(g.a)(this.translateService.get("".concat(this.messagePrefix,".groupName")),this.translateService.get("".concat(this.messagePrefix,".groupCommunity")),this.translateService.get("".concat(this.messagePrefix,".groupDescription"))).subscribe((function(t){var n=c(t,3),r=n[0],i=n[1],a=n[2];e.groupName=new L.J({id:"groupName",label:r,name:"groupName",validators:{required:null},required:!0}),e.groupCommunity=new L.J({id:"groupCommunity",label:i,name:"groupCommunity",required:!1,readOnly:!0}),e.groupDescription=new L.P({id:"groupDescription",label:a,name:"groupDescription",required:!1}),e.formModel=[e.groupName,e.groupDescription],e.formGroup=e.formBuilderService.createFormGroup(e.formModel),e.formGroup.controls.groupName&&(e.formGroup.controls.groupName.setAsyncValidators(function(){function e(){p(this,e)}return d(e,null,[{key:"createValidator",value:function(e){return function(t){return e.searchGroups(t.value,{currentPage:1,elementsPerPage:100}).pipe(Object(P.l)(),Object(v.a)((function(e){return e.filter((function(e){return e.name===t.value}))})),Object(v.a)((function(e){return e.length>0?{groupExists:!0}:null})))}}}]),e}().createValidator(e.groupDataService)),e.groupNameValueChangeSubscribe=e.groupName.valueChanges.pipe(Object(q.a)(300)).subscribe((function(){e.changeDetectorRef.detectChanges()}))),e.subs.push(Object(g.a)(e.groupDataService.getActiveGroup(),e.canEdit$,e.groupDataService.getActiveGroup().pipe(Object(xe.a)((function(e){return Object(S.b)(e)})),Object(b.a)((function(t){return e.getLinkedDSO(t).pipe(Object(P.j)())})))).subscribe((function(t){var n,r=c(t,3),i=r[0],a=r[1],o=r[2];null!=i&&(e.formGroup.controls.groupName.clearAsyncValidators(),e.groupBeingEdited=i,(null==o?void 0:o.name)?(e.formBuilderService.insertFormGroupControl(1,e.formGroup,e.formModel,e.groupCommunity),e.formGroup.patchValue({groupName:i.name,groupCommunity:null!==(n=null==o?void 0:o.name)&&void 0!==n?n:"",groupDescription:i.firstMetadataValue("dc.description")})):(e.formModel=[e.groupName,e.groupDescription],e.formGroup.patchValue({groupName:i.name,groupDescription:i.firstMetadataValue("dc.description")})),setTimeout((function(){a&&!i.permanent||e.formGroup.disable()}),200))})))}))}},{key:"onCancel",value:function(){this.groupDataService.cancelEditGroup(),this.cancelForm.emit(),this.router.navigate([this.groupDataService.getGroupRegistryRouterLink()])}},{key:"onSubmit",value:function(){var e=this;this.groupDataService.getActiveGroup().pipe(Object(h.a)(1)).subscribe((function(t){null===t?e.createNewGroup({name:e.groupName.value,metadata:{"dc.description":[{value:e.groupDescription.value}]}}):e.editGroup(t)}))}},{key:"createNewGroup",value:function(e){var t=this,n=Object.assign(new Ie.a,e);this.groupDataService.create(n).pipe(Object(P.g)()).subscribe((function(e){e.hasSucceeded?(t.notificationsService.success(t.translateService.get(t.messagePrefix+".notification.created.success",{name:n.name})),t.submitForm.emit(n),Object(S.e)(e.payload)&&(t.setActiveGroupWithLink(e.payload._links.self.href),t.groupDataService.clearGroupsRequests(),t.router.navigateByUrl(t.groupDataService.getGroupEditPageRouterLinkWithID(e.payload.uuid)))):(t.notificationsService.error(t.translateService.get(t.messagePrefix+".notification.created.failure",{name:n.name})),t.showNotificationIfNameInUse(n,"created"),t.cancelForm.emit())}))}},{key:"showNotificationIfNameInUse",value:function(e,t){var n=this;this.subs.push(this.groupDataService.searchGroups(e.name,{currentPage:1,elementsPerPage:0}).pipe(Object(P.i)(),Object(P.o)()).subscribe((function(r){r.totalElements>0&&n.notificationsService.error(n.translateService.get(n.messagePrefix+".notification."+t+".failure.groupNameInUse",{name:e.name}))})))}},{key:"editGroup",value:function(e){var t=this,n=[];Object(S.b)(this.groupDescription.value)&&(n=[].concat(o(n),[{op:"replace",path:"/metadata/dc.description/0/value",value:this.groupDescription.value}])),Object(S.b)(this.groupName.value)&&(n=[].concat(o(n),[{op:"replace",path:"/name",value:this.groupName.value}])),this.groupDataService.patch(e,n).pipe(Object(P.g)()).subscribe((function(n){n.hasSucceeded?(t.notificationsService.success(t.translateService.get(t.messagePrefix+".notification.edited.success",{name:n.payload.name})),t.submitForm.emit(n.payload)):(t.notificationsService.error(t.translateService.get(t.messagePrefix+".notification.edited.failure",{name:e.name})),t.cancelForm.emit())}))}},{key:"setActiveGroup",value:function(e){var t=this;this.groupDataService.cancelEditGroup(),this.groupDataService.findById(e).pipe(Object(P.i)(),Object(P.o)()).subscribe((function(e){t.groupDataService.editGroup(e)}))}},{key:"setActiveGroupWithLink",value:function(e){var t=this;this.groupDataService.getActiveGroup().pipe(Object(h.a)(1)).subscribe((function(n){null===n&&(t.groupDataService.cancelEditGroup(),t.groupDataService.findByHref(e,!1,!1,Object($.a)("subgroups"),Object($.a)("epersons"),Object($.a)("object")).pipe(Object(P.i)(),Object(P.o)()).subscribe((function(e){t.groupDataService.editGroup(e)})))}))}},{key:"delete",value:function(){var e=this;this.groupDataService.getActiveGroup().pipe(Object(h.a)(1)).subscribe((function(t){var n=e.modalService.open(O.a);n.componentInstance.dso=t,n.componentInstance.headerLabel=e.messagePrefix+".delete-group.modal.header",n.componentInstance.infoLabel=e.messagePrefix+".delete-group.modal.info",n.componentInstance.cancelLabel=e.messagePrefix+".delete-group.modal.cancel",n.componentInstance.confirmLabel=e.messagePrefix+".delete-group.modal.confirm",n.componentInstance.brandColor="danger",n.componentInstance.confirmIcon="fas fa-trash",n.componentInstance.response.pipe(Object(h.a)(1)).subscribe((function(n){n&&Object(S.b)(t.id)&&e.groupDataService.delete(t.id).pipe(Object(P.g)()).subscribe((function(n){n.hasSucceeded?(e.notificationsService.success(e.translateService.get(e.messagePrefix+".notification.deleted.success",{name:t.name})),e.reset()):e.notificationsService.error(e.translateService.get(e.messagePrefix+".notification.deleted.failure.title",{name:t.name}),e.translateService.get(e.messagePrefix+".notification.deleted.failure.content",{cause:n.errorMessage}))}))}))}))}},{key:"reset",value:function(){var e=this;this.groupDataService.getBrowseEndpoint().pipe(Object(h.a)(1)).subscribe((function(t){e.requestService.removeByHrefSubstring(t)})),this.onCancel()}},{key:"ngOnDestroy",value:function(){this.groupDataService.cancelEditGroup(),this.subs.filter((function(e){return Object(S.b)(e)})).forEach((function(e){return e.unsubscribe()})),Object(S.b)(this.groupNameValueChangeSubscribe)&&this.groupNameValueChangeSubscribe.unsubscribe()}},{key:"hasLinkedDSO",value:function(e){if(Object(S.b)(e)&&Object(S.b)(e._links.object.href))return this.getLinkedDSO(e).pipe(Object(v.a)((function(e){return Object(S.b)(e)&&Object(S.b)(e.payload)})),Object(Se.a)((function(){return Object(N.a)(!1)})))}},{key:"getLinkedDSO",value:function(e){if(Object(S.b)(e)&&Object(S.b)(e._links.object.href))return void 0===e.object?this.dSpaceObjectDataService.findByHref(e._links.object.href):e.object}},{key:"getLinkedEditRolesRoute",value:function(e){if(Object(S.b)(e)&&Object(S.b)(e._links.object.href))return this.getLinkedDSO(e).pipe(Object(v.a)((function(e){if(Object(S.b)(e)&&Object(S.b)(e.payload))switch(e.payload.type){case Oe.a.type.value:return Object(Ee.f)(e.payload.id);case Pe.a.type.value:return Object(ye.g)(e.payload.id)}})))}}]),e}()).\u0275fac=function(e){return new(e||dt)(l["\u0275\u0275directiveInject"](R.a),l["\u0275\u0275directiveInject"](k.a),l["\u0275\u0275directiveInject"](ke.a),l["\u0275\u0275directiveInject"](M.a),l["\u0275\u0275directiveInject"](w.e),l["\u0275\u0275directiveInject"](B.a),l["\u0275\u0275directiveInject"](u.a),l["\u0275\u0275directiveInject"](u.h),l["\u0275\u0275directiveInject"](C.a),l["\u0275\u0275directiveInject"](D.q),l["\u0275\u0275directiveInject"](A.a),l["\u0275\u0275directiveInject"](l.ChangeDetectorRef))},dt.\u0275cmp=l["\u0275\u0275defineComponent"]({type:dt,selectors:[["ds-group-form"]],hostBindings:function(e,t){1&e&&l["\u0275\u0275listener"]("beforeunload",(function(){return t.ngOnDestroy()}),!1,l["\u0275\u0275resolveWindow"])},outputs:{submitForm:"submitForm",cancelForm:"cancelForm"},decls:44,vars:22,consts:[[1,"container"],[1,"group-form","row"],[1,"col-12"],[4,"ngIf","ngIfThen","ngIfElse"],["createHeader",""],["editheader",""],[3,"type","content",4,"ngIf"],[3,"formId","formModel","formGroup","formLayout","displayCancel","submitForm"],["before","",1,"btn-group"],[1,"btn","btn-outline-secondary",3,"click"],[1,"fas","fa-arrow-left"],["after","","class","btn-group",4,"ngIf"],[1,"mb-5"],[3,"messagePrefix",4,"ngIf"],[1,"border-bottom","pb-2"],[3,"type","content"],["after","",1,"btn-group"],[1,"btn","btn-danger","delete-button",3,"disabled","click"],[1,"fa","fa-trash"],[3,"messagePrefix"]],template:function(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"div",0),l["\u0275\u0275text"](1,"\n  "),l["\u0275\u0275elementStart"](2,"div",1),l["\u0275\u0275text"](3,"\n    "),l["\u0275\u0275elementStart"](4,"div",2),l["\u0275\u0275text"](5,"\n\n      "),l["\u0275\u0275template"](6,rt,1,0,"div",3),l["\u0275\u0275pipe"](7,"async"),l["\u0275\u0275text"](8,"\n\n      "),l["\u0275\u0275template"](9,it,5,3,"ng-template",null,4,l["\u0275\u0275templateRefExtractor"]),l["\u0275\u0275text"](11,"\n\n      "),l["\u0275\u0275template"](12,at,5,3,"ng-template",null,5,l["\u0275\u0275templateRefExtractor"]),l["\u0275\u0275text"](14,"\n\n      "),l["\u0275\u0275template"](15,ot,1,2,"ds-alert",6),l["\u0275\u0275text"](16,"\n      "),l["\u0275\u0275template"](17,st,6,15,"ds-alert",6),l["\u0275\u0275pipe"](18,"async"),l["\u0275\u0275pipe"](19,"async"),l["\u0275\u0275text"](20,"\n\n      "),l["\u0275\u0275elementStart"](21,"ds-form",7),l["\u0275\u0275listener"]("submitForm",(function(){return t.onSubmit()})),l["\u0275\u0275text"](22,"\n        "),l["\u0275\u0275elementStart"](23,"div",8),l["\u0275\u0275text"](24,"\n          "),l["\u0275\u0275elementStart"](25,"button",9),l["\u0275\u0275listener"]("click",(function(){return t.onCancel()})),l["\u0275\u0275element"](26,"i",10),l["\u0275\u0275text"](27),l["\u0275\u0275pipe"](28,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](29,"\n        "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](30,"\n        "),l["\u0275\u0275template"](31,lt,9,6,"div",11),l["\u0275\u0275text"](32,"\n      "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](33,"\n\n      "),l["\u0275\u0275elementStart"](34,"div",12),l["\u0275\u0275text"](35,"\n        "),l["\u0275\u0275template"](36,pt,1,1,"ds-members-list",13),l["\u0275\u0275text"](37,"\n      "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](38,"\n      "),l["\u0275\u0275template"](39,ut,1,1,"ds-subgroups-list",13),l["\u0275\u0275text"](40,"\n\n\n\n    "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](41,"\n  "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](42,"\n"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](43,"\n")),2&e){var n=l["\u0275\u0275reference"](10),r=l["\u0275\u0275reference"](13);l["\u0275\u0275advance"](6),l["\u0275\u0275property"]("ngIf",l["\u0275\u0275pipeBind1"](7,14,t.groupDataService.getActiveGroup()))("ngIfThen",r)("ngIfElse",n),l["\u0275\u0275advance"](9),l["\u0275\u0275property"]("ngIf",null==t.groupBeingEdited?null:t.groupBeingEdited.permanent),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("ngIf",!l["\u0275\u0275pipeBind1"](18,16,t.canEdit$)&&l["\u0275\u0275pipeBind1"](19,18,t.groupDataService.getActiveGroup())),l["\u0275\u0275advance"](4),l["\u0275\u0275property"]("formId",t.formId)("formModel",t.formModel)("formGroup",t.formGroup)("formLayout",t.formLayout)("displayCancel",!1),l["\u0275\u0275advance"](6),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](28,20,t.messagePrefix+".return"),""),l["\u0275\u0275advance"](4),l["\u0275\u0275property"]("ngIf",null!=t.groupBeingEdited),l["\u0275\u0275advance"](5),l["\u0275\u0275property"]("ngIf",null!=t.groupBeingEdited),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("ngIf",null!=t.groupBeingEdited)}},directives:[s.p,_.a,G.NgControlStatusGroup,G.FormGroupDirective,we.a,ze,nt],pipes:[s.b,w.d],encapsulation:2}),dt),ft=i("vkgz"),gt=function e(){p(this,e)},bt=i("ppE2");function vt(e,t){1&e&&l["\u0275\u0275element"](0,"ds-loading")}var ht=function(e){return{name:e}};function xt(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"button",30),l["\u0275\u0275pipe"](1,"translate"),l["\u0275\u0275text"](2,"\n                      "),l["\u0275\u0275element"](3,"i",31),l["\u0275\u0275text"](4,"\n                    "),l["\u0275\u0275elementEnd"]()),2&e){var n=l["\u0275\u0275nextContext"]().$implicit,r=l["\u0275\u0275nextContext"](2);l["\u0275\u0275propertyInterpolate"]("title",l["\u0275\u0275pipeBind2"](1,2,r.messagePrefix+"table.edit.buttons.edit",l["\u0275\u0275pureFunction1"](5,ht,n.group.name))),l["\u0275\u0275property"]("routerLink",r.groupService.getGroupEditPageRouterLink(n.group))}}function St(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"button",32),l["\u0275\u0275pipe"](1,"translate"),l["\u0275\u0275text"](2,"\n                      "),l["\u0275\u0275element"](3,"i",31),l["\u0275\u0275text"](4,"\n                    "),l["\u0275\u0275elementEnd"]()),2&e&&l["\u0275\u0275property"]("disabled",!0)("ngbTooltip",l["\u0275\u0275pipeBind1"](1,2,"admin.access-control.epeople.table.edit.buttons.edit-disabled"))}function yt(e,t){if(1&e){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"button",33),l["\u0275\u0275listener"]("click",(function(){l["\u0275\u0275restoreView"](n);var e=l["\u0275\u0275nextContext"]().$implicit;return l["\u0275\u0275nextContext"](2).deleteGroup(e)})),l["\u0275\u0275pipe"](1,"translate"),l["\u0275\u0275text"](2,"\n                    "),l["\u0275\u0275element"](3,"i",34),l["\u0275\u0275text"](4,"\n                  "),l["\u0275\u0275elementEnd"]()}if(2&e){var r=l["\u0275\u0275nextContext"]().$implicit,i=l["\u0275\u0275nextContext"](2);l["\u0275\u0275propertyInterpolate"]("title",l["\u0275\u0275pipeBind2"](1,1,i.messagePrefix+"table.edit.buttons.remove",l["\u0275\u0275pureFunction1"](4,ht,r.group.name)))}}function Et(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"tr"),l["\u0275\u0275text"](1,"\n              "),l["\u0275\u0275elementStart"](2,"td"),l["\u0275\u0275text"](3),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](4,"\n              "),l["\u0275\u0275elementStart"](5,"td"),l["\u0275\u0275text"](6),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](7,"\n              "),l["\u0275\u0275elementStart"](8,"td"),l["\u0275\u0275text"](9),l["\u0275\u0275pipe"](10,"async"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](11,"\n              "),l["\u0275\u0275elementStart"](12,"td"),l["\u0275\u0275text"](13),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](14,"\n              "),l["\u0275\u0275elementStart"](15,"td"),l["\u0275\u0275text"](16,"\n                "),l["\u0275\u0275elementStart"](17,"div",25),l["\u0275\u0275text"](18,"\n                  "),l["\u0275\u0275elementContainerStart"](19,26),l["\u0275\u0275text"](20,"\n                    "),l["\u0275\u0275template"](21,xt,5,7,"button",27),l["\u0275\u0275text"](22,"\n                    "),l["\u0275\u0275template"](23,St,5,4,"button",28),l["\u0275\u0275text"](24,"\n                  "),l["\u0275\u0275elementContainerEnd"](),l["\u0275\u0275text"](25,"\n                  "),l["\u0275\u0275template"](26,yt,5,6,"button",29),l["\u0275\u0275text"](27,"\n                "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](28,"\n              "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](29,"\n            "),l["\u0275\u0275elementEnd"]()),2&e){var n,r=t.$implicit;l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate"](r.group.id),l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate"](r.group.name),l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate"](null==(n=l["\u0275\u0275pipeBind1"](10,8,r.group.object))||null==n.payload?null:n.payload.name),l["\u0275\u0275advance"](4),l["\u0275\u0275textInterpolate"]((null==r.epersons?null:r.epersons.totalElements)+(null==r.subgroups?null:r.subgroups.totalElements)),l["\u0275\u0275advance"](6),l["\u0275\u0275property"]("ngSwitch",r.ableToEdit),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("ngSwitchCase",!0),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("ngSwitchCase",!1),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("ngIf",!(null!=r.group&&r.group.permanent)&&r.ableToDelete)}}function It(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"ds-pagination",20),l["\u0275\u0275pipe"](1,"async"),l["\u0275\u0275text"](2,"\n\n        "),l["\u0275\u0275elementStart"](3,"div",21),l["\u0275\u0275text"](4,"\n          "),l["\u0275\u0275elementStart"](5,"table",22),l["\u0275\u0275text"](6,"\n            "),l["\u0275\u0275elementStart"](7,"thead"),l["\u0275\u0275text"](8,"\n            "),l["\u0275\u0275elementStart"](9,"tr"),l["\u0275\u0275text"](10,"\n              "),l["\u0275\u0275elementStart"](11,"th",23),l["\u0275\u0275text"](12),l["\u0275\u0275pipe"](13,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](14,"\n              "),l["\u0275\u0275elementStart"](15,"th",23),l["\u0275\u0275text"](16),l["\u0275\u0275pipe"](17,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](18,"\n              "),l["\u0275\u0275elementStart"](19,"th",23),l["\u0275\u0275text"](20),l["\u0275\u0275pipe"](21,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](22,"\n              "),l["\u0275\u0275elementStart"](23,"th",23),l["\u0275\u0275text"](24),l["\u0275\u0275pipe"](25,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](26,"\n              "),l["\u0275\u0275elementStart"](27,"th"),l["\u0275\u0275text"](28),l["\u0275\u0275pipe"](29,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](30,"\n            "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](31,"\n            "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](32,"\n            "),l["\u0275\u0275elementStart"](33,"tbody"),l["\u0275\u0275text"](34,"\n            "),l["\u0275\u0275template"](35,Et,30,10,"tr",24),l["\u0275\u0275pipe"](36,"async"),l["\u0275\u0275text"](37,"\n            "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](38,"\n          "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](39,"\n        "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](40,"\n      "),l["\u0275\u0275elementEnd"]()),2&e){var n,r,i=l["\u0275\u0275nextContext"]();l["\u0275\u0275property"]("paginationOptions",i.config)("pageInfoState",i.pageInfoState$)("collectionSize",null==(n=l["\u0275\u0275pipeBind1"](1,11,i.pageInfoState$))?null:n.totalElements)("hideGear",!0)("hidePagerWhenSinglePage",!0),l["\u0275\u0275advance"](12),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](13,13,i.messagePrefix+"table.id")),l["\u0275\u0275advance"](4),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](17,15,i.messagePrefix+"table.name")),l["\u0275\u0275advance"](4),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](21,17,i.messagePrefix+"table.collectionOrCommunity")),l["\u0275\u0275advance"](4),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](25,19,i.messagePrefix+"table.members")),l["\u0275\u0275advance"](4),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](29,21,i.messagePrefix+"table.edit")),l["\u0275\u0275advance"](7),l["\u0275\u0275property"]("ngForOf",null==(r=l["\u0275\u0275pipeBind1"](36,23,i.groupsDto$))?null:r.page)}}function Pt(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"div",35),l["\u0275\u0275text"](1),l["\u0275\u0275pipe"](2,"translate"),l["\u0275\u0275elementEnd"]()),2&e){var n=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate1"]("\n        ",l["\u0275\u0275pipeBind1"](2,1,n.messagePrefix+"no-items"),"\n      ")}}var Ot,jt,kt,wt,Bt=function(){return["newGroup"]},Ct=((Ot=function(){function e(t,n,r,i,a,o,c,s,l,u,d){p(this,e),this.groupService=t,this.ePersonDataService=n,this.dSpaceObjectDataService=r,this.translateService=i,this.notificationsService=a,this.formBuilder=o,this.routeService=c,this.router=s,this.authorizationService=l,this.paginationService=u,this.requestService=d,this.messagePrefix="admin.access-control.groups.",this.config=Object.assign(new y.a,{id:"gl",pageSize:5,currentPage:1}),this.groupsDto$=new f.a({}),this.deletedGroupsIds=[],this.pageInfoState$=new f.a(void 0),this.loading$=new f.a(!1),this.subs=[],this.currentSearchQuery="",this.searchForm=this.formBuilder.group({query:this.currentSearchQuery})}return d(e,[{key:"ngOnInit",value:function(){this.search({query:this.currentSearchQuery})}},{key:"search",value:function(e){var t=this;Object(S.b)(this.searchSub)&&(this.searchSub.unsubscribe(),this.subs=this.subs.filter((function(e){return e!==t.searchSub}))),this.searchSub=this.paginationService.getCurrentPagination(this.config.id,this.config).pipe(Object(ft.a)((function(){return t.loading$.next(!0)})),Object(b.a)((function(n){var r=e.query;return null!=r&&t.currentSearchQuery!==r&&(t.currentSearchQuery=r,t.paginationService.updateRouteWithUrl(t.config.id,[],{page:1})),t.groupService.searchGroups(t.currentSearchQuery.trim(),{currentPage:n.currentPage,elementsPerPage:n.pageSize},!0,!0,Object($.a)("object"))})),Object(P.c)(),Object(P.o)(),Object(b.a)((function(e){return 0===e.page.length?Object(N.a)(Object(x.b)(e.pageInfo,[])):t.authorizationService.isAuthorized(I.a.AdministratorOf).pipe(Object(b.a)((function(n){return Object(g.a)(e.page.map((function(e){if(Object(S.b)(e)&&!t.deletedGroupsIds.includes(e.id))return Object(g.a)([t.authorizationService.isAuthorized(I.a.CanDelete,e.self),t.canManageGroup$(n,e),t.hasLinkedDSO(e),t.getSubgroups(e),t.getMembers(e)]).pipe(Object(v.a)((function(t){var n=c(t,5),r=n[0],i=n[1],a=n[2],o=n[3],s=n[4],l=new gt;return l.ableToDelete=r&&!a,l.ableToEdit=i,l.group=e,l.subgroups=o.payload,l.epersons=s.payload,l})))}))).pipe(Object(v.a)((function(t){return Object(x.b)(e.pageInfo,t)})))})))}))).subscribe((function(e){t.groupsDto$.next(e),t.pageInfoState$.next(e.pageInfo),t.loading$.next(!1)})),this.subs.push(this.searchSub)}},{key:"canManageGroup$",value:function(e,t){return e?Object(N.a)(!0):this.authorizationService.isAuthorized(I.a.CanManageGroup,t.self)}},{key:"deleteGroup",value:function(e){var t=this;Object(S.b)(e.group.id)&&this.groupService.delete(e.group.id).pipe(Object(P.g)()).subscribe((function(n){n.hasSucceeded?(t.deletedGroupsIds=[].concat(o(t.deletedGroupsIds),[e.group.id]),t.notificationsService.success(t.translateService.get(t.messagePrefix+"notification.deleted.success",{name:e.group.name})),t.reset()):t.notificationsService.error(t.translateService.get(t.messagePrefix+"notification.deleted.failure.title",{name:e.group.name}),t.translateService.get(t.messagePrefix+"notification.deleted.failure.content",{cause:n.errorMessage}))}))}},{key:"reset",value:function(){var e=this;this.groupService.getBrowseEndpoint().pipe(Object(h.a)(1)).subscribe((function(t){e.requestService.setStaleByHrefSubstring(t)}))}},{key:"getMembers",value:function(e){return this.ePersonDataService.findAllByHref(e._links.epersons.href).pipe(Object(P.i)())}},{key:"getSubgroups",value:function(e){return this.groupService.findAllByHref(e._links.subgroups.href).pipe(Object(P.i)())}},{key:"hasLinkedDSO",value:function(e){return this.dSpaceObjectDataService.findByHref(e._links.object.href).pipe(Object(P.i)(),Object(v.a)((function(e){return Object(S.b)(e)&&Object(S.b)(e.payload)})),Object(Se.a)((function(){return Object(N.a)(!1)})))}},{key:"clearFormAndResetResult",value:function(){this.searchForm.patchValue({query:""}),this.search({query:""})}},{key:"ngOnDestroy",value:function(){this.cleanupSubscribes(),this.paginationService.clearPagination(this.config.id)}},{key:"cleanupSubscribes",value:function(){Object(S.b)(this.paginationSub)&&this.paginationSub.unsubscribe(),this.subs.filter((function(e){return Object(S.b)(e)})).forEach((function(e){return e.unsubscribe()})),this.paginationService.clearPagination(this.config.id)}}]),e}()).\u0275fac=function(e){return new(e||Ot)(l["\u0275\u0275directiveInject"](R.a),l["\u0275\u0275directiveInject"](k.a),l["\u0275\u0275directiveInject"](ke.a),l["\u0275\u0275directiveInject"](w.e),l["\u0275\u0275directiveInject"](B.a),l["\u0275\u0275directiveInject"](G.FormBuilder),l["\u0275\u0275directiveInject"](bt.a),l["\u0275\u0275directiveInject"](u.h),l["\u0275\u0275directiveInject"](C.a),l["\u0275\u0275directiveInject"](F.a),l["\u0275\u0275directiveInject"](A.a))},Ot.\u0275cmp=l["\u0275\u0275defineComponent"]({type:Ot,selectors:[["ds-groups-registry"]],decls:71,vars:35,consts:[[1,"container"],[1,"groups-registry","row"],[1,"col-12"],[1,"d-flex","justify-content-between","border-bottom","mb-3"],["id","header",1,"pb-2"],[1,"mr-auto","btn","btn-success",3,"routerLink"],[1,"fas","fa-plus"],[1,"d-none","d-sm-inline"],["id","search",1,"border-bottom","pb-2"],[1,"d-flex","justify-content-between",3,"formGroup","ngSubmit"],[1,"flex-grow-1","mr-3"],[1,"form-group","input-group"],["type","text","name","query","id","query","formControlName","query",1,"form-control",3,"placeholder"],[1,"input-group-append"],["type","submit",1,"search-button","btn","btn-primary"],[1,"fas","fa-search"],[1,"btn","btn-secondary",3,"click"],[4,"ngIf"],[3,"paginationOptions","pageInfoState","collectionSize","hideGear","hidePagerWhenSinglePage",4,"ngIf"],["class","alert alert-info w-100 mb-2","role","alert",4,"ngIf"],[3,"paginationOptions","pageInfoState","collectionSize","hideGear","hidePagerWhenSinglePage"],[1,"table-responsive"],["id","groups",1,"table","table-striped","table-hover","table-bordered"],["scope","col"],[4,"ngFor","ngForOf"],[1,"btn-group","edit-field"],[3,"ngSwitch"],["class","btn btn-outline-primary btn-sm btn-edit",3,"routerLink","title",4,"ngSwitchCase"],["class","btn btn-outline-primary btn-sm btn-edit","placement","left",3,"disabled","ngbTooltip",4,"ngSwitchCase"],["class","btn btn-outline-danger btn-sm",3,"title","click",4,"ngIf"],[1,"btn","btn-outline-primary","btn-sm","btn-edit",3,"routerLink","title"],[1,"fas","fa-edit","fa-fw"],["placement","left",1,"btn","btn-outline-primary","btn-sm","btn-edit",3,"disabled","ngbTooltip"],[1,"btn","btn-outline-danger","btn-sm",3,"title","click"],[1,"fas","fa-trash-alt","fa-fw"],["role","alert",1,"alert","alert-info","w-100","mb-2"]],template:function(e,t){var n,r;(1&e&&(l["\u0275\u0275elementStart"](0,"div",0),l["\u0275\u0275text"](1,"\n  "),l["\u0275\u0275elementStart"](2,"div",1),l["\u0275\u0275text"](3,"\n    "),l["\u0275\u0275elementStart"](4,"div",2),l["\u0275\u0275text"](5,"\n      "),l["\u0275\u0275elementStart"](6,"div",3),l["\u0275\u0275text"](7,"\n        "),l["\u0275\u0275elementStart"](8,"h2",4),l["\u0275\u0275text"](9),l["\u0275\u0275pipe"](10,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](11,"\n        "),l["\u0275\u0275elementStart"](12,"div"),l["\u0275\u0275text"](13,"\n          "),l["\u0275\u0275elementStart"](14,"button",5),l["\u0275\u0275text"](15,"\n            "),l["\u0275\u0275element"](16,"i",6),l["\u0275\u0275text"](17,"\n            "),l["\u0275\u0275elementStart"](18,"span",7),l["\u0275\u0275text"](19),l["\u0275\u0275pipe"](20,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](21,"\n          "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](22,"\n        "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](23,"\n      "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](24,"\n\n      "),l["\u0275\u0275elementStart"](25,"h3",8),l["\u0275\u0275text"](26),l["\u0275\u0275pipe"](27,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](28,"\n      "),l["\u0275\u0275elementStart"](29,"form",9),l["\u0275\u0275listener"]("ngSubmit",(function(){return t.search(t.searchForm.value)})),l["\u0275\u0275text"](30,"\n        "),l["\u0275\u0275elementStart"](31,"div",10),l["\u0275\u0275text"](32,"\n          "),l["\u0275\u0275elementStart"](33,"div",11),l["\u0275\u0275text"](34,"\n            "),l["\u0275\u0275element"](35,"input",12),l["\u0275\u0275pipe"](36,"translate"),l["\u0275\u0275pipe"](37,"translate"),l["\u0275\u0275text"](38,"\n            "),l["\u0275\u0275elementStart"](39,"span",13),l["\u0275\u0275text"](40,"\n              "),l["\u0275\u0275elementStart"](41,"button",14),l["\u0275\u0275text"](42,"\n                "),l["\u0275\u0275element"](43,"i",15),l["\u0275\u0275text"](44),l["\u0275\u0275pipe"](45,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](46,"\n            "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](47,"\n          "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](48,"\n        "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](49,"\n        "),l["\u0275\u0275elementStart"](50,"div"),l["\u0275\u0275text"](51,"\n          "),l["\u0275\u0275elementStart"](52,"button",16),l["\u0275\u0275listener"]("click",(function(){return t.clearFormAndResetResult()})),l["\u0275\u0275text"](53),l["\u0275\u0275pipe"](54,"translate"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](55,"\n        "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](56,"\n      "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](57,"\n\n      "),l["\u0275\u0275template"](58,vt,1,0,"ds-loading",17),l["\u0275\u0275pipe"](59,"async"),l["\u0275\u0275text"](60,"\n      "),l["\u0275\u0275template"](61,It,41,25,"ds-pagination",18),l["\u0275\u0275pipe"](62,"async"),l["\u0275\u0275pipe"](63,"async"),l["\u0275\u0275text"](64,"\n\n      "),l["\u0275\u0275template"](65,Pt,3,3,"div",19),l["\u0275\u0275pipe"](66,"async"),l["\u0275\u0275text"](67,"\n\n    "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](68,"\n  "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](69,"\n"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](70,"\n")),2&e)&&(l["\u0275\u0275advance"](9),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](10,12,t.messagePrefix+"head")),l["\u0275\u0275advance"](5),l["\u0275\u0275property"]("routerLink",l["\u0275\u0275pureFunction0"](34,Bt)),l["\u0275\u0275advance"](5),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](20,14,t.messagePrefix+"button.add")),l["\u0275\u0275advance"](7),l["\u0275\u0275textInterpolate"](l["\u0275\u0275pipeBind1"](27,16,t.messagePrefix+"search.head")),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("formGroup",t.searchForm),l["\u0275\u0275advance"](6),l["\u0275\u0275property"]("placeholder",l["\u0275\u0275pipeBind1"](37,20,t.messagePrefix+"search.placeholder")),l["\u0275\u0275attribute"]("aria-label",l["\u0275\u0275pipeBind1"](36,18,t.messagePrefix+"search.placeholder")),l["\u0275\u0275advance"](9),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](45,22,t.messagePrefix+"search.button"),"\n              "),l["\u0275\u0275advance"](9),l["\u0275\u0275textInterpolate1"]("\n            ",l["\u0275\u0275pipeBind1"](54,24,t.messagePrefix+"button.see-all"),"\n          "),l["\u0275\u0275advance"](5),l["\u0275\u0275property"]("ngIf",l["\u0275\u0275pipeBind1"](59,26,t.loading$)),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("ngIf",(null==(n=l["\u0275\u0275pipeBind1"](62,28,t.pageInfoState$))?null:n.totalElements)>0&&!l["\u0275\u0275pipeBind1"](63,30,t.loading$)),l["\u0275\u0275advance"](4),l["\u0275\u0275property"]("ngIf",0==(null==(r=l["\u0275\u0275pipeBind1"](66,32,t.pageInfoState$))?null:r.totalElements)))},directives:[u.i,G["\u0275angular_packages_forms_forms_ba"],G.NgControlStatusGroup,G.FormGroupDirective,G.DefaultValueAccessor,G.NgControlStatus,G.FormControlName,s.p,Q.a,W.a,s.o,s.r,s.s,D.O],pipes:[w.d,s.b],encapsulation:2}),Ot),Gt=i("mOAm"),Dt=i("A0IO"),Ft=i("a8lL"),At=i("uLZQ"),Lt=((jt=function(t){e(i,t);var r=n(i);function i(e,t,n,a){var o;return p(this,i),(o=r.call(this,t,n,a)).halEndpointService=e,o.authorizationService=t,o.router=n,o.authService=a,o.groupsEndpoint="groups",o}return d(i,[{key:"getFeatureIDs",value:function(e,t){return Object(N.a)([I.a.CanManageGroup])}},{key:"getObjectUrl",value:function(e,t){return this.halEndpointService.getEndpoint(this.groupsEndpoint).pipe(Object(v.a)((function(t){var n;return"".concat(t,"/").concat(null===(n=null==e?void 0:e.params)||void 0===n?void 0:n.groupId)})))}}]),i}(Ft.a)).\u0275fac=function(e){return new(e||jt)(l["\u0275\u0275inject"](At.a),l["\u0275\u0275inject"](C.a),l["\u0275\u0275inject"](u.h),l["\u0275\u0275inject"](z.a))},jt.\u0275prov=l["\u0275\u0275defineInjectable"]({token:jt,factory:jt.\u0275fac,providedIn:"root"}),jt),Nt=i("hcYp"),qt=i("Vm9x"),Vt=((kt=function e(){p(this,e)}).\u0275fac=function(e){return new(e||kt)},kt.\u0275mod=l["\u0275\u0275defineNgModule"]({type:kt}),kt.\u0275inj=l["\u0275\u0275defineInjector"]({imports:[[u.l.forChild([{path:"epeople",component:he,resolve:{breadcrumb:Dt.a},data:{title:"admin.access-control.epeople.title",breadcrumbKey:"admin.access-control.epeople"},canActivate:[qt.a]},{path:Gt.a,component:Ct,resolve:{breadcrumb:Dt.a},data:{title:"admin.access-control.groups.title",breadcrumbKey:"admin.access-control.groups"},canActivate:[Nt.a]},{path:"".concat(Gt.a,"/newGroup"),component:mt,resolve:{breadcrumb:Dt.a},data:{title:"admin.access-control.groups.title.addGroup",breadcrumbKey:"admin.access-control.groups.addGroup"},canActivate:[Nt.a]},{path:"".concat(Gt.a,"/:groupId"),component:mt,resolve:{breadcrumb:Dt.a},data:{title:"admin.access-control.groups.title.singleGroup",breadcrumbKey:"admin.access-control.groups.singleGroup"},canActivate:[Lt]}])]]}),kt),$t=i("kcqd"),Rt=((wt=function e(){p(this,e)}).\u0275fac=function(e){return new(e||wt)},wt.\u0275mod=l["\u0275\u0275defineNgModule"]({type:wt}),wt.\u0275inj=l["\u0275\u0275defineInjector"]({imports:[[s.c,m.a,u.l,Vt,$t.a]]}),wt)},kcqd:function(t,r,i){"use strict";i.d(r,"a",(function(){return I}));var a=i("fXoL"),o=i("ofXK"),c=i("hqmO"),s=i("e+Av"),l=i("NvTF");function u(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"ds-dynamic-form-control-container",1),a["\u0275\u0275listener"]("dfBlur",(function(e){a["\u0275\u0275restoreView"](n);var t=a["\u0275\u0275nextContext"]();return t.onCustomEvent(e,t.blur)}))("dfChange",(function(e){a["\u0275\u0275restoreView"](n);var t=a["\u0275\u0275nextContext"]();return t.onCustomEvent(e,t.change)}))("dfFocus",(function(e){a["\u0275\u0275restoreView"](n);var t=a["\u0275\u0275nextContext"]();return t.onCustomEvent(e,t.focus)}))("ngbEvent",(function(e){a["\u0275\u0275restoreView"](n);var t=a["\u0275\u0275nextContext"]();return t.onCustomEvent(e,t.ngbEvent)})),a["\u0275\u0275elementEnd"]()}if(2&e){var r=t.$implicit,i=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("formId",i.formId)("group",i.formGroup)("hasErrorMessaging",r.hasErrorMessages)("hidden",r.hidden)("layout",i.formLayout)("model",r)("templates",i.templates)("asBootstrapFormGroup",!0)}}var d,m=((d=function(t){e(i,t);var r=n(i);function i(e,t){var n;return p(this,i),(n=r.call(this,e,t)).blur=new a.EventEmitter,n.change=new a.EventEmitter,n.focus=new a.EventEmitter,n.ngbEvent=new a.EventEmitter,n}return i}(s.x)).\u0275fac=function(e){return new(e||d)(a["\u0275\u0275directiveInject"](a.ChangeDetectorRef),a["\u0275\u0275directiveInject"](s.y))},d.\u0275cmp=a["\u0275\u0275defineComponent"]({type:d,selectors:[["ds-dynamic-form"]],contentQueries:function(e,t,n){var r;1&e&&a["\u0275\u0275contentQuery"](n,s.O,0),2&e&&a["\u0275\u0275queryRefresh"](r=a["\u0275\u0275loadQuery"]())&&(t.templates=r)},viewQuery:function(e,t){var n;1&e&&a["\u0275\u0275viewQuery"](l.a,1),2&e&&a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.components=n)},inputs:{formId:"formId",formGroup:"formGroup",formModel:"formModel",formLayout:"formLayout"},outputs:{blur:"dfBlur",change:"dfChange",focus:"dfFocus",ngbEvent:"ngbEvent"},features:[a["\u0275\u0275InheritDefinitionFeature"]],decls:2,vars:2,consts:[[3,"formId","group","hasErrorMessaging","hidden","layout","model","templates","asBootstrapFormGroup","dfBlur","dfChange","dfFocus","ngbEvent",4,"ngFor","ngForOf","ngForTrackBy"],[3,"formId","group","hasErrorMessaging","hidden","layout","model","templates","asBootstrapFormGroup","dfBlur","dfChange","dfFocus","ngbEvent"]],template:function(e,t){1&e&&(a["\u0275\u0275template"](0,u,1,8,"ds-dynamic-form-control-container",0),a["\u0275\u0275text"](1,"\n")),2&e&&a["\u0275\u0275property"]("ngForOf",t.formModel)("ngForTrackBy",t.trackByFn)},directives:[o.o,l.a],encapsulation:2}),d);i("ZO65"),i("0pnk"),i("sw+l"),i("1Pbu"),i("bPV6"),i("Gu/b"),i("A/iK"),i("KKO+"),i("Ysrn");var f,g=i("tqJZ"),b=i("ZTun"),v=(i("uyTL"),i("Ui2r"),i("8HnP"),i("zVKZ"),i("PCNd")),h=i("sYmb"),x=i("kMeL"),S=(i("yXJd"),i("/Vzl"),i("zGzN"),i("xjoE"),i("n7Wa")),y=i("3Pt+"),E=i("5+WD"),I=((f=function e(){p(this,e)}).\u0275fac=function(e){return new(e||f)},f.\u0275mod=a["\u0275\u0275defineNgModule"]({type:f}),f.\u0275inj=a["\u0275\u0275defineInjector"]({providers:[{provide:s.c,useValue:l.b}],imports:[[o.c,s.I,S.a,x.a,v.a,h.c]]}),f);a["\u0275\u0275setComponentScope"](g.a,[y.NgControlStatusGroup,y.FormGroupDirective,y.FormGroupName,o.m,o.o,l.a],[]),a["\u0275\u0275setComponentScope"](b.a,[y.NgControlStatusGroup,y.FormGroupDirective,y.FormArrayName,o.m,E.c,o.o,E.a,E.b,y.FormGroupName,o.t,l.a],[]),a["\u0275\u0275setComponentScope"](c.a,[y["\u0275angular_packages_forms_forms_ba"],y.NgControlStatusGroup,y.FormGroupDirective,m,s.O,o.p],[h.d,o.b])},mOAm:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o}));var r=n("zZO8"),i=n("TVZh"),a="groups";function o(e){return new r.a(Object(i.m)(),a,e).toString()}},tv3Y:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("zr/d"),i=n("LRne"),a=n("fXoL"),o=function(){var e=function(){function e(){p(this,e)}return d(e,[{key:"getBreadcrumbs",value:function(e,t){return Object(i.a)([new r.a(e+".breadcrumbs",t)])}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=a["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},"zr/d":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function e(t,n){p(this,e),this.text=t,this.url=n}}}])}();
//# sourceMappingURL=11-es5.3426c8e8adf5876328bd.js.map