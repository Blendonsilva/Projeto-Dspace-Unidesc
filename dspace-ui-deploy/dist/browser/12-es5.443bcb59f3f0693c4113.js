!function(){function e(t,i){return(e=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(t,i)}function t(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=n(e);if(t){var o=n(this).constructor;r=Reflect.construct(a,arguments,o)}else r=a.apply(this,arguments);return i(this,r)}}function i(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function n(e){return(n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function r(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||o(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==i)return;var n,r,a=[],o=!0,s=!1;try{for(i=i.call(e);!(o=(n=i.next()).done)&&(a.push(n.value),!t||a.length!==t);o=!0);}catch(l){s=!0,r=l}finally{try{o||null==i.return||i.return()}finally{if(s)throw r}}return a}(e,t)||o(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){if(e){if("string"==typeof e)return s(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t,i){return t&&c(e.prototype,t),i&&c(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[12,14],{cuVu:function(e,t,i){"use strict";i.r(t),i.d(t,"BitstreamPageModule",(function(){return pe}));var n=i("fXoL"),o=i("ofXK"),s=i("PCNd"),c=i("lJxs"),d=i("eIep"),m=i("5+tZ"),f=i("itXk"),p=i("LRne"),h=i("e+Av"),b=i("JN36"),v=i("LvDl"),y=i("1QIV"),g=i("87+M"),I=i("J3qs"),F=i("/eM4"),E=i("Xioo"),w=i("JGHn"),M=i("c/qf"),C=i("tyNb"),T=i("sYmb"),O=i("PCBh"),A=i("C765"),j=i("lI3o"),x=i("B7d6"),S=i("O/5o"),L=i("/lGE"),_=i("hqmO"),k=i("3Pt+"),B=i("HZwm"),D=i("Frqi"),N=i("t8/W"),G=function(e){return["/bitstreams",e,"authorizations"]};function V(e,t){if(1&e){var i=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"ds-form",12),n["\u0275\u0275listener"]("submitForm",(function(){return n["\u0275\u0275restoreView"](i),n["\u0275\u0275nextContext"](4).onSubmit()}))("cancel",(function(){return n["\u0275\u0275restoreView"](i),n["\u0275\u0275nextContext"](4).onCancel()}))("dfChange",(function(e){return n["\u0275\u0275restoreView"](i),n["\u0275\u0275nextContext"](4).onChange(e)})),n["\u0275\u0275text"](1,"\n          "),n["\u0275\u0275elementStart"](2,"div",13),n["\u0275\u0275text"](3,"\n            "),n["\u0275\u0275elementStart"](4,"a",14),n["\u0275\u0275text"](5),n["\u0275\u0275pipe"](6,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275text"](7,"\n          "),n["\u0275\u0275elementEnd"](),n["\u0275\u0275text"](8,"\n        "),n["\u0275\u0275elementEnd"]()}if(2&e){var r=n["\u0275\u0275nextContext"](3).ngVar,a=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("formId","edit-bitstream-form-id")("formGroup",a.formGroup)("formModel",a.formModel)("formLayout",a.formLayout)("submitLabel","form.save"),n["\u0275\u0275advance"](4),n["\u0275\u0275property"]("routerLink",n["\u0275\u0275pureFunction1"](9,G,null==r||null==r.payload?null:r.payload.id)),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate"](n["\u0275\u0275pipeBind1"](6,7,"bitstream.edit.authorizations.link"))}}function P(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",5),n["\u0275\u0275text"](1,"\n      "),n["\u0275\u0275elementStart"](2,"div",6),n["\u0275\u0275text"](3,"\n        "),n["\u0275\u0275element"](4,"ds-thumbnail",7),n["\u0275\u0275text"](5,"\n      "),n["\u0275\u0275elementEnd"](),n["\u0275\u0275text"](6,"\n      "),n["\u0275\u0275elementStart"](7,"div",8),n["\u0275\u0275text"](8,"\n        "),n["\u0275\u0275elementStart"](9,"div",2),n["\u0275\u0275text"](10,"\n          "),n["\u0275\u0275elementStart"](11,"div",5),n["\u0275\u0275text"](12,"\n            "),n["\u0275\u0275elementStart"](13,"div",9),n["\u0275\u0275text"](14,"\n              "),n["\u0275\u0275elementStart"](15,"h3"),n["\u0275\u0275text"](16),n["\u0275\u0275elementStart"](17,"span",10),n["\u0275\u0275text"](18),n["\u0275\u0275pipe"](19,"dsFileSize"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275text"](20,"\n            "),n["\u0275\u0275elementEnd"](),n["\u0275\u0275text"](21,"\n          "),n["\u0275\u0275elementEnd"](),n["\u0275\u0275text"](22,"\n        "),n["\u0275\u0275elementEnd"](),n["\u0275\u0275text"](23,"\n        "),n["\u0275\u0275template"](24,V,9,11,"ds-form",11),n["\u0275\u0275text"](25,"\n      "),n["\u0275\u0275elementEnd"](),n["\u0275\u0275text"](26,"\n    "),n["\u0275\u0275elementEnd"]()),2&e){var i=n["\u0275\u0275nextContext"](2).ngVar,r=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](4),n["\u0275\u0275property"]("thumbnail",null==i?null:i.payload),n["\u0275\u0275advance"](12),n["\u0275\u0275textInterpolate1"]("",null==i||null==i.payload?null:i.payload.name," "),n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"]("(",n["\u0275\u0275pipeBind1"](19,4,null==i||null==i.payload?null:i.payload.sizeBytes),")"),n["\u0275\u0275advance"](6),n["\u0275\u0275property"]("ngIf",r.formGroup)}}function H(e,t){1&e&&(n["\u0275\u0275element"](0,"ds-error",15),n["\u0275\u0275pipe"](1,"translate")),2&e&&n["\u0275\u0275propertyInterpolate"]("message",n["\u0275\u0275pipeBind1"](1,1,"error.bitstream"))}function R(e,t){1&e&&(n["\u0275\u0275element"](0,"ds-loading",15),n["\u0275\u0275pipe"](1,"translate")),2&e&&n["\u0275\u0275propertyInterpolate"]("message",n["\u0275\u0275pipeBind1"](1,1,"loading.bitstream"))}function W(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",2),n["\u0275\u0275text"](1,"\n    "),n["\u0275\u0275template"](2,P,27,6,"div",3),n["\u0275\u0275text"](3,"\n    "),n["\u0275\u0275template"](4,H,2,3,"ds-error",4),n["\u0275\u0275text"](5,"\n    "),n["\u0275\u0275template"](6,R,2,3,"ds-loading",4),n["\u0275\u0275text"](7,"\n  "),n["\u0275\u0275elementEnd"]()),2&e){var i=t.ngVar,r=n["\u0275\u0275nextContext"]().ngVar;n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",(null==r?null:r.hasSucceeded)&&(null==i?null:i.hasSucceeded)),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",null==r?null:r.hasFailed),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",!r||!i||(null==r?null:r.isLoading)||(null==i?null:i.isLoading))}}function q(e,t){if(1&e&&(n["\u0275\u0275elementContainerStart"](0),n["\u0275\u0275text"](1,"\n  "),n["\u0275\u0275template"](2,W,8,3,"div",1),n["\u0275\u0275pipe"](3,"async"),n["\u0275\u0275text"](4,"\n"),n["\u0275\u0275elementContainerEnd"]()),2&e){var i=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngVar",n["\u0275\u0275pipeBind1"](3,1,i.bitstreamFormatsRD$))}}var X,U,K,z,Y,$,Z=((X=function(){function e(t,i,n,r,a,o,s,c,u,d){l(this,e),this.route=t,this.router=i,this.changeDetectorRef=n,this.location=r,this.formService=a,this.translate=o,this.bitstreamService=s,this.dsoNameService=c,this.notificationsService=u,this.bitstreamFormatService=d,this.KEY_PREFIX="bitstream.edit.form.",this.LABEL_KEY_SUFFIX=".label",this.HINT_KEY_SUFFIX=".hint",this.NOTIFICATIONS_PREFIX="bitstream.edit.notifications.",this.IMAGE_WIDTH_METADATA="iiif.image.width",this.IMAGE_HEIGHT_METADATA="iiif.image.height",this.IIIF_TOC_METADATA="iiif.toc",this.IIIF_LABEL_METADATA="iiif.label",this.findAllOptions={elementsPerPage:9999},this.fileNameModel=new w.a({hasSelectableMetadata:!1,metadataFields:[],repeatable:!1,submissionId:"",id:"fileName",name:"fileName",required:!0,validators:{required:null},errorMessages:{required:"You must provide a file name for the bitstream"}}),this.primaryBitstreamModel=new b.b({id:"primaryBitstream",name:"primaryBitstream"}),this.descriptionModel=new M.a({hasSelectableMetadata:!1,metadataFields:[],repeatable:!1,submissionId:"",id:"description",name:"description",rows:10}),this.selectedFormatModel=new h.N({id:"selectedFormat",name:"selectedFormat"}),this.newFormatModel=new h.J({id:"newFormat",name:"newFormat"}),this.iiifLabelModel=new w.a({hasSelectableMetadata:!1,metadataFields:[],repeatable:!1,submissionId:"",id:"iiifLabel",name:"iiifLabel"},{grid:{host:"col col-lg-6 d-inline-block"}}),this.iiifLabelContainer=new h.D({id:"iiifLabelContainer",group:[this.iiifLabelModel]},{grid:{host:"form-row"}}),this.iiifTocModel=new w.a({hasSelectableMetadata:!1,metadataFields:[],repeatable:!1,submissionId:"",id:"iiifToc",name:"iiifToc"},{grid:{host:"col col-lg-6 d-inline-block"}}),this.iiifTocContainer=new h.D({id:"iiifTocContainer",group:[this.iiifTocModel]},{grid:{host:"form-row"}}),this.iiifWidthModel=new w.a({hasSelectableMetadata:!1,metadataFields:[],repeatable:!1,submissionId:"",id:"iiifWidth",name:"iiifWidth"},{grid:{host:"col col-lg-6 d-inline-block"}}),this.iiifWidthContainer=new h.D({id:"iiifWidthContainer",group:[this.iiifWidthModel]},{grid:{host:"form-row"}}),this.iiifHeightModel=new w.a({hasSelectableMetadata:!1,metadataFields:[],repeatable:!1,submissionId:"",id:"iiifHeight",name:"iiifHeight"},{grid:{host:"col col-lg-6 d-inline-block"}}),this.iiifHeightContainer=new h.D({id:"iiifHeightContainer",group:[this.iiifHeightModel]},{grid:{host:"form-row"}}),this.inputModels=[this.fileNameModel,this.primaryBitstreamModel,this.descriptionModel,this.selectedFormatModel,this.newFormatModel],this.formModel=[new h.D({id:"fileNamePrimaryContainer",group:[this.fileNameModel,this.primaryBitstreamModel]},{grid:{host:"form-row"}}),new h.D({id:"descriptionContainer",group:[this.descriptionModel]}),new h.D({id:"formatContainer",group:[this.selectedFormatModel,this.newFormatModel]})],this.newFormatBaseLayout="col col-sm-6 d-inline-block",this.formLayout={fileName:{grid:{host:"col col-sm-8 d-inline-block"}},primaryBitstream:{grid:{host:"col col-sm-4 d-inline-block switch"}},description:{grid:{host:"col-12 d-inline-block"}},embargo:{grid:{host:"col-12 d-inline-block"}},selectedFormat:{grid:{host:"col col-sm-6 d-inline-block"}},newFormat:{grid:{host:this.newFormatBaseLayout+" invisible"}},fileNamePrimaryContainer:{grid:{host:"row position-relative"}},descriptionContainer:{grid:{host:"row"}},formatContainer:{grid:{host:"row"}}},this.isIIIF=!1,this.subs=[]}return u(e,[{key:"ngOnInit",value:function(){var e=this;this.itemId=this.route.snapshot.queryParams.itemId,this.entityType=this.route.snapshot.queryParams.entityType,this.bitstreamRD$=this.route.data.pipe(Object(c.a)((function(e){return e.bitstream}))),this.bitstreamFormatsRD$=this.bitstreamFormatService.findAll(this.findAllOptions);var t=this.bitstreamRD$.pipe(Object(y.i)(),Object(y.o)()),i=this.bitstreamFormatsRD$.pipe(Object(y.i)(),Object(y.o)());this.subs.push(Object(f.a)(t,i).subscribe((function(t){var i=a(t,2),n=i[0],r=i[1];e.bitstream=n,e.formats=r.page,e.setIiifStatus(e.bitstream)}))),this.subs.push(this.translate.onLangChange.subscribe((function(){e.updateFieldTranslations()})))}},{key:"setForm",value:function(){this.formGroup=this.formService.createFormGroup(this.formModel),this.updateFormatModel(),this.updateForm(this.bitstream),this.updateFieldTranslations()}},{key:"updateForm",value:function(e){var t=this;this.formGroup.patchValue({fileNamePrimaryContainer:{fileName:e.name,primaryBitstream:!1},descriptionContainer:{description:e.firstMetadataValue("dc.description")},formatContainer:{newFormat:Object(I.b)(e.firstMetadata("dc.format"))?e.firstMetadata("dc.format").value:void 0}}),this.isIIIF&&this.formGroup.patchValue({iiifLabelContainer:{iiifLabel:e.firstMetadataValue(this.IIIF_LABEL_METADATA)},iiifTocContainer:{iiifToc:e.firstMetadataValue(this.IIIF_TOC_METADATA)},iiifWidthContainer:{iiifWidth:e.firstMetadataValue(this.IMAGE_WIDTH_METADATA)},iiifHeightContainer:{iiifHeight:e.firstMetadataValue(this.IMAGE_HEIGHT_METADATA)}}),this.bitstream.format.pipe(Object(y.d)()).subscribe((function(e){t.originalFormat=e,t.formGroup.patchValue({formatContainer:{selectedFormat:e.id}}),t.updateNewFormatLayout(e.id)}))}},{key:"updateFormatModel",value:function(){var e=this;this.selectedFormatModel.options=this.formats.map((function(t){return Object.assign({value:t.id,label:e.isUnknownFormat(t.id)?e.translate.instant(e.KEY_PREFIX+"selectedFormat.unknown"):t.shortDescription})}))}},{key:"updateNewFormatLayout",value:function(e){this.formLayout.newFormat.grid.host=this.isUnknownFormat(e)?this.newFormatBaseLayout:this.newFormatBaseLayout+" invisible"}},{key:"isUnknownFormat",value:function(e){var t=this.formats.find((function(t){return t.id===e}));return Object(I.b)(t)&&t.supportLevel===g.a.Unknown}},{key:"updateFieldTranslations",value:function(){var e=this;this.inputModels.forEach((function(t){e.updateFieldTranslation(t)}))}},{key:"updateFieldTranslation",value:function(e){e.label=this.translate.instant(this.KEY_PREFIX+e.id+this.LABEL_KEY_SUFFIX),e.id!==this.primaryBitstreamModel.id&&(e.hint=this.translate.instant(this.KEY_PREFIX+e.id+this.HINT_KEY_SUFFIX))}},{key:"onChange",value:function(e){var t=e.model;t.id===this.selectedFormatModel.id&&this.updateNewFormatLayout(t.value)}},{key:"onSubmit",value:function(){var e=this,t=this.formGroup.getRawValue(),i=this.formToBitstream(t),n=this.formats.find((function(e){return e.id===t.formatContainer.selectedFormat}));(n.id!==this.originalFormat.id?this.bitstreamService.updateFormat(this.bitstream,n).pipe(Object(y.g)(),Object(c.a)((function(t){if(!Object(I.b)(t)||!t.hasFailed)return t.payload;e.notificationsService.error(e.translate.instant(e.NOTIFICATIONS_PREFIX+"error.format.title"),t.errorMessage)}))):Object(p.a)(this.bitstream)).pipe(Object(d.a)((function(){return e.bitstreamService.update(i).pipe(Object(y.j)())}))).subscribe((function(){e.bitstreamService.commitUpdates(),e.notificationsService.success(e.translate.instant(e.NOTIFICATIONS_PREFIX+"saved.title"),e.translate.instant(e.NOTIFICATIONS_PREFIX+"saved.content")),e.navigateToItemEditBitstreams()}))}},{key:"formToBitstream",value:function(e){var t=Object(v.cloneDeep)(this.bitstream),i=t.metadata;return F.a.setFirstValue(i,"dc.title",e.fileNamePrimaryContainer.fileName),F.a.setFirstValue(i,"dc.description",e.descriptionContainer.description),this.isIIIF&&(Object(I.d)(e.iiifLabelContainer.iiifLabel)?delete i[this.IIIF_LABEL_METADATA]:F.a.setFirstValue(i,this.IIIF_LABEL_METADATA,e.iiifLabelContainer.iiifLabel),Object(I.d)(e.iiifTocContainer.iiifToc)?delete i[this.IIIF_TOC_METADATA]:F.a.setFirstValue(i,this.IIIF_TOC_METADATA,e.iiifTocContainer.iiifToc),Object(I.d)(e.iiifWidthContainer.iiifWidth)?delete i[this.IMAGE_WIDTH_METADATA]:F.a.setFirstValue(i,this.IMAGE_WIDTH_METADATA,e.iiifWidthContainer.iiifWidth),Object(I.d)(e.iiifHeightContainer.iiifHeight)?delete i[this.IMAGE_HEIGHT_METADATA]:F.a.setFirstValue(i,this.IMAGE_HEIGHT_METADATA,e.iiifHeightContainer.iiifHeight)),Object(I.e)(e.formatContainer.newFormat)&&F.a.setFirstValue(i,"dc.format",e.formatContainer.newFormat),t.metadata=i,t}},{key:"onCancel",value:function(){this.navigateToItemEditBitstreams()}},{key:"navigateToItemEditBitstreams",value:function(){var e=this;Object(I.b)(this.itemId)?this.router.navigate([Object(E.d)(this.entityType,this.itemId),"bitstreams"]):this.bitstream.bundle.pipe(Object(y.j)(),Object(m.a)((function(e){return e.item.pipe(Object(y.j)())}))).subscribe((function(t){e.router.navigate([Object(E.e)(t),"bitstreams"])}))}},{key:"setIiifStatus",value:function(e){var t=this,i=/OTHERCONTENT|THUMBNAIL|LICENSE/,n=/true|yes/i,r=this.bitstream.format.pipe(Object(y.i)(),Object(c.a)((function(e){return e.payload.mimetype.includes("image/")}))),o=this.bitstream.bundle.pipe(Object(y.i)(),Object(c.a)((function(e){return null==t.dsoNameService.getName(e.payload).match(i)}))),s=this.bitstream.bundle.pipe(Object(y.i)(),Object(c.a)((function(e){return e.payload.item.pipe(Object(y.i)(),Object(c.a)((function(e){return e.payload.firstMetadataValue("dspace.iiif.enabled")&&null!==e.payload.firstMetadataValue("dspace.iiif.enabled").match(n)})))}))),l=Object(f.a)(r,o,s).subscribe((function(e){var i=a(e,3),n=i[0],r=i[1],o=i[2];n&&r&&o&&(t.isIIIF=!0,t.inputModels.push(t.iiifLabelModel),t.formModel.push(t.iiifLabelContainer),t.inputModels.push(t.iiifTocModel),t.formModel.push(t.iiifTocContainer),t.inputModels.push(t.iiifWidthModel),t.formModel.push(t.iiifWidthContainer),t.inputModels.push(t.iiifHeightModel),t.formModel.push(t.iiifHeightContainer)),t.setForm(),t.changeDetectorRef.detectChanges()}));this.subs.push(l)}},{key:"ngOnDestroy",value:function(){this.subs.filter((function(e){return Object(I.b)(e)})).forEach((function(e){return e.unsubscribe()}))}}]),e}()).\u0275fac=function(e){return new(e||X)(n["\u0275\u0275directiveInject"](C.a),n["\u0275\u0275directiveInject"](C.h),n["\u0275\u0275directiveInject"](n.ChangeDetectorRef),n["\u0275\u0275directiveInject"](o.k),n["\u0275\u0275directiveInject"](h.G),n["\u0275\u0275directiveInject"](T.e),n["\u0275\u0275directiveInject"](O.a),n["\u0275\u0275directiveInject"](A.a),n["\u0275\u0275directiveInject"](j.a),n["\u0275\u0275directiveInject"](x.a))},X.\u0275cmp=n["\u0275\u0275defineComponent"]({type:X,selectors:[["ds-edit-bitstream-page"]],decls:3,vars:3,consts:[[4,"ngVar"],["class","container",4,"ngVar"],[1,"container"],["class","row",4,"ngIf"],[3,"message",4,"ngIf"],[1,"row"],[1,"col-md-2"],[3,"thumbnail"],[1,"col-md-10"],[1,"col-12"],[1,"text-muted"],[3,"formId","formGroup","formModel","formLayout","submitLabel","submitForm","cancel","dfChange",4,"ngIf"],[3,"formId","formGroup","formModel","formLayout","submitLabel","submitForm","cancel","dfChange"],["additional","",1,"container","py-3"],[3,"routerLink"],[3,"message"]],template:function(e,t){1&e&&(n["\u0275\u0275template"](0,q,5,3,"ng-container",0),n["\u0275\u0275pipe"](1,"async"),n["\u0275\u0275text"](2,"\n")),2&e&&n["\u0275\u0275property"]("ngVar",n["\u0275\u0275pipeBind1"](1,1,t.bitstreamRD$))},directives:[S.a,o.p,L.a,_.a,k.NgControlStatusGroup,k.FormGroupDirective,C.k,B.a,D.a],pipes:[o.b,N.a,T.d],styles:["[_nghost-%COMP%]     .switch{position:absolute;top:calc(var(--bs-spacer) * 2.5)}[_nghost-%COMP%]     ds-dynamic-form-control-container>div>label{margin-top:1.75rem}"],changeDetection:0}),X),J=i("tPZA"),Q=i("84Zn"),ee=((U=function(){function e(t){l(this,e),this.bitstreamService=t}return u(e,[{key:"resolve",value:function(e,t){var i;return(i=this.bitstreamService).findById.apply(i,[e.params.id,!0,!1].concat(r(this.followLinks))).pipe(Object(y.g)())}},{key:"followLinks",get:function(){return[Object(Q.a)("bundle",{},Object(Q.a)("item")),Object(Q.a)("format")]}}]),e}()).\u0275fac=function(e){return new(e||U)(n["\u0275\u0275inject"](O.a))},U.\u0275prov=n["\u0275\u0275defineInjectable"]({token:U,factory:U.\u0275fac}),U),te=i("Gt6B"),ie=i("n1Qy"),ne=i("EEUA"),re=i("G5zm"),ae=i("ALMP"),oe=i("SxV6"),se=i("+Bs4"),le=function(e){return["/bitstreams",e,"edit"]},ce=((Y=function(){function e(t){l(this,e),this.route=t}return u(e,[{key:"ngOnInit",value:function(){this.dsoRD$=this.route.data.pipe(Object(oe.a)(),Object(c.a)((function(e){return e.bitstream})))}}]),e}()).\u0275fac=function(e){return new(e||Y)(n["\u0275\u0275directiveInject"](C.a))},Y.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Y,selectors:[["ds-collection-authorizations"]],decls:19,vars:12,consts:[[1,"container"],[3,"resourceType","resourceUUID"],[1,"button-row","bottom"],[1,"text-right"],["role","button",1,"btn","btn-outline-secondary","mr-1",3,"routerLink"],[1,"fas","fa-arrow-left"]],template:function(e,t){var i,r;(1&e&&(n["\u0275\u0275elementStart"](0,"div",0),n["\u0275\u0275text"](1,"\n  "),n["\u0275\u0275element"](2,"ds-resource-policies",1),n["\u0275\u0275pipe"](3,"async"),n["\u0275\u0275text"](4,"\n  "),n["\u0275\u0275elementStart"](5,"div",2),n["\u0275\u0275text"](6,"\n    "),n["\u0275\u0275elementStart"](7,"div",3),n["\u0275\u0275text"](8,"\n      "),n["\u0275\u0275elementStart"](9,"a",4),n["\u0275\u0275pipe"](10,"async"),n["\u0275\u0275text"](11,"\n        "),n["\u0275\u0275element"](12,"i",5),n["\u0275\u0275text"](13),n["\u0275\u0275pipe"](14,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275text"](15,"\n    "),n["\u0275\u0275elementEnd"](),n["\u0275\u0275text"](16,"\n  "),n["\u0275\u0275elementEnd"](),n["\u0275\u0275text"](17,"\n"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275text"](18,"\n")),2&e)&&(n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("resourceType","bitstream")("resourceUUID",null==(i=n["\u0275\u0275pipeBind1"](3,4,t.dsoRD$))||null==i.payload?null:i.payload.id),n["\u0275\u0275advance"](7),n["\u0275\u0275property"]("routerLink",n["\u0275\u0275pureFunction1"](10,le,null==(r=n["\u0275\u0275pipeBind1"](10,6,t.dsoRD$))||null==r.payload?null:r.payload.id)),n["\u0275\u0275advance"](4),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](14,8,"bitstream.edit.return"),"\n      "))},directives:[se.a,C.k],pipes:[o.b,T.d],encapsulation:2}),Y),ue=((z=function(){function e(t){l(this,e),this.bitstreamDataService=t}return u(e,[{key:"resolve",value:function(e,t){var i=e.params.prefix,n=e.params.suffix,r=e.params.filename,a=e.params.sequence_id;return Object(I.a)(a)&&(a=e.queryParams.sequenceId),this.bitstreamDataService.findByItemHandle("".concat(i,"/").concat(n),a,r).pipe(Object(y.g)())}}]),e}()).\u0275fac=function(e){return new(e||z)(n["\u0275\u0275inject"](O.a))},z.\u0275prov=n["\u0275\u0275defineInjectable"]({token:z,factory:z.\u0275fac,providedIn:"root"}),z),de=((K=function e(){l(this,e)}).\u0275fac=function(e){return new(e||K)},K.\u0275mod=n["\u0275\u0275defineNgModule"]({type:K}),K.\u0275inj=n["\u0275\u0275defineInjector"]({providers:[ee],imports:[[C.l.forChild([{path:"handle/:prefix/:suffix/:filename",component:te.a,resolve:{bitstream:ue}},{path:":prefix/:suffix/:sequence_id/:filename",component:te.a,resolve:{bitstream:ue}},{path:":id/download",component:te.a,resolve:{bitstream:ee}},{path:":id/edit",component:Z,resolve:{bitstream:ee},canActivate:[J.a]},{path:":id/authorizations",children:[{path:"create",resolve:{resourcePolicyTarget:ie.a},component:ne.a,data:{title:"resource-policies.create.page.title",showBreadcrumbs:!0}},{path:"edit",resolve:{resourcePolicy:re.a},component:ae.a,data:{title:"resource-policies.edit.page.title",showBreadcrumbs:!0}},{path:"",resolve:{bitstream:ee},component:ce,data:{title:"bitstream.edit.authorizations.title",showBreadcrumbs:!0}}]}])]]}),K),me=i("kcqd"),fe=i("GFj5"),pe=(($=function e(){l(this,e)}).\u0275fac=function(e){return new(e||$)},$.\u0275mod=n["\u0275\u0275defineNgModule"]({type:$}),$.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[o.c,s.a,de,me.a,fe.a]]}),$)},kcqd:function(i,n,r){"use strict";r.d(n,"a",(function(){return w}));var a=r("fXoL"),o=r("ofXK"),s=r("hqmO"),c=r("e+Av"),u=r("NvTF");function d(e,t){if(1&e){var i=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"ds-dynamic-form-control-container",1),a["\u0275\u0275listener"]("dfBlur",(function(e){a["\u0275\u0275restoreView"](i);var t=a["\u0275\u0275nextContext"]();return t.onCustomEvent(e,t.blur)}))("dfChange",(function(e){a["\u0275\u0275restoreView"](i);var t=a["\u0275\u0275nextContext"]();return t.onCustomEvent(e,t.change)}))("dfFocus",(function(e){a["\u0275\u0275restoreView"](i);var t=a["\u0275\u0275nextContext"]();return t.onCustomEvent(e,t.focus)}))("ngbEvent",(function(e){a["\u0275\u0275restoreView"](i);var t=a["\u0275\u0275nextContext"]();return t.onCustomEvent(e,t.ngbEvent)})),a["\u0275\u0275elementEnd"]()}if(2&e){var n=t.$implicit,r=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("formId",r.formId)("group",r.formGroup)("hasErrorMessaging",n.hasErrorMessages)("hidden",n.hidden)("layout",r.formLayout)("model",n)("templates",r.templates)("asBootstrapFormGroup",!0)}}var m,f=((m=function(i){!function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),i&&e(t,i)}(r,i);var n=t(r);function r(e,t){var i;return l(this,r),(i=n.call(this,e,t)).blur=new a.EventEmitter,i.change=new a.EventEmitter,i.focus=new a.EventEmitter,i.ngbEvent=new a.EventEmitter,i}return r}(c.x)).\u0275fac=function(e){return new(e||m)(a["\u0275\u0275directiveInject"](a.ChangeDetectorRef),a["\u0275\u0275directiveInject"](c.y))},m.\u0275cmp=a["\u0275\u0275defineComponent"]({type:m,selectors:[["ds-dynamic-form"]],contentQueries:function(e,t,i){var n;1&e&&a["\u0275\u0275contentQuery"](i,c.O,0),2&e&&a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.templates=n)},viewQuery:function(e,t){var i;1&e&&a["\u0275\u0275viewQuery"](u.a,1),2&e&&a["\u0275\u0275queryRefresh"](i=a["\u0275\u0275loadQuery"]())&&(t.components=i)},inputs:{formId:"formId",formGroup:"formGroup",formModel:"formModel",formLayout:"formLayout"},outputs:{blur:"dfBlur",change:"dfChange",focus:"dfFocus",ngbEvent:"ngbEvent"},features:[a["\u0275\u0275InheritDefinitionFeature"]],decls:2,vars:2,consts:[[3,"formId","group","hasErrorMessaging","hidden","layout","model","templates","asBootstrapFormGroup","dfBlur","dfChange","dfFocus","ngbEvent",4,"ngFor","ngForOf","ngForTrackBy"],[3,"formId","group","hasErrorMessaging","hidden","layout","model","templates","asBootstrapFormGroup","dfBlur","dfChange","dfFocus","ngbEvent"]],template:function(e,t){1&e&&(a["\u0275\u0275template"](0,d,1,8,"ds-dynamic-form-control-container",0),a["\u0275\u0275text"](1,"\n")),2&e&&a["\u0275\u0275property"]("ngForOf",t.formModel)("ngForTrackBy",t.trackByFn)},directives:[o.o,u.a],encapsulation:2}),m);r("ZO65"),r("0pnk"),r("sw+l"),r("1Pbu"),r("bPV6"),r("Gu/b"),r("A/iK"),r("KKO+"),r("Ysrn");var p,h=r("tqJZ"),b=r("ZTun"),v=(r("uyTL"),r("Ui2r"),r("8HnP"),r("zVKZ"),r("PCNd")),y=r("sYmb"),g=r("kMeL"),I=(r("yXJd"),r("/Vzl"),r("zGzN"),r("xjoE"),r("n7Wa")),F=r("3Pt+"),E=r("5+WD"),w=((p=function e(){l(this,e)}).\u0275fac=function(e){return new(e||p)},p.\u0275mod=a["\u0275\u0275defineNgModule"]({type:p}),p.\u0275inj=a["\u0275\u0275defineInjector"]({providers:[{provide:c.c,useValue:u.b}],imports:[[o.c,c.I,I.a,g.a,v.a,y.c]]}),p);a["\u0275\u0275setComponentScope"](h.a,[F.NgControlStatusGroup,F.FormGroupDirective,F.FormGroupName,o.m,o.o,u.a],[]),a["\u0275\u0275setComponentScope"](b.a,[F.NgControlStatusGroup,F.FormGroupDirective,F.FormArrayName,o.m,E.c,o.o,E.a,E.b,F.FormGroupName,o.t,u.a],[]),a["\u0275\u0275setComponentScope"](s.a,[F["\u0275angular_packages_forms_forms_ba"],F.NgControlStatusGroup,F.FormGroupDirective,f,c.O,o.p],[y.d,o.b])},mOAm:function(e,t,i){"use strict";i.d(t,"a",(function(){return a})),i.d(t,"b",(function(){return o}));var n=i("zZO8"),r=i("TVZh"),a="groups";function o(e){return new n.a(Object(r.m)(),a,e).toString()}}}])}();
//# sourceMappingURL=12-es5.443bcb59f3f0693c4113.js.map