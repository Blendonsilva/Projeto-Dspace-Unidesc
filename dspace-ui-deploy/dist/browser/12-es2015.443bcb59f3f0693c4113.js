(window.webpackJsonp=window.webpackJsonp||[]).push([[12,14],{cuVu:function(t,e,i){"use strict";i.r(e),i.d(e,"BitstreamPageModule",(function(){return at}));var n=i("fXoL"),a=i("ofXK"),r=i("PCNd"),o=i("lJxs"),s=i("eIep"),l=i("5+tZ"),d=i("itXk"),c=i("LRne"),m=i("e+Av"),u=i("JN36"),p=i("LvDl"),h=i("1QIV"),f=i("87+M"),b=i("J3qs"),g=i("/eM4"),I=i("Xioo"),v=i("JGHn"),F=i("c/qf"),y=i("tyNb"),M=i("sYmb"),E=i("PCBh"),C=i("C765"),T=i("lI3o"),w=i("B7d6"),x=i("O/5o"),A=i("/lGE"),O=i("hqmO"),j=i("3Pt+"),S=i("HZwm"),L=i("Frqi"),_=i("t8/W");const D=function(t){return["/bitstreams",t,"authorizations"]};function B(t,e){if(1&t){const t=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"ds-form",12),n["\u0275\u0275listener"]("submitForm",(function(){return n["\u0275\u0275restoreView"](t),n["\u0275\u0275nextContext"](4).onSubmit()}))("cancel",(function(){return n["\u0275\u0275restoreView"](t),n["\u0275\u0275nextContext"](4).onCancel()}))("dfChange",(function(e){return n["\u0275\u0275restoreView"](t),n["\u0275\u0275nextContext"](4).onChange(e)})),n["\u0275\u0275text"](1,"\n          "),n["\u0275\u0275elementStart"](2,"div",13),n["\u0275\u0275text"](3,"\n            "),n["\u0275\u0275elementStart"](4,"a",14),n["\u0275\u0275text"](5),n["\u0275\u0275pipe"](6,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275text"](7,"\n          "),n["\u0275\u0275elementEnd"](),n["\u0275\u0275text"](8,"\n        "),n["\u0275\u0275elementEnd"]()}if(2&t){const t=n["\u0275\u0275nextContext"](3).ngVar,e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("formId","edit-bitstream-form-id")("formGroup",e.formGroup)("formModel",e.formModel)("formLayout",e.formLayout)("submitLabel","form.save"),n["\u0275\u0275advance"](4),n["\u0275\u0275property"]("routerLink",n["\u0275\u0275pureFunction1"](9,D,null==t||null==t.payload?null:t.payload.id)),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate"](n["\u0275\u0275pipeBind1"](6,7,"bitstream.edit.authorizations.link"))}}function N(t,e){if(1&t&&(n["\u0275\u0275elementStart"](0,"div",5),n["\u0275\u0275text"](1,"\n      "),n["\u0275\u0275elementStart"](2,"div",6),n["\u0275\u0275text"](3,"\n        "),n["\u0275\u0275element"](4,"ds-thumbnail",7),n["\u0275\u0275text"](5,"\n      "),n["\u0275\u0275elementEnd"](),n["\u0275\u0275text"](6,"\n      "),n["\u0275\u0275elementStart"](7,"div",8),n["\u0275\u0275text"](8,"\n        "),n["\u0275\u0275elementStart"](9,"div",2),n["\u0275\u0275text"](10,"\n          "),n["\u0275\u0275elementStart"](11,"div",5),n["\u0275\u0275text"](12,"\n            "),n["\u0275\u0275elementStart"](13,"div",9),n["\u0275\u0275text"](14,"\n              "),n["\u0275\u0275elementStart"](15,"h3"),n["\u0275\u0275text"](16),n["\u0275\u0275elementStart"](17,"span",10),n["\u0275\u0275text"](18),n["\u0275\u0275pipe"](19,"dsFileSize"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275text"](20,"\n            "),n["\u0275\u0275elementEnd"](),n["\u0275\u0275text"](21,"\n          "),n["\u0275\u0275elementEnd"](),n["\u0275\u0275text"](22,"\n        "),n["\u0275\u0275elementEnd"](),n["\u0275\u0275text"](23,"\n        "),n["\u0275\u0275template"](24,B,9,11,"ds-form",11),n["\u0275\u0275text"](25,"\n      "),n["\u0275\u0275elementEnd"](),n["\u0275\u0275text"](26,"\n    "),n["\u0275\u0275elementEnd"]()),2&t){const t=n["\u0275\u0275nextContext"](2).ngVar,e=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](4),n["\u0275\u0275property"]("thumbnail",null==t?null:t.payload),n["\u0275\u0275advance"](12),n["\u0275\u0275textInterpolate1"]("",null==t||null==t.payload?null:t.payload.name," "),n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"]("(",n["\u0275\u0275pipeBind1"](19,4,null==t||null==t.payload?null:t.payload.sizeBytes),")"),n["\u0275\u0275advance"](6),n["\u0275\u0275property"]("ngIf",e.formGroup)}}function G(t,e){1&t&&(n["\u0275\u0275element"](0,"ds-error",15),n["\u0275\u0275pipe"](1,"translate")),2&t&&n["\u0275\u0275propertyInterpolate"]("message",n["\u0275\u0275pipeBind1"](1,1,"error.bitstream"))}function V(t,e){1&t&&(n["\u0275\u0275element"](0,"ds-loading",15),n["\u0275\u0275pipe"](1,"translate")),2&t&&n["\u0275\u0275propertyInterpolate"]("message",n["\u0275\u0275pipeBind1"](1,1,"loading.bitstream"))}function k(t,e){if(1&t&&(n["\u0275\u0275elementStart"](0,"div",2),n["\u0275\u0275text"](1,"\n    "),n["\u0275\u0275template"](2,N,27,6,"div",3),n["\u0275\u0275text"](3,"\n    "),n["\u0275\u0275template"](4,G,2,3,"ds-error",4),n["\u0275\u0275text"](5,"\n    "),n["\u0275\u0275template"](6,V,2,3,"ds-loading",4),n["\u0275\u0275text"](7,"\n  "),n["\u0275\u0275elementEnd"]()),2&t){const t=e.ngVar,i=n["\u0275\u0275nextContext"]().ngVar;n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",(null==i?null:i.hasSucceeded)&&(null==t?null:t.hasSucceeded)),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",null==i?null:i.hasFailed),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",!i||!t||(null==i?null:i.isLoading)||(null==t?null:t.isLoading))}}function H(t,e){if(1&t&&(n["\u0275\u0275elementContainerStart"](0),n["\u0275\u0275text"](1,"\n  "),n["\u0275\u0275template"](2,k,8,3,"div",1),n["\u0275\u0275pipe"](3,"async"),n["\u0275\u0275text"](4,"\n"),n["\u0275\u0275elementContainerEnd"]()),2&t){const t=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngVar",n["\u0275\u0275pipeBind1"](3,1,t.bitstreamFormatsRD$))}}let P=(()=>{class t{constructor(t,e,i,n,a,r,o,s,l,d){this.route=t,this.router=e,this.changeDetectorRef=i,this.location=n,this.formService=a,this.translate=r,this.bitstreamService=o,this.dsoNameService=s,this.notificationsService=l,this.bitstreamFormatService=d,this.KEY_PREFIX="bitstream.edit.form.",this.LABEL_KEY_SUFFIX=".label",this.HINT_KEY_SUFFIX=".hint",this.NOTIFICATIONS_PREFIX="bitstream.edit.notifications.",this.IMAGE_WIDTH_METADATA="iiif.image.width",this.IMAGE_HEIGHT_METADATA="iiif.image.height",this.IIIF_TOC_METADATA="iiif.toc",this.IIIF_LABEL_METADATA="iiif.label",this.findAllOptions={elementsPerPage:9999},this.fileNameModel=new v.a({hasSelectableMetadata:!1,metadataFields:[],repeatable:!1,submissionId:"",id:"fileName",name:"fileName",required:!0,validators:{required:null},errorMessages:{required:"You must provide a file name for the bitstream"}}),this.primaryBitstreamModel=new u.b({id:"primaryBitstream",name:"primaryBitstream"}),this.descriptionModel=new F.a({hasSelectableMetadata:!1,metadataFields:[],repeatable:!1,submissionId:"",id:"description",name:"description",rows:10}),this.selectedFormatModel=new m.N({id:"selectedFormat",name:"selectedFormat"}),this.newFormatModel=new m.J({id:"newFormat",name:"newFormat"}),this.iiifLabelModel=new v.a({hasSelectableMetadata:!1,metadataFields:[],repeatable:!1,submissionId:"",id:"iiifLabel",name:"iiifLabel"},{grid:{host:"col col-lg-6 d-inline-block"}}),this.iiifLabelContainer=new m.D({id:"iiifLabelContainer",group:[this.iiifLabelModel]},{grid:{host:"form-row"}}),this.iiifTocModel=new v.a({hasSelectableMetadata:!1,metadataFields:[],repeatable:!1,submissionId:"",id:"iiifToc",name:"iiifToc"},{grid:{host:"col col-lg-6 d-inline-block"}}),this.iiifTocContainer=new m.D({id:"iiifTocContainer",group:[this.iiifTocModel]},{grid:{host:"form-row"}}),this.iiifWidthModel=new v.a({hasSelectableMetadata:!1,metadataFields:[],repeatable:!1,submissionId:"",id:"iiifWidth",name:"iiifWidth"},{grid:{host:"col col-lg-6 d-inline-block"}}),this.iiifWidthContainer=new m.D({id:"iiifWidthContainer",group:[this.iiifWidthModel]},{grid:{host:"form-row"}}),this.iiifHeightModel=new v.a({hasSelectableMetadata:!1,metadataFields:[],repeatable:!1,submissionId:"",id:"iiifHeight",name:"iiifHeight"},{grid:{host:"col col-lg-6 d-inline-block"}}),this.iiifHeightContainer=new m.D({id:"iiifHeightContainer",group:[this.iiifHeightModel]},{grid:{host:"form-row"}}),this.inputModels=[this.fileNameModel,this.primaryBitstreamModel,this.descriptionModel,this.selectedFormatModel,this.newFormatModel],this.formModel=[new m.D({id:"fileNamePrimaryContainer",group:[this.fileNameModel,this.primaryBitstreamModel]},{grid:{host:"form-row"}}),new m.D({id:"descriptionContainer",group:[this.descriptionModel]}),new m.D({id:"formatContainer",group:[this.selectedFormatModel,this.newFormatModel]})],this.newFormatBaseLayout="col col-sm-6 d-inline-block",this.formLayout={fileName:{grid:{host:"col col-sm-8 d-inline-block"}},primaryBitstream:{grid:{host:"col col-sm-4 d-inline-block switch"}},description:{grid:{host:"col-12 d-inline-block"}},embargo:{grid:{host:"col-12 d-inline-block"}},selectedFormat:{grid:{host:"col col-sm-6 d-inline-block"}},newFormat:{grid:{host:this.newFormatBaseLayout+" invisible"}},fileNamePrimaryContainer:{grid:{host:"row position-relative"}},descriptionContainer:{grid:{host:"row"}},formatContainer:{grid:{host:"row"}}},this.isIIIF=!1,this.subs=[]}ngOnInit(){this.itemId=this.route.snapshot.queryParams.itemId,this.entityType=this.route.snapshot.queryParams.entityType,this.bitstreamRD$=this.route.data.pipe(Object(o.a)(t=>t.bitstream)),this.bitstreamFormatsRD$=this.bitstreamFormatService.findAll(this.findAllOptions);const t=this.bitstreamRD$.pipe(Object(h.i)(),Object(h.o)()),e=this.bitstreamFormatsRD$.pipe(Object(h.i)(),Object(h.o)());this.subs.push(Object(d.a)(t,e).subscribe(([t,e])=>{this.bitstream=t,this.formats=e.page,this.setIiifStatus(this.bitstream)})),this.subs.push(this.translate.onLangChange.subscribe(()=>{this.updateFieldTranslations()}))}setForm(){this.formGroup=this.formService.createFormGroup(this.formModel),this.updateFormatModel(),this.updateForm(this.bitstream),this.updateFieldTranslations()}updateForm(t){this.formGroup.patchValue({fileNamePrimaryContainer:{fileName:t.name,primaryBitstream:!1},descriptionContainer:{description:t.firstMetadataValue("dc.description")},formatContainer:{newFormat:Object(b.b)(t.firstMetadata("dc.format"))?t.firstMetadata("dc.format").value:void 0}}),this.isIIIF&&this.formGroup.patchValue({iiifLabelContainer:{iiifLabel:t.firstMetadataValue(this.IIIF_LABEL_METADATA)},iiifTocContainer:{iiifToc:t.firstMetadataValue(this.IIIF_TOC_METADATA)},iiifWidthContainer:{iiifWidth:t.firstMetadataValue(this.IMAGE_WIDTH_METADATA)},iiifHeightContainer:{iiifHeight:t.firstMetadataValue(this.IMAGE_HEIGHT_METADATA)}}),this.bitstream.format.pipe(Object(h.d)()).subscribe(t=>{this.originalFormat=t,this.formGroup.patchValue({formatContainer:{selectedFormat:t.id}}),this.updateNewFormatLayout(t.id)})}updateFormatModel(){this.selectedFormatModel.options=this.formats.map(t=>Object.assign({value:t.id,label:this.isUnknownFormat(t.id)?this.translate.instant(this.KEY_PREFIX+"selectedFormat.unknown"):t.shortDescription}))}updateNewFormatLayout(t){this.formLayout.newFormat.grid.host=this.isUnknownFormat(t)?this.newFormatBaseLayout:this.newFormatBaseLayout+" invisible"}isUnknownFormat(t){const e=this.formats.find(e=>e.id===t);return Object(b.b)(e)&&e.supportLevel===f.a.Unknown}updateFieldTranslations(){this.inputModels.forEach(t=>{this.updateFieldTranslation(t)})}updateFieldTranslation(t){t.label=this.translate.instant(this.KEY_PREFIX+t.id+this.LABEL_KEY_SUFFIX),t.id!==this.primaryBitstreamModel.id&&(t.hint=this.translate.instant(this.KEY_PREFIX+t.id+this.HINT_KEY_SUFFIX))}onChange(t){const e=t.model;e.id===this.selectedFormatModel.id&&this.updateNewFormatLayout(e.value)}onSubmit(){const t=this.formGroup.getRawValue(),e=this.formToBitstream(t),i=this.formats.find(e=>e.id===t.formatContainer.selectedFormat);let n;n=i.id!==this.originalFormat.id?this.bitstreamService.updateFormat(this.bitstream,i).pipe(Object(h.g)(),Object(o.a)(t=>{if(!Object(b.b)(t)||!t.hasFailed)return t.payload;this.notificationsService.error(this.translate.instant(this.NOTIFICATIONS_PREFIX+"error.format.title"),t.errorMessage)})):Object(c.a)(this.bitstream),n.pipe(Object(s.a)(()=>this.bitstreamService.update(e).pipe(Object(h.j)()))).subscribe(()=>{this.bitstreamService.commitUpdates(),this.notificationsService.success(this.translate.instant(this.NOTIFICATIONS_PREFIX+"saved.title"),this.translate.instant(this.NOTIFICATIONS_PREFIX+"saved.content")),this.navigateToItemEditBitstreams()})}formToBitstream(t){const e=Object(p.cloneDeep)(this.bitstream),i=e.metadata;return g.a.setFirstValue(i,"dc.title",t.fileNamePrimaryContainer.fileName),g.a.setFirstValue(i,"dc.description",t.descriptionContainer.description),this.isIIIF&&(Object(b.d)(t.iiifLabelContainer.iiifLabel)?delete i[this.IIIF_LABEL_METADATA]:g.a.setFirstValue(i,this.IIIF_LABEL_METADATA,t.iiifLabelContainer.iiifLabel),Object(b.d)(t.iiifTocContainer.iiifToc)?delete i[this.IIIF_TOC_METADATA]:g.a.setFirstValue(i,this.IIIF_TOC_METADATA,t.iiifTocContainer.iiifToc),Object(b.d)(t.iiifWidthContainer.iiifWidth)?delete i[this.IMAGE_WIDTH_METADATA]:g.a.setFirstValue(i,this.IMAGE_WIDTH_METADATA,t.iiifWidthContainer.iiifWidth),Object(b.d)(t.iiifHeightContainer.iiifHeight)?delete i[this.IMAGE_HEIGHT_METADATA]:g.a.setFirstValue(i,this.IMAGE_HEIGHT_METADATA,t.iiifHeightContainer.iiifHeight)),Object(b.e)(t.formatContainer.newFormat)&&g.a.setFirstValue(i,"dc.format",t.formatContainer.newFormat),e.metadata=i,e}onCancel(){this.navigateToItemEditBitstreams()}navigateToItemEditBitstreams(){Object(b.b)(this.itemId)?this.router.navigate([Object(I.d)(this.entityType,this.itemId),"bitstreams"]):this.bitstream.bundle.pipe(Object(h.j)(),Object(l.a)(t=>t.item.pipe(Object(h.j)()))).subscribe(t=>{this.router.navigate([Object(I.e)(t),"bitstreams"])})}setIiifStatus(t){const e=/OTHERCONTENT|THUMBNAIL|LICENSE/,i=/true|yes/i,n=this.bitstream.format.pipe(Object(h.i)(),Object(o.a)(t=>t.payload.mimetype.includes("image/"))),a=this.bitstream.bundle.pipe(Object(h.i)(),Object(o.a)(t=>null==this.dsoNameService.getName(t.payload).match(e))),r=this.bitstream.bundle.pipe(Object(h.i)(),Object(o.a)(t=>t.payload.item.pipe(Object(h.i)(),Object(o.a)(t=>t.payload.firstMetadataValue("dspace.iiif.enabled")&&null!==t.payload.firstMetadataValue("dspace.iiif.enabled").match(i))))),s=Object(d.a)(n,a,r).subscribe(([t,e,i])=>{t&&e&&i&&(this.isIIIF=!0,this.inputModels.push(this.iiifLabelModel),this.formModel.push(this.iiifLabelContainer),this.inputModels.push(this.iiifTocModel),this.formModel.push(this.iiifTocContainer),this.inputModels.push(this.iiifWidthModel),this.formModel.push(this.iiifWidthContainer),this.inputModels.push(this.iiifHeightModel),this.formModel.push(this.iiifHeightContainer)),this.setForm(),this.changeDetectorRef.detectChanges()});this.subs.push(s)}ngOnDestroy(){this.subs.filter(t=>Object(b.b)(t)).forEach(t=>t.unsubscribe())}}return t.\u0275fac=function(e){return new(e||t)(n["\u0275\u0275directiveInject"](y.a),n["\u0275\u0275directiveInject"](y.h),n["\u0275\u0275directiveInject"](n.ChangeDetectorRef),n["\u0275\u0275directiveInject"](a.k),n["\u0275\u0275directiveInject"](m.G),n["\u0275\u0275directiveInject"](M.e),n["\u0275\u0275directiveInject"](E.a),n["\u0275\u0275directiveInject"](C.a),n["\u0275\u0275directiveInject"](T.a),n["\u0275\u0275directiveInject"](w.a))},t.\u0275cmp=n["\u0275\u0275defineComponent"]({type:t,selectors:[["ds-edit-bitstream-page"]],decls:3,vars:3,consts:[[4,"ngVar"],["class","container",4,"ngVar"],[1,"container"],["class","row",4,"ngIf"],[3,"message",4,"ngIf"],[1,"row"],[1,"col-md-2"],[3,"thumbnail"],[1,"col-md-10"],[1,"col-12"],[1,"text-muted"],[3,"formId","formGroup","formModel","formLayout","submitLabel","submitForm","cancel","dfChange",4,"ngIf"],[3,"formId","formGroup","formModel","formLayout","submitLabel","submitForm","cancel","dfChange"],["additional","",1,"container","py-3"],[3,"routerLink"],[3,"message"]],template:function(t,e){1&t&&(n["\u0275\u0275template"](0,H,5,3,"ng-container",0),n["\u0275\u0275pipe"](1,"async"),n["\u0275\u0275text"](2,"\n")),2&t&&n["\u0275\u0275property"]("ngVar",n["\u0275\u0275pipeBind1"](1,1,e.bitstreamRD$))},directives:[x.a,a.p,A.a,O.a,j.NgControlStatusGroup,j.FormGroupDirective,y.k,S.a,L.a],pipes:[a.b,_.a,M.d],styles:["[_nghost-%COMP%]     .switch{position:absolute;top:calc(var(--bs-spacer) * 2.5)}[_nghost-%COMP%]     ds-dynamic-form-control-container>div>label{margin-top:1.75rem}"],changeDetection:0}),t})();var R=i("tPZA"),W=i("84Zn");let q=(()=>{class t{constructor(t){this.bitstreamService=t}resolve(t,e){return this.bitstreamService.findById(t.params.id,!0,!1,...this.followLinks).pipe(Object(h.g)())}get followLinks(){return[Object(W.a)("bundle",{},Object(W.a)("item")),Object(W.a)("format")]}}return t.\u0275fac=function(e){return new(e||t)(n["\u0275\u0275inject"](E.a))},t.\u0275prov=n["\u0275\u0275defineInjectable"]({token:t,factory:t.\u0275fac}),t})();var X=i("Gt6B"),U=i("n1Qy"),K=i("EEUA"),z=i("G5zm"),Y=i("ALMP"),$=i("SxV6"),Z=i("+Bs4");const J=function(t){return["/bitstreams",t,"edit"]};let Q=(()=>{class t{constructor(t){this.route=t}ngOnInit(){this.dsoRD$=this.route.data.pipe(Object($.a)(),Object(o.a)(t=>t.bitstream))}}return t.\u0275fac=function(e){return new(e||t)(n["\u0275\u0275directiveInject"](y.a))},t.\u0275cmp=n["\u0275\u0275defineComponent"]({type:t,selectors:[["ds-collection-authorizations"]],decls:19,vars:12,consts:[[1,"container"],[3,"resourceType","resourceUUID"],[1,"button-row","bottom"],[1,"text-right"],["role","button",1,"btn","btn-outline-secondary","mr-1",3,"routerLink"],[1,"fas","fa-arrow-left"]],template:function(t,e){if(1&t&&(n["\u0275\u0275elementStart"](0,"div",0),n["\u0275\u0275text"](1,"\n  "),n["\u0275\u0275element"](2,"ds-resource-policies",1),n["\u0275\u0275pipe"](3,"async"),n["\u0275\u0275text"](4,"\n  "),n["\u0275\u0275elementStart"](5,"div",2),n["\u0275\u0275text"](6,"\n    "),n["\u0275\u0275elementStart"](7,"div",3),n["\u0275\u0275text"](8,"\n      "),n["\u0275\u0275elementStart"](9,"a",4),n["\u0275\u0275pipe"](10,"async"),n["\u0275\u0275text"](11,"\n        "),n["\u0275\u0275element"](12,"i",5),n["\u0275\u0275text"](13),n["\u0275\u0275pipe"](14,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275text"](15,"\n    "),n["\u0275\u0275elementEnd"](),n["\u0275\u0275text"](16,"\n  "),n["\u0275\u0275elementEnd"](),n["\u0275\u0275text"](17,"\n"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275text"](18,"\n")),2&t){let t=null,i=null;n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("resourceType","bitstream")("resourceUUID",null==(t=n["\u0275\u0275pipeBind1"](3,4,e.dsoRD$))||null==t.payload?null:t.payload.id),n["\u0275\u0275advance"](7),n["\u0275\u0275property"]("routerLink",n["\u0275\u0275pureFunction1"](10,J,null==(i=n["\u0275\u0275pipeBind1"](10,6,e.dsoRD$))||null==i.payload?null:i.payload.id)),n["\u0275\u0275advance"](4),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](14,8,"bitstream.edit.return"),"\n      ")}},directives:[Z.a,y.k],pipes:[a.b,M.d],encapsulation:2}),t})(),tt=(()=>{class t{constructor(t){this.bitstreamDataService=t}resolve(t,e){const i=t.params.prefix,n=t.params.suffix,a=t.params.filename;let r=t.params.sequence_id;return Object(b.a)(r)&&(r=t.queryParams.sequenceId),this.bitstreamDataService.findByItemHandle(`${i}/${n}`,r,a).pipe(Object(h.g)())}}return t.\u0275fac=function(e){return new(e||t)(n["\u0275\u0275inject"](E.a))},t.\u0275prov=n["\u0275\u0275defineInjectable"]({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),et=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=n["\u0275\u0275defineInjector"]({providers:[q],imports:[[y.l.forChild([{path:"handle/:prefix/:suffix/:filename",component:X.a,resolve:{bitstream:tt}},{path:":prefix/:suffix/:sequence_id/:filename",component:X.a,resolve:{bitstream:tt}},{path:":id/download",component:X.a,resolve:{bitstream:q}},{path:":id/edit",component:P,resolve:{bitstream:q},canActivate:[R.a]},{path:":id/authorizations",children:[{path:"create",resolve:{resourcePolicyTarget:U.a},component:K.a,data:{title:"resource-policies.create.page.title",showBreadcrumbs:!0}},{path:"edit",resolve:{resourcePolicy:z.a},component:Y.a,data:{title:"resource-policies.edit.page.title",showBreadcrumbs:!0}},{path:"",resolve:{bitstream:q},component:Q,data:{title:"bitstream.edit.authorizations.title",showBreadcrumbs:!0}}]}])]]}),t})();var it=i("kcqd"),nt=i("GFj5");let at=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[a.c,r.a,et,it.a,nt.a]]}),t})()},kcqd:function(t,e,i){"use strict";i.d(e,"a",(function(){return I}));var n=i("fXoL"),a=i("ofXK"),r=i("hqmO"),o=i("e+Av"),s=i("NvTF");function l(t,e){if(1&t){const t=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"ds-dynamic-form-control-container",1),n["\u0275\u0275listener"]("dfBlur",(function(e){n["\u0275\u0275restoreView"](t);const i=n["\u0275\u0275nextContext"]();return i.onCustomEvent(e,i.blur)}))("dfChange",(function(e){n["\u0275\u0275restoreView"](t);const i=n["\u0275\u0275nextContext"]();return i.onCustomEvent(e,i.change)}))("dfFocus",(function(e){n["\u0275\u0275restoreView"](t);const i=n["\u0275\u0275nextContext"]();return i.onCustomEvent(e,i.focus)}))("ngbEvent",(function(e){n["\u0275\u0275restoreView"](t);const i=n["\u0275\u0275nextContext"]();return i.onCustomEvent(e,i.ngbEvent)})),n["\u0275\u0275elementEnd"]()}if(2&t){const t=e.$implicit,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("formId",i.formId)("group",i.formGroup)("hasErrorMessaging",t.hasErrorMessages)("hidden",t.hidden)("layout",i.formLayout)("model",t)("templates",i.templates)("asBootstrapFormGroup",!0)}}let d=(()=>{class t extends o.x{constructor(t,e){super(t,e),this.blur=new n.EventEmitter,this.change=new n.EventEmitter,this.focus=new n.EventEmitter,this.ngbEvent=new n.EventEmitter}}return t.\u0275fac=function(e){return new(e||t)(n["\u0275\u0275directiveInject"](n.ChangeDetectorRef),n["\u0275\u0275directiveInject"](o.y))},t.\u0275cmp=n["\u0275\u0275defineComponent"]({type:t,selectors:[["ds-dynamic-form"]],contentQueries:function(t,e,i){if(1&t&&n["\u0275\u0275contentQuery"](i,o.O,0),2&t){let t;n["\u0275\u0275queryRefresh"](t=n["\u0275\u0275loadQuery"]())&&(e.templates=t)}},viewQuery:function(t,e){if(1&t&&n["\u0275\u0275viewQuery"](s.a,1),2&t){let t;n["\u0275\u0275queryRefresh"](t=n["\u0275\u0275loadQuery"]())&&(e.components=t)}},inputs:{formId:"formId",formGroup:"formGroup",formModel:"formModel",formLayout:"formLayout"},outputs:{blur:"dfBlur",change:"dfChange",focus:"dfFocus",ngbEvent:"ngbEvent"},features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:2,vars:2,consts:[[3,"formId","group","hasErrorMessaging","hidden","layout","model","templates","asBootstrapFormGroup","dfBlur","dfChange","dfFocus","ngbEvent",4,"ngFor","ngForOf","ngForTrackBy"],[3,"formId","group","hasErrorMessaging","hidden","layout","model","templates","asBootstrapFormGroup","dfBlur","dfChange","dfFocus","ngbEvent"]],template:function(t,e){1&t&&(n["\u0275\u0275template"](0,l,1,8,"ds-dynamic-form-control-container",0),n["\u0275\u0275text"](1,"\n")),2&t&&n["\u0275\u0275property"]("ngForOf",e.formModel)("ngForTrackBy",e.trackByFn)},directives:[a.o,s.a],encapsulation:2}),t})();i("ZO65"),i("0pnk"),i("sw+l"),i("1Pbu"),i("bPV6"),i("Gu/b"),i("A/iK"),i("KKO+"),i("Ysrn");var c=i("tqJZ"),m=i("ZTun"),u=(i("uyTL"),i("Ui2r"),i("8HnP"),i("zVKZ"),i("PCNd")),p=i("sYmb"),h=i("kMeL"),f=(i("yXJd"),i("/Vzl"),i("zGzN"),i("xjoE"),i("n7Wa")),b=i("3Pt+"),g=i("5+WD");let I=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=n["\u0275\u0275defineInjector"]({providers:[{provide:o.c,useValue:s.b}],imports:[[a.c,o.I,f.a,h.a,u.a,p.c]]}),t})();n["\u0275\u0275setComponentScope"](c.a,[b.NgControlStatusGroup,b.FormGroupDirective,b.FormGroupName,a.m,a.o,s.a],[]),n["\u0275\u0275setComponentScope"](m.a,[b.NgControlStatusGroup,b.FormGroupDirective,b.FormArrayName,a.m,g.c,a.o,g.a,g.b,b.FormGroupName,a.t,s.a],[]),n["\u0275\u0275setComponentScope"](r.a,[b["\u0275angular_packages_forms_forms_ba"],b.NgControlStatusGroup,b.FormGroupDirective,d,o.O,a.p],[p.d,a.b])},mOAm:function(t,e,i){"use strict";i.d(e,"a",(function(){return r})),i.d(e,"b",(function(){return o}));var n=i("zZO8"),a=i("TVZh");const r="groups";function o(t){return new n.a(Object(a.m)(),r,t).toString()}}}]);
//# sourceMappingURL=12-es2015.443bcb59f3f0693c4113.js.map