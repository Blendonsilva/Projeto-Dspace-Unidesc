(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"0TMo":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("HENg"),a=n("lJxs");class r extends i.a{getFeatureIDs(e,t){return this.getFeatureID(e,t).pipe(Object(a.a)(e=>[e]))}}},"0qhl":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("fXoL");let a=(()=>{class e{canActivate(e,t){return e.data={title:e.params.configuration+".search.title"},!0}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e})()},"4vdZ":function(e,t,n){"use strict";n.d(t,"a",(function(){return F}));var i=n("fXoL"),a=n("LvDl"),r=n("SxV6"),s=n("eIep"),o=n("1QIV"),c=n("cBt8"),l=n("GsQf"),d=n("J3qs"),p=n("ac5F"),u=n("X8f1");class m{constructor(e,t){this.op=e,this.field=t}}let b=(()=>{class e extends m{constructor(t,n){super(e.operationType,t),this.value=n}toOperation(){return{op:this.op,path:`/metadata/${this.field}/-`,value:this.value}}}return e.operationType="add",e})(),h=(()=>{class e extends m{constructor(t,n){super(e.operationType,t),this.place=n}toOperation(){return{op:this.op,path:`/metadata/${this.field}/${this.place}`}}}return e.operationType="remove",e})(),f=(()=>{class e extends m{constructor(t,n,i){super(e.operationType,t),this.place=n,this.value=i}toOperation(){return{op:this.op,path:`/metadata/${this.field}/${this.place}`,value:this.value}}}return e.operationType="replace",e})(),g=(()=>{class e{fieldUpdatesToPatchOperations(e){const t=this.fieldUpdatesToMetadataPatchOperations(e),n=new Map,i=[];return t.forEach(e=>{e.op!==h.operationType&&e.op!==f.operationType||!Object(d.b)(e.place)||n.has(e.field)&&n.get(e.field).forEach(t=>{t<e.place&&e.place--}),e.op===h.operationType&&Object(d.b)(e.place)&&(n.has(e.field)||n.set(e.field,[]),n.get(e.field).push(e.place)),i.push(e.toOperation())}),i}fieldUpdatesToMetadataPatchOperations(e){const t=[];return Object.keys(e).forEach(n=>{const i=e[n],a=i.field,r={value:a.value,language:a.language};let s;switch(i.changeType){case u.c.ADD:s=new b(a.key,[r]);break;case u.c.REMOVE:s=new h(a.key,a.place);break;case u.c.UPDATE:s=new f(a.key,a.place,r)}t.push(s)}),t}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var v=n("iqTE"),x=n("loKC"),y=n("tyNb"),j=n("lI3o"),S=n("sYmb"),O=n("ofXK"),I=n("mo41"),C=n("VYMa"),w=n("snSO");function E(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",14),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().reinstate()})),i["\u0275\u0275element"](1,"i",15),i["\u0275\u0275text"](2,"\n      "),i["\u0275\u0275elementStart"](3,"span",4),i["\u0275\u0275text"](4),i["\u0275\u0275pipe"](5,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](6,"\n    "),i["\u0275\u0275elementEnd"]()}2&e&&(i["\u0275\u0275advance"](4),i["\u0275\u0275textInterpolate1"]("\xa0",i["\u0275\u0275pipeBind1"](5,1,"item.edit.metadata.reinstate-button"),""))}function k(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",16),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().discard()})),i["\u0275\u0275pipe"](1,"async"),i["\u0275\u0275element"](2,"i",17),i["\u0275\u0275text"](3,"\n      "),i["\u0275\u0275elementStart"](4,"span",4),i["\u0275\u0275text"](5),i["\u0275\u0275pipe"](6,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](7,"\n    "),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("disabled",!i["\u0275\u0275pipeBind1"](1,2,e.hasChanges())),i["\u0275\u0275advance"](5),i["\u0275\u0275textInterpolate1"]("\xa0",i["\u0275\u0275pipeBind1"](6,4,"item.edit.metadata.discard-button"),"")}}const M=function(){return{}},B=function(e,t,n){return{"table-warning":e,"table-danger":t,"table-success":n}};function V(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"tr",24),i["\u0275\u0275text"](1,"\n\n    "),i["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=i["\u0275\u0275nextContext"](2);i["\u0275\u0275property"]("fieldUpdate",e||i["\u0275\u0275pureFunction0"](3,M))("url",n.url)("ngClass",i["\u0275\u0275pureFunction3"](4,B,0===e.changeType,2===e.changeType,1===e.changeType))}}function $(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"table",18),i["\u0275\u0275text"](1,"\n    "),i["\u0275\u0275elementStart"](2,"thead"),i["\u0275\u0275text"](3,"\n    "),i["\u0275\u0275elementStart"](4,"tr"),i["\u0275\u0275text"](5,"\n      "),i["\u0275\u0275elementStart"](6,"th"),i["\u0275\u0275elementStart"](7,"span",19),i["\u0275\u0275text"](8),i["\u0275\u0275pipe"](9,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](10,"\n      "),i["\u0275\u0275elementStart"](11,"th"),i["\u0275\u0275elementStart"](12,"span",20),i["\u0275\u0275text"](13),i["\u0275\u0275pipe"](14,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](15,"\n      "),i["\u0275\u0275elementStart"](16,"th",21),i["\u0275\u0275elementStart"](17,"span",22),i["\u0275\u0275text"](18),i["\u0275\u0275pipe"](19,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](20,"\n      "),i["\u0275\u0275elementStart"](21,"th",21),i["\u0275\u0275text"](22),i["\u0275\u0275pipe"](23,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](24,"\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](25,"\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](26,"\n    "),i["\u0275\u0275elementStart"](27,"tbody"),i["\u0275\u0275text"](28,"\n    "),i["\u0275\u0275template"](29,V,2,8,"tr",23),i["\u0275\u0275pipe"](30,"dsObjectValues"),i["\u0275\u0275pipe"](31,"async"),i["\u0275\u0275text"](32,"\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](33,"\n  "),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](8),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](9,6,"item.edit.metadata.headers.field")),i["\u0275\u0275advance"](5),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](14,8,"item.edit.metadata.headers.value")),i["\u0275\u0275advance"](5),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](19,10,"item.edit.metadata.headers.language")),i["\u0275\u0275advance"](4),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](23,12,"item.edit.metadata.headers.edit")),i["\u0275\u0275advance"](7),i["\u0275\u0275property"]("ngForOf",i["\u0275\u0275pipeBind1"](30,14,i["\u0275\u0275pipeBind1"](31,16,e.updates$)))("ngForTrackBy",e.trackUpdate)}}function R(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275text"](1,"\n    "),i["\u0275\u0275element"](2,"ds-alert",25),i["\u0275\u0275text"](3,"\n  "),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("content","item.edit.metadata.empty")("type",e.AlertTypeEnum.Info)}}function P(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",14),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().reinstate()})),i["\u0275\u0275element"](1,"i",15),i["\u0275\u0275text"](2),i["\u0275\u0275pipe"](3,"translate"),i["\u0275\u0275elementEnd"]()}2&e&&(i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](3,1,"item.edit.metadata.reinstate-button"),"\n      "))}function T(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",16),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().discard()})),i["\u0275\u0275pipe"](1,"async"),i["\u0275\u0275element"](2,"i",17),i["\u0275\u0275text"](3),i["\u0275\u0275pipe"](4,"translate"),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("disabled",!i["\u0275\u0275pipeBind1"](1,2,e.hasChanges())),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](4,4,"item.edit.metadata.discard-button"),"\n      ")}}let F=(()=>{class e extends l.a{constructor(e,t,n,i,a,r){super(e,t,n,i,a,r),this.itemService=e,this.objectUpdatesService=t,this.router=n,this.notificationsService=i,this.translateService=a,this.route=r,this.AlertTypeEnum=p.a}ngOnInit(){super.ngOnInit(),Object(d.a)(this.updateService)&&(this.updateService=this.itemService)}initializeUpdates(){this.updates$=this.objectUpdatesService.getFieldUpdates(this.url,this.item.metadataAsList)}initializeNotificationsPrefix(){this.notificationsPrefix="item.edit.metadata.notifications."}add(e=new c.d){this.objectUpdatesService.saveAddFieldUpdate(this.url,e)}initializeOriginalFields(){this.objectUpdatesService.initialize(this.url,this.item.metadataAsList,this.item.lastModified,g)}submit(){this.isValid().pipe(Object(r.a)()).subscribe(e=>{e?this.objectUpdatesService.createPatch(this.url).pipe(Object(r.a)(),Object(s.a)(e=>this.updateService.patch(this.item,e).pipe(Object(o.g)()))).subscribe(e=>{e.hasFailed?this.notificationsService.error(this.getNotificationTitle("error"),e.errorMessage):(this.item=e.payload,this.checkAndFixMetadataUUIDs(),this.initializeOriginalFields(),this.updates$=this.objectUpdatesService.getFieldUpdates(this.url,this.item.metadataAsList),this.notificationsService.success(this.getNotificationTitle("saved"),this.getNotificationContent("saved")))}):this.notificationsService.error(this.getNotificationTitle("invalid"),this.getNotificationContent("invalid"))})}checkAndFixMetadataUUIDs(){const e=Object(a.cloneDeep)(this.item.metadata);Object.keys(this.item.metadata).forEach(t=>{e[t]=this.item.metadata[t].map(e=>Object(d.b)(e.uuid)?e:Object.assign(new c.c,e))}),this.item.metadata=e}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](v.a),i["\u0275\u0275directiveInject"](x.a),i["\u0275\u0275directiveInject"](y.h),i["\u0275\u0275directiveInject"](j.a),i["\u0275\u0275directiveInject"](S.e),i["\u0275\u0275directiveInject"](y.a))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-item-metadata"]],inputs:{updateService:"updateService"},features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:56,vars:39,consts:[[1,"item-metadata"],[1,"button-row","top","d-flex","mb-2"],[1,"mr-auto","btn","btn-success",3,"click"],[1,"fas","fa-plus"],[1,"d-none","d-sm-inline"],["class","btn btn-warning",3,"click",4,"ngIf"],[1,"btn","btn-primary",3,"disabled","click"],[1,"fas","fa-save"],["class","btn btn-danger",3,"disabled","click",4,"ngIf"],["class","table table-responsive table-striped table-bordered",4,"ngIf"],[4,"ngIf"],[1,"button-row","bottom"],[1,"mt-2","float-right"],[1,"btn","btn-primary","mr-0",3,"disabled","click"],[1,"btn","btn-warning",3,"click"],[1,"fas","fa-undo-alt"],[1,"btn","btn-danger",3,"disabled","click"],[1,"fas","fa-times"],[1,"table","table-responsive","table-striped","table-bordered"],["id","fieldName"],["id","fieldValue"],[1,"text-center"],["id","fieldLang"],["ds-edit-in-place-field","",3,"fieldUpdate","url","ngClass",4,"ngFor","ngForOf","ngForTrackBy"],["ds-edit-in-place-field","",3,"fieldUpdate","url","ngClass"],[3,"content","type"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275text"](1,"\n  "),i["\u0275\u0275elementStart"](2,"div",1),i["\u0275\u0275text"](3,"\n    "),i["\u0275\u0275elementStart"](4,"button",2),i["\u0275\u0275listener"]("click",(function(){return t.add()})),i["\u0275\u0275element"](5,"i",3),i["\u0275\u0275text"](6,"\n      "),i["\u0275\u0275elementStart"](7,"span",4),i["\u0275\u0275text"](8),i["\u0275\u0275pipe"](9,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](10,"\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](11,"\n    "),i["\u0275\u0275template"](12,E,7,3,"button",5),i["\u0275\u0275pipe"](13,"async"),i["\u0275\u0275text"](14,"\n    "),i["\u0275\u0275elementStart"](15,"button",6),i["\u0275\u0275listener"]("click",(function(){return t.submit()})),i["\u0275\u0275pipe"](16,"async"),i["\u0275\u0275pipe"](17,"async"),i["\u0275\u0275element"](18,"i",7),i["\u0275\u0275text"](19,"\n      "),i["\u0275\u0275elementStart"](20,"span",4),i["\u0275\u0275text"](21),i["\u0275\u0275pipe"](22,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](23,"\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](24,"\n    "),i["\u0275\u0275template"](25,k,8,6,"button",8),i["\u0275\u0275pipe"](26,"async"),i["\u0275\u0275text"](27,"\n  "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](28,"\n  "),i["\u0275\u0275template"](29,$,34,18,"table",9),i["\u0275\u0275pipe"](30,"dsObjectValues"),i["\u0275\u0275pipe"](31,"async"),i["\u0275\u0275text"](32,"\n  "),i["\u0275\u0275template"](33,R,4,2,"div",10),i["\u0275\u0275pipe"](34,"dsObjectValues"),i["\u0275\u0275pipe"](35,"async"),i["\u0275\u0275text"](36,"\n  "),i["\u0275\u0275elementStart"](37,"div",11),i["\u0275\u0275text"](38,"\n    "),i["\u0275\u0275elementStart"](39,"div",12),i["\u0275\u0275text"](40,"\n      "),i["\u0275\u0275template"](41,P,4,3,"button",5),i["\u0275\u0275pipe"](42,"async"),i["\u0275\u0275text"](43,"\n      "),i["\u0275\u0275elementStart"](44,"button",13),i["\u0275\u0275listener"]("click",(function(){return t.submit()})),i["\u0275\u0275pipe"](45,"async"),i["\u0275\u0275element"](46,"i",7),i["\u0275\u0275text"](47),i["\u0275\u0275pipe"](48,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](49,"\n      "),i["\u0275\u0275template"](50,T,5,6,"button",8),i["\u0275\u0275pipe"](51,"async"),i["\u0275\u0275text"](52,"\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](53,"\n  "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](54,"\n"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](55,"\n")),2&e&&(i["\u0275\u0275advance"](8),i["\u0275\u0275textInterpolate1"]("\xa0",i["\u0275\u0275pipeBind1"](9,11,"item.edit.metadata.add-button"),""),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("ngIf",i["\u0275\u0275pipeBind1"](13,13,t.isReinstatable())),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("disabled",!i["\u0275\u0275pipeBind1"](16,15,t.hasChanges())||!i["\u0275\u0275pipeBind1"](17,17,t.isValid())),i["\u0275\u0275advance"](6),i["\u0275\u0275textInterpolate1"]("\xa0",i["\u0275\u0275pipeBind1"](22,19,"item.edit.metadata.save-button"),""),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("ngIf",!i["\u0275\u0275pipeBind1"](26,21,t.isReinstatable())),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("ngIf",i["\u0275\u0275pipeBind1"](30,23,i["\u0275\u0275pipeBind1"](31,25,t.updates$)).length>0),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("ngIf",0==i["\u0275\u0275pipeBind1"](34,27,i["\u0275\u0275pipeBind1"](35,29,t.updates$)).length),i["\u0275\u0275advance"](8),i["\u0275\u0275property"]("ngIf",i["\u0275\u0275pipeBind1"](42,31,t.isReinstatable())),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("disabled",!i["\u0275\u0275pipeBind1"](45,33,t.hasChanges())),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](48,35,"item.edit.metadata.save-button"),"\n      "),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",!i["\u0275\u0275pipeBind1"](51,37,t.isReinstatable())))},directives:[O.p,O.o,I.a,O.m,C.a],pipes:[S.d,O.b,w.a],styles:[".button-row[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-right:calc(.5 * var(--bs-spacer))}.button-row[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:last-child{margin-right:0}@media screen and (min-width:576px){.button-row[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{min-width:var(--ds-edit-item-button-min-width)}}.button-row.top[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-top:calc(var(--bs-spacer) / 2);margin-bottom:calc(var(--bs-spacer) / 2)}"]}),e})()},"8jtY":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("WL0R");const a={RESOLVED:Object(i.a)("dspace/resolver/RESOLVED")};class r{constructor(e,t){this.type=a.RESOLVED,this.payload={url:e,dso:t}}}},"920W":function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var i=n("fXoL"),a=n("0TMo"),r=n("LRne"),s=n("FU+A"),o=n("z3/6"),c=n("1mcE"),l=n("tyNb"),d=n("Vurf");let p=(()=>{class e extends a.a{constructor(e,t,n,i){super(e,t,n,i),this.resolver=e,this.authorizationService=t,this.router=n,this.authService=i}getFeatureID(e,t){return Object(r.a)(s.a.AdministratorOf)}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275inject"](o.a),i["\u0275\u0275inject"](c.a),i["\u0275\u0275inject"](l.h),i["\u0275\u0275inject"](d.a))},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},A0IO:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("fXoL"),a=n("J3qs"),r=n("q5u1"),s=n("tv3Y");let o=(()=>{class e{constructor(e){this.breadcrumbService=e}resolve(e,t){const n=e.data.breadcrumbKey;if(Object(a.a)(n))throw new Error('You provided an i18nBreadcrumbResolver for url "'+e.url+"\" but no breadcrumbKey in the route's data");const i=Object(r.b)(e);return{provider:this.breadcrumbService,key:n,url:i}}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275inject"](s.a))},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},BZkK:function(e,t,n){"use strict";n.r(t),n.d(t,"EditItemPageModule",(function(){return fi}));var i=n("fXoL"),a=n("ofXK"),r=n("1kSV"),s=n("PCNd"),o=n("tyNb"),c=n("mEo1"),l=n("LRne"),d=n("itXk"),p=n("lJxs"),u=n("J3qs"),m=n("Xioo"),b=n("sYmb");const h=function(e){return{active:e}},f=function(e){return[e]};function g(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"a",17),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]().$implicit,t=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("ngClass",i["\u0275\u0275pureFunction1"](5,h,e.page===t.currentPage))("routerLink",i["\u0275\u0275pureFunction1"](7,f,"./"+e.page)),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"]("\n                            ",i["\u0275\u0275pipeBind1"](2,3,"item.edit.tabs."+e.page+".head"),"\n                        ")}}function v(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"button",18),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]().$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"]("\n                                ",i["\u0275\u0275pipeBind1"](2,1,"item.edit.tabs."+e.page+".head"),"\n                            ")}}function x(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"li",13),i["\u0275\u0275text"](1,"\n                        "),i["\u0275\u0275template"](2,g,3,9,"a",14),i["\u0275\u0275pipe"](3,"async"),i["\u0275\u0275text"](4,"\n                        "),i["\u0275\u0275elementStart"](5,"span",15),i["\u0275\u0275pipe"](6,"translate"),i["\u0275\u0275text"](7,"\n                            "),i["\u0275\u0275template"](8,v,3,3,"button",16),i["\u0275\u0275pipe"](9,"async"),i["\u0275\u0275text"](10,"\n                        "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](11,"\n                    "),i["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",i["\u0275\u0275pipeBind1"](3,3,e.enabled)),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngbTooltip",i["\u0275\u0275pipeBind1"](6,5,"item.edit.tabs.disabled.tooltip")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",!i["\u0275\u0275pipeBind1"](9,7,e.enabled))}}let y=(()=>{class e{constructor(e,t,n){this.route=e,this.router=t,this.injector=n,this.router.events.subscribe(()=>this.initPageParamsByRoute())}ngOnInit(){this.initPageParamsByRoute(),this.pages=this.route.routeConfig.children.filter(e=>Object(u.e)(e.path)).map(e=>{let t=Object(l.a)(!0);return Object(u.e)(e.canActivate)&&(t=Object(d.a)(e.canActivate.map(e=>this.injector.get(e).canActivate(this.route.snapshot,this.router.routerState.snapshot))).pipe(Object(p.a)(e=>e.every(e=>!0===e)))),{page:e.path,enabled:t}}),this.itemRD$=this.route.data.pipe(Object(p.a)(e=>e.dso))}getItemPage(e){return Object(m.h)(e)}initPageParamsByRoute(){this.currentPage=this.route.snapshot.firstChild.routeConfig.path}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](o.a),i["\u0275\u0275directiveInject"](o.h),i["\u0275\u0275directiveInject"](i.Injector))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-edit-item-page"]],decls:41,vars:10,consts:[[1,"container"],[1,"row"],[1,"col-12"],[1,"border-bottom"],[1,"pt-2"],[1,"nav","nav-tabs","justify-content-start"],["class","nav-item",4,"ngFor","ngForOf"],[1,"tab-pane","active"],[1,"mb-4"],[1,"button-row","bottom"],[1,"text-right"],["role","button",1,"btn","btn-outline-secondary","mr-1",3,"routerLink"],[1,"fas","fa-arrow-left"],[1,"nav-item"],["class","nav-link",3,"ngClass","routerLink",4,"ngIf"],[3,"ngbTooltip"],["class","nav-link disabled",4,"ngIf"],[1,"nav-link",3,"ngClass","routerLink"],[1,"nav-link","disabled"]],template:function(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275text"](1,"\n    "),i["\u0275\u0275elementStart"](2,"div",1),i["\u0275\u0275text"](3,"\n        "),i["\u0275\u0275elementStart"](4,"div",2),i["\u0275\u0275text"](5,"\n            "),i["\u0275\u0275elementStart"](6,"h2",3),i["\u0275\u0275text"](7),i["\u0275\u0275pipe"](8,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](9,"\n            "),i["\u0275\u0275elementStart"](10,"div",4),i["\u0275\u0275text"](11,"\n                "),i["\u0275\u0275elementStart"](12,"ul",5),i["\u0275\u0275text"](13,"\n                    "),i["\u0275\u0275template"](14,x,12,9,"li",6),i["\u0275\u0275text"](15,"\n                "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](16,"\n                "),i["\u0275\u0275elementStart"](17,"div",7),i["\u0275\u0275text"](18,"\n                    "),i["\u0275\u0275elementStart"](19,"div",8),i["\u0275\u0275text"](20,"\n                        "),i["\u0275\u0275element"](21,"router-outlet"),i["\u0275\u0275text"](22,"\n                    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](23,"\n                    "),i["\u0275\u0275elementStart"](24,"div",9),i["\u0275\u0275text"](25,"\n                      "),i["\u0275\u0275elementStart"](26,"div",10),i["\u0275\u0275text"](27,"\n                        "),i["\u0275\u0275elementStart"](28,"a",11),i["\u0275\u0275pipe"](29,"async"),i["\u0275\u0275element"](30,"i",12),i["\u0275\u0275text"](31),i["\u0275\u0275pipe"](32,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](33,"\n                      "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](34,"\n                    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](35,"\n                "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](36,"\n            "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](37,"\n        "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](38,"\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](39,"\n"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](40,"\n")),2&e){let e=null;i["\u0275\u0275advance"](7),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](8,4,"item.edit.head")),i["\u0275\u0275advance"](7),i["\u0275\u0275property"]("ngForOf",t.pages),i["\u0275\u0275advance"](14),i["\u0275\u0275property"]("routerLink",t.getItemPage(null==(e=i["\u0275\u0275pipeBind1"](29,6,t.itemRD$))?null:e.payload)),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](32,8,"item.edit.return"),"")}},directives:[a.o,o.m,o.k,a.p,r.O,a.m],pipes:[b.d,a.b],encapsulation:2,data:{animation:[c.a,c.c]},changeDetection:0}),e})();var j=n("1QIV"),S=n("SxV6"),O=n("lI3o"),I=n("iqTE"),C=n("aCx6");const w=function(e){return{id:e}},E=function(e){return[e,"edit"]};let k=(()=>{class e{constructor(e,t,n,i,a){this.route=e,this.router=t,this.notificationsService=n,this.itemDataService=i,this.translateService=a}ngOnInit(){this.itemRD$=this.route.data.pipe(Object(p.a)(e=>e.dso),Object(j.i)()),this.itemRD$.pipe(Object(S.a)()).subscribe(e=>{this.item=e.payload,this.itemPageRoute=Object(m.h)(this.item)}),this.confirmMessage="item.edit."+this.messageKey+".confirm",this.cancelMessage="item.edit."+this.messageKey+".cancel",this.headerMessage="item.edit."+this.messageKey+".header",this.descriptionMessage="item.edit."+this.messageKey+".description"}performAction(){}processRestResponse(e){var t;e.hasSucceeded?this.itemDataService.findById(this.item.id).pipe((t=this.predicate,e=>e.pipe(Object(j.c)(),Object(S.a)(t)))).subscribe(()=>{this.notificationsService.success(this.translateService.get("item.edit."+this.messageKey+".success")),this.router.navigate([Object(m.e)(this.item)])}):(this.notificationsService.error(this.translateService.get("item.edit."+this.messageKey+".error")),this.router.navigate([Object(m.e)(this.item)]))}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](o.a),i["\u0275\u0275directiveInject"](o.h),i["\u0275\u0275directiveInject"](O.a),i["\u0275\u0275directiveInject"](I.a),i["\u0275\u0275directiveInject"](b.e))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-simple-action"]],decls:27,vars:19,consts:[[1,"container"],[1,"row"],[1,"col-12"],[3,"item"],[1,"btn","btn-outline-secondary","perform-action",3,"click"],[1,"btn","btn-outline-secondary","cancel",3,"routerLink"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275text"](1,"\n    "),i["\u0275\u0275elementStart"](2,"div",1),i["\u0275\u0275text"](3,"\n        "),i["\u0275\u0275elementStart"](4,"div",2),i["\u0275\u0275text"](5,"\n            "),i["\u0275\u0275elementStart"](6,"h2"),i["\u0275\u0275text"](7),i["\u0275\u0275pipe"](8,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](9,"\n            "),i["\u0275\u0275elementStart"](10,"p"),i["\u0275\u0275text"](11),i["\u0275\u0275pipe"](12,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](13,"\n            "),i["\u0275\u0275element"](14,"ds-modify-item-overview",3),i["\u0275\u0275text"](15,"\n            "),i["\u0275\u0275elementStart"](16,"button",4),i["\u0275\u0275listener"]("click",(function(){return t.performAction()})),i["\u0275\u0275text"](17),i["\u0275\u0275pipe"](18,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](19,"\n            "),i["\u0275\u0275elementStart"](20,"button",5),i["\u0275\u0275text"](21),i["\u0275\u0275pipe"](22,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](23,"\n\n        "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](24,"\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](25,"\n\n"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](26,"\n")),2&e&&(i["\u0275\u0275advance"](7),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind2"](8,6,t.headerMessage,i["\u0275\u0275pureFunction1"](15,w,t.item.handle))),i["\u0275\u0275advance"](4),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](12,9,t.descriptionMessage)),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("item",t.item),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate1"]("",i["\u0275\u0275pipeBind1"](18,11,t.confirmMessage),"\n            "),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("routerLink",i["\u0275\u0275pureFunction1"](17,E,t.itemPageRoute)),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"]("\n                ",i["\u0275\u0275pipeBind1"](22,13,t.cancelMessage),"\n            "))},directives:[C.a,o.i],pipes:[b.d],encapsulation:2}),e})();const M=function(e){return{id:e}},B=function(e){return[e,"edit"]};let V=(()=>{class e extends k{constructor(e,t,n,i,a){super(e,t,n,i,a),this.route=e,this.router=t,this.notificationsService=n,this.itemDataService=i,this.translateService=a,this.messageKey="withdraw",this.predicate=e=>e.payload.isWithdrawn}performAction(){this.itemDataService.setWithDrawn(this.item,!0).pipe(Object(j.g)()).subscribe(e=>{this.processRestResponse(e)})}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](o.a),i["\u0275\u0275directiveInject"](o.h),i["\u0275\u0275directiveInject"](O.a),i["\u0275\u0275directiveInject"](I.a),i["\u0275\u0275directiveInject"](b.e))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-item-withdraw"]],features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:27,vars:19,consts:[[1,"container"],[1,"row"],[1,"col-12"],[3,"item"],[1,"btn","btn-outline-secondary","perform-action",3,"click"],[1,"btn","btn-outline-secondary","cancel",3,"routerLink"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275text"](1,"\n    "),i["\u0275\u0275elementStart"](2,"div",1),i["\u0275\u0275text"](3,"\n        "),i["\u0275\u0275elementStart"](4,"div",2),i["\u0275\u0275text"](5,"\n            "),i["\u0275\u0275elementStart"](6,"h2"),i["\u0275\u0275text"](7),i["\u0275\u0275pipe"](8,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](9,"\n            "),i["\u0275\u0275elementStart"](10,"p"),i["\u0275\u0275text"](11),i["\u0275\u0275pipe"](12,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](13,"\n            "),i["\u0275\u0275element"](14,"ds-modify-item-overview",3),i["\u0275\u0275text"](15,"\n            "),i["\u0275\u0275elementStart"](16,"button",4),i["\u0275\u0275listener"]("click",(function(){return t.performAction()})),i["\u0275\u0275text"](17),i["\u0275\u0275pipe"](18,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](19,"\n            "),i["\u0275\u0275elementStart"](20,"button",5),i["\u0275\u0275text"](21),i["\u0275\u0275pipe"](22,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](23,"\n\n        "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](24,"\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](25,"\n\n"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](26,"\n")),2&e&&(i["\u0275\u0275advance"](7),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind2"](8,6,t.headerMessage,i["\u0275\u0275pureFunction1"](15,M,t.item.handle))),i["\u0275\u0275advance"](4),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](12,9,t.descriptionMessage)),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("item",t.item),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate1"]("",i["\u0275\u0275pipeBind1"](18,11,t.confirmMessage),"\n            "),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("routerLink",i["\u0275\u0275pureFunction1"](17,B,t.itemPageRoute)),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"]("\n                ",i["\u0275\u0275pipeBind1"](22,13,t.cancelMessage),"\n            "))},directives:[C.a,o.i],pipes:[b.d],encapsulation:2}),e})();const $=function(e){return{id:e}},R=function(e){return[e,"edit"]};let P=(()=>{class e extends k{constructor(e,t,n,i,a){super(e,t,n,i,a),this.route=e,this.router=t,this.notificationsService=n,this.itemDataService=i,this.translateService=a,this.messageKey="reinstate",this.predicate=e=>!e.payload.isWithdrawn}performAction(){this.itemDataService.setWithDrawn(this.item,!1).pipe(Object(j.g)()).subscribe(e=>{this.processRestResponse(e)})}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](o.a),i["\u0275\u0275directiveInject"](o.h),i["\u0275\u0275directiveInject"](O.a),i["\u0275\u0275directiveInject"](I.a),i["\u0275\u0275directiveInject"](b.e))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-item-reinstate"]],features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:27,vars:19,consts:[[1,"container"],[1,"row"],[1,"col-12"],[3,"item"],[1,"btn","btn-outline-secondary","perform-action",3,"click"],[1,"btn","btn-outline-secondary","cancel",3,"routerLink"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275text"](1,"\n    "),i["\u0275\u0275elementStart"](2,"div",1),i["\u0275\u0275text"](3,"\n        "),i["\u0275\u0275elementStart"](4,"div",2),i["\u0275\u0275text"](5,"\n            "),i["\u0275\u0275elementStart"](6,"h2"),i["\u0275\u0275text"](7),i["\u0275\u0275pipe"](8,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](9,"\n            "),i["\u0275\u0275elementStart"](10,"p"),i["\u0275\u0275text"](11),i["\u0275\u0275pipe"](12,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](13,"\n            "),i["\u0275\u0275element"](14,"ds-modify-item-overview",3),i["\u0275\u0275text"](15,"\n            "),i["\u0275\u0275elementStart"](16,"button",4),i["\u0275\u0275listener"]("click",(function(){return t.performAction()})),i["\u0275\u0275text"](17),i["\u0275\u0275pipe"](18,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](19,"\n            "),i["\u0275\u0275elementStart"](20,"button",5),i["\u0275\u0275text"](21),i["\u0275\u0275pipe"](22,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](23,"\n\n        "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](24,"\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](25,"\n\n"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](26,"\n")),2&e&&(i["\u0275\u0275advance"](7),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind2"](8,6,t.headerMessage,i["\u0275\u0275pureFunction1"](15,$,t.item.handle))),i["\u0275\u0275advance"](4),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](12,9,t.descriptionMessage)),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("item",t.item),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate1"]("",i["\u0275\u0275pipeBind1"](18,11,t.confirmMessage),"\n            "),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("routerLink",i["\u0275\u0275pureFunction1"](17,R,t.itemPageRoute)),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"]("\n                ",i["\u0275\u0275pipeBind1"](22,13,t.cancelMessage),"\n            "))},directives:[C.a,o.i],pipes:[b.d],encapsulation:2}),e})();const T=function(e){return{id:e}},F=function(e){return[e,"edit"]};let D=(()=>{class e extends k{constructor(e,t,n,i,a){super(e,t,n,i,a),this.route=e,this.router=t,this.notificationsService=n,this.itemDataService=i,this.translateService=a,this.messageKey="private",this.predicate=e=>!e.payload.isDiscoverable}performAction(){this.itemDataService.setDiscoverable(this.item,!1).pipe(Object(j.g)()).subscribe(e=>{this.processRestResponse(e)})}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](o.a),i["\u0275\u0275directiveInject"](o.h),i["\u0275\u0275directiveInject"](O.a),i["\u0275\u0275directiveInject"](I.a),i["\u0275\u0275directiveInject"](b.e))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-item-private"]],features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:27,vars:19,consts:[[1,"container"],[1,"row"],[1,"col-12"],[3,"item"],[1,"btn","btn-outline-secondary","perform-action",3,"click"],[1,"btn","btn-outline-secondary","cancel",3,"routerLink"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275text"](1,"\n    "),i["\u0275\u0275elementStart"](2,"div",1),i["\u0275\u0275text"](3,"\n        "),i["\u0275\u0275elementStart"](4,"div",2),i["\u0275\u0275text"](5,"\n            "),i["\u0275\u0275elementStart"](6,"h2"),i["\u0275\u0275text"](7),i["\u0275\u0275pipe"](8,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](9,"\n            "),i["\u0275\u0275elementStart"](10,"p"),i["\u0275\u0275text"](11),i["\u0275\u0275pipe"](12,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](13,"\n            "),i["\u0275\u0275element"](14,"ds-modify-item-overview",3),i["\u0275\u0275text"](15,"\n            "),i["\u0275\u0275elementStart"](16,"button",4),i["\u0275\u0275listener"]("click",(function(){return t.performAction()})),i["\u0275\u0275text"](17),i["\u0275\u0275pipe"](18,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](19,"\n            "),i["\u0275\u0275elementStart"](20,"button",5),i["\u0275\u0275text"](21),i["\u0275\u0275pipe"](22,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](23,"\n\n        "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](24,"\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](25,"\n\n"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](26,"\n")),2&e&&(i["\u0275\u0275advance"](7),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind2"](8,6,t.headerMessage,i["\u0275\u0275pureFunction1"](15,T,t.item.handle))),i["\u0275\u0275advance"](4),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](12,9,t.descriptionMessage)),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("item",t.item),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate1"]("",i["\u0275\u0275pipeBind1"](18,11,t.confirmMessage),"\n            "),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("routerLink",i["\u0275\u0275pureFunction1"](17,F,t.itemPageRoute)),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"]("\n                ",i["\u0275\u0275pipeBind1"](22,13,t.cancelMessage),"\n            "))},directives:[C.a,o.i],pipes:[b.d],encapsulation:2}),e})();const U=function(e){return{id:e}},z=function(e){return[e,"edit"]};let L=(()=>{class e extends k{constructor(e,t,n,i,a){super(e,t,n,i,a),this.route=e,this.router=t,this.notificationsService=n,this.itemDataService=i,this.translateService=a,this.messageKey="public",this.predicate=e=>e.payload.isDiscoverable}performAction(){this.itemDataService.setDiscoverable(this.item,!0).pipe(Object(j.g)()).subscribe(e=>{this.processRestResponse(e)})}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](o.a),i["\u0275\u0275directiveInject"](o.h),i["\u0275\u0275directiveInject"](O.a),i["\u0275\u0275directiveInject"](I.a),i["\u0275\u0275directiveInject"](b.e))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-item-public"]],features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:27,vars:19,consts:[[1,"container"],[1,"row"],[1,"col-12"],[3,"item"],[1,"btn","btn-outline-secondary","perform-action",3,"click"],[1,"btn","btn-outline-secondary","cancel",3,"routerLink"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275text"](1,"\n    "),i["\u0275\u0275elementStart"](2,"div",1),i["\u0275\u0275text"](3,"\n        "),i["\u0275\u0275elementStart"](4,"div",2),i["\u0275\u0275text"](5,"\n            "),i["\u0275\u0275elementStart"](6,"h2"),i["\u0275\u0275text"](7),i["\u0275\u0275pipe"](8,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](9,"\n            "),i["\u0275\u0275elementStart"](10,"p"),i["\u0275\u0275text"](11),i["\u0275\u0275pipe"](12,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](13,"\n            "),i["\u0275\u0275element"](14,"ds-modify-item-overview",3),i["\u0275\u0275text"](15,"\n            "),i["\u0275\u0275elementStart"](16,"button",4),i["\u0275\u0275listener"]("click",(function(){return t.performAction()})),i["\u0275\u0275text"](17),i["\u0275\u0275pipe"](18,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](19,"\n            "),i["\u0275\u0275elementStart"](20,"button",5),i["\u0275\u0275text"](21),i["\u0275\u0275pipe"](22,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](23,"\n\n        "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](24,"\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](25,"\n\n"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](26,"\n")),2&e&&(i["\u0275\u0275advance"](7),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind2"](8,6,t.headerMessage,i["\u0275\u0275pureFunction1"](15,U,t.item.handle))),i["\u0275\u0275advance"](4),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](12,9,t.descriptionMessage)),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("item",t.item),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate1"]("",i["\u0275\u0275pipeBind1"](18,11,t.confirmMessage),"\n            "),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("routerLink",i["\u0275\u0275pureFunction1"](17,z,t.itemPageRoute)),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"]("\n                ",i["\u0275\u0275pipeBind1"](22,13,t.cancelMessage),"\n            "))},directives:[C.a,o.i],pipes:[b.d],encapsulation:2}),e})();var _=n("eIep"),N=n("IzEk"),A=n("xbPD"),q=n("pLZG"),K=n("3jCq"),X=n("84Zn"),Q=n("7RJT"),W=n("loKC"),J=n("kN8A"),H=n("bxbP"),G=n("sfEo"),Y=n("O/5o"),Z=n("1aCu");function ee(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"ds-listable-object-component-loader",23),i["\u0275\u0275text"](1,"\n                                        "),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]().ngVar,t=i["\u0275\u0275nextContext"](6);i["\u0275\u0275property"]("object",e)("viewMode",t.viewMode)}}function te(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"ds-listable-object-component-loader",23),i["\u0275\u0275text"](1,"\n                                                    "),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"](2).ngVar,t=i["\u0275\u0275nextContext"](6);i["\u0275\u0275property"]("object",e)("viewMode",t.viewMode)}}function ne(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275text"](1,"\n                                                        "),i["\u0275\u0275elementStart"](2,"div"),i["\u0275\u0275text"](3,"\n                                                            "),i["\u0275\u0275elementStart"](4,"div",29),i["\u0275\u0275text"](5),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](6,"\n                                                            "),i["\u0275\u0275elementStart"](7,"div"),i["\u0275\u0275text"](8),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](9,"\n                                                        "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](10,"\n                                                    "),i["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;i["\u0275\u0275advance"](5),i["\u0275\u0275textInterpolate1"]("\n                                                                ",e.metadataField,"\n                                                            "),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate1"]("\n                                                                ",e.metadataValue.value,"\n                                                            ")}}function ie(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275text"](0,"\n                                            "),i["\u0275\u0275elementStart"](1,"div"),i["\u0275\u0275text"](2,"\n                                                "),i["\u0275\u0275elementStart"](3,"div",24),i["\u0275\u0275text"](4),i["\u0275\u0275pipe"](5,"translate"),i["\u0275\u0275elementStart"](6,"button",25),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](7).closeVirtualMetadataModal()})),i["\u0275\u0275text"](7,"\n                                                        "),i["\u0275\u0275elementStart"](8,"span",26),i["\u0275\u0275text"](9,"\xd7"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](10,"\n                                                    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](11,"\n                                                "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](12,"\n                                                "),i["\u0275\u0275elementStart"](13,"div",27),i["\u0275\u0275text"](14,"\n                                                    "),i["\u0275\u0275template"](15,te,2,2,"ds-listable-object-component-loader",17),i["\u0275\u0275text"](16,"\n                                                    "),i["\u0275\u0275template"](17,ne,11,2,"div",28),i["\u0275\u0275pipe"](18,"async"),i["\u0275\u0275text"](19,"\n                                                "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](20,"\n                                            "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](21,"\n                                        ")}if(2&e){const e=i["\u0275\u0275nextContext"]().ngVar,t=i["\u0275\u0275nextContext"]().$implicit,n=i["\u0275\u0275nextContext"](5);i["\u0275\u0275advance"](4),i["\u0275\u0275textInterpolate1"]("\n                                                    ",i["\u0275\u0275pipeBind1"](5,3,"virtual-metadata.delete-item.modal-head"),"\n                                                    "),i["\u0275\u0275advance"](11),i["\u0275\u0275property"]("ngIf",e),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",i["\u0275\u0275pipeBind1"](18,5,n.getVirtualMetadata(t)))}}function ae(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275text"](1,"\n\n                                        "),i["\u0275\u0275template"](2,ee,2,2,"ds-listable-object-component-loader",17),i["\u0275\u0275text"](3,"\n                                        "),i["\u0275\u0275elementStart"](4,"div",18),i["\u0275\u0275text"](5,"\n                                            "),i["\u0275\u0275elementStart"](6,"div",19),i["\u0275\u0275text"](7,"\n                                                "),i["\u0275\u0275elementStart"](8,"button",20),i["\u0275\u0275listener"]("click",(function(){i["\u0275\u0275restoreView"](e);const t=i["\u0275\u0275reference"](16);return i["\u0275\u0275nextContext"](6).openVirtualMetadataModal(t)})),i["\u0275\u0275text"](9,"\n                                                    "),i["\u0275\u0275element"](10,"i",21),i["\u0275\u0275text"](11,"\n                                                "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](12,"\n                                            "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](13,"\n                                        "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](14,"\n\n                                        "),i["\u0275\u0275template"](15,ie,22,7,"ng-template",null,22,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275text"](17,"\n\n                                    "),i["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=t.ngVar;i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",e)}}function re(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",11),i["\u0275\u0275text"](1,"\n                                    "),i["\u0275\u0275template"](2,ae,18,1,"ng-container",4),i["\u0275\u0275pipe"](3,"async"),i["\u0275\u0275text"](4,"\n                                "),i["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=i["\u0275\u0275nextContext"](5);i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngVar",i["\u0275\u0275pipeBind1"](3,1,n.getRelatedItem(e)))}}function se(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",11),i["\u0275\u0275text"](1,"\n\n                            "),i["\u0275\u0275elementStart"](2,"div",12),i["\u0275\u0275listener"]("click",(function(){i["\u0275\u0275restoreView"](e);const n=t.ngVar,a=i["\u0275\u0275nextContext"]().$implicit;return i["\u0275\u0275nextContext"](3).setSelected(a,!n)})),i["\u0275\u0275text"](3,"\n                                "),i["\u0275\u0275elementStart"](4,"label"),i["\u0275\u0275text"](5,"\n                                    "),i["\u0275\u0275element"](6,"input",13),i["\u0275\u0275text"](7,"\n                                "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](8,"\n                            "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](9,"\n\n                            "),i["\u0275\u0275elementStart"](10,"div",14),i["\u0275\u0275text"](11,"\n                                "),i["\u0275\u0275elementStart"](12,"h5",15),i["\u0275\u0275listener"]("click",(function(){i["\u0275\u0275restoreView"](e);const n=t.ngVar,a=i["\u0275\u0275nextContext"]().$implicit;return i["\u0275\u0275nextContext"](3).setSelected(a,!n)})),i["\u0275\u0275text"](13),i["\u0275\u0275pipe"](14,"translate"),i["\u0275\u0275pipe"](15,"async"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](16,"\n                                "),i["\u0275\u0275template"](17,re,5,3,"div",16),i["\u0275\u0275pipe"](18,"async"),i["\u0275\u0275text"](19,"\n                            "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](20,"\n\n                        "),i["\u0275\u0275elementEnd"]()}if(2&e){const e=t.ngVar,n=i["\u0275\u0275nextContext"]().$implicit,a=i["\u0275\u0275nextContext"](3);i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("checked",e),i["\u0275\u0275advance"](7),i["\u0275\u0275textInterpolate1"]("\n                                    ",i["\u0275\u0275pipeBind1"](14,3,a.getRelationshipMessageKey(i["\u0275\u0275pipeBind1"](15,5,a.getLabel(n)))),"\n                                "),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("ngForOf",i["\u0275\u0275pipeBind1"](18,7,a.getRelationships(n)))}}function oe(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",8),i["\u0275\u0275text"](1,"\n\n                        "),i["\u0275\u0275template"](2,se,21,9,"div",10),i["\u0275\u0275pipe"](3,"async"),i["\u0275\u0275text"](4,"\n\n                    "),i["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=i["\u0275\u0275nextContext"](3);i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngVar",i["\u0275\u0275pipeBind1"](3,1,n.isSelected(e)))}}function ce(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",8),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275template"](3,oe,5,3,"div",9),i["\u0275\u0275text"](4,"\n\n                "),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]().ngVar;i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"]("\n\n                    ",i["\u0275\u0275pipeBind1"](2,2,"virtual-metadata.delete-item.info"),"\n\n                    "),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",e)}}function le(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275text"](1,"\n\n                "),i["\u0275\u0275template"](2,ce,5,4,"div",7),i["\u0275\u0275text"](3,"\n\n            "),i["\u0275\u0275elementContainerEnd"]()),2&e){const e=t.ngVar;i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",e&&e.length>0)}}const de=function(e){return{id:e}},pe=function(e){return[e,"edit"]};let ue=(()=>{class e extends k{constructor(e,t,n,i,a,r,s,o,c,l){super(e,t,n,i,a),this.route=e,this.router=t,this.notificationsService=n,this.itemDataService=i,this.translateService=a,this.modalService=r,this.objectUpdatesService=s,this.relationshipService=o,this.entityTypeService=c,this.linkService=l,this.messageKey="delete",this.viewMode=K.a.ListElement,this.types$=new Q.BehaviorSubject([]),this.relationships$=new Map,this.relatedItems$=new Map,this.virtualMetadata$=new Map,this.subs=[]}ngOnInit(){super.ngOnInit(),this.url=this.router.url;const e=this.item.firstMetadataValue("dspace.entity.type");Object(u.e)(e)&&this.subs.push(this.entityTypeService.getEntityTypeByLabel(e).pipe(Object(j.i)(),Object(j.o)(),Object(_.a)(e=>this.entityTypeService.getEntityTypeRelationships(e.id)),Object(j.i)(),Object(j.o)(),Object(p.a)(e=>e.page),Object(_.a)(e=>0===e.length?Object(l.a)(e):Object(d.a)(e.map(e=>this.getRelationships(e))).pipe(Object(p.a)(t=>e.reduce((e,n,i)=>e.some(e=>e.id===n.id)||0===t[i].length?e:[...e,n],[]))))).subscribe(e=>this.types$.next(e))),this.subs.push(this.types$.pipe(Object(N.a)(1)).subscribe(e=>this.objectUpdatesService.initialize(this.url,e,this.item.lastModified)))}openVirtualMetadataModal(e){this.modalRef=this.modalService.open(e)}closeVirtualMetadataModal(){this.modalRef.close()}getRelationshipMessageKey(e){return Object(u.b)(e)&&e.indexOf("Of")>-1?`relationships.${e.substring(0,e.indexOf("Of")+2)}`:e}getLabel(e){return this.getRelationships(e).pipe(Object(_.a)(t=>this.isLeftItem(t[0]).pipe(Object(p.a)(t=>t?e.leftwardType:e.rightwardType))))}getRelationships(e){return this.relationships$.has(e)||this.relationships$.set(e,this.relationshipService.getItemRelationshipsArray(this.item).pipe(Object(_.a)(t=>Object(d.a)(t.map(e=>this.getRelationshipType(e))).pipe(Object(A.a)([]),Object(p.a)(n=>t.filter((t,i)=>e.id===n[i].id)))))),this.relationships$.get(e)}getRelationshipType(e){return this.linkService.resolveLinks(e,Object(X.a)("relationshipType"),Object(X.a)("leftItem"),Object(X.a)("rightItem")),e.relationshipType.pipe(Object(j.i)(),Object(j.o)(),Object(q.a)(e=>Object(u.b)(e)&&Object(u.e)(e.uuid)))}getRelatedItem(e){return this.relatedItems$.has(e)||this.relatedItems$.set(e,this.isLeftItem(e).pipe(Object(_.a)(t=>t?e.rightItem:e.leftItem),Object(j.i)(),Object(j.o)())),this.relatedItems$.get(e)}getVirtualMetadata(e){return this.virtualMetadata$.has(e)||this.virtualMetadata$.set(e,this.getRelatedItem(e).pipe(Object(p.a)(t=>Object.entries(t.metadata).map(([t,n])=>n.filter(t=>t.authority&&t.authority.endsWith(e.id)).map(e=>({metadataField:t,metadataValue:e}))).reduce((e,t)=>e.concat(t))))),this.virtualMetadata$.get(e)}isLeftItem(e){return e.leftItem.pipe(Object(j.i)(),Object(j.o)(),Object(q.a)(e=>Object(u.b)(e)&&Object(u.e)(e.uuid)),Object(p.a)(e=>e.uuid===this.item.uuid))}isSelected(e){return this.objectUpdatesService.isSelectedVirtualMetadata(this.url,this.item.uuid,e.uuid)}setSelected(e,t){this.objectUpdatesService.setSelectedVirtualMetadata(this.url,this.item.uuid,e.uuid,t)}performAction(){this.subs.push(this.types$.pipe(Object(_.a)(e=>Object(d.a)(e.map(e=>this.isSelected(e))).pipe(Object(A.a)([]),Object(p.a)(t=>e.filter((e,n)=>t[n])),Object(p.a)(e=>e.map(e=>e.id)))),Object(_.a)(e=>this.itemDataService.delete(this.item.id,e).pipe(Object(j.g)()))).subscribe(e=>{this.notify(e.hasSucceeded)}))}notify(e){e?(this.notificationsService.success(this.translateService.get("item.edit."+this.messageKey+".success")),this.router.navigate([""])):(this.notificationsService.error(this.translateService.get("item.edit."+this.messageKey+".error")),this.router.navigate([Object(m.e)(this.item)]))}ngOnDestroy(){this.subs.filter(e=>Object(u.b)(e)).forEach(e=>e.unsubscribe())}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](o.a),i["\u0275\u0275directiveInject"](o.h),i["\u0275\u0275directiveInject"](O.a),i["\u0275\u0275directiveInject"](I.a),i["\u0275\u0275directiveInject"](b.e),i["\u0275\u0275directiveInject"](r.q),i["\u0275\u0275directiveInject"](W.a),i["\u0275\u0275directiveInject"](J.a),i["\u0275\u0275directiveInject"](H.a),i["\u0275\u0275directiveInject"](G.a))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-item-delete"]],inputs:{url:"url"},features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:30,vars:22,consts:[[1,"container"],[1,"row"],[1,"col-12"],[3,"item"],[4,"ngVar"],[1,"btn","btn-outline-secondary","perform-action",3,"click"],[1,"btn","btn-outline-secondary","cancel",3,"routerLink"],["class","mb-4",4,"ngIf"],[1,"mb-4"],["class","mb-4",4,"ngFor","ngForOf"],["class","d-flex flex-row",4,"ngVar"],[1,"d-flex","flex-row"],[1,"m-2",3,"click"],["type","checkbox",3,"checked"],[1,"flex-column","flex-grow-1"],[3,"click"],["class","d-flex flex-row",4,"ngFor","ngForOf"],[3,"object","viewMode",4,"ngIf"],[1,"ml-auto"],[1,"btn-group"],[1,"btn","btn-outline-info","btn-sm",3,"click"],[1,"fas","fa-info","fa-fw"],["virtualMetadataModal",""],[3,"object","viewMode"],[1,"modal-header"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[4,"ngFor","ngForOf"],[1,"font-weight-bold"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275text"](1,"\n    "),i["\u0275\u0275elementStart"](2,"div",1),i["\u0275\u0275text"](3,"\n        "),i["\u0275\u0275elementStart"](4,"div",2),i["\u0275\u0275text"](5,"\n\n            "),i["\u0275\u0275elementStart"](6,"h2"),i["\u0275\u0275text"](7),i["\u0275\u0275pipe"](8,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](9,"\n            "),i["\u0275\u0275elementStart"](10,"p"),i["\u0275\u0275text"](11),i["\u0275\u0275pipe"](12,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](13,"\n            "),i["\u0275\u0275element"](14,"ds-modify-item-overview",3),i["\u0275\u0275text"](15,"\n\n            "),i["\u0275\u0275template"](16,le,4,1,"ng-container",4),i["\u0275\u0275pipe"](17,"async"),i["\u0275\u0275text"](18,"\n\n            "),i["\u0275\u0275elementStart"](19,"button",5),i["\u0275\u0275listener"]("click",(function(){return t.performAction()})),i["\u0275\u0275text"](20),i["\u0275\u0275pipe"](21,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](22,"\n            "),i["\u0275\u0275elementStart"](23,"button",6),i["\u0275\u0275text"](24),i["\u0275\u0275pipe"](25,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](26,"\n\n        "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](27,"\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](28,"\n"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](29,"\n")),2&e&&(i["\u0275\u0275advance"](7),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind2"](8,7,t.headerMessage,i["\u0275\u0275pureFunction1"](18,de,t.item.handle))),i["\u0275\u0275advance"](4),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](12,10,t.descriptionMessage)),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("item",t.item),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngVar",i["\u0275\u0275pipeBind1"](17,12,t.types$)),i["\u0275\u0275advance"](4),i["\u0275\u0275textInterpolate1"]("",i["\u0275\u0275pipeBind1"](21,14,t.confirmMessage),"\n            "),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("routerLink",i["\u0275\u0275pureFunction1"](20,pe,t.itemPageRoute)),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"]("\n                ",i["\u0275\u0275pipeBind1"](25,16,t.cancelMessage),"\n            "))},directives:[C.a,Y.a,o.i,a.p,a.o,Z.a],pipes:[b.d,a.b],encapsulation:2}),e})();class me{constructor(e,t,n,i=!1,a=!0){this.operationKey=e,this.operationUrl=t,this.featureID=n,this.authorized=a,this.setDisabled(i)}setDisabled(e){this.disabled=e}}var be=n("5+tZ"),he=n("/uUt"),fe=n("IAdc"),ge=n("2Vo4"),ve=n("Cfvw"),xe=n("FU+A"),ye=n("1mcE");function je(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"span"),i["\u0275\u0275text"](1,"\n    "),i["\u0275\u0275elementStart"](2,"button",5),i["\u0275\u0275text"](3),i["\u0275\u0275pipe"](4,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](5,"\n  "),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("disabled",e.operation.disabled)("routerLink",e.operation.operationUrl),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"]("\n      ",i["\u0275\u0275pipeBind1"](4,3,"item.edit.tabs.status.buttons."+e.operation.operationKey+".button"),"\n    ")}}function Se(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"span",6),i["\u0275\u0275pipe"](1,"translate"),i["\u0275\u0275text"](2,"\n    "),i["\u0275\u0275elementStart"](3,"button",7),i["\u0275\u0275text"](4),i["\u0275\u0275pipe"](5,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](6,"\n  "),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("ngbTooltip",i["\u0275\u0275pipeBind1"](1,3,"item.edit.tabs.status.buttons.unauthorized")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("disabled",!0),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"]("\n      ",i["\u0275\u0275pipeBind1"](5,5,"item.edit.tabs.status.buttons."+e.operation.operationKey+".button"),"\n    ")}}let Oe=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-item-operation"]],inputs:{operation:"operation"},decls:14,vars:5,consts:[[1,"col-3","float-left","d-flex","h-100","action-label"],[1,"justify-content-center","align-self-center"],[1,"col-9","float-left","action-button"],[4,"ngIf"],[3,"ngbTooltip",4,"ngIf"],[1,"btn","btn-outline-primary",3,"disabled","routerLink"],[3,"ngbTooltip"],[1,"btn","btn-outline-primary",3,"disabled"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275text"](1,"\n      "),i["\u0275\u0275elementStart"](2,"span",1),i["\u0275\u0275text"](3),i["\u0275\u0275pipe"](4,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](5,"\n"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](6,"\n"),i["\u0275\u0275elementStart"](7,"div",2),i["\u0275\u0275text"](8,"\n  "),i["\u0275\u0275template"](9,je,6,5,"span",3),i["\u0275\u0275text"](10,"\n  "),i["\u0275\u0275template"](11,Se,7,7,"span",4),i["\u0275\u0275text"](12,"\n"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](13,"\n")),2&e&&(i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate1"]("\n        ",i["\u0275\u0275pipeBind1"](4,3,"item.edit.tabs.status.buttons."+t.operation.operationKey+".label"),"\n      "),i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("ngIf",t.operation.authorized),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!t.operation.authorized))},directives:[a.p,o.i,r.O],pipes:[b.d],encapsulation:2}),e})();function Ie(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",7),i["\u0275\u0275text"](1,"\n    "),i["\u0275\u0275elementStart"](2,"div",3),i["\u0275\u0275text"](3),i["\u0275\u0275pipe"](4,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](5,"\n    "),i["\u0275\u0275elementStart"](6,"div",8),i["\u0275\u0275text"](7),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](8,"\n  "),i["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate1"]("\n      ",i["\u0275\u0275pipeBind1"](4,3,"item.edit.tabs.status.labels."+e),":\n    "),i["\u0275\u0275advance"](3),i["\u0275\u0275propertyInterpolate1"]("id","status-",e,""),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"]("\n      ",n.statusData[e],"\n    ")}}function Ce(e,t){if(1&e&&i["\u0275\u0275element"](0,"ds-item-operation",11),2&e){const e=i["\u0275\u0275nextContext"]().$implicit;i["\u0275\u0275property"]("operation",e)}}const we=function(e){return{"pt-3":e}};function Ee(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",9),i["\u0275\u0275text"](1,"\n    "),i["\u0275\u0275template"](2,Ce,1,1,"ds-item-operation",10),i["\u0275\u0275text"](3,"\n  "),i["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;i["\u0275\u0275property"]("ngClass",i["\u0275\u0275pureFunction1"](2,we,e)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",e)}}let ke=(()=>{class e{constructor(e,t){this.route=e,this.authorizationService=t,this.operations$=new ge.a([])}ngOnInit(){this.itemRD$=this.route.parent.data.pipe(Object(p.a)(e=>e.dso)),this.itemRD$.pipe(Object(S.a)(),Object(p.a)(e=>e.payload)).subscribe(e=>{this.statusData=Object.assign({id:e.id,handle:e.handle,lastModified:e.lastModified}),this.statusDataKeys=Object.keys(this.statusData);const t=[];t.push(new me("authorizations",this.getCurrentUrl(e)+"/authorizations",xe.a.CanManagePolicies,!0)),t.push(new me("mappedCollections",this.getCurrentUrl(e)+"/mapper",xe.a.CanManageMappings,!0)),t.push(e.isWithdrawn?new me("reinstate",this.getCurrentUrl(e)+"/reinstate",xe.a.ReinstateItem,!0):new me("withdraw",this.getCurrentUrl(e)+"/withdraw",xe.a.WithdrawItem,!0)),t.push(e.isDiscoverable?new me("private",this.getCurrentUrl(e)+"/private",xe.a.CanMakePrivate,!0):new me("public",this.getCurrentUrl(e)+"/public",xe.a.CanMakePrivate,!0)),t.push(new me("delete",this.getCurrentUrl(e)+"/delete",xe.a.CanDelete,!0)),t.push(new me("move",this.getCurrentUrl(e)+"/move",xe.a.CanMove,!0)),this.operations$.next(t),Object(ve.a)(t).pipe(Object(be.a)(t=>Object(u.b)(t.featureID)?this.authorizationService.isAuthorized(t.featureID,e.self).pipe(Object(he.a)(),Object(p.a)(e=>new me(t.operationKey,t.operationUrl,t.featureID,!e,e))):[t]),Object(fe.a)()).subscribe(e=>this.operations$.next(e))}),this.itemPageRoute$=this.itemRD$.pipe(Object(j.d)(),Object(p.a)(e=>Object(m.h)(e)))}getCurrentUrl(e){return Object(m.e)(e)}trackOperation(e,t){return Object(u.b)(t)?t.operationKey:void 0}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](o.a),i["\u0275\u0275directiveInject"](ye.a))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-item-status"]],decls:24,vars:16,consts:[[1,"mt-2"],[1,"row"],["class","w-100",4,"ngFor","ngForOf"],[1,"col-3","float-left","status-label"],["id","status-itemPage",1,"col-9","float-left","status-data"],[3,"routerLink"],["class","w-100",3,"ngClass",4,"ngFor","ngForOf"],[1,"w-100"],[1,"col-9","float-left","status-data",3,"id"],[1,"w-100",3,"ngClass"],[3,"operation",4,"ngIf"],[3,"operation"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"p",0),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](3,"\n"),i["\u0275\u0275elementStart"](4,"div",1),i["\u0275\u0275text"](5,"\n  "),i["\u0275\u0275template"](6,Ie,9,5,"div",2),i["\u0275\u0275text"](7,"\n  "),i["\u0275\u0275elementStart"](8,"div",3),i["\u0275\u0275text"](9),i["\u0275\u0275pipe"](10,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](11,"\n  "),i["\u0275\u0275elementStart"](12,"div",4),i["\u0275\u0275text"](13,"\n    "),i["\u0275\u0275elementStart"](14,"a",5),i["\u0275\u0275pipe"](15,"async"),i["\u0275\u0275text"](16),i["\u0275\u0275pipe"](17,"async"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](18,"\n  "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](19,"\n\n  "),i["\u0275\u0275template"](20,Ee,4,4,"div",6),i["\u0275\u0275pipe"](21,"async"),i["\u0275\u0275text"](22,"\n"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](23,"\n")),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](2,6,"item.edit.tabs.status.description")),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngForOf",t.statusDataKeys),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate1"]("\n    ",i["\u0275\u0275pipeBind1"](10,8,"item.edit.tabs.status.labels.itemPage"),":\n  "),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("routerLink",i["\u0275\u0275pipeBind1"](15,10,t.itemPageRoute$)),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](17,12,t.itemPageRoute$)),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("ngForOf",i["\u0275\u0275pipeBind1"](21,14,t.operations$)))},directives:[a.o,o.k,a.m,a.p,Oe],pipes:[b.d,a.b],encapsulation:2,data:{animation:[c.a,c.c]}}),e})();var Me=n("4vdZ"),Be=n("GsQf"),Ve=n("1uah"),$e=n("X8f1"),Re=n("R7cy");class Pe{constructor(e,t,n,i,a){this.xs=e,this.sm=t,this.md=n,this.lg=i,this.xl=a}buildClasses(){return`col-${this.xs} col-sm-${this.sm} col-md-${this.md} col-lg-${this.lg} col-xl-${this.xl}`}}class Te{constructor(e){this.columns=e}combineColumns(e,t){if(e<t&&Object(u.b)(this.columns[e])&&Object(u.b)(this.columns[t])){let n=this.columns[e].xs,i=this.columns[e].sm,a=this.columns[e].md,r=this.columns[e].lg,s=this.columns[e].xl;for(let o=e+1;o<t+1;o++)n+=this.columns[o].xs,i+=this.columns[o].sm,a+=this.columns[o].md,r+=this.columns[o].lg,s+=this.columns[o].xl;return new Pe(n,i,a,r,s)}}}var Fe=n("PCBh"),De=n("mycY"),Ue=n("X/78"),ze=n("yhw/");const Le=["handleView"];function _e(e,t){1&e&&(i["\u0275\u0275text"](0,"\n  "),i["\u0275\u0275elementStart"](1,"div",1),i["\u0275\u0275text"](2,"\n    "),i["\u0275\u0275element"](3,"i",2),i["\u0275\u0275pipe"](4,"translate"),i["\u0275\u0275text"](5,"\n  "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](6,"\n")),2&e&&(i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("title",i["\u0275\u0275pipeBind1"](4,1,"item.edit.bitstreams.edit.buttons.drag")))}let Ne=(()=>{class e{constructor(e){this.viewContainerRef=e}ngOnInit(){this.viewContainerRef.createEmbeddedView(this.handleView)}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](i.ViewContainerRef))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-item-edit-bitstream-drag-handle"]],viewQuery:function(e,t){if(1&e&&i["\u0275\u0275viewQuery"](Le,3),2&e){let e;i["\u0275\u0275queryRefresh"](e=i["\u0275\u0275loadQuery"]())&&(t.handleView=e.first)}},decls:3,vars:0,consts:[["handleView",""],["tabindex","0",1,"drag-handle","text-muted","float-left","p-1","mr-2"],[1,"fas","fa-grip-vertical","fa-fw",3,"title"]],template:function(e,t){1&e&&(i["\u0275\u0275template"](0,_e,7,3,"ng-template",null,0,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275text"](2,"\n"))},pipes:[b.d],styles:[".header-row[_ngcontent-%COMP%]{color:var(--bs-table-dark-color);background-color:var(--bs-table-dark-bg);border-color:var(--bs-table-dark-border-color)}.bundle-row[_ngcontent-%COMP%]{color:var(--bs-table-head-color);background-color:var(--bs-table-head-bg);border-color:var(--bs-table-border-color)}.row-element[_ngcontent-%COMP%]{padding:.75em;border-bottom:var(--bs-table-border-width) solid var(--bs-table-border-color)}.drag-handle[_ngcontent-%COMP%]{visibility:hidden}.bitstream-row-drag-handle[_ngcontent-%COMP%]:hover, .drag-handle[_ngcontent-%COMP%]:hover{cursor:move}[_nghost-%COMP%]     .bitstream-row-drag-handle:focus .drag-handle, [_nghost-%COMP%]     .bitstream-row:hover .drag-handle{visibility:visible!important}.cdk-drag-preview[_ngcontent-%COMP%]{margin-left:0;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12);box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%]{-webkit-transition:-webkit-transform .25s cubic-bezier(0,0,.2,1);transition:-webkit-transform .25s cubic-bezier(0,0,.2,1);transition:transform .25s cubic-bezier(0,0,.2,1);transition:transform .25s cubic-bezier(0,0,.2,1),-webkit-transform .25s cubic-bezier(0,0,.2,1)}.cdk-drop-list-dragging[_ngcontent-%COMP%]   .bitstream-row-drag-handle[_ngcontent-%COMP%], .cdk-drop-list-dragging[_ngcontent-%COMP%]   .drag-handle[_ngcontent-%COMP%]{cursor:-webkit-grabbing;cursor:grabbing}"]}),e})();var Ae=n("7DXY"),qe=n("5+WD"),Ke=n("Exvd"),Xe=n("ysan"),Qe=n("snSO"),We=n("MFUF");let Je=(()=>{class e{constructor(e,t,n,a){this.objectUpdatesService=e,this.elRef=t,this.objectValuesPipe=n,this.paginationService=a,this.dropObject=new i.EventEmitter,this.pageSize=10,this.options=Object.assign(new Ae.a,{id:"dad",currentPage:1,pageSize:this.pageSize}),this.currentPage$=new ge.a(this.options),this.loading$=new ge.a(!1),this.subs=[]}ngOnInit(){this.initializeObjectsRD(),this.initializeURL(),this.initializeUpdates(),this.initializePagination()}initializePagination(){this.paginationService.getCurrentPagination(this.options.id,this.options).subscribe(e=>{this.currentPage$.next(e)})}initializeUpdates(){this.objectsRD$.pipe(Object(j.i)(),Object(j.s)()).subscribe(e=>{this.objectUpdatesService.initialize(this.url,e,new Date)}),this.updates$=this.objectsRD$.pipe(Object(j.c)(),Object(j.s)(),Object(_.a)(e=>this.objectUpdatesService.getFieldUpdatesExclusive(this.url,e))),this.subs.push(this.updates$.pipe(Object(p.a)(e=>this.objectValuesPipe.transform(e)),Object(he.a)(Object(Xe.b)(e=>Object(u.b)(e)&&Object(u.b)(e.field)?e.field.uuid:void 0))).subscribe(e=>{this.customOrder=e.map(e=>e.field.uuid),this.loading$.next(!1)}),this.loading$.subscribe(e=>this.options.disabled=e))}drop(e){const t=e.previousIndex;let n=e.currentIndex;const i=this.currentPage$.value.currentPage-1;let a=this.currentPage$.value.currentPage-1;const r=this.elRef.nativeElement.querySelector(".page-item:hover");if(Object(u.b)(r)&&Object(u.b)(r.textContent)){const e=Number(r.textContent);Object(u.b)(e)&&!Number.isNaN(e)&&(a=e-1,n=0)}const s=i!==a;s||t===n||Object(qe.e)(this.customOrder,t,n);const o=a+1,c=i*this.pageSize+t,l=a*this.pageSize+n;c!==l&&(s&&this.loading$.next(!0),this.dropObject.emit(Object.assign({fromIndex:c,toIndex:l,finish:()=>{s&&this.paginationComponent.doPageChange(o)}})))}ngOnDestroy(){this.subs.filter(e=>Object(u.b)(e)).forEach(e=>e.unsubscribe()),this.paginationService.clearPagination(this.options.id)}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](W.a),i["\u0275\u0275directiveInject"](i.ElementRef),i["\u0275\u0275directiveInject"](Qe.a),i["\u0275\u0275directiveInject"](We.a))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-paginated-drag-drop-abstract"]],viewQuery:function(e,t){if(1&e&&i["\u0275\u0275viewQuery"](Ke.a,1),2&e){let e;i["\u0275\u0275queryRefresh"](e=i["\u0275\u0275loadQuery"]())&&(t.paginationComponent=e.first)}},outputs:{dropObject:"dropObject"},decls:0,vars:0,template:function(e,t){},encapsulation:2}),e})();var He=n("LvDl"),Ge=n("C765");const Ye=["bitstreamView"],Ze=function(e){return["/bitstreams/",e,"edit"]};function et(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275text"](0,"\n  "),i["\u0275\u0275elementStart"](1,"div"),i["\u0275\u0275text"](2,"\n    "),i["\u0275\u0275projection"](3),i["\u0275\u0275text"](4,"\n    "),i["\u0275\u0275elementStart"](5,"div",1),i["\u0275\u0275text"](6,"\n      "),i["\u0275\u0275elementStart"](7,"span",2),i["\u0275\u0275text"](8),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](9,"\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](10,"\n  "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](11,"\n  "),i["\u0275\u0275elementStart"](12,"div"),i["\u0275\u0275text"](13,"\n    "),i["\u0275\u0275elementStart"](14,"div",3),i["\u0275\u0275text"](15,"\n      "),i["\u0275\u0275elementStart"](16,"span",2),i["\u0275\u0275text"](17),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](18,"\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](19,"\n  "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](20,"\n  "),i["\u0275\u0275elementStart"](21,"div"),i["\u0275\u0275text"](22,"\n    "),i["\u0275\u0275elementStart"](23,"div",4),i["\u0275\u0275text"](24,"\n        "),i["\u0275\u0275elementStart"](25,"span",2),i["\u0275\u0275text"](26),i["\u0275\u0275pipe"](27,"async"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](28,"\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](29,"\n  "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](30,"\n  "),i["\u0275\u0275elementStart"](31,"div"),i["\u0275\u0275text"](32,"\n    "),i["\u0275\u0275elementStart"](33,"div",4),i["\u0275\u0275text"](34,"\n      "),i["\u0275\u0275elementStart"](35,"div",5),i["\u0275\u0275text"](36,"\n        "),i["\u0275\u0275elementStart"](37,"a",6),i["\u0275\u0275pipe"](38,"translate"),i["\u0275\u0275text"](39,"\n          "),i["\u0275\u0275element"](40,"i",7),i["\u0275\u0275text"](41,"\n        "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](42,"\n        "),i["\u0275\u0275elementStart"](43,"button",8),i["\u0275\u0275pipe"](44,"translate"),i["\u0275\u0275text"](45,"\n          "),i["\u0275\u0275element"](46,"i",9),i["\u0275\u0275text"](47,"\n        "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](48,"\n        "),i["\u0275\u0275elementStart"](49,"button",10),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().remove()})),i["\u0275\u0275pipe"](50,"translate"),i["\u0275\u0275text"](51,"\n          "),i["\u0275\u0275element"](52,"i",11),i["\u0275\u0275text"](53,"\n        "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](54,"\n        "),i["\u0275\u0275elementStart"](55,"button",12),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().undo()})),i["\u0275\u0275pipe"](56,"translate"),i["\u0275\u0275text"](57,"\n          "),i["\u0275\u0275element"](58,"i",13),i["\u0275\u0275text"](59,"\n        "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](60,"\n      "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](61,"\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](62,"\n  "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](63,"\n")}if(2&e){const e=i["\u0275\u0275nextContext"]();let t=null;i["\u0275\u0275advance"](1),i["\u0275\u0275classMapInterpolate1"]("",e.columnSizes.columns[0].buildClasses()," row-element d-flex"),i["\u0275\u0275advance"](7),i["\u0275\u0275textInterpolate1"]("\n        ",e.bitstreamName,"\n      "),i["\u0275\u0275advance"](4),i["\u0275\u0275classMapInterpolate1"]("",e.columnSizes.columns[1].buildClasses()," row-element d-flex align-items-center"),i["\u0275\u0275advance"](5),i["\u0275\u0275textInterpolate1"]("\n      ",null==e.bitstream?null:e.bitstream.firstMetadataValue("dc.description"),"\n      "),i["\u0275\u0275advance"](4),i["\u0275\u0275classMapInterpolate1"]("",e.columnSizes.columns[2].buildClasses()," row-element d-flex align-items-center"),i["\u0275\u0275advance"](5),i["\u0275\u0275textInterpolate1"]("\n            ",null==(t=i["\u0275\u0275pipeBind1"](27,23,e.format$))?null:t.shortDescription,"\n        "),i["\u0275\u0275advance"](5),i["\u0275\u0275classMapInterpolate1"]("",e.columnSizes.columns[3].buildClasses()," row-element d-flex align-items-center"),i["\u0275\u0275advance"](6),i["\u0275\u0275propertyInterpolate"]("title",i["\u0275\u0275pipeBind1"](38,25,"item.edit.bitstreams.edit.buttons.download")),i["\u0275\u0275property"]("href",null==e.bitstream||null==e.bitstream._links||null==e.bitstream._links.content?null:e.bitstream._links.content.href,i["\u0275\u0275sanitizeUrl"]),i["\u0275\u0275advance"](6),i["\u0275\u0275propertyInterpolate"]("title",i["\u0275\u0275pipeBind1"](44,27,"item.edit.bitstreams.edit.buttons.edit")),i["\u0275\u0275property"]("routerLink",i["\u0275\u0275pureFunction1"](33,Ze,e.bitstream.id)),i["\u0275\u0275advance"](6),i["\u0275\u0275propertyInterpolate"]("title",i["\u0275\u0275pipeBind1"](50,29,"item.edit.bitstreams.edit.buttons.remove")),i["\u0275\u0275property"]("disabled",!e.canRemove()),i["\u0275\u0275advance"](6),i["\u0275\u0275propertyInterpolate"]("title",i["\u0275\u0275pipeBind1"](56,31,"item.edit.bitstreams.edit.buttons.undo")),i["\u0275\u0275property"]("disabled",!e.canUndo())}}const tt=[[["","slot","drag-handle"]]],nt=["[slot=drag-handle]"];let it=(()=>{class e{constructor(e,t,n){this.objectUpdatesService=e,this.dsoNameService=t,this.viewContainerRef=n}ngOnInit(){this.viewContainerRef.createEmbeddedView(this.bitstreamView)}ngOnChanges(e){this.bitstream=Object(He.cloneDeep)(this.fieldUpdate.field),this.bitstreamName=this.dsoNameService.getName(this.bitstream),this.format$=this.bitstream.format.pipe(Object(j.i)(),Object(j.o)())}remove(){this.objectUpdatesService.saveRemoveFieldUpdate(this.bundleUrl,this.bitstream)}undo(){this.objectUpdatesService.removeSingleFieldUpdate(this.bundleUrl,this.bitstream.uuid)}canRemove(){return this.fieldUpdate.changeType!==$e.c.REMOVE}canUndo(){return this.fieldUpdate.changeType>=0}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](W.a),i["\u0275\u0275directiveInject"](Ge.a),i["\u0275\u0275directiveInject"](i.ViewContainerRef))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-item-edit-bitstream"]],viewQuery:function(e,t){if(1&e&&i["\u0275\u0275viewQuery"](Ye,3),2&e){let e;i["\u0275\u0275queryRefresh"](e=i["\u0275\u0275loadQuery"]())&&(t.bitstreamView=e.first)}},inputs:{fieldUpdate:"fieldUpdate",bundleUrl:"bundleUrl",columnSizes:"columnSizes"},features:[i["\u0275\u0275NgOnChangesFeature"]],ngContentSelectors:nt,decls:3,vars:0,consts:[["bitstreamView",""],[1,"float-left","d-flex","align-items-center","overflow-hidden"],[1,"text-truncate"],[1,"w-100"],[1,"text-center","w-100"],[1,"btn-group","relationship-action-buttons"],[1,"btn","btn-outline-primary","btn-sm",3,"href","title"],[1,"fas","fa-download","fa-fw"],[1,"btn","btn-outline-primary","btn-sm",3,"routerLink","title"],[1,"fas","fa-edit","fa-fw"],[1,"btn","btn-outline-danger","btn-sm",3,"disabled","title","click"],[1,"fas","fa-trash-alt","fa-fw"],[1,"btn","btn-outline-warning","btn-sm",3,"disabled","title","click"],[1,"fas","fa-undo-alt","fa-fw"]],template:function(e,t){1&e&&(i["\u0275\u0275projectionDef"](tt),i["\u0275\u0275template"](0,et,64,35,"ng-template",null,0,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275text"](2,"\n"))},directives:[o.i],pipes:[a.b,b.d],styles:[".header-row[_ngcontent-%COMP%]{color:var(--bs-table-dark-color);background-color:var(--bs-table-dark-bg);border-color:var(--bs-table-dark-border-color)}.bundle-row[_ngcontent-%COMP%]{color:var(--bs-table-head-color);background-color:var(--bs-table-head-bg);border-color:var(--bs-table-border-color)}.row-element[_ngcontent-%COMP%]{padding:.75em;border-bottom:var(--bs-table-border-width) solid var(--bs-table-border-color)}.drag-handle[_ngcontent-%COMP%]{visibility:hidden}.bitstream-row-drag-handle[_ngcontent-%COMP%]:hover, .drag-handle[_ngcontent-%COMP%]:hover{cursor:move}[_nghost-%COMP%]     .bitstream-row-drag-handle:focus .drag-handle, [_nghost-%COMP%]     .bitstream-row:hover .drag-handle{visibility:visible!important}.cdk-drag-preview[_ngcontent-%COMP%]{margin-left:0;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12);box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%]{-webkit-transition:-webkit-transform .25s cubic-bezier(0,0,.2,1);transition:-webkit-transform .25s cubic-bezier(0,0,.2,1);transition:transform .25s cubic-bezier(0,0,.2,1);transition:transform .25s cubic-bezier(0,0,.2,1),-webkit-transform .25s cubic-bezier(0,0,.2,1)}.cdk-drop-list-dragging[_ngcontent-%COMP%]   .bitstream-row-drag-handle[_ngcontent-%COMP%], .cdk-drop-list-dragging[_ngcontent-%COMP%]   .drag-handle[_ngcontent-%COMP%]{cursor:-webkit-grabbing;cursor:grabbing}"]}),e})();var at=n("Frqi");const rt=function(e,t,n,i){return{"table-warning":e,"table-danger":t,"table-success":n,"bg-white":i}};function st(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",7),i["\u0275\u0275text"](1,"\n          "),i["\u0275\u0275elementStart"](2,"ds-item-edit-bitstream",8),i["\u0275\u0275text"](3,"\n            "),i["\u0275\u0275elementStart"](4,"div",9),i["\u0275\u0275text"](5,"\n              "),i["\u0275\u0275element"](6,"ds-item-edit-bitstream-drag-handle"),i["\u0275\u0275text"](7,"\n            "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](8,"\n          "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](9,"\n        "),i["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=i["\u0275\u0275nextContext"](2).ngVar,a=i["\u0275\u0275nextContext"](3);i["\u0275\u0275property"]("id",e)("ngClass",i["\u0275\u0275pureFunction4"](5,rt,0===n[e].changeType,2===n[e].changeType,1===n[e].changeType,void 0===n[e].changeType)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("fieldUpdate",n[e])("bundleUrl",a.bundle.self)("columnSizes",a.columnSizes)}}function ot(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275text"](1,"\n        "),i["\u0275\u0275template"](2,st,10,10,"div",6),i["\u0275\u0275text"](3,"\n      "),i["\u0275\u0275elementContainerEnd"]()),2&e){const e=i["\u0275\u0275nextContext"](4);i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",e.customOrder)}}const ct=function(e){return{"mb-3":e}};function lt(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",5),i["\u0275\u0275listener"]("cdkDropListDropped",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](3).drop(t)})),i["\u0275\u0275pipe"](1,"async"),i["\u0275\u0275text"](2,"\n      "),i["\u0275\u0275template"](3,ot,4,1,"ng-container",2),i["\u0275\u0275text"](4,"\n    "),i["\u0275\u0275elementEnd"]()}if(2&e){const e=t.ngVar,n=i["\u0275\u0275nextContext"](3);let a=null;i["\u0275\u0275property"]("id",n.bundle.id)("ngClass",i["\u0275\u0275pureFunction1"](5,ct,(null==(a=i["\u0275\u0275pipeBind1"](1,3,n.objectsRD$))||null==a.payload?null:a.payload.totalElements)>n.pageSize)),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",e)}}function dt(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275text"](1,"\n    "),i["\u0275\u0275template"](2,lt,5,7,"div",4),i["\u0275\u0275pipe"](3,"async"),i["\u0275\u0275text"](4,"\n  "),i["\u0275\u0275elementContainerEnd"]()),2&e){const e=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngVar",i["\u0275\u0275pipeBind1"](3,1,e.updates$))}}function pt(e,t){1&e&&(i["\u0275\u0275element"](0,"ds-loading",10),i["\u0275\u0275pipe"](1,"translate")),2&e&&i["\u0275\u0275property"]("message",i["\u0275\u0275pipeBind1"](1,1,"loading.bitstreams"))}function ut(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"ds-pagination",1),i["\u0275\u0275pipe"](1,"async"),i["\u0275\u0275pipe"](2,"async"),i["\u0275\u0275text"](3,"\n  "),i["\u0275\u0275template"](4,dt,5,3,"ng-container",2),i["\u0275\u0275pipe"](5,"async"),i["\u0275\u0275text"](6,"\n  "),i["\u0275\u0275template"](7,pt,2,3,"ds-loading",3),i["\u0275\u0275pipe"](8,"async"),i["\u0275\u0275text"](9,"\n"),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]();let t=null,n=null;i["\u0275\u0275property"]("hideGear",!0)("hidePagerWhenSinglePage",!0)("hidePaginationDetail",!0)("paginationOptions",e.options)("pageInfoState",null==(t=i["\u0275\u0275pipeBind1"](1,8,e.objectsRD$))?null:t.payload)("collectionSize",null==(n=i["\u0275\u0275pipeBind1"](2,10,e.objectsRD$))||null==n.payload?null:n.payload.totalElements),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("ngIf",!i["\u0275\u0275pipeBind1"](5,12,e.loading$)),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",i["\u0275\u0275pipeBind1"](8,14,e.loading$))}}let mt=(()=>{class e extends Je{constructor(e,t,n,i,a,r){super(e,t,n,a),this.objectUpdatesService=e,this.elRef=t,this.objectValuesPipe=n,this.bundleService=i,this.paginationService=a,this.requestService=r}ngOnInit(){super.ngOnInit()}initializeObjectsRD(){this.objectsRD$=this.currentPage$.pipe(Object(_.a)(e=>{const t=new Re.a({pagination:Object.assign({},e)});return this.bundleService.getBitstreamsEndpoint(this.bundle.id,t).pipe(Object(_.a)(e=>this.requestService.hasByHref$(e)),Object(_.a)(()=>this.bundleService.getBitstreams(this.bundle.id,t,Object(X.a)("format"))))}))}initializeURL(){this.url=this.bundle.self}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](W.a),i["\u0275\u0275directiveInject"](i.ElementRef),i["\u0275\u0275directiveInject"](Qe.a),i["\u0275\u0275directiveInject"](ze.a),i["\u0275\u0275directiveInject"](We.a),i["\u0275\u0275directiveInject"](Ue.a))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-paginated-drag-and-drop-bitstream-list"]],inputs:{bundle:"bundle",columnSizes:"columnSizes"},features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:3,vars:3,consts:[[3,"hideGear","hidePagerWhenSinglePage","hidePaginationDetail","paginationOptions","pageInfoState","collectionSize",4,"ngIf"],[3,"hideGear","hidePagerWhenSinglePage","hidePaginationDetail","paginationOptions","pageInfoState","collectionSize"],[4,"ngIf"],[3,"message",4,"ngIf"],["class","bundle-bitstreams-list","cdkDropList","",3,"id","ngClass","cdkDropListDropped",4,"ngVar"],["cdkDropList","",1,"bundle-bitstreams-list",3,"id","ngClass","cdkDropListDropped"],["class","row bitstream-row","cdkDrag","",3,"id","ngClass",4,"ngFor","ngForOf"],["cdkDrag","",1,"row","bitstream-row",3,"id","ngClass"],[3,"fieldUpdate","bundleUrl","columnSizes"],["slot","drag-handle","cdkDragHandle","","tabindex","0",1,"d-flex","align-items-center","bitstream-row-drag-handle"],[3,"message"]],template:function(e,t){if(1&e&&(i["\u0275\u0275template"](0,ut,10,16,"ds-pagination",0),i["\u0275\u0275pipe"](1,"async"),i["\u0275\u0275text"](2,"\n")),2&e){let e=null;i["\u0275\u0275property"]("ngIf",null==(e=i["\u0275\u0275pipeBind1"](1,1,t.objectsRD$))?null:e.payload)}},directives:[a.p,Ke.a,Y.a,qe.c,a.m,a.o,qe.a,it,qe.b,Ne,at.a],pipes:[a.b,b.d],styles:[".header-row[_ngcontent-%COMP%]{color:var(--bs-table-dark-color);background-color:var(--bs-table-dark-bg);border-color:var(--bs-table-dark-border-color)}.bundle-row[_ngcontent-%COMP%]{color:var(--bs-table-head-color);background-color:var(--bs-table-head-bg);border-color:var(--bs-table-border-color)}.row-element[_ngcontent-%COMP%]{padding:.75em;border-bottom:var(--bs-table-border-width) solid var(--bs-table-border-color)}.drag-handle[_ngcontent-%COMP%]{visibility:hidden}.bitstream-row-drag-handle[_ngcontent-%COMP%]:hover, .drag-handle[_ngcontent-%COMP%]:hover{cursor:move}[_nghost-%COMP%]     .bitstream-row-drag-handle:focus .drag-handle, [_nghost-%COMP%]     .bitstream-row:hover .drag-handle{visibility:visible!important}.cdk-drag-preview[_ngcontent-%COMP%]{margin-left:0;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12);box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%]{-webkit-transition:-webkit-transform .25s cubic-bezier(0,0,.2,1);transition:-webkit-transform .25s cubic-bezier(0,0,.2,1);transition:transform .25s cubic-bezier(0,0,.2,1);transition:transform .25s cubic-bezier(0,0,.2,1),-webkit-transform .25s cubic-bezier(0,0,.2,1)}.cdk-drop-list-dragging[_ngcontent-%COMP%]   .bitstream-row-drag-handle[_ngcontent-%COMP%], .cdk-drop-list-dragging[_ngcontent-%COMP%]   .drag-handle[_ngcontent-%COMP%]{cursor:-webkit-grabbing;cursor:grabbing}"]}),e})();const bt=["bundleView"],ht=function(e){return{name:e}},ft=function(e){return[e,"bitstreams","new"]},gt=function(e){return{bundle:e}};function vt(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275text"](0,"\n  "),i["\u0275\u0275elementStart"](1,"div",1),i["\u0275\u0275text"](2,"\n    "),i["\u0275\u0275elementStart"](3,"div"),i["\u0275\u0275text"](4,"\n      "),i["\u0275\u0275element"](5,"ds-item-edit-bitstream-drag-handle"),i["\u0275\u0275text"](6,"\n      "),i["\u0275\u0275elementStart"](7,"div",2),i["\u0275\u0275text"](8),i["\u0275\u0275pipe"](9,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](10,"\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](11,"\n    "),i["\u0275\u0275elementStart"](12,"div"),i["\u0275\u0275text"](13,"\n      "),i["\u0275\u0275elementStart"](14,"div",3),i["\u0275\u0275text"](15,"\n        "),i["\u0275\u0275elementStart"](16,"button",4),i["\u0275\u0275pipe"](17,"translate"),i["\u0275\u0275text"](18,"\n          "),i["\u0275\u0275element"](19,"i",5),i["\u0275\u0275text"](20,"\n        "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](21,"\n      "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](22,"\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](23,"\n  "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](24,"\n  "),i["\u0275\u0275elementStart"](25,"ds-paginated-drag-and-drop-bitstream-list",6),i["\u0275\u0275listener"]("dropObject",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().dropObject.emit(t)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](26,"\n")}if(2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](3),i["\u0275\u0275classMapInterpolate1"]("",e.bundleNameColumn.buildClasses()," font-weight-bold row-element d-flex"),i["\u0275\u0275advance"](5),i["\u0275\u0275textInterpolate1"]("\n        ",i["\u0275\u0275pipeBind2"](9,12,"item.edit.bitstreams.bundle.name",i["\u0275\u0275pureFunction1"](17,ht,e.bundle.name)),"\n      "),i["\u0275\u0275advance"](4),i["\u0275\u0275classMapInterpolate1"]("",e.columnSizes.columns[3].buildClasses()," text-center row-element"),i["\u0275\u0275advance"](4),i["\u0275\u0275propertyInterpolate"]("title",i["\u0275\u0275pipeBind1"](17,15,"item.edit.bitstreams.bundle.edit.buttons.upload")),i["\u0275\u0275property"]("routerLink",i["\u0275\u0275pureFunction1"](19,ft,e.itemPageRoute))("queryParams",i["\u0275\u0275pureFunction1"](21,gt,e.bundle.id)),i["\u0275\u0275advance"](9),i["\u0275\u0275property"]("bundle",e.bundle)("columnSizes",e.columnSizes)}}let xt=(()=>{class e{constructor(e){this.viewContainerRef=e,this.dropObject=new i.EventEmitter}ngOnInit(){this.bundleNameColumn=this.columnSizes.combineColumns(0,2),this.viewContainerRef.createEmbeddedView(this.bundleView),this.itemPageRoute=Object(m.h)(this.item)}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](i.ViewContainerRef))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-item-edit-bitstream-bundle"]],viewQuery:function(e,t){if(1&e&&i["\u0275\u0275viewQuery"](bt,3),2&e){let e;i["\u0275\u0275queryRefresh"](e=i["\u0275\u0275loadQuery"]())&&(t.bundleView=e.first)}},inputs:{bundle:"bundle",item:"item",columnSizes:"columnSizes"},outputs:{dropObject:"dropObject"},decls:3,vars:0,consts:[["bundleView",""],[1,"row","bundle-row"],[1,"float-left","d-flex","align-items-center"],[1,"btn-group","bundle-action-buttons"],[1,"btn","btn-outline-success","btn-sm",3,"routerLink","queryParams","title"],[1,"fas","fa-upload","fa-fw"],[3,"bundle","columnSizes","dropObject"]],template:function(e,t){1&e&&(i["\u0275\u0275template"](0,vt,27,23,"ng-template",null,0,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275text"](2,"\n"))},directives:[Ne,o.i,mt],pipes:[b.d],styles:[".header-row[_ngcontent-%COMP%]{color:var(--bs-table-dark-color);background-color:var(--bs-table-dark-bg);border-color:var(--bs-table-dark-border-color)}.bundle-row[_ngcontent-%COMP%]{color:var(--bs-table-head-color);background-color:var(--bs-table-head-bg);border-color:var(--bs-table-border-color)}.row-element[_ngcontent-%COMP%]{padding:.75em;border-bottom:var(--bs-table-border-width) solid var(--bs-table-border-color)}.drag-handle[_ngcontent-%COMP%]{visibility:hidden}.bitstream-row-drag-handle[_ngcontent-%COMP%]:hover, .drag-handle[_ngcontent-%COMP%]:hover{cursor:move}[_nghost-%COMP%]     .bitstream-row-drag-handle:focus .drag-handle, [_nghost-%COMP%]     .bitstream-row:hover .drag-handle{visibility:visible!important}.cdk-drag-preview[_ngcontent-%COMP%]{margin-left:0;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12);box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%]{-webkit-transition:-webkit-transform .25s cubic-bezier(0,0,.2,1);transition:-webkit-transform .25s cubic-bezier(0,0,.2,1);transition:transform .25s cubic-bezier(0,0,.2,1);transition:transform .25s cubic-bezier(0,0,.2,1),-webkit-transform .25s cubic-bezier(0,0,.2,1)}.cdk-drop-list-dragging[_ngcontent-%COMP%]   .bitstream-row-drag-handle[_ngcontent-%COMP%], .cdk-drop-list-dragging[_ngcontent-%COMP%]   .drag-handle[_ngcontent-%COMP%]{cursor:-webkit-grabbing;cursor:grabbing}"]}),e})();function yt(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",17),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](2).reinstate()})),i["\u0275\u0275element"](1,"i",18),i["\u0275\u0275text"](2,"\n      "),i["\u0275\u0275elementStart"](3,"span",5),i["\u0275\u0275text"](4),i["\u0275\u0275pipe"](5,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](6,"\n    "),i["\u0275\u0275elementEnd"]()}2&e&&(i["\u0275\u0275advance"](4),i["\u0275\u0275textInterpolate1"]("\xa0",i["\u0275\u0275pipeBind1"](5,1,"item.edit.bitstreams.reinstate-button"),""))}function jt(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",19),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](2).discard()})),i["\u0275\u0275pipe"](1,"async"),i["\u0275\u0275element"](2,"i",20),i["\u0275\u0275text"](3,"\n      "),i["\u0275\u0275elementStart"](4,"span",5),i["\u0275\u0275text"](5),i["\u0275\u0275pipe"](6,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](7,"\n    "),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"](2);i["\u0275\u0275property"]("disabled",!i["\u0275\u0275pipeBind1"](1,2,e.hasChanges())||e.submitting),i["\u0275\u0275advance"](5),i["\u0275\u0275textInterpolate1"]("\xa0",i["\u0275\u0275pipeBind1"](6,4,"item.edit.bitstreams.discard-button"),"")}}function St(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"ds-item-edit-bitstream-bundle",24),i["\u0275\u0275listener"]("dropObject",(function(n){i["\u0275\u0275restoreView"](e);const a=t.$implicit;return i["\u0275\u0275nextContext"](3).dropBitstream(a,n)})),i["\u0275\u0275text"](1,"\n    "),i["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=i["\u0275\u0275nextContext"](3);i["\u0275\u0275property"]("bundle",e)("item",n.item)("columnSizes",n.columnSizes)}}function Ot(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",21),i["\u0275\u0275text"](1,"\n    "),i["\u0275\u0275elementStart"](2,"div",22),i["\u0275\u0275text"](3,"\n      "),i["\u0275\u0275elementStart"](4,"div"),i["\u0275\u0275text"](5,"\n        "),i["\u0275\u0275element"](6,"ds-item-edit-bitstream-drag-handle"),i["\u0275\u0275text"](7),i["\u0275\u0275pipe"](8,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](9,"\n      "),i["\u0275\u0275elementStart"](10,"div"),i["\u0275\u0275text"](11),i["\u0275\u0275pipe"](12,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](13,"\n      "),i["\u0275\u0275elementStart"](14,"div"),i["\u0275\u0275text"](15),i["\u0275\u0275pipe"](16,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](17,"\n      "),i["\u0275\u0275elementStart"](18,"div"),i["\u0275\u0275text"](19),i["\u0275\u0275pipe"](20,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](21,"\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](22,"\n    "),i["\u0275\u0275template"](23,St,2,3,"ds-item-edit-bitstream-bundle",23),i["\u0275\u0275text"](24,"\n  "),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]().ngVar,t=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](4),i["\u0275\u0275classMapInterpolate1"]("",t.columnSizes.columns[0].buildClasses()," row-element"),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate1"]("\n        ",i["\u0275\u0275pipeBind1"](8,17,"item.edit.bitstreams.headers.name"),"\n      "),i["\u0275\u0275advance"](3),i["\u0275\u0275classMapInterpolate1"]("",t.columnSizes.columns[1].buildClasses()," row-element"),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](12,19,"item.edit.bitstreams.headers.description")),i["\u0275\u0275advance"](3),i["\u0275\u0275classMapInterpolate1"]("",t.columnSizes.columns[2].buildClasses()," text-center row-element"),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](16,21,"item.edit.bitstreams.headers.format")),i["\u0275\u0275advance"](3),i["\u0275\u0275classMapInterpolate1"]("",t.columnSizes.columns[3].buildClasses()," text-center row-element"),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](20,23,"item.edit.bitstreams.headers.actions")),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("ngForOf",e)}}function It(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",25),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"]("\n    ",i["\u0275\u0275pipeBind1"](2,1,"item.edit.bitstreams.empty"),"\n  "))}function Ct(e,t){1&e&&(i["\u0275\u0275element"](0,"ds-loading",26),i["\u0275\u0275pipe"](1,"translate")),2&e&&i["\u0275\u0275propertyInterpolate"]("message",i["\u0275\u0275pipeBind1"](1,1,"loading.bitstreams"))}function wt(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",27),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](2).reinstate()})),i["\u0275\u0275element"](1,"i",18),i["\u0275\u0275text"](2,"\n        "),i["\u0275\u0275elementStart"](3,"span",5),i["\u0275\u0275text"](4),i["\u0275\u0275pipe"](5,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](6,"\n      "),i["\u0275\u0275elementEnd"]()}2&e&&(i["\u0275\u0275advance"](4),i["\u0275\u0275textInterpolate1"]("\xa0",i["\u0275\u0275pipeBind1"](5,1,"item.edit.bitstreams.reinstate-button"),""))}function Et(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",19),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](2).discard()})),i["\u0275\u0275pipe"](1,"async"),i["\u0275\u0275element"](2,"i",20),i["\u0275\u0275text"](3,"\n        "),i["\u0275\u0275elementStart"](4,"span",5),i["\u0275\u0275text"](5),i["\u0275\u0275pipe"](6,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](7,"\n      "),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"](2);i["\u0275\u0275property"]("disabled",!i["\u0275\u0275pipeBind1"](1,2,e.hasChanges())||e.submitting),i["\u0275\u0275advance"](5),i["\u0275\u0275textInterpolate1"]("\xa0",i["\u0275\u0275pipeBind1"](6,4,"item.edit.bitstreams.discard-button"),"")}}const kt=function(e){return[e,"bitstreams","new"]};function Mt(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",1),i["\u0275\u0275text"](1,"\n  "),i["\u0275\u0275elementStart"](2,"div",2),i["\u0275\u0275text"](3,"\n    "),i["\u0275\u0275elementStart"](4,"button",3),i["\u0275\u0275element"](5,"i",4),i["\u0275\u0275text"](6,"\n      "),i["\u0275\u0275elementStart"](7,"span",5),i["\u0275\u0275text"](8),i["\u0275\u0275pipe"](9,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](10,"\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](11,"\n    "),i["\u0275\u0275template"](12,yt,7,3,"button",6),i["\u0275\u0275pipe"](13,"async"),i["\u0275\u0275text"](14,"\n    "),i["\u0275\u0275elementStart"](15,"button",7),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().submit()})),i["\u0275\u0275pipe"](16,"async"),i["\u0275\u0275element"](17,"i",8),i["\u0275\u0275text"](18,"\n      "),i["\u0275\u0275elementStart"](19,"span",5),i["\u0275\u0275text"](20),i["\u0275\u0275pipe"](21,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](22,"\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](23,"\n    "),i["\u0275\u0275template"](24,jt,8,6,"button",9),i["\u0275\u0275pipe"](25,"async"),i["\u0275\u0275text"](26,"\n  "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](27,"\n\n  "),i["\u0275\u0275template"](28,Ot,25,25,"div",10),i["\u0275\u0275text"](29,"\n  "),i["\u0275\u0275template"](30,It,3,3,"div",11),i["\u0275\u0275text"](31,"\n  "),i["\u0275\u0275template"](32,Ct,2,3,"ds-loading",12),i["\u0275\u0275text"](33,"\n\n  "),i["\u0275\u0275elementStart"](34,"div",13),i["\u0275\u0275text"](35,"\n    "),i["\u0275\u0275elementStart"](36,"div",14),i["\u0275\u0275text"](37,"\n      "),i["\u0275\u0275template"](38,wt,7,3,"button",15),i["\u0275\u0275pipe"](39,"async"),i["\u0275\u0275text"](40,"\n      "),i["\u0275\u0275elementStart"](41,"button",16),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().submit()})),i["\u0275\u0275pipe"](42,"async"),i["\u0275\u0275element"](43,"i",8),i["\u0275\u0275text"](44,"\n        "),i["\u0275\u0275elementStart"](45,"span",5),i["\u0275\u0275text"](46),i["\u0275\u0275pipe"](47,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](48,"\n      "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](49,"\n      "),i["\u0275\u0275template"](50,Et,8,6,"button",9),i["\u0275\u0275pipe"](51,"async"),i["\u0275\u0275text"](52,"\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](53,"\n  "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](54,"\n"),i["\u0275\u0275elementEnd"]()}if(2&e){const e=t.ngVar,n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("routerLink",i["\u0275\u0275pureFunction1"](31,kt,n.itemPageRoute)),i["\u0275\u0275advance"](4),i["\u0275\u0275textInterpolate1"]("\xa0",i["\u0275\u0275pipeBind1"](9,13,"item.edit.bitstreams.upload-button"),""),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("ngIf",i["\u0275\u0275pipeBind1"](13,15,n.isReinstatable())),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("disabled",!i["\u0275\u0275pipeBind1"](16,17,n.hasChanges())||n.submitting),i["\u0275\u0275advance"](5),i["\u0275\u0275textInterpolate1"]("\xa0",i["\u0275\u0275pipeBind1"](21,19,"item.edit.bitstreams.save-button"),""),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("ngIf",!i["\u0275\u0275pipeBind1"](25,21,n.isReinstatable())),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("ngIf",n.item&&(null==e?null:e.length)>0),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",0===(null==e?null:e.length)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!e),i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("ngIf",i["\u0275\u0275pipeBind1"](39,23,n.isReinstatable())),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("disabled",!i["\u0275\u0275pipeBind1"](42,25,n.hasChanges())||n.submitting),i["\u0275\u0275advance"](5),i["\u0275\u0275textInterpolate1"]("\xa0",i["\u0275\u0275pipeBind1"](47,27,"item.edit.bitstreams.save-button"),""),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("ngIf",!i["\u0275\u0275pipeBind1"](51,29,n.isReinstatable()))}}let Bt=(()=>{class e extends Be.a{constructor(e,t,n,i,a,r,s,o,c,l,d,p){super(e,t,n,i,a,r),this.itemService=e,this.objectUpdatesService=t,this.router=n,this.notificationsService=i,this.translateService=a,this.route=r,this.bitstreamService=s,this.objectCache=o,this.requestService=c,this.cdRef=l,this.bundleService=d,this.zone=p,this.bundlesOptions={id:"bundles-pagination-options",currentPage:1,pageSize:9999},this.columnSizes=new Te([new Pe(2,2,3,4,4),new Pe(2,3,3,3,3),new Pe(2,2,2,2,2),new Pe(6,5,4,3,3)]),this.submitting=!1}postItemInit(){this.bundles$=this.itemService.getBundles(this.item.id,new Re.a({pagination:this.bundlesOptions})).pipe(Object(j.i)(),Object(j.o)(),Object(p.a)(e=>e.page))}initializeNotificationsPrefix(){this.notificationsPrefix="item.edit.bitstreams.notifications."}submit(){this.submitting=!0,this.bundles$.pipe(Object(N.a)(1)).pipe(Object(_.a)(e=>Object(Ve.a)(...e.map(e=>this.objectUpdatesService.getFieldUpdates(e.self,[],!0)))),Object(p.a)(e=>[].concat(...e.map(e=>Object.values(e).filter(e=>e.changeType===$e.c.REMOVE)))),Object(p.a)(e=>e.map(e=>e.field))).pipe(Object(N.a)(1),Object(_.a)(e=>Object(u.e)(e)?Object(Ve.a)(...e.map(e=>this.bitstreamService.delete(e.id))):Object(l.a)(void 0))).pipe(Object(N.a)(1)).subscribe(e=>{this.displayNotifications("item.edit.bitstreams.notifications.remove",e),this.reset(),this.submitting=!1})}dropBitstream(e,t){this.zone.runOutsideAngular(()=>{Object(u.b)(t)&&Object(u.b)(t.fromIndex)&&Object(u.b)(t.toIndex)&&Object(u.b)(t.finish)&&this.bundleService.patch(e,[{op:"move",from:`/_links/bitstreams/${t.fromIndex}/href`,path:`/_links/bitstreams/${t.toIndex}/href`}]).pipe(Object(N.a)(1)).subscribe(n=>{this.zone.run(()=>{this.displayNotifications("item.edit.bitstreams.notifications.move",[n]),this.requestService.removeByHrefSubstring(e.self).pipe(Object(q.a)(e=>e),Object(N.a)(1)).subscribe(()=>t.finish())})})})}displayNotifications(e,t){if(Object(u.e)(t)){const n=t.filter(e=>Object(u.b)(e)&&e.hasFailed),i=t.filter(e=>Object(u.b)(e)&&e.hasSucceeded);n.forEach(t=>{this.notificationsService.error(this.translateService.instant(`${e}.failed.title`),t.errorMessage)}),i.length>0&&this.notificationsService.success(this.translateService.instant(`${e}.saved.title`),this.translateService.instant(`${e}.saved.content`))}}discard(){const e=this.notificationsService.info(this.getNotificationTitle("discarded"),this.getNotificationContent("discarded"),{timeOut:this.discardTimeOut});this.objectUpdatesService.discardAllFieldUpdates(this.url,e)}reinstate(){this.bundles$.pipe(Object(N.a)(1)).subscribe(e=>{e.forEach(e=>{this.objectUpdatesService.reinstateFieldUpdates(e.self)})})}isReinstatable(){return this.bundles$.pipe(Object(_.a)(e=>Object(Ve.a)(...e.map(e=>this.objectUpdatesService.isReinstatable(e.self)))),Object(p.a)(e=>e.includes(!0)))}hasChanges(){return this.bundles$.pipe(Object(_.a)(e=>Object(Ve.a)(...e.map(e=>this.objectUpdatesService.hasUpdates(e.self)))),Object(p.a)(e=>e.includes(!0)))}reset(){this.refreshItemCache()}refreshItemCache(){this.bundles$.pipe(Object(N.a)(1)).subscribe(e=>{e.forEach(e=>{this.objectCache.remove(e.self),this.requestService.removeByHrefSubstring(e.self)}),this.objectCache.remove(this.item.self),this.requestService.removeByHrefSubstring(this.item.self)})}ngOnDestroy(){this.itemUpdateSubscription&&this.itemUpdateSubscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](I.a),i["\u0275\u0275directiveInject"](W.a),i["\u0275\u0275directiveInject"](o.h),i["\u0275\u0275directiveInject"](O.a),i["\u0275\u0275directiveInject"](b.e),i["\u0275\u0275directiveInject"](o.a),i["\u0275\u0275directiveInject"](Fe.a),i["\u0275\u0275directiveInject"](De.a),i["\u0275\u0275directiveInject"](Ue.a),i["\u0275\u0275directiveInject"](i.ChangeDetectorRef),i["\u0275\u0275directiveInject"](ze.a),i["\u0275\u0275directiveInject"](i.NgZone))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-item-bitstreams"]],features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:3,vars:3,consts:[["class","item-bitstreams",4,"ngVar"],[1,"item-bitstreams"],[1,"button-row","top","d-flex","mt-2"],[1,"mr-auto","btn","btn-success",3,"routerLink"],[1,"fas","fa-upload"],[1,"d-none","d-sm-inline"],["class","btn btn-warning mr-1",3,"click",4,"ngIf"],[1,"btn","btn-primary","mr-1",3,"disabled","click"],[1,"fas","fa-save"],["class","btn btn-danger",3,"disabled","click",4,"ngIf"],["class","container table-bordered mt-4",4,"ngIf"],["class","alert alert-info w-100 d-inline-block mt-4","role","alert",4,"ngIf"],[3,"message",4,"ngIf"],[1,"button-row","bottom"],[1,"mt-4","float-right"],["class","btn btn-warning",3,"click",4,"ngIf"],[1,"btn","btn-primary",3,"disabled","click"],[1,"btn","btn-warning","mr-1",3,"click"],[1,"fas","fa-undo-alt"],[1,"btn","btn-danger",3,"disabled","click"],[1,"fas","fa-times"],[1,"container","table-bordered","mt-4"],[1,"row","header-row","font-weight-bold"],[3,"bundle","item","columnSizes","dropObject",4,"ngFor","ngForOf"],[3,"bundle","item","columnSizes","dropObject"],["role","alert",1,"alert","alert-info","w-100","d-inline-block","mt-4"],[3,"message"],[1,"btn","btn-warning",3,"click"]],template:function(e,t){1&e&&(i["\u0275\u0275template"](0,Mt,55,33,"div",0),i["\u0275\u0275pipe"](1,"async"),i["\u0275\u0275text"](2,"\n")),2&e&&i["\u0275\u0275property"]("ngVar",i["\u0275\u0275pipeBind1"](1,1,t.bundles$))},directives:[Y.a,o.i,a.p,Ne,a.o,xt,at.a],pipes:[a.b,b.d],styles:[".header-row[_ngcontent-%COMP%]{color:var(--bs-table-dark-color);background-color:var(--bs-table-dark-bg);border-color:var(--bs-table-dark-border-color)}.bundle-row[_ngcontent-%COMP%]{color:var(--bs-table-head-color);background-color:var(--bs-table-head-bg);border-color:var(--bs-table-border-color)}.row-element[_ngcontent-%COMP%]{padding:.75em;border-bottom:var(--bs-table-border-width) solid var(--bs-table-border-color)}.drag-handle[_ngcontent-%COMP%]{visibility:hidden}.bitstream-row-drag-handle[_ngcontent-%COMP%]:hover, .drag-handle[_ngcontent-%COMP%]:hover{cursor:move}[_nghost-%COMP%]     .bitstream-row-drag-handle:focus .drag-handle, [_nghost-%COMP%]     .bitstream-row:hover .drag-handle{visibility:visible!important}.cdk-drag-preview[_ngcontent-%COMP%]{margin-left:0;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12);box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%]{-webkit-transition:-webkit-transform .25s cubic-bezier(0,0,.2,1);transition:-webkit-transform .25s cubic-bezier(0,0,.2,1);transition:transform .25s cubic-bezier(0,0,.2,1);transition:transform .25s cubic-bezier(0,0,.2,1),-webkit-transform .25s cubic-bezier(0,0,.2,1)}.cdk-drop-list-dragging[_ngcontent-%COMP%]   .bitstream-row-drag-handle[_ngcontent-%COMP%], .cdk-drop-list-dragging[_ngcontent-%COMP%]   .drag-handle[_ngcontent-%COMP%]{cursor:-webkit-grabbing;cursor:grabbing}"]}),e})();var Vt=n("JX91"),$t=n("QhmN"),Rt=n("joI/"),Pt=n("gWc+"),Tt=n("DNva"),Ft=n("f7iX"),Dt=n("DdXh");const Ut=["tabs"];function zt(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275text"](0,"\n            "),i["\u0275\u0275elementStart"](1,"div",10),i["\u0275\u0275text"](2,"\n              "),i["\u0275\u0275elementStart"](3,"ds-collection-select",11),i["\u0275\u0275listener"]("confirm",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().removeMappings(t)}))("cancel",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().onCancel()})),i["\u0275\u0275pipe"](4,"async"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](5,"\n            "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](6,"\n          ")}if(2&e){const e=i["\u0275\u0275nextContext"]();let t=null;i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("key","browse")("dsoRD$",e.itemCollectionsRD$)("paginationOptions",null==(t=i["\u0275\u0275pipeBind1"](4,6,e.searchOptions$))?null:t.pagination)("confirmButton","item.edit.item-mapper.buttons.remove")("cancelButton","item.edit.item-mapper.cancel")("dangerConfirm",!0)}}function Lt(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275text"](1,"\n              "),i["\u0275\u0275elementStart"](2,"ds-collection-select",17),i["\u0275\u0275listener"]("confirm",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](2).mapCollections(t)}))("cancel",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](2).onCancel()})),i["\u0275\u0275pipe"](3,"async"),i["\u0275\u0275pipe"](4,"async"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](5,"\n            "),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"](2);let t=null,n=null;i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("key","map")("dsoRD$",e.mappedCollectionsRD$)("paginationOptions",null==(t=i["\u0275\u0275pipeBind1"](3,6,e.searchOptions$))?null:t.pagination)("sortOptions",null==(n=i["\u0275\u0275pipeBind1"](4,8,e.searchOptions$))?null:n.sort)("confirmButton","item.edit.item-mapper.buttons.add")("cancelButton","item.edit.item-mapper.cancel")}}function _t(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",18),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"]("\n              ",i["\u0275\u0275pipeBind1"](2,1,"item.edit.item-mapper.no-search"),"\n            "))}function Nt(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275text"](0,"\n            "),i["\u0275\u0275elementStart"](1,"div",12),i["\u0275\u0275text"](2,"\n              "),i["\u0275\u0275elementStart"](3,"div",13),i["\u0275\u0275text"](4,"\n                "),i["\u0275\u0275elementStart"](5,"ds-search-form",14),i["\u0275\u0275listener"]("submitSearch",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().performedSearch=!0})),i["\u0275\u0275pipe"](6,"async"),i["\u0275\u0275pipe"](7,"translate"),i["\u0275\u0275text"](8,"\n                "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](9,"\n              "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](10,"\n            "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](11,"\n\n            "),i["\u0275\u0275template"](12,Lt,6,10,"div",15),i["\u0275\u0275text"](13,"\n            "),i["\u0275\u0275template"](14,_t,3,3,"div",16),i["\u0275\u0275text"](15,"\n          ")}if(2&e){const e=i["\u0275\u0275nextContext"]();let t=null;i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("query",null==(t=i["\u0275\u0275pipeBind1"](6,6,e.searchOptions$))?null:t.query)("currentUrl","./")("inPlaceSearch",!0)("searchPlaceholder",i["\u0275\u0275pipeBind1"](7,8,"item.edit.item-mapper.search-form.placeholder")),i["\u0275\u0275advance"](7),i["\u0275\u0275property"]("ngIf",e.performedSearch),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!e.performedSearch)}}const At=function(e){return{name:e}};let qt=(()=>{class e{constructor(e,t,n,i,a,r,s,o,c){this.route=e,this.router=t,this.searchConfigService=n,this.searchService=i,this.notificationsService=a,this.itemDataService=r,this.collectionDataService=s,this.translateService=o,this.dsoNameService=c,this.performedSearch=!1}ngOnInit(){this.itemRD$=this.route.parent.data.pipe(Object(N.a)(1),Object(p.a)(e=>e.dso)),this.itemName$=this.itemRD$.pipe(Object(q.a)(e=>Object(u.b)(e)),Object(p.a)(e=>this.dsoNameService.getName(e.payload))),this.searchOptions$=this.searchConfigService.paginatedSearchOptions,this.loadCollectionLists()}loadCollectionLists(){console.log("loadCollectionLists"),this.shouldUpdate$=new ge.a(!0),this.itemCollectionsRD$=Object(d.a)(this.itemRD$.pipe(Object(j.j)()),this.shouldUpdate$).pipe(Object(_.a)(([e,t])=>(!0===t&&this.shouldUpdate$.next(!1),this.collectionDataService.findAllByHref(this.itemDataService.getMappedCollectionsEndpoint(e.id),void 0,!t,!1).pipe(Object(j.c)()))));const e=this.itemRD$.pipe(Object(j.j)(),Object(_.a)(e=>this.collectionDataService.findOwningCollectionFor(e)),Object(j.c)()),t=Object(d.a)(this.itemCollectionsRD$,e,this.searchOptions$);this.mappedCollectionsRD$=t.pipe(Object(_.a)(([e,t,n])=>this.searchService.search(Object.assign(new Re.a(n),{query:this.buildQuery([...e.payload.page,t.payload],n.query),dsoTypes:[$t.a.COLLECTION]}),1e4).pipe(Object(j.y)(),Object(Vt.a)(void 0))))}mapCollections(e){const t=Object(d.a)([this.itemRD$.pipe(Object(j.i)(),Object(p.a)(e=>e.payload),Object(p.a)(e=>e.id)),this.itemCollectionsRD$.pipe(Object(j.i)(),Object(p.a)(e=>e.payload.page),Object(p.a)(e=>e.map(e=>e.id)))]).pipe(Object(_.a)(([t,n])=>Object(d.a)(this.filterIds(e,n).map(e=>this.itemDataService.mapToCollection(t,e).pipe(Object(j.g)())))));this.showNotifications(t,"item.edit.item-mapper.notifications.add")}removeMappings(e){const t=this.itemRD$.pipe(Object(j.i)(),Object(p.a)(e=>e.payload.id),Object(_.a)(t=>Object(d.a)(e.map(e=>this.itemDataService.removeMappingFromCollection(t,e).pipe(Object(j.g)())))));this.showNotifications(t,"item.edit.item-mapper.notifications.remove")}filterIds(e,t){return e.filter(e=>t.indexOf(e)<0)}showNotifications(e,t){e.subscribe(e=>{const n=e.filter(e=>e.hasSucceeded),i=e.filter(e=>e.hasFailed);n.length>0&&(Object(d.a)([this.translateService.get(`${t}.success.head`),this.translateService.get(`${t}.success.content`,{amount:n.length})]).subscribe(([e,t])=>{this.notificationsService.success(e,t)}),this.shouldUpdate$.next(!0)),i.length>0&&Object(d.a)([this.translateService.get(`${t}.error.head`),this.translateService.get(`${t}.error.content`,{amount:i.length})]).subscribe(([e,t])=>{this.notificationsService.error(e,t)}),this.switchToFirstTab()})}tabChange(e){this.performedSearch=!1,this.router.navigateByUrl(this.getCurrentUrl())}getCurrentUrl(){return this.router.url.indexOf("?")>-1?this.router.url.substring(0,this.router.url.indexOf("?")):this.router.url}buildQuery(e,t){let n=t;for(const i of e)n=this.addExcludeCollection(i.id,n);return n}addExcludeCollection(e,t){const n=`-search.resourceid:${e}`;return Object(u.e)(t)?`${t} AND ${n}`:n}switchToFirstTab(){this.tabs.select("browseTab")}onCancel(){this.itemRD$.pipe(Object(j.i)(),Object(j.o)(),Object(N.a)(1)).subscribe(e=>{this.router.navigate([Object(m.h)(e)])})}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](o.a),i["\u0275\u0275directiveInject"](o.h),i["\u0275\u0275directiveInject"](Rt.a),i["\u0275\u0275directiveInject"](Pt.a),i["\u0275\u0275directiveInject"](O.a),i["\u0275\u0275directiveInject"](I.a),i["\u0275\u0275directiveInject"](Tt.a),i["\u0275\u0275directiveInject"](b.e),i["\u0275\u0275directiveInject"](Ge.a))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-item-collection-mapper"]],viewQuery:function(e,t){if(1&e&&i["\u0275\u0275viewQuery"](Ut,1),2&e){let e;i["\u0275\u0275queryRefresh"](e=i["\u0275\u0275loadQuery"]())&&(t.tabs=e.first)}},decls:45,vars:24,consts:[[1,"container"],[1,"row"],[1,"col-12"],["id","item-name",3,"innerHTML"],["ngbNav","",1,"nav-tabs",3,"destroyOnHide","navChange"],["tabs","ngbNav"],[3,"ngbNavItem"],["ngbNavLink",""],["ngbNavContent",""],[3,"ngbNavOutlet"],[1,"mt-2"],[1,"mt-2",3,"key","dsoRD$","paginationOptions","confirmButton","cancelButton","dangerConfirm","confirm","cancel"],[1,"row","mt-2"],[1,"col-12","col-lg-6"],["id","search-form",3,"query","currentUrl","inPlaceSearch","searchPlaceholder","submitSearch"],[4,"ngIf"],["class","alert alert-info w-100","role","alert",4,"ngIf"],[1,"mt-2",3,"key","dsoRD$","paginationOptions","sortOptions","confirmButton","cancelButton","confirm","cancel"],["role","alert",1,"alert","alert-info","w-100"]],template:function(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275text"](1,"\n  "),i["\u0275\u0275elementStart"](2,"div",1),i["\u0275\u0275text"](3,"\n    "),i["\u0275\u0275elementStart"](4,"div",2),i["\u0275\u0275text"](5,"\n      "),i["\u0275\u0275elementStart"](6,"h2"),i["\u0275\u0275text"](7),i["\u0275\u0275pipe"](8,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](9,"\n      "),i["\u0275\u0275element"](10,"p",3),i["\u0275\u0275pipe"](11,"translate"),i["\u0275\u0275pipe"](12,"async"),i["\u0275\u0275text"](13,"\n      "),i["\u0275\u0275elementStart"](14,"p"),i["\u0275\u0275text"](15),i["\u0275\u0275pipe"](16,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](17,"\n\n      "),i["\u0275\u0275elementStart"](18,"ul",4,5),i["\u0275\u0275listener"]("navChange",(function(e){return t.tabChange(e)})),i["\u0275\u0275text"](20,"\n        "),i["\u0275\u0275elementStart"](21,"li",6),i["\u0275\u0275text"](22,"\n          "),i["\u0275\u0275elementStart"](23,"a",7),i["\u0275\u0275text"](24),i["\u0275\u0275pipe"](25,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](26,"\n          "),i["\u0275\u0275template"](27,zt,7,8,"ng-template",8),i["\u0275\u0275text"](28,"\n        "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](29,"\n        "),i["\u0275\u0275elementStart"](30,"li",6),i["\u0275\u0275text"](31,"\n          "),i["\u0275\u0275elementStart"](32,"a",7),i["\u0275\u0275text"](33),i["\u0275\u0275pipe"](34,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](35,"\n          "),i["\u0275\u0275template"](36,Nt,16,10,"ng-template",8),i["\u0275\u0275text"](37,"\n        "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](38,"\n      "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](39,"\n      "),i["\u0275\u0275element"](40,"div",9),i["\u0275\u0275text"](41,"\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](42,"\n  "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](43,"\n"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](44,"\n")),2&e){const e=i["\u0275\u0275reference"](19);i["\u0275\u0275advance"](7),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](8,9,"item.edit.item-mapper.head")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("innerHTML",i["\u0275\u0275pipeBind2"](11,11,"item.edit.item-mapper.item",i["\u0275\u0275pureFunction1"](22,At,i["\u0275\u0275pipeBind1"](12,14,t.itemName$))),i["\u0275\u0275sanitizeHtml"]),i["\u0275\u0275advance"](5),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](16,16,"item.edit.item-mapper.description")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("destroyOnHide",!0),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngbNavItem","browseTab"),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](25,18,"item.edit.item-mapper.tabs.browse")),i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("ngbNavItem","mapTab"),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](34,20,"item.edit.item-mapper.tabs.map")),i["\u0275\u0275advance"](7),i["\u0275\u0275property"]("ngbNavOutlet",e)}},directives:[r.t,r.v,r.w,r.u,r.y,Ft.a,Dt.a,a.p],pipes:[b.d,a.b],styles:[""],data:{animation:[c.a,c.c]},changeDetection:0}),e})();var Kt=n("zdyR"),Xt=n("3Pt+");function Qt(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"span"),i["\u0275\u0275text"](1,"\n                "),i["\u0275\u0275element"](2,"i",17),i["\u0275\u0275text"](3),i["\u0275\u0275pipe"](4,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](4,1,"item.edit.move.save-button"),"\n              "))}function Wt(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"span"),i["\u0275\u0275text"](1,"\n                "),i["\u0275\u0275element"](2,"i",18),i["\u0275\u0275text"](3),i["\u0275\u0275pipe"](4,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](4,1,"item.edit.move.processing"),"\n              "))}const Jt=function(e){return{id:e}},Ht=function(){return{type:"collection"}},Gt=function(e){return[e,"edit"]};let Yt=(()=>{class e{constructor(e,t,n,i,a,r,s){this.route=e,this.router=t,this.notificationsService=n,this.itemDataService=i,this.searchService=a,this.translateService=r,this.requestService=s,this.selectorType=$t.a.COLLECTION,this.inheritPolicies=!1,this.canSubmit=!1,this.processing=!1,this.COLLECTIONS=[$t.a.COLLECTION]}ngOnInit(){this.itemRD$=this.route.data.pipe(Object(p.a)(e=>e.dso),Object(j.i)()),this.itemPageRoute$=this.itemRD$.pipe(Object(j.d)(),Object(p.a)(e=>Object(m.h)(e))),this.itemRD$.subscribe(e=>{this.item=e.payload}),this.itemRD$.pipe(Object(j.i)(),Object(j.o)(),Object(_.a)(e=>e.owningCollection),Object(j.i)(),Object(j.o)()).subscribe(e=>{this.originalCollection=e})}selectDso(e){this.selectedCollection=e,this.selectedCollectionName=e.name,this.canSubmit=!0}getCurrentUrl(){return this.router.url}moveToCollection(){this.processing=!0;const e=this.itemDataService.moveToCollection(this.item.id,this.selectedCollection).pipe(Object(j.g)());e.subscribe(e=>{e.hasSucceeded?this.notificationsService.success(this.translateService.get("item.edit.move.success")):this.notificationsService.error(this.translateService.get("item.edit.move.error"))}),e.pipe(Object(_.a)(()=>this.requestService.setStaleByHrefSubstring(this.item.id)),Object(_.a)(()=>this.itemDataService.findById(this.item.id,!1,!0,Object(X.a)("owningCollection"))),Object(j.g)()).subscribe(()=>{this.processing=!1,this.router.navigate([Object(m.e)(this.item)])})}discard(){this.selectedCollection=null,this.canSubmit=!1}get canMove(){var e;return this.canSubmit&&(null===(e=this.selectedCollection)||void 0===e?void 0:e.id)!==this.originalCollection.id}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](o.a),i["\u0275\u0275directiveInject"](o.h),i["\u0275\u0275directiveInject"](O.a),i["\u0275\u0275directiveInject"](I.a),i["\u0275\u0275directiveInject"](Pt.a),i["\u0275\u0275directiveInject"](b.e),i["\u0275\u0275directiveInject"](Ue.a))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-item-move"]],decls:84,vars:40,consts:[[1,"container"],[1,"row"],[1,"col-12"],[1,"card","mb-3"],[1,"card-header"],[1,"card-body"],[3,"types","currentDSOId","onSelect"],["type","checkbox","name","tc","id","inheritPoliciesCheckbox",3,"ngModel","ngModelChange"],["for","inheritPoliciesCheckbox"],[1,"button-row","bottom"],[1,"float-right"],[1,"btn","btn-outline-secondary",3,"routerLink"],[1,"fas","fa-arrow-left"],[1,"btn","btn-primary","mr-0",3,"disabled","click"],[4,"ngIf"],[1,"btn","btn-danger",3,"disabled","click"],[1,"fas","fa-times"],[1,"fas","fa-save"],[1,"fas","fa-circle-notch","fa-spin"]],template:function(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275text"](1,"\n    "),i["\u0275\u0275elementStart"](2,"div",1),i["\u0275\u0275text"](3,"\n        "),i["\u0275\u0275elementStart"](4,"div",2),i["\u0275\u0275text"](5,"\n            "),i["\u0275\u0275elementStart"](6,"h2"),i["\u0275\u0275text"](7),i["\u0275\u0275pipe"](8,"translate"),i["\u0275\u0275pipe"](9,"async"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](10,"\n            "),i["\u0275\u0275elementStart"](11,"p"),i["\u0275\u0275text"](12),i["\u0275\u0275pipe"](13,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](14,"\n            "),i["\u0275\u0275elementStart"](15,"div",1),i["\u0275\u0275text"](16,"\n                "),i["\u0275\u0275elementStart"](17,"div",2),i["\u0275\u0275text"](18,"\n                  "),i["\u0275\u0275elementStart"](19,"div",3),i["\u0275\u0275text"](20,"\n                    "),i["\u0275\u0275elementStart"](21,"div",4),i["\u0275\u0275text"](22),i["\u0275\u0275pipe"](23,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](24,"\n                    "),i["\u0275\u0275elementStart"](25,"div",5),i["\u0275\u0275text"](26,"\n                      "),i["\u0275\u0275elementStart"](27,"ds-authorized-collection-selector",6),i["\u0275\u0275listener"]("onSelect",(function(e){return t.selectDso(e)})),i["\u0275\u0275text"](28,"\n                      "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](29,"\n                    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](30,"\n                    "),i["\u0275\u0275element"](31,"div"),i["\u0275\u0275text"](32,"\n                  "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](33,"\n                "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](34,"\n            "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](35,"\n            "),i["\u0275\u0275elementStart"](36,"div",1),i["\u0275\u0275text"](37,"\n                "),i["\u0275\u0275elementStart"](38,"div",2),i["\u0275\u0275text"](39,"\n                    "),i["\u0275\u0275elementStart"](40,"p"),i["\u0275\u0275text"](41,"\n                        "),i["\u0275\u0275elementStart"](42,"input",7),i["\u0275\u0275listener"]("ngModelChange",(function(e){return t.inheritPolicies=e})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](43,"\n                        "),i["\u0275\u0275elementStart"](44,"label",8),i["\u0275\u0275text"](45),i["\u0275\u0275pipe"](46,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](47,"\n                    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](48,"\n                    "),i["\u0275\u0275elementStart"](49,"p"),i["\u0275\u0275text"](50),i["\u0275\u0275pipe"](51,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](52,"\n                "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](53,"\n            "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](54,"\n\n          "),i["\u0275\u0275elementStart"](55,"div",9),i["\u0275\u0275text"](56,"\n            "),i["\u0275\u0275elementStart"](57,"div",10),i["\u0275\u0275text"](58,"\n              "),i["\u0275\u0275elementStart"](59,"button",11),i["\u0275\u0275pipe"](60,"async"),i["\u0275\u0275text"](61,"\n                "),i["\u0275\u0275element"](62,"i",12),i["\u0275\u0275text"](63),i["\u0275\u0275pipe"](64,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](65,"\n              "),i["\u0275\u0275elementStart"](66,"button",13),i["\u0275\u0275listener"]("click",(function(){return t.moveToCollection()})),i["\u0275\u0275text"](67,"\n              "),i["\u0275\u0275template"](68,Qt,5,3,"span",14),i["\u0275\u0275text"](69,"\n                "),i["\u0275\u0275template"](70,Wt,5,3,"span",14),i["\u0275\u0275text"](71,"\n              "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](72,"\n              "),i["\u0275\u0275elementStart"](73,"button",15),i["\u0275\u0275listener"]("click",(function(){return t.discard()})),i["\u0275\u0275text"](74,"\n                "),i["\u0275\u0275element"](75,"i",16),i["\u0275\u0275text"](76),i["\u0275\u0275pipe"](77,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](78,"\n            "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](79,"\n          "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](80,"\n        "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](81,"\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](82,"\n"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](83,"\n")),2&e){let e=null;i["\u0275\u0275advance"](7),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind2"](8,15,"item.edit.move.head",i["\u0275\u0275pureFunction1"](35,Jt,null==(e=i["\u0275\u0275pipeBind1"](9,18,t.itemRD$))||null==e.payload?null:e.payload.handle))),i["\u0275\u0275advance"](5),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](13,20,"item.edit.move.description")),i["\u0275\u0275advance"](10),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind2"](23,22,"dso-selector.placeholder",i["\u0275\u0275pureFunction0"](37,Ht))),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("types",t.COLLECTIONS)("currentDSOId",t.selectedCollection?t.selectedCollection.id:t.originalCollection.id),i["\u0275\u0275advance"](15),i["\u0275\u0275property"]("ngModel",t.inheritPolicies),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](46,25,"item.edit.move.inheritpolicies.checkbox")),i["\u0275\u0275advance"](5),i["\u0275\u0275textInterpolate1"]("\n                        ",i["\u0275\u0275pipeBind1"](51,27,"item.edit.move.inheritpolicies.description"),"\n                    "),i["\u0275\u0275advance"](9),i["\u0275\u0275property"]("routerLink",i["\u0275\u0275pureFunction1"](38,Gt,i["\u0275\u0275pipeBind1"](60,29,t.itemPageRoute$))),i["\u0275\u0275advance"](4),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](64,31,"item.edit.move.cancel"),"\n              "),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("disabled",!t.canMove),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!t.processing),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",t.processing),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("disabled",!t.canSubmit),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](77,33,"item.edit.move.discard-button"),"\n              ")}},directives:[Kt.a,Xt.CheckboxControlValueAccessor,Xt.NgControlStatus,Xt.NgModel,o.i,a.p],pipes:[b.d,a.b],encapsulation:2}),e})();var Zt=n("aFKe"),en=n("BK0m"),tn=n("vkgz"),nn=n("1Pbu"),an=n("kcku"),rn=n("EGek");function sn(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275text"](1,"\n                        "),i["\u0275\u0275elementStart"](2,"div",15),i["\u0275\u0275text"](3),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](4,"\n                        "),i["\u0275\u0275elementStart"](5,"div"),i["\u0275\u0275text"](6),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](7,"\n                    "),i["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate1"]("\n                            ",e.metadataField,"\n                        "),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate1"]("\n                            ",e.metadataValue.value,"\n                        ")}}function on(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",9),i["\u0275\u0275listener"]("click",(function(){i["\u0275\u0275restoreView"](e);const n=t.ngVar,a=i["\u0275\u0275nextContext"]().$implicit;return i["\u0275\u0275nextContext"]().setSelectedVirtualMetadataItem(a,!n)})),i["\u0275\u0275text"](1,"\n                "),i["\u0275\u0275elementStart"](2,"div",10),i["\u0275\u0275text"](3,"\n                    "),i["\u0275\u0275elementStart"](4,"label"),i["\u0275\u0275text"](5,"\n                        "),i["\u0275\u0275element"](6,"input",11),i["\u0275\u0275text"](7,"\n                    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](8,"\n                "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](9,"\n                "),i["\u0275\u0275elementStart"](10,"div",12),i["\u0275\u0275text"](11,"\n                    "),i["\u0275\u0275elementStart"](12,"ds-listable-object-component-loader",13),i["\u0275\u0275text"](13,"\n                    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](14,"\n                    "),i["\u0275\u0275template"](15,sn,8,2,"div",14),i["\u0275\u0275text"](16,"\n                "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](17,"\n            "),i["\u0275\u0275elementEnd"]()}if(2&e){const e=t.ngVar,n=i["\u0275\u0275nextContext"]().$implicit,a=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("checked",e),i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("object",n),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngForOf",a.virtualMetadata.get(n.uuid))}}function cn(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275text"](1,"\n            "),i["\u0275\u0275template"](2,on,18,3,"div",8),i["\u0275\u0275pipe"](3,"async"),i["\u0275\u0275text"](4,"\n        "),i["\u0275\u0275elementContainerEnd"]()),2&e){const e=t.$implicit,n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngVar",i["\u0275\u0275pipeBind1"](3,1,n.isSelectedVirtualMetadataItem(e)))}}let ln=(()=>{class e{constructor(e){this.objectUpdatesService=e,this.close=new i.EventEmitter,this.save=new i.EventEmitter,this.virtualMetadata=new Map}get items(){return[this.leftItem,this.rightItem]}getVirtualMetadata(e){return Object.entries(e.metadata).map(([e,t])=>t.filter(t=>!e.startsWith("relation")&&t.authority&&t.authority.endsWith(this.relationshipId)).map(t=>({metadataField:e,metadataValue:t}))).reduce((e,t)=>e.concat(t),[])}setSelectedVirtualMetadataItem(e,t){this.objectUpdatesService.setSelectedVirtualMetadata(this.url,this.relationshipId,e.uuid,t)}isSelectedVirtualMetadataItem(e){return this.objectUpdatesService.isSelectedVirtualMetadata(this.url,this.relationshipId,e.uuid)}trackItem(e,t){return t&&t.uuid}ngOnInit(){this.items.forEach(e=>{this.virtualMetadata.set(e.uuid,this.getVirtualMetadata(e))})}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](W.a))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-virtual-metadata"]],inputs:{url:"url",relationshipId:"relationshipId",leftItem:"leftItem",rightItem:"rightItem"},outputs:{close:"close",save:"save"},decls:27,vars:8,consts:[[1,"modal-header"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"d-flex","flex-row-reverse","m-2"],[1,"btn","btn-primary","save",3,"click"],[1,"fas","fa-save"],["class","item d-flex flex-row",3,"click",4,"ngVar"],[1,"item","d-flex","flex-row",3,"click"],[1,"m-2"],["type","checkbox",1,"select",3,"checked"],[1,"flex-column"],[3,"object"],[4,"ngFor","ngForOf"],[1,"font-weight-bold"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275text"](1,"\n    "),i["\u0275\u0275elementStart"](2,"div",0),i["\u0275\u0275text"](3),i["\u0275\u0275pipe"](4,"translate"),i["\u0275\u0275elementStart"](5,"button",1),i["\u0275\u0275listener"]("click",(function(){return t.close.emit()})),i["\u0275\u0275text"](6,"\n            "),i["\u0275\u0275elementStart"](7,"span",2),i["\u0275\u0275text"](8,"\xd7"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](9,"\n        "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](10,"\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](11,"\n    "),i["\u0275\u0275elementStart"](12,"div",3),i["\u0275\u0275text"](13,"\n        "),i["\u0275\u0275template"](14,cn,5,3,"ng-container",4),i["\u0275\u0275text"](15,"\n        "),i["\u0275\u0275elementStart"](16,"div",5),i["\u0275\u0275text"](17,"\n            "),i["\u0275\u0275elementStart"](18,"button",6),i["\u0275\u0275listener"]("click",(function(){return t.save.emit()})),i["\u0275\u0275text"](19,"\n                "),i["\u0275\u0275element"](20,"i",7),i["\u0275\u0275text"](21),i["\u0275\u0275pipe"](22,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](23,"\n        "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](24,"\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](25,"\n"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](26,"\n")),2&e&&(i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate1"]("",i["\u0275\u0275pipeBind1"](4,4,"virtual-metadata.delete-relationship.modal-head"),"\n        "),i["\u0275\u0275advance"](11),i["\u0275\u0275property"]("ngForOf",t.items)("ngForTrackBy",t.trackItem),i["\u0275\u0275advance"](7),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](22,6,"item.edit.metadata.save-button"),"\n            "))},directives:[a.o,Y.a,Z.a],pipes:[b.d,a.b],encapsulation:2}),e})();function dn(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",2),i["\u0275\u0275text"](1,"\n  "),i["\u0275\u0275elementStart"](2,"div",3),i["\u0275\u0275text"](3,"\n    "),i["\u0275\u0275elementStart"](4,"ds-listable-object-component-loader",4),i["\u0275\u0275pipe"](5,"async"),i["\u0275\u0275text"](6,"\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](7,"\n  "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](8,"\n  "),i["\u0275\u0275elementStart"](9,"div",5),i["\u0275\u0275text"](10,"\n    "),i["\u0275\u0275elementStart"](11,"div",6),i["\u0275\u0275text"](12,"\n      "),i["\u0275\u0275elementStart"](13,"button",7),i["\u0275\u0275listener"]("click",(function(){i["\u0275\u0275restoreView"](e);const t=i["\u0275\u0275nextContext"](),n=i["\u0275\u0275reference"](4);return t.openVirtualMetadataModal(n)})),i["\u0275\u0275pipe"](14,"translate"),i["\u0275\u0275text"](15,"\n        "),i["\u0275\u0275element"](16,"i",8),i["\u0275\u0275text"](17,"\n      "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](18,"\n      "),i["\u0275\u0275elementStart"](19,"button",9),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().undo()})),i["\u0275\u0275pipe"](20,"translate"),i["\u0275\u0275text"](21,"\n        "),i["\u0275\u0275element"](22,"i",10),i["\u0275\u0275text"](23,"\n      "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](24,"\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](25,"\n  "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](26,"\n"),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("object",i["\u0275\u0275pipeBind1"](5,7,e.relatedItem$))("viewMode",e.viewMode)("value",e.nameVariant),i["\u0275\u0275advance"](9),i["\u0275\u0275propertyInterpolate"]("title",i["\u0275\u0275pipeBind1"](14,9,"item.edit.metadata.edit.buttons.remove")),i["\u0275\u0275property"]("disabled",!e.canRemove()),i["\u0275\u0275advance"](6),i["\u0275\u0275propertyInterpolate"]("title",i["\u0275\u0275pipeBind1"](20,11,"item.edit.metadata.edit.buttons.undo")),i["\u0275\u0275property"]("disabled",!e.canUndo())}}function pn(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275text"](0,"\n  "),i["\u0275\u0275elementStart"](1,"ds-virtual-metadata",11),i["\u0275\u0275listener"]("close",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().closeVirtualMetadataModal()}))("save",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().remove()})),i["\u0275\u0275pipe"](2,"async"),i["\u0275\u0275pipe"](3,"async"),i["\u0275\u0275text"](4,"\n  "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](5,"\n")}if(2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("relationshipId",e.relationship.id)("leftItem",i["\u0275\u0275pipeBind1"](2,4,e.leftItem$))("rightItem",i["\u0275\u0275pipeBind1"](3,6,e.rightItem$))("url",e.url)}}let un=(()=>{class e{constructor(e,t){this.objectUpdatesService=e,this.modalService=t,this.viewMode=K.a.ListElement}get relationship(){return this.update.relationship}get update(){return this.fieldUpdate.field}get nameVariant(){return this.update.nameVariant}ngOnChanges(){this.relationship&&(this.relationship.leftItem||this.relationship.rightItem)?(this.leftItem$=this.relationship.leftItem.pipe(Object(j.i)(),Object(j.o)(),Object(q.a)(e=>Object(u.b)(e)&&Object(u.e)(e.uuid))),this.rightItem$=this.relationship.rightItem.pipe(Object(j.i)(),Object(j.o)(),Object(q.a)(e=>Object(u.b)(e)&&Object(u.e)(e.uuid))),this.relatedItem$=Object(d.a)(this.leftItem$,this.rightItem$).pipe(Object(p.a)(e=>e.find(e=>e.uuid!==this.editItem.uuid)))):this.relatedItem$=Object(l.a)(this.update.relatedItem)}remove(){this.closeVirtualMetadataModal(),Object(d.a)(this.leftItem$,this.rightItem$).pipe(Object(p.a)(e=>e.map(e=>this.objectUpdatesService.isSelectedVirtualMetadata(this.url,this.relationship.id,e.uuid))),Object(_.a)(e=>Object(d.a)(e)),Object(p.a)(e=>Object.assign({},this.fieldUpdate.field,{keepLeftVirtualMetadata:!0===e[0],keepRightVirtualMetadata:!0===e[1]})),Object(N.a)(1)).subscribe(e=>this.objectUpdatesService.saveRemoveFieldUpdate(this.url,e))}openVirtualMetadataModal(e){this.modalRef=this.modalService.open(e)}closeVirtualMetadataModal(){this.modalRef.close()}undo(){this.objectUpdatesService.removeSingleFieldUpdate(this.url,this.fieldUpdate.field.uuid)}canRemove(){return this.fieldUpdate.changeType!==$e.c.REMOVE&&this.fieldUpdate.changeType!==$e.c.ADD}canUndo(){return this.fieldUpdate.changeType>=0}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](W.a),i["\u0275\u0275directiveInject"](r.q))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-edit-relationship"]],inputs:{fieldUpdate:"fieldUpdate",url:"url",editItem:"editItem"},features:[i["\u0275\u0275NgOnChangesFeature"]],decls:6,vars:3,consts:[["class","row",4,"ngIf"],["virtualMetadataModal",""],[1,"row"],[1,"col-10","relationship"],[3,"object","viewMode","value"],[1,"col-2"],[1,"btn-group","relationship-action-buttons"],[1,"btn","btn-outline-danger","btn-sm",3,"disabled","title","click"],[1,"fas","fa-trash-alt","fa-fw"],[1,"btn","btn-outline-warning","btn-sm",3,"disabled","title","click"],[1,"fas","fa-undo-alt","fa-fw"],[3,"relationshipId","leftItem","rightItem","url","close","save"]],template:function(e,t){1&e&&(i["\u0275\u0275template"](0,dn,27,13,"div",0),i["\u0275\u0275pipe"](1,"async"),i["\u0275\u0275text"](2,"\n"),i["\u0275\u0275template"](3,pn,6,8,"ng-template",null,1,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275text"](5,"\n")),2&e&&i["\u0275\u0275property"]("ngIf",i["\u0275\u0275pipeBind1"](1,1,t.relatedItem$))},directives:[a.p,Z.a,ln],pipes:[a.b,b.d],styles:[".btn[disabled][_ngcontent-%COMP%]{color:var(--bs-gray-600);border-color:var(--bs-gray-600);z-index:0}.relationship-action-buttons[_ngcontent-%COMP%]{margin:0;position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}"]}),e})();const mn=function(){return{}},bn=function(e,t,n){return{"alert-success":e,"alert-warning":t,"alert-danger":n}};function hn(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"ds-edit-relationship",8),i["\u0275\u0275text"](1,"\n              "),i["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=i["\u0275\u0275nextContext"](4);i["\u0275\u0275property"]("fieldUpdate",e||i["\u0275\u0275pureFunction0"](4,mn))("url",n.url)("editItem",n.item)("ngClass",i["\u0275\u0275pureFunction3"](5,bn,1===e.changeType,0===e.changeType,2===e.changeType))}}function fn(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](2,1,"item.edit.relationships.no-relationships")))}function gn(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275text"](1,"\n          "),i["\u0275\u0275elementStart"](2,"ds-pagination",5),i["\u0275\u0275pipe"](3,"async"),i["\u0275\u0275pipe"](4,"async"),i["\u0275\u0275pipe"](5,"async"),i["\u0275\u0275text"](6,"\n            "),i["\u0275\u0275elementStart"](7,"div",6),i["\u0275\u0275text"](8,"\n              "),i["\u0275\u0275template"](9,hn,2,9,"ds-edit-relationship",7),i["\u0275\u0275text"](10,"\n            "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](11,"\n          "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](12,"\n          "),i["\u0275\u0275template"](13,fn,3,3,"div",4),i["\u0275\u0275text"](14,"\n        "),i["\u0275\u0275elementContainerEnd"]()),2&e){const e=t.ngVar,n=i["\u0275\u0275nextContext"](3);let a=null,r=null;i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("paginationOptions",n.paginationConfig)("pageInfoState",null==(a=i["\u0275\u0275pipeBind1"](3,8,n.relationshipsRd$))||null==a.payload?null:a.payload.pageInfo)("collectionSize",(null==(r=i["\u0275\u0275pipeBind1"](4,10,n.relationshipsRd$))||null==r.payload?null:r.payload.totalElements)+i["\u0275\u0275pipeBind1"](5,12,n.nbAddedFields$))("hideGear",!0)("hidePagerWhenSinglePage",!0),i["\u0275\u0275advance"](7),i["\u0275\u0275property"]("ngForOf",e)("ngForTrackBy",n.trackUpdate),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("ngIf",0===e.length)}}function vn(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275text"](1,"\n        "),i["\u0275\u0275template"](2,gn,15,14,"ng-container",3),i["\u0275\u0275pipe"](3,"dsObjectValues"),i["\u0275\u0275text"](4,"\n    "),i["\u0275\u0275elementContainerEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]().ngVar;i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngVar",i["\u0275\u0275pipeBind1"](3,1,e))}}function xn(e,t){1&e&&i["\u0275\u0275element"](0,"ds-loading")}function yn(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275text"](1,"\n    "),i["\u0275\u0275template"](2,vn,5,3,"ng-container",4),i["\u0275\u0275pipe"](3,"async"),i["\u0275\u0275text"](4,"\n    "),i["\u0275\u0275template"](5,xn,1,0,"ds-loading",4),i["\u0275\u0275pipe"](6,"async"),i["\u0275\u0275text"](7,"\n"),i["\u0275\u0275elementContainerEnd"]()),2&e){const e=t.ngVar,n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",e&&!i["\u0275\u0275pipeBind1"](3,2,n.loading$)),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",i["\u0275\u0275pipeBind1"](6,4,n.loading$))}}let jn=(()=>{class e{constructor(e,t,n,a,r,s,o){this.objectUpdatesService=e,this.linkService=t,this.relationshipService=n,this.relationshipTypeService=a,this.modalService=r,this.paginationService=s,this.selectableListService=o,this.submit=new i.EventEmitter,this.updates$=new ge.a(void 0),this.relationshipsRd$=new ge.a(void 0),this.isLastPage$=new ge.a(!0),this.loading$=new ge.a(!0),this.nbAddedFields$=new ge.a(0),this.subs=[]}getRelationshipMessageKey(){return Object(d.a)(this.getLabel(),this.relatedEntityType$).pipe(Object(p.a)(([e,t])=>{if(Object(u.b)(e)&&e.indexOf("is")>-1&&e.indexOf("Of")>-1){const n=`${e.substring(2,e.indexOf("Of"))}`;return n!==t.label?`relationships.is${n}Of.${t.label}`:`relationships.is${n}Of`}return e}))}getLabel(){return Object(d.a)([this.relationshipType.leftType,this.relationshipType.rightType].map(e=>e.pipe(Object(j.i)(),Object(j.o)()))).pipe(Object(p.a)(e=>[this.relationshipType.leftwardType,this.relationshipType.rightwardType][e.findIndex(e=>e.id===this.itemType.id)]))}trackUpdate(e,t){return t&&t.field?t.field.uuid:void 0}openLookup(){this.modalRef=this.modalService.open(nn.a,{size:"lg"});const e=this.modalRef.componentInstance;e.repeatable=!0,e.isEditRelationship=!0,e.listId=this.listId,e.item=this.item,e.relationshipType=this.relationshipType,e.currentItemIsLeftItem$=this.currentItemIsLeftItem$,e.toAdd=[],e.toRemove=[],e.isPending=!1,this.item.owningCollection.pipe(Object(j.j)()).subscribe(t=>{e.collection=t}),e.select=(...t)=>{t.forEach(t=>{const n=t.indexableObject,i=e.toRemove.findIndex(e=>e.uuid===n.uuid);-1!==i?e.toRemove.splice(i,1):this.getRelationFromId(n).subscribe(i=>{if(i){const t=e.toRemove.findIndex(e=>e.indexableObject.uuid===n.uuid);-1!==t&&e.toRemove.splice(t,1)}else e.toAdd.push(t);this.loading$.next(!0),this.relationshipsRd$.next(this.relationshipsRd$.getValue())})})},e.deselect=(...t)=>{t.forEach(t=>{const n=t.indexableObject,i=e.toAdd.findIndex(e=>e.indexableObject.uuid===n.uuid);-1!==i?e.toAdd.splice(i,1):e.toRemove.push(t)})},e.submitEv=()=>{const t=[];e.toAdd.forEach(e=>{const n=e.indexableObject;t.push(this.relationshipService.getNameVariant(this.listId,n.uuid).pipe(Object(p.a)(t=>{const i={uuid:this.relationshipType.id+"-"+e.indexableObject.uuid,nameVariant:t,type:this.relationshipType,relatedItem:n};return this.objectUpdatesService.saveAddFieldUpdate(this.url,i),i})))}),e.toRemove.forEach(e=>{t.push(this.relationshipService.getNameVariant(this.listId,e.indexableObjectuuid).pipe(Object(_.a)(t=>this.getRelationFromId(e.indexableObject).pipe(Object(p.a)(e=>{const n={uuid:e.id,nameVariant:t,type:this.relationshipType,relationship:e};return this.objectUpdatesService.saveRemoveFieldUpdate(this.url,n),n})))))}),Object(d.a)(t).subscribe(t=>{setTimeout(()=>{this.submit.emit()},1e3),e.isPending=!0})},e.discardEv=()=>{e.toAdd.forEach(e=>{this.selectableListService.deselectSingle(this.listId,e)}),e.toRemove.forEach(e=>{this.selectableListService.selectSingle(this.listId,e)}),e.toAdd=[],e.toRemove=[]},this.relatedEntityType$.pipe(Object(N.a)(1)).subscribe(t=>{e.relationshipOptions=Object.assign(new an.a,{relationshipType:t.label,searchConfiguration:t.label.toLowerCase(),nameVariants:"true"})}),this.selectableListService.deselectAll(this.listId)}getRelationFromId(e){return this.currentItemIsLeftItem$.pipe(Object(N.a)(1),Object(_.a)(t=>{let n;return n=t?this.relationshipService.searchByItemsAndType(this.relationshipType.id,this.item.uuid,this.relationshipType.leftwardType,[e.id]).pipe(Object(j.i)(),Object(j.o)()):this.relationshipService.searchByItemsAndType(this.relationshipType.id,this.item.uuid,this.relationshipType.rightwardType,[e.id]).pipe(Object(j.i)(),Object(j.o)()),n.pipe(Object(p.a)(e=>e.page[0]))}))}getFieldUpdatesForRelatedItem(e){return this.updates$.pipe(Object(N.a)(1),Object(p.a)(e=>Object.values(e).map(e=>e.field).filter(e=>e.relationship)),Object(be.a)(t=>Object(d.a)(t.map(e=>this.getRelatedItem(e.relationship))).pipe(Object(A.a)([]),Object(p.a)(n=>t.filter((t,i)=>n[i].uuid===e.uuid)))))}getIsRelatedItem(e){return this.currentItemIsLeftItem$.pipe(Object(N.a)(1),Object(p.a)(t=>t?!!this.item.allMetadataValues("relation."+this.relationshipType.leftwardType).find(t=>t===e.uuid):!!this.item.allMetadataValues("relation."+this.relationshipType.rightwardType).find(t=>t===e.uuid)))}getRelatedItem(e){return this.relationshipService.isLeftItem(e,this.item).pipe(Object(_.a)(t=>t?e.rightItem:e.leftItem),Object(j.i)(),Object(j.o)())}ngOnInit(){this.relationshipLeftAndRightType$=Object(d.a)([this.relationshipType.leftType,this.relationshipType.rightType].map(e=>e.pipe(Object(j.i)(),Object(j.o)()))),this.relatedEntityType$=this.relationshipLeftAndRightType$.pipe(Object(p.a)(e=>e.find(e=>e.uuid!==this.itemType.uuid)),Object(u.c)()),this.relatedEntityType$.pipe(Object(N.a)(1)).subscribe(e=>this.listId=`edit-relationship-${this.itemType.id}-${e.id}`),this.currentItemIsLeftItem$=this.relationshipLeftAndRightType$.pipe(Object(p.a)(([e,t])=>e.id===this.itemType.id||t.id!==this.itemType.id&&void console.warn(`The item ${this.item.uuid} is not on the right or the left side of relationship type ${this.relationshipType.uuid}`))),this.paginationConfig=new Ae.a,this.paginationConfig.id=`er${this.relationshipType.id}`,this.paginationConfig.pageSize=5,this.paginationConfig.currentPage=1;const e=this.paginationService.getCurrentPagination(this.paginationConfig.id,this.paginationConfig).pipe(Object(tn.a)(()=>this.loading$.next(!0)));this.subs.push(Object(d.a)([e,this.currentItemIsLeftItem$]).pipe(Object(_.a)(([e,t])=>this.relationshipService.getItemRelationshipsByLabel(this.item,t?this.relationshipType.leftwardType:this.relationshipType.rightwardType,{elementsPerPage:e.pageSize,currentPage:e.currentPage},!1,!0,Object(X.a)("leftItem"),Object(X.a)("rightItem")))).subscribe(e=>{this.relationshipsRd$.next(e)})),this.subs.push(this.relationshipsRd$.pipe(Object(u.c)(),Object(j.c)()).subscribe(e=>{this.isLastPage$.next(Object(u.a)(e.payload._links.next))})),this.subs.push(this.relationshipsRd$.pipe(Object(u.c)(),Object(j.c)(),Object(_.a)(e=>Object(ve.a)(e.payload.page).pipe(Object(be.a)(e=>this.relationshipService.isLeftItem(e,this.item).pipe(Object(p.a)(t=>[e,t]))),Object(p.a)(([e,t])=>({uuid:e.id,type:this.relationshipType,relationship:e,nameVariant:t?e.rightwardValue:e.leftwardValue})),Object(fe.a)(),Object(A.a)([]))),Object(_.a)(e=>this.objectUpdatesService.getFieldUpdates(this.url,e).pipe(Object(p.a)(e=>{const t={};return this.nbAddedFields$.next(0),Object.keys(e).forEach(n=>{Object(u.b)(e[n])&&e[n].field.type.id===this.relationshipType.id&&(e[n].changeType===$e.c.ADD?(this.nbAddedFields$.next(this.nbAddedFields$.getValue()+1),!0===this.isLastPage$.getValue()&&(t[n]=e[n])):t[n]=e[n])}),t}))),Object(Vt.a)({})).subscribe(e=>{this.loading$.next(!1),this.updates$.next(e)}))}ngOnDestroy(){this.subs.filter(e=>Object(u.b)(e)).forEach(e=>e.unsubscribe())}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](W.a),i["\u0275\u0275directiveInject"](G.a),i["\u0275\u0275directiveInject"](J.a),i["\u0275\u0275directiveInject"](en.a),i["\u0275\u0275directiveInject"](r.q),i["\u0275\u0275directiveInject"](We.a),i["\u0275\u0275directiveInject"](rn.a))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-edit-relationship-list"]],inputs:{item:"item",itemType:"itemType",url:"url",relationshipType:"relationshipType",hasChanges:"hasChanges"},outputs:{submit:"submit"},decls:18,vars:14,consts:[[1,"ml-2","btn","btn-success",3,"disabled","click"],[1,"fas","fa-plus"],[1,"d-none","d-sm-inline"],[4,"ngVar"],[4,"ngIf"],[3,"paginationOptions","pageInfoState","collectionSize","hideGear","hidePagerWhenSinglePage"],[1,"my-2"],["class","relationship-row d-block alert",3,"fieldUpdate","url","editItem","ngClass",4,"ngFor","ngForOf","ngForTrackBy"],[1,"relationship-row","d-block","alert",3,"fieldUpdate","url","editItem","ngClass"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"h5"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275pipe"](3,"async"),i["\u0275\u0275elementStart"](4,"button",0),i["\u0275\u0275listener"]("click",(function(){return t.openLookup()})),i["\u0275\u0275pipe"](5,"async"),i["\u0275\u0275text"](6,"\n        "),i["\u0275\u0275element"](7,"i",1),i["\u0275\u0275text"](8,"\n        "),i["\u0275\u0275elementStart"](9,"span",2),i["\u0275\u0275text"](10),i["\u0275\u0275pipe"](11,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](12,"\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](13,"\n"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](14,"\n"),i["\u0275\u0275template"](15,yn,8,6,"ng-container",3),i["\u0275\u0275pipe"](16,"async"),i["\u0275\u0275text"](17,"\n")),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"]("\n    ",i["\u0275\u0275pipeBind1"](2,4,i["\u0275\u0275pipeBind1"](3,6,t.getRelationshipMessageKey())),"\n    "),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](5,8,t.hasChanges)),i["\u0275\u0275advance"](6),i["\u0275\u0275textInterpolate1"]("\xa0",i["\u0275\u0275pipeBind1"](11,10,"item.edit.relationships.edit.buttons.add"),""),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngVar",i["\u0275\u0275pipeBind1"](16,12,t.updates$)))},directives:[Y.a,a.p,Ke.a,a.o,un,a.m,at.a],pipes:[b.d,a.b,Qe.a],styles:[".relationship-row[_ngcontent-%COMP%]:not(.alert){padding:var(--bs-alert-padding-y) 0}.relationship-row.alert[_ngcontent-%COMP%]{margin-left:calc(-1 * var(--bs-alert-padding-x));margin-right:calc(-1 * var(--bs-alert-padding-x));margin-top:-1px;margin-bottom:-1px}"]}),e})();function Sn(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",14),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](3).discard()})),i["\u0275\u0275pipe"](1,"async"),i["\u0275\u0275element"](2,"i",15),i["\u0275\u0275text"](3,"\n          "),i["\u0275\u0275elementStart"](4,"span",9),i["\u0275\u0275text"](5),i["\u0275\u0275pipe"](6,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](7,"\n        "),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"](3);i["\u0275\u0275property"]("disabled",!i["\u0275\u0275pipeBind1"](1,2,e.hasChanges())),i["\u0275\u0275advance"](5),i["\u0275\u0275textInterpolate1"]("\xa0",i["\u0275\u0275pipeBind1"](6,4,"item.edit.metadata.discard-button"),"")}}function On(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",16),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](3).reinstate()})),i["\u0275\u0275element"](1,"i",17),i["\u0275\u0275text"](2,"\n          "),i["\u0275\u0275elementStart"](3,"span",9),i["\u0275\u0275text"](4),i["\u0275\u0275pipe"](5,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](6,"\n        "),i["\u0275\u0275elementEnd"]()}2&e&&(i["\u0275\u0275advance"](4),i["\u0275\u0275textInterpolate1"]("\xa0",i["\u0275\u0275pipeBind1"](5,1,"item.edit.metadata.reinstate-button"),""))}function In(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",19),i["\u0275\u0275text"](1,"\n            "),i["\u0275\u0275elementStart"](2,"ds-edit-relationship-list",20),i["\u0275\u0275listener"]("submit",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](5).submit()})),i["\u0275\u0275pipe"](3,"async"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](4,"\n          "),i["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=i["\u0275\u0275nextContext"](5);i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("url",n.url)("item",n.item)("itemType",i["\u0275\u0275pipeBind1"](3,5,n.entityType$))("relationshipType",e)("hasChanges",n.hasChanges())}}function Cn(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275text"](1,"\n          "),i["\u0275\u0275template"](2,In,5,7,"div",18),i["\u0275\u0275text"](3,"\n        "),i["\u0275\u0275elementContainerEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]().ngVar;i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",e)}}function wn(e,t){1&e&&i["\u0275\u0275element"](0,"ds-loading")}function En(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275text"](1,"\n        "),i["\u0275\u0275template"](2,Cn,4,1,"ng-container",2),i["\u0275\u0275text"](3,"\n        "),i["\u0275\u0275template"](4,wn,1,0,"ds-loading",2),i["\u0275\u0275text"](5,"\n      "),i["\u0275\u0275elementContainerEnd"]()),2&e){const e=t.ngVar;i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",e),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!e)}}function kn(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",21),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](3).discard()})),i["\u0275\u0275pipe"](1,"async"),i["\u0275\u0275element"](2,"i",15),i["\u0275\u0275text"](3,"\n            "),i["\u0275\u0275elementStart"](4,"span",9),i["\u0275\u0275text"](5),i["\u0275\u0275pipe"](6,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](7,"\n          "),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"](3);i["\u0275\u0275property"]("disabled",!i["\u0275\u0275pipeBind1"](1,2,e.hasChanges())),i["\u0275\u0275advance"](5),i["\u0275\u0275textInterpolate1"]("\xa0",i["\u0275\u0275pipeBind1"](6,4,"item.edit.metadata.discard-button"),"")}}function Mn(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",22),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](3).reinstate()})),i["\u0275\u0275element"](1,"i",17),i["\u0275\u0275text"](2,"\n            "),i["\u0275\u0275elementStart"](3,"span",9),i["\u0275\u0275text"](4),i["\u0275\u0275pipe"](5,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](6,"\n          "),i["\u0275\u0275elementEnd"]()}2&e&&(i["\u0275\u0275advance"](4),i["\u0275\u0275textInterpolate1"]("\xa0",i["\u0275\u0275pipeBind1"](5,1,"item.edit.metadata.reinstate-button"),""))}function Bn(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275text"](1,"\n      "),i["\u0275\u0275elementStart"](2,"div",4),i["\u0275\u0275text"](3,"\n        "),i["\u0275\u0275template"](4,Sn,8,6,"button",5),i["\u0275\u0275pipe"](5,"async"),i["\u0275\u0275text"](6,"\n        "),i["\u0275\u0275template"](7,On,7,3,"button",6),i["\u0275\u0275pipe"](8,"async"),i["\u0275\u0275text"](9,"\n        "),i["\u0275\u0275elementStart"](10,"button",7),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](2).submit()})),i["\u0275\u0275pipe"](11,"async"),i["\u0275\u0275element"](12,"i",8),i["\u0275\u0275text"](13,"\n          "),i["\u0275\u0275elementStart"](14,"span",9),i["\u0275\u0275text"](15),i["\u0275\u0275pipe"](16,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](17,"\n        "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](18,"\n      "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](19,"\n      "),i["\u0275\u0275template"](20,En,6,2,"ng-container",1),i["\u0275\u0275pipe"](21,"async"),i["\u0275\u0275text"](22,"\n      "),i["\u0275\u0275elementStart"](23,"div",10),i["\u0275\u0275text"](24,"\n        "),i["\u0275\u0275elementStart"](25,"div",11),i["\u0275\u0275text"](26,"\n          "),i["\u0275\u0275template"](27,kn,8,6,"button",12),i["\u0275\u0275pipe"](28,"async"),i["\u0275\u0275text"](29,"\n          "),i["\u0275\u0275template"](30,Mn,7,3,"button",13),i["\u0275\u0275pipe"](31,"async"),i["\u0275\u0275text"](32,"\n          "),i["\u0275\u0275elementStart"](33,"button",7),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](2).submit()})),i["\u0275\u0275pipe"](34,"async"),i["\u0275\u0275element"](35,"i",8),i["\u0275\u0275text"](36,"\n            "),i["\u0275\u0275elementStart"](37,"span",9),i["\u0275\u0275text"](38),i["\u0275\u0275pipe"](39,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](40,"\n          "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](41,"\n        "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](42,"\n      "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](43,"\n    "),i["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("ngIf",!i["\u0275\u0275pipeBind1"](5,9,e.isReinstatable())),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",i["\u0275\u0275pipeBind1"](8,11,e.isReinstatable())),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("disabled",!i["\u0275\u0275pipeBind1"](11,13,e.hasChanges())),i["\u0275\u0275advance"](5),i["\u0275\u0275textInterpolate1"]("\xa0",i["\u0275\u0275pipeBind1"](16,15,"item.edit.metadata.save-button"),""),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngVar",i["\u0275\u0275pipeBind1"](21,17,e.relationshipTypes$)),i["\u0275\u0275advance"](7),i["\u0275\u0275property"]("ngIf",!i["\u0275\u0275pipeBind1"](28,19,e.isReinstatable())),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",i["\u0275\u0275pipeBind1"](31,21,e.isReinstatable())),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("disabled",!i["\u0275\u0275pipeBind1"](34,23,e.hasChanges())),i["\u0275\u0275advance"](5),i["\u0275\u0275textInterpolate1"]("\xa0",i["\u0275\u0275pipeBind1"](39,25,"item.edit.metadata.save-button"),"")}}function Vn(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",23),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"]("\n      ",i["\u0275\u0275pipeBind1"](2,1,"item.edit.relationships.no-entity-type"),"\n    "))}function $n(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275text"](1,"\n    "),i["\u0275\u0275template"](2,Bn,44,27,"ng-container",2),i["\u0275\u0275text"](3,"\n    "),i["\u0275\u0275template"](4,Vn,3,3,"div",3),i["\u0275\u0275text"](5,"\n  "),i["\u0275\u0275elementContainerEnd"]()),2&e){const e=t.ngVar;i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",e),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!e)}}let Rn=(()=>{class e extends Be.a{constructor(e,t,n,i,a,r,s,o,c,l,d,p,u){super(e,t,n,i,a,r),this.itemService=e,this.objectUpdatesService=t,this.router=n,this.notificationsService=i,this.translateService=a,this.route=r,this.relationshipService=s,this.objectCache=o,this.requestService=c,this.entityTypeService=l,this.relationshipTypeService=d,this.cdr=p,this.modalService=u}initializeUpdates(){const e=this.item.firstMetadataValue("dspace.entity.type");void 0!==e?(this.relationshipTypes$=this.relationshipTypeService.searchByEntityType(e,!0,!0,...this.getRelationshipTypeFollowLinks()).pipe(Object(p.a)(e=>e.page)),this.entityType$=this.entityTypeService.getEntityTypeByLabel(e).pipe(Object(j.i)(),Object(j.o)())):this.entityType$=Object(l.a)(void 0)}initializeNotificationsPrefix(){this.notificationsPrefix="item.edit.relationships.notifications."}submit(){const e=this.relationshipService.getItemRelationshipsArray(this.item).pipe(Object(Vt.a)([]),Object(p.a)(e=>e.map(e=>Object.assign(new Zt.a,e,{uuid:e.id}))),Object(_.a)(e=>this.objectUpdatesService.getFieldUpdatesExclusive(this.url,e)),Object(p.a)(e=>Object.values(e).filter(e=>e.changeType===$e.c.REMOVE).map(e=>e.field))),t=this.objectUpdatesService.getFieldUpdates(this.url,[]).pipe(Object(p.a)(e=>Object.values(e).filter(e=>Object(u.b)(e)).filter(e=>e.changeType===$e.c.ADD).map(e=>e.field)));Object(d.a)(e,t).pipe(Object(N.a)(1)).subscribe(([e,t])=>{[this.deleteRelationships(e),this.addRelationships(t)].forEach(e=>e.subscribe(e=>{e.length>0&&(this.initializeOriginalFields(),this.cdr.detectChanges(),this.displayNotifications(e),this.modalService.dismissAll())}))})}deleteRelationships(e){return Object(Ve.a)(...e.map(e=>{let t;return t=e.keepLeftVirtualMetadata&&e.keepRightVirtualMetadata?"all":e.keepLeftVirtualMetadata?"left":e.keepRightVirtualMetadata?"right":"none",this.relationshipService.deleteRelationship(e.uuid,t)}))}addRelationships(e){return Object(Ve.a)(...e.map(e=>this.entityType$.pipe(Object(_.a)(t=>this.entityTypeService.isLeftType(e.type,t)),Object(_.a)(t=>{let n,i,a,r;return t?(n=this.item,i=e.relatedItem,a=null,r=e.nameVariant):(n=e.relatedItem,i=this.item,a=e.nameVariant,r=null),this.relationshipService.addRelationship(e.type.id,n,i,a,r)}))))}displayNotifications(e){const t=e.filter(e=>e.hasFailed),n=e.filter(e=>e.hasSucceeded);t.forEach(e=>{this.notificationsService.error(this.getNotificationTitle("failed"),e.errorMessage)}),n.length>0&&this.notificationsService.success(this.getNotificationTitle("saved"),this.getNotificationContent("saved"))}initializeOriginalFields(){return this.relationshipService.getRelatedItems(this.item).pipe(Object(N.a)(1)).subscribe(e=>{this.objectUpdatesService.initialize(this.url,e,this.item.lastModified)})}getRelationshipTypeFollowLinks(){return[Object(X.a)("leftType"),Object(X.a)("rightType")]}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](I.a),i["\u0275\u0275directiveInject"](W.a),i["\u0275\u0275directiveInject"](o.h),i["\u0275\u0275directiveInject"](O.a),i["\u0275\u0275directiveInject"](b.e),i["\u0275\u0275directiveInject"](o.a),i["\u0275\u0275directiveInject"](J.a),i["\u0275\u0275directiveInject"](De.a),i["\u0275\u0275directiveInject"](Ue.a),i["\u0275\u0275directiveInject"](H.a),i["\u0275\u0275directiveInject"](en.a),i["\u0275\u0275directiveInject"](i.ChangeDetectorRef),i["\u0275\u0275directiveInject"](r.q))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-item-relationships"]],features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:6,vars:3,consts:[[1,"item-relationships"],[4,"ngVar"],[4,"ngIf"],["class","alert alert-info mt-2","role","alert",4,"ngIf"],[1,"button-row","top","d-flex"],["class","btn btn-danger ml-auto",3,"disabled","click",4,"ngIf"],["class","btn btn-warning ml-auto",3,"click",4,"ngIf"],[1,"btn","btn-primary",3,"disabled","click"],[1,"fas","fa-save"],[1,"d-none","d-sm-inline"],[1,"button-row","bottom"],[1,"float-right"],["class","btn btn-danger",3,"disabled","click",4,"ngIf"],["class","btn btn-warning",3,"click",4,"ngIf"],[1,"btn","btn-danger","ml-auto",3,"disabled","click"],[1,"fas","fa-times"],[1,"btn","btn-warning","ml-auto",3,"click"],[1,"fas","fa-undo-alt"],["class","mb-4",4,"ngFor","ngForOf"],[1,"mb-4"],[3,"url","item","itemType","relationshipType","hasChanges","submit"],[1,"btn","btn-danger",3,"disabled","click"],[1,"btn","btn-warning",3,"click"],["role","alert",1,"alert","alert-info","mt-2"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275text"](1,"\n  "),i["\u0275\u0275template"](2,$n,6,2,"ng-container",1),i["\u0275\u0275pipe"](3,"async"),i["\u0275\u0275text"](4,"\n"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](5,"\n")),2&e&&(i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngVar",i["\u0275\u0275pipeBind1"](3,1,t.entityType$)))},directives:[Y.a,a.p,a.o,jn,at.a],pipes:[a.b,b.d],styles:[".button-row[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-right:calc(.5 * var(--bs-spacer))}.button-row[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:last-child{margin-right:0}@media screen and (min-width:576px){.button-row[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{min-width:var(--ds-edit-item-button-min-width)}}.button-row.top[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-top:calc(var(--bs-spacer) / 2);margin-bottom:calc(var(--bs-spacer) / 2)}"]}),e})();var Pn=n("A0IO"),Tn=n("ac5F"),Fn=n("Y9an");function Dn(e,t){if(1&e&&i["\u0275\u0275element"](0,"ds-item-versions",3),2&e){const e=i["\u0275\u0275nextContext"]().ngVar;i["\u0275\u0275property"]("item",e)("displayWhenEmpty",!0)("displayTitle",!1)("displayActions",!0)}}function Un(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",1),i["\u0275\u0275text"](1,"\n  "),i["\u0275\u0275template"](2,Dn,1,4,"ds-item-versions",2),i["\u0275\u0275text"](3,"\n"),i["\u0275\u0275elementEnd"]()),2&e){const e=t.ngVar;i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",e)}}let zn=(()=>{class e{constructor(e){this.route=e,this.AlertTypeEnum=Tn.a}ngOnInit(){this.itemRD$=this.route.parent.parent.data.pipe(Object(p.a)(e=>e.dso)).pipe(Object(j.i)())}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](o.a))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-item-version-history"]],decls:3,vars:3,consts:[["class","mt-2",4,"ngVar"],[1,"mt-2"],[3,"item","displayWhenEmpty","displayTitle","displayActions",4,"ngIf"],[3,"item","displayWhenEmpty","displayTitle","displayActions"]],template:function(e,t){if(1&e&&(i["\u0275\u0275template"](0,Un,4,1,"div",0),i["\u0275\u0275pipe"](1,"async"),i["\u0275\u0275text"](2,"\n")),2&e){let e=null;i["\u0275\u0275property"]("ngVar",null==(e=i["\u0275\u0275pipeBind1"](1,1,t.itemRD$))?null:e.payload)}},directives:[Y.a,a.p,Fn.a],pipes:[a.b],encapsulation:2}),e})();var Ln=n("JIr8"),_n=n("f+Ev"),Nn=n("VYMa"),An=n("+Bs4"),qn=n("xPuV");function Kn(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275text"](1,"\n      "),i["\u0275\u0275element"](2,"ds-resource-policies",2),i["\u0275\u0275text"](3,"\n    "),i["\u0275\u0275elementContainerEnd"]()),2&e){const e=t.$implicit;i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("resourceType","bitstream")("resourceUUID",e.id)}}function Xn(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275text"](1,"\n    "),i["\u0275\u0275element"](2,"ds-resource-policies",2),i["\u0275\u0275text"](3,"\n    "),i["\u0275\u0275template"](4,Kn,4,2,"ng-container",3),i["\u0275\u0275pipe"](5,"async"),i["\u0275\u0275text"](6,"\n  "),i["\u0275\u0275elementContainerEnd"]()),2&e){const e=t.$implicit,n=i["\u0275\u0275nextContext"]();let a=null;i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("resourceType","bundle")("resourceUUID",e.id),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",null==(a=i["\u0275\u0275pipeBind1"](5,3,n.bundleBitstreamsMap.get(e.id)))?null:a.page)}}let Qn=(()=>{class e{constructor(e,t){this.linkService=e,this.route=t,this.bundleBitstreamsMap=new Map,this.bundles$=new ge.a([]),this.subs=[]}ngOnInit(){this.item$=this.route.data.pipe(Object(p.a)(e=>e.dso),Object(j.k)(),Object(p.a)(e=>this.linkService.resolveLink(e,Object(X.a)("bundles",{},Object(X.a)("bitstreams")))));const e=this.item$.pipe(Object(q.a)(e=>Object(u.e)(e.bundles)),Object(be.a)(e=>e.bundles),Object(j.k)(),Object(Ln.a)(e=>(console.error(e),Object(l.a)(Object(_n.b)(null,[])))));this.subs.push(e.pipe(Object(N.a)(1),Object(p.a)(e=>e.page)).subscribe(e=>{this.bundles$.next(e)}),e.pipe(Object(N.a)(1),Object(be.a)(e=>e.page),Object(p.a)(e=>({id:e.id,bitstreams:this.getBundleBitstreams(e)}))).subscribe(e=>{this.bundleBitstreamsMap.set(e.id,e.bitstreams)}))}getItemUUID(){return this.item$.pipe(Object(p.a)(e=>e.id),Object(S.a)(e=>Object(u.e)(e)))}getItemBundles(){return this.bundles$.asObservable()}getBundleBitstreams(e){return e.bitstreams.pipe(Object(j.j)(),Object(Ln.a)(e=>(console.error(e),Object(l.a)(Object(_n.b)(null,[])))))}ngOnDestroy(){this.subs.filter(e=>Object(u.b)(e)).forEach(e=>e.unsubscribe())}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](G.a),i["\u0275\u0275directiveInject"](o.a))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-item-authorizations"]],decls:11,vars:9,consts:[[1,"container"],[3,"type","content"],[3,"resourceType","resourceUUID"],[4,"ngFor","ngForTrackById","ngForOf"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275text"](1,"\n  "),i["\u0275\u0275element"](2,"ds-alert",1),i["\u0275\u0275text"](3,"\n  "),i["\u0275\u0275element"](4,"ds-resource-policies",2),i["\u0275\u0275pipe"](5,"async"),i["\u0275\u0275text"](6,"\n  "),i["\u0275\u0275template"](7,Xn,7,5,"ng-container",3),i["\u0275\u0275pipe"](8,"async"),i["\u0275\u0275text"](9,"\n"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](10,"\n\n")),2&e&&(i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("type","alert-info")("content","item.edit.authorizations.heading"),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("resourceType","item")("resourceUUID",i["\u0275\u0275pipeBind1"](5,5,t.getItemUUID())),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngForOf",i["\u0275\u0275pipeBind1"](8,7,t.getItemBundles())))},directives:[Nn.a,An.a,a.o,qn.a],pipes:[a.b],encapsulation:2}),e})();var Wn=n("n1Qy"),Jn=n("G5zm"),Hn=n("EEUA"),Gn=n("ALMP"),Yn=n("tv3Y"),Zn=n("jrTz"),ei=n("0TMo"),ti=n("z3/6"),ni=n("Vurf");let ii=(()=>{class e extends ei.a{constructor(e,t,n,i){super(e,t,n,i),this.resolver=e,this.authorizationService=t,this.router=n,this.authService=i}getFeatureID(e,t){return Object(l.a)(xe.a.ReinstateItem)}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275inject"](ti.a),i["\u0275\u0275inject"](ye.a),i["\u0275\u0275inject"](o.h),i["\u0275\u0275inject"](ni.a))},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),ai=(()=>{class e extends ei.a{constructor(e,t,n,i){super(e,t,n,i),this.resolver=e,this.authorizationService=t,this.router=n,this.authService=i}getFeatureID(e,t){return Object(l.a)(xe.a.WithdrawItem)}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275inject"](ti.a),i["\u0275\u0275inject"](ye.a),i["\u0275\u0275inject"](o.h),i["\u0275\u0275inject"](ni.a))},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),ri=(()=>{class e extends ei.a{constructor(e,t,n,i){super(e,t,n,i),this.resolver=e,this.authorizationService=t,this.router=n,this.authService=i}getFeatureID(e,t){return Object(l.a)(xe.a.CanEditMetadata)}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275inject"](ti.a),i["\u0275\u0275inject"](ye.a),i["\u0275\u0275inject"](o.h),i["\u0275\u0275inject"](ni.a))},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var si=n("920W"),oi=n("HENg");let ci=(()=>{class e extends oi.a{constructor(e,t,n,i){super(e,t,n,i),this.resolver=e,this.authorizationService=t,this.router=n,this.authService=i}getFeatureIDs(e,t){return Object(l.a)([xe.a.CanManageMappings,xe.a.WithdrawItem,xe.a.ReinstateItem,xe.a.CanManagePolicies,xe.a.CanMakePrivate,xe.a.CanDelete,xe.a.CanMove])}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275inject"](ti.a),i["\u0275\u0275inject"](ye.a),i["\u0275\u0275inject"](o.h),i["\u0275\u0275inject"](ni.a))},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),li=(()=>{class e extends ei.a{constructor(e,t,n,i){super(e,t,n,i),this.resolver=e,this.authorizationService=t,this.router=n,this.authService=i}getFeatureID(e,t){return Object(l.a)(xe.a.CanManageBitstreamBundles)}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275inject"](ti.a),i["\u0275\u0275inject"](ye.a),i["\u0275\u0275inject"](o.h),i["\u0275\u0275inject"](ni.a))},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),di=(()=>{class e extends ei.a{constructor(e,t,n,i){super(e,t,n,i),this.resolver=e,this.authorizationService=t,this.router=n,this.authService=i}getFeatureID(e,t){return Object(l.a)(xe.a.CanManageRelationships)}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275inject"](ti.a),i["\u0275\u0275inject"](ye.a),i["\u0275\u0275inject"](o.h),i["\u0275\u0275inject"](ni.a))},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),pi=(()=>{class e extends ei.a{constructor(e,t,n,i){super(e,t,n,i),this.resolver=e,this.authorizationService=t,this.router=n,this.authService=i}getFeatureID(e,t){return Object(l.a)(xe.a.CanManageVersions)}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275inject"](ti.a),i["\u0275\u0275inject"](ye.a),i["\u0275\u0275inject"](o.h),i["\u0275\u0275inject"](ni.a))},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),ui=(()=>{class e extends ei.a{constructor(e,t,n,i){super(e,t,n,i),this.resolver=e,this.authorizationService=t,this.router=n,this.authService=i}getFeatureID(e,t){return Object(l.a)(xe.a.CanManageMappings)}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275inject"](ti.a),i["\u0275\u0275inject"](ye.a),i["\u0275\u0275inject"](o.h),i["\u0275\u0275inject"](ni.a))},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),mi=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({providers:[Pn.a,Yn.a,Jn.a,Wn.a,ii,ai,si.a,ri,ci,li,di,pi,ui],imports:[[o.l.forChild([{path:"",resolve:{breadcrumb:Pn.a},data:{breadcrumbKey:"item.edit"},children:[{path:"",component:y,children:[{path:"",redirectTo:"status",pathMatch:"full"},{path:"status",component:ke,data:{title:"item.edit.tabs.status.title",showBreadcrumbs:!0},canActivate:[ci]},{path:"bitstreams",component:Bt,data:{title:"item.edit.tabs.bitstreams.title",showBreadcrumbs:!0},canActivate:[li]},{path:"metadata",component:Me.a,data:{title:"item.edit.tabs.metadata.title",showBreadcrumbs:!0},canActivate:[ri]},{path:"relationships",component:Rn,data:{title:"item.edit.tabs.relationships.title",showBreadcrumbs:!0},canActivate:[di]},{path:"versionhistory",component:zn,data:{title:"item.edit.tabs.versionhistory.title",showBreadcrumbs:!0},canActivate:[pi]},{path:"mapper",component:qt,data:{title:"item.edit.tabs.item-mapper.title",showBreadcrumbs:!0},canActivate:[ui]}]},{path:"mapper",component:qt},{path:Zn.g,component:V,canActivate:[ai]},{path:Zn.f,component:P,canActivate:[ii]},{path:Zn.d,component:D},{path:Zn.e,component:L},{path:Zn.b,component:ue},{path:Zn.c,component:Yt,data:{title:"item.edit.move.title"}},{path:Zn.a,children:[{path:"create",resolve:{resourcePolicyTarget:Wn.a},component:Hn.a,data:{title:"resource-policies.create.page.title"}},{path:"edit",resolve:{resourcePolicy:Jn.a},component:Gn.a,data:{title:"resource-policies.edit.page.title"}},{path:"",component:Qn,data:{title:"item.edit.authorizations.title"}}]}]}])]]}),e})();n("mo41");var bi=n("iprd"),hi=n("GFj5");let fi=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({providers:[ze.a,Qe.a],imports:[[a.c,s.a,r.P,mi,bi.a,qe.d,hi.a]]}),e})()},GCaJ:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var i=n("zr/d"),a=n("LRne"),r=n("84Zn"),s=n("cBqT"),o=n("eIep"),c=n("lJxs"),l=n("J3qs"),d=n("fXoL"),p=n("TVZh"),u=n("sfEo"),m=n("C765");let b=(()=>{class e{constructor(e,t){this.linkService=e,this.dsoNameService=t}getBreadcrumbs(e,t){const n=this.dsoNameService.getName(e),d=new i.a(n,t),u=e.getParentLinkKey();return this.linkService.resolveLink(e,Object(r.a)(u))[u].pipe(Object(s.a)(e=>e.hasSucceeded||204===e.statusCode),Object(o.a)(e=>{if(Object(l.b)(e.payload)){const t=e.payload;return this.getBreadcrumbs(t,Object(p.r)(t))}return Object(a.a)([])}),Object(c.a)(e=>[...e,d]))}}return e.\u0275fac=function(t){return new(t||e)(d["\u0275\u0275inject"](u.a),d["\u0275\u0275inject"](m.a))},e.\u0275prov=d["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},GsQf:function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var i=n("fXoL"),a=n("itXk"),r=n("lJxs"),s=n("vkgz"),o=n("eIep"),c=n("SxV6"),l=n("daFX"),d=n("AytR"),p=n("Xioo"),u=n("1QIV"),m=n("J3qs"),b=n("kGaT"),h=n("iqTE"),f=n("loKC"),g=n("tyNb"),v=n("lI3o"),x=n("sYmb");let y=(()=>{class e extends l.a{constructor(e,t,n,i,a,r){super(t,i,a),this.itemService=e,this.objectUpdatesService=t,this.router=n,this.notificationsService=i,this.translateService=a,this.route=r}ngOnInit(){Object(m.b)(this.item)?this.setItem(this.item):this.itemUpdateSubscription=Object(a.a)([this.route.data,this.route.parent.data]).pipe(Object(r.a)(([e,t])=>Object.assign({},e,t)),Object(r.a)(e=>e.dso),Object(s.a)(e=>{this.item=e.payload}),Object(o.a)(e=>this.itemService.findByHref(e.payload._links.self.href,!0,!0,...b.a)),Object(u.c)()).subscribe(e=>{this.setItem(e.payload)}),this.discardTimeOut=d.a.item.edit.undoTimeout,this.url=this.router.url,this.url.indexOf("?")>0&&(this.url=this.url.substr(0,this.url.indexOf("?"))),this.hasChanges().pipe(Object(c.a)()).subscribe(e=>{e?this.checkLastModified():this.initializeOriginalFields()}),this.initializeNotificationsPrefix(),this.initializeUpdates()}setItem(e){this.item=e,this.itemPageRoute=Object(p.h)(this.item),this.postItemInit(),this.initializeUpdates()}ngOnDestroy(){Object(m.b)(this.itemUpdateSubscription)&&this.itemUpdateSubscription.unsubscribe()}postItemInit(){}initializeUpdates(){}initializeNotificationsPrefix(){}initializeOriginalFields(){}submit(){}trackUpdate(e,t){return t&&t.field?t.field.uuid:void 0}isValid(){return this.objectUpdatesService.isValidPage(this.url)}checkLastModified(){const e=this.item.lastModified;this.objectUpdatesService.getLastModified(this.url).pipe(Object(c.a)()).subscribe(t=>{t.getDate()!==e.getDate()&&(this.notificationsService.warning(this.getNotificationTitle("outdated"),this.getNotificationContent("outdated")),this.initializeOriginalFields())})}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](h.a),i["\u0275\u0275directiveInject"](f.a),i["\u0275\u0275directiveInject"](g.h),i["\u0275\u0275directiveInject"](v.a),i["\u0275\u0275directiveInject"](x.e),i["\u0275\u0275directiveInject"](g.a))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-abstract-item-update"]],inputs:{item:"item"},features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:0,vars:0,template:function(e,t){},encapsulation:2}),e})()},HENg:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("1QIV"),a=n("lJxs"),r=n("J3qs"),s=n("a8lL");class o extends s.a{constructor(e,t,n,i){super(t,n,i),this.resolver=e,this.authorizationService=t,this.router=n,this.authService=i}getObjectUrl(e,t){const n=this.getRouteWithDSOId(e);return this.resolver.resolve(n,t).pipe(Object(i.d)(),Object(a.a)(e=>e.self))}getRouteWithDSOId(e){let t=e;for(;Object(r.a)(t.params.id)&&Object(r.b)(t.parent);)t=t.parent;return t}}},ONIj:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("fXoL"),a=n("JTKQ");function r(e,t){}let s=(()=>{class e extends a.a{getComponentName(){return"SearchPageComponent"}importThemedComponent(e){return n("VxFp")(`./${e}/app/search-page/search-page.component`)}importUnthemedComponent(){return Promise.resolve().then(n.bind(null,"xSRh"))}}return e.\u0275fac=function(t){return o(t||e)},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-themed-search-page"]],features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:3,vars:0,consts:[["vcr",""]],template:function(e,t){1&e&&(i["\u0275\u0275template"](0,r,0,0,"ng-template",null,0,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275text"](2,"\n"))},encapsulation:2}),e})();const o=i["\u0275\u0275getInheritedFactory"](s)},TrCT:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var i=n("fXoL"),a=n("eIep"),r=n("lJxs"),s=n("9H8w"),o=n("dtp9"),c=n("joI/"),l=n("1QIV"),d=n("gWc+"),p=n("7LZ0"),u=n("14tD"),m=n("ppE2"),b=n("wQXg"),h=n("tyNb");let f=(()=>{class e extends s.a{constructor(e,t,n,i,a,r,s){super(e,t,n,i,a,s),this.service=e,this.sidebarService=t,this.windowService=n,this.searchConfigService=i,this.routeService=a,this.angulartics2=r,this.router=s}ngOnInit(){this.getSearchOptions().pipe(Object(a.a)(e=>this.service.searchEntries(e).pipe(Object(l.i)(),Object(r.a)(t=>({config:e,searchQueryResponse:t.payload}))))).subscribe(({config:e,searchQueryResponse:t})=>{const n=[],i=t.appliedFilters||[];for(let a=0,r=i.length;a<r;a++)n.push(i[a]);this.angulartics2.eventTrack.next({action:"search",properties:{searchOptions:e,page:{size:e.pagination.size,totalElements:t.pageInfo.totalElements,totalPages:t.pageInfo.totalPages,number:e.pagination.currentPage},sort:{by:e.sort.field,order:e.sort.direction},filters:n}})})}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](d.a),i["\u0275\u0275directiveInject"](p.a),i["\u0275\u0275directiveInject"](u.a),i["\u0275\u0275directiveInject"](o.SEARCH_CONFIG_SERVICE),i["\u0275\u0275directiveInject"](m.a),i["\u0275\u0275directiveInject"](b.b),i["\u0275\u0275directiveInject"](h.h))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-search-tracker"]],features:[i["\u0275\u0275ProvidersFeature"]([{provide:o.SEARCH_CONFIG_SERVICE,useClass:c.a}]),i["\u0275\u0275InheritDefinitionFeature"]],decls:1,vars:0,template:function(e,t){1&e&&i["\u0275\u0275text"](0,"\xa0\n")},styles:["[_nghost-%COMP%]{display:none}"]}),e})()},VxFp:function(e,t,n){var i={"./custom/app/search-page/search-page.component":["Bvb0",73]};function a(e){if(!n.o(i,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=i[e],a=t[0];return n.e(t[1]).then((function(){return n(a)}))}a.keys=function(){return Object.keys(i)},a.id="VxFp",e.exports=a},hucJ:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n("fXoL"),a=n("1QIV"),r=n("lJxs"),s=n("J3qs"),o=n("GCaJ"),c=n("h5qW");let l=(()=>{class e{constructor(e,t){this.breadcrumbService=e,this.dataService=t}resolve(e,t){const n=e.params.id;return this.dataService.findById(n,!0,!1,...this.followLinks).pipe(Object(a.g)(),Object(a.o)(),Object(r.a)(e=>{if(Object(s.b)(e)){const i=t.url,a=i.substr(0,i.indexOf(n))+n;return{provider:this.breadcrumbService,key:e,url:a}}}))}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275inject"](o.a),i["\u0275\u0275inject"](c.a))},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},iprd:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var i=n("fXoL"),a=n("ofXK"),r=n("pKmL"),s=n("PCNd"),o=n("7LZ0"),c=n("0qhl"),l=(n("TrCT"),n("9i+i")),d=(n("xSRh"),n("2XvB")),p=n("kesd"),u=n("joI/"),m=n("N0eT"),b=n("udvk"),h=(n("ONIj"),n("kMeL"));let f=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({providers:[o.a,d.a,p.c,c.a,u.a],imports:[[a.c,h.a,s.a.withEntryComponents(),r.a.forRoot(),l.a.forRoot(),m.a.withEntryComponents(),b.a.withEntryComponents()]]}),e})()},kGaT:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return p}));var i=n("fXoL"),a=n("84Zn"),r=n("1QIV"),s=n("8jtY"),o=n("iqTE"),c=n("l7P3"),l=n("tyNb");const d=[Object(a.a)("owningCollection",{},Object(a.a)("parentCommunity",{},Object(a.a)("parentCommunity"))),Object(a.a)("relationships"),Object(a.a)("version",{},Object(a.a)("versionhistory")),Object(a.a)("thumbnail")];let p=(()=>{class e{constructor(e,t,n){this.itemService=e,this.store=t,this.router=n}resolve(e,t){const n=this.itemService.findById(e.params.id,!0,!1,...d).pipe(Object(r.g)());return n.subscribe(e=>{this.store.dispatch(new s.a(t.url,e.payload))}),n}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275inject"](o.a),i["\u0275\u0275inject"](c.i),i["\u0275\u0275inject"](l.h))},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e})()},mOAm:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return s}));var i=n("zZO8"),a=n("TVZh");const r="groups";function s(e){return new i.a(Object(a.m)(),r,e).toString()}},mo41:function(e,t,n){"use strict";n.d(t,"a",(function(){return $}));var i=n("fXoL"),a=n("1QIV"),r=n("J3qs"),s=n("LvDl"),o=n("2Vo4"),c=n("LRne"),l=n("lJxs"),d=n("X8f1"),p=n("84Zn"),u=n("Y6Ni"),m=n("loKC"),b=n("ofXK"),h=n("8pnQ"),f=n("aojn"),g=n("3Pt+"),v=n("awfb"),x=n("jOLk"),y=n("sYmb");const j=["ds-edit-in-place-field",""];function S(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275text"](1,"\n            "),i["\u0275\u0275elementStart"](2,"span"),i["\u0275\u0275text"](3),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](4,"\n        "),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](null==e.metadata||null==e.metadata.key?null:e.metadata.key.split(".").join(".\u200b"))}}const O=function(){return{standalone:!0}};function I(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",15),i["\u0275\u0275text"](1,"\n            "),i["\u0275\u0275elementStart"](2,"ds-validation-suggestions",16,17),i["\u0275\u0275listener"]("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().metadata.key=t}))("submitSuggestion",(function(){i["\u0275\u0275restoreView"](e);const t=i["\u0275\u0275reference"](3);return i["\u0275\u0275nextContext"]().update(t)}))("clickSuggestion",(function(){i["\u0275\u0275restoreView"](e);const t=i["\u0275\u0275reference"](3);return i["\u0275\u0275nextContext"]().update(t)}))("typeSuggestion",(function(){i["\u0275\u0275restoreView"](e);const t=i["\u0275\u0275reference"](3);return i["\u0275\u0275nextContext"]().update(t)}))("dsClickOutside",(function(){i["\u0275\u0275restoreView"](e);const t=i["\u0275\u0275reference"](3);return i["\u0275\u0275nextContext"]().checkValidity(t)}))("findSuggestions",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().findMetadataFieldSuggestions(t)})),i["\u0275\u0275pipe"](4,"async"),i["\u0275\u0275pipe"](5,"async"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](6,"\n        "),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("disable",1!=e.fieldUpdate.changeType)("suggestions",i["\u0275\u0275pipeBind1"](4,7,e.metadataFieldSuggestions))("ngModel",e.metadata.key)("url",e.url)("metadata",e.metadata)("valid",!1!==i["\u0275\u0275pipeBind1"](5,9,e.valid))("ngModelOptions",i["\u0275\u0275pureFunction0"](11,O))}}function C(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"small",18),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](2,1,"item.edit.metadata.metadatafield.invalid")))}function w(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275text"](1,"\n            "),i["\u0275\u0275elementStart"](2,"span",19),i["\u0275\u0275text"](3),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](4,"\n        "),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](null==e.metadata?null:e.metadata.value)}}function E(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",15),i["\u0275\u0275text"](1,"\n            "),i["\u0275\u0275elementStart"](2,"textarea",20),i["\u0275\u0275listener"]("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().metadata.value=t}))("onDebounce",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().update()})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](3,"\n        "),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngModel",e.metadata.value)}}function k(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275text"](1,"\n            "),i["\u0275\u0275elementStart"](2,"span"),i["\u0275\u0275text"](3),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](4,"\n        "),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](null==e.metadata?null:e.metadata.language)}}function M(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",15),i["\u0275\u0275text"](1,"\n            "),i["\u0275\u0275elementStart"](2,"input",21),i["\u0275\u0275listener"]("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().metadata.language=t}))("onDebounce",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().update()})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](3,"\n        "),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngModel",e.metadata.language)}}function B(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",22),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().setEditable(!0)})),i["\u0275\u0275pipe"](1,"async"),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275text"](3,"\n            "),i["\u0275\u0275element"](4,"i",23),i["\u0275\u0275text"](5,"\n        "),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275propertyInterpolate"]("title",i["\u0275\u0275pipeBind1"](2,4,"item.edit.metadata.edit.buttons.edit")),i["\u0275\u0275property"]("disabled",!i["\u0275\u0275pipeBind1"](1,2,e.canSetEditable()))}}function V(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",24),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().setEditable(!1)})),i["\u0275\u0275pipe"](1,"async"),i["\u0275\u0275pipe"](2,"async"),i["\u0275\u0275pipe"](3,"translate"),i["\u0275\u0275text"](4,"\n            "),i["\u0275\u0275element"](5,"i",25),i["\u0275\u0275text"](6,"\n        "),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275propertyInterpolate"]("title",i["\u0275\u0275pipeBind1"](3,6,"item.edit.metadata.edit.buttons.unedit")),i["\u0275\u0275property"]("disabled",!i["\u0275\u0275pipeBind1"](1,2,e.canSetUneditable())||!1===i["\u0275\u0275pipeBind1"](2,4,e.valid))}}let $=(()=>{class e{constructor(e,t){this.registryService=e,this.objectUpdatesService=t,this.metadataFieldSuggestions=new o.a([])}ngOnInit(){this.editable=this.objectUpdatesService.isEditable(this.url,this.metadata.uuid),this.valid=this.objectUpdatesService.isValid(this.url,this.metadata.uuid)}update(e){this.objectUpdatesService.saveChangeFieldUpdate(this.url,Object(s.cloneDeep)(this.metadata)),Object(r.b)(e)&&this.checkValidity(e)}checkValidity(e){e.control.setValue(e.viewModel),e.control.updateValueAndValidity(),this.objectUpdatesService.setValidFieldUpdate(this.url,this.metadata.uuid,e.control.valid)}setEditable(e){this.objectUpdatesService.setEditableFieldUpdate(this.url,this.metadata.uuid,e)}remove(){this.objectUpdatesService.saveRemoveFieldUpdate(this.url,Object(s.cloneDeep)(this.metadata))}removeChangesFromField(){this.objectUpdatesService.removeSingleFieldUpdate(this.url,this.metadata.uuid)}ngOnChanges(){this.metadata=Object(s.cloneDeep)(this.fieldUpdate.field)}findMetadataFieldSuggestions(e){if(Object(r.e)(e))return this.registryService.queryMetadataFields(e,null,!0,!1,Object(p.a)("schema")).pipe(Object(a.i)(),Object(a.r)()).subscribe(e=>{this.setInputSuggestions(e)});this.metadataFieldSuggestions.next([])}setInputSuggestions(e){this.metadataFieldSuggestions.next(e.map(e=>({displayValue:e.split(".").join(".&#8203;"),value:e})))}canSetEditable(){return this.editable.pipe(Object(l.a)(e=>!e&&this.fieldUpdate.changeType!==d.c.REMOVE))}canSetUneditable(){return this.editable}canRemove(){return Object(c.a)(this.fieldUpdate.changeType!==d.c.REMOVE&&this.fieldUpdate.changeType!==d.c.ADD)}canUndo(){return this.editable.pipe(Object(l.a)(e=>this.fieldUpdate.changeType>=0||e))}isNotEmpty(e){return Object(r.e)(e)}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](u.a),i["\u0275\u0275directiveInject"](m.a))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["","ds-edit-in-place-field",""]],inputs:{fieldUpdate:"fieldUpdate",url:"url",metadata:"metadata"},features:[i["\u0275\u0275NgOnChangesFeature"]],attrs:j,decls:65,vars:39,consts:[[1,"metadata-field"],[4,"ngIf"],["class","field-container",4,"ngIf"],["class","text-danger",4,"ngIf"],[1,"w-100"],[1,"value-field"],[1,"text-center"],[1,"language-field"],[1,"btn-group","edit-field"],["class","btn btn-outline-primary btn-sm",3,"disabled","title","click",4,"ngIf"],["class","btn btn-outline-success btn-sm",3,"disabled","title","click",4,"ngIf"],[1,"btn","btn-outline-danger","btn-sm",3,"disabled","title","click"],[1,"fas","fa-trash-alt","fa-fw"],[1,"btn","btn-outline-warning","btn-sm",3,"disabled","title","click"],[1,"fas","fa-undo-alt","fa-fw"],[1,"field-container"],["dsAutoFocus","","autoFocusSelector",".suggestion_input",3,"disable","suggestions","ngModel","url","metadata","valid","ngModelOptions","ngModelChange","submitSuggestion","clickSuggestion","typeSuggestion","dsClickOutside","findSuggestions"],["suggestionControl","ngModel"],[1,"text-danger"],[1,"dont-break-out"],["type","textarea","attr.aria-labelledby","fieldValue",1,"form-control",3,"ngModel","dsDebounce","ngModelChange","onDebounce"],["type","text","attr.aria-labelledby","fieldLang",1,"form-control",3,"ngModel","dsDebounce","ngModelChange","onDebounce"],[1,"btn","btn-outline-primary","btn-sm",3,"disabled","title","click"],[1,"fas","fa-edit","fa-fw"],[1,"btn","btn-outline-success","btn-sm",3,"disabled","title","click"],[1,"fas","fa-check","fa-fw"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"td"),i["\u0275\u0275text"](1,"\n    "),i["\u0275\u0275elementStart"](2,"div",0),i["\u0275\u0275text"](3,"\n        "),i["\u0275\u0275template"](4,S,5,1,"div",1),i["\u0275\u0275pipe"](5,"async"),i["\u0275\u0275text"](6,"\n        "),i["\u0275\u0275template"](7,I,7,12,"div",2),i["\u0275\u0275pipe"](8,"async"),i["\u0275\u0275text"](9,"\n        "),i["\u0275\u0275template"](10,C,3,3,"small",3),i["\u0275\u0275pipe"](11,"async"),i["\u0275\u0275text"](12,"\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](13,"\n"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](14,"\n"),i["\u0275\u0275elementStart"](15,"td",4),i["\u0275\u0275text"](16,"\n    "),i["\u0275\u0275elementStart"](17,"div",5),i["\u0275\u0275text"](18,"\n        "),i["\u0275\u0275template"](19,w,5,1,"div",1),i["\u0275\u0275pipe"](20,"async"),i["\u0275\u0275text"](21,"\n        "),i["\u0275\u0275template"](22,E,4,1,"div",2),i["\u0275\u0275pipe"](23,"async"),i["\u0275\u0275text"](24,"\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](25,"\n"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](26,"\n"),i["\u0275\u0275elementStart"](27,"td",6),i["\u0275\u0275text"](28,"\n    "),i["\u0275\u0275elementStart"](29,"div",7),i["\u0275\u0275text"](30,"\n        "),i["\u0275\u0275template"](31,k,5,1,"div",1),i["\u0275\u0275pipe"](32,"async"),i["\u0275\u0275text"](33,"\n        "),i["\u0275\u0275template"](34,M,4,1,"div",2),i["\u0275\u0275pipe"](35,"async"),i["\u0275\u0275text"](36,"\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](37,"\n"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](38,"\n"),i["\u0275\u0275elementStart"](39,"td",6),i["\u0275\u0275text"](40,"\n    "),i["\u0275\u0275elementStart"](41,"div",8),i["\u0275\u0275text"](42,"\n        "),i["\u0275\u0275template"](43,B,6,6,"button",9),i["\u0275\u0275pipe"](44,"async"),i["\u0275\u0275text"](45,"\n        "),i["\u0275\u0275template"](46,V,7,8,"button",10),i["\u0275\u0275pipe"](47,"async"),i["\u0275\u0275text"](48,"\n        "),i["\u0275\u0275elementStart"](49,"button",11),i["\u0275\u0275listener"]("click",(function(){return t.remove()})),i["\u0275\u0275pipe"](50,"async"),i["\u0275\u0275pipe"](51,"translate"),i["\u0275\u0275text"](52,"\n            "),i["\u0275\u0275element"](53,"i",12),i["\u0275\u0275text"](54,"\n        "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](55,"\n        "),i["\u0275\u0275elementStart"](56,"button",13),i["\u0275\u0275listener"]("click",(function(){return t.removeChangesFromField()})),i["\u0275\u0275pipe"](57,"async"),i["\u0275\u0275pipe"](58,"translate"),i["\u0275\u0275text"](59,"\n            "),i["\u0275\u0275element"](60,"i",14),i["\u0275\u0275text"](61,"\n        "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](62,"\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](63,"\n"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](64,"\n")),2&e&&(i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("ngIf",!i["\u0275\u0275pipeBind1"](5,13,t.editable)),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",i["\u0275\u0275pipeBind1"](8,15,t.editable)),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",!1===i["\u0275\u0275pipeBind1"](11,17,t.valid)),i["\u0275\u0275advance"](9),i["\u0275\u0275property"]("ngIf",!i["\u0275\u0275pipeBind1"](20,19,t.editable)),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",i["\u0275\u0275pipeBind1"](23,21,t.editable)),i["\u0275\u0275advance"](9),i["\u0275\u0275property"]("ngIf",!i["\u0275\u0275pipeBind1"](32,23,t.editable)),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",i["\u0275\u0275pipeBind1"](35,25,t.editable)),i["\u0275\u0275advance"](9),i["\u0275\u0275property"]("ngIf",!i["\u0275\u0275pipeBind1"](44,27,t.editable)),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",i["\u0275\u0275pipeBind1"](47,29,t.editable)),i["\u0275\u0275advance"](3),i["\u0275\u0275propertyInterpolate"]("title",i["\u0275\u0275pipeBind1"](51,33,"item.edit.metadata.edit.buttons.remove")),i["\u0275\u0275property"]("disabled",!i["\u0275\u0275pipeBind1"](50,31,t.canRemove())),i["\u0275\u0275advance"](7),i["\u0275\u0275propertyInterpolate"]("title",i["\u0275\u0275pipeBind1"](58,37,"item.edit.metadata.edit.buttons.undo")),i["\u0275\u0275property"]("disabled",!i["\u0275\u0275pipeBind1"](57,35,t.canUndo())))},directives:[b.p,h.a,f.a,g.NgControlStatus,g.NgModel,v.a,g.DefaultValueAccessor,x.a],pipes:[b.b,y.d],styles:[".btn[disabled][_ngcontent-%COMP%]{color:var(--bs-gray-600);border-color:var(--bs-gray-600);z-index:0}.metadata-field[_ngcontent-%COMP%]{width:var(--ds-edit-item-metadata-field-width)}.language-field[_ngcontent-%COMP%]{width:var(--ds-edit-item-language-field-width)}"]}),e})()},tv3Y:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("zr/d"),a=n("LRne"),r=n("fXoL");let s=(()=>{class e{getBreadcrumbs(e,t){return Object(a.a)([new i.a(e+".breadcrumbs",t)])}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=r["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},xSRh:function(e,t,n){"use strict";n.r(t),n.d(t,"SearchPageComponent",(function(){return c}));var i=n("fXoL"),a=n("dtp9"),r=n("joI/"),s=n("9H8w"),o=n("TrCT");let c=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-search-page"]],features:[i["\u0275\u0275ProvidersFeature"]([{provide:a.SEARCH_CONFIG_SERVICE,useClass:r.a}])],decls:4,vars:0,template:function(e,t){1&e&&(i["\u0275\u0275element"](0,"ds-search"),i["\u0275\u0275text"](1,"\n"),i["\u0275\u0275element"](2,"ds-search-tracker"),i["\u0275\u0275text"](3,"\n"))},directives:[s.a,o.a],encapsulation:2}),e})()},"z3/6":function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var i=n("fXoL"),a=n("lJxs"),r=n("J3qs"),s=n("Xioo"),o=n("kGaT"),c=n("iqTE"),l=n("l7P3"),d=n("tyNb");let p=(()=>{class e extends o.b{constructor(e,t,n){super(e,t,n),this.itemService=e,this.store=t,this.router=n}resolve(e,t){return super.resolve(e,t).pipe(Object(a.a)(e=>{if(e.hasSucceeded&&Object(r.b)(e.payload)){const n=Object(s.h)(e.payload),i=t.url;if(!i.startsWith(n)){const t=e.payload.uuid,a=i.substring(i.indexOf(t)+t.length,i.length);this.router.navigateByUrl(n+a)}}return e}))}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275inject"](c.a),i["\u0275\u0275inject"](l.i),i["\u0275\u0275inject"](d.h))},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e})()},"zr/d":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));class i{constructor(e,t){this.text=e,this.url=t}}}}]);
//# sourceMappingURL=6-es2015.2d6340f7076e2f469218.js.map