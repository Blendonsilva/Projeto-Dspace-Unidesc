(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"/Vzl":function(e,t,n){"use strict";n.d(t,"a",(function(){return x}));var i=n("fXoL"),o=n("2Vo4"),r=n("pLZG"),s=n("1QIV"),a=n("J3qs"),l=n("4SI6"),c=n("XcME"),d=n("3jCq"),p=n("EGek"),u=n("J/vq"),m=n("l7P3"),h=n("ofXK"),f=n("Frqi"),g=n("1aCu");function b(e,t){1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275text"](1,"\n            "),i["\u0275\u0275element"](2,"ds-loading",5),i["\u0275\u0275text"](3,"\n        "),i["\u0275\u0275elementContainerEnd"]()),2&e&&(i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("showMessage",!1))}function v(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275text"](1,"\n            "),i["\u0275\u0275element"](2,"ds-listable-object-component-loader",6),i["\u0275\u0275pipe"](3,"async"),i["\u0275\u0275text"](4,"\n        "),i["\u0275\u0275elementContainerEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("showLabel",!1)("viewMode",e.viewType)("object",i["\u0275\u0275pipeBind1"](3,3,e.relatedItem$))}}let x=(()=>{class e{constructor(e,t,n){this.selectableListService=e,this.submissionService=t,this.store=n,this.relatedItem$=new o.a(void 0),this.viewType=d.a.ListElement,this.remove=new i.EventEmitter,this.subs=[]}ngOnInit(){this.ngOnChanges()}ngOnChanges(){Object(a.b)(this.reoRel)&&this.subs.push((this.reoRel.useLeftItem?this.reoRel.relationship.leftItem:this.reoRel.relationship.rightItem).pipe(Object(s.c)(),Object(s.o)(),Object(r.a)(e=>Object(a.b)(e)&&Object(a.e)(e.uuid))).subscribe(e=>{this.relatedItem$.next(e)}))}removeSelection(){this.submissionService.dispatchSave(this.submissionId),this.selectableListService.deselectSingle(this.listId,Object.assign(new l.a,{indexableObject:this.relatedItem$.getValue()})),this.store.dispatch(new c.c(this.submissionItem,this.relatedItem$.getValue(),this.relationshipOptions.relationshipType,this.submissionId))}ngOnDestroy(){this.subs.filter(e=>Object(a.b)(e)).forEach(e=>e.unsubscribe())}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](p.a),i["\u0275\u0275directiveInject"](u.a),i["\u0275\u0275directiveInject"](m.i))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-existing-relation-list-element"]],inputs:{listId:"listId",submissionItem:"submissionItem",reoRel:"reoRel",metadataFields:"metadataFields",relationshipOptions:"relationshipOptions",submissionId:"submissionId"},outputs:{remove:"remove"},features:[i["\u0275\u0275NgOnChangesFeature"]],decls:17,vars:6,consts:[[1,"d-flex"],[1,"mr-auto","text-contents"],[4,"ngIf"],["type","button",1,"btn","btn-secondary",3,"click"],["aria-hidden","true",1,"fas","fa-trash"],[3,"showMessage"],[3,"showLabel","viewMode","object"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275text"](1,"\n    "),i["\u0275\u0275elementStart"](2,"span",1),i["\u0275\u0275text"](3,"\n        "),i["\u0275\u0275template"](4,b,4,1,"ng-container",2),i["\u0275\u0275pipe"](5,"async"),i["\u0275\u0275text"](6,"\n        "),i["\u0275\u0275template"](7,v,5,5,"ng-container",2),i["\u0275\u0275pipe"](8,"async"),i["\u0275\u0275text"](9,"\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](10,"\n    "),i["\u0275\u0275elementStart"](11,"button",3),i["\u0275\u0275listener"]("click",(function(){return t.removeSelection()})),i["\u0275\u0275text"](12,"\n        "),i["\u0275\u0275element"](13,"i",4),i["\u0275\u0275text"](14,"\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](15,"\n"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](16,"\n")),2&e&&(i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("ngIf",!i["\u0275\u0275pipeBind1"](5,2,t.relatedItem$)),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",i["\u0275\u0275pipeBind1"](8,4,t.relatedItem$)))},directives:[h.p,f.a,g.a],pipes:[h.b],styles:["span.text-contents[_ngcontent-%COMP%]{padding:var(--bs-btn-padding-y) 0}"]}),e})()},"0pnk":function(e,t,n){"use strict";n.d(t,"a",(function(){return D}));var i=n("fXoL"),o=n("LRne"),r=n("JIr8"),s=n("/uUt"),a=n("J3qs"),l=n("oBfO"),c=n("x+ZM"),d=n("rbjh"),p=n("ZJee"),u=n("f+Ev"),m=n("1QIV"),h=n("Ssu8"),f=n("PdzJ"),g=n("e+Av"),b=n("1kSV"),v=n("BIe1"),x=n("3Pt+"),y=n("ofXK"),C=n("dlKe"),I=n("sYmb"),O=n("UGKy");const E=function(){return{}};function S(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",17),i["\u0275\u0275text"](1,"\n      "),i["\u0275\u0275elementStart"](2,"input",18),i["\u0275\u0275listener"]("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().secondInputValue=t}))("change",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().onChange(t)}))("blur",(function(t){i["\u0275\u0275restoreView"](e);const n=i["\u0275\u0275nextContext"](),o=i["\u0275\u0275reference"](1);return n.onBlur(t),t.stopPropagation(),o.close()}))("focus",(function(t){i["\u0275\u0275restoreView"](e);const n=i["\u0275\u0275nextContext"](),o=i["\u0275\u0275reference"](1);return n.onFocus(t),t.stopPropagation(),o.close()}))("click",(function(t){i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]();const n=i["\u0275\u0275reference"](1);return t.stopPropagation(),n.close()})),i["\u0275\u0275pipe"](3,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](4,"\n    "),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](2),i["\u0275\u0275classProp"]("is-invalid",e.showErrorMessages),i["\u0275\u0275property"]("ngClass",i["\u0275\u0275pureFunction0"](14,E))("id",e.id)("name",e.model.name+"_2")("type",e.model.inputType)("ngModel",e.secondInputValue)("disabled",0===e.firstInputValue.length||e.isInputDisabled())("placeholder",i["\u0275\u0275pipeBind1"](3,12,e.model.secondPlaceholder))("readonly",e.model.readOnly),i["\u0275\u0275attribute"]("aria-labelledby","label_"+e.model.id)("autoComplete",e.model.autoComplete)}}function w(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",19),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().remove()})),i["\u0275\u0275pipe"](1,"translate"),i["\u0275\u0275text"](2),i["\u0275\u0275pipe"](3,"translate"),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275propertyInterpolate"]("ngbTooltip",i["\u0275\u0275pipeBind1"](1,3,"form.clear-help")),i["\u0275\u0275property"]("disabled",e.model.readOnly),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"]("",i["\u0275\u0275pipeBind1"](3,5,"form.clear"),"\n      ")}}function j(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",19),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().switchEditMode()})),i["\u0275\u0275pipe"](1,"translate"),i["\u0275\u0275text"](2),i["\u0275\u0275pipe"](3,"translate"),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275propertyInterpolate"]("ngbTooltip",i["\u0275\u0275pipeBind1"](1,3,"form.edit-help")),i["\u0275\u0275property"]("disabled",e.isEditDisabled()),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"]("",i["\u0275\u0275pipeBind1"](3,5,"form.edit"),"\n      ")}}function k(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",19),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().saveChanges()})),i["\u0275\u0275pipe"](1,"translate"),i["\u0275\u0275text"](2),i["\u0275\u0275pipe"](3,"translate"),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275propertyInterpolate"]("ngbTooltip",i["\u0275\u0275pipeBind1"](1,3,"form.save-help")),i["\u0275\u0275property"]("disabled",!e.hasEmptyValue()),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"]("",i["\u0275\u0275pipeBind1"](3,5,"form.save"),"\n      ")}}function M(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",20),i["\u0275\u0275listener"]("click",(function(t){i["\u0275\u0275restoreView"](e);const n=i["\u0275\u0275nextContext"](),o=i["\u0275\u0275reference"](1);return t.stopPropagation(),n.clearFields(),o.close()})),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()}2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"]("",i["\u0275\u0275pipeBind1"](2,1,"form.no-results"),"\n      "))}const V=function(e){return{entry:e}};function P(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",21),i["\u0275\u0275listener"]("click",(function(n){i["\u0275\u0275restoreView"](e);const o=t.$implicit,r=i["\u0275\u0275nextContext"](),s=i["\u0275\u0275reference"](1);return n.stopPropagation(),r.onSelect(o),s.close()})),i["\u0275\u0275text"](1,"\n        "),i["\u0275\u0275elementContainerStart"](2,22),i["\u0275\u0275text"](3,"\n        "),i["\u0275\u0275elementContainerEnd"](),i["\u0275\u0275text"](4,"\n      "),i["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;i["\u0275\u0275nextContext"]();const n=i["\u0275\u0275reference"](49),o=i["\u0275\u0275reference"](52);i["\u0275\u0275propertyInterpolate"]("title",e.display),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngTemplateOutlet",e.hasOtherInformation()?n:o)("ngTemplateOutletContext",i["\u0275\u0275pureFunction1"](3,V,e))}}function F(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",23),i["\u0275\u0275elementStart"](1,"p"),i["\u0275\u0275text"](2),i["\u0275\u0275pipe"](3,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](3,1,"form.loading")))}function _(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"li",27),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate2"]("\n      ",i["\u0275\u0275pipeBind1"](2,2,"form.other-information."+e.key)," : ",e.value,"\n    ")}}function L(e,t){if(1&e&&(i["\u0275\u0275text"](0,"\n  "),i["\u0275\u0275elementStart"](1,"ul",24),i["\u0275\u0275text"](2,"\n    "),i["\u0275\u0275elementStart"](3,"li",25),i["\u0275\u0275text"](4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](5,"\n    "),i["\u0275\u0275template"](6,_,3,4,"li",26),i["\u0275\u0275pipe"](7,"dsObjNgFor"),i["\u0275\u0275text"](8,"\n  "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](9,"\n")),2&e){const e=t.entry,n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275attribute"]("aria-labelledby","label_"+n.model.id),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](e.value),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",i["\u0275\u0275pipeBind1"](7,3,e.otherInformation))}}function B(e,t){if(1&e&&(i["\u0275\u0275text"](0,"\n  "),i["\u0275\u0275elementStart"](1,"ul",24),i["\u0275\u0275text"](2,"\n    "),i["\u0275\u0275elementStart"](3,"li",25),i["\u0275\u0275text"](4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](5,"\n  "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](6,"\n")),2&e){const e=t.entry,n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275attribute"]("aria-labelledby","label_"+n.model.id),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](e.value)}}let D=(()=>{class e extends h.a{constructor(e,t,n,o){super(e,n,o),this.vocabularyService=e,this.cdr=t,this.layoutService=n,this.validationService=o,this.blur=new i.EventEmitter,this.change=new i.EventEmitter,this.focus=new i.EventEmitter,this.editMode=!1,this.firstInputValue="",this.secondInputValue="",this.loading=!1,this.subs=[],this.inputFormatter=(e,t)=>1===t?this.firstInputValue:this.secondInputValue}ngOnInit(){Object(a.e)(this.model.value)&&this.setCurrentValue(this.model.value,!0),this.subs.push(this.model.valueChanges.subscribe(e=>{Object(a.d)(e)?this.resetFields():this.editMode||this.setCurrentValue(this.model.value)}))}hasAuthorityValue(){return Object(a.b)(this.model.value)&&"object"==typeof this.model.value&&this.model.value.hasAuthority()}hasEmptyValue(){return Object(a.e)(this.getCurrentValue())}clearFields(){this.model.vocabularyOptions.closed&&this.resetFields()}isEditDisabled(){return!this.hasAuthorityValue()}isInputDisabled(){return this.model.vocabularyOptions.closed&&this.hasAuthorityValue()&&!this.editMode}isLookupName(){return this.model instanceof p.b}isSearchDisabled(){return Object(a.d)(this.firstInputValue)||this.editMode}onChange(e){if(e.preventDefault(),!this.model.vocabularyOptions.closed)if(Object(a.e)(this.getCurrentValue())){const e=new c.a(this.getCurrentValue());this.editMode||this.updateModel(e)}else this.remove()}onScroll(){!this.loading&&this.pageInfo.currentPage<=this.pageInfo.totalPages&&(this.updatePageInfo(this.pageInfo.elementsPerPage,this.pageInfo.currentPage+1,this.pageInfo.totalElements,this.pageInfo.totalPages),this.search())}onSelect(e){this.updateModel(e)}openChange(e){e||this.model.vocabularyOptions.closed&&!this.hasAuthorityValue()&&this.setCurrentValue("")}remove(){this.group.markAsPristine(),this.dispatchUpdate(null)}saveChanges(){if(Object(a.e)(this.getCurrentValue())){const e=Object.assign(new d.a,this.model.value,{display:this.getCurrentValue(),value:this.getCurrentValue()});this.updateModel(e)}else this.remove();this.switchEditMode()}search(){this.optionsList=null,this.updatePageInfo(this.model.maxOptions,1),this.loading=!0,this.subs.push(this.vocabularyService.getVocabularyEntriesByValue(this.getCurrentValue(),!1,this.model.vocabularyOptions,this.pageInfo).pipe(Object(m.j)(),Object(r.a)(()=>Object(o.a)(Object(u.b)(new l.a,[]))),Object(s.a)()).subscribe(e=>{this.optionsList=e.page,this.updatePageInfo(e.pageInfo.elementsPerPage,e.pageInfo.currentPage,e.pageInfo.totalElements,e.pageInfo.totalPages),this.loading=!1,this.cdr.detectChanges()}))}switchEditMode(){this.editMode=!this.editMode}whenClickOnConfidenceNotAccepted(e,t){this.model.readOnly||(e.open(),this.search())}ngOnDestroy(){this.subs.filter(e=>Object(a.b)(e)).forEach(e=>e.unsubscribe())}setCurrentValue(e,t=!1){t?this.getInitValueFromModel().subscribe(e=>this.setDisplayInputValue(e.display)):Object(a.b)(e)&&(e instanceof c.a||e instanceof d.a)&&this.setDisplayInputValue(e.display)}setDisplayInputValue(e){if(Object(a.b)(e)){if(this.isLookupName()){const t=e.split(this.model.separator);this.firstInputValue=(t[0]||"").trim(),this.secondInputValue=(t[1]||"").trim()}else this.firstInputValue=e||"";this.cdr.detectChanges()}}getCurrentValue(){let e="";return this.isLookupName()?(Object(a.e)(this.firstInputValue)&&(e=this.firstInputValue),Object(a.e)(this.secondInputValue)&&(e=Object(a.d)(e)?this.secondInputValue:this.firstInputValue+this.model.separator+" "+this.secondInputValue)):e=this.firstInputValue,e}resetFields(){this.firstInputValue="",this.isLookupName()&&(this.secondInputValue="")}updateModel(e){this.group.markAsDirty(),this.dispatchUpdate(e),this.setCurrentValue(e),this.optionsList=null,this.pageInfo=null}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](f.a),i["\u0275\u0275directiveInject"](i.ChangeDetectorRef),i["\u0275\u0275directiveInject"](g.E),i["\u0275\u0275directiveInject"](g.H))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-dynamic-lookup"]],inputs:{group:"group",model:"model"},outputs:{blur:"blur",change:"change",focus:"focus"},features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:54,vars:33,consts:[["ngbDropdown","",3,"click","openChange"],["sdRef","ngbDropdown"],[1,"form-row","align-items-center"],[1,"col","right-addon"],["dsAuthorityConfidenceState","","aria-hidden","true",1,"far","fa-circle","fa-2x","fa-fw","position-absolute","mt-1","p-0","pr-2",3,"authorityValue","whenClickOnConfidenceNotAccepted"],[1,"form-control",3,"id","name","type","ngModel","disabled","placeholder","readonly","ngModelChange","change","blur","focus","click"],["class","col",4,"ngIf"],[1,"col-auto","text-center"],["ngbDropdownAnchor","","type","button","placement","top",1,"btn","btn-secondary",3,"ngbTooltip","disabled","hidden","click"],["class","btn btn-secondary","type","button","placement","top",3,"ngbTooltip","disabled","click",4,"ngIf"],["ngbDropdownMenu","","aria-haspopup","true","aria-expanded","false",1,"dropdown-menu","scrollable-dropdown-menu","w-100"],["aria-labelledby","scrollableDropdownMenuButton","infiniteScroll","",1,"scrollable-menu",3,"infiniteScrollDistance","infiniteScrollThrottle","scrollWindow","scrolled"],["class","dropdown-item disabled",3,"click",4,"ngIf"],["class","dropdown-item lookup-item",3,"title","click",4,"ngFor","ngForOf"],["class","scrollable-dropdown-loading text-center",4,"ngIf"],["hasInfo",""],["noInfo",""],[1,"col"],[1,"form-control",3,"ngClass","id","name","type","ngModel","disabled","placeholder","readonly","ngModelChange","change","blur","focus","click"],["type","button","placement","top",1,"btn","btn-secondary",3,"ngbTooltip","disabled","click"],[1,"dropdown-item","disabled",3,"click"],[1,"dropdown-item","lookup-item",3,"title","click"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"scrollable-dropdown-loading","text-center"],[1,"list-unstyled","mb-0"],[1,"list-item","text-truncate","text-primary","font-weight-bold"],["class","list-item text-truncate text-secondary",4,"ngFor","ngForOf"],[1,"list-item","text-truncate","text-secondary"]],template:function(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",0,1),i["\u0275\u0275listener"]("click",(function(e){return e.stopPropagation()}))("openChange",(function(e){return t.openChange(e)})),i["\u0275\u0275text"](2,"\n\n  "),i["\u0275\u0275elementStart"](3,"div",2),i["\u0275\u0275text"](4,"\n    "),i["\u0275\u0275text"](5,"\n    "),i["\u0275\u0275elementStart"](6,"div",3),i["\u0275\u0275text"](7,"\n      "),i["\u0275\u0275elementStart"](8,"i",4),i["\u0275\u0275listener"]("whenClickOnConfidenceNotAccepted",(function(n){i["\u0275\u0275restoreView"](e);const o=i["\u0275\u0275reference"](1);return t.whenClickOnConfidenceNotAccepted(o,n)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](9,"\n      "),i["\u0275\u0275elementStart"](10,"input",5),i["\u0275\u0275listener"]("ngModelChange",(function(e){return t.firstInputValue=e}))("change",(function(e){return t.onChange(e)}))("blur",(function(n){i["\u0275\u0275restoreView"](e);const o=i["\u0275\u0275reference"](1);return t.onBlur(n),n.stopPropagation(),o.close()}))("focus",(function(n){i["\u0275\u0275restoreView"](e);const o=i["\u0275\u0275reference"](1);return t.onFocus(n),n.stopPropagation(),o.close()}))("click",(function(t){i["\u0275\u0275restoreView"](e);const n=i["\u0275\u0275reference"](1);return t.stopPropagation(),t.stopPropagation(),n.close()})),i["\u0275\u0275pipe"](11,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](12,"\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](13,"\n\n    "),i["\u0275\u0275text"](14,"\n    "),i["\u0275\u0275template"](15,S,5,15,"div",6),i["\u0275\u0275text"](16,"\n    "),i["\u0275\u0275elementStart"](17,"div",7),i["\u0275\u0275text"](18,"\n      "),i["\u0275\u0275elementStart"](19,"button",8),i["\u0275\u0275listener"]("click",(function(n){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275reference"](1).open(),t.search(),n.stopPropagation()})),i["\u0275\u0275pipe"](20,"translate"),i["\u0275\u0275text"](21),i["\u0275\u0275pipe"](22,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](23,"\n      "),i["\u0275\u0275template"](24,w,4,7,"button",9),i["\u0275\u0275text"](25,"\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](26,"\n    "),i["\u0275\u0275elementStart"](27,"div",7),i["\u0275\u0275text"](28,"\n      "),i["\u0275\u0275template"](29,j,4,7,"button",9),i["\u0275\u0275text"](30,"\n      "),i["\u0275\u0275template"](31,k,4,7,"button",9),i["\u0275\u0275text"](32,"\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](33,"\n  "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](34,"\n\n  "),i["\u0275\u0275elementStart"](35,"div",10),i["\u0275\u0275text"](36,"\n    "),i["\u0275\u0275elementStart"](37,"div",11),i["\u0275\u0275listener"]("scrolled",(function(){return t.onScroll()})),i["\u0275\u0275text"](38,"\n\n      "),i["\u0275\u0275template"](39,M,3,3,"button",12),i["\u0275\u0275text"](40,"\n      "),i["\u0275\u0275template"](41,P,5,5,"button",13),i["\u0275\u0275text"](42,"\n      "),i["\u0275\u0275template"](43,F,4,3,"div",14),i["\u0275\u0275text"](44,"\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](45,"\n  "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](46,"\n"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](47,"\n\n"),i["\u0275\u0275template"](48,L,10,5,"ng-template",null,15,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275text"](50,"\n\n"),i["\u0275\u0275template"](51,B,7,2,"ng-template",null,16,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275text"](53,"\n")}2&e&&(i["\u0275\u0275advance"](8),i["\u0275\u0275property"]("authorityValue",t.model.value),i["\u0275\u0275advance"](2),i["\u0275\u0275classProp"]("is-invalid",t.showErrorMessages),i["\u0275\u0275property"]("id",t.model.id)("name",t.model.name)("type",t.model.inputType)("ngModel",t.firstInputValue)("disabled",t.isInputDisabled())("placeholder",i["\u0275\u0275pipeBind1"](11,27,t.model.placeholder))("readonly",t.model.readOnly),i["\u0275\u0275attribute"]("aria-labelledby","label_"+t.model.id)("autoComplete",t.model.autoComplete),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngIf",t.isLookupName()),i["\u0275\u0275advance"](4),i["\u0275\u0275propertyInterpolate"]("ngbTooltip",i["\u0275\u0275pipeBind1"](20,29,"form.search-help")),i["\u0275\u0275property"]("disabled",t.model.readOnly||t.isSearchDisabled())("hidden",t.isInputDisabled()),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"]("",i["\u0275\u0275pipeBind1"](22,31,"form.search"),"\n      "),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",t.isInputDisabled()),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngIf",!t.editMode),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",t.editMode),i["\u0275\u0275advance"](4),i["\u0275\u0275attribute"]("aria-labelledby","label_"+t.model.id),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("infiniteScrollDistance",2)("infiniteScrollThrottle",50)("scrollWindow",!1),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",t.optionsList&&0==t.optionsList.length),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",t.optionsList),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",t.loading))},directives:[b.j,v.a,x.DefaultValueAccessor,x.NgControlStatus,x.NgModel,y.p,b.k,b.O,b.m,C.a,y.o,y.m,y.t],pipes:[I.d,O.a],styles:[".dropdown-toggle[_ngcontent-%COMP%]:after{display:none}[_nghost-%COMP%]     .dropdown-menu{left:0!important;width:100%!important;max-height:var(--ds-dropdown-menu-max-height);overflow-y:auto!important;overflow-x:hidden}[_nghost-%COMP%]     .dropdown-item.active, [_nghost-%COMP%]     .dropdown-item:active, [_nghost-%COMP%]     .dropdown-item:focus, [_nghost-%COMP%]     .dropdown-item:hover{color:var(--bs-dropdown-link-hover-color)!important;background-color:var(--bs-dropdown-link-hover-bg)!important}div[_ngcontent-%COMP%]{overflow:visible}.lookup-item[_ngcontent-%COMP%]{border-bottom:var(--bs-dropdown-border-width) solid var(--bs-dropdown-border-color)}"]}),e})()},"1Pbu":function(e,t,n){"use strict";n.d(t,"a",(function(){return q}));var i=n("fXoL"),o=n("itXk"),r=n("J3qs"),s=n("lJxs"),a=n("IzEk"),l=n("zP0r"),c=n("eIep"),d=n("dtp9"),p=n("joI/"),u=n("XcME"),m=n("ynxc"),h=n("1QIV"),f=n("84Zn"),g=n("7RJT"),b=n("1kSV"),v=n("EGek"),x=n("kN8A"),y=n("BK0m"),C=n("dHui"),I=n("OAtg"),O=n("7vy/"),E=n("l7P3"),S=n("tyNb"),w=n("ofXK"),j=n("Frqi"),k=n("Ui2r"),M=n("zVKZ"),V=n("8HnP"),P=n("sYmb");function F(e,t){1&e&&i["\u0275\u0275element"](0,"ds-loading")}function _(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275text"](0,"\n                    "),i["\u0275\u0275elementStart"](1,"ds-dynamic-lookup-relation-search-tab",19),i["\u0275\u0275listener"]("selectObject",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](2).select(t)}))("deselectObject",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](2).deselect(t)}))("resultFound",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](2).setTotalInternals(t.pageInfo.totalElements)})),i["\u0275\u0275text"](2,"\n                    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](3,"\n                ")}if(2&e){const e=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("selection$",e.selection$)("listId",e.listId)("relationship",e.relationshipOptions)("repeatable",e.repeatable)("context",e.context)("query",e.query)("relationshipType",e.relationshipType)("isLeft",e.isLeft)("item",e.item)("isEditRelationship",e.isEditRelationship)("toRemove",e.toRemove)}}function L(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275text"](0,"\n                    "),i["\u0275\u0275elementStart"](1,"ds-dynamic-lookup-relation-external-source-tab",20),i["\u0275\u0275listener"]("importedObject",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](3).imported(t)})),i["\u0275\u0275text"](2,"\n                    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](3,"\n                ")}if(2&e){const e=i["\u0275\u0275nextContext"]().$implicit,t=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("label",t.label)("listId",t.listId)("repeatable",t.repeatable)("item",t.item)("collection",t.collection)("relationship",t.relationshipOptions)("context",t.context)("externalSource",e)}}const B=function(e){return{count:e}};function D(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"li",13),i["\u0275\u0275text"](1,"\n                "),i["\u0275\u0275elementStart"](2,"a",14),i["\u0275\u0275text"](3),i["\u0275\u0275pipe"](4,"translate"),i["\u0275\u0275pipe"](5,"async"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](6,"\n                "),i["\u0275\u0275template"](7,L,4,8,"ng-template",15),i["\u0275\u0275text"](8,"\n            "),i["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=t.index,o=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind2"](4,1,"submission.sections.describe.relationship-lookup.search-tab.tab-title."+e.id,i["\u0275\u0275pureFunction1"](6,B,i["\u0275\u0275pipeBind1"](5,4,o.totalExternal$)[n])))}}function T(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275text"](0,"\n                    "),i["\u0275\u0275elementStart"](1,"ds-dynamic-lookup-relation-selection-tab",21),i["\u0275\u0275listener"]("selectObject",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](3).select(t)}))("deselectObject",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](3).deselect(t)})),i["\u0275\u0275text"](2,"\n                    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](3,"\n                ")}if(2&e){const e=i["\u0275\u0275nextContext"](3);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("selection$",e.selection$)("listId",e.listId)("relationshipType",e.relationshipOptions.relationshipType)("repeatable",e.repeatable)("context",e.context)}}function R(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"li",13),i["\u0275\u0275text"](1,"\n                "),i["\u0275\u0275elementStart"](2,"a",14),i["\u0275\u0275text"](3),i["\u0275\u0275pipe"](4,"translate"),i["\u0275\u0275pipe"](5,"async"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](6,"\n                "),i["\u0275\u0275template"](7,T,4,5,"ng-template",15),i["\u0275\u0275text"](8,"\n            "),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"](2);let t=null;i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind2"](4,1,"submission.sections.describe.relationship-lookup.selection-tab.tab-title",i["\u0275\u0275pureFunction1"](6,B,null==(t=i["\u0275\u0275pipeBind1"](5,4,e.selection$))?null:t.length)))}}function N(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275text"](1,"\n        "),i["\u0275\u0275elementStart"](2,"ul",11,12),i["\u0275\u0275text"](4,"\n            "),i["\u0275\u0275elementStart"](5,"li",13),i["\u0275\u0275text"](6,"\n                "),i["\u0275\u0275elementStart"](7,"a",14),i["\u0275\u0275text"](8),i["\u0275\u0275pipe"](9,"translate"),i["\u0275\u0275pipe"](10,"async"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](11,"\n                "),i["\u0275\u0275template"](12,_,4,11,"ng-template",15),i["\u0275\u0275text"](13,"\n            "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](14,"\n            "),i["\u0275\u0275template"](15,D,9,8,"li",16),i["\u0275\u0275pipe"](16,"async"),i["\u0275\u0275text"](17,"\n            "),i["\u0275\u0275template"](18,R,9,8,"li",17),i["\u0275\u0275text"](19,"\n        "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](20,"\n        "),i["\u0275\u0275element"](21,"div",18),i["\u0275\u0275text"](22,"\n    "),i["\u0275\u0275elementContainerEnd"]()),2&e){const e=i["\u0275\u0275reference"](3),t=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](8),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind2"](9,4,"submission.sections.describe.relationship-lookup.search-tab.tab-title."+t.relationshipOptions.relationshipType,i["\u0275\u0275pureFunction1"](11,B,i["\u0275\u0275pipeBind1"](10,7,t.totalInternal$)))),i["\u0275\u0275advance"](7),i["\u0275\u0275property"]("ngForOf",i["\u0275\u0275pipeBind1"](16,9,t.externalSourcesRD$)),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",!t.isEditRelationship),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngbNavOutlet",e)}}function A(e,t){1&e&&i["\u0275\u0275element"](0,"span",30)}function G(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",22),i["\u0275\u0275text"](1,"\n        "),i["\u0275\u0275elementStart"](2,"div",23),i["\u0275\u0275text"](3,"\n          "),i["\u0275\u0275elementStart"](4,"button",24),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().discardEv()})),i["\u0275\u0275text"](5,"\n                  "),i["\u0275\u0275element"](6,"i",25),i["\u0275\u0275text"](7,"\n            "),i["\u0275\u0275elementStart"](8,"span",26),i["\u0275\u0275text"](9),i["\u0275\u0275pipe"](10,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](11,"\n          "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](12,"\n          "),i["\u0275\u0275elementStart"](13,"button",27),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().submitEv()})),i["\u0275\u0275text"](14,"\n                  "),i["\u0275\u0275template"](15,A,1,0,"span",28),i["\u0275\u0275text"](16,"\n                  "),i["\u0275\u0275element"](17,"i",29),i["\u0275\u0275text"](18,"\n            "),i["\u0275\u0275elementStart"](19,"span",26),i["\u0275\u0275text"](20),i["\u0275\u0275pipe"](21,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](22,"\n          "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](23,"\n        "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](24,"\n      "),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("disabled",0==e.toAdd.length&&0==e.toRemove.length||e.isPending),i["\u0275\u0275advance"](5),i["\u0275\u0275textInterpolate1"]("\xa0",i["\u0275\u0275pipeBind1"](10,5,"item.edit.metadata.discard-button"),""),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("disabled",0==e.toAdd.length&&0==e.toRemove.length||e.isPending),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",e.isPending),i["\u0275\u0275advance"](5),i["\u0275\u0275textInterpolate1"]("\xa0",i["\u0275\u0275pipeBind1"](21,7,"item.edit.metadata.save-button"),"")}}const $=function(e){return{size:e}};let q=(()=>{class e{constructor(e,t,n,o,r,s,a,l,c,d,p){this.modal=e,this.selectableListService=t,this.relationshipService=n,this.relationshipTypeService=o,this.externalSourceService=r,this.lookupRelationService=s,this.searchConfigService=a,this.rdbService=l,this.zone=c,this.store=d,this.router=p,this.selectEvent=new i.EventEmitter,this.subMap={},this.totalInternal$=new g.BehaviorSubject(0),this.isLeft=!1,this.isEditRelationship=!1,this.toAdd=[],this.toRemove=[],this.isPending=!1}ngOnInit(){this.currentItemIsLeftItem$&&this.currentItemIsLeftItem$.subscribe(e=>{this.isLeft=e}),this.selection$=this.selectableListService.getSelectableList(this.listId).pipe(Object(s.a)(e=>Object(r.b)(e)&&Object(r.b)(e.selection)?e.selection:[])),this.selection$.pipe(Object(a.a)(1)).subscribe(e=>e.map(e=>this.addNameVariantSubscription(e))),this.context="true"===this.relationshipOptions.nameVariants?m.a.EntitySearchModalWithNameVariants:m.a.EntitySearchModal,Object(r.e)(this.relationshipOptions.externalSources)&&(this.externalSourcesRD$=this.rdbService.aggregate(this.relationshipOptions.externalSources.map(e=>this.externalSourceService.findById(e,!0,!0,Object(f.a)("entityTypes")))).pipe(Object(h.d)())),this.setTotals()}close(){this.toAdd=[],this.toRemove=[],this.modal.close()}select(...e){this.zone.runOutsideAngular(()=>{Object(o.a)([...e.map(e=>(this.addNameVariantSubscription(e),this.relationshipService.getNameVariant(this.listId,e.indexableObject.uuid).pipe(Object(a.a)(1),Object(s.a)(t=>({item:e.indexableObject,nameVariant:t})))))]).subscribe(e=>e.forEach(e=>{const t=new u.a(this.item,e.item,this.relationshipOptions.relationshipType,this.submissionId,e.nameVariant);this.store.dispatch(t)}))})}addNameVariantSubscription(e){const t=this.relationshipService.getNameVariant(this.listId,e.indexableObject.uuid);this.subMap[e.indexableObject.uuid]=t.pipe(Object(l.a)(1)).subscribe(t=>this.store.dispatch(new u.d(this.item,e.indexableObject,this.relationshipOptions.relationshipType,this.submissionId,t)))}deselect(...e){this.zone.runOutsideAngular(()=>e.forEach(e=>{this.subMap[e.indexableObject.uuid].unsubscribe(),this.store.dispatch(new u.c(this.item,e.indexableObject,this.relationshipOptions.relationshipType,this.submissionId))}))}imported(e){this.setTotals(),this.select(e)}setTotals(){const e=Object(o.a)([this.externalSourcesRD$,this.searchConfigService.paginatedSearchOptions]);this.totalExternal$=e.pipe(Object(c.a)(([e,t])=>Object(o.a)([...e.map(e=>this.lookupRelationService.getTotalExternalResults(e,t))])))}setTotalInternals(e){this.totalInternal$.next(e)}ngOnDestroy(){this.router.navigate([],{}),Object.values(this.subMap).forEach(e=>e.unsubscribe())}discardEv(){}submitEv(){}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](b.c),i["\u0275\u0275directiveInject"](v.a),i["\u0275\u0275directiveInject"](x.a),i["\u0275\u0275directiveInject"](y.a),i["\u0275\u0275directiveInject"](C.a),i["\u0275\u0275directiveInject"](I.a),i["\u0275\u0275directiveInject"](p.a),i["\u0275\u0275directiveInject"](O.a),i["\u0275\u0275directiveInject"](i.NgZone),i["\u0275\u0275directiveInject"](E.i),i["\u0275\u0275directiveInject"](S.h))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-dynamic-lookup-relation-modal"]],outputs:{selectEvent:"selectEvent"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:d.SEARCH_CONFIG_SERVICE,useClass:p.a}])],decls:40,vars:19,consts:[[1,"modal-header"],["id","modal-title",1,"modal-title"],["type","button","aria-label","Close button","aria-describedby","modal-title",1,"close",3,"disabled","click"],["aria-hidden","true"],[1,"modal-body"],[4,"ngIf"],[1,"modal-footer"],[1,"buttons-container"],[1,"close-button"],["type","button",1,"btn","btn-outline-secondary",3,"disabled","click"],["class","button-row bottom",4,"ngIf"],["ngbNav","",1,"nav-tabs"],["nav","ngbNav"],["ngbNavItem",""],["ngbNavLink",""],["ngbNavContent",""],["ngbNavItem","",4,"ngFor","ngForOf"],["ngbNavItem","",4,"ngIf"],[3,"ngbNavOutlet"],[1,"d-block","pt-3",3,"selection$","listId","relationship","repeatable","context","query","relationshipType","isLeft","item","isEditRelationship","toRemove","selectObject","deselectObject","resultFound"],[1,"d-block","pt-3",3,"label","listId","repeatable","item","collection","relationship","context","externalSource","importedObject"],[1,"d-block","pt-3",3,"selection$","listId","relationshipType","repeatable","context","selectObject","deselectObject"],[1,"button-row","bottom"],[1,"float-right"],[1,"btn","btn-danger","discard",3,"disabled","click"],[1,"fas","fa-times"],[1,"d-none","d-sm-inline"],[1,"btn","btn-primary","submit",3,"disabled","click"],["class","spinner-border spinner-border-sm","role","status","aria-hidden","true",4,"ngIf"],[1,"fas","fa-save"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275text"](1,"\n    "),i["\u0275\u0275elementStart"](2,"h4",1),i["\u0275\u0275text"](3),i["\u0275\u0275pipe"](4,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](5,"\n    "),i["\u0275\u0275elementStart"](6,"button",2),i["\u0275\u0275listener"]("click",(function(){return t.close()})),i["\u0275\u0275text"](7,"\n        "),i["\u0275\u0275elementStart"](8,"span",3),i["\u0275\u0275text"](9,"\xd7"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](10,"\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](11,"\n"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](12,"\n"),i["\u0275\u0275elementStart"](13,"div",4),i["\u0275\u0275text"](14,"\n    "),i["\u0275\u0275template"](15,F,1,0,"ds-loading",5),i["\u0275\u0275text"](16,"\n    "),i["\u0275\u0275template"](17,N,23,13,"ng-container",5),i["\u0275\u0275text"](18,"\n"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](19,"\n"),i["\u0275\u0275elementStart"](20,"div",6),i["\u0275\u0275text"](21,"\n    "),i["\u0275\u0275elementStart"](22,"small"),i["\u0275\u0275text"](23),i["\u0275\u0275pipe"](24,"translate"),i["\u0275\u0275pipe"](25,"async"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](26,"\n    "),i["\u0275\u0275elementStart"](27,"div",7),i["\u0275\u0275text"](28,"\n    "),i["\u0275\u0275elementStart"](29,"div",8),i["\u0275\u0275text"](30,"\n        "),i["\u0275\u0275elementStart"](31,"button",9),i["\u0275\u0275listener"]("click",(function(){return t.close()})),i["\u0275\u0275text"](32),i["\u0275\u0275pipe"](33,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](34,"\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](35,"\n     "),i["\u0275\u0275template"](36,G,25,9,"div",10),i["\u0275\u0275text"](37,"\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](38,"\n"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](39,"\n")),2&e){let e=null;i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](4,8,"submission.sections.describe.relationship-lookup.title."+t.relationshipOptions.relationshipType)),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("disabled",t.isPending),i["\u0275\u0275advance"](9),i["\u0275\u0275property"]("ngIf",!t.item||!t.collection),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",t.item&&t.collection),i["\u0275\u0275advance"](6),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind2"](24,10,"submission.sections.describe.relationship-lookup.selected",i["\u0275\u0275pureFunction1"](17,$,(null==(e=i["\u0275\u0275pipeBind1"](25,13,t.selection$))?null:e.length)||0))),i["\u0275\u0275advance"](8),i["\u0275\u0275property"]("disabled",t.isPending),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"]("\n            ",i["\u0275\u0275pipeBind1"](33,15,"submission.sections.describe.relationship-lookup.close"),""),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("ngIf",t.isEditRelationship)}},directives:[w.p,j.a,b.t,b.v,b.w,b.u,w.o,b.y,k.a,M.a,V.a],pipes:[P.d,w.b],styles:[".modal-footer[_ngcontent-%COMP%]{-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}[_nghost-%COMP%]     .modal-content{width:90%;margin:5%}[_nghost-%COMP%]   .spinner-border[_ngcontent-%COMP%]{vertical-align:middle}.buttons-container[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex}.buttons-container[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]{margin-right:5px}"]}),e})()},"6c/T":function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var i=n("fXoL"),o=n("1kSV"),r=n("ofXK"),s=n("Oqsf"),a=n("Frqi"),l=n("sYmb");function c(e,t){1&e&&i["\u0275\u0275element"](0,"ds-loading")}const d=function(e){return{"d-none":e}};let p=(()=>{class e{constructor(e){this.activeModal=e,this.selectedEvent=new i.EventEmitter,this.loading=!0}selectObject(e){this.selectedEvent.emit(e)}closeCollectionModal(){this.activeModal.dismiss(!1)}theOnlySelectable(e){this.selectedEvent.emit(e)}searchComplete(){this.loading=!1}isLoading(){return!!this.loading}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](o.c))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-submission-import-external-collection"]],outputs:{selectedEvent:"selectedEvent"},decls:21,vars:8,consts:[[1,"modal-header"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[4,"ngIf"],[3,"ngClass","entityType","selectionChange","searchComplete","theOnlySelectable"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275text"](1,"\n  "),i["\u0275\u0275elementStart"](2,"div",0),i["\u0275\u0275text"](3),i["\u0275\u0275pipe"](4,"translate"),i["\u0275\u0275elementStart"](5,"button",1),i["\u0275\u0275listener"]("click",(function(){return t.closeCollectionModal()})),i["\u0275\u0275text"](6,"\n      "),i["\u0275\u0275elementStart"](7,"span",2),i["\u0275\u0275text"](8,"\xd7"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](9,"\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](10,"\n  "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](11,"\n  "),i["\u0275\u0275elementStart"](12,"div",3),i["\u0275\u0275text"](13,"\n    "),i["\u0275\u0275template"](14,c,1,0,"ds-loading",4),i["\u0275\u0275text"](15,"\n    "),i["\u0275\u0275elementStart"](16,"ds-collection-dropdown",5),i["\u0275\u0275listener"]("selectionChange",(function(e){return t.selectObject(e)}))("searchComplete",(function(){return t.searchComplete()}))("theOnlySelectable",(function(e){return t.theOnlySelectable(e)})),i["\u0275\u0275text"](17,"\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](18,"\n  "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](19,"\n"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](20,"\n")),2&e&&(i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate1"]("",i["\u0275\u0275pipeBind1"](4,4,"dso-selector.select.collection.head"),"\n    "),i["\u0275\u0275advance"](11),i["\u0275\u0275property"]("ngIf",t.isLoading()),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngClass",i["\u0275\u0275pureFunction1"](6,d,t.isLoading()))("entityType",t.entityType))},directives:[r.p,s.a,r.m,a.a],pipes:[l.d],styles:[".close[_ngcontent-%COMP%]:focus{outline:none!important}"]}),e})()},"7RJT":function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=n("ds6q"),r=n("Mxlh");t.BehaviorSubject=function(e){function t(t){var n=e.call(this)||this;return n._value=t,n}return i(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),t.prototype._subscribe=function(t){var n=e.prototype._subscribe.call(this,t);return n&&!n.closed&&t.next(this._value),n},t.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new r.ObjectUnsubscribedError;return this._value},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(o.Subject)},"8HnP":function(e,t,n){"use strict";n.d(t,"a",(function(){return I}));var i=n("fXoL"),o=n("dtp9"),r=n("joI/"),s=n("lJxs"),a=n("eIep"),l=n("IzEk"),c=n("7DXY"),d=n("f+Ev"),p=n("oBfO"),u=n("GG8d"),m=n("tyNb"),h=n("MFUF"),f=n("pKvA"),g=n("ofXK"),b=n("jLV+"),v=n("sYmb");function x(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"]("\n            ",i["\u0275\u0275pipeBind1"](2,1,"submission.sections.describe.relationship-lookup.selection-tab.no-selection"),"\n        "))}const y=function(e,t){return{repeatable:e,listId:t}};function C(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275text"](1,"\n            "),i["\u0275\u0275elementStart"](2,"h3"),i["\u0275\u0275text"](3),i["\u0275\u0275pipe"](4,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](5,"\n            "),i["\u0275\u0275elementStart"](6,"ds-viewable-collection",4),i["\u0275\u0275listener"]("deselectObject",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().deselectObject.emit(t)}))("selectObject",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().selectObject.emit(t)})),i["\u0275\u0275pipe"](7,"async"),i["\u0275\u0275pipe"](8,"async"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](9,"\n        "),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](4,7,"submission.sections.describe.relationship-lookup.selection-tab.title."+e.relationshipType)),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("objects",i["\u0275\u0275pipeBind1"](7,9,e.selectionRD$))("selectable",!0)("selectionConfig",i["\u0275\u0275pureFunction2"](13,y,e.repeatable,e.listId))("config",i["\u0275\u0275pipeBind1"](8,11,e.currentPagination$))("hideGear",!0)("context",e.context)}}let I=(()=>{class e{constructor(e,t,n){this.router=e,this.searchConfigService=t,this.paginationService=n,this.deselectObject=new i.EventEmitter,this.selectObject=new i.EventEmitter,this.initialPagination=Object.assign(new c.a,{id:"spc",pageSize:5})}ngOnInit(){this.resetRoute(),this.selectionRD$=this.searchConfigService.paginatedSearchOptions.pipe(Object(s.a)(e=>e.pagination),Object(a.a)(e=>this.selection$.pipe(Object(l.a)(1),Object(s.a)(t=>{const n=(e.currentPage-1)*e.pageSize,i=t.slice(n,n+e.pageSize>t.length?t.length:n+e.pageSize),o=new p.a({elementsPerPage:e.pageSize,totalElements:t.length,currentPage:e.currentPage,totalPages:Math.ceil(t.length/e.pageSize)});return Object(u.c)(Object(d.b)(o,i))})))),this.currentPagination$=this.paginationService.getCurrentPagination(this.searchConfigService.paginationID,this.initialPagination)}resetRoute(){this.paginationService.updateRoute(this.searchConfigService.paginationID,{page:1,pageSize:5})}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](m.h),i["\u0275\u0275directiveInject"](r.a),i["\u0275\u0275directiveInject"](h.a))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-dynamic-lookup-relation-selection-tab"]],inputs:{relationshipType:"relationshipType",listId:"listId",repeatable:"repeatable",selection$:"selection$",selectionRD$:"selectionRD$",context:"context"},outputs:{deselectObject:"deselectObject",selectObject:"selectObject"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:o.SEARCH_CONFIG_SERVICE,useClass:r.a}])],decls:21,vars:9,consts:[[1,"row"],[1,"col-4"],[1,"col-8"],[4,"ngIf"],[3,"objects","selectable","selectionConfig","config","hideGear","context","deselectObject","selectObject"]],template:function(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275text"](1,"\n    "),i["\u0275\u0275elementStart"](2,"div",1),i["\u0275\u0275text"](3,"\n        "),i["\u0275\u0275elementStart"](4,"h3"),i["\u0275\u0275text"](5),i["\u0275\u0275pipe"](6,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](7,"\n        "),i["\u0275\u0275element"](8,"ds-page-size-selector"),i["\u0275\u0275text"](9,"\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](10,"\n    "),i["\u0275\u0275elementStart"](11,"div",2),i["\u0275\u0275text"](12,"\n        "),i["\u0275\u0275template"](13,x,3,3,"div",3),i["\u0275\u0275pipe"](14,"async"),i["\u0275\u0275text"](15,"\n        "),i["\u0275\u0275template"](16,C,10,16,"div",3),i["\u0275\u0275pipe"](17,"async"),i["\u0275\u0275text"](18,"\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](19,"\n"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](20,"\n")),2&e){let e=null,n=null;i["\u0275\u0275advance"](5),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](6,3,"submission.sections.describe.relationship-lookup.selection-tab.settings")),i["\u0275\u0275advance"](8),i["\u0275\u0275property"]("ngIf",(null==(e=i["\u0275\u0275pipeBind1"](14,5,t.selectionRD$))?null:e.payload.page)<1),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",(null==(n=i["\u0275\u0275pipeBind1"](17,7,t.selectionRD$))?null:n.payload.page.length)>=1)}},directives:[f.a,g.p,b.a],pipes:[v.d,g.b],styles:[""]}),e})()},"A/iK":function(e,t,n){"use strict";n.d(t,"a",(function(){return $}));var i=n("fXoL"),o=n("q92s"),r=n("Kj3r"),s=n("/uUt"),a=n("vkgz"),l=n("eIep"),c=n("JIr8"),d=n("lJxs"),p=n("pLZG"),u=n("IzEk"),m=n("HDdC"),h=n("XNiG"),f=n("LRne"),g=n("J3qs"),b=n("x+ZM"),v=n("1QIV"),x=n("f+Ev"),y=n("oBfO"),C=n("Ssu8"),I=n("97Yq"),O=n("PdzJ"),E=n("e+Av"),S=n("1kSV"),w=n("ofXK"),j=n("3Pt+"),k=n("BIe1"),M=n("UGKy"),V=n("sYmb");const P=["instance"],F=function(e){return{entry:e}};function _(e,t){if(1&e&&(i["\u0275\u0275text"](0,"\n  "),i["\u0275\u0275elementContainerStart"](1,4),i["\u0275\u0275text"](2,"\n  "),i["\u0275\u0275elementContainerEnd"](),i["\u0275\u0275text"](3,"\n")),2&e){const e=t.result;i["\u0275\u0275nextContext"]();const n=i["\u0275\u0275reference"](4),o=i["\u0275\u0275reference"](7);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngTemplateOutlet",e.hasOtherInformation()?n:o)("ngTemplateOutletContext",i["\u0275\u0275pureFunction1"](2,F,e))}}function L(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"li",8),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate2"]("\n      ",i["\u0275\u0275pipeBind1"](2,2,"form.other-information."+e.key)," : ",e.value,"\n    ")}}function B(e,t){if(1&e&&(i["\u0275\u0275text"](0,"\n  "),i["\u0275\u0275elementStart"](1,"ul",5),i["\u0275\u0275text"](2,"\n    "),i["\u0275\u0275elementStart"](3,"li",6),i["\u0275\u0275text"](4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](5,"\n    "),i["\u0275\u0275template"](6,L,3,4,"li",7),i["\u0275\u0275pipe"](7,"dsObjNgFor"),i["\u0275\u0275text"](8,"\n  "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](9,"\n")),2&e){const e=t.entry;i["\u0275\u0275advance"](4),i["\u0275\u0275textInterpolate"](e.value),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",i["\u0275\u0275pipeBind1"](7,2,e.otherInformation))}}function D(e,t){if(1&e&&(i["\u0275\u0275text"](0,"\n  "),i["\u0275\u0275elementStart"](1,"ul",5),i["\u0275\u0275text"](2,"\n    "),i["\u0275\u0275elementStart"](3,"li",6),i["\u0275\u0275text"](4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](5,"\n  "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](6,"\n")),2&e){const e=t.entry;i["\u0275\u0275advance"](4),i["\u0275\u0275textInterpolate"](e.value)}}function T(e,t){1&e&&i["\u0275\u0275element"](0,"i",15)}function R(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"i",16),i["\u0275\u0275listener"]("whenClickOnConfidenceNotAccepted",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](2).whenClickOnConfidenceNotAccepted(t)})),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"](2);i["\u0275\u0275property"]("authorityValue",e.currentValue)}}function N(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",17),i["\u0275\u0275text"](1,"Sorry, suggestions could not be loaded."),i["\u0275\u0275elementEnd"]())}function A(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",9),i["\u0275\u0275text"](1,"\n  "),i["\u0275\u0275template"](2,T,1,0,"i",10),i["\u0275\u0275text"](3,"\n  "),i["\u0275\u0275template"](4,R,1,1,"i",11),i["\u0275\u0275text"](5,"\n  "),i["\u0275\u0275elementStart"](6,"input",12,13),i["\u0275\u0275listener"]("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().currentValue=t}))("blur",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().onBlur(t)}))("focus",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().onFocus(t)}))("change",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().onChange(t)}))("input",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().onInput(t)}))("selectItem",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().onSelectItem(t)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](8,"\n\n  "),i["\u0275\u0275template"](9,N,2,0,"div",14),i["\u0275\u0275text"](10,"\n"),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"](),t=i["\u0275\u0275reference"](1);i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",e.searching),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!e.searching),i["\u0275\u0275advance"](2),i["\u0275\u0275classProp"]("is-invalid",e.showErrorMessages),i["\u0275\u0275property"]("id",e.model.id)("inputFormatter",e.formatter)("name",e.model.name)("ngbTypeahead",e.search)("placeholder",e.model.placeholder)("readonly",e.model.readOnly)("resultTemplate",t)("type",e.model.inputType)("ngModel",e.currentValue),i["\u0275\u0275attribute"]("aria-labelledby","label_"+e.model.id)("autoComplete",e.model.autoComplete),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",e.searchFailed)}}function G(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",9),i["\u0275\u0275text"](1,"\n  "),i["\u0275\u0275elementStart"](2,"i",18),i["\u0275\u0275listener"]("click",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().openTree(t)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](3,"\n  "),i["\u0275\u0275elementStart"](4,"input",19),i["\u0275\u0275listener"]("focus",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().onFocus(t)}))("change",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().onChange(t)}))("click",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().openTree(t)}))("keydown",(function(e){return e.preventDefault()}))("keypress",(function(e){return e.preventDefault()}))("keyup",(function(e){return e.preventDefault()})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](5,"\n"),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](4),i["\u0275\u0275classProp"]("is-invalid",e.showErrorMessages)("tree-input",!e.model.readOnly),i["\u0275\u0275property"]("id",e.id)("name",e.model.name)("placeholder",e.model.placeholder)("readonly",!0)("type",e.model.inputType)("value",null==e.currentValue?null:e.currentValue.display),i["\u0275\u0275attribute"]("aria-labelledby","label_"+e.model.id)("autoComplete",e.model.autoComplete)}}let $=(()=>{class e extends C.a{constructor(e,t,n,p,u){super(e,n,u),this.vocabularyService=e,this.cdr=t,this.layoutService=n,this.modalService=p,this.validationService=u,this.blur=new i.EventEmitter,this.change=new i.EventEmitter,this.focus=new i.EventEmitter,this.pageInfo=new y.a,this.searching=!1,this.searchFailed=!1,this.hideSearchingWhenUnsubscribed$=new m.a(()=>()=>this.changeSearchingStatus(!1)),this.click$=new h.a,this.subs=[],this.formatter=e=>"object"==typeof e?e.display:e,this.search=e=>e.pipe(Object(o.a)(this.click$),Object(r.a)(300),Object(s.a)(),Object(a.a)(()=>this.changeSearchingStatus(!0)),Object(l.a)(e=>""===e||e.length<this.model.minChars?Object(f.a)({list:[]}):this.vocabularyService.getVocabularyEntriesByValue(e,!1,this.model.vocabularyOptions,this.pageInfo).pipe(Object(v.j)(),Object(a.a)(()=>this.searchFailed=!1),Object(c.a)(()=>(this.searchFailed=!0,Object(f.a)(Object(x.b)(new y.a,[])))))),Object(d.a)(e=>e.page),Object(a.a)(()=>this.changeSearchingStatus(!1)),Object(o.a)(this.hideSearchingWhenUnsubscribed$))}ngOnInit(){this.model.value&&this.setCurrentValue(this.model.value,!0),this.vocabulary$=this.vocabularyService.findVocabularyById(this.model.vocabularyOptions.name).pipe(Object(v.j)(),Object(s.a)()),this.isHierarchicalVocabulary$=this.vocabulary$.pipe(Object(d.a)(e=>e.hierarchical)),this.subs.push(this.group.get(this.model.id).valueChanges.pipe(Object(p.a)(e=>this.currentValue!==e)).subscribe(e=>{this.setCurrentValue(this.model.value)}))}changeSearchingStatus(e){this.searching=e,this.cdr.detectChanges()}isHierarchicalVocabulary(){return this.isHierarchicalVocabulary$}onInput(e){!this.model.vocabularyOptions.closed&&Object(g.e)(e.target.value)&&(this.inputValue=new b.a(e.target.value))}onBlur(e){this.instance.isPopupOpen()?(e.preventDefault(),e.stopImmediatePropagation(),e.target.focus()):(!this.model.vocabularyOptions.closed&&Object(g.e)(this.inputValue)&&(Object(g.g)(this.inputValue)&&this.model.value!==this.inputValue&&this.dispatchUpdate(this.inputValue),this.inputValue=null),this.blur.emit(e))}onChange(e){e.stopPropagation(),Object(g.d)(this.currentValue)&&this.dispatchUpdate(null)}onSelectItem(e){this.inputValue=null,this.setCurrentValue(e.item),this.dispatchUpdate(e.item)}openTree(e){e.preventDefault(),e.stopImmediatePropagation(),this.subs.push(this.vocabulary$.pipe(Object(d.a)(e=>e.preloadLevel),Object(u.a)(1)).subscribe(e=>{const t=this.modalService.open(I.a,{size:"lg",windowClass:"treeview"});t.componentInstance.vocabularyOptions=this.model.vocabularyOptions,t.componentInstance.preloadLevel=e,t.componentInstance.selectedItem=this.currentValue?this.currentValue:"",t.result.then(e=>{e&&(this.currentValue=e,this.dispatchUpdate(e))},()=>{})}))}whenClickOnConfidenceNotAccepted(e){this.model.readOnly||this.click$.next(this.formatter(this.currentValue))}setCurrentValue(e,t=!1){let n;t?this.getInitValueFromModel().subscribe(e=>{this.currentValue=e,this.cdr.detectChanges()}):(n=Object(g.d)(e)?"":e.value,this.currentValue=n,this.cdr.detectChanges())}ngOnDestroy(){this.subs.filter(e=>Object(g.b)(e)).forEach(e=>e.unsubscribe())}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](O.a),i["\u0275\u0275directiveInject"](i.ChangeDetectorRef),i["\u0275\u0275directiveInject"](E.E),i["\u0275\u0275directiveInject"](S.q),i["\u0275\u0275directiveInject"](E.H))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-dynamic-onebox"]],viewQuery:function(e,t){if(1&e&&i["\u0275\u0275viewQuery"](P,1),2&e){let e;i["\u0275\u0275queryRefresh"](e=i["\u0275\u0275loadQuery"]())&&(t.instance=e.first)}},inputs:{group:"group",model:"model"},outputs:{blur:"blur",change:"change",focus:"focus"},features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:15,vars:6,consts:[["rt",""],["hasInfo",""],["noInfo",""],["class","position-relative right-addon",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"list-unstyled","mb-0"],[1,"list-item","text-truncate","text-primary","font-weight-bold"],["class","list-item text-truncate text-secondary",4,"ngFor","ngForOf"],[1,"list-item","text-truncate","text-secondary"],[1,"position-relative","right-addon"],["class","fas fa-circle-notch fa-spin fa-2x fa-fw text-primary position-absolute mt-1 p-0","aria-hidden","true",4,"ngIf"],["dsAuthorityConfidenceState","","class","far fa-circle fa-2x fa-fw position-absolute mt-1 p-0","aria-hidden","true",3,"authorityValue","whenClickOnConfidenceNotAccepted",4,"ngIf"],[1,"form-control",3,"id","inputFormatter","name","ngbTypeahead","placeholder","readonly","resultTemplate","type","ngModel","ngModelChange","blur","focus","change","input","selectItem"],["instance","ngbTypeahead"],["class","invalid-feedback",4,"ngIf"],["aria-hidden","true",1,"fas","fa-circle-notch","fa-spin","fa-2x","fa-fw","text-primary","position-absolute","mt-1","p-0"],["dsAuthorityConfidenceState","","aria-hidden","true",1,"far","fa-circle","fa-2x","fa-fw","position-absolute","mt-1","p-0",3,"authorityValue","whenClickOnConfidenceNotAccepted"],[1,"invalid-feedback"],["aria-hidden","true",1,"dropdown-toggle","position-absolute","tree-toggle",3,"click"],[1,"form-control",3,"id","name","placeholder","readonly","type","value","focus","change","click","keydown","keypress","keyup"]],template:function(e,t){1&e&&(i["\u0275\u0275template"](0,_,4,4,"ng-template",null,0,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275text"](2,"\n\n"),i["\u0275\u0275template"](3,B,10,4,"ng-template",null,1,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275text"](5,"\n\n"),i["\u0275\u0275template"](6,D,7,1,"ng-template",null,2,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275text"](8,"\n\n"),i["\u0275\u0275template"](9,A,11,16,"div",3),i["\u0275\u0275pipe"](10,"async"),i["\u0275\u0275text"](11,"\n\n"),i["\u0275\u0275template"](12,G,6,12,"div",3),i["\u0275\u0275pipe"](13,"async"),i["\u0275\u0275text"](14,"\n")),2&e&&(i["\u0275\u0275advance"](9),i["\u0275\u0275property"]("ngIf",!i["\u0275\u0275pipeBind1"](10,2,t.isHierarchicalVocabulary())),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",i["\u0275\u0275pipeBind1"](13,4,t.isHierarchicalVocabulary())))},directives:[w.p,w.t,w.o,S.Q,j.DefaultValueAccessor,j.NgControlStatus,j.NgModel,k.a],pipes:[w.b,M.a,V.d],styles:[".ds-form-input-addon[_ngcontent-%COMP%]{border-top-right-radius:0!important;border-bottom-right-radius:0!important;border-right:0!important}.ds-form-input-btn[_ngcontent-%COMP%]{border:var(--bs-input-btn-border-width) solid var(--bs-input-border-color);border-top-left-radius:0;border-bottom-left-radius:0;border-left:0}.ds-form-input-btn[_ngcontent-%COMP%]:focus, button.ds-form-add-more[_ngcontent-%COMP%]:focus{-webkit-box-shadow:none!important;box-shadow:none!important}button.ds-form-add-more[_ngcontent-%COMP%]:focus{outline:none}.ds-form-input-value[_ngcontent-%COMP%]{border-top-left-radius:0!important;border-bottom-left-radius:0!important}.fa-spin[_ngcontent-%COMP%]{pointer-events:none}.left-addon[_ngcontent-%COMP%]   .far[_ngcontent-%COMP%], .left-addon[_ngcontent-%COMP%]   .fas[_ngcontent-%COMP%], .left-addon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{left:0}.right-addon[_ngcontent-%COMP%]   .far[_ngcontent-%COMP%], .right-addon[_ngcontent-%COMP%]   .fas[_ngcontent-%COMP%], .right-addon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{right:0}.left-addon[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-left:calc(var(--bs-spacer) * 2.25)}.right-addon[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-right:calc(var(--bs-spacer) * 2.25)}[_nghost-%COMP%]     .dropdown-menu{width:100%!important;max-height:var(--ds-dropdown-menu-max-height);overflow-y:auto!important;overflow-x:hidden}[_nghost-%COMP%]     .dropdown-item{border-bottom:var(--bs-dropdown-border-width) solid var(--bs-dropdown-border-color)}[_nghost-%COMP%]     .dropdown-item.active, [_nghost-%COMP%]     .dropdown-item:active, [_nghost-%COMP%]     .dropdown-item:focus, [_nghost-%COMP%]     .dropdown-item:hover{color:var(--bs-dropdown-link-hover-color)!important;background-color:var(--bs-dropdown-link-hover-bg)!important}.treeview[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{max-height:85vh!important;overflow-y:auto}.tree-toggle[_ngcontent-%COMP%]{padding:.7rem .7rem 0}.tree-input[readonly][_ngcontent-%COMP%]{background-color:#fff}"]}),e})()},Dh10:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var i=n("LvDl"),o=n("2Vo4"),r=n("J3qs"),s=n("YxKz"),a=n("586V");class l{constructor(e,t="display",n,o,r){this.id=Object(i.uniqueId)(),this._item=e,this.fieldToDisplay=t,this.objToDisplay=n,this.setDisplayText(),this.editMode=r||!1,this.icons=o||[]}set item(e){this._item=e}get item(){return this._item}isNestedItem(){return Object(r.e)(this.item)&&Object(i.isObject)(this.item)&&Object(r.e)(this.objToDisplay)&&this.item[this.objToDisplay]}hasIcons(){return Object(r.e)(this.icons)}hasVisibleIcons(){if(Object(r.e)(this.icons)){let e=!1;for(const t of this.icons)if(this._item.hasOwnProperty(t.metadata)&&("string"==typeof this._item[t.metadata]&&Object(r.b)(this._item[t.metadata])||this._item[t.metadata].hasValue())&&!this.hasPlaceholder(this._item[t.metadata])&&(t.visibleWhenAuthorityEmpty||this._item[t.metadata].confidence!==s.a.CF_UNSET)&&Object(r.e)(t.style)){e=!0;break}return e}return!1}setEditMode(){this.editMode=!0}updateIcons(e){this.icons=e}updateItem(e){this._item=e,this.setDisplayText()}unsetEditMode(){this.editMode=!1}setDisplayText(){let e=this._item;if(Object(i.isObject)(this._item)){const t=this.objToDisplay?this._item[this.objToDisplay]:this._item;e=Object(i.isObject)(t)&&t?t[this.fieldToDisplay]||t.value:t}this.display=e}hasPlaceholder(e){return"string"==typeof e?e===a.b:e.hasPlaceholder()}}var c=n("x+ZM"),d=n("rbjh");class p{constructor(e=[],t="display",n,i){this.displayField=t,this.displayObj=n,this.iconsConfig=i||[],Array.isArray(e)&&this.setInitialItems(e)}add(e){const t=this.getChipsIcons(e),n=new l(e,this.displayField,this.displayObj,t),o=Object(i.findIndex)(this._items,{display:n.display.trim()});-1!==o&&Object(i.isEqual)(e,this.getChipByIndex(o).item)||(this._items.push(n),this.chipsItems.next(this._items))}getChipById(e){const t=Object(i.findIndex)(this._items,{id:e});return this.getChipByIndex(t)}getChipByIndex(e){return this._items.length>0&&this._items[e]?this._items[e]:null}getChips(){return this._items}getChipsItems(){const e=[];return this._items.forEach(t=>{e.push(t.item)}),e}hasItems(){return this._items.length>0}hasPlaceholder(e){return Object(i.isObject)(e)?e.value===a.b:e===a.b}remove(e){const t=Object(i.findIndex)(this._items,{id:e.id});this._items.splice(t,1),this.chipsItems.next(this._items)}update(e,t){const n=this.getChipById(e),i=this.getChipsIcons(t);n.updateItem(t),n.updateIcons(i),n.unsetEditMode(),this.chipsItems.next(this._items)}updateOrder(){this.chipsItems.next(this._items)}getChipsIcons(e){const t=[];if("string"==typeof e||e instanceof c.a||e instanceof d.a)return t;const n=Object(i.findIndex)(this.iconsConfig,{name:"default"}),o=-1!==n?this.iconsConfig[n]:void 0;let s,a,l;return Object.keys(e).forEach(n=>{if(l=e[n],a=Object(i.findIndex)(this.iconsConfig,{name:n}),s=-1!==a?this.iconsConfig[a]:o,Object(r.b)(l)&&Object(r.e)(s)&&!this.hasPlaceholder(l)){let e;e={metadata:n,visibleWhenAuthorityEmpty:this.displayObj!==n,style:s.style},t.push(e)}}),t}setInitialItems(e){this._items=[],e.forEach(e=>{const t=this.getChipsIcons(e),n=new l(e,this.displayField,this.displayObj,t);this._items.push(n)}),this.chipsItems=new o.a(this._items)}}},FiyT:function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();t.SubjectSubscription=function(e){function t(t,n){var i=e.call(this)||this;return i.subject=t,i.subscriber=n,i.closed=!1,i}return i(t,e),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}},t}(n("zB/H").Subscription)},"Gu/b":function(e,t,n){"use strict";n.d(t,"a",(function(){return F}));var i=n("fXoL"),o=n("HDdC"),r=n("LRne"),s=n("Kj3r"),a=n("/uUt"),l=n("vkgz"),c=n("eIep"),d=n("JIr8"),p=n("lJxs"),u=n("q92s"),m=n("LvDl"),h=n("Dh10"),f=n("J3qs"),g=n("AytR"),b=n("1QIV"),v=n("f+Ev"),x=n("oBfO"),y=n("Ssu8"),C=n("PdzJ"),I=n("e+Av"),O=n("gLKo"),E=n("ofXK"),S=n("3Pt+"),w=n("1kSV");const j=["instance"];function k(e,t){1&e&&i["\u0275\u0275text"](0),2&e&&i["\u0275\u0275textInterpolate1"]("\n  ",t.result.display,"\n")}function M(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"input",4),i["\u0275\u0275listener"]("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().currentValue=t}))("blur",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().onBlur(t)}))("keypress",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().preventEventsPropagation(t)}))("keydown",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().preventEventsPropagation(t)}))("keyup",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().onKeyUp(t)})),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275classProp"]("pl-3",e.chips.hasItems()),i["\u0275\u0275property"]("placeholder",e.model.placeholder)("readonly",e.model.readOnly)("ngModel",e.currentValue)}}function V(e,t){1&e&&i["\u0275\u0275element"](0,"i",9)}function P(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",5),i["\u0275\u0275text"](1,"\n    "),i["\u0275\u0275template"](2,V,1,0,"i",6),i["\u0275\u0275text"](3,"\n    "),i["\u0275\u0275elementStart"](4,"input",7,8),i["\u0275\u0275listener"]("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().currentValue=t}))("blur",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().onBlur(t)}))("focus",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().onFocus(t)}))("change",(function(e){return e.stopPropagation()}))("input",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().onInput(t)}))("selectItem",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().onSelectItem(t)}))("keypress",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().preventEventsPropagation(t)}))("keydown",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().preventEventsPropagation(t)}))("keyup",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().onKeyUp(t)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](6,"\n    "),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"](),t=i["\u0275\u0275reference"](1);i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",e.searching),i["\u0275\u0275advance"](2),i["\u0275\u0275classProp"]("is-invalid",e.showErrorMessages)("pl-3",e.chips.hasItems()),i["\u0275\u0275property"]("ngModel",e.currentValue)("id",e.id)("inputFormatter",e.formatter)("name",e.model.name)("ngbTypeahead",e.search)("placeholder",e.model.placeholder)("readonly",e.model.readOnly)("resultTemplate",t)("type",e.model.inputType),i["\u0275\u0275attribute"]("aria-labelledby","label_"+e.model.id)("autoComplete",e.model.autoComplete)}}let F=(()=>{class e extends y.a{constructor(e,t,n,m){super(e,n,m),this.vocabularyService=e,this.cdr=t,this.layoutService=n,this.validationService=m,this.bindId=!0,this.blur=new i.EventEmitter,this.change=new i.EventEmitter,this.focus=new i.EventEmitter,this.searching=!1,this.searchFailed=!1,this.hideSearchingWhenUnsubscribed=new o.a(()=>()=>this.changeSearchingStatus(!1)),this.formatter=e=>e.display,this.search=e=>e.pipe(Object(s.a)(300),Object(a.a)(),Object(l.a)(()=>this.changeSearchingStatus(!0)),Object(c.a)(e=>""===e||e.length<this.model.minChars?Object(r.a)({list:[]}):this.vocabularyService.getVocabularyEntriesByValue(e,!1,this.model.vocabularyOptions,new x.a).pipe(Object(b.j)(),Object(l.a)(()=>this.searchFailed=!1),Object(d.a)(()=>(this.searchFailed=!0,Object(r.a)(Object(v.b)(new x.a,[])))))),Object(p.a)(e=>e.page),Object(l.a)(()=>this.changeSearchingStatus(!1)),Object(u.a)(this.hideSearchingWhenUnsubscribed))}ngOnInit(){this.hasAuthority=this.model.vocabularyOptions&&Object(f.b)(this.model.vocabularyOptions.name),this.chips=new h.a(this.model.value,"display",null,g.a.submission.icons.metadata),this.chips.chipsItems.subscribe(e=>{const t=this.chips.getChipsItems();Object(m.isEqual)(t,this.model.value)||this.dispatchUpdate(t)})}changeSearchingStatus(e){this.searching=e,this.cdr.detectChanges()}onInput(e){e.data&&this.group.markAsDirty(),this.cdr.detectChanges()}onBlur(e){Object(f.e)(this.currentValue)&&!this.instance.isPopupOpen()&&this.addTagsToChips(),this.blur.emit(e)}onSelectItem(e){this.chips.add(e.item),this.updateModel(e),setTimeout(()=>{this.setCurrentValue(null),this.cdr.detectChanges()},50)}updateModel(e){this.dispatchUpdate(this.chips.getChipsItems())}onKeyUp(e){13!==e.keyCode&&188!==e.keyCode||(e.preventDefault(),this.addTagsToChips(),e.stopPropagation())}preventEventsPropagation(e){e.stopPropagation(),13===e.keyCode&&e.preventDefault()}setCurrentValue(e,t=!1){this.currentValue=e}addTagsToChips(){if(Object(f.b)(this.currentValue)&&(!this.hasAuthority||!this.model.vocabularyOptions.closed)){let e=[];e=this.currentValue.split(",");const t=[];e.forEach(e=>{e.split(";").forEach(e=>{t.push(e)})}),t.forEach(e=>{(e=e.trim()).length>0&&this.chips.add(e)}),setTimeout(()=>{this.setCurrentValue(null),this.cdr.detectChanges()},50),this.updateModel(event)}}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](C.a),i["\u0275\u0275directiveInject"](i.ChangeDetectorRef),i["\u0275\u0275directiveInject"](I.E),i["\u0275\u0275directiveInject"](I.H))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-dynamic-tag"]],viewQuery:function(e,t){if(1&e&&i["\u0275\u0275viewQuery"](j,1),2&e){let e;i["\u0275\u0275queryRefresh"](e=i["\u0275\u0275loadQuery"]())&&(t.instance=e.first)}},inputs:{bindId:"bindId",group:"group",model:"model"},outputs:{blur:"blur",change:"change",focus:"focus"},features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:10,vars:6,consts:[["rt",""],[3,"chips","editable","showIcons","wrapperClass"],["class","border-0 form-control-plaintext tag-input flex-grow-1 mt-1 mb-1","type","text","role","textbox",3,"pl-3","placeholder","readonly","ngModel","ngModelChange","blur","keypress","keydown","keyup",4,"ngIf"],["class","position-relative right-addon",4,"ngIf"],["type","text","role","textbox",1,"border-0","form-control-plaintext","tag-input","flex-grow-1","mt-1","mb-1",3,"placeholder","readonly","ngModel","ngModelChange","blur","keypress","keydown","keyup"],[1,"position-relative","right-addon"],["class","fas fa-circle-notch fa-spin fa-2x fa-fw text-primary position-absolute mt-1 p-0","aria-hidden","true",4,"ngIf"],["type","text",1,"border-0","form-control-plaintext","tag-input","flex-grow-1","mt-1","mb-1",3,"ngModel","id","inputFormatter","name","ngbTypeahead","placeholder","readonly","resultTemplate","type","ngModelChange","blur","focus","change","input","selectItem","keypress","keydown","keyup"],["instance","ngbTypeahead"],["aria-hidden","true",1,"fas","fa-circle-notch","fa-spin","fa-2x","fa-fw","text-primary","position-absolute","mt-1","p-0"]],template:function(e,t){1&e&&(i["\u0275\u0275template"](0,k,1,1,"ng-template",null,0,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275text"](2,"\n\n\n  "),i["\u0275\u0275elementStart"](3,"ds-chips",1),i["\u0275\u0275text"](4,"\n\n  "),i["\u0275\u0275template"](5,M,1,5,"input",2),i["\u0275\u0275text"](6,"\n\n  "),i["\u0275\u0275template"](7,P,7,16,"div",3),i["\u0275\u0275text"](8,"\n  "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](9,"\n\n")),2&e&&(i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("chips",t.chips)("editable",!1)("showIcons",t.model.hasAuthority)("wrapperClass","border-bottom border-light"),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!t.model.hasAuthority),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",t.model.hasAuthority))},directives:[O.a,E.p,S.DefaultValueAccessor,S.NgControlStatus,S.NgModel,w.Q],styles:[".ds-form-input-addon[_ngcontent-%COMP%]{border-top-right-radius:0!important;border-bottom-right-radius:0!important;border-right:0!important}.ds-form-input-btn[_ngcontent-%COMP%]{border:var(--bs-input-btn-border-width) solid var(--bs-input-border-color);border-top-left-radius:0;border-bottom-left-radius:0;border-left:0}.ds-form-input-btn[_ngcontent-%COMP%]:focus, button.ds-form-add-more[_ngcontent-%COMP%]:focus{-webkit-box-shadow:none!important;box-shadow:none!important}button.ds-form-add-more[_ngcontent-%COMP%]:focus{outline:none}.ds-form-input-value[_ngcontent-%COMP%]{border-top-left-radius:0!important;border-bottom-left-radius:0!important}.fa-spin[_ngcontent-%COMP%]{pointer-events:none}.left-addon[_ngcontent-%COMP%]   .far[_ngcontent-%COMP%], .left-addon[_ngcontent-%COMP%]   .fas[_ngcontent-%COMP%], .left-addon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{left:0}.right-addon[_ngcontent-%COMP%]   .far[_ngcontent-%COMP%], .right-addon[_ngcontent-%COMP%]   .fas[_ngcontent-%COMP%], .right-addon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{right:0}.left-addon[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-left:calc(var(--bs-spacer) * 2.25)}.right-addon[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-right:calc(var(--bs-spacer) * 2.25)}.chips-left[_ngcontent-%COMP%]{left:0;padding-right:100%}[_nghost-%COMP%]     .dropdown-menu{width:100%!important;max-height:var(--ds-dropdown-menu-max-height);overflow-y:scroll;overflow-x:hidden;left:0!important;margin-top:var(--bs-spacer)!important}[_nghost-%COMP%]     .dropdown-item.active, [_nghost-%COMP%]     .dropdown-item:active, [_nghost-%COMP%]     .dropdown-item:focus, [_nghost-%COMP%]     .dropdown-item:hover{color:var(--bs-dropdown-link-hover-color)!important;background-color:var(--bs-dropdown-link-hover-bg)!important}.tag-input[_ngcontent-%COMP%]{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;outline:none;width:auto!important}"]}),e})()},JN36:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return s}));var i=n("mrSG"),o=n("e+Av");const r="CUSTOM_SWITCH";let s=(()=>{class e extends o.r{constructor(e,t){super(e,t),this.type=r}}return Object(i.b)([Object(o.U)(),Object(i.c)("design:type",String)],e.prototype,"type",void 0),e})()},"KKO+":function(e,t,n){"use strict";n.d(t,"a",(function(){return N}));var i=n("fXoL"),o=n("LRne"),r=n("itXk"),s=n("5+tZ"),a=n("lJxs"),l=n("Kqap"),c=n("pLZG"),d=n("e+Av"),p=n("LvDl"),u=n("Dh10"),m=n("J3qs"),h=n("R0Ic");const f=Object(h.m)("shrinkInOut",[Object(h.j)("in",Object(h.k)({height:"100%",opacity:1})),Object(h.l)("* => void",[Object(h.k)({height:"!",opacity:1}),Object(h.e)(200,Object(h.k)({height:0,opacity:0}))]),Object(h.l)("void => *",[Object(h.k)({height:0,opacity:0}),Object(h.e)(200,Object(h.k)({height:"*",opacity:1}))])]);var g=n("Gx58"),b=n("x+ZM"),v=n("AytR"),x=n("586V"),y=n("1QIV"),C=n("PdzJ"),I=n("Q5/L"),O=n("NFsL"),E=n("ofXK"),S=n("1kSV"),w=n("hqmO"),j=n("Frqi"),k=n("gLKo"),M=n("sYmb");const V=["formRef"];function P(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"a",7),i["\u0275\u0275pipe"](1,"translate"),i["\u0275\u0275text"](2,"\n  "),i["\u0275\u0275elementStart"](3,"span",8),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().collapseForm()})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](4,"\n"),i["\u0275\u0275elementEnd"]()}2&e&&i["\u0275\u0275propertyInterpolate"]("ngbTooltip",i["\u0275\u0275pipeBind1"](1,1,"form.group-collapse-help"))}function F(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"a",7),i["\u0275\u0275pipe"](1,"translate"),i["\u0275\u0275text"](2,"\n  "),i["\u0275\u0275elementStart"](3,"span",9),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().expandForm()})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](4,"\n"),i["\u0275\u0275elementEnd"]()}2&e&&i["\u0275\u0275propertyInterpolate"]("ngbTooltip",i["\u0275\u0275pipeBind1"](1,1,"form.group-expand-help"))}function _(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",15),i["\u0275\u0275text"](1,"\n\n        "),i["\u0275\u0275elementStart"](2,"button",16),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](2).save()})),i["\u0275\u0275text"](3,"\n          "),i["\u0275\u0275element"](4,"i",17),i["\u0275\u0275text"](5,"\n        "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](6,"\n        "),i["\u0275\u0275elementStart"](7,"button",16),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](2).delete()})),i["\u0275\u0275text"](8,"\n          "),i["\u0275\u0275element"](9,"i",18),i["\u0275\u0275text"](10,"\n        "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](11,"\n        "),i["\u0275\u0275elementStart"](12,"button",16),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](2).clear()})),i["\u0275\u0275text"](13,"\n          "),i["\u0275\u0275element"](14,"i",19),i["\u0275\u0275text"](15,"\n        "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](16,"\n\n    "),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("disabled",e.isMandatoryFieldEmpty()),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("disabled",!e.editMode),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("disabled",e.isMandatoryFieldEmpty())}}function L(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",10),i["\u0275\u0275text"](1,"\n    "),i["\u0275\u0275elementStart"](2,"ds-form",11,12),i["\u0275\u0275listener"]("dfBlur",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().onBlur(t)}))("dfFocus",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().onFocus(t)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](4,"\n\n\n    "),i["\u0275\u0275template"](5,_,17,3,"div",13),i["\u0275\u0275pipe"](6,"async"),i["\u0275\u0275text"](7,"\n    "),i["\u0275\u0275element"](8,"div",14),i["\u0275\u0275text"](9,"\n  "),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("@shrinkInOut",void 0),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("formId",e.formId)("formModel",e.formModel)("displaySubmit",!1)("displayCancel",!1)("emitChange",!1),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",!i["\u0275\u0275pipeBind1"](6,7,e.formCollapsed))}}function B(e,t){1&e&&i["\u0275\u0275element"](0,"ds-loading",20),2&e&&i["\u0275\u0275property"]("showMessage",!1)}function D(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275text"](1,"\n      "),i["\u0275\u0275element"](2,"input",21),i["\u0275\u0275pipe"](3,"translate"),i["\u0275\u0275text"](4,"\n    "),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](2),i["\u0275\u0275propertyInterpolate"]("value",i["\u0275\u0275pipeBind1"](3,1,"form.no-value")))}function T(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"ds-chips",22),i["\u0275\u0275listener"]("selected",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().onChipSelected(t)})),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("chips",e.chips)("editable",!0)("showIcons",!0)}}const R=function(e,t){return{"border-top":e,"border border-danger":t}};let N=(()=>{class e extends d.z{constructor(e,t,n,r,s,a){super(s,a),this.vocabularyService=e,this.formBuilderService=t,this.formService=n,this.cdr=r,this.layoutService=s,this.validationService=a,this.blur=new i.EventEmitter,this.change=new i.EventEmitter,this.focus=new i.EventEmitter,this.formCollapsed=Object(o.a)(!1),this.editMode=!1,this.subs=[]}ngOnInit(){const e={rows:this.model.formConfiguration};this.model.isEmpty()||(this.formCollapsed=Object(o.a)(!0)),this.model.valueChanges.subscribe(e=>{!Object(m.e)(e)||1===e.length&&Object(g.b)(e[0])?this.expandForm():this.collapseForm()}),this.formId=this.formService.getUniqueId(this.model.id),this.formModel=this.formBuilderService.modelFromConfiguration(this.model.submissionId,e,this.model.scopeUUID,{},this.model.submissionScope,this.model.readOnly),this.initChipsFromModelValue()}isMandatoryFieldEmpty(){let e=!0;return this.formModel.forEach(t=>{t.group.forEach(t=>{t.name!==this.model.mandatoryField||(e=null==t.value)})}),e}onBlur(e){this.blur.emit()}onChipSelected(e){this.expandForm(),this.selectedChipItem=this.chips.getChipByIndex(e),this.formModel.forEach(e=>{e.group.forEach(e=>{const t=this.selectedChipItem.item[e.name]===x.b||this.selectedChipItem.item[e.name].value===x.b?null:this.selectedChipItem.item[e.name],n=this.formBuilderService.isInputModel(e)&&Object(m.g)(t)&&"string"!=typeof t?t.value:t;e.value=n})}),this.editMode=!0}onFocus(e){this.focus.emit(e)}collapseForm(){this.formCollapsed=Object(o.a)(!0),this.clear()}expandForm(){this.formCollapsed=Object(o.a)(!1)}clear(){this.editMode&&(this.selectedChipItem.editMode=!1,this.selectedChipItem=null,this.editMode=!1),this.resetForm(),this.model.isEmpty()||(this.formCollapsed=Object(o.a)(!0))}save(){this.editMode?this.modifyChip():this.addToChips()}delete(){this.chips.remove(this.selectedChipItem),this.clear()}ngOnDestroy(){this.subs.filter(e=>Object(m.b)(e)).forEach(e=>e.unsubscribe())}addToChips(){if(this.formRef.formGroup.valid){if(!this.isMandatoryFieldEmpty()){const e=this.buildChipItem();this.chips.add(e),this.resetForm()}}else this.formService.validateAllFormFields(this.formRef.formGroup)}modifyChip(){if(this.formRef.formGroup.valid){if(!this.isMandatoryFieldEmpty()){const e=this.buildChipItem();this.chips.update(this.selectedChipItem.id,e),this.resetForm(),this.cdr.detectChanges()}}else this.formService.validateAllFormFields(this.formRef.formGroup)}buildChipItem(){const e=Object.create({});return this.formModel.forEach(t=>{t.group.forEach(t=>{e[t.name]=t.value||x.b})}),e}initChipsFromModelValue(){let e;this.model.isEmpty()?this.initChips([]):(e=Object(o.a)(this.model.value),this.subs.push(e.pipe(Object(s.a)(e=>{const t=[];return e.forEach(e=>{const n=Object.keys(e).map(t=>{let n;if(Object(p.isObject)(e[t])&&e[t].hasAuthority()&&Object(m.e)(e[t].authority)){const i=t.replace(/\./g,"_"),o=this.formBuilderService.findById(i,this.formModel);n=this.vocabularyService.findEntryDetailById(e[t].authority,o.vocabularyOptions.name).pipe(Object(y.j)(),Object(a.a)(n=>Object.assign(new b.a,e[t],{otherInformation:n.otherInformation})))}else n=Object(o.a)(e[t]);return n.pipe(Object(a.a)(e=>({[t]:e})))});t.push(Object(r.a)(n))}),t}),Object(s.a)((e,t)=>e.pipe(Object(a.a)(e=>({index:t,value:e.reduce((e,t)=>Object.assign({},e,t))})))),Object(l.a)((e,t)=>(0===e.length?e.push(t.value):e.splice(t.index,0,t.value),e),[]),Object(c.a)(e=>this.model.value.length===e.length)).subscribe(e=>{this.model.value=e,this.initChips(e),this.cdr.markForCheck()})))}initChips(e){this.chips=new u.a(e,"value",this.model.mandatoryField,v.a.submission.icons.metadata),this.subs.push(this.chips.chipsItems.subscribe(()=>{const e=this.chips.getChipsItems();Object(p.isEqual)(e,this.model.value)||Object(m.d)(e)&&this.model.isEmpty()||(this.model.value=e,this.change.emit())}))}resetForm(){this.formRef&&this.formService.resetForm(this.formRef.formGroup,this.formModel,this.formId)}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](C.a),i["\u0275\u0275directiveInject"](I.a),i["\u0275\u0275directiveInject"](O.a),i["\u0275\u0275directiveInject"](i.ChangeDetectorRef),i["\u0275\u0275directiveInject"](d.E),i["\u0275\u0275directiveInject"](d.H))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-dynamic-relation-group"]],viewQuery:function(e,t){if(1&e&&i["\u0275\u0275viewQuery"](V,1),2&e){let e;i["\u0275\u0275queryRefresh"](e=i["\u0275\u0275loadQuery"]())&&(t.formRef=e.first)}},inputs:{formId:"formId",group:"group",model:"model"},outputs:{blur:"blur",change:"change",focus:"focus"},features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:21,vars:16,consts:[["class","close position-relative","placement","left",3,"ngbTooltip",4,"ngIf"],[1,"pt-2",3,"ngClass"],["class","pl-2 row",4,"ngIf"],[1,"d-flex"],[3,"showMessage",4,"ngIf"],[4,"ngIf"],[3,"chips","editable","showIcons","selected",4,"ngIf"],["placement","left",1,"close","position-relative",3,"ngbTooltip"],["aria-hidden","true",1,"fas","fa-angle-up","fa-fw","fa-2x",3,"click"],["aria-hidden","true",1,"fas","fa-angle-down","fa-fw","fa-2x",3,"click"],[1,"pl-2","row"],[1,"col-sm-12","col-md-8","col-lg-9","col-xl-10","pl-0",3,"formId","formModel","displaySubmit","displayCancel","emitChange","dfBlur","dfFocus"],["formRef","formComponent"],["class","col p-0 m-0 d-flex justify-content-center align-items-center",4,"ngIf"],[1,"clearfix"],[1,"col","p-0","m-0","d-flex","justify-content-center","align-items-center"],["type","button",1,"btn","btn-link",3,"disabled","click"],["aria-hidden","true",1,"fas","fa-save","text-primary","fa-2x"],["aria-hidden","true",1,"fas","fa-trash","text-danger","fa-2x"],["aria-hidden","true",1,"fas","fa-undo","fa-2x"],[3,"showMessage"],["type","text","readonly","","tabindex","-1",1,"border-0","form-control-plaintext","tag-input","mt-1","mb-1","pl-2","text-muted",3,"value"],[3,"chips","editable","showIcons","selected"]],template:function(e,t){1&e&&(i["\u0275\u0275template"](0,P,5,3,"a",0),i["\u0275\u0275pipe"](1,"async"),i["\u0275\u0275text"](2,"\n"),i["\u0275\u0275template"](3,F,5,3,"a",0),i["\u0275\u0275pipe"](4,"async"),i["\u0275\u0275text"](5,"\n\n"),i["\u0275\u0275elementStart"](6,"div",1),i["\u0275\u0275text"](7,"\n  "),i["\u0275\u0275template"](8,L,10,9,"div",2),i["\u0275\u0275pipe"](9,"async"),i["\u0275\u0275text"](10,"\n\n  "),i["\u0275\u0275elementStart"](11,"div",3),i["\u0275\u0275text"](12,"\n    "),i["\u0275\u0275template"](13,B,1,1,"ds-loading",4),i["\u0275\u0275text"](14,"\n    "),i["\u0275\u0275template"](15,D,5,3,"div",5),i["\u0275\u0275text"](16,"\n    "),i["\u0275\u0275template"](17,T,1,3,"ds-chips",6),i["\u0275\u0275text"](18,"\n  "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](19,"\n"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](20,"\n")),2&e&&(i["\u0275\u0275property"]("ngIf",!i["\u0275\u0275pipeBind1"](1,7,t.formCollapsed)),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",i["\u0275\u0275pipeBind1"](4,9,t.formCollapsed)),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngClass",i["\u0275\u0275pureFunction2"](13,R,!t.showErrorMessages,t.showErrorMessages)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!i["\u0275\u0275pipeBind1"](9,11,t.formCollapsed)),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngIf",!t.chips),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",t.chips&&!t.chips.hasItems()),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",t.chips&&t.chips.hasItems()))},directives:[E.p,E.m,S.O,w.a,j.a,k.a],pipes:[E.b,M.d],styles:[".close[_ngcontent-%COMP%]{top:-2.5rem}"],data:{animation:[f]}}),e})()},Mxlh:function(e,t,n){"use strict";t.ObjectUnsubscribedError=function(){function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e}()},NvTF:function(e,t,n){"use strict";n.d(t,"b",(function(){return Ee})),n.d(t,"a",(function(){return Se}));var i=n("fXoL"),o=n("e+Av"),r=n("n7Wa"),s=n("yXJd"),a=n("fEfZ"),l=n("4d3N"),c=n("RyS1"),d=n("b6An"),p=n("8e57"),u=n("upJS"),m=n("pze9"),h=n("J3qs"),f=n("ZJee"),g=n("Gu/b"),b=n("Ysrn"),v=n("ZO65"),x=n("A/iK"),y=n("bPV6"),C=n("0pnk"),I=n("tqJZ"),O=n("ZTun"),E=n("KKO+"),S=n("uyTL"),w=n("JN36"),j=n("xjoE"),k=n("cBqT"),M=n("eIep"),V=n("IzEk"),P=n("lJxs"),F=n("JX91"),_=n("itXk"),L=n("sw+l"),B=n("wdRg"),D=n("1Pbu"),T=n("1QIV"),R=n("4SI6"),N=n("cBt8"),A=n("84Zn"),G=n("ysan"),$=n("kcku"),q=n("586V"),z=n("x+ZM"),H=n("sYmb"),J=n("1kSV"),X=n("kN8A"),Q=n("EGek"),U=n("iqTE"),K=n("l7P3"),W=n("fHtB"),Z=n("NFsL"),Y=n("Q5/L"),ee=n("J/vq"),te=n("3Pt+"),ne=n("ofXK"),ie=n("/Vzl");const oe=["componentViewContainer"],re=function(e,t){return[e,t]};function se(e,t){if(1&e&&(i["\u0275\u0275element"](0,"label",11),i["\u0275\u0275pipe"](1,"translate"),i["\u0275\u0275pipe"](2,"translate")),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("id","label_"+e.model.id)("for",e.id)("innerHTML",e.model.required&&e.model.label?i["\u0275\u0275pipeBind1"](1,4,e.model.label)+" *":i["\u0275\u0275pipeBind1"](2,6,e.model.label),i["\u0275\u0275sanitizeHtml"])("ngClass",i["\u0275\u0275pureFunction2"](8,re,e.getClass("element","label"),e.getClass("grid","label")))}}function ae(e,t){1&e&&i["\u0275\u0275elementContainer"](0)}function le(e,t){if(1&e&&(i["\u0275\u0275element"](0,"small",12),i["\u0275\u0275pipe"](1,"translate")),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("innerHTML",i["\u0275\u0275pipeBind1"](1,2,e.model.hint),i["\u0275\u0275sanitizeHtml"])("ngClass",e.getClass("element","hint"))}}function ce(e,t){1&e&&i["\u0275\u0275element"](0,"div",13)}function de(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"small",16),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind2"](2,1,e,n.model.validators))}}function pe(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",14),i["\u0275\u0275text"](1,"\n        "),i["\u0275\u0275template"](2,de,3,4,"small",15),i["\u0275\u0275text"](3,"\n      "),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("id",e.id+"_errors")("ngClass",i["\u0275\u0275pureFunction2"](3,re,e.getClass("element","errors"),e.getClass("grid","errors"))),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",e.errorMessages)}}function ue(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"option",21),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;i["\u0275\u0275property"]("value",e.code),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](e.display)}}const me=function(){return{standalone:!0}};function he(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",17),i["\u0275\u0275text"](1,"\n      "),i["\u0275\u0275elementStart"](2,"select",18,19),i["\u0275\u0275listener"]("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().model.language=t}))("blur",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().onBlur(t)}))("change",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().onChangeLanguage(t)})),i["\u0275\u0275text"](4,"\n        "),i["\u0275\u0275template"](5,ue,2,2,"option",20),i["\u0275\u0275text"](6,"\n      "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](7,"\n    "),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("disabled",e.model.readOnly)("ngModel",e.model.language)("ngModelOptions",i["\u0275\u0275pureFunction0"](4,me)),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngForOf",e.model.languageCodes)}}function fe(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",22),i["\u0275\u0275text"](1,"\n      "),i["\u0275\u0275elementStart"](2,"button",23),i["\u0275\u0275listener"]("click",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().openLookup(),t.stopPropagation()})),i["\u0275\u0275pipe"](3,"translate"),i["\u0275\u0275element"](4,"i",24),i["\u0275\u0275text"](5,"\n      "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](6,"\n    "),i["\u0275\u0275elementEnd"]()}2&e&&(i["\u0275\u0275advance"](2),i["\u0275\u0275propertyInterpolate"]("ngbTooltip",i["\u0275\u0275pipeBind1"](3,1,"form.lookup-help")))}function ge(e,t){1&e&&i["\u0275\u0275elementContainer"](0)}function be(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"ds-existing-metadata-list-element",27),i["\u0275\u0275listener"]("remove",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](2).onRemove()})),i["\u0275\u0275pipe"](1,"async"),i["\u0275\u0275pipe"](2,"async"),i["\u0275\u0275text"](3,"\n    "),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"](2);i["\u0275\u0275property"]("reoRel",i["\u0275\u0275pipeBind1"](1,6,e.relationshipValue$))("submissionItem",i["\u0275\u0275pipeBind1"](2,8,e.item$))("listId",e.listId)("metadataFields",e.model.metadataFields)("submissionId",e.model.submissionId)("relationshipOptions",e.model.relationship)}}const ve=function(e){return{"d-block pb-2 pt-2":e}};function xe(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"ds-existing-relation-list-element",28),i["\u0275\u0275pipe"](1,"async"),i["\u0275\u0275pipe"](2,"async"),i["\u0275\u0275text"](3,"\n    "),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"](2);i["\u0275\u0275property"]("ngClass",i["\u0275\u0275pureFunction1"](11,ve,!(null!=e.context&&e.context.index)))("reoRel",i["\u0275\u0275pipeBind1"](1,7,e.relationshipValue$))("submissionItem",i["\u0275\u0275pipeBind1"](2,9,e.item$))("listId",e.listId)("metadataFields",e.model.metadataFields)("submissionId",e.model.submissionId)("relationshipOptions",e.model.relationship)}}function ye(e,t){if(1&e&&(i["\u0275\u0275element"](0,"small",12),i["\u0275\u0275pipe"](1,"translate")),2&e){const e=i["\u0275\u0275nextContext"](2);i["\u0275\u0275property"]("innerHTML",i["\u0275\u0275pipeBind1"](1,2,e.model.hint),i["\u0275\u0275sanitizeHtml"])("ngClass",e.getClass("element","hint"))}}function Ce(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275text"](1,"\n    "),i["\u0275\u0275template"](2,be,4,10,"ds-existing-metadata-list-element",25),i["\u0275\u0275text"](3,"\n    "),i["\u0275\u0275template"](4,xe,4,13,"ds-existing-relation-list-element",26),i["\u0275\u0275text"](5,"\n    "),i["\u0275\u0275template"](6,ye,2,4,"small",5),i["\u0275\u0275text"](7,"\n    "),i["\u0275\u0275element"](8,"div",13),i["\u0275\u0275text"](9,"\n  "),i["\u0275\u0275elementContainerEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",e.model.hasSelectableMetadata),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!e.model.hasSelectableMetadata),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",e.hasHint&&(!1===e.model.repeatable||(null==e.context?null:e.context.index)===(null==e.context||null==e.context.context||null==e.context.context.groups?null:e.context.context.groups.length)-1)&&(!e.showErrorMessages||0===e.errorMessages.length))}}const Ie=function(e,t){return{"form-row":e,"d-none":t}},Oe=["*"];function Ee(e){switch(e.type){case o.d:return O.a;case o.e:return r.c;case o.f:return e instanceof u.a?v.a:r.d;case o.g:return e.inline?r.b:S.a;case o.h:return I.a;case o.i:return r.e;case o.j:return e instanceof m.a?v.a:r.f;case o.l:return r.g;case o.n:return r.h;case o.o:return r.i;case a.a:return x.a;case l.a:return y.a;case c.a:return g.a;case q.a:return E.a;case d.a:return b.b;case p.a:case f.a:return C.a;case B.a:return L.a;case w.a:return j.a;default:return null}}let Se=(()=>{class e extends o.A{constructor(e,t,n,o,r,s,a,l,c,d,p,u,m,h,f,g,b){super(h,e,n,o,t,s),this.componentFactoryResolver=e,this.dynamicFormComponentService=t,this.layoutService=n,this.validationService=o,this.translateService=r,this.relationService=s,this.modalService=a,this.relationshipService=l,this.selectableListService=c,this.itemService=d,this.zone=p,this.store=u,this.submissionObjectService=m,this.ref=h,this.formService=f,this.formBuilderService=g,this.submissionService=b,this.asBootstrapFormGroup=!1,this.bindId=!0,this.context=null,this.hasErrorMessaging=!1,this.layout=null,this.subs=[],this.blur=new i.EventEmitter,this.change=new i.EventEmitter,this.focus=new i.EventEmitter,this.customEvent=new i.EventEmitter}get componentType(){return Ee(this.model)}ngOnInit(){this.isRelationship=Object(h.b)(this.model.relationship);const e=Object(h.b)(this.model.relationshipConfig);if(this.isRelationship||e){const t=this.model.relationshipConfig||this.model.relationship,n=Object.assign(new $.a,t);if(this.listId=`list-${this.model.submissionId}-${n.relationshipType}`,this.setItem(),e||!this.model.repeatable){const e=this.selectableListService.getSelectableList(this.listId).pipe(Object(k.a)(e=>Object(h.a)(e)),Object(M.a)(()=>this.item$.pipe(Object(V.a)(1))),Object(M.a)(e=>{const t=this.relationshipService.getItemRelationshipsByLabel(e,n.relationshipType,void 0,!0,!0,Object(A.a)("leftItem"),Object(A.a)("rightItem"),Object(A.a)("relationshipType"));return t.pipe(Object(T.j)(),Object(T.n)()).subscribe(t=>{t.forEach(t=>{const i=e.firstMetadata(n.metadataField,{authority:`${N.e}${t.id}`}),o=e.firstMetadata(this.model.metadataFields,{authority:`${N.e}${t.id}`});Object(h.b)(i)&&Object(h.e)(i.value)&&Object(h.b)(o)&&Object(h.e)(o.value)&&this.relationshipService.setNameVariant(this.listId,i.value,o.value)})}),t.pipe(Object(G.d)(e.uuid),Object(T.i)(),Object(P.a)(e=>e.payload.page.map(e=>Object.assign(new R.a,{indexableObject:e}))))})).subscribe(e=>this.selectableListService.select(this.listId,e));this.subs.push(e)}if(this.value=Object(h.b)(this.model.metadataValue)?Object.assign(new z.a,this.model.metadataValue):Object.assign(new z.a,this.model.value),Object(h.b)(this.value)&&this.value.isVirtual){const e=this.relationshipService.findById(this.value.virtualValue,!0,!0,Object(A.a)("leftItem"),Object(A.a)("rightItem"),Object(A.a)("relationshipType")).pipe(Object(T.c)(),Object(T.o)());this.relationshipValue$=Object(_.a)([this.item$.pipe(Object(V.a)(1)),e]).pipe(Object(M.a)(([e,t])=>t.leftItem.pipe(Object(T.c)(),Object(T.o)(),Object(P.a)(n=>new s.b(t,n.uuid!==e.uuid,this.relationshipService,this.store,this.model.submissionId)))),Object(F.a)(void 0))}}}get isCheckbox(){return this.model.type===o.e||this.model.type===w.a}ngOnChanges(e){e&&!this.isRelationship&&Object(h.b)(this.group.get(this.model.id))&&(super.ngOnChanges(e),this.model&&this.model.placeholder&&(this.model.placeholder=this.translateService.instant(this.model.placeholder)))}ngDoCheck(){Object(h.h)(this.showErrorMessagesPreviousStage)&&this.showErrorMessagesPreviousStage!==this.showErrorMessages&&(this.showErrorMessagesPreviousStage=this.showErrorMessages,this.forceShowErrorDetection())}ngAfterViewInit(){this.showErrorMessagesPreviousStage=this.showErrorMessages}forceShowErrorDetection(){this.showErrorMessages&&(this.destroyFormControlComponent(),this.createFormControlComponent())}onChangeLanguage(e){Object(h.e)(this.model.value)&&this.onChange(e)}hasRelationship(){return Object(h.e)(this.model)&&this.model.hasOwnProperty("relationship")&&Object(h.e)(this.model.relationship)}isVirtual(){const e=this.model.metadataValue;return Object(h.e)(e)&&e.isVirtual}hasResultsSelected(){return this.model.value.pipe(Object(P.a)(e=>Object(h.e)(e)))}openLookup(){this.modalRef=this.modalService.open(D.a,{size:"lg"}),Object(h.b)(this.model.value)&&(this.focus.emit({$event:new Event("focus"),context:this.context,control:this.control,model:this.model,type:o.B.Focus}),this.change.emit({$event:new Event("change"),context:this.context,control:this.control,model:this.model,type:o.B.Change})),this.submissionService.dispatchSave(this.model.submissionId);const e=this.modalRef.componentInstance;Object(h.b)(this.model.value)&&!this.model.readOnly&&("string"==typeof this.model.value?e.query=this.model.value:"string"==typeof this.model.value.value&&(e.query=this.model.value.value)),e.repeatable=this.model.repeatable,e.listId=this.listId,e.relationshipOptions=this.model.relationship,e.label=this.model.relationship.relationshipType,e.metadataFields=this.model.metadataFields,e.item=this.item,e.collection=this.collection,e.submissionId=this.model.submissionId}onRemove(){const e=this.context.context,t=this.formBuilderService.getPath(e),n=this.group.root.get(t);this.formBuilderService.removeFormArrayGroup(this.context.index,n,e),0===this.model.parent.context.groups.length&&this.formBuilderService.addFormArrayGroup(n,e)}ngOnDestroy(){this.subs.filter(e=>Object(h.b)(e)).forEach(e=>e.unsubscribe())}get hasHint(){return Object(h.e)(this.model.hint)&&"&nbsp;"!==this.model.hint}setItem(){const e=this.submissionObjectService.findById(this.model.submissionId,!0,!0,Object(A.a)("item"),Object(A.a)("collection")).pipe(Object(T.c)(),Object(T.o)());this.item$=e.pipe(Object(M.a)(e=>e.item.pipe(Object(T.c)(),Object(T.o)())));const t=e.pipe(Object(M.a)(e=>e.collection.pipe(Object(T.c)(),Object(T.o)())));this.subs.push(this.item$.subscribe(e=>this.item=e)),this.subs.push(t.subscribe(e=>this.collection=e))}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](i.ComponentFactoryResolver),i["\u0275\u0275directiveInject"](o.y),i["\u0275\u0275directiveInject"](o.E),i["\u0275\u0275directiveInject"](o.H),i["\u0275\u0275directiveInject"](H.e),i["\u0275\u0275directiveInject"](o.F),i["\u0275\u0275directiveInject"](J.q),i["\u0275\u0275directiveInject"](X.a),i["\u0275\u0275directiveInject"](Q.a),i["\u0275\u0275directiveInject"](U.a),i["\u0275\u0275directiveInject"](i.NgZone),i["\u0275\u0275directiveInject"](K.i),i["\u0275\u0275directiveInject"](W.a),i["\u0275\u0275directiveInject"](i.ChangeDetectorRef),i["\u0275\u0275directiveInject"](Z.a),i["\u0275\u0275directiveInject"](Y.a),i["\u0275\u0275directiveInject"](ee.a))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-dynamic-form-control-container"]],contentQueries:function(e,t,n){if(1&e&&i["\u0275\u0275contentQuery"](n,o.O,0),2&e){let e;i["\u0275\u0275queryRefresh"](e=i["\u0275\u0275loadQuery"]())&&(t.contentTemplateList=e)}},viewQuery:function(e,t){if(1&e&&i["\u0275\u0275viewQuery"](oe,3,i.ViewContainerRef),2&e){let e;i["\u0275\u0275queryRefresh"](e=i["\u0275\u0275loadQuery"]())&&(t.componentViewContainerRef=e.first)}},inputs:{inputTemplateList:["templates","inputTemplateList"],formId:"formId",asBootstrapFormGroup:"asBootstrapFormGroup",bindId:"bindId",context:"context",group:"group",hostClass:"hostClass",hasErrorMessaging:"hasErrorMessaging",layout:"layout",model:"model"},outputs:{blur:"dfBlur",change:"dfChange",focus:"dfFocus",customEvent:"ngbEvent"},features:[i["\u0275\u0275InheritDefinitionFeature"],i["\u0275\u0275NgOnChangesFeature"]],ngContentSelectors:Oe,decls:37,vars:23,consts:[[3,"formGroup","ngClass"],[3,"id","for","innerHTML","ngClass",4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngClass"],["componentViewContainer",""],["class","text-muted ds-hint",3,"innerHTML","ngClass",4,"ngIf"],["class","clearfix w-100 mb-2",4,"ngIf"],[3,"id","ngClass",4,"ngIf"],["class","col-xs-2",4,"ngIf"],["class","col-auto text-center",4,"ngIf"],[4,"ngIf"],[3,"id","for","innerHTML","ngClass"],[1,"text-muted","ds-hint",3,"innerHTML","ngClass"],[1,"clearfix","w-100","mb-2"],[3,"id","ngClass"],["class","invalid-feedback d-block",4,"ngFor","ngForOf"],[1,"invalid-feedback","d-block"],[1,"col-xs-2"],["required","",1,"form-control",3,"disabled","ngModel","ngModelOptions","ngModelChange","blur","change"],["language","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"col-auto","text-center"],["type","button","placement","top",1,"btn","btn-secondary",3,"ngbTooltip","click"],[1,"fa","fa-search"],[3,"reoRel","submissionItem","listId","metadataFields","submissionId","relationshipOptions","remove",4,"ngIf"],[3,"ngClass","reoRel","submissionItem","listId","metadataFields","submissionId","relationshipOptions",4,"ngIf"],[3,"reoRel","submissionItem","listId","metadataFields","submissionId","relationshipOptions","remove"],[3,"ngClass","reoRel","submissionItem","listId","metadataFields","submissionId","relationshipOptions"]],template:function(e,t){1&e&&(i["\u0275\u0275projectionDef"](),i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275text"](1,"\n  "),i["\u0275\u0275template"](2,se,3,11,"label",1),i["\u0275\u0275text"](3,"\n  "),i["\u0275\u0275template"](4,ae,1,0,"ng-container",2),i["\u0275\u0275text"](5,"\n  "),i["\u0275\u0275text"](6,"\n  "),i["\u0275\u0275elementStart"](7,"div",3),i["\u0275\u0275text"](8,"\n    "),i["\u0275\u0275elementStart"](9,"div",3),i["\u0275\u0275text"](10,"\n      "),i["\u0275\u0275elementStart"](11,"div"),i["\u0275\u0275text"](12,"\n        "),i["\u0275\u0275elementContainer"](13,null,4),i["\u0275\u0275text"](15,"\n      "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](16,"\n\n      "),i["\u0275\u0275template"](17,le,2,4,"small",5),i["\u0275\u0275text"](18,"\n      "),i["\u0275\u0275text"](19,"\n      "),i["\u0275\u0275template"](20,ce,1,0,"div",6),i["\u0275\u0275text"](21,"\n\n      "),i["\u0275\u0275template"](22,pe,4,6,"div",7),i["\u0275\u0275text"](23,"\n\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](24,"\n    "),i["\u0275\u0275template"](25,he,8,5,"div",8),i["\u0275\u0275text"](26,"\n    "),i["\u0275\u0275template"](27,fe,7,3,"div",9),i["\u0275\u0275text"](28,"\n  "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](29,"\n  "),i["\u0275\u0275template"](30,ge,1,0,"ng-container",2),i["\u0275\u0275text"](31,"\n  "),i["\u0275\u0275template"](32,Ce,10,3,"ng-container",10),i["\u0275\u0275text"](33,"\n  "),i["\u0275\u0275projection"](34),i["\u0275\u0275text"](35,"\n"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](36,"\n")),2&e&&(i["\u0275\u0275classProp"]("form-group","GROUP"!==t.model.type&&t.asBootstrapFormGroup||t.getClass("element","container").includes("form-group")),i["\u0275\u0275property"]("formGroup",t.group)("ngClass",i["\u0275\u0275pureFunction2"](17,re,t.getClass("element","container"),t.getClass("grid","container"))),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!t.isCheckbox&&t.hasLabel),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngTemplateOutlet",null==t.startTemplate?null:t.startTemplate.templateRef)("ngTemplateOutletContext",t.model),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngClass",i["\u0275\u0275pureFunction2"](20,Ie,t.model.hasLanguages||t.isRelationship,(null==t.value?null:t.value.isVirtual)&&(t.model.hasSelectableMetadata||(null==t.context?null:t.context.index)>0))),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngClass",t.getClass("grid","control")),i["\u0275\u0275advance"](8),i["\u0275\u0275property"]("ngIf",t.hasHint&&(!t.model.repeatable&&(!1===t.isRelationship||null===(null==t.value?null:t.value.value))||!0===t.model.repeatable&&(null==t.context?null:t.context.index)===(null==t.context||null==t.context.context||null==t.context.context.groups?null:t.context.context.groups.length)-1)&&(!t.showErrorMessages||0===t.errorMessages.length)),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",null!==(null==t.context?null:t.context.index)&&(!t.showErrorMessages||0===t.errorMessages.length)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",t.showErrorMessages),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",t.model.languageCodes&&t.model.languageCodes.length>0),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",t.isRelationship),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngTemplateOutlet",null==t.endTemplate?null:t.endTemplate.templateRef)("ngTemplateOutletContext",t.model),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",null==t.value?null:t.value.isVirtual))},directives:[te.NgControlStatusGroup,te.FormGroupDirective,ne.m,ne.p,ne.t,ne.o,te.SelectControlValueAccessor,te.RequiredValidator,te.NgControlStatus,te.NgModel,te.NgSelectOption,te["\u0275angular_packages_forms_forms_z"],J.O,s.a,ie.a],pipes:[H.d,ne.b],styles:["[_nghost-%COMP%]     .ds-form-input-addon{border-top-right-radius:0!important;border-bottom-right-radius:0!important;border-right:0!important}[_nghost-%COMP%]     .ds-form-input-btn{border:var(--bs-input-btn-border-width) solid var(--bs-input-border-color);border-top-left-radius:0;border-bottom-left-radius:0;border-left:0}[_nghost-%COMP%]     .ds-form-input-btn:focus, [_nghost-%COMP%]     button.ds-form-add-more:focus{-webkit-box-shadow:none!important;box-shadow:none!important}[_nghost-%COMP%]     button.ds-form-add-more:focus{outline:none}[_nghost-%COMP%]     .ds-form-input-value{border-top-left-radius:0!important;border-bottom-left-radius:0!important}[_nghost-%COMP%]     .fa-spin{pointer-events:none}[_nghost-%COMP%]     .left-addon .far, [_nghost-%COMP%]     .left-addon .fas, [_nghost-%COMP%]     .left-addon i{left:0}[_nghost-%COMP%]     .right-addon .far, [_nghost-%COMP%]     .right-addon .fas, [_nghost-%COMP%]     .right-addon i{right:0}[_nghost-%COMP%]     .left-addon input{padding-left:calc(var(--bs-spacer) * 2.25)}[_nghost-%COMP%]     .right-addon input{padding-right:calc(var(--bs-spacer) * 2.25)}[_nghost-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}[_nghost-%COMP%]     .custom-select{-webkit-appearance:none;-moz-appearance:none;appearance:none}"]}),e})()},Ssu8:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var i=n("fXoL"),o=n("e+Av"),r=n("lJxs"),s=n("LRne"),a=n("J3qs"),l=n("x+ZM"),c=n("rbjh"),d=n("oBfO"),p=n("PdzJ");let u=(()=>{class e extends o.z{constructor(e,t,n){super(t,n),this.vocabularyService=e,this.layoutService=t,this.validationService=n,this.blur=new i.EventEmitter,this.change=new i.EventEmitter,this.focus=new i.EventEmitter}getInitValueFromModel(){let e;if(Object(a.e)(this.model.value)&&this.model.value instanceof l.a){let t;t=this.model.value.hasAuthority()?this.vocabularyService.getVocabularyEntryByID(this.model.value.authority,this.model.vocabularyOptions):this.vocabularyService.getVocabularyEntryByValue(this.model.value.value,this.model.vocabularyOptions),e=t.pipe(Object(r.a)(e=>Object(a.e)(e)?new l.a(e.value,null,e.authority,e.display,this.model.value.place,null,e.otherInformation||null):this.model.value))}else e=Object(a.e)(this.model.value)&&this.model.value instanceof c.a?Object(s.a)(new l.a(this.model.value.value,null,this.model.value.authority,this.model.value.display,0,null,this.model.value.otherInformation||null)):Object(s.a)(new l.a(this.model.value));return e}onBlur(e){this.blur.emit(e)}onFocus(e){this.focus.emit(e)}dispatchUpdate(e){this.model.value=e,this.change.emit(e)}updatePageInfo(e,t,n,i){this.pageInfo=Object.assign(new d.a,{elementsPerPage:e,currentPage:t,totalElements:n,totalPages:i})}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](p.a),i["\u0275\u0275directiveInject"](o.E),i["\u0275\u0275directiveInject"](o.H))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-dynamic-vocabulary"]],inputs:{group:"group",model:"model"},outputs:{blur:"blur",change:"change",focus:"focus"},features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:0,vars:0,template:function(e,t){},encapsulation:2}),e})()},Ui2r:function(e,t,n){"use strict";n.d(t,"a",(function(){return D}));var i=n("fXoL"),o=n("dtp9"),r=n("joI/"),s=n("7DXY"),a=n("J3qs"),l=n("IzEk"),c=n("lJxs"),d=n("vkgz"),p=n("eIep"),u=n("7o/Q");class m{constructor(e){this.value=e}call(e,t){return t.subscribe(new h(e,this.value))}}class h extends u.a{constructor(e,t){super(e),this.value=t}_next(e){this.destination.next(this.value)}}var f=n("1QIV"),g=n("84tU"),b=n("7RJT"),v=n("gWc+"),x=n("EGek"),y=n("OAtg"),C=n("kN8A"),I=n("MFUF"),O=n("ofXK"),E=n("9H8w"),S=n("1kSV"),w=n("O/5o"),j=n("sYmb");function k(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"input",14),i["\u0275\u0275listener"]("change",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](3).selectAll()})),i["\u0275\u0275elementEnd"]()}2&e&&i["\u0275\u0275property"]("indeterminate",!1)}function M(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"input",14),i["\u0275\u0275listener"]("change",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](3).deselectAll()})),i["\u0275\u0275elementEnd"]()}2&e&&i["\u0275\u0275property"]("indeterminate",!0)}function V(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"input",15),i["\u0275\u0275listener"]("change",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](3).deselectAll()})),i["\u0275\u0275elementEnd"]()}2&e&&i["\u0275\u0275property"]("checked",!0)}function P(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"button",16),i["\u0275\u0275text"](1,"\n                            "),i["\u0275\u0275element"](2,"span",17),i["\u0275\u0275text"](3,"\n          "),i["\u0275\u0275elementStart"](4,"span",12),i["\u0275\u0275text"](5),i["\u0275\u0275pipe"](6,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](7,"\n        "),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](5),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](6,1,"submission.sections.describe.relationship-lookup.search-tab.loading")))}function F(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",18),i["\u0275\u0275text"](1,"\n          "),i["\u0275\u0275elementStart"](2,"button",19),i["\u0275\u0275listener"]("click",(function(){i["\u0275\u0275restoreView"](e);const n=t.ngVar;return i["\u0275\u0275nextContext"](3).selectPage(null==n?null:n.page)})),i["\u0275\u0275text"](3),i["\u0275\u0275pipe"](4,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](5,"\n          "),i["\u0275\u0275elementStart"](6,"button",19),i["\u0275\u0275listener"]("click",(function(){i["\u0275\u0275restoreView"](e);const n=t.ngVar;return i["\u0275\u0275nextContext"](3).deselectPage(null==n?null:n.page)})),i["\u0275\u0275text"](7),i["\u0275\u0275pipe"](8,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](9,"\n          "),i["\u0275\u0275elementStart"](10,"button",19),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](3).selectAll()})),i["\u0275\u0275text"](11),i["\u0275\u0275pipe"](12,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](13,"\n          "),i["\u0275\u0275elementStart"](14,"button",19),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](3).deselectAll()})),i["\u0275\u0275text"](15),i["\u0275\u0275pipe"](16,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](17,"\n        "),i["\u0275\u0275elementEnd"]()}2&e&&(i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](4,4,"submission.sections.describe.relationship-lookup.search-tab.select-page")),i["\u0275\u0275advance"](4),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](8,6,"submission.sections.describe.relationship-lookup.search-tab.deselect-page")),i["\u0275\u0275advance"](4),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](12,8,"submission.sections.describe.relationship-lookup.search-tab.select-all")),i["\u0275\u0275advance"](4),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](16,10,"submission.sections.describe.relationship-lookup.search-tab.deselect-all")))}function _(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",3),i["\u0275\u0275text"](1,"\n    "),i["\u0275\u0275elementStart"](2,"div",4),i["\u0275\u0275text"](3,"\n      "),i["\u0275\u0275elementStart"](4,"div",5),i["\u0275\u0275text"](5,"\n        "),i["\u0275\u0275elementStart"](6,"div",6),i["\u0275\u0275text"](7,"\n          "),i["\u0275\u0275text"](8,"\n\n          "),i["\u0275\u0275template"](9,k,1,1,"input",7),i["\u0275\u0275pipe"](10,"async"),i["\u0275\u0275text"](11,"\n          "),i["\u0275\u0275template"](12,M,1,1,"input",7),i["\u0275\u0275pipe"](13,"async"),i["\u0275\u0275text"](14,"\n          "),i["\u0275\u0275template"](15,V,1,1,"input",8),i["\u0275\u0275text"](16,"\n        "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](17,"\n      "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](18,"\n      "),i["\u0275\u0275elementStart"](19,"div",9),i["\u0275\u0275text"](20,"\n        "),i["\u0275\u0275template"](21,P,8,3,"button",10),i["\u0275\u0275text"](22,"\n        "),i["\u0275\u0275elementStart"](23,"button",11),i["\u0275\u0275text"](24,"\n          "),i["\u0275\u0275elementStart"](25,"span",12),i["\u0275\u0275text"](26),i["\u0275\u0275pipe"](27,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](28,"\n        "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](29,"\n        "),i["\u0275\u0275template"](30,F,18,12,"div",13),i["\u0275\u0275pipe"](31,"async"),i["\u0275\u0275text"](32,"\n      "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](33,"\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](34,"\n  "),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](9),i["\u0275\u0275property"]("ngIf",!e.allSelected&&!i["\u0275\u0275pipeBind1"](10,7,e.someSelected$)),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",!e.allSelected&&i["\u0275\u0275pipeBind1"](13,9,e.someSelected$)),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",e.allSelected),i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("ngIf",e.selectAllLoading),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("hidden",e.selectAllLoading),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](27,11,"submission.sections.describe.relationship-lookup.toggle-dropdown")),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("ngVar",i["\u0275\u0275pipeBind1"](31,13,e.resultsRD$))}}const L=function(e,t){return{repeatable:e,listId:t}};function B(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"ds-search",1),i["\u0275\u0275listener"]("resultFound",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().onResultFound(t)}))("deselectObject",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().deselectObject.emit(t)}))("selectObject",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().selectObject.emit(t)})),i["\u0275\u0275text"](1,"\n  "),i["\u0275\u0275template"](2,_,35,15,"div",2),i["\u0275\u0275text"](3,"\n\n"),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("configuration",e.relationship.searchConfiguration)("context",e.context)("fixedFilterQuery",e.relationship.filter)("inPlaceSearch",!0)("linkType",e.linkTypes.ExternalLink)("searchFormPlaceholder","submission.sections.describe.relationship-lookup.search-tab.search-form.placeholder")("selectable",!0)("selectionConfig",i["\u0275\u0275pureFunction2"](10,L,e.repeatable,e.listId))("showViewModes",!1),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",e.repeatable)}}let D=(()=>{class e{constructor(e,t,n,o,r,s){this.searchService=e,this.selectableListService=t,this.searchConfigService=n,this.lookupRelationService=o,this.relationshipService=r,this.paginationService=s,this.deselectObject=new i.EventEmitter,this.selectObject=new i.EventEmitter,this.resultsRD$=new b.BehaviorSubject(null),this.initialPagination={page:1,pageSize:5},this.linkTypes=g.a,this.resultFound=new i.EventEmitter}ngOnInit(){this.resetRoute()}resetRoute(){this.paginationService.updateRoute(this.searchConfigService.paginationID,this.initialPagination)}selectPage(e){this.selection$.pipe(Object(l.a)(1)).subscribe(t=>{const n=e.filter(e=>t.findIndex(t=>t.equals(e))<0);this.selectObject.emit(...n)}),this.selectableListService.select(this.listId,e)}deselectPage(e){this.allSelected=!1,this.selection$.pipe(Object(l.a)(1)).subscribe(t=>{const n=e.filter(e=>t.findIndex(t=>t.equals(e))>=0);this.deselectObject.emit(...n)}),this.selectableListService.deselect(this.listId,e)}selectAll(){this.allSelected=!0,this.selectAllLoading=!0;const e=Object.assign(new s.a,{currentPage:1,pageSize:9999}),t=Object.assign(this.lookupRelationService.searchConfig,{pagination:e});this.searchService.search(t).pipe(Object(f.i)(),Object(c.a)(e=>e.payload.page),Object(d.a)(()=>this.selectAllLoading=!1),Object(p.a)(e=>{return this.selection$.pipe(Object(l.a)(1),Object(d.a)(t=>{const n=e.filter(e=>t.findIndex(t=>t.equals(e))<0);this.selectObject.emit(...n)}),(t=e,e=>e.lift(new m(t))));var t})).subscribe(e=>{this.selectableListService.select(this.listId,e)})}setSelectedIds(e,t){let n=this.relationshipType.rightwardType;this.isLeft&&(n=this.relationshipType.leftwardType),this.relationshipService.searchByItemsAndType(this.relationshipType.id,this.item.uuid,n,e).pipe(Object(f.i)(),Object(f.o)()).subscribe(e=>{let n=e.page.map(e=>{let n=[];return n=this.isLeft?e._links.rightItem.href.split("/"):e._links.leftItem.href.split("/"),this.getRelatedItem(n[n.length-1],t)});n=n.filter(e=>!this.getIfInRemove(e.indexableObject.uuid)),n.length>0&&this.selectableListService.select(this.listId,n)})}deselectAll(){this.allSelected=!1,this.selection$.pipe(Object(l.a)(1)).subscribe(e=>this.deselectObject.emit(...e)),this.selectableListService.deselectAll(this.listId)}getRelatedItem(e,t){return t.find(t=>t.indexableObject.uuid===e)}getIfInRemove(e){return!!this.toRemove.find(t=>t.indexableObject.uuid===e)}ngOnDestroy(){Object(a.b)(this.subscription)&&this.subscription.unsubscribe()}onResultFound(e){if(this.resultsRD$.next(e),this.resultFound.emit(e),this.isEditRelationship){const t=e.page.map(e=>e.indexableObject.uuid);this.setSelectedIds(t,e.page)}}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](v.a),i["\u0275\u0275directiveInject"](x.a),i["\u0275\u0275directiveInject"](r.a),i["\u0275\u0275directiveInject"](y.a),i["\u0275\u0275directiveInject"](C.a),i["\u0275\u0275directiveInject"](I.a))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-dynamic-lookup-relation-search-tab"]],inputs:{relationship:"relationship",listId:"listId",query:"query",repeatable:"repeatable",selection$:"selection$",context:"context",relationshipType:"relationshipType",item:"item",isLeft:"isLeft",toRemove:"toRemove",isEditRelationship:"isEditRelationship"},outputs:{deselectObject:"deselectObject",selectObject:"selectObject",resultFound:"resultFound"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:o.SEARCH_CONFIG_SERVICE,useClass:r.a}])],decls:2,vars:1,consts:[[3,"configuration","context","fixedFilterQuery","inPlaceSearch","linkType","searchFormPlaceholder","selectable","selectionConfig","showViewModes","resultFound","deselectObject","selectObject",4,"ngIf"],[3,"configuration","context","fixedFilterQuery","inPlaceSearch","linkType","searchFormPlaceholder","selectable","selectionConfig","showViewModes","resultFound","deselectObject","selectObject"],["additionalSearchOptions","","class","position-absolute",4,"ngIf"],["additionalSearchOptions","",1,"position-absolute"],[1,"input-group","mb-3"],[1,"input-group-prepend"],[1,"input-group-text"],["type","checkbox",3,"indeterminate","change",4,"ngIf"],["type","checkbox",3,"checked","change",4,"ngIf"],["ngbDropdown","",1,"input-group-append"],["type","button","class","btn btn-outline-secondary rounded-right",4,"ngIf"],["id","resultdropdown","type","button","ngbDropdownToggle","","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"btn","btn-outline-secondary","dropdown-toggle-split",3,"hidden"],[1,"sr-only"],["ngbDropdownMenu","","aria-labelledby","resultdropdown",4,"ngVar"],["type","checkbox",3,"indeterminate","change"],["type","checkbox",3,"checked","change"],["type","button",1,"btn","btn-outline-secondary","rounded-right"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],["ngbDropdownMenu","","aria-labelledby","resultdropdown"],[1,"dropdown-item",3,"click"]],template:function(e,t){1&e&&(i["\u0275\u0275template"](0,B,4,13,"ds-search",0),i["\u0275\u0275text"](1,"\n")),2&e&&i["\u0275\u0275property"]("ngIf",t.relationship.searchConfiguration&&t.context)},directives:[O.p,E.a,S.j,S.o,w.a,S.m],pipes:[O.b,j.d],styles:[".position-absolute[_ngcontent-%COMP%]{right:var(--bs-spacer)}"]}),e})()},ZO65:function(e,t,n){"use strict";n.d(t,"a",(function(){return x}));var i=n("fXoL"),o=n("e+Av"),r=n("LvDl"),s=n("J3qs"),a=n("1QIV"),l=n("oBfO"),c=n("PdzJ"),d=n("Q5/L"),p=n("3Pt+"),u=n("ofXK");function m(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",7),i["\u0275\u0275text"](1,"\n\n          "),i["\u0275\u0275elementStart"](2,"input",8),i["\u0275\u0275listener"]("blur",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](3).onBlur(t)}))("change",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](3).onChange(t)}))("focus",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](3).onFocus(t)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](3,"\n        "),i["\u0275\u0275elementStart"](4,"label",9),i["\u0275\u0275text"](5,"\n          "),i["\u0275\u0275element"](6,"span",10),i["\u0275\u0275text"](7,"\n        "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](8,"\n      "),i["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=i["\u0275\u0275nextContext"](3);i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("checked",e.value)("id",e.id)("formControlName",e.id)("name",n.model.name)("required",n.model.required)("value",e.value),i["\u0275\u0275attribute"]("aria-labelledby","label_"+n.model.id)("tabindex",e.index),i["\u0275\u0275advance"](2),i["\u0275\u0275classProp"]("disabled",n.model.disabled),i["\u0275\u0275property"]("ngClass",null==n.model.layout.element?null:n.model.layout.element.control)("for",e.id),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngClass",null==n.model.layout.element?null:n.model.layout.element.label)("innerHTML",e.label,i["\u0275\u0275sanitizeHtml"])}}function h(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",5),i["\u0275\u0275text"](1,"\n\n      "),i["\u0275\u0275template"](2,m,9,14,"div",6),i["\u0275\u0275text"](3,"\n      "),i["\u0275\u0275element"](4,"br"),i["\u0275\u0275text"](5,"\n    "),i["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",e)}}function f(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",3),i["\u0275\u0275text"](1,"\n\n    "),i["\u0275\u0275template"](2,h,6,1,"div",4),i["\u0275\u0275text"](3,"\n\n  "),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("id",e.id)("formGroupName",e.model.id)("ngClass",null==e.model.layout.element?null:e.model.layout.element.control),i["\u0275\u0275attribute"]("tabindex",e.model.tabIndex),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",e.items)}}function g(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",13),i["\u0275\u0275text"](1,"\n        "),i["\u0275\u0275elementStart"](2,"label",14),i["\u0275\u0275text"](3,"\n          "),i["\u0275\u0275elementStart"](4,"input",15),i["\u0275\u0275listener"]("blur",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](3).onBlur(t)}))("focus",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](3).onFocus(t)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](5,"\n          "),i["\u0275\u0275element"](6,"span",10),i["\u0275\u0275text"](7,"\n        "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](8,"\n      "),i["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=i["\u0275\u0275nextContext"](3);i["\u0275\u0275advance"](2),i["\u0275\u0275classProp"]("disabled",n.model.disabled),i["\u0275\u0275property"]("ngClass",null==n.model.layout.element?null:n.model.layout.element.control),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("checked",e.value)("id",e.id)("name",n.model.id)("required",n.model.required)("value",e.index),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngClass",null==n.model.layout.element?null:n.model.layout.element.label)("innerHTML",e.label,i["\u0275\u0275sanitizeHtml"])}}function b(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",5),i["\u0275\u0275text"](1,"\n\n      "),i["\u0275\u0275template"](2,g,9,10,"div",12),i["\u0275\u0275text"](3,"\n      "),i["\u0275\u0275element"](4,"br"),i["\u0275\u0275text"](5,"\n    "),i["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",e)}}function v(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",11),i["\u0275\u0275listener"]("change",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().onChange(t)})),i["\u0275\u0275text"](1,"\n\n    "),i["\u0275\u0275template"](2,b,6,1,"div",4),i["\u0275\u0275text"](3,"\n\n  "),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("id",e.id)("ngClass",null==e.model.layout.element?null:e.model.layout.element.control),i["\u0275\u0275attribute"]("tabindex",e.model.tabIndex),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",e.items)}}let x=(()=>{class e extends o.z{constructor(e,t,n,o,r){super(o,r),this.vocabularyService=e,this.cdr=t,this.formBuilderService=n,this.layoutService=o,this.validationService=r,this.blur=new i.EventEmitter,this.change=new i.EventEmitter,this.focus=new i.EventEmitter,this.items=[]}ngOnInit(){this.model.vocabularyOptions&&Object(s.b)(this.model.vocabularyOptions.name)&&this.setOptionsFromVocabulary()}onBlur(e){this.blur.emit(e)}onFocus(e){this.focus.emit(e)}onChange(e){const t=e.target;if(this.model.repeatable){const e=this.optionsList[t.tabIndex];if(t.checked)this.model.valueUpdates.next(e);else{const t=[];this.model.value.filter(t=>t.value!==e.value).forEach(e=>t.push(e)),this.model.valueUpdates.next(t)}}else this.model.value=this.optionsList[t.value];this.change.emit(e)}setOptionsFromVocabulary(){if(this.model.vocabularyOptions.name&&this.model.vocabularyOptions.name.length>0){const e=this.group.controls[this.model.id],t=new l.a({elementsPerPage:9999,currentPage:1});this.vocabularyService.getVocabularyEntries(this.model.vocabularyOptions,t).pipe(Object(a.j)()).subscribe(t=>{let n=0,i=0,a=[];this.optionsList=t.page,t.page.forEach((t,l)=>{const c=t.authority||t.value,d=Object(s.e)(Object(r.findKey)(this.model.value,e=>e.value===t.value)),p={id:c,label:t.display,value:d,index:l};this.model.repeatable?this.formBuilderService.addFormGroupControl(e,this.model,new o.r(p)):this.model.options.push({label:p.label,value:t}),a.push(p),i++,this.items[n]=a,i===this.model.groupLength&&(n++,i=0,a=[])}),this.cdr.markForCheck()})}}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](c.a),i["\u0275\u0275directiveInject"](i.ChangeDetectorRef),i["\u0275\u0275directiveInject"](d.a),i["\u0275\u0275directiveInject"](o.E),i["\u0275\u0275directiveInject"](o.H))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-dynamic-list"]],inputs:{group:"group",model:"model"},outputs:{blur:"blur",change:"change",focus:"focus"},features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:7,vars:3,consts:[[3,"formGroup"],["class","form-row",3,"id","formGroupName","ngClass",4,"ngIf"],["class","form-row","ngbRadioGroup","",3,"id","ngClass","change",4,"ngIf"],[1,"form-row",3,"id","formGroupName","ngClass"],["class","col-sm ml-3",4,"ngFor","ngForOf"],[1,"col-sm","ml-3"],["class","custom-control custom-checkbox",4,"ngFor","ngForOf"],[1,"custom-control","custom-checkbox"],["type","checkbox",1,"custom-control-input",3,"checked","id","formControlName","name","required","value","blur","change","focus"],[1,"custom-control-label",3,"ngClass","for"],[3,"ngClass","innerHTML"],["ngbRadioGroup","",1,"form-row",3,"id","ngClass","change"],["class","custom-control custom-radio",4,"ngFor","ngForOf"],[1,"custom-control","custom-radio"],[1,"custom-control-label",3,"ngClass"],["type","radio",1,"custom-control-input",3,"checked","id","name","required","value","blur","focus"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275text"](1,"\n  "),i["\u0275\u0275template"](2,f,4,5,"div",1),i["\u0275\u0275text"](3,"\n\n  "),i["\u0275\u0275template"](4,v,4,4,"div",2),i["\u0275\u0275text"](5,"\n"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](6,"\n")),2&e&&(i["\u0275\u0275property"]("formGroup",t.group),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",t.model.repeatable),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!t.model.repeatable))},directives:[p.NgControlStatusGroup,p.FormGroupDirective,u.p,p.FormGroupName,u.m,u.o,p.CheckboxControlValueAccessor,p.CheckboxRequiredValidator,p.NgControlStatus,p.FormControlName],styles:[""]}),e})()},ZTun:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var i=n("fXoL"),o=n("e+Av"),r=n("J3qs");function s(e,t){1&e&&i["\u0275\u0275elementContainer"](0)}const a=function(e){return[e]},l=function(e,t){return[e,t]};function c(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"ds-dynamic-form-control-container",9),i["\u0275\u0275listener"]("dfBlur",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](2).onBlur(t)}))("dfChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](2).onChange(t)}))("dfFocus",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](2).onFocus(t)}))("ngbEvent",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](2).onCustomEvent(t,null,!0)})),i["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=i["\u0275\u0275nextContext"](),o=n.$implicit,r=n.index,s=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("bindId",!1)("formGroup",s.group)("context",o)("group",s.control.get(i["\u0275\u0275pureFunction1"](9,a,r)))("hidden",e.hidden)("layout",s.formLayout)("model",e)("templates",s.templates)("ngClass",i["\u0275\u0275pureFunction2"](11,l,s.getClass("element","host",e),s.getClass("grid","host",e)))}}function d(e,t){1&e&&i["\u0275\u0275elementContainer"](0)}function p(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",4),i["\u0275\u0275text"](1,"\n          "),i["\u0275\u0275text"](2,"\n          "),i["\u0275\u0275elementStart"](3,"div",5),i["\u0275\u0275text"](4,"\n            "),i["\u0275\u0275element"](5,"i",6),i["\u0275\u0275text"](6,"\n          "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](7,"\n          "),i["\u0275\u0275template"](8,s,1,0,"ng-container",7),i["\u0275\u0275text"](9,"\n          "),i["\u0275\u0275template"](10,c,1,14,"ds-dynamic-form-control-container",8),i["\u0275\u0275text"](11,"\n\n          "),i["\u0275\u0275template"](12,d,1,0,"ng-container",7),i["\u0275\u0275text"](13,"\n        "),i["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=t.index,o=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("formGroupName",n)("ngClass",i["\u0275\u0275pureFunction2"](13,l,o.getClass("element","group"),o.getClass("grid","group")))("cdkDragDisabled",o.dragDisabled)("cdkDragPreviewClass","ds-submission-reorder-dragging"),i["\u0275\u0275advance"](3),i["\u0275\u0275classProp"]("drag-disable",o.dragDisabled),i["\u0275\u0275advance"](2),i["\u0275\u0275classProp"]("drag-disable",o.dragDisabled),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngTemplateOutlet",null==o.startTemplate?null:o.startTemplate.templateRef)("ngTemplateOutletContext",e),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",e.group),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngTemplateOutlet",null==o.endTemplate?null:o.endTemplate.templateRef)("ngTemplateOutletContext",e)}}let u=(()=>{class e extends o.u{constructor(e,t){super(e,t),this.layoutService=e,this.validationService=t,this.blur=new i.EventEmitter,this.change=new i.EventEmitter,this.focus=new i.EventEmitter,this.customEvent=new i.EventEmitter}moveSelection(e){if(e.previousIndex===e.currentIndex)return;this.model.moveGroup(e.previousIndex,e.currentIndex-e.previousIndex);const t=e.previousIndex,n=e.currentIndex;Object(r.b)(this.model.groups[n])&&Object(r.b)(this.control.controls[n])&&this.onCustomEvent({previousIndex:t,index:n,arrayModel:this.model,model:this.model.groups[n].group[0],control:this.control.controls[n]},"move")}update(e,t){const n=Object.assign({},e,{context:{index:t-1}});this.onChange(n)}get dragDisabled(){return 1===this.model.groups.length||!this.model.isDraggable}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](o.E),i["\u0275\u0275directiveInject"](o.H))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-dynamic-form-array"]],inputs:{formLayout:"formLayout",group:"group",layout:"layout",model:"model",templates:"templates"},outputs:{blur:"dfBlur",change:"dfChange",focus:"dfFocus",customEvent:"ngbEvent"},features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:13,vars:5,consts:[[3,"formGroup"],[3,"id","formArrayName","ngClass"],["cdkDropList","","cdkDropListLockAxis","y",3,"cdkDropListDropped"],["role","group","cdkDrag","","cdkDragHandle","",3,"formGroupName","ngClass","cdkDragDisabled","cdkDragPreviewClass",4,"ngFor","ngForOf"],["role","group","cdkDrag","","cdkDragHandle","",3,"formGroupName","ngClass","cdkDragDisabled","cdkDragPreviewClass"],["tabindex","0",1,"drag-handle"],[1,"drag-icon","fas","fa-grip-vertical","fa-fw"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"bindId","formGroup","context","group","hidden","layout","model","templates","ngClass","dfBlur","dfChange","dfFocus","ngbEvent",4,"ngFor","ngForOf"],[3,"bindId","formGroup","context","group","hidden","layout","model","templates","ngClass","dfBlur","dfChange","dfFocus","ngbEvent"]],template:function(e,t){1&e&&(i["\u0275\u0275elementContainerStart"](0,0),i["\u0275\u0275text"](1,"\n    "),i["\u0275\u0275elementStart"](2,"div",1),i["\u0275\u0275text"](3,"\n\n      "),i["\u0275\u0275text"](4,"\n      "),i["\u0275\u0275elementStart"](5,"div",2),i["\u0275\u0275listener"]("cdkDropListDropped",(function(e){return t.moveSelection(e)})),i["\u0275\u0275text"](6,"\n        "),i["\u0275\u0275text"](7,"\n        "),i["\u0275\u0275template"](8,p,14,16,"div",3),i["\u0275\u0275text"](9,"\n      "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](10,"\n\n\n\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](11,"\n\n"),i["\u0275\u0275elementContainerEnd"](),i["\u0275\u0275text"](12,"\n")),2&e&&(i["\u0275\u0275property"]("formGroup",t.group),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("id",t.id)("formArrayName",t.model.id)("ngClass",t.getClass("element","control")),i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("ngForOf",t.model.groups))},styles:["[_nghost-%COMP%]{display:block}.drag-disable[_ngcontent-%COMP%]{visibility:hidden!important}.drag-disable[_ngcontent-%COMP%]:focus, .drag-disable[_ngcontent-%COMP%]:hover{cursor:default}.drag-disable[_ngcontent-%COMP%]:focus   .drag-icon[_ngcontent-%COMP%], .drag-disable[_ngcontent-%COMP%]:hover   .drag-icon[_ngcontent-%COMP%]{visibility:hidden!important}.cdk-drag[_ngcontent-%COMP%]{margin-left:calc(-2.3 * var(--bs-spacer));margin-right:calc(-.5 * var(--bs-spacer));padding-right:calc(.5 * var(--bs-spacer))}.cdk-drag[_ngcontent-%COMP%]   .drag-icon[_ngcontent-%COMP%]{visibility:hidden;width:calc(2 * var(--bs-spacer));color:var(--bs-gray-600);margin:var(--bs-btn-padding-y) 0;line-height:var(--bs-btn-line-height);text-indent:calc(.5 * var(--bs-spacer))}.cdk-drag[_ngcontent-%COMP%]:focus, .cdk-drag[_ngcontent-%COMP%]:hover{cursor:-webkit-grab;cursor:grab}.cdk-drag[_ngcontent-%COMP%]:focus   .drag-icon[_ngcontent-%COMP%], .cdk-drag[_ngcontent-%COMP%]:hover   .drag-icon[_ngcontent-%COMP%]{visibility:visible}.drag-handle[_ngcontent-%COMP%]:hover{cursor:move}.drag-handle[_ngcontent-%COMP%]:focus   .drag-icon[_ngcontent-%COMP%]{visibility:visible}.cdk-drop-list-dragging[_ngcontent-%COMP%]   .drag-handle[_ngcontent-%COMP%]{cursor:-webkit-grabbing;cursor:grabbing}.cdk-drop-list-dragging[_ngcontent-%COMP%]   .drag-handle[_ngcontent-%COMP%]   .drag-icon[_ngcontent-%COMP%]{visibility:hidden}.cdk-drag-preview[_ngcontent-%COMP%]{margin:0;padding:0}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}"]}),e})()},bPV6:function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var i=n("fXoL"),o=n("LRne"),r=n("JIr8"),s=n("/uUt"),a=n("vkgz"),l=n("lJxs"),c=n("oBfO"),d=n("J3qs"),p=n("1QIV"),u=n("f+Ev"),m=n("Ssu8"),h=n("PdzJ"),f=n("e+Av"),g=n("1kSV"),b=n("dlKe"),v=n("ofXK"),x=n("sYmb");function y(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"button",10),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](2,1,"form.no-results")))}function C(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",11),i["\u0275\u0275listener"]("click",(function(){i["\u0275\u0275restoreView"](e);const n=t.$implicit,o=i["\u0275\u0275nextContext"](),r=i["\u0275\u0275reference"](1);return o.onSelect(n),r.close()}))("mousedown",(function(){i["\u0275\u0275restoreView"](e);const n=t.$implicit,o=i["\u0275\u0275nextContext"](),r=i["\u0275\u0275reference"](1);return o.onSelect(n),r.close()})),i["\u0275\u0275pipe"](1,"async"),i["\u0275\u0275text"](2),i["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=i["\u0275\u0275nextContext"]();i["\u0275\u0275propertyInterpolate"]("title",e.display),i["\u0275\u0275attribute"]("id",e.display==i["\u0275\u0275pipeBind1"](1,3,n.currentValue)?"combobox_"+n.id+"_selected":null),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"]("\n        ",n.inputFormatter(e),"\n      ")}}function I(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",12),i["\u0275\u0275elementStart"](1,"p"),i["\u0275\u0275text"](2),i["\u0275\u0275pipe"](3,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](3,1,"form.loading")))}let O=(()=>{class e extends m.a{constructor(e,t,n,o){super(e,n,o),this.vocabularyService=e,this.cdr=t,this.layoutService=n,this.validationService=o,this.bindId=!0,this.blur=new i.EventEmitter,this.change=new i.EventEmitter,this.focus=new i.EventEmitter,this.loading=!1,this.inputFormatter=e=>e.display||e.value}ngOnInit(){this.updatePageInfo(this.model.maxOptions,1),this.vocabularyService.getVocabularyEntries(this.model.vocabularyOptions,this.pageInfo).pipe(Object(p.j)(),Object(r.a)(()=>Object(o.a)(Object(u.b)(new c.a,[])))).subscribe(e=>{this.optionsList=e.page,this.model.value&&this.setCurrentValue(this.model.value,!0),this.updatePageInfo(e.pageInfo.elementsPerPage,e.pageInfo.currentPage,e.pageInfo.totalElements,e.pageInfo.totalPages),this.cdr.detectChanges()}),this.group.get(this.model.id).valueChanges.pipe(Object(s.a)()).subscribe(e=>{this.setCurrentValue(e)})}openDropdown(e){this.model.readOnly||(this.group.markAsUntouched(),e.open())}onScroll(){!this.loading&&this.pageInfo.currentPage<=this.pageInfo.totalPages&&(this.loading=!0,this.updatePageInfo(this.pageInfo.elementsPerPage,this.pageInfo.currentPage+1,this.pageInfo.totalElements,this.pageInfo.totalPages),this.vocabularyService.getVocabularyEntries(this.model.vocabularyOptions,this.pageInfo).pipe(Object(p.j)(),Object(r.a)(()=>Object(o.a)(Object(u.b)(new c.a,[]))),Object(a.a)(()=>this.loading=!1)).subscribe(e=>{this.optionsList=this.optionsList.concat(e.page),this.updatePageInfo(e.pageInfo.elementsPerPage,e.pageInfo.currentPage,e.pageInfo.totalElements,e.pageInfo.totalPages),this.cdr.detectChanges()}))}onSelect(e){this.group.markAsDirty(),this.dispatchUpdate(e),this.setCurrentValue(e)}setCurrentValue(e,t=!1){let n;n=t?this.getInitValueFromModel().pipe(Object(l.a)(e=>e.display)):Object(d.d)(e)?Object(o.a)(""):"string"==typeof e?Object(o.a)(e):Object(o.a)(e.display),this.currentValue=n}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](h.a),i["\u0275\u0275directiveInject"](i.ChangeDetectorRef),i["\u0275\u0275directiveInject"](f.E),i["\u0275\u0275directiveInject"](f.H))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-dynamic-scrollable-dropdown"]],inputs:{bindId:"bindId",group:"group",model:"model"},outputs:{blur:"blur",change:"change",focus:"focus"},features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:24,vars:26,consts:[["ngbDropdown","","display","dynamic","placement","bottom-right",1,"w-100"],["sdRef","ngbDropdown"],["role","combobox",1,"position-relative","right-addon"],["ngbDropdownToggle","","aria-hidden","true",1,"position-absolute","scrollable-dropdown-toggle"],[1,"form-control",3,"id","name","readonly","type","value","blur","click","focus","keypress"],["ngbDropdownMenu","","aria-haspopup","true","aria-expanded","false",1,"dropdown-menu","scrollable-dropdown-menu","w-100"],["role","listbox","infiniteScroll","",1,"scrollable-menu",3,"id","infiniteScrollDistance","infiniteScrollThrottle","scrollWindow","scrolled"],["class","dropdown-item disabled",4,"ngIf"],["class","dropdown-item collection-item text-truncate","role","option",3,"title","click","mousedown",4,"ngFor","ngForOf"],["class","scrollable-dropdown-loading text-center",4,"ngIf"],[1,"dropdown-item","disabled"],["role","option",1,"dropdown-item","collection-item","text-truncate",3,"title","click","mousedown"],[1,"scrollable-dropdown-loading","text-center"]],template:function(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",0,1),i["\u0275\u0275text"](2,"\n  "),i["\u0275\u0275elementStart"](3,"div",2),i["\u0275\u0275text"](4,"\n    "),i["\u0275\u0275element"](5,"i",3),i["\u0275\u0275text"](6,"\n    "),i["\u0275\u0275elementStart"](7,"input",4),i["\u0275\u0275listener"]("blur",(function(e){return t.onBlur(e)}))("click",(function(n){i["\u0275\u0275restoreView"](e);const o=i["\u0275\u0275reference"](1);return n.stopPropagation(),t.openDropdown(o)}))("focus",(function(e){return t.onFocus(e)}))("keypress",(function(e){return e.preventDefault()})),i["\u0275\u0275pipe"](8,"async"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](9,"\n  "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](10,"\n\n  "),i["\u0275\u0275elementStart"](11,"div",5),i["\u0275\u0275text"](12,"\n    "),i["\u0275\u0275elementStart"](13,"div",6),i["\u0275\u0275listener"]("scrolled",(function(){return t.onScroll()})),i["\u0275\u0275text"](14,"\n\n      "),i["\u0275\u0275template"](15,y,3,3,"button",7),i["\u0275\u0275text"](16,"\n      "),i["\u0275\u0275template"](17,C,3,5,"button",8),i["\u0275\u0275text"](18,"\n      "),i["\u0275\u0275template"](19,I,4,3,"div",9),i["\u0275\u0275text"](20,"\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](21,"\n\n  "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](22,"\n"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](23,"\n")}2&e&&(i["\u0275\u0275advance"](3),i["\u0275\u0275attribute"]("aria-label",t.model.label)("aria-owns","combobox_"+t.id+"_listbox"),i["\u0275\u0275advance"](4),i["\u0275\u0275classProp"]("is-invalid",t.showErrorMessages)("scrollable-dropdown-input",!t.model.readOnly),i["\u0275\u0275property"]("id",t.id)("name",t.model.name)("readonly",!0)("type",t.model.inputType)("value",i["\u0275\u0275pipeBind1"](8,24,t.currentValue)),i["\u0275\u0275attribute"]("aria-controls","combobox_"+t.id+"_listbox")("aria-activedescendant","combobox_"+t.id+"_selected")("aria-label",t.model.placeholder)("autoComplete",t.model.autoComplete),i["\u0275\u0275advance"](4),i["\u0275\u0275attribute"]("aria-label",t.model.placeholder),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("id","combobox_"+t.id+"_listbox")("infiniteScrollDistance",2)("infiniteScrollThrottle",50)("scrollWindow",!1),i["\u0275\u0275attribute"]("aria-label",t.model.placeholder),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",t.optionsList&&0==t.optionsList.length),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",t.optionsList),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",t.loading))},directives:[g.j,g.o,g.m,b.a,v.p,v.o],pipes:[v.b,x.d],styles:[".ds-form-input-addon[_ngcontent-%COMP%]{border-top-right-radius:0!important;border-bottom-right-radius:0!important;border-right:0!important}.ds-form-input-btn[_ngcontent-%COMP%]{border:var(--bs-input-btn-border-width) solid var(--bs-input-border-color);border-top-left-radius:0;border-bottom-left-radius:0;border-left:0}.ds-form-input-btn[_ngcontent-%COMP%]:focus, button.ds-form-add-more[_ngcontent-%COMP%]:focus{-webkit-box-shadow:none!important;box-shadow:none!important}button.ds-form-add-more[_ngcontent-%COMP%]:focus{outline:none}.ds-form-input-value[_ngcontent-%COMP%]{border-top-left-radius:0!important;border-bottom-left-radius:0!important}.fa-spin[_ngcontent-%COMP%]{pointer-events:none}.left-addon[_ngcontent-%COMP%]   .far[_ngcontent-%COMP%], .left-addon[_ngcontent-%COMP%]   .fas[_ngcontent-%COMP%], .left-addon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{left:0}.right-addon[_ngcontent-%COMP%]   .far[_ngcontent-%COMP%], .right-addon[_ngcontent-%COMP%]   .fas[_ngcontent-%COMP%], .right-addon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{right:0}.left-addon[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-left:calc(var(--bs-spacer) * 2.25)}.right-addon[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-right:calc(var(--bs-spacer) * 2.25)}.scrollable-menu[_ngcontent-%COMP%]{height:auto;max-height:var(--ds-dropdown-menu-max-height);overflow-x:hidden}.collection-item[_ngcontent-%COMP%]{border-bottom:var(--bs-dropdown-border-width) solid var(--bs-dropdown-border-color)}.scrollable-dropdown-loading[_ngcontent-%COMP%]{background-color:var(--bs-primary);color:#fff;height:calc(var(--bs-spacer) * 2)!important;line-height:calc(var(--bs-spacer) * 2);position:-webkit-sticky;position:sticky;bottom:0}.scrollable-dropdown-menu[_ngcontent-%COMP%]{left:0!important;margin-bottom:var(--bs-spacer);z-index:1000}.scrollable-dropdown-toggle[_ngcontent-%COMP%]{padding:.7rem .7rem 0}.scrollable-dropdown-input[readonly][_ngcontent-%COMP%]{background-color:#fff}"]}),e})()},ds6q:function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=n("Q1FS"),r=n("FWf1"),s=n("zB/H"),a=n("Mxlh"),l=n("FiyT"),c=n("p//D"),d=function(e){function t(t){var n=e.call(this,t)||this;return n.destination=t,n}return i(t,e),t}(r.Subscriber);t.SubjectSubscriber=d;var p=function(e){function t(){var t=e.call(this)||this;return t.observers=[],t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return i(t,e),t.prototype[c.rxSubscriber]=function(){return new d(this)},t.prototype.lift=function(e){var t=new u(this,this);return t.operator=e,t},t.prototype.next=function(e){if(this.closed)throw new a.ObjectUnsubscribedError;if(!this.isStopped)for(var t=this.observers,n=t.length,i=t.slice(),o=0;o<n;o++)i[o].next(e)},t.prototype.error=function(e){if(this.closed)throw new a.ObjectUnsubscribedError;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,n=t.length,i=t.slice(),o=0;o<n;o++)i[o].error(e);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new a.ObjectUnsubscribedError;this.isStopped=!0;for(var e=this.observers,t=e.length,n=e.slice(),i=0;i<t;i++)n[i].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(t){if(this.closed)throw new a.ObjectUnsubscribedError;return e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){if(this.closed)throw new a.ObjectUnsubscribedError;return this.hasError?(e.error(this.thrownError),s.Subscription.EMPTY):this.isStopped?(e.complete(),s.Subscription.EMPTY):(this.observers.push(e),new l.SubjectSubscription(this,e))},t.prototype.asObservable=function(){var e=new o.Observable;return e.source=this,e},t.create=function(e,t){return new u(e,t)},t}(o.Observable);t.Subject=p;var u=function(e){function t(t,n){var i=e.call(this)||this;return i.destination=t,i.source=n,i}return i(t,e),t.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},t.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},t.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},t.prototype._subscribe=function(e){return this.source?this.source.subscribe(e):s.Subscription.EMPTY},t}(p);t.AnonymousSubject=u},hqmO:function(e,t,n){"use strict";n.d(t,"a",(function(){return C}));var i=n("pLZG"),o=n("lJxs"),r=n("/uUt"),s=n("fXoL"),a=n("LvDl"),l=n("J3qs"),c=n("NFsL"),d=n("Q5/L");function p(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",7),s["\u0275\u0275text"](1,"\n            "),s["\u0275\u0275elementStart"](2,"button",8),s["\u0275\u0275listener"]("click",(function(t){s["\u0275\u0275restoreView"](e);const n=s["\u0275\u0275nextContext"](),i=n.context,o=n.index;return s["\u0275\u0275nextContext"]().removeItem(t,i,o)})),s["\u0275\u0275pipe"](3,"translate"),s["\u0275\u0275pipe"](4,"translate"),s["\u0275\u0275text"](5,"\n              "),s["\u0275\u0275elementStart"](6,"span"),s["\u0275\u0275element"](7,"i",9),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](8,"\n            "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](9,"\n        "),s["\u0275\u0275elementEnd"]()}if(2&e){const e=s["\u0275\u0275nextContext"](),t=e.$implicit,n=e.context,i=e.index,o=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](2),s["\u0275\u0275propertyInterpolate"]("title",s["\u0275\u0275pipeBind1"](3,3,"form.remove")),s["\u0275\u0275property"]("disabled",1===t.context.groups.length||o.isItemReadOnly(n,i)),s["\u0275\u0275attribute"]("aria-label",s["\u0275\u0275pipeBind1"](4,5,"form.remove"))}}function u(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",10),s["\u0275\u0275text"](1,"\n          "),s["\u0275\u0275elementStart"](2,"div",11),s["\u0275\u0275text"](3,"\n            "),s["\u0275\u0275elementStart"](4,"button",12),s["\u0275\u0275listener"]("click",(function(t){s["\u0275\u0275restoreView"](e);const n=s["\u0275\u0275nextContext"]().$implicit;return s["\u0275\u0275nextContext"]().insertItem(t,n.context,n.context.groups.length)})),s["\u0275\u0275pipe"](5,"translate"),s["\u0275\u0275pipe"](6,"translate"),s["\u0275\u0275text"](7,"\n              "),s["\u0275\u0275elementStart"](8,"span"),s["\u0275\u0275element"](9,"i",13),s["\u0275\u0275text"](10),s["\u0275\u0275pipe"](11,"translate"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](12,"\n            "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](13,"\n          "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](14,"\n        "),s["\u0275\u0275elementEnd"]()}if(2&e){const e=s["\u0275\u0275nextContext"](),t=e.context,n=e.index,i=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](4),s["\u0275\u0275propertyInterpolate"]("title",s["\u0275\u0275pipeBind1"](5,4,"form.add")),s["\u0275\u0275property"]("disabled",i.isItemReadOnly(t,n)),s["\u0275\u0275attribute"]("aria-label",s["\u0275\u0275pipeBind1"](6,6,"form.add")),s["\u0275\u0275advance"](6),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind1"](11,8,"form.add"),"")}}function m(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",7),s["\u0275\u0275text"](1,"\n          "),s["\u0275\u0275elementStart"](2,"div",14),s["\u0275\u0275text"](3,"\n            "),s["\u0275\u0275elementStart"](4,"button",15),s["\u0275\u0275listener"]("click",(function(t){s["\u0275\u0275restoreView"](e);const n=s["\u0275\u0275nextContext"](),i=n.context,o=n.index;return s["\u0275\u0275nextContext"]().removeItem(t,i,o)})),s["\u0275\u0275pipe"](5,"translate"),s["\u0275\u0275pipe"](6,"translate"),s["\u0275\u0275text"](7,"\n              "),s["\u0275\u0275elementStart"](8,"span"),s["\u0275\u0275text"](9),s["\u0275\u0275pipe"](10,"translate"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](11,"\n            "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](12,"\n          "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](13,"\n        "),s["\u0275\u0275elementEnd"]()}if(2&e){const e=s["\u0275\u0275nextContext"](),t=e.$implicit,n=e.context,i=e.index,o=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](4),s["\u0275\u0275propertyInterpolate"]("title",s["\u0275\u0275pipeBind1"](5,4,"form.discard")),s["\u0275\u0275property"]("disabled",1===t.context.groups.length||o.isItemReadOnly(n,i)),s["\u0275\u0275attribute"]("aria-label",s["\u0275\u0275pipeBind1"](6,6,"form.discard")),s["\u0275\u0275advance"](5),s["\u0275\u0275textInterpolate"](s["\u0275\u0275pipeBind1"](10,8,"form.discard"))}}function h(e,t){if(1&e&&(s["\u0275\u0275text"](0,"\n        "),s["\u0275\u0275text"](1,"\n        "),s["\u0275\u0275template"](2,p,10,7,"div",5),s["\u0275\u0275text"](3,"\n        "),s["\u0275\u0275template"](4,u,15,10,"div",6),s["\u0275\u0275text"](5,"\n\n        "),s["\u0275\u0275text"](6,"\n        "),s["\u0275\u0275template"](7,m,14,10,"div",5),s["\u0275\u0275text"](8,"\n      ")),2&e){const e=t.$implicit,n=t.index,i=t.context,o=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngIf",!i.notRepeatable&&!o.isVirtual(i,n)),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngIf",!i.notRepeatable&&n===e.context.groups.length-1),s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("ngIf",i.notRepeatable&&i.showButtons&&e.context.groups.length>1)}}function f(e,t){1&e&&s["\u0275\u0275projection"](0,1,["*ngIf","!displaySubmit && !displayCancel"])}function g(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"button",20),s["\u0275\u0275listener"]("click",(function(){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).reset()})),s["\u0275\u0275text"](1,"\n              "),s["\u0275\u0275element"](2,"i",21),s["\u0275\u0275text"](3),s["\u0275\u0275pipe"](4,"translate"),s["\u0275\u0275elementEnd"]()}if(2&e){const e=s["\u0275\u0275nextContext"](2);s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind1"](4,1,e.cancelLabel),"\n            ")}}function b(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"button",22),s["\u0275\u0275listener"]("click",(function(){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).onSubmit()})),s["\u0275\u0275pipe"](1,"async"),s["\u0275\u0275element"](2,"i",23),s["\u0275\u0275text"](3),s["\u0275\u0275pipe"](4,"translate"),s["\u0275\u0275elementEnd"]()}if(2&e){const e=s["\u0275\u0275nextContext"](2);s["\u0275\u0275property"]("disabled",!s["\u0275\u0275pipeBind1"](1,2,e.isValid())),s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind1"](4,4,e.submitLabel),"\n            ")}}function v(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"div"),s["\u0275\u0275text"](1,"\n      "),s["\u0275\u0275element"](2,"hr"),s["\u0275\u0275text"](3,"\n      "),s["\u0275\u0275elementStart"](4,"div",16),s["\u0275\u0275text"](5,"\n        "),s["\u0275\u0275elementStart"](6,"div",17),s["\u0275\u0275text"](7,"\n          "),s["\u0275\u0275projection"](8,2),s["\u0275\u0275text"](9,"\n            "),s["\u0275\u0275template"](10,g,5,3,"button",18),s["\u0275\u0275text"](11,"\n            "),s["\u0275\u0275projection"](12,3),s["\u0275\u0275text"](13,"\n            "),s["\u0275\u0275template"](14,b,5,6,"button",19),s["\u0275\u0275text"](15,"\n            "),s["\u0275\u0275projection"](16,4),s["\u0275\u0275text"](17,"\n        "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](18,"\n      "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](19,"\n    "),s["\u0275\u0275elementEnd"]()),2&e){const e=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](10),s["\u0275\u0275property"]("ngIf",e.displayCancel),s["\u0275\u0275advance"](4),s["\u0275\u0275property"]("ngIf",e.displaySubmit)}}const x=[[["","additional",""]],"*",[["","before",""]],[["","between",""]],[["","after",""]]],y=["[additional]","*","[before]","[between]","[after]"];let C=(()=>{class e{constructor(e,t,n){this.formService=e,this.changeDetectorRef=t,this.formBuilderService=n,this.formErrors=[],this.displaySubmit=!0,this.displayCancel=!0,this.emitChange=!0,this.submitLabel="form.submit",this.cancelLabel="form.cancel",this.formLayout=null,this.blur=new s.EventEmitter,this.change=new s.EventEmitter,this.focus=new s.EventEmitter,this.customEvent=new s.EventEmitter,this.addArrayItem=new s.EventEmitter,this.removeArrayItem=new s.EventEmitter,this.cancel=new s.EventEmitter,this.submitForm=new s.EventEmitter,this.subs=[]}getFormGroup(){return this.parentFormModel?this.formGroup.parent:this.formGroup}getFormGroupValue(){return this.getFormGroup().value}getFormGroupValidStatus(){return this.getFormGroup().valid}ngOnInit(){this.formGroup?this.formModel.forEach(e=>{this.parentFormModel&&this.formBuilderService.addFormGroupControl(this.formGroup,this.parentFormModel,e)}):this.formGroup=this.formBuilderService.createFormGroup(this.formModel),this.formService.initForm(this.formId,this.formModel,this.getFormGroupValidStatus()),this.formValid=this.getFormGroupValidStatus(),this.subs.push(this.formGroup.statusChanges.pipe(Object(i.a)(()=>this.formValid!==this.getFormGroupValidStatus())).subscribe(()=>{this.formService.setStatusChanged(this.formId,this.getFormGroupValidStatus()),this.formValid=this.getFormGroupValidStatus()})),this.subs.push(this.formService.getForm(this.formId).pipe(Object(i.a)(e=>!!e&&(Object(l.e)(e.errors)||Object(l.e)(this.formErrors))),Object(o.a)(e=>e.errors),Object(r.a)()).subscribe(e=>{const{formGroup:t,formModel:n}=this;e.filter(e=>-1===Object(a.findIndex)(this.formErrors,{fieldId:e.fieldId,fieldIndex:e.fieldIndex})).forEach(e=>{const{fieldId:i}=e,{fieldIndex:o}=e;let r;if(r=this.formBuilderService.getFormControlById(i,this.parentFormModel?t.parent:t,n,o),r){const t=this.formBuilderService.findById(i,n);this.formService.addErrorToField(r,t,e.message),this.changeDetectorRef.detectChanges()}}),this.formErrors.filter(t=>-1===Object(a.findIndex)(e,{fieldId:t.fieldId,fieldIndex:t.fieldIndex})).forEach(e=>{const{fieldId:i}=e,{fieldIndex:o}=e;let r;if(r=this.formBuilderService.getFormControlById(i,this.parentFormModel?t.parent:t,n,o),r){const t=this.formBuilderService.findById(i,n);this.formService.removeErrorFromField(r,t,e.message)}}),this.formErrors=e,this.changeDetectorRef.detectChanges()}))}ngOnDestroy(){this.subs.filter(e=>Object(l.b)(e)).forEach(e=>e.unsubscribe()),this.formService.removeForm(this.formId)}isValid(){return this.formService.isValid(this.formId)}keepSync(){this.subs.push(this.formService.getFormData(this.formId).subscribe(e=>{!Object.is(e,this.formGroup.value)&&this.formGroup&&this.formGroup.setValue(e)}))}onBlur(e){this.blur.emit(e);const t=e.control,n=e.context&&e.context.index?e.context.index:0;t.valid?this.formService.removeError(this.formId,e.model.name,n):this.formService.addControlErrors(t,this.formId,e.model.name,n)}onCustomEvent(e){this.customEvent.emit(e)}onFocus(e){this.formService.setTouched(this.formId,this.formModel,e),this.focus.emit(e)}onChange(e){this.formService.changeForm(this.formId,this.formModel),this.formGroup.markAsPristine(),this.emitChange&&this.change.emit(e),e.control.valid&&this.formService.removeError(this.formId,e.model.id,e.context&&e.context.index?e.context.index:0)}onSubmit(){this.getFormGroupValidStatus()?this.submitForm.emit(this.formService.getFormData(this.formId)):this.formService.validateAllFormFields(this.formGroup)}reset(){this.formGroup.reset(),this.cancel.emit()}isItemReadOnly(e,t){return e.groups[t].group[0].readOnly}removeItem(e,t,n){const i=this.formGroup.get(this.formBuilderService.getPath(t)),o=this.getEvent(e,t,n,"remove");this.formBuilderService.isQualdropGroup(o.model)&&this.removeArrayItem.emit(o),this.formBuilderService.removeFormArrayGroup(n,i,t),this.formService.changeForm(this.formId,this.formModel),this.formBuilderService.isQualdropGroup(o.model)||this.removeArrayItem.emit(o)}insertItem(e,t,n){const i=this.formGroup.get(this.formBuilderService.getPath(t));this.formBuilderService.insertFormArrayGroup(n,i,t),this.addArrayItem.emit(this.getEvent(e,t,n,"add")),this.formService.changeForm(this.formId,this.formModel)}isVirtual(e,t){const n=e.groups[t].group[0].metadataValue;return Object(l.e)(n)&&n.isVirtual}getEvent(e,t,n,i){const o=t.groups[n],r=o.context;let s=this.formGroup.get(r.id);if(Object(l.i)(s))for(const a of Object.keys(this.formGroup.controls))if(s=this.formGroup.controls[a].get(r.id),Object(l.g)(s))break;return{$event:e,context:o,control:s.controls[n],group:s,model:o.group[0],type:i}}}return e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](c.a),s["\u0275\u0275directiveInject"](s.ChangeDetectorRef),s["\u0275\u0275directiveInject"](d.a))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-form"]],inputs:{displaySubmit:"displaySubmit",displayCancel:"displayCancel",emitChange:"emitChange",formId:"formId",submitLabel:"submitLabel",cancelLabel:"cancelLabel",formModel:"formModel",parentFormModel:"parentFormModel",formGroup:"formGroup",formLayout:"formLayout"},outputs:{blur:"dfBlur",change:"dfChange",focus:"dfFocus",customEvent:"ngbEvent",addArrayItem:"addArrayItem",removeArrayItem:"removeArrayItem",cancel:"cancel",submitForm:"submitForm"},exportAs:["formComponent"],ngContentSelectors:y,decls:17,vars:7,consts:[[1,"container-fluid"],[1,"form-horizontal",3,"formGroup"],[3,"formId","formGroup","formModel","formLayout","change","dfBlur","dfChange","dfFocus","ngbEvent"],["modelType","ARRAY"],[4,"ngIf"],["class","col-xs-2 d-flex flex-column justify-content-sm-start align-items-end",4,"ngIf"],["class","clearfix pl-4 w-100",4,"ngIf"],[1,"col-xs-2","d-flex","flex-column","justify-content-sm-start","align-items-end"],["type","button","role","button",1,"btn","btn-secondary",3,"title","disabled","click"],["aria-hidden","true",1,"fas","fa-trash"],[1,"clearfix","pl-4","w-100"],["role","group",1,"btn-group"],["type","button","role","button",1,"ds-form-add-more","btn","btn-link",3,"title","disabled","click"],[1,"fas","fa-plus"],["role","button",1,"btn-group"],["type","button",1,"btn","btn-secondary",3,"title","disabled","click"],[1,"form-group","row"],[1,"col","text-right"],["type","reset","class","btn btn-outline-secondary",3,"click",4,"ngIf"],["type","submit","class","btn btn-primary",3,"disabled","click",4,"ngIf"],["type","reset",1,"btn","btn-outline-secondary",3,"click"],[1,"fa","fa-times"],["type","submit",1,"btn","btn-primary",3,"disabled","click"],[1,"fas","fa-save"]],template:function(e,t){1&e&&(s["\u0275\u0275projectionDef"](x),s["\u0275\u0275elementStart"](0,"div",0),s["\u0275\u0275text"](1,"\n  "),s["\u0275\u0275elementStart"](2,"form",1),s["\u0275\u0275text"](3,"\n\n    "),s["\u0275\u0275elementStart"](4,"ds-dynamic-form",2),s["\u0275\u0275listener"]("change",(function(e){return e.stopPropagation()}))("dfBlur",(function(e){return t.onBlur(e)}))("dfChange",(function(e){return t.onChange(e)}))("dfFocus",(function(e){return t.onFocus(e)}))("ngbEvent",(function(e){return t.onCustomEvent(e)})),s["\u0275\u0275text"](5,"\n      "),s["\u0275\u0275template"](6,h,9,3,"ng-template",3),s["\u0275\u0275text"](7,"\n\n    "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](8,"\n        "),s["\u0275\u0275projection"](9),s["\u0275\u0275text"](10,"\n        "),s["\u0275\u0275template"](11,f,1,0,"ng-content",4),s["\u0275\u0275text"](12,"\n\n    "),s["\u0275\u0275template"](13,v,20,2,"div",4),s["\u0275\u0275text"](14,"\n\n  "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](15,"\n\n"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](16,"\n")),2&e&&(s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("formGroup",t.formGroup),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("formId",t.formId)("formGroup",t.formGroup)("formModel",t.formModel)("formLayout",t.formLayout),s["\u0275\u0275advance"](7),s["\u0275\u0275property"]("ngIf",!t.displaySubmit&&!t.displayCancel),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngIf",t.displaySubmit||t.displayCancel))},styles:[".ds-form-input-addon[_ngcontent-%COMP%]{border-top-right-radius:0!important;border-bottom-right-radius:0!important;border-right:0!important}.ds-form-input-btn[_ngcontent-%COMP%]{border:var(--bs-input-btn-border-width) solid var(--bs-input-border-color);border-top-left-radius:0;border-bottom-left-radius:0;border-left:0}.ds-form-input-btn[_ngcontent-%COMP%]:focus, button.ds-form-add-more[_ngcontent-%COMP%]:focus{-webkit-box-shadow:none!important;box-shadow:none!important}button.ds-form-add-more[_ngcontent-%COMP%]:focus{outline:none}.ds-form-input-value[_ngcontent-%COMP%]{border-top-left-radius:0!important;border-bottom-left-radius:0!important}.fa-spin[_ngcontent-%COMP%]{pointer-events:none}.left-addon[_ngcontent-%COMP%]   .far[_ngcontent-%COMP%], .left-addon[_ngcontent-%COMP%]   .fas[_ngcontent-%COMP%], .left-addon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{left:0}.right-addon[_ngcontent-%COMP%]   .far[_ngcontent-%COMP%], .right-addon[_ngcontent-%COMP%]   .fas[_ngcontent-%COMP%], .right-addon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{right:0}.left-addon[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-left:calc(var(--bs-spacer) * 2.25)}.right-addon[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-right:calc(var(--bs-spacer) * 2.25)}"]}),e})()},n7Wa:function(e,t,n){"use strict";n.d(t,"a",(function(){return j})),n.d(t,"b",(function(){return x})),n.d(t,"c",(function(){return y})),n.d(t,"d",(function(){return C})),n.d(t,"e",(function(){return I})),n.d(t,"f",(function(){return O})),n.d(t,"g",(function(){return E})),n.d(t,"h",(function(){return S})),n.d(t,"i",(function(){return w}));var i=n("fXoL"),o=n("3Pt+"),r=n("1kSV"),s=n("e+Av"),a=n("ofXK"),l=n("904P");const c=function(e,t){return[e,t]};function d(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"label",3),i["\u0275\u0275text"](1,"\n\n            "),i["\u0275\u0275elementStart"](2,"input",4),i["\u0275\u0275listener"]("blur",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().onBlur(t)}))("change",(function(n){i["\u0275\u0275restoreView"](e);const o=t.$implicit;return i["\u0275\u0275nextContext"]().onCheckboxChange(n,o)}))("focus",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().onFocus(t)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](3,"span",5),i["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("hidden",e.hidden)("ngClass",n.getClass("element","control",e)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("checked",e.checked)("formControlName",e.id)("id",n.getCheckboxId(e))("name",e.name)("required",e.required)("tabindex",e.tabIndex)("value",e.value),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngClass",n.getClass("element","label",e))("innerHTML",e.label,i["\u0275\u0275sanitizeHtml"])}}function p(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",5),i["\u0275\u0275text"](1,"\n        "),i["\u0275\u0275element"](2,"span",6),i["\u0275\u0275text"](3,"\n    "),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("innerHTML",e.model.prefix,i["\u0275\u0275sanitizeHtml"])}}function u(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",7),i["\u0275\u0275text"](1,"\n        "),i["\u0275\u0275element"](2,"span",6),i["\u0275\u0275text"](3,"\n    "),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("innerHTML",e.model.suffix,i["\u0275\u0275sanitizeHtml"])}}function m(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"option",10),i["\u0275\u0275text"](1,"\n\n    "),i["\u0275\u0275elementEnd"]()),2&e&&i["\u0275\u0275property"]("value",t.$implicit)}function h(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"datalist",8),i["\u0275\u0275text"](1,"\n\n        "),i["\u0275\u0275template"](2,m,2,1,"option",9),i["\u0275\u0275pipe"](3,"async"),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("id",e.model.listId),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",i["\u0275\u0275pipeBind1"](3,2,e.model.list$))}}const f=function(e,t){return{mask:e,showMask:t}};function g(e,t){if(1&e&&i["\u0275\u0275element"](0,"legend",4),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("innerHTML",e.model.legend,i["\u0275\u0275sanitizeHtml"])}}function b(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"label",5),i["\u0275\u0275text"](1,"\n\n            "),i["\u0275\u0275elementStart"](2,"input",6),i["\u0275\u0275listener"]("blur",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().onBlur(t)}))("focus",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().onFocus(t)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](3,"span",4),i["\u0275\u0275text"](4,"\n        "),i["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("ngClass",i["\u0275\u0275pureFunction2"](5,c,n.getClass("element","option"),n.getClass("grid","option"))),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("disabled",e.disabled)("name",n.model.name)("value",e.value),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("innerHTML",e.label,i["\u0275\u0275sanitizeHtml"])}}function v(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"option",3),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;i["\u0275\u0275property"]("disabled",e.disabled)("ngValue",e.value),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](e.label)}}let x=(()=>{class e extends s.z{constructor(e,t,n){super(e,t),this.layoutService=e,this.validationService=t,this.config=n,this.blur=new i.EventEmitter,this.change=new i.EventEmitter,this.focus=new i.EventEmitter}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](s.E),i["\u0275\u0275directiveInject"](s.H),i["\u0275\u0275directiveInject"](r.h))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["dynamic-ng-bootstrap-calendar"]],viewQuery:function(e,t){if(1&e&&i["\u0275\u0275viewQuery"](r.g,3),2&e){let e;i["\u0275\u0275queryRefresh"](e=i["\u0275\u0275loadQuery"]())&&(t.ngbCalendar=e.first)}},inputs:{formLayout:"formLayout",group:"group",layout:"layout",model:"model"},outputs:{blur:"blur",change:"change",focus:"focus"},features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:5,vars:13,consts:[[3,"formGroup"],[3,"displayMonths","firstDayOfWeek","formControlName","id","maxDate","minDate","navigation","ngClass","outsideDays","showWeekdays","showWeekNumbers","startDate","select"]],template:function(e,t){1&e&&(i["\u0275\u0275elementContainerStart"](0,0),i["\u0275\u0275text"](1,"\n\n    "),i["\u0275\u0275elementStart"](2,"ngb-datepicker",1),i["\u0275\u0275listener"]("select",(function(e){return t.onChange(e)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](3,"\n\n"),i["\u0275\u0275elementContainerEnd"](),i["\u0275\u0275text"](4,"\n")),2&e&&(i["\u0275\u0275property"]("formGroup",t.group),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("displayMonths",t.model.getAdditional("displayMonths",t.config.displayMonths))("firstDayOfWeek",t.model.getAdditional("firstDayOfWeek",t.config.firstDayOfWeek))("formControlName",t.model.id)("id",t.id)("maxDate",t.model.max)("minDate",t.model.min)("navigation",t.model.getAdditional("navigation",t.config.navigation))("ngClass",t.getClass("element","control"))("outsideDays",t.model.getAdditional("outsideDays",t.config.outsideDays))("showWeekdays",t.model.getAdditional("showWeekdays",t.config.showWeekdays))("showWeekNumbers",t.model.getAdditional("showWeekNumbers",t.config.showWeekNumbers))("startDate",t.model.focusedDate))},directives:[o.NgControlStatusGroup,o.FormGroupDirective,r.g,o.NgControlStatus,o.FormControlName,a.m],encapsulation:2,changeDetection:0}),e})(),y=(()=>{class e extends s.z{constructor(e,t){super(e,t),this.layoutService=e,this.validationService=t,this.blur=new i.EventEmitter,this.change=new i.EventEmitter,this.focus=new i.EventEmitter}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](s.E),i["\u0275\u0275directiveInject"](s.H))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["dynamic-ng-bootstrap-checkbox"]],inputs:{formLayout:"formLayout",group:"group",layout:"layout",model:"model"},outputs:{blur:"blur",change:"change",focus:"focus"},features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:9,vars:19,consts:[[1,"form-check",3,"formGroup"],[1,"form-check-label"],["type","checkbox",1,"form-check-input",3,"checked","formControlName","id","indeterminate","name","ngClass","required","tabindex","value","blur","change","focus"],[3,"innerHTML","ngClass"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275text"](1,"\n\n    "),i["\u0275\u0275elementStart"](2,"label",1),i["\u0275\u0275text"](3,"\n\n        "),i["\u0275\u0275elementStart"](4,"input",2),i["\u0275\u0275listener"]("blur",(function(e){return t.onBlur(e)}))("change",(function(e){return t.onChange(e)}))("focus",(function(e){return t.onFocus(e)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](5,"span",3),i["\u0275\u0275text"](6,"\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](7,"\n\n"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](8,"\n")),2&e&&(i["\u0275\u0275classProp"]("disabled",t.model.disabled),i["\u0275\u0275property"]("formGroup",t.group),i["\u0275\u0275advance"](4),i["\u0275\u0275classProp"]("is-invalid",t.showErrorMessages),i["\u0275\u0275property"]("checked",t.model.checked)("formControlName",t.model.id)("id",t.id)("indeterminate",t.model.indeterminate)("name",t.model.name)("ngClass",t.getClass("element","control"))("required",t.model.required)("tabindex",t.model.tabIndex)("value",t.model.value),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("innerHTML",t.model.label,i["\u0275\u0275sanitizeHtml"])("ngClass",i["\u0275\u0275pureFunction2"](16,c,t.getClass("element","label"),t.getClass("grid","label"))))},directives:[o.NgControlStatusGroup,o.FormGroupDirective,o.CheckboxControlValueAccessor,o.CheckboxRequiredValidator,o.NgControlStatus,o.FormControlName,a.m],encapsulation:2}),e})(),C=(()=>{class e extends s.z{constructor(e,t){super(e,t),this.layoutService=e,this.validationService=t,this.blur=new i.EventEmitter,this.change=new i.EventEmitter,this.focus=new i.EventEmitter}getCheckboxId(e){return this.layoutService.getElementId(e)}onCheckboxChange(e,t){this.onChange(e),t.value=e.target.checked}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](s.E),i["\u0275\u0275directiveInject"](s.H))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["dynamic-ng-bootstrap-checkbox-group"]],inputs:{formLayout:"formLayout",group:"group",layout:"layout",model:"model"},outputs:{blur:"blur",change:"change",focus:"focus"},features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:8,vars:5,consts:[[3,"formGroup"],["data-toggle","buttons",1,"btn-group","btn-group-toggle",3,"formGroupName","id","ngClass"],["ngbButtonLabel","",3,"hidden","ngClass",4,"ngFor","ngForOf"],["ngbButtonLabel","",3,"hidden","ngClass"],["type","checkbox","ngbButton","",3,"checked","formControlName","id","name","required","tabindex","value","blur","change","focus"],[3,"ngClass","innerHTML"]],template:function(e,t){1&e&&(i["\u0275\u0275elementContainerStart"](0,0),i["\u0275\u0275text"](1,"\n\n    "),i["\u0275\u0275elementStart"](2,"div",1),i["\u0275\u0275text"](3,"\n\n        "),i["\u0275\u0275template"](4,d,4,11,"label",2),i["\u0275\u0275text"](5,"\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](6,"\n\n"),i["\u0275\u0275elementContainerEnd"](),i["\u0275\u0275text"](7,"\n")),2&e&&(i["\u0275\u0275property"]("formGroup",t.group),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("formGroupName",t.model.id)("id",t.id)("ngClass",t.getClass("element","control")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",t.model.group))},directives:[o.NgControlStatusGroup,o.FormGroupDirective,o.FormGroupName,a.m,a.o,r.d,o.CheckboxControlValueAccessor,o.CheckboxRequiredValidator,r.f,o.NgControlStatus,o.FormControlName],encapsulation:2,changeDetection:0}),e})(),I=(()=>{class e extends s.z{constructor(e,t){super(e,t),this.layoutService=e,this.validationService=t,this.blur=new i.EventEmitter,this.change=new i.EventEmitter,this.focus=new i.EventEmitter}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](s.E),i["\u0275\u0275directiveInject"](s.H))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["dynamic-ng-bootstrap-input"]],inputs:{formLayout:"formLayout",group:"group",layout:"layout",model:"model"},outputs:{blur:"blur",change:"change",focus:"focus"},features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:11,vars:37,consts:[[3,"formGroup"],["class","input-group-prepend",4,"ngIf"],[3,"autocomplete","autofocus","dynamicList","formControlName","id","maxlength","minlength","name","ngClass","pattern","placeholder","readonly","required","spellcheck","tabindex","textMask","type","blur","change","focus"],["class","input-group-append",4,"ngIf"],[3,"id",4,"ngIf"],[1,"input-group-prepend"],[1,"input-group-text",3,"innerHTML"],[1,"input-group-append"],[3,"id"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275text"](1,"\n\n    "),i["\u0275\u0275template"](2,p,4,1,"div",1),i["\u0275\u0275text"](3,"\n\n    "),i["\u0275\u0275elementStart"](4,"input",2),i["\u0275\u0275listener"]("blur",(function(e){return t.onBlur(e)}))("change",(function(e){return t.onChange(e)}))("focus",(function(e){return t.onFocus(e)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](5,"\n\n    "),i["\u0275\u0275template"](6,u,4,1,"div",3),i["\u0275\u0275text"](7,"\n\n    "),i["\u0275\u0275template"](8,h,4,4,"datalist",4),i["\u0275\u0275text"](9,"\n\n"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](10,"\n")),2&e&&(i["\u0275\u0275classProp"]("input-group",t.model.prefix||t.model.suffix),i["\u0275\u0275property"]("formGroup",t.group),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",t.model.prefix),i["\u0275\u0275advance"](2),i["\u0275\u0275classProp"]("form-control","file"!==t.model.inputType)("form-control-file","file"===t.model.inputType)("is-invalid",t.showErrorMessages),i["\u0275\u0275property"]("autocomplete",t.model.autoComplete)("autofocus",t.model.autoFocus)("dynamicList",t.model.listId)("formControlName",t.model.id)("id",t.id)("maxlength",t.model.maxLength)("minlength",t.model.minLength)("name",t.model.name)("ngClass",t.getClass("element","control"))("pattern",t.model.pattern)("placeholder",t.model.placeholder)("readonly",t.model.readOnly)("required",t.model.required)("spellcheck",t.model.spellCheck)("tabindex",t.model.tabIndex)("textMask",i["\u0275\u0275pureFunction2"](34,f,t.model.mask||!1,t.model.mask&&!t.model.placeholder))("type",t.model.inputType),i["\u0275\u0275attribute"]("accept",t.model.accept)("max",t.model.max)("min",t.model.min)("multiple",t.model.multiple)("step",t.model.step),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",t.model.suffix),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",t.model.hasList))},directives:[o.NgControlStatusGroup,o.FormGroupDirective,a.p,o.DefaultValueAccessor,s.K,o.NgControlStatus,o.FormControlName,o.MaxLengthValidator,o.MinLengthValidator,a.m,o.PatternValidator,o.RequiredValidator,l.MaskedInputDirective,a.o,o.NgSelectOption,o["\u0275angular_packages_forms_forms_z"]],pipes:[a.b],encapsulation:2}),e})(),O=(()=>{class e extends s.z{constructor(e,t){super(e,t),this.layoutService=e,this.validationService=t,this.blur=new i.EventEmitter,this.change=new i.EventEmitter,this.focus=new i.EventEmitter}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](s.E),i["\u0275\u0275directiveInject"](s.H))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["dynamic-ng-bootstrap-radio-group"]],inputs:{formLayout:"formLayout",group:"group",layout:"layout",model:"model"},outputs:{blur:"blur",change:"change",focus:"focus"},features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:11,vars:9,consts:[[3,"formGroup"],["ngbRadioGroup","","role","radiogroup",1,"btn-group","btn-group-toggle",3,"formControlName","id","ngClass","tabindex","change"],[3,"innerHTML",4,"ngIf"],["ngbButtonLabel","",3,"ngClass",4,"ngFor","ngForOf"],[3,"innerHTML"],["ngbButtonLabel","",3,"ngClass"],["type","radio","ngbButton","",3,"disabled","name","value","blur","focus"]],template:function(e,t){1&e&&(i["\u0275\u0275elementContainerStart"](0,0),i["\u0275\u0275text"](1,"\n\n    "),i["\u0275\u0275elementStart"](2,"div",1),i["\u0275\u0275listener"]("change",(function(e){return t.onChange(e)})),i["\u0275\u0275text"](3,"\n\n        "),i["\u0275\u0275template"](4,g,1,1,"legend",2),i["\u0275\u0275text"](5,"\n\n        "),i["\u0275\u0275template"](6,b,5,8,"label",3),i["\u0275\u0275pipe"](7,"async"),i["\u0275\u0275text"](8,"\n\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](9,"\n\n"),i["\u0275\u0275elementContainerEnd"](),i["\u0275\u0275text"](10,"\n")),2&e&&(i["\u0275\u0275property"]("formGroup",t.group),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("formControlName",t.model.id)("id",t.id)("ngClass",t.getClass("element","control"))("tabindex",t.model.tabIndex),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",t.model.legend),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",i["\u0275\u0275pipeBind1"](7,7,t.model.options$)))},directives:[o.NgControlStatusGroup,o.FormGroupDirective,r.H,o.NgControlStatus,o.FormControlName,a.m,a.p,a.o,r.d,r.G],pipes:[a.b],encapsulation:2,changeDetection:0}),e})(),E=(()=>{class e extends s.z{constructor(e,t){super(e,t),this.layoutService=e,this.validationService=t,this.blur=new i.EventEmitter,this.change=new i.EventEmitter,this.focus=new i.EventEmitter}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](s.E),i["\u0275\u0275directiveInject"](s.H))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["dynamic-ng-bootstrap-select"]],inputs:{formLayout:"formLayout",group:"group",layout:"layout",model:"model"},outputs:{blur:"blur",change:"change",focus:"focus"},features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:9,vars:13,consts:[[3,"formGroup"],[1,"form-control",3,"compareWith","formControlName","id","name","ngClass","required","tabindex","blur","change","focus"],[3,"disabled","ngValue",4,"ngFor","ngForOf"],[3,"disabled","ngValue"]],template:function(e,t){1&e&&(i["\u0275\u0275elementContainerStart"](0,0),i["\u0275\u0275text"](1,"\n\n    "),i["\u0275\u0275elementStart"](2,"select",1),i["\u0275\u0275listener"]("blur",(function(e){return t.onBlur(e)}))("change",(function(e){return t.onChange(e)}))("focus",(function(e){return t.onFocus(e)})),i["\u0275\u0275text"](3,"\n\n        "),i["\u0275\u0275template"](4,v,2,3,"option",2),i["\u0275\u0275pipe"](5,"async"),i["\u0275\u0275text"](6,"\n\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](7,"\n\n"),i["\u0275\u0275elementContainerEnd"](),i["\u0275\u0275text"](8,"\n")),2&e&&(i["\u0275\u0275property"]("formGroup",t.group),i["\u0275\u0275advance"](2),i["\u0275\u0275classProp"]("is-invalid",t.showErrorMessages),i["\u0275\u0275property"]("compareWith",t.model.compareWithFn)("formControlName",t.model.id)("id",t.id)("name",t.model.name)("ngClass",t.getClass("element","control"))("required",t.model.required)("tabindex",t.model.tabIndex),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",i["\u0275\u0275pipeBind1"](5,11,t.model.options$)))},directives:[o.NgControlStatusGroup,o.FormGroupDirective,o.SelectControlValueAccessor,o.NgControlStatus,o.FormControlName,a.m,o.RequiredValidator,a.o,o.NgSelectOption,o["\u0275angular_packages_forms_forms_z"]],pipes:[a.b],encapsulation:2}),e})(),S=(()=>{class e extends s.z{constructor(e,t){super(e,t),this.layoutService=e,this.validationService=t,this.blur=new i.EventEmitter,this.change=new i.EventEmitter,this.focus=new i.EventEmitter}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](s.E),i["\u0275\u0275directiveInject"](s.H))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["dynamic-ng-bootstrap-textarea"]],inputs:{formLayout:"formLayout",group:"group",layout:"layout",model:"model"},outputs:{blur:"blur",change:"change",focus:"focus"},features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:5,vars:17,consts:[[3,"formGroup"],[1,"form-control",3,"cols","formControlName","id","maxlength","minlength","name","ngClass","placeholder","readonly","required","rows","spellcheck","tabindex","wrap","blur","change","focus"]],template:function(e,t){1&e&&(i["\u0275\u0275elementContainerStart"](0,0),i["\u0275\u0275text"](1,"\n\n    "),i["\u0275\u0275elementStart"](2,"textarea",1),i["\u0275\u0275listener"]("blur",(function(e){return t.onBlur(e)}))("change",(function(e){return t.onChange(e)}))("focus",(function(e){return t.onFocus(e)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](3,"\n\n"),i["\u0275\u0275elementContainerEnd"](),i["\u0275\u0275text"](4,"\n")),2&e&&(i["\u0275\u0275property"]("formGroup",t.group),i["\u0275\u0275advance"](2),i["\u0275\u0275classProp"]("is-invalid",t.showErrorMessages),i["\u0275\u0275property"]("cols",t.model.cols)("formControlName",t.model.id)("id",t.id)("maxlength",t.model.maxLength)("minlength",t.model.minLength)("name",t.model.name)("ngClass",t.getClass("element","control"))("placeholder",t.model.placeholder)("readonly",t.model.readOnly)("required",t.model.required)("rows",t.model.rows)("spellcheck",t.model.spellCheck)("tabindex",t.model.tabIndex)("wrap",t.model.wrap))},directives:[o.NgControlStatusGroup,o.FormGroupDirective,o.DefaultValueAccessor,o.NgControlStatus,o.FormControlName,o.MaxLengthValidator,o.MinLengthValidator,a.m,o.RequiredValidator],encapsulation:2}),e})(),w=(()=>{class e extends s.z{constructor(e,t,n){super(e,t),this.layoutService=e,this.validationService=t,this.config=n,this.blur=new i.EventEmitter,this.change=new i.EventEmitter,this.focus=new i.EventEmitter}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](s.E),i["\u0275\u0275directiveInject"](s.H),i["\u0275\u0275directiveInject"](r.M))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["dynamic-ng-bootstrap-timepicker"]],viewQuery:function(e,t){if(1&e&&i["\u0275\u0275viewQuery"](r.L,3),2&e){let e;i["\u0275\u0275queryRefresh"](e=i["\u0275\u0275loadQuery"]())&&(t.ngbTimePicker=e.first)}},inputs:{formLayout:"formLayout",group:"group",layout:"layout",model:"model"},outputs:{blur:"blur",change:"change",focus:"focus"},features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:5,vars:11,consts:[[3,"formGroup"],[3,"id","formControlName","hourStep","meridian","minuteStep","ngClass","seconds","secondStep","size","spinners"]],template:function(e,t){1&e&&(i["\u0275\u0275elementContainerStart"](0,0),i["\u0275\u0275text"](1,"\n\n    "),i["\u0275\u0275element"](2,"ngb-timepicker",1),i["\u0275\u0275text"](3,"\n\n"),i["\u0275\u0275elementContainerEnd"](),i["\u0275\u0275text"](4,"\n")),2&e&&(i["\u0275\u0275property"]("formGroup",t.group),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("id",t.id)("formControlName",t.model.id)("hourStep",t.model.getAdditional("hourStep",t.config.hourStep))("meridian",t.model.meridian)("minuteStep",t.model.getAdditional("minuteStep",t.config.minuteStep))("ngClass",t.getClass("element","control"))("seconds",t.model.showSeconds)("secondStep",t.model.getAdditional("secondStep",t.config.secondStep))("size",t.model.getAdditional("size",t.config.size))("spinners",t.model.getAdditional("spinners",t.config.spinners)))},directives:[o.NgControlStatusGroup,o.FormGroupDirective,r.L,o.NgControlStatus,o.FormControlName,a.m],encapsulation:2,changeDetection:0}),e})(),j=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[a.c,o.ReactiveFormsModule,r.e,r.i,r.K,r.N,l.TextMaskModule,s.I],s.I]}),e})()},"sw+l":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("fXoL"),o=n("e+Av"),r=n("sYmb");let s=(()=>{class e extends o.z{constructor(e,t){super(e,t),this.layoutService=e,this.validationService=t,this.modelValuesString="",this.blur=new i.EventEmitter,this.change=new i.EventEmitter,this.focus=new i.EventEmitter}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](o.E),i["\u0275\u0275directiveInject"](o.H))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-dynamic-disabled"]],inputs:{formId:"formId",group:"group",model:"model"},outputs:{blur:"blur",change:"change",focus:"focus"},features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:12,vars:11,consts:[[1,"form-row","align-items-center"],[1,"col"],[1,"form-control",3,"id","name","value","disabled","type","placeholder","readonly"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275text"](1,"\n    "),i["\u0275\u0275elementStart"](2,"div",0),i["\u0275\u0275text"](3,"\n        "),i["\u0275\u0275elementStart"](4,"div",1),i["\u0275\u0275text"](5,"\n          "),i["\u0275\u0275element"](6,"input",2),i["\u0275\u0275pipe"](7,"translate"),i["\u0275\u0275text"](8,"\n        "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](9,"\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](10,"\n"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](11,"\n")),2&e&&(i["\u0275\u0275advance"](6),i["\u0275\u0275classProp"]("is-invalid",t.showErrorMessages),i["\u0275\u0275property"]("id",t.id)("name",t.model.name)("value",t.modelValuesString)("disabled",t.model.disabled)("type",t.model.inputType)("placeholder",i["\u0275\u0275pipeBind1"](7,9,t.model.placeholder))("readonly",t.model.readOnly))},pipes:[r.d],encapsulation:2}),e})()},tqJZ:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("fXoL"),o=n("e+Av");const r=function(e,t){return[e,t]};function s(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"ds-dynamic-form-control-container",3),i["\u0275\u0275listener"]("dfBlur",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().onBlur(t)}))("dfChange",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().onChange(t)}))("dfFocus",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().onFocus(t)}))("ngbEvent",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().onCustomEvent(t,null,!0)})),i["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("group",n.control)("hasErrorMessaging",n.model.hasErrorMessages)("hidden",e.hidden)("layout",n.formLayout)("model",e)("templates",n.templates)("ngClass",i["\u0275\u0275pureFunction2"](7,r,n.getClass("element","host",e),n.getClass("grid","host",e)))}}let a=(()=>{class e extends o.z{constructor(e,t){super(e,t),this.layoutService=e,this.validationService=t,this.blur=new i.EventEmitter,this.change=new i.EventEmitter,this.focus=new i.EventEmitter,this.customEvent=new i.EventEmitter}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](o.E),i["\u0275\u0275directiveInject"](o.H))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-dynamic-form-group"]],inputs:{formLayout:"formLayout",group:"group",layout:"layout",model:"model",templates:"templates"},outputs:{blur:"dfBlur",change:"dfChange",focus:"dfFocus",customEvent:"ngbEvent"},features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:8,vars:5,consts:[[3,"formGroup"],["role","group",3,"formGroupName","id","ngClass"],[3,"group","hasErrorMessaging","hidden","layout","model","templates","ngClass","dfBlur","dfChange","dfFocus","ngbEvent",4,"ngFor","ngForOf"],[3,"group","hasErrorMessaging","hidden","layout","model","templates","ngClass","dfBlur","dfChange","dfFocus","ngbEvent"]],template:function(e,t){1&e&&(i["\u0275\u0275elementContainerStart"](0,0),i["\u0275\u0275text"](1,"\n\n  "),i["\u0275\u0275elementStart"](2,"div",1),i["\u0275\u0275text"](3,"\n\n    "),i["\u0275\u0275template"](4,s,1,10,"ds-dynamic-form-control-container",2),i["\u0275\u0275text"](5,"\n  "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](6,"\n"),i["\u0275\u0275elementContainerEnd"](),i["\u0275\u0275text"](7,"\n")),2&e&&(i["\u0275\u0275property"]("formGroup",t.group),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("formGroupName",t.model.id)("id",t.id)("ngClass",t.getClass("element","control")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",t.model.group))},encapsulation:2}),e})()},uyTL:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i=n("fXoL"),o=n("1kSV"),r=n("e+Av"),s=n("3Pt+"),a=n("ofXK");function l(e,t){if(1&e&&i["\u0275\u0275element"](0,"i",7),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275classMap"](e.model.toggleIcon)}}function c(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"span"),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](e.model.toggleLabel)}}let d=(()=>{class e extends r.z{constructor(e,t,n){super(e,t),this.layoutService=e,this.validationService=t,this.config=n,this.bindId=!0,this.blur=new i.EventEmitter,this.change=new i.EventEmitter,this.focus=new i.EventEmitter}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](r.E),i["\u0275\u0275directiveInject"](r.H),i["\u0275\u0275directiveInject"](o.h))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-dynamic-date-picker-inline"]],viewQuery:function(e,t){if(1&e&&i["\u0275\u0275viewQuery"](o.g,1),2&e){let e;i["\u0275\u0275queryRefresh"](e=i["\u0275\u0275loadQuery"]())&&(t.ngbDatePicker=e.first)}},inputs:{bindId:"bindId",group:"group",layout:"layout",model:"model"},outputs:{blur:"blur",change:"change",focus:"focus"},features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:16,vars:25,consts:[[1,"input-group",3,"formGroup"],["ngbDatepicker","",1,"form-control",3,"displayMonths","id","firstDayOfWeek","formControlName","maxDate","minDate","name","navigation","ngClass","outsideDays","placeholder","placement","showWeekdays","showWeekNumbers","startDate","blur","dateSelect","change","focus"],["datepicker","ngbDatepicker"],[1,"input-group-append"],["type","button",1,"btn","btn-outline-secondary",3,"disabled","click"],["aria-hidden","true",3,"class",4,"ngIf"],[4,"ngIf"],["aria-hidden","true"]],template:function(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275text"](1,"\n\n    "),i["\u0275\u0275elementStart"](2,"input",1,2),i["\u0275\u0275listener"]("blur",(function(e){return t.onBlur(e)}))("dateSelect",(function(e){return t.onChange(e)}))("change",(function(e){return t.onChange(e)}))("focus",(function(e){return t.onFocus(e)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](4,"\n\n    "),i["\u0275\u0275elementStart"](5,"div",3),i["\u0275\u0275text"](6,"\n\n        "),i["\u0275\u0275elementStart"](7,"button",4),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275reference"](3).toggle()})),i["\u0275\u0275text"](8,"\n\n            "),i["\u0275\u0275template"](9,l,1,3,"i",5),i["\u0275\u0275text"](10,"\n            "),i["\u0275\u0275template"](11,c,2,1,"span",6),i["\u0275\u0275text"](12,"\n\n        "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](13,"\n\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](14,"\n\n"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](15,"\n")}2&e&&(i["\u0275\u0275property"]("formGroup",t.group),i["\u0275\u0275advance"](2),i["\u0275\u0275classProp"]("is-invalid",t.showErrorMessages),i["\u0275\u0275property"]("displayMonths",t.model.getAdditional("displayMonths",t.config.displayMonths))("id",t.id)("firstDayOfWeek",t.model.getAdditional("firstDayOfWeek",t.config.firstDayOfWeek))("formControlName",t.model.id)("maxDate",t.model.max)("minDate",t.model.min)("name",t.model.name)("navigation",t.model.getAdditional("navigation",t.config.navigation))("ngClass",t.getClass("element","control"))("outsideDays",t.model.getAdditional("outsideDays",t.config.outsideDays))("placeholder",t.model.placeholder)("placement",t.model.getAdditional("placement","bottom-left"))("showWeekdays",t.model.getAdditional("showWeekdays",t.config.showWeekdays))("showWeekNumbers",t.model.getAdditional("showWeekNumbers",t.config.showWeekNumbers))("startDate",t.model.focusedDate),i["\u0275\u0275attribute"]("aria-labelledby","label_"+t.model.id),i["\u0275\u0275advance"](5),i["\u0275\u0275classProp"]("disabled",t.model.disabled),i["\u0275\u0275property"]("disabled",t.model.disabled),i["\u0275\u0275attribute"]("aria-labelledby","label_"+t.model.id),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",t.model.toggleIcon),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",t.model.toggleLabel))},directives:[s.NgControlStatusGroup,s.FormGroupDirective,o.p,s.DefaultValueAccessor,s.NgControlStatus,s.FormControlName,a.m,a.p],encapsulation:2}),e})()},xjoE:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("fXoL"),o=n("n7Wa"),r=n("e+Av"),s=n("3Pt+"),a=n("ofXK");const l=function(e,t){return[e,t]};let c=(()=>{class e extends o.c{constructor(e,t){super(e,t),this.bindId=!0,this.selected=new i.EventEmitter,this.remove=new i.EventEmitter,this.blur=new i.EventEmitter,this.change=new i.EventEmitter,this.focus=new i.EventEmitter}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](r.E),i["\u0275\u0275directiveInject"](r.H))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-custom-switch"]],inputs:{bindId:"bindId",group:"group",model:"model"},outputs:{selected:"selected",remove:"remove",blur:"blur",change:"change",focus:"focus"},features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:10,vars:20,consts:[[1,"form-check","custom-control","custom-switch",3,"formGroup"],["type","checkbox",1,"form-check-input","custom-control-input",3,"checked","id","formControlName","indeterminate","name","ngClass","required","tabindex","value","blur","change","focus"],[1,"form-check-label","custom-control-label",3,"for"],[3,"innerHTML","ngClass"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275text"](1,"\n  "),i["\u0275\u0275elementStart"](2,"input",1),i["\u0275\u0275listener"]("blur",(function(e){return t.onBlur(e)}))("change",(function(e){return t.onChange(e)}))("focus",(function(e){return t.onFocus(e)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](3,"\n  "),i["\u0275\u0275elementStart"](4,"label",2),i["\u0275\u0275text"](5,"\n    "),i["\u0275\u0275element"](6,"span",3),i["\u0275\u0275text"](7,"\n  "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](8,"\n"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](9,"\n")),2&e&&(i["\u0275\u0275classProp"]("disabled",t.model.disabled),i["\u0275\u0275property"]("formGroup",t.group),i["\u0275\u0275advance"](2),i["\u0275\u0275classProp"]("is-invalid",t.showErrorMessages),i["\u0275\u0275property"]("checked",t.model.checked)("id",t.id)("formControlName",t.model.id)("indeterminate",t.model.indeterminate)("name",t.model.name)("ngClass",t.getClass("element","control"))("required",t.model.required)("tabindex",t.model.tabIndex)("value",t.model.value),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("for",t.bindId&&t.model.id),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("innerHTML",t.model.label,i["\u0275\u0275sanitizeHtml"])("ngClass",i["\u0275\u0275pureFunction2"](17,l,t.getClass("element","label"),t.getClass("grid","label"))))},directives:[s.NgControlStatusGroup,s.FormGroupDirective,s.CheckboxControlValueAccessor,s.CheckboxRequiredValidator,s.NgControlStatus,s.FormControlName,a.m],styles:[""]}),e})()},yXJd:function(e,t,n){"use strict";n.d(t,"b",(function(){return C})),n.d(t,"a",(function(){return I}));var i=n("fXoL"),o=n("2Vo4"),r=n("pLZG"),s=n("IzEk"),a=n("naZE"),l=n("1QIV"),c=n("J3qs"),d=n("4SI6"),p=n("XcME"),u=n("EGek"),m=n("l7P3"),h=n("J/vq"),f=n("ofXK"),g=n("Frqi"),b=n("Ytjd"),v=n("sYmb");function x(e,t){1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275text"](1,"\n            "),i["\u0275\u0275element"](2,"ds-loading",5),i["\u0275\u0275text"](3,"\n        "),i["\u0275\u0275elementContainerEnd"]()),2&e&&(i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("showMessage",!1))}function y(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275text"](1,"\n            "),i["\u0275\u0275element"](2,"ds-metadata-representation-loader",6),i["\u0275\u0275pipe"](3,"async"),i["\u0275\u0275text"](4,"\n        "),i["\u0275\u0275elementContainerEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("mdRepresentation",i["\u0275\u0275pipeBind1"](3,1,e.metadataRepresentation$))}}class C extends class{constructor(e,t){this.oldIndex=e,this.newIndex=t}update(){this.oldIndex=this.newIndex}get hasMoved(){return this.oldIndex!==this.newIndex}}{constructor(e,t,n,i,o,r,s){super(r,s),this.relationship=e,this.useLeftItem=t,this.relationshipService=n,this.store=i,this.submissionID=o,this.relationship=e,this.useLeftItem=t}getId(){return this.relationship.id}getPlace(){return this.useLeftItem?this.relationship.rightPlace:this.relationship.leftPlace}}let I=(()=>{class e{constructor(e,t,n){this.selectableListService=e,this.store=t,this.submissionService=n,this.metadataRepresentation$=new o.a(void 0),this.remove=new i.EventEmitter,this.subs=[]}ngOnInit(){this.ngOnChanges()}ngOnChanges(){Object(c.b)(this.reoRel)&&this.subs.push((this.reoRel.useLeftItem?this.reoRel.relationship.leftItem:this.reoRel.relationship.rightItem).pipe(Object(l.c)(),Object(l.o)(),Object(r.a)(e=>Object(c.b)(e)&&Object(c.e)(e.uuid))).subscribe(e=>{this.relatedItem=e;const t=this.submissionItem.firstMetadata(this.relationshipOptions.metadataField,{value:this.relatedItem.uuid});if(Object(c.b)(t)){const e=this.submissionItem.firstMetadata(this.metadataFields,{authority:t.authority}),n=Object.assign(new a.a(e),this.relatedItem);this.metadataRepresentation$.next(n)}}))}removeSelection(){this.submissionService.dispatchSave(this.submissionId),this.submissionService.getSubmissionObject(this.submissionId).pipe(Object(r.a)(e=>!e.savePending&&!e.isLoading),Object(s.a)(1)).subscribe(()=>{this.selectableListService.deselectSingle(this.listId,Object.assign(new d.a,{indexableObject:this.relatedItem})),this.store.dispatch(new p.c(this.submissionItem,this.relatedItem,this.relationshipOptions.relationshipType,this.submissionId)),this.remove.emit()})}ngOnDestroy(){this.subs.filter(e=>Object(c.b)(e)).forEach(e=>e.unsubscribe())}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](u.a),i["\u0275\u0275directiveInject"](m.i),i["\u0275\u0275directiveInject"](h.a))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-existing-metadata-list-element"]],inputs:{listId:"listId",submissionItem:"submissionItem",reoRel:"reoRel",metadataFields:"metadataFields",relationshipOptions:"relationshipOptions",submissionId:"submissionId"},outputs:{remove:"remove"},features:[i["\u0275\u0275NgOnChangesFeature"]],decls:18,vars:9,consts:[[1,"d-flex"],[1,"mr-auto","text-contents"],[4,"ngIf"],["type","button",1,"btn","btn-secondary",3,"title","click"],["aria-hidden","true",1,"fas","fa-trash"],[3,"showMessage"],[3,"mdRepresentation"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275text"](1,"\n    "),i["\u0275\u0275elementStart"](2,"span",1),i["\u0275\u0275text"](3,"\n        "),i["\u0275\u0275template"](4,x,4,1,"ng-container",2),i["\u0275\u0275pipe"](5,"async"),i["\u0275\u0275text"](6,"\n        "),i["\u0275\u0275template"](7,y,5,3,"ng-container",2),i["\u0275\u0275pipe"](8,"async"),i["\u0275\u0275text"](9,"\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](10,"\n    "),i["\u0275\u0275elementStart"](11,"button",3),i["\u0275\u0275listener"]("click",(function(){return t.removeSelection()})),i["\u0275\u0275pipe"](12,"translate"),i["\u0275\u0275text"](13,"\n        "),i["\u0275\u0275element"](14,"i",4),i["\u0275\u0275text"](15,"\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](16,"\n"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](17,"\n")),2&e&&(i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("ngIf",!i["\u0275\u0275pipeBind1"](5,3,t.metadataRepresentation$)),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",i["\u0275\u0275pipeBind1"](8,5,t.metadataRepresentation$)),i["\u0275\u0275advance"](4),i["\u0275\u0275propertyInterpolate"]("title",i["\u0275\u0275pipeBind1"](12,7,"form.remove")))},directives:[f.p,g.a,b.a],pipes:[f.b,v.d],styles:["span.text-contents[_ngcontent-%COMP%]{padding:var(--bs-btn-padding-y) 0}"]}),e})()},zGzN:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var i=n("fXoL"),o=n("/eM4"),r=n("R7cy"),s=n("84tU"),a=n("ynxc"),l=n("7DXY"),c=n("1QIV"),d=n("eIep"),p=n("IzEk"),u=n("4SI6"),m=n("6c/T"),h=n("1kSV"),f=n("OAtg"),g=n("EGek"),b=n("iqTE"),v=n("lI3o"),x=n("sYmb"),y=n("ofXK"),C=n("JYDz");function I(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275elementStart"](1,"a",17),i["\u0275\u0275text"](2),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275propertyInterpolate"]("href",e.uri.value,i["\u0275\u0275sanitizeUrl"]),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](e.uri.value)}}const O=function(e){return{repeatable:!1,listId:e}};function E(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"ds-search-results",18),i["\u0275\u0275listener"]("deselectObject",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().deselectEntity()}))("selectObject",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().selectEntity(t)})),i["\u0275\u0275pipe"](1,"async"),i["\u0275\u0275text"](2,"\n    "),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("searchResults",i["\u0275\u0275pipeBind1"](1,9,e.localEntitiesRD$))("sortConfig",null==e.lookupRelationService.searchConfig?null:e.lookupRelationService.searchConfig.sort)("searchConfig",e.lookupRelationService.searchConfig)("selectable",!0)("disableHeader",!0)("hidePaginationDetail",!0)("selectionConfig",i["\u0275\u0275pureFunction1"](11,O,e.entityListId))("linkType",e.linkTypes.ExternalLink)("context",e.context)}}function S(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",19),i["\u0275\u0275text"](1,"\n    "),i["\u0275\u0275elementStart"](2,"h5",8),i["\u0275\u0275text"](3),i["\u0275\u0275pipe"](4,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](5,"\n\n    "),i["\u0275\u0275elementStart"](6,"div",10),i["\u0275\u0275text"](7,"\n      "),i["\u0275\u0275elementStart"](8,"input",20),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"]().selectNewAuthority()})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](9,"\n      "),i["\u0275\u0275elementStart"](10,"label",21),i["\u0275\u0275text"](11),i["\u0275\u0275pipe"](12,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](13,"\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](14,"\n  "),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](4,3,e.labelPrefix+"authority")),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("checked",e.selectedImportType===e.importType.NewAuthority),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](12,5,e.labelPrefix+"authority.new"))}}var w=function(e){return e.None="None",e.LocalEntity="LocalEntity",e.LocalAuthority="LocalAuthority",e.NewEntity="NewEntity",e.NewAuthority="NewAuthority",e}({});let j=(()=>{class e{constructor(e,t,n,o,r,l,c){this.modal=e,this.lookupRelationService=t,this.modalService=n,this.selectService=o,this.itemService=r,this.notificationsService=l,this.translateService=c,this.labelPrefix="submission.sections.describe.relationship-lookup.external-source.import-modal.",this.linkTypes=s.a,this.context=a.a.EntitySearchModalWithNameVariants,this.entityListId="external-source-import-entity",this.authorityListId="external-source-import-authority",this.importType=w,this.selectedImportType=w.None,this.importedObject=new i.EventEmitter,this.authorityEnabled=!1}ngOnInit(){this.uri=o.a.first(this.externalSourceEntry.metadata,"dc.identifier.uri");const e=Object.assign(new l.a,{id:"external-entry-import",pageSize:5});this.searchOptions=Object.assign(new r.a({query:this.externalSourceEntry.value,pagination:e})),this.localEntitiesRD$=this.lookupRelationService.getLocalResults(this.relationship,this.searchOptions)}close(){this.modal.close()}import(){switch(this.selectedImportType){case w.LocalEntity:this.importLocalEntity();break;case w.NewEntity:this.importNewEntity();break;case w.LocalAuthority:this.importLocalAuthority();break;case w.NewAuthority:this.importNewAuthority()}this.selectedImportType=w.None,this.deselectAllLists(),this.close()}importLocalEntity(){void 0!==this.selectedEntity&&(this.notificationsService.success(this.translateService.get(this.labelPrefix+this.label+".added.local-entity")),this.importedObject.emit(this.selectedEntity))}importNewEntity(){this.modalRef=this.modalService.open(m.a,{size:"lg"}),this.modalRef.componentInstance.entityType=this.relatedEntityType.label,this.modalRef.componentInstance.selectedEvent.pipe(Object(d.a)(e=>this.itemService.importExternalSourceEntry(this.externalSourceEntry,e.collection.id).pipe(Object(c.i)(),Object(c.o)(),Object(p.a)(1)))).subscribe(e=>{this.lookupRelationService.removeLocalResultsCache();const t=Object.assign(new u.a,{indexableObject:e});this.notificationsService.success(this.translateService.get(this.labelPrefix+this.label+".added.new-entity")),this.modalRef.close(),this.importedObject.emit(t)})}importLocalAuthority(){}importNewAuthority(){}deselectEntity(){this.selectedEntity=void 0,this.selectedImportType===w.LocalEntity&&(this.selectedImportType=w.None)}selectEntity(e){this.selectedEntity=e,this.selectedImportType=w.LocalEntity}selectNewEntity(){this.selectedImportType===w.NewEntity?this.selectedImportType=w.None:(this.selectedImportType=w.NewEntity,this.deselectAllLists())}deselectAuthority(){this.selectedAuthority=void 0,this.selectedImportType===w.LocalAuthority&&(this.selectedImportType=w.None)}selectAuthority(e){this.selectedAuthority=e,this.selectedImportType=w.LocalAuthority}selectNewAuthority(){this.selectedImportType===w.NewAuthority?this.selectedImportType=w.None:(this.selectedImportType=w.NewAuthority,this.deselectAllLists())}deselectAllLists(){this.selectService.deselectAll(this.entityListId),this.selectService.deselectAll(this.authorityListId)}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](h.c),i["\u0275\u0275directiveInject"](f.a),i["\u0275\u0275directiveInject"](h.q),i["\u0275\u0275directiveInject"](g.a),i["\u0275\u0275directiveInject"](b.a),i["\u0275\u0275directiveInject"](v.a),i["\u0275\u0275directiveInject"](x.e))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-external-source-entry-import-modal"]],decls:71,vars:29,consts:[[1,"modal-header"],["id","modal-title",1,"modal-title"],["type","button","aria-label","Close button","aria-describedby","modal-title",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],["id","external-source-entry-information",1,"mb-3"],[4,"ngIf"],["id","external-source-entry-entities",1,"mb-3"],[1,"font-weight-bold"],[3,"searchResults","sortConfig","searchConfig","selectable","disableHeader","hidePaginationDetail","selectionConfig","linkType","context","deselectObject","selectObject",4,"ngIf"],[1,"ml-4"],["type","radio","name","new-entity","id","new-entity","value","new-entity",1,"form-check-input",3,"checked","click"],["for","new-entity",1,"form-check-label"],["id","external-source-entry-authority",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"disabled","click"],[3,"href"],[3,"searchResults","sortConfig","searchConfig","selectable","disableHeader","hidePaginationDetail","selectionConfig","linkType","context","deselectObject","selectObject"],["id","external-source-entry-authority"],["type","radio","name","new-authority","id","new-authority","value","new-authority",1,"form-check-input",3,"checked","click"],["for","new-authority",1,"form-check-label"]],template:function(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275text"](1,"\n  "),i["\u0275\u0275elementStart"](2,"h4",1),i["\u0275\u0275text"](3),i["\u0275\u0275pipe"](4,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](5,"\n  "),i["\u0275\u0275elementStart"](6,"button",2),i["\u0275\u0275listener"]("click",(function(){return t.modal.dismiss()})),i["\u0275\u0275text"](7,"\n    "),i["\u0275\u0275elementStart"](8,"span",3),i["\u0275\u0275text"](9,"\xd7"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](10,"\n  "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](11,"\n"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](12,"\n"),i["\u0275\u0275elementStart"](13,"div",4),i["\u0275\u0275text"](14,"\n  "),i["\u0275\u0275elementStart"](15,"h4"),i["\u0275\u0275text"](16),i["\u0275\u0275pipe"](17,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](18,"\n  "),i["\u0275\u0275elementStart"](19,"div",5),i["\u0275\u0275text"](20,"\n    "),i["\u0275\u0275elementStart"](21,"div"),i["\u0275\u0275elementStart"](22,"span"),i["\u0275\u0275text"](23),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](24,"\n    "),i["\u0275\u0275template"](25,I,3,2,"div",6),i["\u0275\u0275text"](26,"\n  "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](27,"\n\n  "),i["\u0275\u0275elementStart"](28,"h4"),i["\u0275\u0275text"](29),i["\u0275\u0275pipe"](30,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](31,"\n\n  "),i["\u0275\u0275elementStart"](32,"div",7),i["\u0275\u0275text"](33,"\n    "),i["\u0275\u0275elementStart"](34,"h5",8),i["\u0275\u0275text"](35),i["\u0275\u0275pipe"](36,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](37,"\n\n    "),i["\u0275\u0275template"](38,E,3,13,"ds-search-results",9),i["\u0275\u0275pipe"](39,"async"),i["\u0275\u0275text"](40,"\n    "),i["\u0275\u0275elementStart"](41,"div",10),i["\u0275\u0275text"](42,"\n      "),i["\u0275\u0275elementStart"](43,"input",11),i["\u0275\u0275listener"]("click",(function(){return t.selectNewEntity()})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](44,"\n      "),i["\u0275\u0275elementStart"](45,"label",12),i["\u0275\u0275text"](46),i["\u0275\u0275pipe"](47,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](48,"\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](49,"\n  "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](50,"\n  "),i["\u0275\u0275template"](51,S,15,7,"div",13),i["\u0275\u0275text"](52,"\n"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](53,"\n"),i["\u0275\u0275elementStart"](54,"div",14),i["\u0275\u0275text"](55,"\n  "),i["\u0275\u0275elementStart"](56,"div"),i["\u0275\u0275text"](57,"\n    "),i["\u0275\u0275elementStart"](58,"button",15),i["\u0275\u0275listener"]("click",(function(){return t.close()})),i["\u0275\u0275text"](59),i["\u0275\u0275pipe"](60,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](61,"\n  "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](62,"\n  "),i["\u0275\u0275elementStart"](63,"div"),i["\u0275\u0275text"](64,"\n    "),i["\u0275\u0275elementStart"](65,"button",16),i["\u0275\u0275listener"]("click",(function(){return t.import()})),i["\u0275\u0275text"](66),i["\u0275\u0275pipe"](67,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](68,"\n  "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](69,"\n"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](70,"\n")),2&e){let e=null;i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](4,13,t.labelPrefix+t.label+".title")),i["\u0275\u0275advance"](13),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](17,15,t.labelPrefix+"head."+t.externalSourceEntry.externalSource)),i["\u0275\u0275advance"](7),i["\u0275\u0275textInterpolate"](t.externalSourceEntry.display),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",t.uri),i["\u0275\u0275advance"](4),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](30,17,t.labelPrefix+"select")),i["\u0275\u0275advance"](6),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](36,19,t.labelPrefix+"entities")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",(null==(e=i["\u0275\u0275pipeBind1"](39,21,t.localEntitiesRD$))||null==e.payload||null==e.payload.page?null:e.payload.page.length)>0),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("checked",t.selectedImportType===t.importType.NewEntity),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](47,23,t.labelPrefix+"entities.new")),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngIf",t.authorityEnabled),i["\u0275\u0275advance"](8),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](60,25,t.labelPrefix+"cancel")),i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("disabled",t.selectedImportType===t.importType.None),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](67,27,t.labelPrefix+"import"))}},directives:[y.p,C.a],pipes:[x.d,y.b],styles:[".modal-footer[_ngcontent-%COMP%]{-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}"]}),e})()},zVKZ:function(e,t,n){"use strict";n.d(t,"a",(function(){return _}));var i=n("fXoL"),o=n("dtp9"),r=n("joI/"),s=n("lJxs"),a=n("eIep"),l=n("JX91"),c=n("mEo1"),d=n("7DXY"),p=n("zGzN"),u=n("J3qs"),m=n("1QIV"),h=n("tyNb"),f=n("dHui"),g=n("1kSV"),b=n("EGek"),v=n("MFUF"),x=n("pKvA"),y=n("DdXh"),C=n("O/5o"),I=n("ofXK"),O=n("jLV+"),E=n("Frqi"),S=n("HZwm"),w=n("sYmb");const j=function(e,t){return{repeatable:e,listId:t}};function k(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"ds-viewable-collection",8),i["\u0275\u0275listener"]("importObject",(function(t){return i["\u0275\u0275restoreView"](e),i["\u0275\u0275nextContext"](2).import(t)})),i["\u0275\u0275pipe"](1,"async"),i["\u0275\u0275text"](2,"\n        "),i["\u0275\u0275elementEnd"]()}if(2&e){const e=i["\u0275\u0275nextContext"]().ngVar,t=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("@fadeIn",void 0)("objects",e)("selectionConfig",i["\u0275\u0275pureFunction2"](10,j,t.repeatable,t.listId))("config",i["\u0275\u0275pipeBind1"](1,8,t.currentPagination$))("hideGear",!0)("context",t.context)("importable",!0)("importConfig",t.importConfig)}}function M(e,t){1&e&&(i["\u0275\u0275element"](0,"ds-loading",9),i["\u0275\u0275pipe"](1,"translate")),2&e&&i["\u0275\u0275propertyInterpolate"]("message",i["\u0275\u0275pipeBind1"](1,1,"loading.search-results"))}function V(e,t){1&e&&(i["\u0275\u0275element"](0,"ds-error",9),i["\u0275\u0275pipe"](1,"translate")),2&e&&i["\u0275\u0275propertyInterpolate"]("message",i["\u0275\u0275pipeBind1"](1,1,"error.search-results"))}function P(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",10),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"]("\n          ",i["\u0275\u0275pipeBind1"](2,1,"search.results.empty"),"\n        "))}function F(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275text"](1,"\n        "),i["\u0275\u0275template"](2,k,3,13,"ds-viewable-collection",5),i["\u0275\u0275text"](3,"\n        "),i["\u0275\u0275template"](4,M,2,3,"ds-loading",6),i["\u0275\u0275text"](5,"\n        "),i["\u0275\u0275template"](6,V,2,3,"ds-error",6),i["\u0275\u0275text"](7,"\n        "),i["\u0275\u0275template"](8,P,3,3,"div",7),i["\u0275\u0275text"](9,"\n      "),i["\u0275\u0275elementContainerEnd"]()),2&e){const e=t.ngVar;i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",(null==e?null:e.hasSucceeded)&&!(null!=e&&e.isLoading)&&(null==e||null==e.payload||null==e.payload.page?null:e.payload.page.length)>0),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!e||(null==e?null:e.isLoading)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",(null==e?null:e.hasFailed)&&(!(null!=e&&e.errorMessage)||400!=(null==e?null:e.statusCode))),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",0==(null==e||null==e.payload||null==e.payload.page?null:e.payload.page.length)||400==(null==e?null:e.statusCode))}}let _=(()=>{class e{constructor(e,t,n,o,r,s){this.router=e,this.searchConfigService=t,this.externalSourceService=n,this.modalService=o,this.selectableListService=r,this.paginationService=s,this.importedObject=new i.EventEmitter,this.initialPagination=Object.assign(new d.a,{id:"spc",pageSize:5})}ngOnInit(){this.externalSource.entityTypes.pipe(Object(m.g)(),Object(s.a)(e=>e.hasSucceeded&&e.payload.totalElements>0?e.payload.page[0]:null)).subscribe(e=>{this.relatedEntityType=e}),this.resetRoute(),this.entriesRD$=this.searchConfigService.paginatedSearchOptions.pipe(Object(a.a)(e=>this.externalSourceService.getExternalSourceEntries(this.externalSource.id,e).pipe(Object(l.a)(void 0)))),this.currentPagination$=this.paginationService.getCurrentPagination(this.searchConfigService.paginationID,this.initialPagination),this.importConfig={buttonLabel:"submission.sections.describe.relationship-lookup.external-source.import-button-title."+this.label}}import(e){this.modalRef=this.modalService.open(p.a,{size:"lg",container:"ds-dynamic-lookup-relation-modal"});const t=this.modalRef.componentInstance;t.externalSourceEntry=e,t.item=this.item,t.collection=this.collection,t.relationship=this.relationship,t.label=this.label,t.relatedEntityType=this.relatedEntityType,this.importObjectSub=t.importedObject.subscribe(e=>{this.selectableListService.selectSingle(this.listId,e),this.importedObject.emit(e)})}ngOnDestroy(){Object(u.b)(this.importObjectSub)&&this.importObjectSub.unsubscribe()}resetRoute(){this.paginationService.updateRoute(this.searchConfigService.paginationID,{page:1,pageSize:5})}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](h.h),i["\u0275\u0275directiveInject"](r.a),i["\u0275\u0275directiveInject"](f.a),i["\u0275\u0275directiveInject"](g.q),i["\u0275\u0275directiveInject"](b.a),i["\u0275\u0275directiveInject"](v.a))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-dynamic-lookup-relation-external-source-tab"]],inputs:{label:"label",listId:"listId",item:"item",collection:"collection",relationship:"relationship",context:"context",repeatable:"repeatable",externalSource:"externalSource"},outputs:{importedObject:"importedObject"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:o.SEARCH_CONFIG_SERVICE,useClass:r.a}])],decls:30,vars:16,consts:[[1,"row"],[1,"col-4"],[1,"col-8"],[3,"query","inPlaceSearch","searchPlaceholder"],[4,"ngVar"],[3,"objects","selectionConfig","config","hideGear","context","importable","importConfig","importObject",4,"ngIf"],[3,"message",4,"ngIf"],["id","empty-external-entry-list",4,"ngIf"],[3,"objects","selectionConfig","config","hideGear","context","importable","importConfig","importObject"],[3,"message"],["id","empty-external-entry-list"]],template:function(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275text"](1,"\n  "),i["\u0275\u0275elementStart"](2,"div",1),i["\u0275\u0275text"](3,"\n    "),i["\u0275\u0275elementStart"](4,"h3"),i["\u0275\u0275text"](5),i["\u0275\u0275pipe"](6,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](7,"\n    "),i["\u0275\u0275element"](8,"ds-page-size-selector"),i["\u0275\u0275text"](9,"\n  "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](10,"\n  "),i["\u0275\u0275elementStart"](11,"div",2),i["\u0275\u0275text"](12,"\n    "),i["\u0275\u0275elementStart"](13,"ds-search-form",3),i["\u0275\u0275pipe"](14,"async"),i["\u0275\u0275pipe"](15,"translate"),i["\u0275\u0275text"](16,"\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](17,"\n    "),i["\u0275\u0275elementStart"](18,"div"),i["\u0275\u0275text"](19,"\n      "),i["\u0275\u0275elementStart"](20,"h3"),i["\u0275\u0275text"](21),i["\u0275\u0275pipe"](22,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](23,"\n      "),i["\u0275\u0275template"](24,F,10,4,"ng-container",4),i["\u0275\u0275pipe"](25,"async"),i["\u0275\u0275text"](26,"\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](27,"\n  "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](28,"\n"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](29,"\n")),2&e){let e=null;i["\u0275\u0275advance"](5),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](6,6,"submission.sections.describe.relationship-lookup.selection-tab.settings")),i["\u0275\u0275advance"](8),i["\u0275\u0275property"]("query",null==(e=i["\u0275\u0275pipeBind1"](14,8,t.searchConfigService.paginatedSearchOptions))?null:e.query)("inPlaceSearch",!0)("searchPlaceholder",i["\u0275\u0275pipeBind1"](15,10,"submission.sections.describe.relationship-lookup.selection-tab.search-form.placeholder")),i["\u0275\u0275advance"](8),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](22,12,"submission.sections.describe.relationship-lookup.selection-tab.title."+t.externalSource.id)),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngVar",i["\u0275\u0275pipeBind1"](25,14,t.entriesRD$))}},directives:[x.a,y.a,C.a,I.p,O.a,E.a,S.a],pipes:[w.d,I.b],styles:[""],data:{animation:[c.a,c.c]}}),e})()}}]);
//# sourceMappingURL=1-es2015.c55485a0b815b19369c5.js.map