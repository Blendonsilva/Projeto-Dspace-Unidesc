{"version":3,"sources":["webpack:///src/app/community-page/community-form/community-form.component.ts","webpack:///src/app/shared/comcol/comcol-forms/comcol-form/comcol-form.component.html","webpack:///src/app/core/data/feature-authorization/feature-authorization-guard/dso-page-single-feature.guard.ts","webpack:///src/app/community-page/sub-community-list/community-page-sub-community-list.component.ts","webpack:///src/app/community-page/sub-community-list/community-page-sub-community-list.component.html","webpack:///src/app/core/resolving/resolver.actions.ts","webpack:///src/app/core/breadcrumbs/dso-breadcrumbs.service.ts","webpack:///src/themes lazy ^\\.\\/.*\\/app\\/community\\-page\\/community\\-page\\.component$ namespace object","webpack:///src/app/core/data/feature-authorization/feature-authorization-guard/dso-page-some-feature.guard.ts","webpack:///src/app/community-page/sub-collection-list/community-page-sub-collection-list.component.ts","webpack:///src/app/community-page/sub-collection-list/community-page-sub-collection-list.component.html","webpack:///src/app/community-page/create-community-page/create-community-page.component.html","webpack:///src/app/community-page/create-community-page/create-community-page.component.ts","webpack:///src/app/community-page/create-community-page/create-community-page.guard.ts","webpack:///src/app/community-page/delete-community-page/delete-community-page.component.html","webpack:///src/app/community-page/delete-community-page/delete-community-page.component.ts","webpack:///src/app/core/breadcrumbs/community-breadcrumb.resolver.ts","webpack:///src/app/community-page/community-page-administrator.guard.ts","webpack:///src/app/community-page/themed-community-page.component.ts","webpack:///src/app/shared/theme-support/themed.component.html","webpack:///src/app/community-page/community-page-routing.module.ts","webpack:///src/app/community-page/community-page.module.ts","webpack:///src/app/community-page/community-page.component.ts","webpack:///src/app/community-page/community-page.component.html","webpack:///src/app/community-page/community-form/community-form.module.ts","webpack:///src/app/core/breadcrumbs/dso-breadcrumb.resolver.ts","webpack:///src/app/access-control/access-control-routing-paths.ts","webpack:///src/app/breadcrumbs/breadcrumb/breadcrumb.model.ts"],"names":["back","CommunityFormComponent","formService","translate","notificationsService","authService","dsoService","requestService","objectCache","super","dso","type","formModel","id","name","required","validators","errorMessages","DsoPageSingleFeatureGuard","getFeatureIDs","route","state","this","getFeatureID","pipe","featureID","CommunityPageSubCommunityListComponent","constructor","cds","paginationService","pageId","subCommunitiesRDObs","ngOnInit","config","pageSize","currentPage","sortConfig","ASC","initPage","pagination$","getCurrentPagination","sort$","getCurrentSort","currentPagination","currentSort","findByParent","community","elementsPerPage","sort","field","direction","subscribe","results","next","ngOnDestroy","clearPagination","ResolverActionTypes","RESOLVED","ResolvedAction","url","payload","DSOBreadcrumbsService","linkService","dsoNameService","getBreadcrumbs","key","label","getName","crumb","propertyName","getParentLinkKey","resolveLink","parentRD","hasSucceeded","statusCode","parent","breadcrumbs","map","webpackAsyncContext","req","__webpack_require__","o","Promise","resolve","then","e","Error","code","ids","keys","Object","module","exports","DsoPageSomeFeatureGuard","resolver","authorizationService","router","getObjectUrl","routeWithObjectID","getRouteWithDSOId","self","routeWithDSOId","params","CommunityPageSubCollectionListComponent","subCollectionsRDObs","CreateCommunityPageComponent","communityDataService","routeService","frontendURL","onSubmit","navigateToHome","navigateToNewPage","CreateCommunityPageGuard","communityService","canActivate","parentID","queryParams","findById","g","communityRD","tap","isValid","navigate","DeleteCommunityPageComponent","dsoDataService","notifications","CommunityBreadcrumbResolver","breadcrumbService","dataService","followLinks","CommunityPageAdministratorGuard","AdministratorOf","ThemedCommunityPageComponent","getComponentName","importThemedComponent","themeName","importUnthemedComponent","CommunityPageRoutingModule","forChild","path","component","breadcrumb","runGuardsAndResolvers","children","loadChildren","m","EditCommunityPageModule","pathMatch","data","menu","public","active","visible","model","LINK","text","link","CommunityPageModule","forRoot","CommunityPageComponent","metadata","authorizationDataService","communityRD$","logoRD$","rd","logo","communityPageRoute$","isCommunityAdmin$","isAuthorized","IsCommunityAdmin","CommunityFormModule","DSOBreadcrumbResolver","uuid","object","fullPath","substr","indexOf","provider","GROUP_EDIT_PATH","getGroupEditRoute","toString","Breadcrumb"],"mappings":"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","file":"x","sourcesContent":["import { Component, Input } from '@angular/core';\nimport {\n  DynamicFormControlModel,\n  DynamicFormService,\n  DynamicInputModel,\n  DynamicTextAreaModel\n} from '@ng-dynamic-forms/core';\nimport { Community } from '../../core/shared/community.model';\nimport { ComColFormComponent } from '../../shared/comcol/comcol-forms/comcol-form/comcol-form.component';\nimport { TranslateService } from '@ngx-translate/core';\nimport { NotificationsService } from '../../shared/notifications/notifications.service';\nimport { CommunityDataService } from '../../core/data/community-data.service';\nimport { AuthService } from '../../core/auth/auth.service';\nimport { RequestService } from '../../core/data/request.service';\nimport { ObjectCacheService } from '../../core/cache/object-cache.service';\n\n/**\n * Form used for creating and editing communities\n */\n@Component({\n  selector: 'ds-community-form',\n  styleUrls: ['../../shared/comcol/comcol-forms/comcol-form/comcol-form.component.scss'],\n  templateUrl: '../../shared/comcol/comcol-forms/comcol-form/comcol-form.component.html'\n})\nexport class CommunityFormComponent extends ComColFormComponent<Community> {\n  /**\n   * @type {Community} A new community when a community is being created, an existing Input community when a community is being edited\n   */\n  @Input() dso: Community = new Community();\n\n  /**\n   * @type {Community.type} This is a community-type form\n   */\n  type = Community.type;\n\n  /**\n   * The dynamic form fields used for creating/editing a community\n   * @type {(DynamicInputModel | DynamicTextAreaModel)[]}\n   */\n  formModel: DynamicFormControlModel[] = [\n    new DynamicInputModel({\n      id: 'title',\n      name: 'dc.title',\n      required: true,\n      validators: {\n        required: null\n      },\n      errorMessages: {\n        required: 'Please enter a name for this title'\n      },\n    }),\n    new DynamicTextAreaModel({\n      id: 'description',\n      name: 'dc.description',\n    }),\n    new DynamicTextAreaModel({\n      id: 'abstract',\n      name: 'dc.description.abstract',\n    }),\n    new DynamicTextAreaModel({\n      id: 'rights',\n      name: 'dc.rights',\n    }),\n    new DynamicTextAreaModel({\n      id: 'tableofcontents',\n      name: 'dc.description.tableofcontents',\n    }),\n  ];\n\n  public constructor(protected formService: DynamicFormService,\n                     protected translate: TranslateService,\n                     protected notificationsService: NotificationsService,\n                     protected authService: AuthService,\n                     protected dsoService: CommunityDataService,\n                     protected requestService: RequestService,\n                     protected objectCache: ObjectCacheService) {\n    super(formService, translate, notificationsService, authService, requestService, objectCache);\n  }\n}\n","<div class=\"container-fluid\">\n  <div class=\"row\">\n    <div class=\"col-12 d-inline-block\">\n      <label>{{type.value + '.edit.logo.label' | translate}}</label>\n    </div>\n    <ng-container *ngVar=\"(dso?.logo | async)?.payload as logo\">\n      <div class=\"col-12 d-inline-block alert\" [ngClass]=\"{'alert-danger': markLogoForDeletion}\" id=\"logo-section\" *ngIf=\"logo\">\n        <div class=\"row\">\n          <div class=\"col-8 d-inline-block\">\n            <ds-comcol-page-logo [logo]=\"logo\"></ds-comcol-page-logo>\n          </div>\n          <div class=\"col-4 d-inline-block\">\n            <div *ngIf=\"logo\" class=\"btn-group btn-group-sm float-right\" role=\"group\">\n              <button *ngIf=\"!markLogoForDeletion\" type=\"button\" class=\"btn btn-danger\"\n                      title=\"{{type.value + '.edit.logo.delete.title' | translate}}\"\n                      (click)=\"deleteLogo()\">\n                <i class=\"fas fa-trash\" aria-hidden=\"true\"></i>\n              </button>\n              <button *ngIf=\"markLogoForDeletion\" type=\"button\" class=\"btn btn-warning\"\n                      title=\"{{type.value + '.edit.logo.delete-undo.title' | translate}}\"\n                      (click)=\"undoDeleteLogo()\">\n                <i class=\"fas fa-undo\" aria-hidden=\"true\"></i>\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div *ngIf=\"!logo\" class=\"col-12 d-inline-block\">\n        <ds-uploader  *ngIf=\"initializedUploaderOptions | async\"\n                      [dropMsg]=\"type.value + '.edit.logo.upload'\"\n                      [dropOverDocumentMsg]=\"type.value + '.edit.logo.upload'\"\n                      [enableDragOverDocument]=\"true\"\n                      [uploadFilesOptions]=\"uploadFilesOptions\"\n                      (onCompleteItem)=\"onCompleteItem()\"\n                      (onUploadError)=\"onUploadError()\"></ds-uploader>\n      </div>\n    </ng-container>\n  </div>\n</div>\n<ds-form *ngIf=\"formModel\"\n         [formId]=\"'comcol-form-id'\"\n         [formModel]=\"formModel\"\n         [displayCancel]=\"false\"\n         (submitForm)=\"onSubmit()\">\n  <button before (click)=\"back.emit()\" class=\"btn btn-outline-secondary\">\n    <i class=\"fas fa-arrow-left\"></i> {{ type.value + '.edit.return' | translate }}\n  </button>\n</ds-form>\n","import { DSpaceObject } from '../../../shared/dspace-object.model';\nimport { DsoPageSomeFeatureGuard } from './dso-page-some-feature.guard';\nimport { ActivatedRouteSnapshot, RouterStateSnapshot } from '@angular/router';\nimport { FeatureID } from '../feature-id';\nimport { map } from 'rxjs/operators';\nimport { Observable } from 'rxjs';\n\n/**\n * Abstract Guard for preventing unauthorized access to {@link DSpaceObject} pages that require rights for a specific feature\n * This guard utilizes a resolver to retrieve the relevant object to check authorizations for\n */\nexport abstract class DsoPageSingleFeatureGuard<T extends DSpaceObject> extends DsoPageSomeFeatureGuard<T> {\n  /**\n   * The features to check authorization for\n   */\n  getFeatureIDs(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): Observable<FeatureID[]> {\n    return this.getFeatureID(route, state).pipe(\n      map((featureID) => [featureID]),\n    );\n  }\n\n  /**\n   * The type of feature to check authorization for\n   * Override this method to define a feature\n   */\n  abstract getFeatureID(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): Observable<FeatureID>;\n}\n","import { Component, Input, OnInit } from '@angular/core';\n\nimport { BehaviorSubject, combineLatest as observableCombineLatest } from 'rxjs';\n\nimport { RemoteData } from '../../core/data/remote-data';\nimport { Community } from '../../core/shared/community.model';\nimport { fadeIn } from '../../shared/animations/fade';\nimport { PaginatedList } from '../../core/data/paginated-list.model';\nimport { PaginationComponentOptions } from '../../shared/pagination/pagination-component-options.model';\nimport { SortDirection, SortOptions } from '../../core/cache/models/sort-options.model';\nimport { CommunityDataService } from '../../core/data/community-data.service';\nimport { takeUntilCompletedRemoteData } from '../../core/shared/operators';\nimport { switchMap } from 'rxjs/operators';\nimport { PaginationService } from '../../core/pagination/pagination.service';\n\n@Component({\n  selector: 'ds-community-page-sub-community-list',\n  styleUrls: ['./community-page-sub-community-list.component.scss'],\n  templateUrl: './community-page-sub-community-list.component.html',\n  animations: [fadeIn]\n})\n/**\n * Component to render the sub-communities of a Community\n */\nexport class CommunityPageSubCommunityListComponent implements OnInit {\n  @Input() community: Community;\n\n  /**\n   * The pagination configuration\n   */\n  config: PaginationComponentOptions;\n\n  /**\n   * The pagination id\n   */\n  pageId = 'cmscm';\n\n  /**\n   * The sorting configuration\n   */\n  sortConfig: SortOptions;\n\n  /**\n   * A list of remote data objects of communities' collections\n   */\n  subCommunitiesRDObs: BehaviorSubject<RemoteData<PaginatedList<Community>>> = new BehaviorSubject<RemoteData<PaginatedList<Community>>>({} as any);\n\n  constructor(private cds: CommunityDataService,\n              private paginationService: PaginationService\n  ) {\n  }\n\n  ngOnInit(): void {\n    this.config = new PaginationComponentOptions();\n    this.config.id = this.pageId;\n    this.config.pageSize = 5;\n    this.config.currentPage = 1;\n    this.sortConfig = new SortOptions('dc.title', SortDirection.ASC);\n    this.initPage();\n  }\n\n  /**\n   * Update the list of sub-communities\n   */\n  initPage() {\n    const pagination$ = this.paginationService.getCurrentPagination(this.config.id, this.config);\n    const sort$ = this.paginationService.getCurrentSort(this.config.id, this.sortConfig);\n\n    observableCombineLatest([pagination$, sort$]).pipe(\n      switchMap(([currentPagination, currentSort]) => {\n        return     this.cds.findByParent(this.community.id, {\n          currentPage: currentPagination.currentPage,\n          elementsPerPage: currentPagination.pageSize,\n          sort: { field: currentSort.field, direction: currentSort.direction }\n        });\n      })\n    ).subscribe((results) => {\n      this.subCommunitiesRDObs.next(results);\n    });\n\n\n    this.cds.findByParent(this.community.id, {\n      currentPage: this.config.currentPage,\n      elementsPerPage: this.config.pageSize,\n      sort: { field: this.sortConfig.field, direction: this.sortConfig.direction }\n    }).pipe(takeUntilCompletedRemoteData()).subscribe((results) => {\n      this.subCommunitiesRDObs.next(results);\n    });\n  }\n\n  ngOnDestroy(): void {\n    this.paginationService.clearPagination(this.config.id);\n  }\n\n}\n","<ng-container *ngVar=\"(subCommunitiesRDObs | async) as subCommunitiesRD\">\n  <div *ngIf=\"subCommunitiesRD?.hasSucceeded && subCommunitiesRD?.payload.totalElements > 0\" @fadeIn>\n    <h2>{{'community.sub-community-list.head' | translate}}</h2>\n    <ds-viewable-collection\n      [config]=\"config\"\n      [sortConfig]=\"sortConfig\"\n      [objects]=\"subCommunitiesRD\"\n      [hideGear]=\"false\">\n    </ds-viewable-collection>\n  </div>\n  <ds-error *ngIf=\"subCommunitiesRD?.hasFailed\" message=\"{{'error.sub-communities' | translate}}\"></ds-error>\n  <ds-loading *ngIf=\"subCommunitiesRD?.isLoading\" message=\"{{'loading.sub-communities' | translate}}\"></ds-loading>\n</ng-container>\n","import { type } from '../../shared/ngrx/type';\nimport { Action } from '@ngrx/store';\nimport { DSpaceObject } from '../shared/dspace-object.model';\n\nexport const ResolverActionTypes = {\n  RESOLVED: type('dspace/resolver/RESOLVED')\n};\n\n/**\n * An action that indicates a route object has been resolved.\n *\n * It isn't used in a reducer for now. Its purpose is to be able to be notified that an object\n * has been resolved in an effect.\n */\nexport class ResolvedAction implements Action {\n  type = ResolverActionTypes.RESOLVED;\n  payload: {\n    url: string,\n    dso: DSpaceObject\n  };\n\n  constructor(url: string, dso: DSpaceObject) {\n    this.payload = { url, dso };\n  }\n}\n\nexport type ResolverAction = ResolvedAction;\n","import { Breadcrumb } from '../../breadcrumbs/breadcrumb/breadcrumb.model';\nimport { BreadcrumbsProviderService } from './breadcrumbsProviderService';\nimport { DSONameService } from './dso-name.service';\nimport { Observable, of as observableOf } from 'rxjs';\nimport { ChildHALResource } from '../shared/child-hal-resource.model';\nimport { LinkService } from '../cache/builders/link.service';\nimport { DSpaceObject } from '../shared/dspace-object.model';\nimport { followLink } from '../../shared/utils/follow-link-config.model';\nimport { find, map, switchMap } from 'rxjs/operators';\nimport { RemoteData } from '../data/remote-data';\nimport { hasValue } from '../../shared/empty.util';\nimport { Injectable } from '@angular/core';\nimport { getDSORoute } from '../../app-routing-paths';\n\n/**\n * Service to calculate DSpaceObject breadcrumbs for a single part of the route\n */\n@Injectable({\n  providedIn: 'root'\n})\nexport class DSOBreadcrumbsService implements BreadcrumbsProviderService<ChildHALResource & DSpaceObject> {\n  constructor(\n    private linkService: LinkService,\n    private dsoNameService: DSONameService\n  ) {\n\n  }\n\n  /**\n   * Method to recursively calculate the breadcrumbs\n   * This method returns the name and url of the key and all its parent DSOs recursively, top down\n   * @param key The key (a DSpaceObject) used to resolve the breadcrumb\n   * @param url The url to use as a link for this breadcrumb\n   */\n  getBreadcrumbs(key: ChildHALResource & DSpaceObject, url: string): Observable<Breadcrumb[]> {\n    const label = this.dsoNameService.getName(key);\n    const crumb = new Breadcrumb(label, url);\n    const propertyName = key.getParentLinkKey();\n    return this.linkService.resolveLink(key, followLink(propertyName))[propertyName].pipe(\n      find((parentRD: RemoteData<ChildHALResource & DSpaceObject>) => parentRD.hasSucceeded || parentRD.statusCode === 204),\n      switchMap((parentRD: RemoteData<ChildHALResource & DSpaceObject>) => {\n        if (hasValue(parentRD.payload)) {\n          const parent = parentRD.payload;\n          return this.getBreadcrumbs(parent, getDSORoute(parent));\n        }\n        return observableOf([]);\n\n      }),\n      map((breadcrumbs: Breadcrumb[]) => [...breadcrumbs, crumb])\n    );\n  }\n}\n","var map = {\n\t\"./custom/app/community-page/community-page.component\": [\n\t\t\"6wZc\",\n\t\t48\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = \"GEFF\";\nmodule.exports = webpackAsyncContext;","import { ActivatedRouteSnapshot, Resolve, Router, RouterStateSnapshot } from '@angular/router';\nimport { RemoteData } from '../../remote-data';\nimport { AuthorizationDataService } from '../authorization-data.service';\nimport { Observable } from 'rxjs';\nimport { getAllSucceededRemoteDataPayload } from '../../../shared/operators';\nimport { map } from 'rxjs/operators';\nimport { DSpaceObject } from '../../../shared/dspace-object.model';\nimport { AuthService } from '../../../auth/auth.service';\nimport { hasNoValue, hasValue } from '../../../../shared/empty.util';\nimport { SomeFeatureAuthorizationGuard } from './some-feature-authorization.guard';\n\n/**\n * Abstract Guard for preventing unauthorized access to {@link DSpaceObject} pages that require rights for any specific feature in a list\n * This guard utilizes a resolver to retrieve the relevant object to check authorizations for\n */\nexport abstract class DsoPageSomeFeatureGuard<T extends DSpaceObject> extends SomeFeatureAuthorizationGuard {\n  constructor(protected resolver: Resolve<RemoteData<T>>,\n              protected authorizationService: AuthorizationDataService,\n              protected router: Router,\n              protected authService: AuthService) {\n    super(authorizationService, router, authService);\n  }\n\n  /**\n   * Check authorization rights for the object resolved using the provided resolver\n   */\n  getObjectUrl(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): Observable<string> {\n    const routeWithObjectID = this.getRouteWithDSOId(route);\n    return (this.resolver.resolve(routeWithObjectID, state) as Observable<RemoteData<T>>).pipe(\n      getAllSucceededRemoteDataPayload(),\n      map((dso) => dso.self)\n    );\n  }\n\n  /**\n   * Method to resolve resolve (parent) route that contains the UUID of the DSO\n   * @param route The current route\n   */\n  protected getRouteWithDSOId(route: ActivatedRouteSnapshot): ActivatedRouteSnapshot {\n    let routeWithDSOId = route;\n    while (hasNoValue(routeWithDSOId.params.id) && hasValue(routeWithDSOId.parent)) {\n      routeWithDSOId = routeWithDSOId.parent;\n    }\n    return routeWithDSOId;\n  }\n}\n","import { Component, Input, OnInit } from '@angular/core';\n\nimport { BehaviorSubject, combineLatest as observableCombineLatest } from 'rxjs';\n\nimport { RemoteData } from '../../core/data/remote-data';\nimport { Collection } from '../../core/shared/collection.model';\nimport { Community } from '../../core/shared/community.model';\nimport { fadeIn } from '../../shared/animations/fade';\nimport { PaginatedList } from '../../core/data/paginated-list.model';\nimport { PaginationComponentOptions } from '../../shared/pagination/pagination-component-options.model';\nimport { SortDirection, SortOptions } from '../../core/cache/models/sort-options.model';\nimport { CollectionDataService } from '../../core/data/collection-data.service';\nimport { PaginationService } from '../../core/pagination/pagination.service';\nimport { switchMap } from 'rxjs/operators';\n\n@Component({\n  selector: 'ds-community-page-sub-collection-list',\n  styleUrls: ['./community-page-sub-collection-list.component.scss'],\n  templateUrl: './community-page-sub-collection-list.component.html',\n  animations:[fadeIn]\n})\nexport class CommunityPageSubCollectionListComponent implements OnInit {\n  @Input() community: Community;\n\n  /**\n   * The pagination configuration\n   */\n  config: PaginationComponentOptions;\n\n  /**\n   * The pagination id\n   */\n  pageId = 'cmcl';\n\n  /**\n   * The sorting configuration\n   */\n  sortConfig: SortOptions;\n\n  /**\n   * A list of remote data objects of communities' collections\n   */\n  subCollectionsRDObs: BehaviorSubject<RemoteData<PaginatedList<Collection>>> = new BehaviorSubject<RemoteData<PaginatedList<Collection>>>({} as any);\n\n  constructor(private cds: CollectionDataService,\n              private paginationService: PaginationService,\n\n  ) {}\n\n  ngOnInit(): void {\n    this.config = new PaginationComponentOptions();\n    this.config.id = this.pageId;\n    this.config.pageSize = 5;\n    this.config.currentPage = 1;\n    this.sortConfig = new SortOptions('dc.title', SortDirection.ASC);\n    this.initPage();\n  }\n\n  /**\n   * Initialise the list of collections\n   */\n  initPage() {\n     const pagination$ = this.paginationService.getCurrentPagination(this.config.id, this.config);\n     const sort$ = this.paginationService.getCurrentSort(this.config.id, this.sortConfig);\n\n    observableCombineLatest([pagination$, sort$]).pipe(\n      switchMap(([currentPagination, currentSort]) => {\n        return this.cds.findByParent(this.community.id, {\n          currentPage: currentPagination.currentPage,\n          elementsPerPage: currentPagination.pageSize,\n          sort: {field: currentSort.field, direction: currentSort.direction}\n        });\n      })\n    ).subscribe((results) => {\n      this.subCollectionsRDObs.next(results);\n    });\n  }\n\n  ngOnDestroy(): void {\n    this.paginationService.clearPagination(this.config.id);\n  }\n\n}\n","<ng-container *ngVar=\"(subCollectionsRDObs | async) as subCollectionsRD\">\n  <div *ngIf=\"subCollectionsRD?.hasSucceeded && subCollectionsRD?.payload.totalElements > 0\" @fadeIn>\n    <h2>{{'community.sub-collection-list.head' | translate}}</h2>\n    <ds-viewable-collection\n      [config]=\"config\"\n      [sortConfig]=\"sortConfig\"\n      [objects]=\"subCollectionsRD\"\n      [hideGear]=\"false\">\n    </ds-viewable-collection>\n  </div>\n  <ds-error *ngIf=\"subCollectionsRD?.hasFailed\" message=\"{{'error.sub-collections' | translate}}\"></ds-error>\n  <ds-loading *ngIf=\"subCollectionsRD?.isLoading\" message=\"{{'loading.sub-collections' | translate}}\"></ds-loading>\n</ng-container>\n","<div class=\"container\">\n  <div class=\"row\">\n    <div class=\"col-12 pb-4\">\n      <ng-container *ngVar=\"(parentRD$ | async)?.payload as parent\">\n        <h2 *ngIf=\"!parent\" id=\"header\" class=\"border-bottom pb-2\">{{ 'community.create.head' | translate }}</h2>\n        <h2 *ngIf=\"parent\" id=\"sub-header\" class=\"border-bottom pb-2\">{{ 'community.create.sub-head' | translate:{ parent: parent.name } }}</h2>\n      </ng-container>\n    </div>\n  </div>\n  <ds-community-form (submitForm)=\"onSubmit($event)\"\n                     (back)=\"navigateToHome()\"\n                     (finish)=\"navigateToNewPage()\"></ds-community-form>\n</div>\n","import { Component } from '@angular/core';\nimport { Community } from '../../core/shared/community.model';\nimport { CommunityDataService } from '../../core/data/community-data.service';\nimport { RouteService } from '../../core/services/route.service';\nimport { Router } from '@angular/router';\nimport { CreateComColPageComponent } from '../../shared/comcol/comcol-forms/create-comcol-page/create-comcol-page.component';\nimport { NotificationsService } from '../../shared/notifications/notifications.service';\nimport { TranslateService } from '@ngx-translate/core';\nimport { RequestService } from '../../core/data/request.service';\n\n/**\n * Component that represents the page where a user can create a new Community\n */\n@Component({\n  selector: 'ds-create-community',\n  styleUrls: ['./create-community-page.component.scss'],\n  templateUrl: './create-community-page.component.html'\n})\nexport class CreateCommunityPageComponent extends CreateComColPageComponent<Community> {\n  protected frontendURL = '/communities/';\n  protected type = Community.type;\n\n  public constructor(\n    protected communityDataService: CommunityDataService,\n    protected routeService: RouteService,\n    protected router: Router,\n    protected notificationsService: NotificationsService,\n    protected translate: TranslateService,\n    protected requestService: RequestService\n  ) {\n    super(communityDataService, communityDataService, routeService, router, notificationsService, translate, requestService);\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { ActivatedRouteSnapshot, CanActivate, Router, RouterStateSnapshot } from '@angular/router';\n\nimport { hasNoValue, hasValue } from '../../shared/empty.util';\nimport { CommunityDataService } from '../../core/data/community-data.service';\nimport { RemoteData } from '../../core/data/remote-data';\nimport { Community } from '../../core/shared/community.model';\nimport { map, tap } from 'rxjs/operators';\nimport { Observable, of as observableOf } from 'rxjs';\nimport { getFirstCompletedRemoteData } from '../../core/shared/operators';\n\n/**\n * Prevent creation of a community with an invalid parent community provided\n * @class CreateCommunityPageGuard\n */\n@Injectable()\nexport class CreateCommunityPageGuard implements CanActivate {\n  public constructor(private router: Router, private communityService: CommunityDataService) {\n  }\n\n  /**\n   * True when either NO parent ID query parameter has been provided, or the parent ID resolves to a valid parent community\n   * Reroutes to a 404 page when the page cannot be activated\n   * @method canActivate\n   */\n  canActivate(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): Observable<boolean> {\n    const parentID = route.queryParams.parent;\n    if (hasNoValue(parentID)) {\n      return observableOf(true);\n    }\n\n    return this.communityService.findById(parentID)\n      .pipe(\n        getFirstCompletedRemoteData(),\n        map((communityRD: RemoteData<Community>) => hasValue(communityRD) && communityRD.hasSucceeded && hasValue(communityRD.payload)),\n        tap((isValid: boolean) => {\n          if (!isValid) {\n            this.router.navigate(['/404']);\n          }\n        }\n      )\n    );\n  }\n}\n","<div class=\"container\">\n    <div class=\"row\">\n        <ng-container *ngVar=\"(dsoRD$ | async)?.payload as dso\">\n            <div class=\"col-12 pb-4\">\n                <h2 id=\"header\" class=\"border-bottom pb-2\">{{ 'community.delete.head' | translate}}</h2>\n                <p class=\"pb-2\">{{ 'community.delete.text' | translate:{ dso: dso.name } }}</p>\n                <div class=\"form-group row\">\n                    <div class=\"col text-right\">\n                        <button class=\"btn btn-outline-secondary\" (click)=\"onCancel(dso)\" [disabled]=\"(processing$ | async)\">\n                            <i class=\"fas fa-times\"></i> {{'community.delete.cancel' | translate}}\n                        </button>\n                        <button class=\"btn btn-danger mr-2\" (click)=\"onConfirm(dso)\" [disabled]=\"(processing$ | async)\">\n                            <span *ngIf=\"processing$ | async\"><i class='fas fa-circle-notch fa-spin'></i> {{'community.delete.processing' | translate}}</span>\n                            <span *ngIf=\"!(processing$ | async)\"><i class=\"fas fa-trash\"></i> {{'community.delete.confirm' | translate}}</span>\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </ng-container>\n    </div>\n\n</div>\n","import { Component } from '@angular/core';\nimport { Community } from '../../core/shared/community.model';\nimport { CommunityDataService } from '../../core/data/community-data.service';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { DeleteComColPageComponent } from '../../shared/comcol/comcol-forms/delete-comcol-page/delete-comcol-page.component';\nimport { NotificationsService } from '../../shared/notifications/notifications.service';\nimport { TranslateService } from '@ngx-translate/core';\nimport { RequestService } from '../../core/data/request.service';\n\n/**\n * Component that represents the page where a user can delete an existing Community\n */\n@Component({\n  selector: 'ds-delete-community',\n  styleUrls: ['./delete-community-page.component.scss'],\n  templateUrl: './delete-community-page.component.html'\n})\nexport class DeleteCommunityPageComponent extends DeleteComColPageComponent<Community> {\n  protected frontendURL = '/communities/';\n\n  public constructor(\n    protected dsoDataService: CommunityDataService,\n    protected router: Router,\n    protected route: ActivatedRoute,\n    protected notifications: NotificationsService,\n    protected translate: TranslateService,\n    protected requestService: RequestService\n  ) {\n    super(dsoDataService, router, route, notifications, translate, requestService);\n  }\n\n}\n","import { Injectable } from '@angular/core';\nimport { DSOBreadcrumbsService } from './dso-breadcrumbs.service';\nimport { DSOBreadcrumbResolver } from './dso-breadcrumb.resolver';\nimport { CommunityDataService } from '../data/community-data.service';\nimport { Community } from '../shared/community.model';\nimport { FollowLinkConfig } from '../../shared/utils/follow-link-config.model';\nimport { COMMUNITY_PAGE_LINKS_TO_FOLLOW } from '../../community-page/community-page.resolver';\n\n/**\n * The class that resolves the BreadcrumbConfig object for a Community\n */\n@Injectable({\n  providedIn: 'root'\n})\nexport class CommunityBreadcrumbResolver extends DSOBreadcrumbResolver<Community> {\n  constructor(protected breadcrumbService: DSOBreadcrumbsService, protected dataService: CommunityDataService) {\n    super(breadcrumbService, dataService);\n  }\n\n  /**\n   * Method that returns the follow links to already resolve\n   * The self links defined in this list are expected to be requested somewhere in the near future\n   * Requesting them as embeds will limit the number of requests\n   */\n  get followLinks(): FollowLinkConfig<Community>[] {\n    return COMMUNITY_PAGE_LINKS_TO_FOLLOW;\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { ActivatedRouteSnapshot, Router, RouterStateSnapshot } from '@angular/router';\nimport { Community } from '../core/shared/community.model';\nimport { CommunityPageResolver } from './community-page.resolver';\nimport { AuthorizationDataService } from '../core/data/feature-authorization/authorization-data.service';\nimport { Observable, of as observableOf } from 'rxjs';\nimport { DsoPageSingleFeatureGuard } from '../core/data/feature-authorization/feature-authorization-guard/dso-page-single-feature.guard';\nimport { FeatureID } from '../core/data/feature-authorization/feature-id';\nimport { AuthService } from '../core/auth/auth.service';\n\n@Injectable({\n  providedIn: 'root'\n})\n/**\n * Guard for preventing unauthorized access to certain {@link Community} pages requiring administrator rights\n */\nexport class CommunityPageAdministratorGuard extends DsoPageSingleFeatureGuard<Community> {\n  constructor(protected resolver: CommunityPageResolver,\n              protected authorizationService: AuthorizationDataService,\n              protected router: Router,\n              protected authService: AuthService) {\n    super(resolver, authorizationService, router, authService);\n  }\n\n  /**\n   * Check administrator authorization rights\n   */\n  getFeatureID(next: ActivatedRouteSnapshot, state: RouterStateSnapshot): Observable<FeatureID> {\n    return observableOf(FeatureID.AdministratorOf);\n  }\n}\n","import { Component } from '@angular/core';\nimport { ThemedComponent } from '../shared/theme-support/themed.component';\nimport { CommunityPageComponent } from './community-page.component';\n\n/**\n * Themed wrapper for CommunityPageComponent\n */\n@Component({\n  selector: 'ds-themed-community-page',\n  styleUrls: [],\n  templateUrl: '../shared/theme-support/themed.component.html',\n})\nexport class ThemedCommunityPageComponent extends ThemedComponent<CommunityPageComponent> {\n  protected getComponentName(): string {\n    return 'CommunityPageComponent';\n  }\n\n  protected importThemedComponent(themeName: string): Promise<any> {\n    return import(`../../themes/${themeName}/app/community-page/community-page.component`);\n  }\n\n  protected importUnthemedComponent(): Promise<any> {\n    return import(`./community-page.component`);\n  }\n\n}\n","<ng-template #vcr></ng-template>\n","import { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\n\nimport { CommunityPageResolver } from './community-page.resolver';\nimport { CreateCommunityPageComponent } from './create-community-page/create-community-page.component';\nimport { AuthenticatedGuard } from '../core/auth/authenticated.guard';\nimport { CreateCommunityPageGuard } from './create-community-page/create-community-page.guard';\nimport { DeleteCommunityPageComponent } from './delete-community-page/delete-community-page.component';\nimport { CommunityBreadcrumbResolver } from '../core/breadcrumbs/community-breadcrumb.resolver';\nimport { DSOBreadcrumbsService } from '../core/breadcrumbs/dso-breadcrumbs.service';\nimport { LinkService } from '../core/cache/builders/link.service';\nimport { COMMUNITY_EDIT_PATH, COMMUNITY_CREATE_PATH } from './community-page-routing-paths';\nimport { CommunityPageAdministratorGuard } from './community-page-administrator.guard';\nimport { MenuItemType } from '../shared/menu/initial-menus-state';\nimport { LinkMenuItemModel } from '../shared/menu/menu-item/models/link.model';\nimport { ThemedCommunityPageComponent } from './themed-community-page.component';\n\n@NgModule({\n  imports: [\n    RouterModule.forChild([\n      {\n        path: COMMUNITY_CREATE_PATH,\n        component: CreateCommunityPageComponent,\n        canActivate: [AuthenticatedGuard, CreateCommunityPageGuard]\n      },\n      {\n        path: ':id',\n        resolve: {\n          dso: CommunityPageResolver,\n          breadcrumb: CommunityBreadcrumbResolver\n        },\n        runGuardsAndResolvers: 'always',\n        children: [\n          {\n            path: COMMUNITY_EDIT_PATH,\n            loadChildren: () => import('./edit-community-page/edit-community-page.module')\n              .then((m) => m.EditCommunityPageModule),\n            canActivate: [CommunityPageAdministratorGuard]\n          },\n          {\n            path: 'delete',\n            pathMatch: 'full',\n            component: DeleteCommunityPageComponent,\n            canActivate: [AuthenticatedGuard],\n          },\n          {\n            path: '',\n            component: ThemedCommunityPageComponent,\n            pathMatch: 'full',\n          }\n        ],\n        data: {\n          menu: {\n            public: [{\n              id: 'statistics_community_:id',\n              active: true,\n              visible: true,\n              model: {\n                type: MenuItemType.LINK,\n                text: 'menu.section.statistics',\n                link: 'statistics/communities/:id/',\n              } as LinkMenuItemModel,\n            }],\n          },\n        },\n      },\n    ])\n  ],\n  providers: [\n    CommunityPageResolver,\n    CommunityBreadcrumbResolver,\n    DSOBreadcrumbsService,\n    LinkService,\n    CreateCommunityPageGuard,\n    CommunityPageAdministratorGuard\n  ]\n})\nexport class CommunityPageRoutingModule {\n\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { SharedModule } from '../shared/shared.module';\n\nimport { CommunityPageComponent } from './community-page.component';\nimport { CommunityPageSubCollectionListComponent } from './sub-collection-list/community-page-sub-collection-list.component';\nimport { CommunityPageRoutingModule } from './community-page-routing.module';\nimport { CommunityPageSubCommunityListComponent } from './sub-community-list/community-page-sub-community-list.component';\nimport { CreateCommunityPageComponent } from './create-community-page/create-community-page.component';\nimport { DeleteCommunityPageComponent } from './delete-community-page/delete-community-page.component';\nimport { StatisticsModule } from '../statistics/statistics.module';\nimport { CommunityFormModule } from './community-form/community-form.module';\nimport { ThemedCommunityPageComponent } from './themed-community-page.component';\nimport { ComcolModule } from '../shared/comcol/comcol.module';\n\nconst DECLARATIONS = [CommunityPageComponent,\n  ThemedCommunityPageComponent,\n  CommunityPageSubCollectionListComponent,\n  CommunityPageSubCommunityListComponent,\n  CreateCommunityPageComponent,\n  DeleteCommunityPageComponent];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    SharedModule,\n    CommunityPageRoutingModule,\n    StatisticsModule.forRoot(),\n    CommunityFormModule,\n    ComcolModule\n  ],\n  declarations: [\n    ...DECLARATIONS\n  ],\n  exports: [\n    ...DECLARATIONS\n  ]\n})\n\nexport class CommunityPageModule {\n\n}\n","import { mergeMap, filter, map } from 'rxjs/operators';\nimport { ChangeDetectionStrategy, Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\n\nimport { Observable } from 'rxjs';\nimport { CommunityDataService } from '../core/data/community-data.service';\nimport { RemoteData } from '../core/data/remote-data';\nimport { Bitstream } from '../core/shared/bitstream.model';\n\nimport { Community } from '../core/shared/community.model';\n\nimport { MetadataService } from '../core/metadata/metadata.service';\n\nimport { fadeInOut } from '../shared/animations/fade';\nimport { hasValue } from '../shared/empty.util';\nimport { getAllSucceededRemoteDataPayload, redirectOn4xx } from '../core/shared/operators';\nimport { AuthService } from '../core/auth/auth.service';\nimport { AuthorizationDataService } from '../core/data/feature-authorization/authorization-data.service';\nimport { FeatureID } from '../core/data/feature-authorization/feature-id';\nimport { getCommunityPageRoute } from './community-page-routing-paths';\n\n@Component({\n  selector: 'ds-community-page',\n  styleUrls: ['./community-page.component.scss'],\n  templateUrl: './community-page.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  animations: [fadeInOut]\n})\n/**\n * This component represents a detail page for a single community\n */\nexport class CommunityPageComponent implements OnInit {\n  /**\n   * The community displayed on this page\n   */\n  communityRD$: Observable<RemoteData<Community>>;\n\n  /**\n   * Whether the current user is a Community admin\n   */\n  isCommunityAdmin$: Observable<boolean>;\n\n  /**\n   * The logo of this community\n   */\n  logoRD$: Observable<RemoteData<Bitstream>>;\n\n  /**\n   * Route to the community page\n   */\n  communityPageRoute$: Observable<string>;\n\n  constructor(\n    private communityDataService: CommunityDataService,\n    private metadata: MetadataService,\n    private route: ActivatedRoute,\n    private router: Router,\n    private authService: AuthService,\n    private authorizationDataService: AuthorizationDataService\n  ) {\n\n  }\n\n  ngOnInit(): void {\n    this.communityRD$ = this.route.data.pipe(\n      map((data) => data.dso as RemoteData<Community>),\n      redirectOn4xx(this.router, this.authService)\n    );\n    this.logoRD$ = this.communityRD$.pipe(\n      map((rd: RemoteData<Community>) => rd.payload),\n      filter((community: Community) => hasValue(community)),\n      mergeMap((community: Community) => community.logo));\n    this.communityPageRoute$ = this.communityRD$.pipe(\n      getAllSucceededRemoteDataPayload(),\n      map((community) => getCommunityPageRoute(community.id))\n    );\n    this.isCommunityAdmin$ = this.authorizationDataService.isAuthorized(FeatureID.IsCommunityAdmin);\n  }\n}\n","<div class=\"container\" *ngVar=\"(communityRD$ | async) as communityRD\">\n  <div class=\"community-page\" *ngIf=\"communityRD?.hasSucceeded\" @fadeInOut>\n    <div *ngIf=\"communityRD?.payload; let communityPayload\">\n      <ds-view-tracker [object]=\"communityPayload\"></ds-view-tracker>\n      <div class=\"d-flex flex-row border-bottom mb-4 pb-4\">\n        <header class=\"comcol-header mr-auto\">\n          <!-- Community name -->\n          <ds-comcol-page-header [name]=\"communityPayload.name\"></ds-comcol-page-header>\n          <!-- Community logo -->\n          <ds-comcol-page-logo *ngIf=\"logoRD$\" [logo]=\"(logoRD$ | async)?.payload\" [alternateText]=\"'Community Logo'\">\n          </ds-comcol-page-logo>\n          <!-- Handle -->\n          <ds-comcol-page-handle [content]=\"communityPayload.handle\" [title]=\"'community.page.handle'\">\n          </ds-comcol-page-handle>\n          <!-- Introductory text -->\n          <ds-comcol-page-content [content]=\"communityPayload.introductoryText\" [hasInnerHtml]=\"true\">\n          </ds-comcol-page-content>\n          <!-- News -->\n          <ds-comcol-page-content [content]=\"communityPayload.sidebarText\" [hasInnerHtml]=\"true\"\n            [title]=\"'community.page.news'\">\n          </ds-comcol-page-content>\n        </header>\n        <div class=\"pl-2\">\n          <ds-dso-page-edit-button *ngIf=\"isCommunityAdmin$ | async\" [pageRoute]=\"communityPageRoute$ | async\" [dso]=\"communityPayload\" [tooltipMsg]=\"'community.page.edit'\"></ds-dso-page-edit-button>\n        </div>\n      </div>\n      <section class=\"comcol-page-browse-section\">\n        <!-- Browse-By Links -->\n        <ds-comcol-page-browse-by [id]=\"communityPayload.id\" [contentType]=\"communityPayload.type\">\n        </ds-comcol-page-browse-by>\n\n        <ds-community-page-sub-community-list [community]=\"communityPayload\"></ds-community-page-sub-community-list>\n        <ds-community-page-sub-collection-list [community]=\"communityPayload\"></ds-community-page-sub-collection-list>\n      </section>\n      <footer  *ngIf=\"communityPayload.copyrightText\"  class=\"border-top my-5 pt-4\">\n        <!-- Copyright -->\n        <ds-comcol-page-content [content]=\"communityPayload.copyrightText\" [hasInnerHtml]=\"true\">\n        </ds-comcol-page-content>\n      </footer>\n    </div>\n  </div>\n\n  <ds-error *ngIf=\"communityRD?.hasFailed\" message=\"{{'error.community' | translate}}\"></ds-error>\n  <ds-loading *ngIf=\"communityRD?.isLoading\" message=\"{{'loading.community' | translate}}\"></ds-loading>\n</div>\n","import { NgModule } from '@angular/core';\n\nimport { CommunityFormComponent } from './community-form.component';\nimport { SharedModule } from '../../shared/shared.module';\nimport { ComcolModule } from '../../shared/comcol/comcol.module';\nimport { FormModule } from '../../shared/form/form.module';\n\n@NgModule({\n  imports: [\n    ComcolModule,\n    FormModule,\n    SharedModule\n  ],\n  declarations: [\n    CommunityFormComponent,\n  ],\n  exports: [\n    CommunityFormComponent\n  ]\n})\nexport class CommunityFormModule {\n\n}\n","import { BreadcrumbConfig } from '../../breadcrumbs/breadcrumb/breadcrumb-config.model';\nimport { Injectable } from '@angular/core';\nimport { ActivatedRouteSnapshot, Resolve, RouterStateSnapshot } from '@angular/router';\nimport { DSOBreadcrumbsService } from './dso-breadcrumbs.service';\nimport { DataService } from '../data/data.service';\nimport { getRemoteDataPayload, getFirstCompletedRemoteData } from '../shared/operators';\nimport { map } from 'rxjs/operators';\nimport { Observable } from 'rxjs';\nimport { DSpaceObject } from '../shared/dspace-object.model';\nimport { ChildHALResource } from '../shared/child-hal-resource.model';\nimport { FollowLinkConfig } from '../../shared/utils/follow-link-config.model';\nimport { hasValue } from '../../shared/empty.util';\n\n/**\n * The class that resolves the BreadcrumbConfig object for a DSpaceObject\n */\n@Injectable({\n  providedIn: 'root'\n})\nexport abstract class DSOBreadcrumbResolver<T extends ChildHALResource & DSpaceObject> implements Resolve<BreadcrumbConfig<T>> {\n  constructor(protected breadcrumbService: DSOBreadcrumbsService, protected dataService: DataService<T>) {\n  }\n\n  /**\n   * Method for resolving a breadcrumb config object\n   * @param {ActivatedRouteSnapshot} route The current ActivatedRouteSnapshot\n   * @param {RouterStateSnapshot} state The current RouterStateSnapshot\n   * @returns BreadcrumbConfig object\n   */\n  resolve(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): Observable<BreadcrumbConfig<T>> {\n    const uuid = route.params.id;\n    return this.dataService.findById(uuid, true, false, ...this.followLinks).pipe(\n      getFirstCompletedRemoteData(),\n      getRemoteDataPayload(),\n      map((object: T) => {\n        if (hasValue(object)) {\n          const fullPath = state.url;\n          const url = fullPath.substr(0, fullPath.indexOf(uuid)) + uuid;\n          return {provider: this.breadcrumbService, key: object, url: url};\n        } else {\n          return undefined;\n        }\n      })\n    );\n  }\n\n  /**\n   * Method that returns the follow links to already resolve\n   * The self links defined in this list are expected to be requested somewhere in the near future\n   * Requesting them as embeds will limit the number of requests\n   */\n  abstract get followLinks(): FollowLinkConfig<T>[];\n}\n","import { URLCombiner } from '../core/url-combiner/url-combiner';\nimport { getAccessControlModuleRoute } from '../app-routing-paths';\n\nexport const GROUP_EDIT_PATH = 'groups';\n\nexport function getGroupsRoute() {\n  return new URLCombiner(getAccessControlModuleRoute(), GROUP_EDIT_PATH).toString();\n}\n\nexport function getGroupEditRoute(id: string) {\n  return new URLCombiner(getAccessControlModuleRoute(), GROUP_EDIT_PATH, id).toString();\n}\n","/**\n * Class representing a single breadcrumb\n */\nexport class Breadcrumb {\n  constructor(\n    /**\n     * The display value of the breadcrumb\n     */\n    public text: string,\n    /**\n     * The optional url of the breadcrumb\n     */\n    public url?: string) {\n  }\n}\n"]}