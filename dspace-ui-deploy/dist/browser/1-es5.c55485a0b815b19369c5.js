!function(){function e(){return(e="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,n,i){var r=t(e,n);if(r){var o=Object.getOwnPropertyDescriptor(r,n);return o.get?o.get.call(arguments.length<3?e:i):o.value}}).apply(this,arguments)}function t(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var i,r,o=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(o.push(i.value),!t||o.length!==t);a=!0);}catch(s){l=!0,r=s}finally{try{a||null==n.return||n.return()}finally{if(l)throw r}}return o}(e,t)||r(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||r(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=u(e);if(t){var r=u(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return c(this,n)}}function c(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function m(e,t,n){return t&&p(e.prototype,t),n&&p(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"/Vzl":function(e,t,n){"use strict";n.d(t,"a",(function(){return C}));var i=n("fXoL"),r=n("2Vo4"),o=n("pLZG"),a=n("1QIV"),l=n("J3qs"),s=n("4SI6"),c=n("XcME"),u=n("3jCq"),p=n("EGek"),f=n("J/vq"),h=n("l7P3"),v=n("ofXK"),g=n("Frqi"),b=n("1aCu");function y(e,t){1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275text"](1,"\n            "),i["\u0275\u0275element"](2,"ds-loading",5),i["\u0275\u0275text"](3,"\n        "),i["\u0275\u0275elementContainerEnd"]()),2&e&&(i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("showMessage",!1))}function x(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275text"](1,"\n            "),i["\u0275\u0275element"](2,"ds-listable-object-component-loader",6),i["\u0275\u0275pipe"](3,"async"),i["\u0275\u0275text"](4,"\n        "),i["\u0275\u0275elementContainerEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("showLabel",!1)("viewMode",n.viewType)("object",i["\u0275\u0275pipeBind1"](3,3,n.relatedItem$))}}var C=function(){var e=function(){function e(t,n,o){d(this,e),this.selectableListService=t,this.submissionService=n,this.store=o,this.relatedItem$=new r.a(void 0),this.viewType=u.a.ListElement,this.remove=new i.EventEmitter,this.subs=[]}return m(e,[{key:"ngOnInit",value:function(){this.ngOnChanges()}},{key:"ngOnChanges",value:function(){var e=this;Object(l.b)(this.reoRel)&&this.subs.push((this.reoRel.useLeftItem?this.reoRel.relationship.leftItem:this.reoRel.relationship.rightItem).pipe(Object(a.c)(),Object(a.o)(),Object(o.a)((function(e){return Object(l.b)(e)&&Object(l.e)(e.uuid)}))).subscribe((function(t){e.relatedItem$.next(t)})))}},{key:"removeSelection",value:function(){this.submissionService.dispatchSave(this.submissionId),this.selectableListService.deselectSingle(this.listId,Object.assign(new s.a,{indexableObject:this.relatedItem$.getValue()})),this.store.dispatch(new c.c(this.submissionItem,this.relatedItem$.getValue(),this.relationshipOptions.relationshipType,this.submissionId))}},{key:"ngOnDestroy",value:function(){this.subs.filter((function(e){return Object(l.b)(e)})).forEach((function(e){return e.unsubscribe()}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](p.a),i["\u0275\u0275directiveInject"](f.a),i["\u0275\u0275directiveInject"](h.i))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-existing-relation-list-element"]],inputs:{listId:"listId",submissionItem:"submissionItem",reoRel:"reoRel",metadataFields:"metadataFields",relationshipOptions:"relationshipOptions",submissionId:"submissionId"},outputs:{remove:"remove"},features:[i["\u0275\u0275NgOnChangesFeature"]],decls:17,vars:6,consts:[[1,"d-flex"],[1,"mr-auto","text-contents"],[4,"ngIf"],["type","button",1,"btn","btn-secondary",3,"click"],["aria-hidden","true",1,"fas","fa-trash"],[3,"showMessage"],[3,"showLabel","viewMode","object"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275text"](1,"\n    "),i["\u0275\u0275elementStart"](2,"span",1),i["\u0275\u0275text"](3,"\n        "),i["\u0275\u0275template"](4,y,4,1,"ng-container",2),i["\u0275\u0275pipe"](5,"async"),i["\u0275\u0275text"](6,"\n        "),i["\u0275\u0275template"](7,x,5,5,"ng-container",2),i["\u0275\u0275pipe"](8,"async"),i["\u0275\u0275text"](9,"\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](10,"\n    "),i["\u0275\u0275elementStart"](11,"button",3),i["\u0275\u0275listener"]("click",(function(){return t.removeSelection()})),i["\u0275\u0275text"](12,"\n        "),i["\u0275\u0275element"](13,"i",4),i["\u0275\u0275text"](14,"\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](15,"\n"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](16,"\n")),2&e&&(i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("ngIf",!i["\u0275\u0275pipeBind1"](5,2,t.relatedItem$)),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",i["\u0275\u0275pipeBind1"](8,4,t.relatedItem$)))},directives:[v.p,g.a,b.a],pipes:[v.b],styles:["span.text-contents[_ngcontent-%COMP%]{padding:var(--bs-btn-padding-y) 0}"]}),e}()},"0pnk":function(e,t,n){"use strict";n.d(t,"a",(function(){return N}));var i=n("fXoL"),r=n("LRne"),o=n("JIr8"),l=n("/uUt"),c=n("J3qs"),u=n("oBfO"),p=n("x+ZM"),f=n("rbjh"),h=n("ZJee"),v=n("f+Ev"),g=n("1QIV"),b=n("Ssu8"),y=n("PdzJ"),x=n("e+Av"),C=n("1kSV"),I=n("BIe1"),O=n("3Pt+"),S=n("ofXK"),E=n("dlKe"),w=n("sYmb"),k=n("UGKy"),j=function(){return{}};function M(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",17),i["\u0275\u0275text"](1,"\n      "),i["\u0275\u0275elementStart"](2,"input",18),i["\u0275\u0275listener"]("ngModelChange",(function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().secondInputValue=e}))("change",(function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().onChange(e)}))("blur",(function(e){i["\u0275\u0275restoreView"](n);var t=i["\u0275\u0275nextContext"](),r=i["\u0275\u0275reference"](1);return t.onBlur(e),e.stopPropagation(),r.close()}))("focus",(function(e){i["\u0275\u0275restoreView"](n);var t=i["\u0275\u0275nextContext"](),r=i["\u0275\u0275reference"](1);return t.onFocus(e),e.stopPropagation(),r.close()}))("click",(function(e){i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]();var t=i["\u0275\u0275reference"](1);return e.stopPropagation(),t.close()})),i["\u0275\u0275pipe"](3,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](4,"\n    "),i["\u0275\u0275elementEnd"]()}if(2&e){var r=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](2),i["\u0275\u0275classProp"]("is-invalid",r.showErrorMessages),i["\u0275\u0275property"]("ngClass",i["\u0275\u0275pureFunction0"](14,j))("id",r.id)("name",r.model.name+"_2")("type",r.model.inputType)("ngModel",r.secondInputValue)("disabled",0===r.firstInputValue.length||r.isInputDisabled())("placeholder",i["\u0275\u0275pipeBind1"](3,12,r.model.secondPlaceholder))("readonly",r.model.readOnly),i["\u0275\u0275attribute"]("aria-labelledby","label_"+r.model.id)("autoComplete",r.model.autoComplete)}}function V(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",19),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().remove()})),i["\u0275\u0275pipe"](1,"translate"),i["\u0275\u0275text"](2),i["\u0275\u0275pipe"](3,"translate"),i["\u0275\u0275elementEnd"]()}if(2&e){var r=i["\u0275\u0275nextContext"]();i["\u0275\u0275propertyInterpolate"]("ngbTooltip",i["\u0275\u0275pipeBind1"](1,3,"form.clear-help")),i["\u0275\u0275property"]("disabled",r.model.readOnly),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"]("",i["\u0275\u0275pipeBind1"](3,5,"form.clear"),"\n      ")}}function P(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",19),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().switchEditMode()})),i["\u0275\u0275pipe"](1,"translate"),i["\u0275\u0275text"](2),i["\u0275\u0275pipe"](3,"translate"),i["\u0275\u0275elementEnd"]()}if(2&e){var r=i["\u0275\u0275nextContext"]();i["\u0275\u0275propertyInterpolate"]("ngbTooltip",i["\u0275\u0275pipeBind1"](1,3,"form.edit-help")),i["\u0275\u0275property"]("disabled",r.isEditDisabled()),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"]("",i["\u0275\u0275pipeBind1"](3,5,"form.edit"),"\n      ")}}function F(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",19),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().saveChanges()})),i["\u0275\u0275pipe"](1,"translate"),i["\u0275\u0275text"](2),i["\u0275\u0275pipe"](3,"translate"),i["\u0275\u0275elementEnd"]()}if(2&e){var r=i["\u0275\u0275nextContext"]();i["\u0275\u0275propertyInterpolate"]("ngbTooltip",i["\u0275\u0275pipeBind1"](1,3,"form.save-help")),i["\u0275\u0275property"]("disabled",!r.hasEmptyValue()),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"]("",i["\u0275\u0275pipeBind1"](3,5,"form.save"),"\n      ")}}function _(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",20),i["\u0275\u0275listener"]("click",(function(e){i["\u0275\u0275restoreView"](n);var t=i["\u0275\u0275nextContext"](),r=i["\u0275\u0275reference"](1);return e.stopPropagation(),t.clearFields(),r.close()})),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()}2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"]("",i["\u0275\u0275pipeBind1"](2,1,"form.no-results"),"\n      "))}var L=function(e){return{entry:e}};function B(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",21),i["\u0275\u0275listener"]("click",(function(e){i["\u0275\u0275restoreView"](n);var r=t.$implicit,o=i["\u0275\u0275nextContext"](),a=i["\u0275\u0275reference"](1);return e.stopPropagation(),o.onSelect(r),a.close()})),i["\u0275\u0275text"](1,"\n        "),i["\u0275\u0275elementContainerStart"](2,22),i["\u0275\u0275text"](3,"\n        "),i["\u0275\u0275elementContainerEnd"](),i["\u0275\u0275text"](4,"\n      "),i["\u0275\u0275elementEnd"]()}if(2&e){var r=t.$implicit;i["\u0275\u0275nextContext"]();var o=i["\u0275\u0275reference"](49),a=i["\u0275\u0275reference"](52);i["\u0275\u0275propertyInterpolate"]("title",r.display),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngTemplateOutlet",r.hasOtherInformation()?o:a)("ngTemplateOutletContext",i["\u0275\u0275pureFunction1"](3,L,r))}}function D(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",23),i["\u0275\u0275elementStart"](1,"p"),i["\u0275\u0275text"](2),i["\u0275\u0275pipe"](3,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](3,1,"form.loading")))}function T(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"li",27),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate2"]("\n      ",i["\u0275\u0275pipeBind1"](2,2,"form.other-information."+n.key)," : ",n.value,"\n    ")}}function R(e,t){if(1&e&&(i["\u0275\u0275text"](0,"\n  "),i["\u0275\u0275elementStart"](1,"ul",24),i["\u0275\u0275text"](2,"\n    "),i["\u0275\u0275elementStart"](3,"li",25),i["\u0275\u0275text"](4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](5,"\n    "),i["\u0275\u0275template"](6,T,3,4,"li",26),i["\u0275\u0275pipe"](7,"dsObjNgFor"),i["\u0275\u0275text"](8,"\n  "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](9,"\n")),2&e){var n=t.entry,r=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275attribute"]("aria-labelledby","label_"+r.model.id),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](n.value),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",i["\u0275\u0275pipeBind1"](7,3,n.otherInformation))}}function A(e,t){if(1&e&&(i["\u0275\u0275text"](0,"\n  "),i["\u0275\u0275elementStart"](1,"ul",24),i["\u0275\u0275text"](2,"\n    "),i["\u0275\u0275elementStart"](3,"li",25),i["\u0275\u0275text"](4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](5,"\n  "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](6,"\n")),2&e){var n=t.entry,r=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275attribute"]("aria-labelledby","label_"+r.model.id),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](n.value)}}var N=function(){var e=function(e){a(n,e);var t=s(n);function n(e,r,o,a){var l;return d(this,n),(l=t.call(this,e,o,a)).vocabularyService=e,l.cdr=r,l.layoutService=o,l.validationService=a,l.blur=new i.EventEmitter,l.change=new i.EventEmitter,l.focus=new i.EventEmitter,l.editMode=!1,l.firstInputValue="",l.secondInputValue="",l.loading=!1,l.subs=[],l.inputFormatter=function(e,t){return 1===t?l.firstInputValue:l.secondInputValue},l}return m(n,[{key:"ngOnInit",value:function(){var e=this;Object(c.e)(this.model.value)&&this.setCurrentValue(this.model.value,!0),this.subs.push(this.model.valueChanges.subscribe((function(t){Object(c.d)(t)?e.resetFields():e.editMode||e.setCurrentValue(e.model.value)})))}},{key:"hasAuthorityValue",value:function(){return Object(c.b)(this.model.value)&&"object"==typeof this.model.value&&this.model.value.hasAuthority()}},{key:"hasEmptyValue",value:function(){return Object(c.e)(this.getCurrentValue())}},{key:"clearFields",value:function(){this.model.vocabularyOptions.closed&&this.resetFields()}},{key:"isEditDisabled",value:function(){return!this.hasAuthorityValue()}},{key:"isInputDisabled",value:function(){return this.model.vocabularyOptions.closed&&this.hasAuthorityValue()&&!this.editMode}},{key:"isLookupName",value:function(){return this.model instanceof h.b}},{key:"isSearchDisabled",value:function(){return Object(c.d)(this.firstInputValue)||this.editMode}},{key:"onChange",value:function(e){if(e.preventDefault(),!this.model.vocabularyOptions.closed)if(Object(c.e)(this.getCurrentValue())){var t=new p.a(this.getCurrentValue());this.editMode||this.updateModel(t)}else this.remove()}},{key:"onScroll",value:function(){!this.loading&&this.pageInfo.currentPage<=this.pageInfo.totalPages&&(this.updatePageInfo(this.pageInfo.elementsPerPage,this.pageInfo.currentPage+1,this.pageInfo.totalElements,this.pageInfo.totalPages),this.search())}},{key:"onSelect",value:function(e){this.updateModel(e)}},{key:"openChange",value:function(e){e||this.model.vocabularyOptions.closed&&!this.hasAuthorityValue()&&this.setCurrentValue("")}},{key:"remove",value:function(){this.group.markAsPristine(),this.dispatchUpdate(null)}},{key:"saveChanges",value:function(){if(Object(c.e)(this.getCurrentValue())){var e=Object.assign(new f.a,this.model.value,{display:this.getCurrentValue(),value:this.getCurrentValue()});this.updateModel(e)}else this.remove();this.switchEditMode()}},{key:"search",value:function(){var e=this;this.optionsList=null,this.updatePageInfo(this.model.maxOptions,1),this.loading=!0,this.subs.push(this.vocabularyService.getVocabularyEntriesByValue(this.getCurrentValue(),!1,this.model.vocabularyOptions,this.pageInfo).pipe(Object(g.j)(),Object(o.a)((function(){return Object(r.a)(Object(v.b)(new u.a,[]))})),Object(l.a)()).subscribe((function(t){e.optionsList=t.page,e.updatePageInfo(t.pageInfo.elementsPerPage,t.pageInfo.currentPage,t.pageInfo.totalElements,t.pageInfo.totalPages),e.loading=!1,e.cdr.detectChanges()})))}},{key:"switchEditMode",value:function(){this.editMode=!this.editMode}},{key:"whenClickOnConfidenceNotAccepted",value:function(e,t){this.model.readOnly||(e.open(),this.search())}},{key:"ngOnDestroy",value:function(){this.subs.filter((function(e){return Object(c.b)(e)})).forEach((function(e){return e.unsubscribe()}))}},{key:"setCurrentValue",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];n?this.getInitValueFromModel().subscribe((function(e){return t.setDisplayInputValue(e.display)})):Object(c.b)(e)&&(e instanceof p.a||e instanceof f.a)&&this.setDisplayInputValue(e.display)}},{key:"setDisplayInputValue",value:function(e){if(Object(c.b)(e)){if(this.isLookupName()){var t=e.split(this.model.separator);this.firstInputValue=(t[0]||"").trim(),this.secondInputValue=(t[1]||"").trim()}else this.firstInputValue=e||"";this.cdr.detectChanges()}}},{key:"getCurrentValue",value:function(){var e="";return this.isLookupName()?(Object(c.e)(this.firstInputValue)&&(e=this.firstInputValue),Object(c.e)(this.secondInputValue)&&(e=Object(c.d)(e)?this.secondInputValue:this.firstInputValue+this.model.separator+" "+this.secondInputValue)):e=this.firstInputValue,e}},{key:"resetFields",value:function(){this.firstInputValue="",this.isLookupName()&&(this.secondInputValue="")}},{key:"updateModel",value:function(e){this.group.markAsDirty(),this.dispatchUpdate(e),this.setCurrentValue(e),this.optionsList=null,this.pageInfo=null}}]),n}(b.a);return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](y.a),i["\u0275\u0275directiveInject"](i.ChangeDetectorRef),i["\u0275\u0275directiveInject"](x.E),i["\u0275\u0275directiveInject"](x.H))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-dynamic-lookup"]],inputs:{group:"group",model:"model"},outputs:{blur:"blur",change:"change",focus:"focus"},features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:54,vars:33,consts:[["ngbDropdown","",3,"click","openChange"],["sdRef","ngbDropdown"],[1,"form-row","align-items-center"],[1,"col","right-addon"],["dsAuthorityConfidenceState","","aria-hidden","true",1,"far","fa-circle","fa-2x","fa-fw","position-absolute","mt-1","p-0","pr-2",3,"authorityValue","whenClickOnConfidenceNotAccepted"],[1,"form-control",3,"id","name","type","ngModel","disabled","placeholder","readonly","ngModelChange","change","blur","focus","click"],["class","col",4,"ngIf"],[1,"col-auto","text-center"],["ngbDropdownAnchor","","type","button","placement","top",1,"btn","btn-secondary",3,"ngbTooltip","disabled","hidden","click"],["class","btn btn-secondary","type","button","placement","top",3,"ngbTooltip","disabled","click",4,"ngIf"],["ngbDropdownMenu","","aria-haspopup","true","aria-expanded","false",1,"dropdown-menu","scrollable-dropdown-menu","w-100"],["aria-labelledby","scrollableDropdownMenuButton","infiniteScroll","",1,"scrollable-menu",3,"infiniteScrollDistance","infiniteScrollThrottle","scrollWindow","scrolled"],["class","dropdown-item disabled",3,"click",4,"ngIf"],["class","dropdown-item lookup-item",3,"title","click",4,"ngFor","ngForOf"],["class","scrollable-dropdown-loading text-center",4,"ngIf"],["hasInfo",""],["noInfo",""],[1,"col"],[1,"form-control",3,"ngClass","id","name","type","ngModel","disabled","placeholder","readonly","ngModelChange","change","blur","focus","click"],["type","button","placement","top",1,"btn","btn-secondary",3,"ngbTooltip","disabled","click"],[1,"dropdown-item","disabled",3,"click"],[1,"dropdown-item","lookup-item",3,"title","click"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"scrollable-dropdown-loading","text-center"],[1,"list-unstyled","mb-0"],[1,"list-item","text-truncate","text-primary","font-weight-bold"],["class","list-item text-truncate text-secondary",4,"ngFor","ngForOf"],[1,"list-item","text-truncate","text-secondary"]],template:function(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",0,1),i["\u0275\u0275listener"]("click",(function(e){return e.stopPropagation()}))("openChange",(function(e){return t.openChange(e)})),i["\u0275\u0275text"](2,"\n\n  "),i["\u0275\u0275elementStart"](3,"div",2),i["\u0275\u0275text"](4,"\n    "),i["\u0275\u0275text"](5,"\n    "),i["\u0275\u0275elementStart"](6,"div",3),i["\u0275\u0275text"](7,"\n      "),i["\u0275\u0275elementStart"](8,"i",4),i["\u0275\u0275listener"]("whenClickOnConfidenceNotAccepted",(function(e){i["\u0275\u0275restoreView"](n);var r=i["\u0275\u0275reference"](1);return t.whenClickOnConfidenceNotAccepted(r,e)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](9,"\n      "),i["\u0275\u0275elementStart"](10,"input",5),i["\u0275\u0275listener"]("ngModelChange",(function(e){return t.firstInputValue=e}))("change",(function(e){return t.onChange(e)}))("blur",(function(e){i["\u0275\u0275restoreView"](n);var r=i["\u0275\u0275reference"](1);return t.onBlur(e),e.stopPropagation(),r.close()}))("focus",(function(e){i["\u0275\u0275restoreView"](n);var r=i["\u0275\u0275reference"](1);return t.onFocus(e),e.stopPropagation(),r.close()}))("click",(function(e){i["\u0275\u0275restoreView"](n);var t=i["\u0275\u0275reference"](1);return e.stopPropagation(),e.stopPropagation(),t.close()})),i["\u0275\u0275pipe"](11,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](12,"\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](13,"\n\n    "),i["\u0275\u0275text"](14,"\n    "),i["\u0275\u0275template"](15,M,5,15,"div",6),i["\u0275\u0275text"](16,"\n    "),i["\u0275\u0275elementStart"](17,"div",7),i["\u0275\u0275text"](18,"\n      "),i["\u0275\u0275elementStart"](19,"button",8),i["\u0275\u0275listener"]("click",(function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275reference"](1).open(),t.search(),e.stopPropagation()})),i["\u0275\u0275pipe"](20,"translate"),i["\u0275\u0275text"](21),i["\u0275\u0275pipe"](22,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](23,"\n      "),i["\u0275\u0275template"](24,V,4,7,"button",9),i["\u0275\u0275text"](25,"\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](26,"\n    "),i["\u0275\u0275elementStart"](27,"div",7),i["\u0275\u0275text"](28,"\n      "),i["\u0275\u0275template"](29,P,4,7,"button",9),i["\u0275\u0275text"](30,"\n      "),i["\u0275\u0275template"](31,F,4,7,"button",9),i["\u0275\u0275text"](32,"\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](33,"\n  "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](34,"\n\n  "),i["\u0275\u0275elementStart"](35,"div",10),i["\u0275\u0275text"](36,"\n    "),i["\u0275\u0275elementStart"](37,"div",11),i["\u0275\u0275listener"]("scrolled",(function(){return t.onScroll()})),i["\u0275\u0275text"](38,"\n\n      "),i["\u0275\u0275template"](39,_,3,3,"button",12),i["\u0275\u0275text"](40,"\n      "),i["\u0275\u0275template"](41,B,5,5,"button",13),i["\u0275\u0275text"](42,"\n      "),i["\u0275\u0275template"](43,D,4,3,"div",14),i["\u0275\u0275text"](44,"\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](45,"\n  "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](46,"\n"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](47,"\n\n"),i["\u0275\u0275template"](48,R,10,5,"ng-template",null,15,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275text"](50,"\n\n"),i["\u0275\u0275template"](51,A,7,2,"ng-template",null,16,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275text"](53,"\n")}2&e&&(i["\u0275\u0275advance"](8),i["\u0275\u0275property"]("authorityValue",t.model.value),i["\u0275\u0275advance"](2),i["\u0275\u0275classProp"]("is-invalid",t.showErrorMessages),i["\u0275\u0275property"]("id",t.model.id)("name",t.model.name)("type",t.model.inputType)("ngModel",t.firstInputValue)("disabled",t.isInputDisabled())("placeholder",i["\u0275\u0275pipeBind1"](11,27,t.model.placeholder))("readonly",t.model.readOnly),i["\u0275\u0275attribute"]("aria-labelledby","label_"+t.model.id)("autoComplete",t.model.autoComplete),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngIf",t.isLookupName()),i["\u0275\u0275advance"](4),i["\u0275\u0275propertyInterpolate"]("ngbTooltip",i["\u0275\u0275pipeBind1"](20,29,"form.search-help")),i["\u0275\u0275property"]("disabled",t.model.readOnly||t.isSearchDisabled())("hidden",t.isInputDisabled()),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"]("",i["\u0275\u0275pipeBind1"](22,31,"form.search"),"\n      "),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",t.isInputDisabled()),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngIf",!t.editMode),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",t.editMode),i["\u0275\u0275advance"](4),i["\u0275\u0275attribute"]("aria-labelledby","label_"+t.model.id),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("infiniteScrollDistance",2)("infiniteScrollThrottle",50)("scrollWindow",!1),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",t.optionsList&&0==t.optionsList.length),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",t.optionsList),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",t.loading))},directives:[C.j,I.a,O.DefaultValueAccessor,O.NgControlStatus,O.NgModel,S.p,C.k,C.O,C.m,E.a,S.o,S.m,S.t],pipes:[w.d,k.a],styles:[".dropdown-toggle[_ngcontent-%COMP%]:after{display:none}[_nghost-%COMP%]     .dropdown-menu{left:0!important;width:100%!important;max-height:var(--ds-dropdown-menu-max-height);overflow-y:auto!important;overflow-x:hidden}[_nghost-%COMP%]     .dropdown-item.active, [_nghost-%COMP%]     .dropdown-item:active, [_nghost-%COMP%]     .dropdown-item:focus, [_nghost-%COMP%]     .dropdown-item:hover{color:var(--bs-dropdown-link-hover-color)!important;background-color:var(--bs-dropdown-link-hover-bg)!important}div[_ngcontent-%COMP%]{overflow:visible}.lookup-item[_ngcontent-%COMP%]{border-bottom:var(--bs-dropdown-border-width) solid var(--bs-dropdown-border-color)}"]}),e}()},"1Pbu":function(e,t,r){"use strict";r.d(t,"a",(function(){return X}));var o=r("fXoL"),a=r("itXk"),l=r("J3qs"),s=r("lJxs"),c=r("IzEk"),u=r("zP0r"),p=r("eIep"),f=r("dtp9"),h=r("joI/"),v=r("XcME"),g=r("ynxc"),b=r("1QIV"),y=r("84Zn"),x=r("7RJT"),C=r("1kSV"),I=r("EGek"),O=r("kN8A"),S=r("BK0m"),E=r("dHui"),w=r("OAtg"),k=r("7vy/"),j=r("l7P3"),M=r("tyNb"),V=r("ofXK"),P=r("Frqi"),F=r("Ui2r"),_=r("zVKZ"),L=r("8HnP"),B=r("sYmb");function D(e,t){1&e&&o["\u0275\u0275element"](0,"ds-loading")}function T(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275text"](0,"\n                    "),o["\u0275\u0275elementStart"](1,"ds-dynamic-lookup-relation-search-tab",19),o["\u0275\u0275listener"]("selectObject",(function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](2).select(e)}))("deselectObject",(function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](2).deselect(e)}))("resultFound",(function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](2).setTotalInternals(e.pageInfo.totalElements)})),o["\u0275\u0275text"](2,"\n                    "),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](3,"\n                ")}if(2&e){var i=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("selection$",i.selection$)("listId",i.listId)("relationship",i.relationshipOptions)("repeatable",i.repeatable)("context",i.context)("query",i.query)("relationshipType",i.relationshipType)("isLeft",i.isLeft)("item",i.item)("isEditRelationship",i.isEditRelationship)("toRemove",i.toRemove)}}function R(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275text"](0,"\n                    "),o["\u0275\u0275elementStart"](1,"ds-dynamic-lookup-relation-external-source-tab",20),o["\u0275\u0275listener"]("importedObject",(function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](3).imported(e)})),o["\u0275\u0275text"](2,"\n                    "),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](3,"\n                ")}if(2&e){var i=o["\u0275\u0275nextContext"]().$implicit,r=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("label",r.label)("listId",r.listId)("repeatable",r.repeatable)("item",r.item)("collection",r.collection)("relationship",r.relationshipOptions)("context",r.context)("externalSource",i)}}var A=function(e){return{count:e}};function N(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"li",13),o["\u0275\u0275text"](1,"\n                "),o["\u0275\u0275elementStart"](2,"a",14),o["\u0275\u0275text"](3),o["\u0275\u0275pipe"](4,"translate"),o["\u0275\u0275pipe"](5,"async"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](6,"\n                "),o["\u0275\u0275template"](7,R,4,8,"ng-template",15),o["\u0275\u0275text"](8,"\n            "),o["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,i=t.index,r=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind2"](4,1,"submission.sections.describe.relationship-lookup.search-tab.tab-title."+n.id,o["\u0275\u0275pureFunction1"](6,A,o["\u0275\u0275pipeBind1"](5,4,r.totalExternal$)[i])))}}function G(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275text"](0,"\n                    "),o["\u0275\u0275elementStart"](1,"ds-dynamic-lookup-relation-selection-tab",21),o["\u0275\u0275listener"]("selectObject",(function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](3).select(e)}))("deselectObject",(function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](3).deselect(e)})),o["\u0275\u0275text"](2,"\n                    "),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](3,"\n                ")}if(2&e){var i=o["\u0275\u0275nextContext"](3);o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("selection$",i.selection$)("listId",i.listId)("relationshipType",i.relationshipOptions.relationshipType)("repeatable",i.repeatable)("context",i.context)}}function $(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"li",13),o["\u0275\u0275text"](1,"\n                "),o["\u0275\u0275elementStart"](2,"a",14),o["\u0275\u0275text"](3),o["\u0275\u0275pipe"](4,"translate"),o["\u0275\u0275pipe"](5,"async"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](6,"\n                "),o["\u0275\u0275template"](7,G,4,5,"ng-template",15),o["\u0275\u0275text"](8,"\n            "),o["\u0275\u0275elementEnd"]()),2&e){var n,i=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind2"](4,1,"submission.sections.describe.relationship-lookup.selection-tab.tab-title",o["\u0275\u0275pureFunction1"](6,A,null==(n=o["\u0275\u0275pipeBind1"](5,4,i.selection$))?null:n.length)))}}function q(e,t){if(1&e&&(o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275text"](1,"\n        "),o["\u0275\u0275elementStart"](2,"ul",11,12),o["\u0275\u0275text"](4,"\n            "),o["\u0275\u0275elementStart"](5,"li",13),o["\u0275\u0275text"](6,"\n                "),o["\u0275\u0275elementStart"](7,"a",14),o["\u0275\u0275text"](8),o["\u0275\u0275pipe"](9,"translate"),o["\u0275\u0275pipe"](10,"async"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](11,"\n                "),o["\u0275\u0275template"](12,T,4,11,"ng-template",15),o["\u0275\u0275text"](13,"\n            "),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](14,"\n            "),o["\u0275\u0275template"](15,N,9,8,"li",16),o["\u0275\u0275pipe"](16,"async"),o["\u0275\u0275text"](17,"\n            "),o["\u0275\u0275template"](18,$,9,8,"li",17),o["\u0275\u0275text"](19,"\n        "),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](20,"\n        "),o["\u0275\u0275element"](21,"div",18),o["\u0275\u0275text"](22,"\n    "),o["\u0275\u0275elementContainerEnd"]()),2&e){var n=o["\u0275\u0275reference"](3),i=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](8),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind2"](9,4,"submission.sections.describe.relationship-lookup.search-tab.tab-title."+i.relationshipOptions.relationshipType,o["\u0275\u0275pureFunction1"](11,A,o["\u0275\u0275pipeBind1"](10,7,i.totalInternal$)))),o["\u0275\u0275advance"](7),o["\u0275\u0275property"]("ngForOf",o["\u0275\u0275pipeBind1"](16,9,i.externalSourcesRD$)),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngIf",!i.isEditRelationship),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngbNavOutlet",n)}}function z(e,t){1&e&&o["\u0275\u0275element"](0,"span",30)}function H(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",22),o["\u0275\u0275text"](1,"\n        "),o["\u0275\u0275elementStart"](2,"div",23),o["\u0275\u0275text"](3,"\n          "),o["\u0275\u0275elementStart"](4,"button",24),o["\u0275\u0275listener"]("click",(function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().discardEv()})),o["\u0275\u0275text"](5,"\n                  "),o["\u0275\u0275element"](6,"i",25),o["\u0275\u0275text"](7,"\n            "),o["\u0275\u0275elementStart"](8,"span",26),o["\u0275\u0275text"](9),o["\u0275\u0275pipe"](10,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](11,"\n          "),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](12,"\n          "),o["\u0275\u0275elementStart"](13,"button",27),o["\u0275\u0275listener"]("click",(function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().submitEv()})),o["\u0275\u0275text"](14,"\n                  "),o["\u0275\u0275template"](15,z,1,0,"span",28),o["\u0275\u0275text"](16,"\n                  "),o["\u0275\u0275element"](17,"i",29),o["\u0275\u0275text"](18,"\n            "),o["\u0275\u0275elementStart"](19,"span",26),o["\u0275\u0275text"](20),o["\u0275\u0275pipe"](21,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](22,"\n          "),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](23,"\n        "),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](24,"\n      "),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("disabled",0==i.toAdd.length&&0==i.toRemove.length||i.isPending),o["\u0275\u0275advance"](5),o["\u0275\u0275textInterpolate1"]("\xa0",o["\u0275\u0275pipeBind1"](10,5,"item.edit.metadata.discard-button"),""),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("disabled",0==i.toAdd.length&&0==i.toRemove.length||i.isPending),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",i.isPending),o["\u0275\u0275advance"](5),o["\u0275\u0275textInterpolate1"]("\xa0",o["\u0275\u0275pipeBind1"](21,7,"item.edit.metadata.save-button"),"")}}var J=function(e){return{size:e}},X=function(){var e=function(){function e(t,n,i,r,a,l,s,c,u,p,m){d(this,e),this.modal=t,this.selectableListService=n,this.relationshipService=i,this.relationshipTypeService=r,this.externalSourceService=a,this.lookupRelationService=l,this.searchConfigService=s,this.rdbService=c,this.zone=u,this.store=p,this.router=m,this.selectEvent=new o.EventEmitter,this.subMap={},this.totalInternal$=new x.BehaviorSubject(0),this.isLeft=!1,this.isEditRelationship=!1,this.toAdd=[],this.toRemove=[],this.isPending=!1}return m(e,[{key:"ngOnInit",value:function(){var e=this;this.currentItemIsLeftItem$&&this.currentItemIsLeftItem$.subscribe((function(t){e.isLeft=t})),this.selection$=this.selectableListService.getSelectableList(this.listId).pipe(Object(s.a)((function(e){return Object(l.b)(e)&&Object(l.b)(e.selection)?e.selection:[]}))),this.selection$.pipe(Object(c.a)(1)).subscribe((function(t){return t.map((function(t){return e.addNameVariantSubscription(t)}))})),this.context="true"===this.relationshipOptions.nameVariants?g.a.EntitySearchModalWithNameVariants:g.a.EntitySearchModal,Object(l.e)(this.relationshipOptions.externalSources)&&(this.externalSourcesRD$=this.rdbService.aggregate(this.relationshipOptions.externalSources.map((function(t){return e.externalSourceService.findById(t,!0,!0,Object(y.a)("entityTypes"))}))).pipe(Object(b.d)())),this.setTotals()}},{key:"close",value:function(){this.toAdd=[],this.toRemove=[],this.modal.close()}},{key:"select",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this.zone.runOutsideAngular((function(){Object(a.a)(i(n.map((function(t){return e.addNameVariantSubscription(t),e.relationshipService.getNameVariant(e.listId,t.indexableObject.uuid).pipe(Object(c.a)(1),Object(s.a)((function(e){return{item:t.indexableObject,nameVariant:e}})))})))).subscribe((function(t){return t.forEach((function(t){var n=new v.a(e.item,t.item,e.relationshipOptions.relationshipType,e.submissionId,t.nameVariant);e.store.dispatch(n)}))}))}))}},{key:"addNameVariantSubscription",value:function(e){var t=this,n=this.relationshipService.getNameVariant(this.listId,e.indexableObject.uuid);this.subMap[e.indexableObject.uuid]=n.pipe(Object(u.a)(1)).subscribe((function(n){return t.store.dispatch(new v.d(t.item,e.indexableObject,t.relationshipOptions.relationshipType,t.submissionId,n))}))}},{key:"deselect",value:function(){for(var e=this,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];this.zone.runOutsideAngular((function(){return n.forEach((function(t){e.subMap[t.indexableObject.uuid].unsubscribe(),e.store.dispatch(new v.c(e.item,t.indexableObject,e.relationshipOptions.relationshipType,e.submissionId))}))}))}},{key:"imported",value:function(e){this.setTotals(),this.select(e)}},{key:"setTotals",value:function(){var e=this,t=Object(a.a)([this.externalSourcesRD$,this.searchConfigService.paginatedSearchOptions]);this.totalExternal$=t.pipe(Object(p.a)((function(t){var r=n(t,2),o=r[0],l=r[1];return Object(a.a)(i(o.map((function(t){return e.lookupRelationService.getTotalExternalResults(t,l)}))))})))}},{key:"setTotalInternals",value:function(e){this.totalInternal$.next(e)}},{key:"ngOnDestroy",value:function(){this.router.navigate([],{}),Object.values(this.subMap).forEach((function(e){return e.unsubscribe()}))}},{key:"discardEv",value:function(){}},{key:"submitEv",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](C.c),o["\u0275\u0275directiveInject"](I.a),o["\u0275\u0275directiveInject"](O.a),o["\u0275\u0275directiveInject"](S.a),o["\u0275\u0275directiveInject"](E.a),o["\u0275\u0275directiveInject"](w.a),o["\u0275\u0275directiveInject"](h.a),o["\u0275\u0275directiveInject"](k.a),o["\u0275\u0275directiveInject"](o.NgZone),o["\u0275\u0275directiveInject"](j.i),o["\u0275\u0275directiveInject"](M.h))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-dynamic-lookup-relation-modal"]],outputs:{selectEvent:"selectEvent"},features:[o["\u0275\u0275ProvidersFeature"]([{provide:f.SEARCH_CONFIG_SERVICE,useClass:h.a}])],decls:40,vars:19,consts:[[1,"modal-header"],["id","modal-title",1,"modal-title"],["type","button","aria-label","Close button","aria-describedby","modal-title",1,"close",3,"disabled","click"],["aria-hidden","true"],[1,"modal-body"],[4,"ngIf"],[1,"modal-footer"],[1,"buttons-container"],[1,"close-button"],["type","button",1,"btn","btn-outline-secondary",3,"disabled","click"],["class","button-row bottom",4,"ngIf"],["ngbNav","",1,"nav-tabs"],["nav","ngbNav"],["ngbNavItem",""],["ngbNavLink",""],["ngbNavContent",""],["ngbNavItem","",4,"ngFor","ngForOf"],["ngbNavItem","",4,"ngIf"],[3,"ngbNavOutlet"],[1,"d-block","pt-3",3,"selection$","listId","relationship","repeatable","context","query","relationshipType","isLeft","item","isEditRelationship","toRemove","selectObject","deselectObject","resultFound"],[1,"d-block","pt-3",3,"label","listId","repeatable","item","collection","relationship","context","externalSource","importedObject"],[1,"d-block","pt-3",3,"selection$","listId","relationshipType","repeatable","context","selectObject","deselectObject"],[1,"button-row","bottom"],[1,"float-right"],[1,"btn","btn-danger","discard",3,"disabled","click"],[1,"fas","fa-times"],[1,"d-none","d-sm-inline"],[1,"btn","btn-primary","submit",3,"disabled","click"],["class","spinner-border spinner-border-sm","role","status","aria-hidden","true",4,"ngIf"],[1,"fas","fa-save"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275text"](1,"\n    "),o["\u0275\u0275elementStart"](2,"h4",1),o["\u0275\u0275text"](3),o["\u0275\u0275pipe"](4,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](5,"\n    "),o["\u0275\u0275elementStart"](6,"button",2),o["\u0275\u0275listener"]("click",(function(){return t.close()})),o["\u0275\u0275text"](7,"\n        "),o["\u0275\u0275elementStart"](8,"span",3),o["\u0275\u0275text"](9,"\xd7"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](10,"\n    "),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](11,"\n"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](12,"\n"),o["\u0275\u0275elementStart"](13,"div",4),o["\u0275\u0275text"](14,"\n    "),o["\u0275\u0275template"](15,D,1,0,"ds-loading",5),o["\u0275\u0275text"](16,"\n    "),o["\u0275\u0275template"](17,q,23,13,"ng-container",5),o["\u0275\u0275text"](18,"\n"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](19,"\n"),o["\u0275\u0275elementStart"](20,"div",6),o["\u0275\u0275text"](21,"\n    "),o["\u0275\u0275elementStart"](22,"small"),o["\u0275\u0275text"](23),o["\u0275\u0275pipe"](24,"translate"),o["\u0275\u0275pipe"](25,"async"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](26,"\n    "),o["\u0275\u0275elementStart"](27,"div",7),o["\u0275\u0275text"](28,"\n    "),o["\u0275\u0275elementStart"](29,"div",8),o["\u0275\u0275text"](30,"\n        "),o["\u0275\u0275elementStart"](31,"button",9),o["\u0275\u0275listener"]("click",(function(){return t.close()})),o["\u0275\u0275text"](32),o["\u0275\u0275pipe"](33,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](34,"\n    "),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](35,"\n     "),o["\u0275\u0275template"](36,H,25,9,"div",10),o["\u0275\u0275text"](37,"\n    "),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](38,"\n"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](39,"\n")),2&e){var n;o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](4,8,"submission.sections.describe.relationship-lookup.title."+t.relationshipOptions.relationshipType)),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("disabled",t.isPending),o["\u0275\u0275advance"](9),o["\u0275\u0275property"]("ngIf",!t.item||!t.collection),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",t.item&&t.collection),o["\u0275\u0275advance"](6),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind2"](24,10,"submission.sections.describe.relationship-lookup.selected",o["\u0275\u0275pureFunction1"](17,J,(null==(n=o["\u0275\u0275pipeBind1"](25,13,t.selection$))?null:n.length)||0))),o["\u0275\u0275advance"](8),o["\u0275\u0275property"]("disabled",t.isPending),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"]("\n            ",o["\u0275\u0275pipeBind1"](33,15,"submission.sections.describe.relationship-lookup.close"),""),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("ngIf",t.isEditRelationship)}},directives:[V.p,P.a,C.t,C.v,C.w,C.u,V.o,C.y,F.a,_.a,L.a],pipes:[B.d,V.b],styles:[".modal-footer[_ngcontent-%COMP%]{-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}[_nghost-%COMP%]     .modal-content{width:90%;margin:5%}[_nghost-%COMP%]   .spinner-border[_ngcontent-%COMP%]{vertical-align:middle}.buttons-container[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex}.buttons-container[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]{margin-right:5px}"]}),e}()},"6c/T":function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var i=n("fXoL"),r=n("1kSV"),o=n("ofXK"),a=n("Oqsf"),l=n("Frqi"),s=n("sYmb");function c(e,t){1&e&&i["\u0275\u0275element"](0,"ds-loading")}var u=function(e){return{"d-none":e}},p=function(){var e=function(){function e(t){d(this,e),this.activeModal=t,this.selectedEvent=new i.EventEmitter,this.loading=!0}return m(e,[{key:"selectObject",value:function(e){this.selectedEvent.emit(e)}},{key:"closeCollectionModal",value:function(){this.activeModal.dismiss(!1)}},{key:"theOnlySelectable",value:function(e){this.selectedEvent.emit(e)}},{key:"searchComplete",value:function(){this.loading=!1}},{key:"isLoading",value:function(){return!!this.loading}}]),e}();return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](r.c))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-submission-import-external-collection"]],outputs:{selectedEvent:"selectedEvent"},decls:21,vars:8,consts:[[1,"modal-header"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[4,"ngIf"],[3,"ngClass","entityType","selectionChange","searchComplete","theOnlySelectable"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275text"](1,"\n  "),i["\u0275\u0275elementStart"](2,"div",0),i["\u0275\u0275text"](3),i["\u0275\u0275pipe"](4,"translate"),i["\u0275\u0275elementStart"](5,"button",1),i["\u0275\u0275listener"]("click",(function(){return t.closeCollectionModal()})),i["\u0275\u0275text"](6,"\n      "),i["\u0275\u0275elementStart"](7,"span",2),i["\u0275\u0275text"](8,"\xd7"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](9,"\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](10,"\n  "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](11,"\n  "),i["\u0275\u0275elementStart"](12,"div",3),i["\u0275\u0275text"](13,"\n    "),i["\u0275\u0275template"](14,c,1,0,"ds-loading",4),i["\u0275\u0275text"](15,"\n    "),i["\u0275\u0275elementStart"](16,"ds-collection-dropdown",5),i["\u0275\u0275listener"]("selectionChange",(function(e){return t.selectObject(e)}))("searchComplete",(function(){return t.searchComplete()}))("theOnlySelectable",(function(e){return t.theOnlySelectable(e)})),i["\u0275\u0275text"](17,"\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](18,"\n  "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](19,"\n"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](20,"\n")),2&e&&(i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate1"]("",i["\u0275\u0275pipeBind1"](4,4,"dso-selector.select.collection.head"),"\n    "),i["\u0275\u0275advance"](11),i["\u0275\u0275property"]("ngIf",t.isLoading()),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngClass",i["\u0275\u0275pureFunction1"](6,u,t.isLoading()))("entityType",t.entityType))},directives:[o.p,a.a,o.m,l.a],pipes:[s.d],styles:[".close[_ngcontent-%COMP%]:focus{outline:none!important}"]}),e}()},"7RJT":function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=n("ds6q"),a=n("Mxlh");t.BehaviorSubject=function(e){function t(t){var n=e.call(this)||this;return n._value=t,n}return r(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),t.prototype._subscribe=function(t){var n=e.prototype._subscribe.call(this,t);return n&&!n.closed&&t.next(this._value),n},t.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new a.ObjectUnsubscribedError;return this._value},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(o.Subject)},"8HnP":function(e,t,n){"use strict";n.d(t,"a",(function(){return S}));var i=n("fXoL"),r=n("dtp9"),o=n("joI/"),a=n("lJxs"),l=n("eIep"),s=n("IzEk"),c=n("7DXY"),u=n("f+Ev"),p=n("oBfO"),f=n("GG8d"),h=n("tyNb"),v=n("MFUF"),g=n("pKvA"),b=n("ofXK"),y=n("jLV+"),x=n("sYmb");function C(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"]("\n            ",i["\u0275\u0275pipeBind1"](2,1,"submission.sections.describe.relationship-lookup.selection-tab.no-selection"),"\n        "))}var I=function(e,t){return{repeatable:e,listId:t}};function O(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275text"](1,"\n            "),i["\u0275\u0275elementStart"](2,"h3"),i["\u0275\u0275text"](3),i["\u0275\u0275pipe"](4,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](5,"\n            "),i["\u0275\u0275elementStart"](6,"ds-viewable-collection",4),i["\u0275\u0275listener"]("deselectObject",(function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().deselectObject.emit(e)}))("selectObject",(function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().selectObject.emit(e)})),i["\u0275\u0275pipe"](7,"async"),i["\u0275\u0275pipe"](8,"async"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](9,"\n        "),i["\u0275\u0275elementEnd"]()}if(2&e){var r=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](4,7,"submission.sections.describe.relationship-lookup.selection-tab.title."+r.relationshipType)),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("objects",i["\u0275\u0275pipeBind1"](7,9,r.selectionRD$))("selectable",!0)("selectionConfig",i["\u0275\u0275pureFunction2"](13,I,r.repeatable,r.listId))("config",i["\u0275\u0275pipeBind1"](8,11,r.currentPagination$))("hideGear",!0)("context",r.context)}}var S=function(){var e=function(){function e(t,n,r){d(this,e),this.router=t,this.searchConfigService=n,this.paginationService=r,this.deselectObject=new i.EventEmitter,this.selectObject=new i.EventEmitter,this.initialPagination=Object.assign(new c.a,{id:"spc",pageSize:5})}return m(e,[{key:"ngOnInit",value:function(){var e=this;this.resetRoute(),this.selectionRD$=this.searchConfigService.paginatedSearchOptions.pipe(Object(a.a)((function(e){return e.pagination})),Object(l.a)((function(t){return e.selection$.pipe(Object(s.a)(1),Object(a.a)((function(e){var n=(t.currentPage-1)*t.pageSize,i=e.slice(n,n+t.pageSize>e.length?e.length:n+t.pageSize),r=new p.a({elementsPerPage:t.pageSize,totalElements:e.length,currentPage:t.currentPage,totalPages:Math.ceil(e.length/t.pageSize)});return Object(f.c)(Object(u.b)(r,i))})))}))),this.currentPagination$=this.paginationService.getCurrentPagination(this.searchConfigService.paginationID,this.initialPagination)}},{key:"resetRoute",value:function(){this.paginationService.updateRoute(this.searchConfigService.paginationID,{page:1,pageSize:5})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](h.h),i["\u0275\u0275directiveInject"](o.a),i["\u0275\u0275directiveInject"](v.a))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-dynamic-lookup-relation-selection-tab"]],inputs:{relationshipType:"relationshipType",listId:"listId",repeatable:"repeatable",selection$:"selection$",selectionRD$:"selectionRD$",context:"context"},outputs:{deselectObject:"deselectObject",selectObject:"selectObject"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:r.SEARCH_CONFIG_SERVICE,useClass:o.a}])],decls:21,vars:9,consts:[[1,"row"],[1,"col-4"],[1,"col-8"],[4,"ngIf"],[3,"objects","selectable","selectionConfig","config","hideGear","context","deselectObject","selectObject"]],template:function(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275text"](1,"\n    "),i["\u0275\u0275elementStart"](2,"div",1),i["\u0275\u0275text"](3,"\n        "),i["\u0275\u0275elementStart"](4,"h3"),i["\u0275\u0275text"](5),i["\u0275\u0275pipe"](6,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](7,"\n        "),i["\u0275\u0275element"](8,"ds-page-size-selector"),i["\u0275\u0275text"](9,"\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](10,"\n    "),i["\u0275\u0275elementStart"](11,"div",2),i["\u0275\u0275text"](12,"\n        "),i["\u0275\u0275template"](13,C,3,3,"div",3),i["\u0275\u0275pipe"](14,"async"),i["\u0275\u0275text"](15,"\n        "),i["\u0275\u0275template"](16,O,10,16,"div",3),i["\u0275\u0275pipe"](17,"async"),i["\u0275\u0275text"](18,"\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](19,"\n"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](20,"\n")),2&e){var n,r;i["\u0275\u0275advance"](5),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](6,3,"submission.sections.describe.relationship-lookup.selection-tab.settings")),i["\u0275\u0275advance"](8),i["\u0275\u0275property"]("ngIf",(null==(n=i["\u0275\u0275pipeBind1"](14,5,t.selectionRD$))?null:n.payload.page)<1),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",(null==(r=i["\u0275\u0275pipeBind1"](17,7,t.selectionRD$))?null:r.payload.page.length)>=1)}},directives:[g.a,b.p,y.a],pipes:[x.d,b.b],styles:[""]}),e}()},"A/iK":function(e,t,n){"use strict";n.d(t,"a",(function(){return J}));var i=n("fXoL"),r=n("q92s"),o=n("Kj3r"),l=n("/uUt"),c=n("vkgz"),u=n("eIep"),p=n("JIr8"),f=n("lJxs"),h=n("pLZG"),v=n("IzEk"),g=n("HDdC"),b=n("XNiG"),y=n("LRne"),x=n("J3qs"),C=n("x+ZM"),I=n("1QIV"),O=n("f+Ev"),S=n("oBfO"),E=n("Ssu8"),w=n("97Yq"),k=n("PdzJ"),j=n("e+Av"),M=n("1kSV"),V=n("ofXK"),P=n("3Pt+"),F=n("BIe1"),_=n("UGKy"),L=n("sYmb"),B=["instance"],D=function(e){return{entry:e}};function T(e,t){if(1&e&&(i["\u0275\u0275text"](0,"\n  "),i["\u0275\u0275elementContainerStart"](1,4),i["\u0275\u0275text"](2,"\n  "),i["\u0275\u0275elementContainerEnd"](),i["\u0275\u0275text"](3,"\n")),2&e){var n=t.result;i["\u0275\u0275nextContext"]();var r=i["\u0275\u0275reference"](4),o=i["\u0275\u0275reference"](7);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngTemplateOutlet",n.hasOtherInformation()?r:o)("ngTemplateOutletContext",i["\u0275\u0275pureFunction1"](2,D,n))}}function R(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"li",8),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate2"]("\n      ",i["\u0275\u0275pipeBind1"](2,2,"form.other-information."+n.key)," : ",n.value,"\n    ")}}function A(e,t){if(1&e&&(i["\u0275\u0275text"](0,"\n  "),i["\u0275\u0275elementStart"](1,"ul",5),i["\u0275\u0275text"](2,"\n    "),i["\u0275\u0275elementStart"](3,"li",6),i["\u0275\u0275text"](4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](5,"\n    "),i["\u0275\u0275template"](6,R,3,4,"li",7),i["\u0275\u0275pipe"](7,"dsObjNgFor"),i["\u0275\u0275text"](8,"\n  "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](9,"\n")),2&e){var n=t.entry;i["\u0275\u0275advance"](4),i["\u0275\u0275textInterpolate"](n.value),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",i["\u0275\u0275pipeBind1"](7,2,n.otherInformation))}}function N(e,t){if(1&e&&(i["\u0275\u0275text"](0,"\n  "),i["\u0275\u0275elementStart"](1,"ul",5),i["\u0275\u0275text"](2,"\n    "),i["\u0275\u0275elementStart"](3,"li",6),i["\u0275\u0275text"](4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](5,"\n  "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](6,"\n")),2&e){var n=t.entry;i["\u0275\u0275advance"](4),i["\u0275\u0275textInterpolate"](n.value)}}function G(e,t){1&e&&i["\u0275\u0275element"](0,"i",15)}function $(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"i",16),i["\u0275\u0275listener"]("whenClickOnConfidenceNotAccepted",(function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"](2).whenClickOnConfidenceNotAccepted(e)})),i["\u0275\u0275elementEnd"]()}if(2&e){var r=i["\u0275\u0275nextContext"](2);i["\u0275\u0275property"]("authorityValue",r.currentValue)}}function q(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",17),i["\u0275\u0275text"](1,"Sorry, suggestions could not be loaded."),i["\u0275\u0275elementEnd"]())}function z(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",9),i["\u0275\u0275text"](1,"\n  "),i["\u0275\u0275template"](2,G,1,0,"i",10),i["\u0275\u0275text"](3,"\n  "),i["\u0275\u0275template"](4,$,1,1,"i",11),i["\u0275\u0275text"](5,"\n  "),i["\u0275\u0275elementStart"](6,"input",12,13),i["\u0275\u0275listener"]("ngModelChange",(function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().currentValue=e}))("blur",(function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().onBlur(e)}))("focus",(function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().onFocus(e)}))("change",(function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().onChange(e)}))("input",(function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().onInput(e)}))("selectItem",(function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().onSelectItem(e)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](8,"\n\n  "),i["\u0275\u0275template"](9,q,2,0,"div",14),i["\u0275\u0275text"](10,"\n"),i["\u0275\u0275elementEnd"]()}if(2&e){var r=i["\u0275\u0275nextContext"](),o=i["\u0275\u0275reference"](1);i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",r.searching),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!r.searching),i["\u0275\u0275advance"](2),i["\u0275\u0275classProp"]("is-invalid",r.showErrorMessages),i["\u0275\u0275property"]("id",r.model.id)("inputFormatter",r.formatter)("name",r.model.name)("ngbTypeahead",r.search)("placeholder",r.model.placeholder)("readonly",r.model.readOnly)("resultTemplate",o)("type",r.model.inputType)("ngModel",r.currentValue),i["\u0275\u0275attribute"]("aria-labelledby","label_"+r.model.id)("autoComplete",r.model.autoComplete),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",r.searchFailed)}}function H(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",9),i["\u0275\u0275text"](1,"\n  "),i["\u0275\u0275elementStart"](2,"i",18),i["\u0275\u0275listener"]("click",(function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().openTree(e)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](3,"\n  "),i["\u0275\u0275elementStart"](4,"input",19),i["\u0275\u0275listener"]("focus",(function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().onFocus(e)}))("change",(function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().onChange(e)}))("click",(function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().openTree(e)}))("keydown",(function(e){return e.preventDefault()}))("keypress",(function(e){return e.preventDefault()}))("keyup",(function(e){return e.preventDefault()})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](5,"\n"),i["\u0275\u0275elementEnd"]()}if(2&e){var r=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](4),i["\u0275\u0275classProp"]("is-invalid",r.showErrorMessages)("tree-input",!r.model.readOnly),i["\u0275\u0275property"]("id",r.id)("name",r.model.name)("placeholder",r.model.placeholder)("readonly",!0)("type",r.model.inputType)("value",null==r.currentValue?null:r.currentValue.display),i["\u0275\u0275attribute"]("aria-labelledby","label_"+r.model.id)("autoComplete",r.model.autoComplete)}}var J=function(){var e=function(e){a(n,e);var t=s(n);function n(e,a,s,m,h){var v;return d(this,n),(v=t.call(this,e,s,h)).vocabularyService=e,v.cdr=a,v.layoutService=s,v.modalService=m,v.validationService=h,v.blur=new i.EventEmitter,v.change=new i.EventEmitter,v.focus=new i.EventEmitter,v.pageInfo=new S.a,v.searching=!1,v.searchFailed=!1,v.hideSearchingWhenUnsubscribed$=new g.a((function(){return function(){return v.changeSearchingStatus(!1)}})),v.click$=new b.a,v.subs=[],v.formatter=function(e){return"object"==typeof e?e.display:e},v.search=function(e){return e.pipe(Object(r.a)(v.click$),Object(o.a)(300),Object(l.a)(),Object(c.a)((function(){return v.changeSearchingStatus(!0)})),Object(u.a)((function(e){return""===e||e.length<v.model.minChars?Object(y.a)({list:[]}):v.vocabularyService.getVocabularyEntriesByValue(e,!1,v.model.vocabularyOptions,v.pageInfo).pipe(Object(I.j)(),Object(c.a)((function(){return v.searchFailed=!1})),Object(p.a)((function(){return v.searchFailed=!0,Object(y.a)(Object(O.b)(new S.a,[]))})))})),Object(f.a)((function(e){return e.page})),Object(c.a)((function(){return v.changeSearchingStatus(!1)})),Object(r.a)(v.hideSearchingWhenUnsubscribed$))},v}return m(n,[{key:"ngOnInit",value:function(){var e=this;this.model.value&&this.setCurrentValue(this.model.value,!0),this.vocabulary$=this.vocabularyService.findVocabularyById(this.model.vocabularyOptions.name).pipe(Object(I.j)(),Object(l.a)()),this.isHierarchicalVocabulary$=this.vocabulary$.pipe(Object(f.a)((function(e){return e.hierarchical}))),this.subs.push(this.group.get(this.model.id).valueChanges.pipe(Object(h.a)((function(t){return e.currentValue!==t}))).subscribe((function(t){e.setCurrentValue(e.model.value)})))}},{key:"changeSearchingStatus",value:function(e){this.searching=e,this.cdr.detectChanges()}},{key:"isHierarchicalVocabulary",value:function(){return this.isHierarchicalVocabulary$}},{key:"onInput",value:function(e){!this.model.vocabularyOptions.closed&&Object(x.e)(e.target.value)&&(this.inputValue=new C.a(e.target.value))}},{key:"onBlur",value:function(e){this.instance.isPopupOpen()?(e.preventDefault(),e.stopImmediatePropagation(),e.target.focus()):(!this.model.vocabularyOptions.closed&&Object(x.e)(this.inputValue)&&(Object(x.g)(this.inputValue)&&this.model.value!==this.inputValue&&this.dispatchUpdate(this.inputValue),this.inputValue=null),this.blur.emit(e))}},{key:"onChange",value:function(e){e.stopPropagation(),Object(x.d)(this.currentValue)&&this.dispatchUpdate(null)}},{key:"onSelectItem",value:function(e){this.inputValue=null,this.setCurrentValue(e.item),this.dispatchUpdate(e.item)}},{key:"openTree",value:function(e){var t=this;e.preventDefault(),e.stopImmediatePropagation(),this.subs.push(this.vocabulary$.pipe(Object(f.a)((function(e){return e.preloadLevel})),Object(v.a)(1)).subscribe((function(e){var n=t.modalService.open(w.a,{size:"lg",windowClass:"treeview"});n.componentInstance.vocabularyOptions=t.model.vocabularyOptions,n.componentInstance.preloadLevel=e,n.componentInstance.selectedItem=t.currentValue?t.currentValue:"",n.result.then((function(e){e&&(t.currentValue=e,t.dispatchUpdate(e))}),(function(){}))})))}},{key:"whenClickOnConfidenceNotAccepted",value:function(e){this.model.readOnly||this.click$.next(this.formatter(this.currentValue))}},{key:"setCurrentValue",value:function(e){var t,n=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];i?this.getInitValueFromModel().subscribe((function(e){n.currentValue=e,n.cdr.detectChanges()})):(t=Object(x.d)(e)?"":e.value,this.currentValue=t,this.cdr.detectChanges())}},{key:"ngOnDestroy",value:function(){this.subs.filter((function(e){return Object(x.b)(e)})).forEach((function(e){return e.unsubscribe()}))}}]),n}(E.a);return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](k.a),i["\u0275\u0275directiveInject"](i.ChangeDetectorRef),i["\u0275\u0275directiveInject"](j.E),i["\u0275\u0275directiveInject"](M.q),i["\u0275\u0275directiveInject"](j.H))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-dynamic-onebox"]],viewQuery:function(e,t){var n;(1&e&&i["\u0275\u0275viewQuery"](B,1),2&e)&&(i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(t.instance=n.first))},inputs:{group:"group",model:"model"},outputs:{blur:"blur",change:"change",focus:"focus"},features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:15,vars:6,consts:[["rt",""],["hasInfo",""],["noInfo",""],["class","position-relative right-addon",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"list-unstyled","mb-0"],[1,"list-item","text-truncate","text-primary","font-weight-bold"],["class","list-item text-truncate text-secondary",4,"ngFor","ngForOf"],[1,"list-item","text-truncate","text-secondary"],[1,"position-relative","right-addon"],["class","fas fa-circle-notch fa-spin fa-2x fa-fw text-primary position-absolute mt-1 p-0","aria-hidden","true",4,"ngIf"],["dsAuthorityConfidenceState","","class","far fa-circle fa-2x fa-fw position-absolute mt-1 p-0","aria-hidden","true",3,"authorityValue","whenClickOnConfidenceNotAccepted",4,"ngIf"],[1,"form-control",3,"id","inputFormatter","name","ngbTypeahead","placeholder","readonly","resultTemplate","type","ngModel","ngModelChange","blur","focus","change","input","selectItem"],["instance","ngbTypeahead"],["class","invalid-feedback",4,"ngIf"],["aria-hidden","true",1,"fas","fa-circle-notch","fa-spin","fa-2x","fa-fw","text-primary","position-absolute","mt-1","p-0"],["dsAuthorityConfidenceState","","aria-hidden","true",1,"far","fa-circle","fa-2x","fa-fw","position-absolute","mt-1","p-0",3,"authorityValue","whenClickOnConfidenceNotAccepted"],[1,"invalid-feedback"],["aria-hidden","true",1,"dropdown-toggle","position-absolute","tree-toggle",3,"click"],[1,"form-control",3,"id","name","placeholder","readonly","type","value","focus","change","click","keydown","keypress","keyup"]],template:function(e,t){1&e&&(i["\u0275\u0275template"](0,T,4,4,"ng-template",null,0,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275text"](2,"\n\n"),i["\u0275\u0275template"](3,A,10,4,"ng-template",null,1,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275text"](5,"\n\n"),i["\u0275\u0275template"](6,N,7,1,"ng-template",null,2,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275text"](8,"\n\n"),i["\u0275\u0275template"](9,z,11,16,"div",3),i["\u0275\u0275pipe"](10,"async"),i["\u0275\u0275text"](11,"\n\n"),i["\u0275\u0275template"](12,H,6,12,"div",3),i["\u0275\u0275pipe"](13,"async"),i["\u0275\u0275text"](14,"\n")),2&e&&(i["\u0275\u0275advance"](9),i["\u0275\u0275property"]("ngIf",!i["\u0275\u0275pipeBind1"](10,2,t.isHierarchicalVocabulary())),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",i["\u0275\u0275pipeBind1"](13,4,t.isHierarchicalVocabulary())))},directives:[V.p,V.t,V.o,M.Q,P.DefaultValueAccessor,P.NgControlStatus,P.NgModel,F.a],pipes:[V.b,_.a,L.d],styles:[".ds-form-input-addon[_ngcontent-%COMP%]{border-top-right-radius:0!important;border-bottom-right-radius:0!important;border-right:0!important}.ds-form-input-btn[_ngcontent-%COMP%]{border:var(--bs-input-btn-border-width) solid var(--bs-input-border-color);border-top-left-radius:0;border-bottom-left-radius:0;border-left:0}.ds-form-input-btn[_ngcontent-%COMP%]:focus, button.ds-form-add-more[_ngcontent-%COMP%]:focus{-webkit-box-shadow:none!important;box-shadow:none!important}button.ds-form-add-more[_ngcontent-%COMP%]:focus{outline:none}.ds-form-input-value[_ngcontent-%COMP%]{border-top-left-radius:0!important;border-bottom-left-radius:0!important}.fa-spin[_ngcontent-%COMP%]{pointer-events:none}.left-addon[_ngcontent-%COMP%]   .far[_ngcontent-%COMP%], .left-addon[_ngcontent-%COMP%]   .fas[_ngcontent-%COMP%], .left-addon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{left:0}.right-addon[_ngcontent-%COMP%]   .far[_ngcontent-%COMP%], .right-addon[_ngcontent-%COMP%]   .fas[_ngcontent-%COMP%], .right-addon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{right:0}.left-addon[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-left:calc(var(--bs-spacer) * 2.25)}.right-addon[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-right:calc(var(--bs-spacer) * 2.25)}[_nghost-%COMP%]     .dropdown-menu{width:100%!important;max-height:var(--ds-dropdown-menu-max-height);overflow-y:auto!important;overflow-x:hidden}[_nghost-%COMP%]     .dropdown-item{border-bottom:var(--bs-dropdown-border-width) solid var(--bs-dropdown-border-color)}[_nghost-%COMP%]     .dropdown-item.active, [_nghost-%COMP%]     .dropdown-item:active, [_nghost-%COMP%]     .dropdown-item:focus, [_nghost-%COMP%]     .dropdown-item:hover{color:var(--bs-dropdown-link-hover-color)!important;background-color:var(--bs-dropdown-link-hover-bg)!important}.treeview[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{max-height:85vh!important;overflow-y:auto}.tree-toggle[_ngcontent-%COMP%]{padding:.7rem .7rem 0}.tree-input[readonly][_ngcontent-%COMP%]{background-color:#fff}"]}),e}()},Dh10:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var i=n("LvDl"),o=n("2Vo4"),a=n("J3qs"),l=n("YxKz"),s=n("586V"),c=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"display",r=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;d(this,e),this.id=Object(i.uniqueId)(),this._item=t,this.fieldToDisplay=n,this.objToDisplay=r,this.setDisplayText(),this.editMode=a||!1,this.icons=o||[]}return m(e,[{key:"item",get:function(){return this._item},set:function(e){this._item=e}},{key:"isNestedItem",value:function(){return Object(a.e)(this.item)&&Object(i.isObject)(this.item)&&Object(a.e)(this.objToDisplay)&&this.item[this.objToDisplay]}},{key:"hasIcons",value:function(){return Object(a.e)(this.icons)}},{key:"hasVisibleIcons",value:function(){if(Object(a.e)(this.icons)){var e,t=!1,n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=r(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,l=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){s=!0,a=e},f:function(){try{l||null==n.return||n.return()}finally{if(s)throw a}}}}(this.icons);try{for(n.s();!(e=n.n()).done;){var i=e.value;if(this._item.hasOwnProperty(i.metadata)&&("string"==typeof this._item[i.metadata]&&Object(a.b)(this._item[i.metadata])||this._item[i.metadata].hasValue())&&!this.hasPlaceholder(this._item[i.metadata])&&(i.visibleWhenAuthorityEmpty||this._item[i.metadata].confidence!==l.a.CF_UNSET)&&Object(a.e)(i.style)){t=!0;break}}}catch(o){n.e(o)}finally{n.f()}return t}return!1}},{key:"setEditMode",value:function(){this.editMode=!0}},{key:"updateIcons",value:function(e){this.icons=e}},{key:"updateItem",value:function(e){this._item=e,this.setDisplayText()}},{key:"unsetEditMode",value:function(){this.editMode=!1}},{key:"setDisplayText",value:function(){var e=this._item;if(Object(i.isObject)(this._item)){var t=this.objToDisplay?this._item[this.objToDisplay]:this._item;e=Object(i.isObject)(t)&&t?t[this.fieldToDisplay]||t.value:t}this.display=e}},{key:"hasPlaceholder",value:function(e){return"string"==typeof e?e===s.b:e.hasPlaceholder()}}]),e}(),u=n("x+ZM"),p=n("rbjh"),f=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"display",i=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;d(this,e),this.displayField=n,this.displayObj=i,this.iconsConfig=r||[],Array.isArray(t)&&this.setInitialItems(t)}return m(e,[{key:"add",value:function(e){var t=this.getChipsIcons(e),n=new c(e,this.displayField,this.displayObj,t),r=Object(i.findIndex)(this._items,{display:n.display.trim()});-1!==r&&Object(i.isEqual)(e,this.getChipByIndex(r).item)||(this._items.push(n),this.chipsItems.next(this._items))}},{key:"getChipById",value:function(e){var t=Object(i.findIndex)(this._items,{id:e});return this.getChipByIndex(t)}},{key:"getChipByIndex",value:function(e){return this._items.length>0&&this._items[e]?this._items[e]:null}},{key:"getChips",value:function(){return this._items}},{key:"getChipsItems",value:function(){var e=[];return this._items.forEach((function(t){e.push(t.item)})),e}},{key:"hasItems",value:function(){return this._items.length>0}},{key:"hasPlaceholder",value:function(e){return Object(i.isObject)(e)?e.value===s.b:e===s.b}},{key:"remove",value:function(e){var t=Object(i.findIndex)(this._items,{id:e.id});this._items.splice(t,1),this.chipsItems.next(this._items)}},{key:"update",value:function(e,t){var n=this.getChipById(e),i=this.getChipsIcons(t);n.updateItem(t),n.updateIcons(i),n.unsetEditMode(),this.chipsItems.next(this._items)}},{key:"updateOrder",value:function(){this.chipsItems.next(this._items)}},{key:"getChipsIcons",value:function(e){var t=this,n=[];if("string"==typeof e||e instanceof u.a||e instanceof p.a)return n;var r,o,l,s=Object(i.findIndex)(this.iconsConfig,{name:"default"}),c=-1!==s?this.iconsConfig[s]:void 0;return Object.keys(e).forEach((function(s){var u;(l=e[s],o=Object(i.findIndex)(t.iconsConfig,{name:s}),r=-1!==o?t.iconsConfig[o]:c,Object(a.b)(l)&&Object(a.e)(r)&&!t.hasPlaceholder(l))&&(u={metadata:s,visibleWhenAuthorityEmpty:t.displayObj!==s,style:r.style},n.push(u))})),n}},{key:"setInitialItems",value:function(e){var t=this;this._items=[],e.forEach((function(e){var n=t.getChipsIcons(e),i=new c(e,t.displayField,t.displayObj,n);t._items.push(i)})),this.chipsItems=new o.a(this._items)}}]),e}()},FiyT:function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});t.SubjectSubscription=function(e){function t(t,n){var i=e.call(this)||this;return i.subject=t,i.subscriber=n,i.closed=!1,i}return r(t,e),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}},t}(n("zB/H").Subscription)},"Gu/b":function(e,t,n){"use strict";n.d(t,"a",(function(){return D}));var i=n("fXoL"),r=n("HDdC"),o=n("LRne"),l=n("Kj3r"),c=n("/uUt"),u=n("vkgz"),p=n("eIep"),f=n("JIr8"),h=n("lJxs"),v=n("q92s"),g=n("LvDl"),b=n("Dh10"),y=n("J3qs"),x=n("AytR"),C=n("1QIV"),I=n("f+Ev"),O=n("oBfO"),S=n("Ssu8"),E=n("PdzJ"),w=n("e+Av"),k=n("gLKo"),j=n("ofXK"),M=n("3Pt+"),V=n("1kSV"),P=["instance"];function F(e,t){1&e&&i["\u0275\u0275text"](0),2&e&&i["\u0275\u0275textInterpolate1"]("\n  ",t.result.display,"\n")}function _(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"input",4),i["\u0275\u0275listener"]("ngModelChange",(function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().currentValue=e}))("blur",(function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().onBlur(e)}))("keypress",(function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().preventEventsPropagation(e)}))("keydown",(function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().preventEventsPropagation(e)}))("keyup",(function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().onKeyUp(e)})),i["\u0275\u0275elementEnd"]()}if(2&e){var r=i["\u0275\u0275nextContext"]();i["\u0275\u0275classProp"]("pl-3",r.chips.hasItems()),i["\u0275\u0275property"]("placeholder",r.model.placeholder)("readonly",r.model.readOnly)("ngModel",r.currentValue)}}function L(e,t){1&e&&i["\u0275\u0275element"](0,"i",9)}function B(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",5),i["\u0275\u0275text"](1,"\n    "),i["\u0275\u0275template"](2,L,1,0,"i",6),i["\u0275\u0275text"](3,"\n    "),i["\u0275\u0275elementStart"](4,"input",7,8),i["\u0275\u0275listener"]("ngModelChange",(function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().currentValue=e}))("blur",(function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().onBlur(e)}))("focus",(function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().onFocus(e)}))("change",(function(e){return e.stopPropagation()}))("input",(function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().onInput(e)}))("selectItem",(function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().onSelectItem(e)}))("keypress",(function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().preventEventsPropagation(e)}))("keydown",(function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().preventEventsPropagation(e)}))("keyup",(function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().onKeyUp(e)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](6,"\n    "),i["\u0275\u0275elementEnd"]()}if(2&e){var r=i["\u0275\u0275nextContext"](),o=i["\u0275\u0275reference"](1);i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",r.searching),i["\u0275\u0275advance"](2),i["\u0275\u0275classProp"]("is-invalid",r.showErrorMessages)("pl-3",r.chips.hasItems()),i["\u0275\u0275property"]("ngModel",r.currentValue)("id",r.id)("inputFormatter",r.formatter)("name",r.model.name)("ngbTypeahead",r.search)("placeholder",r.model.placeholder)("readonly",r.model.readOnly)("resultTemplate",o)("type",r.model.inputType),i["\u0275\u0275attribute"]("aria-labelledby","label_"+r.model.id)("autoComplete",r.model.autoComplete)}}var D=function(){var e=function(e){a(n,e);var t=s(n);function n(e,a,s,m){var g;return d(this,n),(g=t.call(this,e,s,m)).vocabularyService=e,g.cdr=a,g.layoutService=s,g.validationService=m,g.bindId=!0,g.blur=new i.EventEmitter,g.change=new i.EventEmitter,g.focus=new i.EventEmitter,g.searching=!1,g.searchFailed=!1,g.hideSearchingWhenUnsubscribed=new r.a((function(){return function(){return g.changeSearchingStatus(!1)}})),g.formatter=function(e){return e.display},g.search=function(e){return e.pipe(Object(l.a)(300),Object(c.a)(),Object(u.a)((function(){return g.changeSearchingStatus(!0)})),Object(p.a)((function(e){return""===e||e.length<g.model.minChars?Object(o.a)({list:[]}):g.vocabularyService.getVocabularyEntriesByValue(e,!1,g.model.vocabularyOptions,new O.a).pipe(Object(C.j)(),Object(u.a)((function(){return g.searchFailed=!1})),Object(f.a)((function(){return g.searchFailed=!0,Object(o.a)(Object(I.b)(new O.a,[]))})))})),Object(h.a)((function(e){return e.page})),Object(u.a)((function(){return g.changeSearchingStatus(!1)})),Object(v.a)(g.hideSearchingWhenUnsubscribed))},g}return m(n,[{key:"ngOnInit",value:function(){var e=this;this.hasAuthority=this.model.vocabularyOptions&&Object(y.b)(this.model.vocabularyOptions.name),this.chips=new b.a(this.model.value,"display",null,x.a.submission.icons.metadata),this.chips.chipsItems.subscribe((function(t){var n=e.chips.getChipsItems();Object(g.isEqual)(n,e.model.value)||e.dispatchUpdate(n)}))}},{key:"changeSearchingStatus",value:function(e){this.searching=e,this.cdr.detectChanges()}},{key:"onInput",value:function(e){e.data&&this.group.markAsDirty(),this.cdr.detectChanges()}},{key:"onBlur",value:function(e){Object(y.e)(this.currentValue)&&!this.instance.isPopupOpen()&&this.addTagsToChips(),this.blur.emit(e)}},{key:"onSelectItem",value:function(e){var t=this;this.chips.add(e.item),this.updateModel(e),setTimeout((function(){t.setCurrentValue(null),t.cdr.detectChanges()}),50)}},{key:"updateModel",value:function(e){this.dispatchUpdate(this.chips.getChipsItems())}},{key:"onKeyUp",value:function(e){13!==e.keyCode&&188!==e.keyCode||(e.preventDefault(),this.addTagsToChips(),e.stopPropagation())}},{key:"preventEventsPropagation",value:function(e){e.stopPropagation(),13===e.keyCode&&e.preventDefault()}},{key:"setCurrentValue",value:function(e){this.currentValue=e}},{key:"addTagsToChips",value:function(){var e=this;if(Object(y.b)(this.currentValue)&&(!this.hasAuthority||!this.model.vocabularyOptions.closed)){var t=[];t=this.currentValue.split(",");var n=[];t.forEach((function(e){e.split(";").forEach((function(e){n.push(e)}))})),n.forEach((function(t){(t=t.trim()).length>0&&e.chips.add(t)})),setTimeout((function(){e.setCurrentValue(null),e.cdr.detectChanges()}),50),this.updateModel(event)}}}]),n}(S.a);return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](E.a),i["\u0275\u0275directiveInject"](i.ChangeDetectorRef),i["\u0275\u0275directiveInject"](w.E),i["\u0275\u0275directiveInject"](w.H))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-dynamic-tag"]],viewQuery:function(e,t){var n;(1&e&&i["\u0275\u0275viewQuery"](P,1),2&e)&&(i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(t.instance=n.first))},inputs:{bindId:"bindId",group:"group",model:"model"},outputs:{blur:"blur",change:"change",focus:"focus"},features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:10,vars:6,consts:[["rt",""],[3,"chips","editable","showIcons","wrapperClass"],["class","border-0 form-control-plaintext tag-input flex-grow-1 mt-1 mb-1","type","text","role","textbox",3,"pl-3","placeholder","readonly","ngModel","ngModelChange","blur","keypress","keydown","keyup",4,"ngIf"],["class","position-relative right-addon",4,"ngIf"],["type","text","role","textbox",1,"border-0","form-control-plaintext","tag-input","flex-grow-1","mt-1","mb-1",3,"placeholder","readonly","ngModel","ngModelChange","blur","keypress","keydown","keyup"],[1,"position-relative","right-addon"],["class","fas fa-circle-notch fa-spin fa-2x fa-fw text-primary position-absolute mt-1 p-0","aria-hidden","true",4,"ngIf"],["type","text",1,"border-0","form-control-plaintext","tag-input","flex-grow-1","mt-1","mb-1",3,"ngModel","id","inputFormatter","name","ngbTypeahead","placeholder","readonly","resultTemplate","type","ngModelChange","blur","focus","change","input","selectItem","keypress","keydown","keyup"],["instance","ngbTypeahead"],["aria-hidden","true",1,"fas","fa-circle-notch","fa-spin","fa-2x","fa-fw","text-primary","position-absolute","mt-1","p-0"]],template:function(e,t){1&e&&(i["\u0275\u0275template"](0,F,1,1,"ng-template",null,0,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275text"](2,"\n\n\n  "),i["\u0275\u0275elementStart"](3,"ds-chips",1),i["\u0275\u0275text"](4,"\n\n  "),i["\u0275\u0275template"](5,_,1,5,"input",2),i["\u0275\u0275text"](6,"\n\n  "),i["\u0275\u0275template"](7,B,7,16,"div",3),i["\u0275\u0275text"](8,"\n  "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](9,"\n\n")),2&e&&(i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("chips",t.chips)("editable",!1)("showIcons",t.model.hasAuthority)("wrapperClass","border-bottom border-light"),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!t.model.hasAuthority),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",t.model.hasAuthority))},directives:[k.a,j.p,M.DefaultValueAccessor,M.NgControlStatus,M.NgModel,V.Q],styles:[".ds-form-input-addon[_ngcontent-%COMP%]{border-top-right-radius:0!important;border-bottom-right-radius:0!important;border-right:0!important}.ds-form-input-btn[_ngcontent-%COMP%]{border:var(--bs-input-btn-border-width) solid var(--bs-input-border-color);border-top-left-radius:0;border-bottom-left-radius:0;border-left:0}.ds-form-input-btn[_ngcontent-%COMP%]:focus, button.ds-form-add-more[_ngcontent-%COMP%]:focus{-webkit-box-shadow:none!important;box-shadow:none!important}button.ds-form-add-more[_ngcontent-%COMP%]:focus{outline:none}.ds-form-input-value[_ngcontent-%COMP%]{border-top-left-radius:0!important;border-bottom-left-radius:0!important}.fa-spin[_ngcontent-%COMP%]{pointer-events:none}.left-addon[_ngcontent-%COMP%]   .far[_ngcontent-%COMP%], .left-addon[_ngcontent-%COMP%]   .fas[_ngcontent-%COMP%], .left-addon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{left:0}.right-addon[_ngcontent-%COMP%]   .far[_ngcontent-%COMP%], .right-addon[_ngcontent-%COMP%]   .fas[_ngcontent-%COMP%], .right-addon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{right:0}.left-addon[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-left:calc(var(--bs-spacer) * 2.25)}.right-addon[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-right:calc(var(--bs-spacer) * 2.25)}.chips-left[_ngcontent-%COMP%]{left:0;padding-right:100%}[_nghost-%COMP%]     .dropdown-menu{width:100%!important;max-height:var(--ds-dropdown-menu-max-height);overflow-y:scroll;overflow-x:hidden;left:0!important;margin-top:var(--bs-spacer)!important}[_nghost-%COMP%]     .dropdown-item.active, [_nghost-%COMP%]     .dropdown-item:active, [_nghost-%COMP%]     .dropdown-item:focus, [_nghost-%COMP%]     .dropdown-item:hover{color:var(--bs-dropdown-link-hover-color)!important;background-color:var(--bs-dropdown-link-hover-bg)!important}.tag-input[_ngcontent-%COMP%]{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;outline:none;width:auto!important}"]}),e}()},JN36:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return l}));var i=n("mrSG"),r=n("e+Av"),o="CUSTOM_SWITCH",l=function(){var e=function(e){a(n,e);var t=s(n);function n(e,i){var r;return d(this,n),(r=t.call(this,e,i)).type=o,r}return n}(r.r);return Object(i.b)([Object(r.U)(),Object(i.c)("design:type",String)],e.prototype,"type",void 0),e}()},"KKO+":function(e,t,n){"use strict";n.d(t,"a",(function(){return z}));var i=n("fXoL"),r=n("LRne"),o=n("itXk"),l=n("5+tZ"),c=n("lJxs"),u=n("Kqap"),p=n("pLZG"),f=n("e+Av"),h=n("LvDl"),v=n("Dh10"),g=n("J3qs"),b=n("R0Ic"),y=Object(b.m)("shrinkInOut",[Object(b.j)("in",Object(b.k)({height:"100%",opacity:1})),Object(b.l)("* => void",[Object(b.k)({height:"!",opacity:1}),Object(b.e)(200,Object(b.k)({height:0,opacity:0}))]),Object(b.l)("void => *",[Object(b.k)({height:0,opacity:0}),Object(b.e)(200,Object(b.k)({height:"*",opacity:1}))])]),x=n("Gx58"),C=n("x+ZM"),I=n("AytR"),O=n("586V"),S=n("1QIV"),E=n("PdzJ"),w=n("Q5/L"),k=n("NFsL"),j=n("ofXK"),M=n("1kSV"),V=n("hqmO"),P=n("Frqi"),F=n("gLKo"),_=n("sYmb"),L=["formRef"];function B(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"a",7),i["\u0275\u0275pipe"](1,"translate"),i["\u0275\u0275text"](2,"\n  "),i["\u0275\u0275elementStart"](3,"span",8),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().collapseForm()})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](4,"\n"),i["\u0275\u0275elementEnd"]()}2&e&&i["\u0275\u0275propertyInterpolate"]("ngbTooltip",i["\u0275\u0275pipeBind1"](1,1,"form.group-collapse-help"))}function D(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"a",7),i["\u0275\u0275pipe"](1,"translate"),i["\u0275\u0275text"](2,"\n  "),i["\u0275\u0275elementStart"](3,"span",9),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().expandForm()})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](4,"\n"),i["\u0275\u0275elementEnd"]()}2&e&&i["\u0275\u0275propertyInterpolate"]("ngbTooltip",i["\u0275\u0275pipeBind1"](1,1,"form.group-expand-help"))}function T(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",15),i["\u0275\u0275text"](1,"\n\n        "),i["\u0275\u0275elementStart"](2,"button",16),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"](2).save()})),i["\u0275\u0275text"](3,"\n          "),i["\u0275\u0275element"](4,"i",17),i["\u0275\u0275text"](5,"\n        "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](6,"\n        "),i["\u0275\u0275elementStart"](7,"button",16),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"](2).delete()})),i["\u0275\u0275text"](8,"\n          "),i["\u0275\u0275element"](9,"i",18),i["\u0275\u0275text"](10,"\n        "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](11,"\n        "),i["\u0275\u0275elementStart"](12,"button",16),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"](2).clear()})),i["\u0275\u0275text"](13,"\n          "),i["\u0275\u0275element"](14,"i",19),i["\u0275\u0275text"](15,"\n        "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](16,"\n\n    "),i["\u0275\u0275elementEnd"]()}if(2&e){var r=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("disabled",r.isMandatoryFieldEmpty()),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("disabled",!r.editMode),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("disabled",r.isMandatoryFieldEmpty())}}function R(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",10),i["\u0275\u0275text"](1,"\n    "),i["\u0275\u0275elementStart"](2,"ds-form",11,12),i["\u0275\u0275listener"]("dfBlur",(function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().onBlur(e)}))("dfFocus",(function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().onFocus(e)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](4,"\n\n\n    "),i["\u0275\u0275template"](5,T,17,3,"div",13),i["\u0275\u0275pipe"](6,"async"),i["\u0275\u0275text"](7,"\n    "),i["\u0275\u0275element"](8,"div",14),i["\u0275\u0275text"](9,"\n  "),i["\u0275\u0275elementEnd"]()}if(2&e){var r=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("@shrinkInOut",void 0),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("formId",r.formId)("formModel",r.formModel)("displaySubmit",!1)("displayCancel",!1)("emitChange",!1),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",!i["\u0275\u0275pipeBind1"](6,7,r.formCollapsed))}}function A(e,t){1&e&&i["\u0275\u0275element"](0,"ds-loading",20),2&e&&i["\u0275\u0275property"]("showMessage",!1)}function N(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275text"](1,"\n      "),i["\u0275\u0275element"](2,"input",21),i["\u0275\u0275pipe"](3,"translate"),i["\u0275\u0275text"](4,"\n    "),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](2),i["\u0275\u0275propertyInterpolate"]("value",i["\u0275\u0275pipeBind1"](3,1,"form.no-value")))}function G(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"ds-chips",22),i["\u0275\u0275listener"]("selected",(function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().onChipSelected(e)})),i["\u0275\u0275elementEnd"]()}if(2&e){var r=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("chips",r.chips)("editable",!0)("showIcons",!0)}}var $,q=function(e,t){return{"border-top":e,"border border-danger":t}},z=(($=function(e){a(n,e);var t=s(n);function n(e,o,a,l,s,c){var u;return d(this,n),(u=t.call(this,s,c)).vocabularyService=e,u.formBuilderService=o,u.formService=a,u.cdr=l,u.layoutService=s,u.validationService=c,u.blur=new i.EventEmitter,u.change=new i.EventEmitter,u.focus=new i.EventEmitter,u.formCollapsed=Object(r.a)(!1),u.editMode=!1,u.subs=[],u}return m(n,[{key:"ngOnInit",value:function(){var e=this,t={rows:this.model.formConfiguration};this.model.isEmpty()||(this.formCollapsed=Object(r.a)(!0)),this.model.valueChanges.subscribe((function(t){!Object(g.e)(t)||1===t.length&&Object(x.b)(t[0])?e.expandForm():e.collapseForm()})),this.formId=this.formService.getUniqueId(this.model.id),this.formModel=this.formBuilderService.modelFromConfiguration(this.model.submissionId,t,this.model.scopeUUID,{},this.model.submissionScope,this.model.readOnly),this.initChipsFromModelValue()}},{key:"isMandatoryFieldEmpty",value:function(){var e=this,t=!0;return this.formModel.forEach((function(n){n.group.forEach((function(n){n.name!==e.model.mandatoryField||(t=null==n.value)}))})),t}},{key:"onBlur",value:function(e){this.blur.emit()}},{key:"onChipSelected",value:function(e){var t=this;this.expandForm(),this.selectedChipItem=this.chips.getChipByIndex(e),this.formModel.forEach((function(e){e.group.forEach((function(e){var n=t.selectedChipItem.item[e.name]===O.b||t.selectedChipItem.item[e.name].value===O.b?null:t.selectedChipItem.item[e.name],i=t.formBuilderService.isInputModel(e)&&Object(g.g)(n)&&"string"!=typeof n?n.value:n;e.value=i}))})),this.editMode=!0}},{key:"onFocus",value:function(e){this.focus.emit(e)}},{key:"collapseForm",value:function(){this.formCollapsed=Object(r.a)(!0),this.clear()}},{key:"expandForm",value:function(){this.formCollapsed=Object(r.a)(!1)}},{key:"clear",value:function(){this.editMode&&(this.selectedChipItem.editMode=!1,this.selectedChipItem=null,this.editMode=!1),this.resetForm(),this.model.isEmpty()||(this.formCollapsed=Object(r.a)(!0))}},{key:"save",value:function(){this.editMode?this.modifyChip():this.addToChips()}},{key:"delete",value:function(){this.chips.remove(this.selectedChipItem),this.clear()}},{key:"ngOnDestroy",value:function(){this.subs.filter((function(e){return Object(g.b)(e)})).forEach((function(e){return e.unsubscribe()}))}},{key:"addToChips",value:function(){if(this.formRef.formGroup.valid){if(!this.isMandatoryFieldEmpty()){var e=this.buildChipItem();this.chips.add(e),this.resetForm()}}else this.formService.validateAllFormFields(this.formRef.formGroup)}},{key:"modifyChip",value:function(){if(this.formRef.formGroup.valid){if(!this.isMandatoryFieldEmpty()){var e=this.buildChipItem();this.chips.update(this.selectedChipItem.id,e),this.resetForm(),this.cdr.detectChanges()}}else this.formService.validateAllFormFields(this.formRef.formGroup)}},{key:"buildChipItem",value:function(){var e=Object.create({});return this.formModel.forEach((function(t){t.group.forEach((function(t){e[t.name]=t.value||O.b}))})),e}},{key:"initChipsFromModelValue",value:function(){var e,t=this;this.model.isEmpty()?this.initChips([]):(e=Object(r.a)(this.model.value),this.subs.push(e.pipe(Object(l.a)((function(e){var n=[];return e.forEach((function(e){var i=Object.keys(e).map((function(n){var i;if(Object(h.isObject)(e[n])&&e[n].hasAuthority()&&Object(g.e)(e[n].authority)){var o=n.replace(/\./g,"_"),a=t.formBuilderService.findById(o,t.formModel);i=t.vocabularyService.findEntryDetailById(e[n].authority,a.vocabularyOptions.name).pipe(Object(S.j)(),Object(c.a)((function(t){return Object.assign(new C.a,e[n],{otherInformation:t.otherInformation})})))}else i=Object(r.a)(e[n]);return i.pipe(Object(c.a)((function(e){return r=e,(i=n)in(t={})?Object.defineProperty(t,i,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[i]=r,t;var t,i,r})))}));n.push(Object(o.a)(i))})),n})),Object(l.a)((function(e,t){return e.pipe(Object(c.a)((function(e){return{index:t,value:e.reduce((function(e,t){return Object.assign({},e,t)}))}})))})),Object(u.a)((function(e,t){return 0===e.length?e.push(t.value):e.splice(t.index,0,t.value),e}),[]),Object(p.a)((function(e){return t.model.value.length===e.length}))).subscribe((function(e){t.model.value=e,t.initChips(e),t.cdr.markForCheck()}))))}},{key:"initChips",value:function(e){var t=this;this.chips=new v.a(e,"value",this.model.mandatoryField,I.a.submission.icons.metadata),this.subs.push(this.chips.chipsItems.subscribe((function(){var e=t.chips.getChipsItems();Object(h.isEqual)(e,t.model.value)||Object(g.d)(e)&&t.model.isEmpty()||(t.model.value=e,t.change.emit())})))}},{key:"resetForm",value:function(){this.formRef&&this.formService.resetForm(this.formRef.formGroup,this.formModel,this.formId)}}]),n}(f.z)).\u0275fac=function(e){return new(e||$)(i["\u0275\u0275directiveInject"](E.a),i["\u0275\u0275directiveInject"](w.a),i["\u0275\u0275directiveInject"](k.a),i["\u0275\u0275directiveInject"](i.ChangeDetectorRef),i["\u0275\u0275directiveInject"](f.E),i["\u0275\u0275directiveInject"](f.H))},$.\u0275cmp=i["\u0275\u0275defineComponent"]({type:$,selectors:[["ds-dynamic-relation-group"]],viewQuery:function(e,t){var n;1&e&&i["\u0275\u0275viewQuery"](L,1),2&e&&i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(t.formRef=n.first)},inputs:{formId:"formId",group:"group",model:"model"},outputs:{blur:"blur",change:"change",focus:"focus"},features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:21,vars:16,consts:[["class","close position-relative","placement","left",3,"ngbTooltip",4,"ngIf"],[1,"pt-2",3,"ngClass"],["class","pl-2 row",4,"ngIf"],[1,"d-flex"],[3,"showMessage",4,"ngIf"],[4,"ngIf"],[3,"chips","editable","showIcons","selected",4,"ngIf"],["placement","left",1,"close","position-relative",3,"ngbTooltip"],["aria-hidden","true",1,"fas","fa-angle-up","fa-fw","fa-2x",3,"click"],["aria-hidden","true",1,"fas","fa-angle-down","fa-fw","fa-2x",3,"click"],[1,"pl-2","row"],[1,"col-sm-12","col-md-8","col-lg-9","col-xl-10","pl-0",3,"formId","formModel","displaySubmit","displayCancel","emitChange","dfBlur","dfFocus"],["formRef","formComponent"],["class","col p-0 m-0 d-flex justify-content-center align-items-center",4,"ngIf"],[1,"clearfix"],[1,"col","p-0","m-0","d-flex","justify-content-center","align-items-center"],["type","button",1,"btn","btn-link",3,"disabled","click"],["aria-hidden","true",1,"fas","fa-save","text-primary","fa-2x"],["aria-hidden","true",1,"fas","fa-trash","text-danger","fa-2x"],["aria-hidden","true",1,"fas","fa-undo","fa-2x"],[3,"showMessage"],["type","text","readonly","","tabindex","-1",1,"border-0","form-control-plaintext","tag-input","mt-1","mb-1","pl-2","text-muted",3,"value"],[3,"chips","editable","showIcons","selected"]],template:function(e,t){1&e&&(i["\u0275\u0275template"](0,B,5,3,"a",0),i["\u0275\u0275pipe"](1,"async"),i["\u0275\u0275text"](2,"\n"),i["\u0275\u0275template"](3,D,5,3,"a",0),i["\u0275\u0275pipe"](4,"async"),i["\u0275\u0275text"](5,"\n\n"),i["\u0275\u0275elementStart"](6,"div",1),i["\u0275\u0275text"](7,"\n  "),i["\u0275\u0275template"](8,R,10,9,"div",2),i["\u0275\u0275pipe"](9,"async"),i["\u0275\u0275text"](10,"\n\n  "),i["\u0275\u0275elementStart"](11,"div",3),i["\u0275\u0275text"](12,"\n    "),i["\u0275\u0275template"](13,A,1,1,"ds-loading",4),i["\u0275\u0275text"](14,"\n    "),i["\u0275\u0275template"](15,N,5,3,"div",5),i["\u0275\u0275text"](16,"\n    "),i["\u0275\u0275template"](17,G,1,3,"ds-chips",6),i["\u0275\u0275text"](18,"\n  "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](19,"\n"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](20,"\n")),2&e&&(i["\u0275\u0275property"]("ngIf",!i["\u0275\u0275pipeBind1"](1,7,t.formCollapsed)),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",i["\u0275\u0275pipeBind1"](4,9,t.formCollapsed)),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngClass",i["\u0275\u0275pureFunction2"](13,q,!t.showErrorMessages,t.showErrorMessages)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!i["\u0275\u0275pipeBind1"](9,11,t.formCollapsed)),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngIf",!t.chips),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",t.chips&&!t.chips.hasItems()),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",t.chips&&t.chips.hasItems()))},directives:[j.p,j.m,M.O,V.a,P.a,F.a],pipes:[j.b,_.d],styles:[".close[_ngcontent-%COMP%]{top:-2.5rem}"],data:{animation:[y]}}),$)},Mxlh:function(e,t,n){"use strict";t.ObjectUnsubscribedError=function(){function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e}()},NvTF:function(t,i,r){"use strict";r.d(i,"b",(function(){return Pe})),r.d(i,"a",(function(){return Fe}));var o=r("fXoL"),l=r("e+Av"),c=r("n7Wa"),p=r("yXJd"),f=r("fEfZ"),h=r("4d3N"),v=r("RyS1"),g=r("b6An"),b=r("8e57"),y=r("upJS"),x=r("pze9"),C=r("J3qs"),I=r("ZJee"),O=r("Gu/b"),S=r("Ysrn"),E=r("ZO65"),w=r("A/iK"),k=r("bPV6"),j=r("0pnk"),M=r("tqJZ"),V=r("ZTun"),P=r("KKO+"),F=r("uyTL"),_=r("JN36"),L=r("xjoE"),B=r("cBqT"),D=r("eIep"),T=r("IzEk"),R=r("lJxs"),A=r("JX91"),N=r("itXk"),G=r("sw+l"),$=r("wdRg"),q=r("1Pbu"),z=r("1QIV"),H=r("4SI6"),J=r("cBt8"),X=r("84Zn"),U=r("ysan"),Q=r("kcku"),K=r("586V"),W=r("x+ZM"),Z=r("sYmb"),Y=r("1kSV"),ee=r("kN8A"),te=r("EGek"),ne=r("iqTE"),ie=r("l7P3"),re=r("fHtB"),oe=r("NFsL"),ae=r("Q5/L"),le=r("J/vq"),se=r("3Pt+"),ce=r("ofXK"),ue=r("/Vzl"),de=["componentViewContainer"],pe=function(e,t){return[e,t]};function me(e,t){if(1&e&&(o["\u0275\u0275element"](0,"label",11),o["\u0275\u0275pipe"](1,"translate"),o["\u0275\u0275pipe"](2,"translate")),2&e){var n=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("id","label_"+n.model.id)("for",n.id)("innerHTML",n.model.required&&n.model.label?o["\u0275\u0275pipeBind1"](1,4,n.model.label)+" *":o["\u0275\u0275pipeBind1"](2,6,n.model.label),o["\u0275\u0275sanitizeHtml"])("ngClass",o["\u0275\u0275pureFunction2"](8,pe,n.getClass("element","label"),n.getClass("grid","label")))}}function fe(e,t){1&e&&o["\u0275\u0275elementContainer"](0)}function he(e,t){if(1&e&&(o["\u0275\u0275element"](0,"small",12),o["\u0275\u0275pipe"](1,"translate")),2&e){var n=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("innerHTML",o["\u0275\u0275pipeBind1"](1,2,n.model.hint),o["\u0275\u0275sanitizeHtml"])("ngClass",n.getClass("element","hint"))}}function ve(e,t){1&e&&o["\u0275\u0275element"](0,"div",13)}function ge(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"small",16),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,i=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind2"](2,1,n,i.model.validators))}}function be(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",14),o["\u0275\u0275text"](1,"\n        "),o["\u0275\u0275template"](2,ge,3,4,"small",15),o["\u0275\u0275text"](3,"\n      "),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("id",n.id+"_errors")("ngClass",o["\u0275\u0275pureFunction2"](3,pe,n.getClass("element","errors"),n.getClass("grid","errors"))),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngForOf",n.errorMessages)}}function ye(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"option",21),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;o["\u0275\u0275property"]("value",n.code),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](n.display)}}var xe=function(){return{standalone:!0}};function Ce(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",17),o["\u0275\u0275text"](1,"\n      "),o["\u0275\u0275elementStart"](2,"select",18,19),o["\u0275\u0275listener"]("ngModelChange",(function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().model.language=e}))("blur",(function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().onBlur(e)}))("change",(function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().onChangeLanguage(e)})),o["\u0275\u0275text"](4,"\n        "),o["\u0275\u0275template"](5,ye,2,2,"option",20),o["\u0275\u0275text"](6,"\n      "),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](7,"\n    "),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("disabled",i.model.readOnly)("ngModel",i.model.language)("ngModelOptions",o["\u0275\u0275pureFunction0"](4,xe)),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngForOf",i.model.languageCodes)}}function Ie(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",22),o["\u0275\u0275text"](1,"\n      "),o["\u0275\u0275elementStart"](2,"button",23),o["\u0275\u0275listener"]("click",(function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().openLookup(),e.stopPropagation()})),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275element"](4,"i",24),o["\u0275\u0275text"](5,"\n      "),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](6,"\n    "),o["\u0275\u0275elementEnd"]()}2&e&&(o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("ngbTooltip",o["\u0275\u0275pipeBind1"](3,1,"form.lookup-help")))}function Oe(e,t){1&e&&o["\u0275\u0275elementContainer"](0)}function Se(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"ds-existing-metadata-list-element",27),o["\u0275\u0275listener"]("remove",(function(){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"](2).onRemove()})),o["\u0275\u0275pipe"](1,"async"),o["\u0275\u0275pipe"](2,"async"),o["\u0275\u0275text"](3,"\n    "),o["\u0275\u0275elementEnd"]()}if(2&e){var i=o["\u0275\u0275nextContext"](2);o["\u0275\u0275property"]("reoRel",o["\u0275\u0275pipeBind1"](1,6,i.relationshipValue$))("submissionItem",o["\u0275\u0275pipeBind1"](2,8,i.item$))("listId",i.listId)("metadataFields",i.model.metadataFields)("submissionId",i.model.submissionId)("relationshipOptions",i.model.relationship)}}var Ee=function(e){return{"d-block pb-2 pt-2":e}};function we(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"ds-existing-relation-list-element",28),o["\u0275\u0275pipe"](1,"async"),o["\u0275\u0275pipe"](2,"async"),o["\u0275\u0275text"](3,"\n    "),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"](2);o["\u0275\u0275property"]("ngClass",o["\u0275\u0275pureFunction1"](11,Ee,!(null!=n.context&&n.context.index)))("reoRel",o["\u0275\u0275pipeBind1"](1,7,n.relationshipValue$))("submissionItem",o["\u0275\u0275pipeBind1"](2,9,n.item$))("listId",n.listId)("metadataFields",n.model.metadataFields)("submissionId",n.model.submissionId)("relationshipOptions",n.model.relationship)}}function ke(e,t){if(1&e&&(o["\u0275\u0275element"](0,"small",12),o["\u0275\u0275pipe"](1,"translate")),2&e){var n=o["\u0275\u0275nextContext"](2);o["\u0275\u0275property"]("innerHTML",o["\u0275\u0275pipeBind1"](1,2,n.model.hint),o["\u0275\u0275sanitizeHtml"])("ngClass",n.getClass("element","hint"))}}function je(e,t){if(1&e&&(o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275text"](1,"\n    "),o["\u0275\u0275template"](2,Se,4,10,"ds-existing-metadata-list-element",25),o["\u0275\u0275text"](3,"\n    "),o["\u0275\u0275template"](4,we,4,13,"ds-existing-relation-list-element",26),o["\u0275\u0275text"](5,"\n    "),o["\u0275\u0275template"](6,ke,2,4,"small",5),o["\u0275\u0275text"](7,"\n    "),o["\u0275\u0275element"](8,"div",13),o["\u0275\u0275text"](9,"\n  "),o["\u0275\u0275elementContainerEnd"]()),2&e){var n=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",n.model.hasSelectableMetadata),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",!n.model.hasSelectableMetadata),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",n.hasHint&&(!1===n.model.repeatable||(null==n.context?null:n.context.index)===(null==n.context||null==n.context.context||null==n.context.context.groups?null:n.context.context.groups.length)-1)&&(!n.showErrorMessages||0===n.errorMessages.length))}}var Me=function(e,t){return{"form-row":e,"d-none":t}},Ve=["*"];function Pe(e){switch(e.type){case l.d:return V.a;case l.e:return c.c;case l.f:return e instanceof y.a?E.a:c.d;case l.g:return e.inline?c.b:F.a;case l.h:return M.a;case l.i:return c.e;case l.j:return e instanceof x.a?E.a:c.f;case l.l:return c.g;case l.n:return c.h;case l.o:return c.i;case f.a:return w.a;case h.a:return k.a;case v.a:return O.a;case K.a:return P.a;case g.a:return S.b;case b.a:case I.a:return j.a;case $.a:return G.a;case _.a:return L.a;default:return null}}var Fe=function(){var t=function(t){a(r,t);var i=s(r);function r(e,t,n,a,l,s,c,u,p,m,f,h,v,g,b,y,x){var C;return d(this,r),(C=i.call(this,g,e,n,a,t,s)).componentFactoryResolver=e,C.dynamicFormComponentService=t,C.layoutService=n,C.validationService=a,C.translateService=l,C.relationService=s,C.modalService=c,C.relationshipService=u,C.selectableListService=p,C.itemService=m,C.zone=f,C.store=h,C.submissionObjectService=v,C.ref=g,C.formService=b,C.formBuilderService=y,C.submissionService=x,C.asBootstrapFormGroup=!1,C.bindId=!0,C.context=null,C.hasErrorMessaging=!1,C.layout=null,C.subs=[],C.blur=new o.EventEmitter,C.change=new o.EventEmitter,C.focus=new o.EventEmitter,C.customEvent=new o.EventEmitter,C}return m(r,[{key:"componentType",get:function(){return Pe(this.model)}},{key:"ngOnInit",value:function(){var e=this;this.isRelationship=Object(C.b)(this.model.relationship);var t=Object(C.b)(this.model.relationshipConfig);if(this.isRelationship||t){var i=this.model.relationshipConfig||this.model.relationship,r=Object.assign(new Q.a,i);if(this.listId="list-".concat(this.model.submissionId,"-").concat(r.relationshipType),this.setItem(),t||!this.model.repeatable){var o=this.selectableListService.getSelectableList(this.listId).pipe(Object(B.a)((function(e){return Object(C.a)(e)})),Object(D.a)((function(){return e.item$.pipe(Object(T.a)(1))})),Object(D.a)((function(t){var n=e.relationshipService.getItemRelationshipsByLabel(t,r.relationshipType,void 0,!0,!0,Object(X.a)("leftItem"),Object(X.a)("rightItem"),Object(X.a)("relationshipType"));return n.pipe(Object(z.j)(),Object(z.n)()).subscribe((function(n){n.forEach((function(n){var i=t.firstMetadata(r.metadataField,{authority:"".concat(J.e).concat(n.id)}),o=t.firstMetadata(e.model.metadataFields,{authority:"".concat(J.e).concat(n.id)});Object(C.b)(i)&&Object(C.e)(i.value)&&Object(C.b)(o)&&Object(C.e)(o.value)&&e.relationshipService.setNameVariant(e.listId,i.value,o.value)}))})),n.pipe(Object(U.d)(t.uuid),Object(z.i)(),Object(R.a)((function(e){return e.payload.page.map((function(e){return Object.assign(new H.a,{indexableObject:e})}))})))}))).subscribe((function(t){return e.selectableListService.select(e.listId,t)}));this.subs.push(o)}if(this.value=Object(C.b)(this.model.metadataValue)?Object.assign(new W.a,this.model.metadataValue):Object.assign(new W.a,this.model.value),Object(C.b)(this.value)&&this.value.isVirtual){var a=this.relationshipService.findById(this.value.virtualValue,!0,!0,Object(X.a)("leftItem"),Object(X.a)("rightItem"),Object(X.a)("relationshipType")).pipe(Object(z.c)(),Object(z.o)());this.relationshipValue$=Object(N.a)([this.item$.pipe(Object(T.a)(1)),a]).pipe(Object(D.a)((function(t){var i=n(t,2),r=i[0],o=i[1];return o.leftItem.pipe(Object(z.c)(),Object(z.o)(),Object(R.a)((function(t){return new p.b(o,t.uuid!==r.uuid,e.relationshipService,e.store,e.model.submissionId)})))})),Object(A.a)(void 0))}}}},{key:"isCheckbox",get:function(){return this.model.type===l.e||this.model.type===_.a}},{key:"ngOnChanges",value:function(t){t&&!this.isRelationship&&Object(C.b)(this.group.get(this.model.id))&&(e(u(r.prototype),"ngOnChanges",this).call(this,t),this.model&&this.model.placeholder&&(this.model.placeholder=this.translateService.instant(this.model.placeholder)))}},{key:"ngDoCheck",value:function(){Object(C.h)(this.showErrorMessagesPreviousStage)&&this.showErrorMessagesPreviousStage!==this.showErrorMessages&&(this.showErrorMessagesPreviousStage=this.showErrorMessages,this.forceShowErrorDetection())}},{key:"ngAfterViewInit",value:function(){this.showErrorMessagesPreviousStage=this.showErrorMessages}},{key:"forceShowErrorDetection",value:function(){this.showErrorMessages&&(this.destroyFormControlComponent(),this.createFormControlComponent())}},{key:"onChangeLanguage",value:function(e){Object(C.e)(this.model.value)&&this.onChange(e)}},{key:"hasRelationship",value:function(){return Object(C.e)(this.model)&&this.model.hasOwnProperty("relationship")&&Object(C.e)(this.model.relationship)}},{key:"isVirtual",value:function(){var e=this.model.metadataValue;return Object(C.e)(e)&&e.isVirtual}},{key:"hasResultsSelected",value:function(){return this.model.value.pipe(Object(R.a)((function(e){return Object(C.e)(e)})))}},{key:"openLookup",value:function(){this.modalRef=this.modalService.open(q.a,{size:"lg"}),Object(C.b)(this.model.value)&&(this.focus.emit({$event:new Event("focus"),context:this.context,control:this.control,model:this.model,type:l.B.Focus}),this.change.emit({$event:new Event("change"),context:this.context,control:this.control,model:this.model,type:l.B.Change})),this.submissionService.dispatchSave(this.model.submissionId);var e=this.modalRef.componentInstance;Object(C.b)(this.model.value)&&!this.model.readOnly&&("string"==typeof this.model.value?e.query=this.model.value:"string"==typeof this.model.value.value&&(e.query=this.model.value.value)),e.repeatable=this.model.repeatable,e.listId=this.listId,e.relationshipOptions=this.model.relationship,e.label=this.model.relationship.relationshipType,e.metadataFields=this.model.metadataFields,e.item=this.item,e.collection=this.collection,e.submissionId=this.model.submissionId}},{key:"onRemove",value:function(){var e=this.context.context,t=this.formBuilderService.getPath(e),n=this.group.root.get(t);this.formBuilderService.removeFormArrayGroup(this.context.index,n,e),0===this.model.parent.context.groups.length&&this.formBuilderService.addFormArrayGroup(n,e)}},{key:"ngOnDestroy",value:function(){this.subs.filter((function(e){return Object(C.b)(e)})).forEach((function(e){return e.unsubscribe()}))}},{key:"hasHint",get:function(){return Object(C.e)(this.model.hint)&&"&nbsp;"!==this.model.hint}},{key:"setItem",value:function(){var e=this,t=this.submissionObjectService.findById(this.model.submissionId,!0,!0,Object(X.a)("item"),Object(X.a)("collection")).pipe(Object(z.c)(),Object(z.o)());this.item$=t.pipe(Object(D.a)((function(e){return e.item.pipe(Object(z.c)(),Object(z.o)())})));var n=t.pipe(Object(D.a)((function(e){return e.collection.pipe(Object(z.c)(),Object(z.o)())})));this.subs.push(this.item$.subscribe((function(t){return e.item=t}))),this.subs.push(n.subscribe((function(t){return e.collection=t})))}}]),r}(l.A);return t.\u0275fac=function(e){return new(e||t)(o["\u0275\u0275directiveInject"](o.ComponentFactoryResolver),o["\u0275\u0275directiveInject"](l.y),o["\u0275\u0275directiveInject"](l.E),o["\u0275\u0275directiveInject"](l.H),o["\u0275\u0275directiveInject"](Z.e),o["\u0275\u0275directiveInject"](l.F),o["\u0275\u0275directiveInject"](Y.q),o["\u0275\u0275directiveInject"](ee.a),o["\u0275\u0275directiveInject"](te.a),o["\u0275\u0275directiveInject"](ne.a),o["\u0275\u0275directiveInject"](o.NgZone),o["\u0275\u0275directiveInject"](ie.i),o["\u0275\u0275directiveInject"](re.a),o["\u0275\u0275directiveInject"](o.ChangeDetectorRef),o["\u0275\u0275directiveInject"](oe.a),o["\u0275\u0275directiveInject"](ae.a),o["\u0275\u0275directiveInject"](le.a))},t.\u0275cmp=o["\u0275\u0275defineComponent"]({type:t,selectors:[["ds-dynamic-form-control-container"]],contentQueries:function(e,t,n){var i;(1&e&&o["\u0275\u0275contentQuery"](n,l.O,0),2&e)&&(o["\u0275\u0275queryRefresh"](i=o["\u0275\u0275loadQuery"]())&&(t.contentTemplateList=i))},viewQuery:function(e,t){var n;(1&e&&o["\u0275\u0275viewQuery"](de,3,o.ViewContainerRef),2&e)&&(o["\u0275\u0275queryRefresh"](n=o["\u0275\u0275loadQuery"]())&&(t.componentViewContainerRef=n.first))},inputs:{inputTemplateList:["templates","inputTemplateList"],formId:"formId",asBootstrapFormGroup:"asBootstrapFormGroup",bindId:"bindId",context:"context",group:"group",hostClass:"hostClass",hasErrorMessaging:"hasErrorMessaging",layout:"layout",model:"model"},outputs:{blur:"dfBlur",change:"dfChange",focus:"dfFocus",customEvent:"ngbEvent"},features:[o["\u0275\u0275InheritDefinitionFeature"],o["\u0275\u0275NgOnChangesFeature"]],ngContentSelectors:Ve,decls:37,vars:23,consts:[[3,"formGroup","ngClass"],[3,"id","for","innerHTML","ngClass",4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngClass"],["componentViewContainer",""],["class","text-muted ds-hint",3,"innerHTML","ngClass",4,"ngIf"],["class","clearfix w-100 mb-2",4,"ngIf"],[3,"id","ngClass",4,"ngIf"],["class","col-xs-2",4,"ngIf"],["class","col-auto text-center",4,"ngIf"],[4,"ngIf"],[3,"id","for","innerHTML","ngClass"],[1,"text-muted","ds-hint",3,"innerHTML","ngClass"],[1,"clearfix","w-100","mb-2"],[3,"id","ngClass"],["class","invalid-feedback d-block",4,"ngFor","ngForOf"],[1,"invalid-feedback","d-block"],[1,"col-xs-2"],["required","",1,"form-control",3,"disabled","ngModel","ngModelOptions","ngModelChange","blur","change"],["language","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"col-auto","text-center"],["type","button","placement","top",1,"btn","btn-secondary",3,"ngbTooltip","click"],[1,"fa","fa-search"],[3,"reoRel","submissionItem","listId","metadataFields","submissionId","relationshipOptions","remove",4,"ngIf"],[3,"ngClass","reoRel","submissionItem","listId","metadataFields","submissionId","relationshipOptions",4,"ngIf"],[3,"reoRel","submissionItem","listId","metadataFields","submissionId","relationshipOptions","remove"],[3,"ngClass","reoRel","submissionItem","listId","metadataFields","submissionId","relationshipOptions"]],template:function(e,t){1&e&&(o["\u0275\u0275projectionDef"](),o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275text"](1,"\n  "),o["\u0275\u0275template"](2,me,3,11,"label",1),o["\u0275\u0275text"](3,"\n  "),o["\u0275\u0275template"](4,fe,1,0,"ng-container",2),o["\u0275\u0275text"](5,"\n  "),o["\u0275\u0275text"](6,"\n  "),o["\u0275\u0275elementStart"](7,"div",3),o["\u0275\u0275text"](8,"\n    "),o["\u0275\u0275elementStart"](9,"div",3),o["\u0275\u0275text"](10,"\n      "),o["\u0275\u0275elementStart"](11,"div"),o["\u0275\u0275text"](12,"\n        "),o["\u0275\u0275elementContainer"](13,null,4),o["\u0275\u0275text"](15,"\n      "),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](16,"\n\n      "),o["\u0275\u0275template"](17,he,2,4,"small",5),o["\u0275\u0275text"](18,"\n      "),o["\u0275\u0275text"](19,"\n      "),o["\u0275\u0275template"](20,ve,1,0,"div",6),o["\u0275\u0275text"](21,"\n\n      "),o["\u0275\u0275template"](22,be,4,6,"div",7),o["\u0275\u0275text"](23,"\n\n    "),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](24,"\n    "),o["\u0275\u0275template"](25,Ce,8,5,"div",8),o["\u0275\u0275text"](26,"\n    "),o["\u0275\u0275template"](27,Ie,7,3,"div",9),o["\u0275\u0275text"](28,"\n  "),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](29,"\n  "),o["\u0275\u0275template"](30,Oe,1,0,"ng-container",2),o["\u0275\u0275text"](31,"\n  "),o["\u0275\u0275template"](32,je,10,3,"ng-container",10),o["\u0275\u0275text"](33,"\n  "),o["\u0275\u0275projection"](34),o["\u0275\u0275text"](35,"\n"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](36,"\n")),2&e&&(o["\u0275\u0275classProp"]("form-group","GROUP"!==t.model.type&&t.asBootstrapFormGroup||t.getClass("element","container").includes("form-group")),o["\u0275\u0275property"]("formGroup",t.group)("ngClass",o["\u0275\u0275pureFunction2"](17,pe,t.getClass("element","container"),t.getClass("grid","container"))),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",!t.isCheckbox&&t.hasLabel),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngTemplateOutlet",null==t.startTemplate?null:t.startTemplate.templateRef)("ngTemplateOutletContext",t.model),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngClass",o["\u0275\u0275pureFunction2"](20,Me,t.model.hasLanguages||t.isRelationship,(null==t.value?null:t.value.isVirtual)&&(t.model.hasSelectableMetadata||(null==t.context?null:t.context.index)>0))),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngClass",t.getClass("grid","control")),o["\u0275\u0275advance"](8),o["\u0275\u0275property"]("ngIf",t.hasHint&&(!t.model.repeatable&&(!1===t.isRelationship||null===(null==t.value?null:t.value.value))||!0===t.model.repeatable&&(null==t.context?null:t.context.index)===(null==t.context||null==t.context.context||null==t.context.context.groups?null:t.context.context.groups.length)-1)&&(!t.showErrorMessages||0===t.errorMessages.length)),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngIf",null!==(null==t.context?null:t.context.index)&&(!t.showErrorMessages||0===t.errorMessages.length)),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",t.showErrorMessages),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngIf",t.model.languageCodes&&t.model.languageCodes.length>0),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",t.isRelationship),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngTemplateOutlet",null==t.endTemplate?null:t.endTemplate.templateRef)("ngTemplateOutletContext",t.model),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",null==t.value?null:t.value.isVirtual))},directives:[se.NgControlStatusGroup,se.FormGroupDirective,ce.m,ce.p,ce.t,ce.o,se.SelectControlValueAccessor,se.RequiredValidator,se.NgControlStatus,se.NgModel,se.NgSelectOption,se["\u0275angular_packages_forms_forms_z"],Y.O,p.a,ue.a],pipes:[Z.d,ce.b],styles:["[_nghost-%COMP%]     .ds-form-input-addon{border-top-right-radius:0!important;border-bottom-right-radius:0!important;border-right:0!important}[_nghost-%COMP%]     .ds-form-input-btn{border:var(--bs-input-btn-border-width) solid var(--bs-input-border-color);border-top-left-radius:0;border-bottom-left-radius:0;border-left:0}[_nghost-%COMP%]     .ds-form-input-btn:focus, [_nghost-%COMP%]     button.ds-form-add-more:focus{-webkit-box-shadow:none!important;box-shadow:none!important}[_nghost-%COMP%]     button.ds-form-add-more:focus{outline:none}[_nghost-%COMP%]     .ds-form-input-value{border-top-left-radius:0!important;border-bottom-left-radius:0!important}[_nghost-%COMP%]     .fa-spin{pointer-events:none}[_nghost-%COMP%]     .left-addon .far, [_nghost-%COMP%]     .left-addon .fas, [_nghost-%COMP%]     .left-addon i{left:0}[_nghost-%COMP%]     .right-addon .far, [_nghost-%COMP%]     .right-addon .fas, [_nghost-%COMP%]     .right-addon i{right:0}[_nghost-%COMP%]     .left-addon input{padding-left:calc(var(--bs-spacer) * 2.25)}[_nghost-%COMP%]     .right-addon input{padding-right:calc(var(--bs-spacer) * 2.25)}[_nghost-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}[_nghost-%COMP%]     .custom-select{-webkit-appearance:none;-moz-appearance:none;appearance:none}"]}),t}()},Ssu8:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var i=n("fXoL"),r=n("e+Av"),o=n("lJxs"),l=n("LRne"),c=n("J3qs"),u=n("x+ZM"),p=n("rbjh"),f=n("oBfO"),h=n("PdzJ"),v=function(){var e=function(e){a(n,e);var t=s(n);function n(e,r,o){var a;return d(this,n),(a=t.call(this,r,o)).vocabularyService=e,a.layoutService=r,a.validationService=o,a.blur=new i.EventEmitter,a.change=new i.EventEmitter,a.focus=new i.EventEmitter,a}return m(n,[{key:"getInitValueFromModel",value:function(){var e,t=this;Object(c.e)(this.model.value)&&this.model.value instanceof u.a?e=(this.model.value.hasAuthority()?this.vocabularyService.getVocabularyEntryByID(this.model.value.authority,this.model.vocabularyOptions):this.vocabularyService.getVocabularyEntryByValue(this.model.value.value,this.model.vocabularyOptions)).pipe(Object(o.a)((function(e){return Object(c.e)(e)?new u.a(e.value,null,e.authority,e.display,t.model.value.place,null,e.otherInformation||null):t.model.value}))):e=Object(c.e)(this.model.value)&&this.model.value instanceof p.a?Object(l.a)(new u.a(this.model.value.value,null,this.model.value.authority,this.model.value.display,0,null,this.model.value.otherInformation||null)):Object(l.a)(new u.a(this.model.value));return e}},{key:"onBlur",value:function(e){this.blur.emit(e)}},{key:"onFocus",value:function(e){this.focus.emit(e)}},{key:"dispatchUpdate",value:function(e){this.model.value=e,this.change.emit(e)}},{key:"updatePageInfo",value:function(e,t,n,i){this.pageInfo=Object.assign(new f.a,{elementsPerPage:e,currentPage:t,totalElements:n,totalPages:i})}}]),n}(r.z);return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](h.a),i["\u0275\u0275directiveInject"](r.E),i["\u0275\u0275directiveInject"](r.H))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-dynamic-vocabulary"]],inputs:{group:"group",model:"model"},outputs:{blur:"blur",change:"change",focus:"focus"},features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:0,vars:0,template:function(e,t){},encapsulation:2}),e}()},Ui2r:function(e,t,n){"use strict";n.d(t,"a",(function(){return $}));var r=n("fXoL"),o=n("dtp9"),l=n("joI/"),c=n("7DXY"),u=n("J3qs"),p=n("IzEk"),f=n("lJxs"),h=n("vkgz"),v=n("eIep"),g=n("7o/Q"),b=function(){function e(t){d(this,e),this.value=t}return m(e,[{key:"call",value:function(e,t){return t.subscribe(new y(e,this.value))}}]),e}(),y=function(e){a(n,e);var t=s(n);function n(e,i){var r;return d(this,n),(r=t.call(this,e)).value=i,r}return m(n,[{key:"_next",value:function(e){this.destination.next(this.value)}}]),n}(g.a),x=n("1QIV"),C=n("84tU"),I=n("7RJT"),O=n("gWc+"),S=n("EGek"),E=n("OAtg"),w=n("kN8A"),k=n("MFUF"),j=n("ofXK"),M=n("9H8w"),V=n("1kSV"),P=n("O/5o"),F=n("sYmb");function _(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"input",14),r["\u0275\u0275listener"]("change",(function(){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"](3).selectAll()})),r["\u0275\u0275elementEnd"]()}2&e&&r["\u0275\u0275property"]("indeterminate",!1)}function L(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"input",14),r["\u0275\u0275listener"]("change",(function(){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"](3).deselectAll()})),r["\u0275\u0275elementEnd"]()}2&e&&r["\u0275\u0275property"]("indeterminate",!0)}function B(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"input",15),r["\u0275\u0275listener"]("change",(function(){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"](3).deselectAll()})),r["\u0275\u0275elementEnd"]()}2&e&&r["\u0275\u0275property"]("checked",!0)}function D(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"button",16),r["\u0275\u0275text"](1,"\n                            "),r["\u0275\u0275element"](2,"span",17),r["\u0275\u0275text"](3,"\n          "),r["\u0275\u0275elementStart"](4,"span",12),r["\u0275\u0275text"](5),r["\u0275\u0275pipe"](6,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](7,"\n        "),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](5),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind1"](6,1,"submission.sections.describe.relationship-lookup.search-tab.loading")))}function T(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",18),r["\u0275\u0275text"](1,"\n          "),r["\u0275\u0275elementStart"](2,"button",19),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](n);var e=t.ngVar;return r["\u0275\u0275nextContext"](3).selectPage(null==e?null:e.page)})),r["\u0275\u0275text"](3),r["\u0275\u0275pipe"](4,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](5,"\n          "),r["\u0275\u0275elementStart"](6,"button",19),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](n);var e=t.ngVar;return r["\u0275\u0275nextContext"](3).deselectPage(null==e?null:e.page)})),r["\u0275\u0275text"](7),r["\u0275\u0275pipe"](8,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](9,"\n          "),r["\u0275\u0275elementStart"](10,"button",19),r["\u0275\u0275listener"]("click",(function(){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"](3).selectAll()})),r["\u0275\u0275text"](11),r["\u0275\u0275pipe"](12,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](13,"\n          "),r["\u0275\u0275elementStart"](14,"button",19),r["\u0275\u0275listener"]("click",(function(){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"](3).deselectAll()})),r["\u0275\u0275text"](15),r["\u0275\u0275pipe"](16,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](17,"\n        "),r["\u0275\u0275elementEnd"]()}2&e&&(r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind1"](4,4,"submission.sections.describe.relationship-lookup.search-tab.select-page")),r["\u0275\u0275advance"](4),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind1"](8,6,"submission.sections.describe.relationship-lookup.search-tab.deselect-page")),r["\u0275\u0275advance"](4),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind1"](12,8,"submission.sections.describe.relationship-lookup.search-tab.select-all")),r["\u0275\u0275advance"](4),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind1"](16,10,"submission.sections.describe.relationship-lookup.search-tab.deselect-all")))}function R(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"div",3),r["\u0275\u0275text"](1,"\n    "),r["\u0275\u0275elementStart"](2,"div",4),r["\u0275\u0275text"](3,"\n      "),r["\u0275\u0275elementStart"](4,"div",5),r["\u0275\u0275text"](5,"\n        "),r["\u0275\u0275elementStart"](6,"div",6),r["\u0275\u0275text"](7,"\n          "),r["\u0275\u0275text"](8,"\n\n          "),r["\u0275\u0275template"](9,_,1,1,"input",7),r["\u0275\u0275pipe"](10,"async"),r["\u0275\u0275text"](11,"\n          "),r["\u0275\u0275template"](12,L,1,1,"input",7),r["\u0275\u0275pipe"](13,"async"),r["\u0275\u0275text"](14,"\n          "),r["\u0275\u0275template"](15,B,1,1,"input",8),r["\u0275\u0275text"](16,"\n        "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](17,"\n      "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](18,"\n      "),r["\u0275\u0275elementStart"](19,"div",9),r["\u0275\u0275text"](20,"\n        "),r["\u0275\u0275template"](21,D,8,3,"button",10),r["\u0275\u0275text"](22,"\n        "),r["\u0275\u0275elementStart"](23,"button",11),r["\u0275\u0275text"](24,"\n          "),r["\u0275\u0275elementStart"](25,"span",12),r["\u0275\u0275text"](26),r["\u0275\u0275pipe"](27,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](28,"\n        "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](29,"\n        "),r["\u0275\u0275template"](30,T,18,12,"div",13),r["\u0275\u0275pipe"](31,"async"),r["\u0275\u0275text"](32,"\n      "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](33,"\n    "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](34,"\n  "),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275nextContext"](2);r["\u0275\u0275advance"](9),r["\u0275\u0275property"]("ngIf",!n.allSelected&&!r["\u0275\u0275pipeBind1"](10,7,n.someSelected$)),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngIf",!n.allSelected&&r["\u0275\u0275pipeBind1"](13,9,n.someSelected$)),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngIf",n.allSelected),r["\u0275\u0275advance"](6),r["\u0275\u0275property"]("ngIf",n.selectAllLoading),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("hidden",n.selectAllLoading),r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind1"](27,11,"submission.sections.describe.relationship-lookup.toggle-dropdown")),r["\u0275\u0275advance"](4),r["\u0275\u0275property"]("ngVar",r["\u0275\u0275pipeBind1"](31,13,n.resultsRD$))}}var A=function(e,t){return{repeatable:e,listId:t}};function N(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"ds-search",1),r["\u0275\u0275listener"]("resultFound",(function(e){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().onResultFound(e)}))("deselectObject",(function(e){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().deselectObject.emit(e)}))("selectObject",(function(e){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().selectObject.emit(e)})),r["\u0275\u0275text"](1,"\n  "),r["\u0275\u0275template"](2,R,35,15,"div",2),r["\u0275\u0275text"](3,"\n\n"),r["\u0275\u0275elementEnd"]()}if(2&e){var i=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("configuration",i.relationship.searchConfiguration)("context",i.context)("fixedFilterQuery",i.relationship.filter)("inPlaceSearch",!0)("linkType",i.linkTypes.ExternalLink)("searchFormPlaceholder","submission.sections.describe.relationship-lookup.search-tab.search-form.placeholder")("selectable",!0)("selectionConfig",r["\u0275\u0275pureFunction2"](10,A,i.repeatable,i.listId))("showViewModes",!1),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",i.repeatable)}}var G,$=((G=function(){function e(t,n,i,o,a,l){d(this,e),this.searchService=t,this.selectableListService=n,this.searchConfigService=i,this.lookupRelationService=o,this.relationshipService=a,this.paginationService=l,this.deselectObject=new r.EventEmitter,this.selectObject=new r.EventEmitter,this.resultsRD$=new I.BehaviorSubject(null),this.initialPagination={page:1,pageSize:5},this.linkTypes=C.a,this.resultFound=new r.EventEmitter}return m(e,[{key:"ngOnInit",value:function(){this.resetRoute()}},{key:"resetRoute",value:function(){this.paginationService.updateRoute(this.searchConfigService.paginationID,this.initialPagination)}},{key:"selectPage",value:function(e){var t=this;this.selection$.pipe(Object(p.a)(1)).subscribe((function(n){var r,o=e.filter((function(e){return n.findIndex((function(t){return t.equals(e)}))<0}));(r=t.selectObject).emit.apply(r,i(o))})),this.selectableListService.select(this.listId,e)}},{key:"deselectPage",value:function(e){var t=this;this.allSelected=!1,this.selection$.pipe(Object(p.a)(1)).subscribe((function(n){var r,o=e.filter((function(e){return n.findIndex((function(t){return t.equals(e)}))>=0}));(r=t.deselectObject).emit.apply(r,i(o))})),this.selectableListService.deselect(this.listId,e)}},{key:"selectAll",value:function(){var e=this;this.allSelected=!0,this.selectAllLoading=!0;var t=Object.assign(new c.a,{currentPage:1,pageSize:9999}),n=Object.assign(this.lookupRelationService.searchConfig,{pagination:t});this.searchService.search(n).pipe(Object(x.i)(),Object(f.a)((function(e){return e.payload.page})),Object(h.a)((function(){return e.selectAllLoading=!1})),Object(v.a)((function(t){return e.selection$.pipe(Object(p.a)(1),Object(h.a)((function(n){var r,o=t.filter((function(e){return n.findIndex((function(t){return t.equals(e)}))<0}));(r=e.selectObject).emit.apply(r,i(o))})),(n=t,function(e){return e.lift(new b(n))}));var n}))).subscribe((function(t){e.selectableListService.select(e.listId,t)}))}},{key:"setSelectedIds",value:function(e,t){var n=this,i=this.relationshipType.rightwardType;this.isLeft&&(i=this.relationshipType.leftwardType),this.relationshipService.searchByItemsAndType(this.relationshipType.id,this.item.uuid,i,e).pipe(Object(x.i)(),Object(x.o)()).subscribe((function(e){var i=e.page.map((function(e){var i;return i=n.isLeft?e._links.rightItem.href.split("/"):e._links.leftItem.href.split("/"),n.getRelatedItem(i[i.length-1],t)}));(i=i.filter((function(e){return!n.getIfInRemove(e.indexableObject.uuid)}))).length>0&&n.selectableListService.select(n.listId,i)}))}},{key:"deselectAll",value:function(){var e=this;this.allSelected=!1,this.selection$.pipe(Object(p.a)(1)).subscribe((function(t){var n;return(n=e.deselectObject).emit.apply(n,i(t))})),this.selectableListService.deselectAll(this.listId)}},{key:"getRelatedItem",value:function(e,t){return t.find((function(t){return t.indexableObject.uuid===e}))}},{key:"getIfInRemove",value:function(e){return!!this.toRemove.find((function(t){return t.indexableObject.uuid===e}))}},{key:"ngOnDestroy",value:function(){Object(u.b)(this.subscription)&&this.subscription.unsubscribe()}},{key:"onResultFound",value:function(e){if(this.resultsRD$.next(e),this.resultFound.emit(e),this.isEditRelationship){var t=e.page.map((function(e){return e.indexableObject.uuid}));this.setSelectedIds(t,e.page)}}}]),e}()).\u0275fac=function(e){return new(e||G)(r["\u0275\u0275directiveInject"](O.a),r["\u0275\u0275directiveInject"](S.a),r["\u0275\u0275directiveInject"](l.a),r["\u0275\u0275directiveInject"](E.a),r["\u0275\u0275directiveInject"](w.a),r["\u0275\u0275directiveInject"](k.a))},G.\u0275cmp=r["\u0275\u0275defineComponent"]({type:G,selectors:[["ds-dynamic-lookup-relation-search-tab"]],inputs:{relationship:"relationship",listId:"listId",query:"query",repeatable:"repeatable",selection$:"selection$",context:"context",relationshipType:"relationshipType",item:"item",isLeft:"isLeft",toRemove:"toRemove",isEditRelationship:"isEditRelationship"},outputs:{deselectObject:"deselectObject",selectObject:"selectObject",resultFound:"resultFound"},features:[r["\u0275\u0275ProvidersFeature"]([{provide:o.SEARCH_CONFIG_SERVICE,useClass:l.a}])],decls:2,vars:1,consts:[[3,"configuration","context","fixedFilterQuery","inPlaceSearch","linkType","searchFormPlaceholder","selectable","selectionConfig","showViewModes","resultFound","deselectObject","selectObject",4,"ngIf"],[3,"configuration","context","fixedFilterQuery","inPlaceSearch","linkType","searchFormPlaceholder","selectable","selectionConfig","showViewModes","resultFound","deselectObject","selectObject"],["additionalSearchOptions","","class","position-absolute",4,"ngIf"],["additionalSearchOptions","",1,"position-absolute"],[1,"input-group","mb-3"],[1,"input-group-prepend"],[1,"input-group-text"],["type","checkbox",3,"indeterminate","change",4,"ngIf"],["type","checkbox",3,"checked","change",4,"ngIf"],["ngbDropdown","",1,"input-group-append"],["type","button","class","btn btn-outline-secondary rounded-right",4,"ngIf"],["id","resultdropdown","type","button","ngbDropdownToggle","","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"btn","btn-outline-secondary","dropdown-toggle-split",3,"hidden"],[1,"sr-only"],["ngbDropdownMenu","","aria-labelledby","resultdropdown",4,"ngVar"],["type","checkbox",3,"indeterminate","change"],["type","checkbox",3,"checked","change"],["type","button",1,"btn","btn-outline-secondary","rounded-right"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],["ngbDropdownMenu","","aria-labelledby","resultdropdown"],[1,"dropdown-item",3,"click"]],template:function(e,t){1&e&&(r["\u0275\u0275template"](0,N,4,13,"ds-search",0),r["\u0275\u0275text"](1,"\n")),2&e&&r["\u0275\u0275property"]("ngIf",t.relationship.searchConfiguration&&t.context)},directives:[j.p,M.a,V.j,V.o,P.a,V.m],pipes:[j.b,F.d],styles:[".position-absolute[_ngcontent-%COMP%]{right:var(--bs-spacer)}"]}),G)},ZO65:function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var i=n("fXoL"),r=n("e+Av"),o=n("LvDl"),l=n("J3qs"),c=n("1QIV"),u=n("oBfO"),p=n("PdzJ"),f=n("Q5/L"),h=n("3Pt+"),v=n("ofXK");function g(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",7),i["\u0275\u0275text"](1,"\n\n          "),i["\u0275\u0275elementStart"](2,"input",8),i["\u0275\u0275listener"]("blur",(function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"](3).onBlur(e)}))("change",(function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"](3).onChange(e)}))("focus",(function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"](3).onFocus(e)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](3,"\n        "),i["\u0275\u0275elementStart"](4,"label",9),i["\u0275\u0275text"](5,"\n          "),i["\u0275\u0275element"](6,"span",10),i["\u0275\u0275text"](7,"\n        "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](8,"\n      "),i["\u0275\u0275elementEnd"]()}if(2&e){var r=t.$implicit,o=i["\u0275\u0275nextContext"](3);i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("checked",r.value)("id",r.id)("formControlName",r.id)("name",o.model.name)("required",o.model.required)("value",r.value),i["\u0275\u0275attribute"]("aria-labelledby","label_"+o.model.id)("tabindex",r.index),i["\u0275\u0275advance"](2),i["\u0275\u0275classProp"]("disabled",o.model.disabled),i["\u0275\u0275property"]("ngClass",null==o.model.layout.element?null:o.model.layout.element.control)("for",r.id),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngClass",null==o.model.layout.element?null:o.model.layout.element.label)("innerHTML",r.label,i["\u0275\u0275sanitizeHtml"])}}function b(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",5),i["\u0275\u0275text"](1,"\n\n      "),i["\u0275\u0275template"](2,g,9,14,"div",6),i["\u0275\u0275text"](3,"\n      "),i["\u0275\u0275element"](4,"br"),i["\u0275\u0275text"](5,"\n    "),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",n)}}function y(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",3),i["\u0275\u0275text"](1,"\n\n    "),i["\u0275\u0275template"](2,b,6,1,"div",4),i["\u0275\u0275text"](3,"\n\n  "),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("id",n.id)("formGroupName",n.model.id)("ngClass",null==n.model.layout.element?null:n.model.layout.element.control),i["\u0275\u0275attribute"]("tabindex",n.model.tabIndex),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",n.items)}}function x(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",13),i["\u0275\u0275text"](1,"\n        "),i["\u0275\u0275elementStart"](2,"label",14),i["\u0275\u0275text"](3,"\n          "),i["\u0275\u0275elementStart"](4,"input",15),i["\u0275\u0275listener"]("blur",(function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"](3).onBlur(e)}))("focus",(function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"](3).onFocus(e)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](5,"\n          "),i["\u0275\u0275element"](6,"span",10),i["\u0275\u0275text"](7,"\n        "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](8,"\n      "),i["\u0275\u0275elementEnd"]()}if(2&e){var r=t.$implicit,o=i["\u0275\u0275nextContext"](3);i["\u0275\u0275advance"](2),i["\u0275\u0275classProp"]("disabled",o.model.disabled),i["\u0275\u0275property"]("ngClass",null==o.model.layout.element?null:o.model.layout.element.control),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("checked",r.value)("id",r.id)("name",o.model.id)("required",o.model.required)("value",r.index),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngClass",null==o.model.layout.element?null:o.model.layout.element.label)("innerHTML",r.label,i["\u0275\u0275sanitizeHtml"])}}function C(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",5),i["\u0275\u0275text"](1,"\n\n      "),i["\u0275\u0275template"](2,x,9,10,"div",12),i["\u0275\u0275text"](3,"\n      "),i["\u0275\u0275element"](4,"br"),i["\u0275\u0275text"](5,"\n    "),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",n)}}function I(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",11),i["\u0275\u0275listener"]("change",(function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().onChange(e)})),i["\u0275\u0275text"](1,"\n\n    "),i["\u0275\u0275template"](2,C,6,1,"div",4),i["\u0275\u0275text"](3,"\n\n  "),i["\u0275\u0275elementEnd"]()}if(2&e){var r=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("id",r.id)("ngClass",null==r.model.layout.element?null:r.model.layout.element.control),i["\u0275\u0275attribute"]("tabindex",r.model.tabIndex),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",r.items)}}var O=function(){var e=function(e){a(n,e);var t=s(n);function n(e,r,o,a,l){var s;return d(this,n),(s=t.call(this,a,l)).vocabularyService=e,s.cdr=r,s.formBuilderService=o,s.layoutService=a,s.validationService=l,s.blur=new i.EventEmitter,s.change=new i.EventEmitter,s.focus=new i.EventEmitter,s.items=[],s}return m(n,[{key:"ngOnInit",value:function(){this.model.vocabularyOptions&&Object(l.b)(this.model.vocabularyOptions.name)&&this.setOptionsFromVocabulary()}},{key:"onBlur",value:function(e){this.blur.emit(e)}},{key:"onFocus",value:function(e){this.focus.emit(e)}},{key:"onChange",value:function(e){var t=e.target;if(this.model.repeatable){var n=this.optionsList[t.tabIndex];if(t.checked)this.model.valueUpdates.next(n);else{var i=[];this.model.value.filter((function(e){return e.value!==n.value})).forEach((function(e){return i.push(e)})),this.model.valueUpdates.next(i)}}else this.model.value=this.optionsList[t.value];this.change.emit(e)}},{key:"setOptionsFromVocabulary",value:function(){var e=this;if(this.model.vocabularyOptions.name&&this.model.vocabularyOptions.name.length>0){var t=this.group.controls[this.model.id],n=new u.a({elementsPerPage:9999,currentPage:1});this.vocabularyService.getVocabularyEntries(this.model.vocabularyOptions,n).pipe(Object(c.j)()).subscribe((function(n){var i=0,a=0,s=[];e.optionsList=n.page,n.page.forEach((function(n,c){var u=n.authority||n.value,d=Object(l.e)(Object(o.findKey)(e.model.value,(function(e){return e.value===n.value}))),p={id:u,label:n.display,value:d,index:c};e.model.repeatable?e.formBuilderService.addFormGroupControl(t,e.model,new r.r(p)):e.model.options.push({label:p.label,value:n}),s.push(p),a++,e.items[i]=s,a===e.model.groupLength&&(i++,a=0,s=[])})),e.cdr.markForCheck()}))}}}]),n}(r.z);return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](p.a),i["\u0275\u0275directiveInject"](i.ChangeDetectorRef),i["\u0275\u0275directiveInject"](f.a),i["\u0275\u0275directiveInject"](r.E),i["\u0275\u0275directiveInject"](r.H))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-dynamic-list"]],inputs:{group:"group",model:"model"},outputs:{blur:"blur",change:"change",focus:"focus"},features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:7,vars:3,consts:[[3,"formGroup"],["class","form-row",3,"id","formGroupName","ngClass",4,"ngIf"],["class","form-row","ngbRadioGroup","",3,"id","ngClass","change",4,"ngIf"],[1,"form-row",3,"id","formGroupName","ngClass"],["class","col-sm ml-3",4,"ngFor","ngForOf"],[1,"col-sm","ml-3"],["class","custom-control custom-checkbox",4,"ngFor","ngForOf"],[1,"custom-control","custom-checkbox"],["type","checkbox",1,"custom-control-input",3,"checked","id","formControlName","name","required","value","blur","change","focus"],[1,"custom-control-label",3,"ngClass","for"],[3,"ngClass","innerHTML"],["ngbRadioGroup","",1,"form-row",3,"id","ngClass","change"],["class","custom-control custom-radio",4,"ngFor","ngForOf"],[1,"custom-control","custom-radio"],[1,"custom-control-label",3,"ngClass"],["type","radio",1,"custom-control-input",3,"checked","id","name","required","value","blur","focus"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275text"](1,"\n  "),i["\u0275\u0275template"](2,y,4,5,"div",1),i["\u0275\u0275text"](3,"\n\n  "),i["\u0275\u0275template"](4,I,4,4,"div",2),i["\u0275\u0275text"](5,"\n"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](6,"\n")),2&e&&(i["\u0275\u0275property"]("formGroup",t.group),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",t.model.repeatable),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!t.model.repeatable))},directives:[h.NgControlStatusGroup,h.FormGroupDirective,v.p,h.FormGroupName,v.m,v.o,h.CheckboxControlValueAccessor,h.CheckboxRequiredValidator,h.NgControlStatus,h.FormControlName],styles:[""]}),e}()},ZTun:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var i=n("fXoL"),r=n("e+Av"),o=n("J3qs");function l(e,t){1&e&&i["\u0275\u0275elementContainer"](0)}var c=function(e){return[e]},u=function(e,t){return[e,t]};function p(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"ds-dynamic-form-control-container",9),i["\u0275\u0275listener"]("dfBlur",(function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"](2).onBlur(e)}))("dfChange",(function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"](2).onChange(e)}))("dfFocus",(function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"](2).onFocus(e)}))("ngbEvent",(function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"](2).onCustomEvent(e,null,!0)})),i["\u0275\u0275elementEnd"]()}if(2&e){var r=t.$implicit,o=i["\u0275\u0275nextContext"](),a=o.$implicit,l=o.index,s=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("bindId",!1)("formGroup",s.group)("context",a)("group",s.control.get(i["\u0275\u0275pureFunction1"](9,c,l)))("hidden",r.hidden)("layout",s.formLayout)("model",r)("templates",s.templates)("ngClass",i["\u0275\u0275pureFunction2"](11,u,s.getClass("element","host",r),s.getClass("grid","host",r)))}}function f(e,t){1&e&&i["\u0275\u0275elementContainer"](0)}function h(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",4),i["\u0275\u0275text"](1,"\n          "),i["\u0275\u0275text"](2,"\n          "),i["\u0275\u0275elementStart"](3,"div",5),i["\u0275\u0275text"](4,"\n            "),i["\u0275\u0275element"](5,"i",6),i["\u0275\u0275text"](6,"\n          "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](7,"\n          "),i["\u0275\u0275template"](8,l,1,0,"ng-container",7),i["\u0275\u0275text"](9,"\n          "),i["\u0275\u0275template"](10,p,1,14,"ds-dynamic-form-control-container",8),i["\u0275\u0275text"](11,"\n\n          "),i["\u0275\u0275template"](12,f,1,0,"ng-container",7),i["\u0275\u0275text"](13,"\n        "),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,r=t.index,o=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("formGroupName",r)("ngClass",i["\u0275\u0275pureFunction2"](13,u,o.getClass("element","group"),o.getClass("grid","group")))("cdkDragDisabled",o.dragDisabled)("cdkDragPreviewClass","ds-submission-reorder-dragging"),i["\u0275\u0275advance"](3),i["\u0275\u0275classProp"]("drag-disable",o.dragDisabled),i["\u0275\u0275advance"](2),i["\u0275\u0275classProp"]("drag-disable",o.dragDisabled),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngTemplateOutlet",null==o.startTemplate?null:o.startTemplate.templateRef)("ngTemplateOutletContext",n),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",n.group),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngTemplateOutlet",null==o.endTemplate?null:o.endTemplate.templateRef)("ngTemplateOutletContext",n)}}var v=function(){var e=function(e){a(n,e);var t=s(n);function n(e,r){var o;return d(this,n),(o=t.call(this,e,r)).layoutService=e,o.validationService=r,o.blur=new i.EventEmitter,o.change=new i.EventEmitter,o.focus=new i.EventEmitter,o.customEvent=new i.EventEmitter,o}return m(n,[{key:"moveSelection",value:function(e){if(e.previousIndex!==e.currentIndex){this.model.moveGroup(e.previousIndex,e.currentIndex-e.previousIndex);var t=e.previousIndex,n=e.currentIndex;Object(o.b)(this.model.groups[n])&&Object(o.b)(this.control.controls[n])&&this.onCustomEvent({previousIndex:t,index:n,arrayModel:this.model,model:this.model.groups[n].group[0],control:this.control.controls[n]},"move")}}},{key:"update",value:function(e,t){var n=Object.assign({},e,{context:{index:t-1}});this.onChange(n)}},{key:"dragDisabled",get:function(){return 1===this.model.groups.length||!this.model.isDraggable}}]),n}(r.u);return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](r.E),i["\u0275\u0275directiveInject"](r.H))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-dynamic-form-array"]],inputs:{formLayout:"formLayout",group:"group",layout:"layout",model:"model",templates:"templates"},outputs:{blur:"dfBlur",change:"dfChange",focus:"dfFocus",customEvent:"ngbEvent"},features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:13,vars:5,consts:[[3,"formGroup"],[3,"id","formArrayName","ngClass"],["cdkDropList","","cdkDropListLockAxis","y",3,"cdkDropListDropped"],["role","group","cdkDrag","","cdkDragHandle","",3,"formGroupName","ngClass","cdkDragDisabled","cdkDragPreviewClass",4,"ngFor","ngForOf"],["role","group","cdkDrag","","cdkDragHandle","",3,"formGroupName","ngClass","cdkDragDisabled","cdkDragPreviewClass"],["tabindex","0",1,"drag-handle"],[1,"drag-icon","fas","fa-grip-vertical","fa-fw"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"bindId","formGroup","context","group","hidden","layout","model","templates","ngClass","dfBlur","dfChange","dfFocus","ngbEvent",4,"ngFor","ngForOf"],[3,"bindId","formGroup","context","group","hidden","layout","model","templates","ngClass","dfBlur","dfChange","dfFocus","ngbEvent"]],template:function(e,t){1&e&&(i["\u0275\u0275elementContainerStart"](0,0),i["\u0275\u0275text"](1,"\n    "),i["\u0275\u0275elementStart"](2,"div",1),i["\u0275\u0275text"](3,"\n\n      "),i["\u0275\u0275text"](4,"\n      "),i["\u0275\u0275elementStart"](5,"div",2),i["\u0275\u0275listener"]("cdkDropListDropped",(function(e){return t.moveSelection(e)})),i["\u0275\u0275text"](6,"\n        "),i["\u0275\u0275text"](7,"\n        "),i["\u0275\u0275template"](8,h,14,16,"div",3),i["\u0275\u0275text"](9,"\n      "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](10,"\n\n\n\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](11,"\n\n"),i["\u0275\u0275elementContainerEnd"](),i["\u0275\u0275text"](12,"\n")),2&e&&(i["\u0275\u0275property"]("formGroup",t.group),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("id",t.id)("formArrayName",t.model.id)("ngClass",t.getClass("element","control")),i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("ngForOf",t.model.groups))},styles:["[_nghost-%COMP%]{display:block}.drag-disable[_ngcontent-%COMP%]{visibility:hidden!important}.drag-disable[_ngcontent-%COMP%]:focus, .drag-disable[_ngcontent-%COMP%]:hover{cursor:default}.drag-disable[_ngcontent-%COMP%]:focus   .drag-icon[_ngcontent-%COMP%], .drag-disable[_ngcontent-%COMP%]:hover   .drag-icon[_ngcontent-%COMP%]{visibility:hidden!important}.cdk-drag[_ngcontent-%COMP%]{margin-left:calc(-2.3 * var(--bs-spacer));margin-right:calc(-.5 * var(--bs-spacer));padding-right:calc(.5 * var(--bs-spacer))}.cdk-drag[_ngcontent-%COMP%]   .drag-icon[_ngcontent-%COMP%]{visibility:hidden;width:calc(2 * var(--bs-spacer));color:var(--bs-gray-600);margin:var(--bs-btn-padding-y) 0;line-height:var(--bs-btn-line-height);text-indent:calc(.5 * var(--bs-spacer))}.cdk-drag[_ngcontent-%COMP%]:focus, .cdk-drag[_ngcontent-%COMP%]:hover{cursor:-webkit-grab;cursor:grab}.cdk-drag[_ngcontent-%COMP%]:focus   .drag-icon[_ngcontent-%COMP%], .cdk-drag[_ngcontent-%COMP%]:hover   .drag-icon[_ngcontent-%COMP%]{visibility:visible}.drag-handle[_ngcontent-%COMP%]:hover{cursor:move}.drag-handle[_ngcontent-%COMP%]:focus   .drag-icon[_ngcontent-%COMP%]{visibility:visible}.cdk-drop-list-dragging[_ngcontent-%COMP%]   .drag-handle[_ngcontent-%COMP%]{cursor:-webkit-grabbing;cursor:grabbing}.cdk-drop-list-dragging[_ngcontent-%COMP%]   .drag-handle[_ngcontent-%COMP%]   .drag-icon[_ngcontent-%COMP%]{visibility:hidden}.cdk-drag-preview[_ngcontent-%COMP%]{margin:0;padding:0}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}"]}),e}()},bPV6:function(e,t,n){"use strict";n.d(t,"a",(function(){return k}));var i=n("fXoL"),r=n("LRne"),o=n("JIr8"),l=n("/uUt"),c=n("vkgz"),u=n("lJxs"),p=n("oBfO"),f=n("J3qs"),h=n("1QIV"),v=n("f+Ev"),g=n("Ssu8"),b=n("PdzJ"),y=n("e+Av"),x=n("1kSV"),C=n("dlKe"),I=n("ofXK"),O=n("sYmb");function S(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"button",10),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](2,1,"form.no-results")))}function E(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",11),i["\u0275\u0275listener"]("click",(function(){i["\u0275\u0275restoreView"](n);var e=t.$implicit,r=i["\u0275\u0275nextContext"](),o=i["\u0275\u0275reference"](1);return r.onSelect(e),o.close()}))("mousedown",(function(){i["\u0275\u0275restoreView"](n);var e=t.$implicit,r=i["\u0275\u0275nextContext"](),o=i["\u0275\u0275reference"](1);return r.onSelect(e),o.close()})),i["\u0275\u0275pipe"](1,"async"),i["\u0275\u0275text"](2),i["\u0275\u0275elementEnd"]()}if(2&e){var r=t.$implicit,o=i["\u0275\u0275nextContext"]();i["\u0275\u0275propertyInterpolate"]("title",r.display),i["\u0275\u0275attribute"]("id",r.display==i["\u0275\u0275pipeBind1"](1,3,o.currentValue)?"combobox_"+o.id+"_selected":null),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"]("\n        ",o.inputFormatter(r),"\n      ")}}function w(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",12),i["\u0275\u0275elementStart"](1,"p"),i["\u0275\u0275text"](2),i["\u0275\u0275pipe"](3,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](3,1,"form.loading")))}var k=function(){var e=function(e){a(n,e);var t=s(n);function n(e,r,o,a){var l;return d(this,n),(l=t.call(this,e,o,a)).vocabularyService=e,l.cdr=r,l.layoutService=o,l.validationService=a,l.bindId=!0,l.blur=new i.EventEmitter,l.change=new i.EventEmitter,l.focus=new i.EventEmitter,l.loading=!1,l.inputFormatter=function(e){return e.display||e.value},l}return m(n,[{key:"ngOnInit",value:function(){var e=this;this.updatePageInfo(this.model.maxOptions,1),this.vocabularyService.getVocabularyEntries(this.model.vocabularyOptions,this.pageInfo).pipe(Object(h.j)(),Object(o.a)((function(){return Object(r.a)(Object(v.b)(new p.a,[]))}))).subscribe((function(t){e.optionsList=t.page,e.model.value&&e.setCurrentValue(e.model.value,!0),e.updatePageInfo(t.pageInfo.elementsPerPage,t.pageInfo.currentPage,t.pageInfo.totalElements,t.pageInfo.totalPages),e.cdr.detectChanges()})),this.group.get(this.model.id).valueChanges.pipe(Object(l.a)()).subscribe((function(t){e.setCurrentValue(t)}))}},{key:"openDropdown",value:function(e){this.model.readOnly||(this.group.markAsUntouched(),e.open())}},{key:"onScroll",value:function(){var e=this;!this.loading&&this.pageInfo.currentPage<=this.pageInfo.totalPages&&(this.loading=!0,this.updatePageInfo(this.pageInfo.elementsPerPage,this.pageInfo.currentPage+1,this.pageInfo.totalElements,this.pageInfo.totalPages),this.vocabularyService.getVocabularyEntries(this.model.vocabularyOptions,this.pageInfo).pipe(Object(h.j)(),Object(o.a)((function(){return Object(r.a)(Object(v.b)(new p.a,[]))})),Object(c.a)((function(){return e.loading=!1}))).subscribe((function(t){e.optionsList=e.optionsList.concat(t.page),e.updatePageInfo(t.pageInfo.elementsPerPage,t.pageInfo.currentPage,t.pageInfo.totalElements,t.pageInfo.totalPages),e.cdr.detectChanges()})))}},{key:"onSelect",value:function(e){this.group.markAsDirty(),this.dispatchUpdate(e),this.setCurrentValue(e)}},{key:"setCurrentValue",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t=n?this.getInitValueFromModel().pipe(Object(u.a)((function(e){return e.display}))):Object(f.d)(e)?Object(r.a)(""):"string"==typeof e?Object(r.a)(e):Object(r.a)(e.display),this.currentValue=t}}]),n}(g.a);return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](b.a),i["\u0275\u0275directiveInject"](i.ChangeDetectorRef),i["\u0275\u0275directiveInject"](y.E),i["\u0275\u0275directiveInject"](y.H))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-dynamic-scrollable-dropdown"]],inputs:{bindId:"bindId",group:"group",model:"model"},outputs:{blur:"blur",change:"change",focus:"focus"},features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:24,vars:26,consts:[["ngbDropdown","","display","dynamic","placement","bottom-right",1,"w-100"],["sdRef","ngbDropdown"],["role","combobox",1,"position-relative","right-addon"],["ngbDropdownToggle","","aria-hidden","true",1,"position-absolute","scrollable-dropdown-toggle"],[1,"form-control",3,"id","name","readonly","type","value","blur","click","focus","keypress"],["ngbDropdownMenu","","aria-haspopup","true","aria-expanded","false",1,"dropdown-menu","scrollable-dropdown-menu","w-100"],["role","listbox","infiniteScroll","",1,"scrollable-menu",3,"id","infiniteScrollDistance","infiniteScrollThrottle","scrollWindow","scrolled"],["class","dropdown-item disabled",4,"ngIf"],["class","dropdown-item collection-item text-truncate","role","option",3,"title","click","mousedown",4,"ngFor","ngForOf"],["class","scrollable-dropdown-loading text-center",4,"ngIf"],[1,"dropdown-item","disabled"],["role","option",1,"dropdown-item","collection-item","text-truncate",3,"title","click","mousedown"],[1,"scrollable-dropdown-loading","text-center"]],template:function(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",0,1),i["\u0275\u0275text"](2,"\n  "),i["\u0275\u0275elementStart"](3,"div",2),i["\u0275\u0275text"](4,"\n    "),i["\u0275\u0275element"](5,"i",3),i["\u0275\u0275text"](6,"\n    "),i["\u0275\u0275elementStart"](7,"input",4),i["\u0275\u0275listener"]("blur",(function(e){return t.onBlur(e)}))("click",(function(e){i["\u0275\u0275restoreView"](n);var r=i["\u0275\u0275reference"](1);return e.stopPropagation(),t.openDropdown(r)}))("focus",(function(e){return t.onFocus(e)}))("keypress",(function(e){return e.preventDefault()})),i["\u0275\u0275pipe"](8,"async"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](9,"\n  "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](10,"\n\n  "),i["\u0275\u0275elementStart"](11,"div",5),i["\u0275\u0275text"](12,"\n    "),i["\u0275\u0275elementStart"](13,"div",6),i["\u0275\u0275listener"]("scrolled",(function(){return t.onScroll()})),i["\u0275\u0275text"](14,"\n\n      "),i["\u0275\u0275template"](15,S,3,3,"button",7),i["\u0275\u0275text"](16,"\n      "),i["\u0275\u0275template"](17,E,3,5,"button",8),i["\u0275\u0275text"](18,"\n      "),i["\u0275\u0275template"](19,w,4,3,"div",9),i["\u0275\u0275text"](20,"\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](21,"\n\n  "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](22,"\n"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](23,"\n")}2&e&&(i["\u0275\u0275advance"](3),i["\u0275\u0275attribute"]("aria-label",t.model.label)("aria-owns","combobox_"+t.id+"_listbox"),i["\u0275\u0275advance"](4),i["\u0275\u0275classProp"]("is-invalid",t.showErrorMessages)("scrollable-dropdown-input",!t.model.readOnly),i["\u0275\u0275property"]("id",t.id)("name",t.model.name)("readonly",!0)("type",t.model.inputType)("value",i["\u0275\u0275pipeBind1"](8,24,t.currentValue)),i["\u0275\u0275attribute"]("aria-controls","combobox_"+t.id+"_listbox")("aria-activedescendant","combobox_"+t.id+"_selected")("aria-label",t.model.placeholder)("autoComplete",t.model.autoComplete),i["\u0275\u0275advance"](4),i["\u0275\u0275attribute"]("aria-label",t.model.placeholder),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("id","combobox_"+t.id+"_listbox")("infiniteScrollDistance",2)("infiniteScrollThrottle",50)("scrollWindow",!1),i["\u0275\u0275attribute"]("aria-label",t.model.placeholder),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",t.optionsList&&0==t.optionsList.length),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",t.optionsList),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",t.loading))},directives:[x.j,x.o,x.m,C.a,I.p,I.o],pipes:[I.b,O.d],styles:[".ds-form-input-addon[_ngcontent-%COMP%]{border-top-right-radius:0!important;border-bottom-right-radius:0!important;border-right:0!important}.ds-form-input-btn[_ngcontent-%COMP%]{border:var(--bs-input-btn-border-width) solid var(--bs-input-border-color);border-top-left-radius:0;border-bottom-left-radius:0;border-left:0}.ds-form-input-btn[_ngcontent-%COMP%]:focus, button.ds-form-add-more[_ngcontent-%COMP%]:focus{-webkit-box-shadow:none!important;box-shadow:none!important}button.ds-form-add-more[_ngcontent-%COMP%]:focus{outline:none}.ds-form-input-value[_ngcontent-%COMP%]{border-top-left-radius:0!important;border-bottom-left-radius:0!important}.fa-spin[_ngcontent-%COMP%]{pointer-events:none}.left-addon[_ngcontent-%COMP%]   .far[_ngcontent-%COMP%], .left-addon[_ngcontent-%COMP%]   .fas[_ngcontent-%COMP%], .left-addon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{left:0}.right-addon[_ngcontent-%COMP%]   .far[_ngcontent-%COMP%], .right-addon[_ngcontent-%COMP%]   .fas[_ngcontent-%COMP%], .right-addon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{right:0}.left-addon[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-left:calc(var(--bs-spacer) * 2.25)}.right-addon[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-right:calc(var(--bs-spacer) * 2.25)}.scrollable-menu[_ngcontent-%COMP%]{height:auto;max-height:var(--ds-dropdown-menu-max-height);overflow-x:hidden}.collection-item[_ngcontent-%COMP%]{border-bottom:var(--bs-dropdown-border-width) solid var(--bs-dropdown-border-color)}.scrollable-dropdown-loading[_ngcontent-%COMP%]{background-color:var(--bs-primary);color:#fff;height:calc(var(--bs-spacer) * 2)!important;line-height:calc(var(--bs-spacer) * 2);position:-webkit-sticky;position:sticky;bottom:0}.scrollable-dropdown-menu[_ngcontent-%COMP%]{left:0!important;margin-bottom:var(--bs-spacer);z-index:1000}.scrollable-dropdown-toggle[_ngcontent-%COMP%]{padding:.7rem .7rem 0}.scrollable-dropdown-input[readonly][_ngcontent-%COMP%]{background-color:#fff}"]}),e}()},ds6q:function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=n("Q1FS"),a=n("FWf1"),l=n("zB/H"),s=n("Mxlh"),c=n("FiyT"),u=n("p//D"),d=function(e){function t(t){var n=e.call(this,t)||this;return n.destination=t,n}return r(t,e),t}(a.Subscriber);t.SubjectSubscriber=d;var p=function(e){function t(){var t=e.call(this)||this;return t.observers=[],t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return r(t,e),t.prototype[u.rxSubscriber]=function(){return new d(this)},t.prototype.lift=function(e){var t=new m(this,this);return t.operator=e,t},t.prototype.next=function(e){if(this.closed)throw new s.ObjectUnsubscribedError;if(!this.isStopped)for(var t=this.observers,n=t.length,i=t.slice(),r=0;r<n;r++)i[r].next(e)},t.prototype.error=function(e){if(this.closed)throw new s.ObjectUnsubscribedError;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,n=t.length,i=t.slice(),r=0;r<n;r++)i[r].error(e);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new s.ObjectUnsubscribedError;this.isStopped=!0;for(var e=this.observers,t=e.length,n=e.slice(),i=0;i<t;i++)n[i].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(t){if(this.closed)throw new s.ObjectUnsubscribedError;return e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){if(this.closed)throw new s.ObjectUnsubscribedError;return this.hasError?(e.error(this.thrownError),l.Subscription.EMPTY):this.isStopped?(e.complete(),l.Subscription.EMPTY):(this.observers.push(e),new c.SubjectSubscription(this,e))},t.prototype.asObservable=function(){var e=new o.Observable;return e.source=this,e},t.create=function(e,t){return new m(e,t)},t}(o.Observable);t.Subject=p;var m=function(e){function t(t,n){var i=e.call(this)||this;return i.destination=t,i.source=n,i}return r(t,e),t.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},t.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},t.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},t.prototype._subscribe=function(e){return this.source?this.source.subscribe(e):l.Subscription.EMPTY},t}(p);t.AnonymousSubject=m},hqmO:function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var i=n("pLZG"),r=n("lJxs"),o=n("/uUt"),a=n("fXoL"),l=n("LvDl"),s=n("J3qs"),c=n("NFsL"),u=n("Q5/L");function p(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"div",7),a["\u0275\u0275text"](1,"\n            "),a["\u0275\u0275elementStart"](2,"button",8),a["\u0275\u0275listener"]("click",(function(e){a["\u0275\u0275restoreView"](n);var t=a["\u0275\u0275nextContext"](),i=t.context,r=t.index;return a["\u0275\u0275nextContext"]().removeItem(e,i,r)})),a["\u0275\u0275pipe"](3,"translate"),a["\u0275\u0275pipe"](4,"translate"),a["\u0275\u0275text"](5,"\n              "),a["\u0275\u0275elementStart"](6,"span"),a["\u0275\u0275element"](7,"i",9),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](8,"\n            "),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](9,"\n        "),a["\u0275\u0275elementEnd"]()}if(2&e){var i=a["\u0275\u0275nextContext"](),r=i.$implicit,o=i.context,l=i.index,s=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("title",a["\u0275\u0275pipeBind1"](3,3,"form.remove")),a["\u0275\u0275property"]("disabled",1===r.context.groups.length||s.isItemReadOnly(o,l)),a["\u0275\u0275attribute"]("aria-label",a["\u0275\u0275pipeBind1"](4,5,"form.remove"))}}function f(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"div",10),a["\u0275\u0275text"](1,"\n          "),a["\u0275\u0275elementStart"](2,"div",11),a["\u0275\u0275text"](3,"\n            "),a["\u0275\u0275elementStart"](4,"button",12),a["\u0275\u0275listener"]("click",(function(e){a["\u0275\u0275restoreView"](n);var t=a["\u0275\u0275nextContext"]().$implicit;return a["\u0275\u0275nextContext"]().insertItem(e,t.context,t.context.groups.length)})),a["\u0275\u0275pipe"](5,"translate"),a["\u0275\u0275pipe"](6,"translate"),a["\u0275\u0275text"](7,"\n              "),a["\u0275\u0275elementStart"](8,"span"),a["\u0275\u0275element"](9,"i",13),a["\u0275\u0275text"](10),a["\u0275\u0275pipe"](11,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](12,"\n            "),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](13,"\n          "),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](14,"\n        "),a["\u0275\u0275elementEnd"]()}if(2&e){var i=a["\u0275\u0275nextContext"](),r=i.context,o=i.index,l=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](4),a["\u0275\u0275propertyInterpolate"]("title",a["\u0275\u0275pipeBind1"](5,4,"form.add")),a["\u0275\u0275property"]("disabled",l.isItemReadOnly(r,o)),a["\u0275\u0275attribute"]("aria-label",a["\u0275\u0275pipeBind1"](6,6,"form.add")),a["\u0275\u0275advance"](6),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](11,8,"form.add"),"")}}function h(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"div",7),a["\u0275\u0275text"](1,"\n          "),a["\u0275\u0275elementStart"](2,"div",14),a["\u0275\u0275text"](3,"\n            "),a["\u0275\u0275elementStart"](4,"button",15),a["\u0275\u0275listener"]("click",(function(e){a["\u0275\u0275restoreView"](n);var t=a["\u0275\u0275nextContext"](),i=t.context,r=t.index;return a["\u0275\u0275nextContext"]().removeItem(e,i,r)})),a["\u0275\u0275pipe"](5,"translate"),a["\u0275\u0275pipe"](6,"translate"),a["\u0275\u0275text"](7,"\n              "),a["\u0275\u0275elementStart"](8,"span"),a["\u0275\u0275text"](9),a["\u0275\u0275pipe"](10,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](11,"\n            "),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](12,"\n          "),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](13,"\n        "),a["\u0275\u0275elementEnd"]()}if(2&e){var i=a["\u0275\u0275nextContext"](),r=i.$implicit,o=i.context,l=i.index,s=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](4),a["\u0275\u0275propertyInterpolate"]("title",a["\u0275\u0275pipeBind1"](5,4,"form.discard")),a["\u0275\u0275property"]("disabled",1===r.context.groups.length||s.isItemReadOnly(o,l)),a["\u0275\u0275attribute"]("aria-label",a["\u0275\u0275pipeBind1"](6,6,"form.discard")),a["\u0275\u0275advance"](5),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](10,8,"form.discard"))}}function v(e,t){if(1&e&&(a["\u0275\u0275text"](0,"\n        "),a["\u0275\u0275text"](1,"\n        "),a["\u0275\u0275template"](2,p,10,7,"div",5),a["\u0275\u0275text"](3,"\n        "),a["\u0275\u0275template"](4,f,15,10,"div",6),a["\u0275\u0275text"](5,"\n\n        "),a["\u0275\u0275text"](6,"\n        "),a["\u0275\u0275template"](7,h,14,10,"div",5),a["\u0275\u0275text"](8,"\n      ")),2&e){var n=t.$implicit,i=t.index,r=t.context,o=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",!r.notRepeatable&&!o.isVirtual(r,i)),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",!r.notRepeatable&&i===n.context.groups.length-1),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngIf",r.notRepeatable&&r.showButtons&&n.context.groups.length>1)}}function g(e,t){1&e&&a["\u0275\u0275projection"](0,1,["*ngIf","!displaySubmit && !displayCancel"])}function b(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"button",20),a["\u0275\u0275listener"]("click",(function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"](2).reset()})),a["\u0275\u0275text"](1,"\n              "),a["\u0275\u0275element"](2,"i",21),a["\u0275\u0275text"](3),a["\u0275\u0275pipe"](4,"translate"),a["\u0275\u0275elementEnd"]()}if(2&e){var i=a["\u0275\u0275nextContext"](2);a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](4,1,i.cancelLabel),"\n            ")}}function y(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"button",22),a["\u0275\u0275listener"]("click",(function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"](2).onSubmit()})),a["\u0275\u0275pipe"](1,"async"),a["\u0275\u0275element"](2,"i",23),a["\u0275\u0275text"](3),a["\u0275\u0275pipe"](4,"translate"),a["\u0275\u0275elementEnd"]()}if(2&e){var i=a["\u0275\u0275nextContext"](2);a["\u0275\u0275property"]("disabled",!a["\u0275\u0275pipeBind1"](1,2,i.isValid())),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](4,4,i.submitLabel),"\n            ")}}function x(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"div"),a["\u0275\u0275text"](1,"\n      "),a["\u0275\u0275element"](2,"hr"),a["\u0275\u0275text"](3,"\n      "),a["\u0275\u0275elementStart"](4,"div",16),a["\u0275\u0275text"](5,"\n        "),a["\u0275\u0275elementStart"](6,"div",17),a["\u0275\u0275text"](7,"\n          "),a["\u0275\u0275projection"](8,2),a["\u0275\u0275text"](9,"\n            "),a["\u0275\u0275template"](10,b,5,3,"button",18),a["\u0275\u0275text"](11,"\n            "),a["\u0275\u0275projection"](12,3),a["\u0275\u0275text"](13,"\n            "),a["\u0275\u0275template"](14,y,5,6,"button",19),a["\u0275\u0275text"](15,"\n            "),a["\u0275\u0275projection"](16,4),a["\u0275\u0275text"](17,"\n        "),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](18,"\n      "),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](19,"\n    "),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](10),a["\u0275\u0275property"]("ngIf",n.displayCancel),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("ngIf",n.displaySubmit)}}var C=[[["","additional",""]],"*",[["","before",""]],[["","between",""]],[["","after",""]]],I=["[additional]","*","[before]","[between]","[after]"],O=function(){var e=function(){function e(t,n,i){d(this,e),this.formService=t,this.changeDetectorRef=n,this.formBuilderService=i,this.formErrors=[],this.displaySubmit=!0,this.displayCancel=!0,this.emitChange=!0,this.submitLabel="form.submit",this.cancelLabel="form.cancel",this.formLayout=null,this.blur=new a.EventEmitter,this.change=new a.EventEmitter,this.focus=new a.EventEmitter,this.customEvent=new a.EventEmitter,this.addArrayItem=new a.EventEmitter,this.removeArrayItem=new a.EventEmitter,this.cancel=new a.EventEmitter,this.submitForm=new a.EventEmitter,this.subs=[]}return m(e,[{key:"getFormGroup",value:function(){return this.parentFormModel?this.formGroup.parent:this.formGroup}},{key:"getFormGroupValue",value:function(){return this.getFormGroup().value}},{key:"getFormGroupValidStatus",value:function(){return this.getFormGroup().valid}},{key:"ngOnInit",value:function(){var e=this;this.formGroup?this.formModel.forEach((function(t){e.parentFormModel&&e.formBuilderService.addFormGroupControl(e.formGroup,e.parentFormModel,t)})):this.formGroup=this.formBuilderService.createFormGroup(this.formModel),this.formService.initForm(this.formId,this.formModel,this.getFormGroupValidStatus()),this.formValid=this.getFormGroupValidStatus(),this.subs.push(this.formGroup.statusChanges.pipe(Object(i.a)((function(){return e.formValid!==e.getFormGroupValidStatus()}))).subscribe((function(){e.formService.setStatusChanged(e.formId,e.getFormGroupValidStatus()),e.formValid=e.getFormGroupValidStatus()}))),this.subs.push(this.formService.getForm(this.formId).pipe(Object(i.a)((function(t){return!!t&&(Object(s.e)(t.errors)||Object(s.e)(e.formErrors))})),Object(r.a)((function(e){return e.errors})),Object(o.a)()).subscribe((function(t){var n=e.formGroup,i=e.formModel;t.filter((function(t){return-1===Object(l.findIndex)(e.formErrors,{fieldId:t.fieldId,fieldIndex:t.fieldIndex})})).forEach((function(t){var r,o=t.fieldId,a=t.fieldIndex;if(r=e.formBuilderService.getFormControlById(o,e.parentFormModel?n.parent:n,i,a)){var l=e.formBuilderService.findById(o,i);e.formService.addErrorToField(r,l,t.message),e.changeDetectorRef.detectChanges()}})),e.formErrors.filter((function(e){return-1===Object(l.findIndex)(t,{fieldId:e.fieldId,fieldIndex:e.fieldIndex})})).forEach((function(t){var r,o=t.fieldId,a=t.fieldIndex;if(r=e.formBuilderService.getFormControlById(o,e.parentFormModel?n.parent:n,i,a)){var l=e.formBuilderService.findById(o,i);e.formService.removeErrorFromField(r,l,t.message)}})),e.formErrors=t,e.changeDetectorRef.detectChanges()})))}},{key:"ngOnDestroy",value:function(){this.subs.filter((function(e){return Object(s.b)(e)})).forEach((function(e){return e.unsubscribe()})),this.formService.removeForm(this.formId)}},{key:"isValid",value:function(){return this.formService.isValid(this.formId)}},{key:"keepSync",value:function(){var e=this;this.subs.push(this.formService.getFormData(this.formId).subscribe((function(t){!Object.is(t,e.formGroup.value)&&e.formGroup&&e.formGroup.setValue(t)})))}},{key:"onBlur",value:function(e){this.blur.emit(e);var t=e.control,n=e.context&&e.context.index?e.context.index:0;t.valid?this.formService.removeError(this.formId,e.model.name,n):this.formService.addControlErrors(t,this.formId,e.model.name,n)}},{key:"onCustomEvent",value:function(e){this.customEvent.emit(e)}},{key:"onFocus",value:function(e){this.formService.setTouched(this.formId,this.formModel,e),this.focus.emit(e)}},{key:"onChange",value:function(e){this.formService.changeForm(this.formId,this.formModel),this.formGroup.markAsPristine(),this.emitChange&&this.change.emit(e),e.control.valid&&this.formService.removeError(this.formId,e.model.id,e.context&&e.context.index?e.context.index:0)}},{key:"onSubmit",value:function(){this.getFormGroupValidStatus()?this.submitForm.emit(this.formService.getFormData(this.formId)):this.formService.validateAllFormFields(this.formGroup)}},{key:"reset",value:function(){this.formGroup.reset(),this.cancel.emit()}},{key:"isItemReadOnly",value:function(e,t){return e.groups[t].group[0].readOnly}},{key:"removeItem",value:function(e,t,n){var i=this.formGroup.get(this.formBuilderService.getPath(t)),r=this.getEvent(e,t,n,"remove");this.formBuilderService.isQualdropGroup(r.model)&&this.removeArrayItem.emit(r),this.formBuilderService.removeFormArrayGroup(n,i,t),this.formService.changeForm(this.formId,this.formModel),this.formBuilderService.isQualdropGroup(r.model)||this.removeArrayItem.emit(r)}},{key:"insertItem",value:function(e,t,n){var i=this.formGroup.get(this.formBuilderService.getPath(t));this.formBuilderService.insertFormArrayGroup(n,i,t),this.addArrayItem.emit(this.getEvent(e,t,n,"add")),this.formService.changeForm(this.formId,this.formModel)}},{key:"isVirtual",value:function(e,t){var n=e.groups[t].group[0].metadataValue;return Object(s.e)(n)&&n.isVirtual}},{key:"getEvent",value:function(e,t,n,i){var r=t.groups[n],o=r.context,a=this.formGroup.get(o.id);if(Object(s.i)(a))for(var l=0,c=Object.keys(this.formGroup.controls);l<c.length;l++){var u=c[l];if(a=this.formGroup.controls[u].get(o.id),Object(s.g)(a))break}return{$event:e,context:r,control:a.controls[n],group:a,model:r.group[0],type:i}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](c.a),a["\u0275\u0275directiveInject"](a.ChangeDetectorRef),a["\u0275\u0275directiveInject"](u.a))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-form"]],inputs:{displaySubmit:"displaySubmit",displayCancel:"displayCancel",emitChange:"emitChange",formId:"formId",submitLabel:"submitLabel",cancelLabel:"cancelLabel",formModel:"formModel",parentFormModel:"parentFormModel",formGroup:"formGroup",formLayout:"formLayout"},outputs:{blur:"dfBlur",change:"dfChange",focus:"dfFocus",customEvent:"ngbEvent",addArrayItem:"addArrayItem",removeArrayItem:"removeArrayItem",cancel:"cancel",submitForm:"submitForm"},exportAs:["formComponent"],ngContentSelectors:I,decls:17,vars:7,consts:[[1,"container-fluid"],[1,"form-horizontal",3,"formGroup"],[3,"formId","formGroup","formModel","formLayout","change","dfBlur","dfChange","dfFocus","ngbEvent"],["modelType","ARRAY"],[4,"ngIf"],["class","col-xs-2 d-flex flex-column justify-content-sm-start align-items-end",4,"ngIf"],["class","clearfix pl-4 w-100",4,"ngIf"],[1,"col-xs-2","d-flex","flex-column","justify-content-sm-start","align-items-end"],["type","button","role","button",1,"btn","btn-secondary",3,"title","disabled","click"],["aria-hidden","true",1,"fas","fa-trash"],[1,"clearfix","pl-4","w-100"],["role","group",1,"btn-group"],["type","button","role","button",1,"ds-form-add-more","btn","btn-link",3,"title","disabled","click"],[1,"fas","fa-plus"],["role","button",1,"btn-group"],["type","button",1,"btn","btn-secondary",3,"title","disabled","click"],[1,"form-group","row"],[1,"col","text-right"],["type","reset","class","btn btn-outline-secondary",3,"click",4,"ngIf"],["type","submit","class","btn btn-primary",3,"disabled","click",4,"ngIf"],["type","reset",1,"btn","btn-outline-secondary",3,"click"],[1,"fa","fa-times"],["type","submit",1,"btn","btn-primary",3,"disabled","click"],[1,"fas","fa-save"]],template:function(e,t){1&e&&(a["\u0275\u0275projectionDef"](C),a["\u0275\u0275elementStart"](0,"div",0),a["\u0275\u0275text"](1,"\n  "),a["\u0275\u0275elementStart"](2,"form",1),a["\u0275\u0275text"](3,"\n\n    "),a["\u0275\u0275elementStart"](4,"ds-dynamic-form",2),a["\u0275\u0275listener"]("change",(function(e){return e.stopPropagation()}))("dfBlur",(function(e){return t.onBlur(e)}))("dfChange",(function(e){return t.onChange(e)}))("dfFocus",(function(e){return t.onFocus(e)}))("ngbEvent",(function(e){return t.onCustomEvent(e)})),a["\u0275\u0275text"](5,"\n      "),a["\u0275\u0275template"](6,v,9,3,"ng-template",3),a["\u0275\u0275text"](7,"\n\n    "),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](8,"\n        "),a["\u0275\u0275projection"](9),a["\u0275\u0275text"](10,"\n        "),a["\u0275\u0275template"](11,g,1,0,"ng-content",4),a["\u0275\u0275text"](12,"\n\n    "),a["\u0275\u0275template"](13,x,20,2,"div",4),a["\u0275\u0275text"](14,"\n\n  "),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](15,"\n\n"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](16,"\n")),2&e&&(a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("formGroup",t.formGroup),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("formId",t.formId)("formGroup",t.formGroup)("formModel",t.formModel)("formLayout",t.formLayout),a["\u0275\u0275advance"](7),a["\u0275\u0275property"]("ngIf",!t.displaySubmit&&!t.displayCancel),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",t.displaySubmit||t.displayCancel))},styles:[".ds-form-input-addon[_ngcontent-%COMP%]{border-top-right-radius:0!important;border-bottom-right-radius:0!important;border-right:0!important}.ds-form-input-btn[_ngcontent-%COMP%]{border:var(--bs-input-btn-border-width) solid var(--bs-input-border-color);border-top-left-radius:0;border-bottom-left-radius:0;border-left:0}.ds-form-input-btn[_ngcontent-%COMP%]:focus, button.ds-form-add-more[_ngcontent-%COMP%]:focus{-webkit-box-shadow:none!important;box-shadow:none!important}button.ds-form-add-more[_ngcontent-%COMP%]:focus{outline:none}.ds-form-input-value[_ngcontent-%COMP%]{border-top-left-radius:0!important;border-bottom-left-radius:0!important}.fa-spin[_ngcontent-%COMP%]{pointer-events:none}.left-addon[_ngcontent-%COMP%]   .far[_ngcontent-%COMP%], .left-addon[_ngcontent-%COMP%]   .fas[_ngcontent-%COMP%], .left-addon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{left:0}.right-addon[_ngcontent-%COMP%]   .far[_ngcontent-%COMP%], .right-addon[_ngcontent-%COMP%]   .fas[_ngcontent-%COMP%], .right-addon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{right:0}.left-addon[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-left:calc(var(--bs-spacer) * 2.25)}.right-addon[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-right:calc(var(--bs-spacer) * 2.25)}"]}),e}()},n7Wa:function(e,t,n){"use strict";n.d(t,"a",(function(){return P})),n.d(t,"b",(function(){return O})),n.d(t,"c",(function(){return S})),n.d(t,"d",(function(){return E})),n.d(t,"e",(function(){return w})),n.d(t,"f",(function(){return k})),n.d(t,"g",(function(){return j})),n.d(t,"h",(function(){return M})),n.d(t,"i",(function(){return V}));var i=n("fXoL"),r=n("3Pt+"),o=n("1kSV"),l=n("e+Av"),c=n("ofXK"),u=n("904P"),p=function(e,t){return[e,t]};function f(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"label",3),i["\u0275\u0275text"](1,"\n\n            "),i["\u0275\u0275elementStart"](2,"input",4),i["\u0275\u0275listener"]("blur",(function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().onBlur(e)}))("change",(function(e){i["\u0275\u0275restoreView"](n);var r=t.$implicit;return i["\u0275\u0275nextContext"]().onCheckboxChange(e,r)}))("focus",(function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().onFocus(e)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](3,"span",5),i["\u0275\u0275elementEnd"]()}if(2&e){var r=t.$implicit,o=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("hidden",r.hidden)("ngClass",o.getClass("element","control",r)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("checked",r.checked)("formControlName",r.id)("id",o.getCheckboxId(r))("name",r.name)("required",r.required)("tabindex",r.tabIndex)("value",r.value),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngClass",o.getClass("element","label",r))("innerHTML",r.label,i["\u0275\u0275sanitizeHtml"])}}function h(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",5),i["\u0275\u0275text"](1,"\n        "),i["\u0275\u0275element"](2,"span",6),i["\u0275\u0275text"](3,"\n    "),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("innerHTML",n.model.prefix,i["\u0275\u0275sanitizeHtml"])}}function v(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",7),i["\u0275\u0275text"](1,"\n        "),i["\u0275\u0275element"](2,"span",6),i["\u0275\u0275text"](3,"\n    "),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("innerHTML",n.model.suffix,i["\u0275\u0275sanitizeHtml"])}}function g(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"option",10),i["\u0275\u0275text"](1,"\n\n    "),i["\u0275\u0275elementEnd"]()),2&e&&i["\u0275\u0275property"]("value",t.$implicit)}function b(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"datalist",8),i["\u0275\u0275text"](1,"\n\n        "),i["\u0275\u0275template"](2,g,2,1,"option",9),i["\u0275\u0275pipe"](3,"async"),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("id",n.model.listId),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",i["\u0275\u0275pipeBind1"](3,2,n.model.list$))}}var y=function(e,t){return{mask:e,showMask:t}};function x(e,t){if(1&e&&i["\u0275\u0275element"](0,"legend",4),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("innerHTML",n.model.legend,i["\u0275\u0275sanitizeHtml"])}}function C(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"label",5),i["\u0275\u0275text"](1,"\n\n            "),i["\u0275\u0275elementStart"](2,"input",6),i["\u0275\u0275listener"]("blur",(function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().onBlur(e)}))("focus",(function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().onFocus(e)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](3,"span",4),i["\u0275\u0275text"](4,"\n        "),i["\u0275\u0275elementEnd"]()}if(2&e){var r=t.$implicit,o=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("ngClass",i["\u0275\u0275pureFunction2"](5,p,o.getClass("element","option"),o.getClass("grid","option"))),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("disabled",r.disabled)("name",o.model.name)("value",r.value),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("innerHTML",r.label,i["\u0275\u0275sanitizeHtml"])}}function I(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"option",3),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;i["\u0275\u0275property"]("disabled",n.disabled)("ngValue",n.value),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](n.label)}}var O=function(){var e=function(e){a(n,e);var t=s(n);function n(e,r,o){var a;return d(this,n),(a=t.call(this,e,r)).layoutService=e,a.validationService=r,a.config=o,a.blur=new i.EventEmitter,a.change=new i.EventEmitter,a.focus=new i.EventEmitter,a}return n}(l.z);return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](l.E),i["\u0275\u0275directiveInject"](l.H),i["\u0275\u0275directiveInject"](o.h))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["dynamic-ng-bootstrap-calendar"]],viewQuery:function(e,t){var n;(1&e&&i["\u0275\u0275viewQuery"](o.g,3),2&e)&&(i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(t.ngbCalendar=n.first))},inputs:{formLayout:"formLayout",group:"group",layout:"layout",model:"model"},outputs:{blur:"blur",change:"change",focus:"focus"},features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:5,vars:13,consts:[[3,"formGroup"],[3,"displayMonths","firstDayOfWeek","formControlName","id","maxDate","minDate","navigation","ngClass","outsideDays","showWeekdays","showWeekNumbers","startDate","select"]],template:function(e,t){1&e&&(i["\u0275\u0275elementContainerStart"](0,0),i["\u0275\u0275text"](1,"\n\n    "),i["\u0275\u0275elementStart"](2,"ngb-datepicker",1),i["\u0275\u0275listener"]("select",(function(e){return t.onChange(e)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](3,"\n\n"),i["\u0275\u0275elementContainerEnd"](),i["\u0275\u0275text"](4,"\n")),2&e&&(i["\u0275\u0275property"]("formGroup",t.group),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("displayMonths",t.model.getAdditional("displayMonths",t.config.displayMonths))("firstDayOfWeek",t.model.getAdditional("firstDayOfWeek",t.config.firstDayOfWeek))("formControlName",t.model.id)("id",t.id)("maxDate",t.model.max)("minDate",t.model.min)("navigation",t.model.getAdditional("navigation",t.config.navigation))("ngClass",t.getClass("element","control"))("outsideDays",t.model.getAdditional("outsideDays",t.config.outsideDays))("showWeekdays",t.model.getAdditional("showWeekdays",t.config.showWeekdays))("showWeekNumbers",t.model.getAdditional("showWeekNumbers",t.config.showWeekNumbers))("startDate",t.model.focusedDate))},directives:[r.NgControlStatusGroup,r.FormGroupDirective,o.g,r.NgControlStatus,r.FormControlName,c.m],encapsulation:2,changeDetection:0}),e}(),S=function(){var e=function(e){a(n,e);var t=s(n);function n(e,r){var o;return d(this,n),(o=t.call(this,e,r)).layoutService=e,o.validationService=r,o.blur=new i.EventEmitter,o.change=new i.EventEmitter,o.focus=new i.EventEmitter,o}return n}(l.z);return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](l.E),i["\u0275\u0275directiveInject"](l.H))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["dynamic-ng-bootstrap-checkbox"]],inputs:{formLayout:"formLayout",group:"group",layout:"layout",model:"model"},outputs:{blur:"blur",change:"change",focus:"focus"},features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:9,vars:19,consts:[[1,"form-check",3,"formGroup"],[1,"form-check-label"],["type","checkbox",1,"form-check-input",3,"checked","formControlName","id","indeterminate","name","ngClass","required","tabindex","value","blur","change","focus"],[3,"innerHTML","ngClass"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275text"](1,"\n\n    "),i["\u0275\u0275elementStart"](2,"label",1),i["\u0275\u0275text"](3,"\n\n        "),i["\u0275\u0275elementStart"](4,"input",2),i["\u0275\u0275listener"]("blur",(function(e){return t.onBlur(e)}))("change",(function(e){return t.onChange(e)}))("focus",(function(e){return t.onFocus(e)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](5,"span",3),i["\u0275\u0275text"](6,"\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](7,"\n\n"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](8,"\n")),2&e&&(i["\u0275\u0275classProp"]("disabled",t.model.disabled),i["\u0275\u0275property"]("formGroup",t.group),i["\u0275\u0275advance"](4),i["\u0275\u0275classProp"]("is-invalid",t.showErrorMessages),i["\u0275\u0275property"]("checked",t.model.checked)("formControlName",t.model.id)("id",t.id)("indeterminate",t.model.indeterminate)("name",t.model.name)("ngClass",t.getClass("element","control"))("required",t.model.required)("tabindex",t.model.tabIndex)("value",t.model.value),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("innerHTML",t.model.label,i["\u0275\u0275sanitizeHtml"])("ngClass",i["\u0275\u0275pureFunction2"](16,p,t.getClass("element","label"),t.getClass("grid","label"))))},directives:[r.NgControlStatusGroup,r.FormGroupDirective,r.CheckboxControlValueAccessor,r.CheckboxRequiredValidator,r.NgControlStatus,r.FormControlName,c.m],encapsulation:2}),e}(),E=function(){var e=function(e){a(n,e);var t=s(n);function n(e,r){var o;return d(this,n),(o=t.call(this,e,r)).layoutService=e,o.validationService=r,o.blur=new i.EventEmitter,o.change=new i.EventEmitter,o.focus=new i.EventEmitter,o}return m(n,[{key:"getCheckboxId",value:function(e){return this.layoutService.getElementId(e)}},{key:"onCheckboxChange",value:function(e,t){this.onChange(e),t.value=e.target.checked}}]),n}(l.z);return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](l.E),i["\u0275\u0275directiveInject"](l.H))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["dynamic-ng-bootstrap-checkbox-group"]],inputs:{formLayout:"formLayout",group:"group",layout:"layout",model:"model"},outputs:{blur:"blur",change:"change",focus:"focus"},features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:8,vars:5,consts:[[3,"formGroup"],["data-toggle","buttons",1,"btn-group","btn-group-toggle",3,"formGroupName","id","ngClass"],["ngbButtonLabel","",3,"hidden","ngClass",4,"ngFor","ngForOf"],["ngbButtonLabel","",3,"hidden","ngClass"],["type","checkbox","ngbButton","",3,"checked","formControlName","id","name","required","tabindex","value","blur","change","focus"],[3,"ngClass","innerHTML"]],template:function(e,t){1&e&&(i["\u0275\u0275elementContainerStart"](0,0),i["\u0275\u0275text"](1,"\n\n    "),i["\u0275\u0275elementStart"](2,"div",1),i["\u0275\u0275text"](3,"\n\n        "),i["\u0275\u0275template"](4,f,4,11,"label",2),i["\u0275\u0275text"](5,"\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](6,"\n\n"),i["\u0275\u0275elementContainerEnd"](),i["\u0275\u0275text"](7,"\n")),2&e&&(i["\u0275\u0275property"]("formGroup",t.group),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("formGroupName",t.model.id)("id",t.id)("ngClass",t.getClass("element","control")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",t.model.group))},directives:[r.NgControlStatusGroup,r.FormGroupDirective,r.FormGroupName,c.m,c.o,o.d,r.CheckboxControlValueAccessor,r.CheckboxRequiredValidator,o.f,r.NgControlStatus,r.FormControlName],encapsulation:2,changeDetection:0}),e}(),w=function(){var e=function(e){a(n,e);var t=s(n);function n(e,r){var o;return d(this,n),(o=t.call(this,e,r)).layoutService=e,o.validationService=r,o.blur=new i.EventEmitter,o.change=new i.EventEmitter,o.focus=new i.EventEmitter,o}return n}(l.z);return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](l.E),i["\u0275\u0275directiveInject"](l.H))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["dynamic-ng-bootstrap-input"]],inputs:{formLayout:"formLayout",group:"group",layout:"layout",model:"model"},outputs:{blur:"blur",change:"change",focus:"focus"},features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:11,vars:37,consts:[[3,"formGroup"],["class","input-group-prepend",4,"ngIf"],[3,"autocomplete","autofocus","dynamicList","formControlName","id","maxlength","minlength","name","ngClass","pattern","placeholder","readonly","required","spellcheck","tabindex","textMask","type","blur","change","focus"],["class","input-group-append",4,"ngIf"],[3,"id",4,"ngIf"],[1,"input-group-prepend"],[1,"input-group-text",3,"innerHTML"],[1,"input-group-append"],[3,"id"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275text"](1,"\n\n    "),i["\u0275\u0275template"](2,h,4,1,"div",1),i["\u0275\u0275text"](3,"\n\n    "),i["\u0275\u0275elementStart"](4,"input",2),i["\u0275\u0275listener"]("blur",(function(e){return t.onBlur(e)}))("change",(function(e){return t.onChange(e)}))("focus",(function(e){return t.onFocus(e)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](5,"\n\n    "),i["\u0275\u0275template"](6,v,4,1,"div",3),i["\u0275\u0275text"](7,"\n\n    "),i["\u0275\u0275template"](8,b,4,4,"datalist",4),i["\u0275\u0275text"](9,"\n\n"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](10,"\n")),2&e&&(i["\u0275\u0275classProp"]("input-group",t.model.prefix||t.model.suffix),i["\u0275\u0275property"]("formGroup",t.group),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",t.model.prefix),i["\u0275\u0275advance"](2),i["\u0275\u0275classProp"]("form-control","file"!==t.model.inputType)("form-control-file","file"===t.model.inputType)("is-invalid",t.showErrorMessages),i["\u0275\u0275property"]("autocomplete",t.model.autoComplete)("autofocus",t.model.autoFocus)("dynamicList",t.model.listId)("formControlName",t.model.id)("id",t.id)("maxlength",t.model.maxLength)("minlength",t.model.minLength)("name",t.model.name)("ngClass",t.getClass("element","control"))("pattern",t.model.pattern)("placeholder",t.model.placeholder)("readonly",t.model.readOnly)("required",t.model.required)("spellcheck",t.model.spellCheck)("tabindex",t.model.tabIndex)("textMask",i["\u0275\u0275pureFunction2"](34,y,t.model.mask||!1,t.model.mask&&!t.model.placeholder))("type",t.model.inputType),i["\u0275\u0275attribute"]("accept",t.model.accept)("max",t.model.max)("min",t.model.min)("multiple",t.model.multiple)("step",t.model.step),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",t.model.suffix),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",t.model.hasList))},directives:[r.NgControlStatusGroup,r.FormGroupDirective,c.p,r.DefaultValueAccessor,l.K,r.NgControlStatus,r.FormControlName,r.MaxLengthValidator,r.MinLengthValidator,c.m,r.PatternValidator,r.RequiredValidator,u.MaskedInputDirective,c.o,r.NgSelectOption,r["\u0275angular_packages_forms_forms_z"]],pipes:[c.b],encapsulation:2}),e}(),k=function(){var e=function(e){a(n,e);var t=s(n);function n(e,r){var o;return d(this,n),(o=t.call(this,e,r)).layoutService=e,o.validationService=r,o.blur=new i.EventEmitter,o.change=new i.EventEmitter,o.focus=new i.EventEmitter,o}return n}(l.z);return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](l.E),i["\u0275\u0275directiveInject"](l.H))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["dynamic-ng-bootstrap-radio-group"]],inputs:{formLayout:"formLayout",group:"group",layout:"layout",model:"model"},outputs:{blur:"blur",change:"change",focus:"focus"},features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:11,vars:9,consts:[[3,"formGroup"],["ngbRadioGroup","","role","radiogroup",1,"btn-group","btn-group-toggle",3,"formControlName","id","ngClass","tabindex","change"],[3,"innerHTML",4,"ngIf"],["ngbButtonLabel","",3,"ngClass",4,"ngFor","ngForOf"],[3,"innerHTML"],["ngbButtonLabel","",3,"ngClass"],["type","radio","ngbButton","",3,"disabled","name","value","blur","focus"]],template:function(e,t){1&e&&(i["\u0275\u0275elementContainerStart"](0,0),i["\u0275\u0275text"](1,"\n\n    "),i["\u0275\u0275elementStart"](2,"div",1),i["\u0275\u0275listener"]("change",(function(e){return t.onChange(e)})),i["\u0275\u0275text"](3,"\n\n        "),i["\u0275\u0275template"](4,x,1,1,"legend",2),i["\u0275\u0275text"](5,"\n\n        "),i["\u0275\u0275template"](6,C,5,8,"label",3),i["\u0275\u0275pipe"](7,"async"),i["\u0275\u0275text"](8,"\n\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](9,"\n\n"),i["\u0275\u0275elementContainerEnd"](),i["\u0275\u0275text"](10,"\n")),2&e&&(i["\u0275\u0275property"]("formGroup",t.group),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("formControlName",t.model.id)("id",t.id)("ngClass",t.getClass("element","control"))("tabindex",t.model.tabIndex),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",t.model.legend),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",i["\u0275\u0275pipeBind1"](7,7,t.model.options$)))},directives:[r.NgControlStatusGroup,r.FormGroupDirective,o.H,r.NgControlStatus,r.FormControlName,c.m,c.p,c.o,o.d,o.G],pipes:[c.b],encapsulation:2,changeDetection:0}),e}(),j=function(){var e=function(e){a(n,e);var t=s(n);function n(e,r){var o;return d(this,n),(o=t.call(this,e,r)).layoutService=e,o.validationService=r,o.blur=new i.EventEmitter,o.change=new i.EventEmitter,o.focus=new i.EventEmitter,o}return n}(l.z);return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](l.E),i["\u0275\u0275directiveInject"](l.H))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["dynamic-ng-bootstrap-select"]],inputs:{formLayout:"formLayout",group:"group",layout:"layout",model:"model"},outputs:{blur:"blur",change:"change",focus:"focus"},features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:9,vars:13,consts:[[3,"formGroup"],[1,"form-control",3,"compareWith","formControlName","id","name","ngClass","required","tabindex","blur","change","focus"],[3,"disabled","ngValue",4,"ngFor","ngForOf"],[3,"disabled","ngValue"]],template:function(e,t){1&e&&(i["\u0275\u0275elementContainerStart"](0,0),i["\u0275\u0275text"](1,"\n\n    "),i["\u0275\u0275elementStart"](2,"select",1),i["\u0275\u0275listener"]("blur",(function(e){return t.onBlur(e)}))("change",(function(e){return t.onChange(e)}))("focus",(function(e){return t.onFocus(e)})),i["\u0275\u0275text"](3,"\n\n        "),i["\u0275\u0275template"](4,I,2,3,"option",2),i["\u0275\u0275pipe"](5,"async"),i["\u0275\u0275text"](6,"\n\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](7,"\n\n"),i["\u0275\u0275elementContainerEnd"](),i["\u0275\u0275text"](8,"\n")),2&e&&(i["\u0275\u0275property"]("formGroup",t.group),i["\u0275\u0275advance"](2),i["\u0275\u0275classProp"]("is-invalid",t.showErrorMessages),i["\u0275\u0275property"]("compareWith",t.model.compareWithFn)("formControlName",t.model.id)("id",t.id)("name",t.model.name)("ngClass",t.getClass("element","control"))("required",t.model.required)("tabindex",t.model.tabIndex),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",i["\u0275\u0275pipeBind1"](5,11,t.model.options$)))},directives:[r.NgControlStatusGroup,r.FormGroupDirective,r.SelectControlValueAccessor,r.NgControlStatus,r.FormControlName,c.m,r.RequiredValidator,c.o,r.NgSelectOption,r["\u0275angular_packages_forms_forms_z"]],pipes:[c.b],encapsulation:2}),e}(),M=function(){var e=function(e){a(n,e);var t=s(n);function n(e,r){var o;return d(this,n),(o=t.call(this,e,r)).layoutService=e,o.validationService=r,o.blur=new i.EventEmitter,o.change=new i.EventEmitter,o.focus=new i.EventEmitter,o}return n}(l.z);return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](l.E),i["\u0275\u0275directiveInject"](l.H))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["dynamic-ng-bootstrap-textarea"]],inputs:{formLayout:"formLayout",group:"group",layout:"layout",model:"model"},outputs:{blur:"blur",change:"change",focus:"focus"},features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:5,vars:17,consts:[[3,"formGroup"],[1,"form-control",3,"cols","formControlName","id","maxlength","minlength","name","ngClass","placeholder","readonly","required","rows","spellcheck","tabindex","wrap","blur","change","focus"]],template:function(e,t){1&e&&(i["\u0275\u0275elementContainerStart"](0,0),i["\u0275\u0275text"](1,"\n\n    "),i["\u0275\u0275elementStart"](2,"textarea",1),i["\u0275\u0275listener"]("blur",(function(e){return t.onBlur(e)}))("change",(function(e){return t.onChange(e)}))("focus",(function(e){return t.onFocus(e)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](3,"\n\n"),i["\u0275\u0275elementContainerEnd"](),i["\u0275\u0275text"](4,"\n")),2&e&&(i["\u0275\u0275property"]("formGroup",t.group),i["\u0275\u0275advance"](2),i["\u0275\u0275classProp"]("is-invalid",t.showErrorMessages),i["\u0275\u0275property"]("cols",t.model.cols)("formControlName",t.model.id)("id",t.id)("maxlength",t.model.maxLength)("minlength",t.model.minLength)("name",t.model.name)("ngClass",t.getClass("element","control"))("placeholder",t.model.placeholder)("readonly",t.model.readOnly)("required",t.model.required)("rows",t.model.rows)("spellcheck",t.model.spellCheck)("tabindex",t.model.tabIndex)("wrap",t.model.wrap))},directives:[r.NgControlStatusGroup,r.FormGroupDirective,r.DefaultValueAccessor,r.NgControlStatus,r.FormControlName,r.MaxLengthValidator,r.MinLengthValidator,c.m,r.RequiredValidator],encapsulation:2}),e}(),V=function(){var e=function(e){a(n,e);var t=s(n);function n(e,r,o){var a;return d(this,n),(a=t.call(this,e,r)).layoutService=e,a.validationService=r,a.config=o,a.blur=new i.EventEmitter,a.change=new i.EventEmitter,a.focus=new i.EventEmitter,a}return n}(l.z);return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](l.E),i["\u0275\u0275directiveInject"](l.H),i["\u0275\u0275directiveInject"](o.M))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["dynamic-ng-bootstrap-timepicker"]],viewQuery:function(e,t){var n;(1&e&&i["\u0275\u0275viewQuery"](o.L,3),2&e)&&(i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(t.ngbTimePicker=n.first))},inputs:{formLayout:"formLayout",group:"group",layout:"layout",model:"model"},outputs:{blur:"blur",change:"change",focus:"focus"},features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:5,vars:11,consts:[[3,"formGroup"],[3,"id","formControlName","hourStep","meridian","minuteStep","ngClass","seconds","secondStep","size","spinners"]],template:function(e,t){1&e&&(i["\u0275\u0275elementContainerStart"](0,0),i["\u0275\u0275text"](1,"\n\n    "),i["\u0275\u0275element"](2,"ngb-timepicker",1),i["\u0275\u0275text"](3,"\n\n"),i["\u0275\u0275elementContainerEnd"](),i["\u0275\u0275text"](4,"\n")),2&e&&(i["\u0275\u0275property"]("formGroup",t.group),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("id",t.id)("formControlName",t.model.id)("hourStep",t.model.getAdditional("hourStep",t.config.hourStep))("meridian",t.model.meridian)("minuteStep",t.model.getAdditional("minuteStep",t.config.minuteStep))("ngClass",t.getClass("element","control"))("seconds",t.model.showSeconds)("secondStep",t.model.getAdditional("secondStep",t.config.secondStep))("size",t.model.getAdditional("size",t.config.size))("spinners",t.model.getAdditional("spinners",t.config.spinners)))},directives:[r.NgControlStatusGroup,r.FormGroupDirective,o.L,r.NgControlStatus,r.FormControlName,c.m],encapsulation:2,changeDetection:0}),e}(),P=function(){var e=function e(){d(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[c.c,r.ReactiveFormsModule,o.e,o.i,o.K,o.N,u.TextMaskModule,l.I],l.I]}),e}()},"sw+l":function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n("fXoL"),r=n("e+Av"),o=n("sYmb"),l=function(){var e=function(e){a(n,e);var t=s(n);function n(e,r){var o;return d(this,n),(o=t.call(this,e,r)).layoutService=e,o.validationService=r,o.modelValuesString="",o.blur=new i.EventEmitter,o.change=new i.EventEmitter,o.focus=new i.EventEmitter,o}return n}(r.z);return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](r.E),i["\u0275\u0275directiveInject"](r.H))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-dynamic-disabled"]],inputs:{formId:"formId",group:"group",model:"model"},outputs:{blur:"blur",change:"change",focus:"focus"},features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:12,vars:11,consts:[[1,"form-row","align-items-center"],[1,"col"],[1,"form-control",3,"id","name","value","disabled","type","placeholder","readonly"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275text"](1,"\n    "),i["\u0275\u0275elementStart"](2,"div",0),i["\u0275\u0275text"](3,"\n        "),i["\u0275\u0275elementStart"](4,"div",1),i["\u0275\u0275text"](5,"\n          "),i["\u0275\u0275element"](6,"input",2),i["\u0275\u0275pipe"](7,"translate"),i["\u0275\u0275text"](8,"\n        "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](9,"\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](10,"\n"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](11,"\n")),2&e&&(i["\u0275\u0275advance"](6),i["\u0275\u0275classProp"]("is-invalid",t.showErrorMessages),i["\u0275\u0275property"]("id",t.id)("name",t.model.name)("value",t.modelValuesString)("disabled",t.model.disabled)("type",t.model.inputType)("placeholder",i["\u0275\u0275pipeBind1"](7,9,t.model.placeholder))("readonly",t.model.readOnly))},pipes:[o.d],encapsulation:2}),e}()},tqJZ:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("fXoL"),r=n("e+Av"),o=function(e,t){return[e,t]};function l(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"ds-dynamic-form-control-container",3),i["\u0275\u0275listener"]("dfBlur",(function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().onBlur(e)}))("dfChange",(function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().onChange(e)}))("dfFocus",(function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().onFocus(e)}))("ngbEvent",(function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().onCustomEvent(e,null,!0)})),i["\u0275\u0275elementEnd"]()}if(2&e){var r=t.$implicit,a=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("group",a.control)("hasErrorMessaging",a.model.hasErrorMessages)("hidden",r.hidden)("layout",a.formLayout)("model",r)("templates",a.templates)("ngClass",i["\u0275\u0275pureFunction2"](7,o,a.getClass("element","host",r),a.getClass("grid","host",r)))}}var c=function(){var e=function(e){a(n,e);var t=s(n);function n(e,r){var o;return d(this,n),(o=t.call(this,e,r)).layoutService=e,o.validationService=r,o.blur=new i.EventEmitter,o.change=new i.EventEmitter,o.focus=new i.EventEmitter,o.customEvent=new i.EventEmitter,o}return n}(r.z);return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](r.E),i["\u0275\u0275directiveInject"](r.H))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-dynamic-form-group"]],inputs:{formLayout:"formLayout",group:"group",layout:"layout",model:"model",templates:"templates"},outputs:{blur:"dfBlur",change:"dfChange",focus:"dfFocus",customEvent:"ngbEvent"},features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:8,vars:5,consts:[[3,"formGroup"],["role","group",3,"formGroupName","id","ngClass"],[3,"group","hasErrorMessaging","hidden","layout","model","templates","ngClass","dfBlur","dfChange","dfFocus","ngbEvent",4,"ngFor","ngForOf"],[3,"group","hasErrorMessaging","hidden","layout","model","templates","ngClass","dfBlur","dfChange","dfFocus","ngbEvent"]],template:function(e,t){1&e&&(i["\u0275\u0275elementContainerStart"](0,0),i["\u0275\u0275text"](1,"\n\n  "),i["\u0275\u0275elementStart"](2,"div",1),i["\u0275\u0275text"](3,"\n\n    "),i["\u0275\u0275template"](4,l,1,10,"ds-dynamic-form-control-container",2),i["\u0275\u0275text"](5,"\n  "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](6,"\n"),i["\u0275\u0275elementContainerEnd"](),i["\u0275\u0275text"](7,"\n")),2&e&&(i["\u0275\u0275property"]("formGroup",t.group),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("formGroupName",t.model.id)("id",t.id)("ngClass",t.getClass("element","control")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",t.model.group))},encapsulation:2}),e}()},uyTL:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var i=n("fXoL"),r=n("1kSV"),o=n("e+Av"),l=n("3Pt+"),c=n("ofXK");function u(e,t){if(1&e&&i["\u0275\u0275element"](0,"i",7),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275classMap"](n.model.toggleIcon)}}function p(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"span"),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](n.model.toggleLabel)}}var m=function(){var e=function(e){a(n,e);var t=s(n);function n(e,r,o){var a;return d(this,n),(a=t.call(this,e,r)).layoutService=e,a.validationService=r,a.config=o,a.bindId=!0,a.blur=new i.EventEmitter,a.change=new i.EventEmitter,a.focus=new i.EventEmitter,a}return n}(o.z);return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](o.E),i["\u0275\u0275directiveInject"](o.H),i["\u0275\u0275directiveInject"](r.h))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-dynamic-date-picker-inline"]],viewQuery:function(e,t){var n;(1&e&&i["\u0275\u0275viewQuery"](r.g,1),2&e)&&(i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(t.ngbDatePicker=n.first))},inputs:{bindId:"bindId",group:"group",layout:"layout",model:"model"},outputs:{blur:"blur",change:"change",focus:"focus"},features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:16,vars:25,consts:[[1,"input-group",3,"formGroup"],["ngbDatepicker","",1,"form-control",3,"displayMonths","id","firstDayOfWeek","formControlName","maxDate","minDate","name","navigation","ngClass","outsideDays","placeholder","placement","showWeekdays","showWeekNumbers","startDate","blur","dateSelect","change","focus"],["datepicker","ngbDatepicker"],[1,"input-group-append"],["type","button",1,"btn","btn-outline-secondary",3,"disabled","click"],["aria-hidden","true",3,"class",4,"ngIf"],[4,"ngIf"],["aria-hidden","true"]],template:function(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275text"](1,"\n\n    "),i["\u0275\u0275elementStart"](2,"input",1,2),i["\u0275\u0275listener"]("blur",(function(e){return t.onBlur(e)}))("dateSelect",(function(e){return t.onChange(e)}))("change",(function(e){return t.onChange(e)}))("focus",(function(e){return t.onFocus(e)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](4,"\n\n    "),i["\u0275\u0275elementStart"](5,"div",3),i["\u0275\u0275text"](6,"\n\n        "),i["\u0275\u0275elementStart"](7,"button",4),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275reference"](3).toggle()})),i["\u0275\u0275text"](8,"\n\n            "),i["\u0275\u0275template"](9,u,1,3,"i",5),i["\u0275\u0275text"](10,"\n            "),i["\u0275\u0275template"](11,p,2,1,"span",6),i["\u0275\u0275text"](12,"\n\n        "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](13,"\n\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](14,"\n\n"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](15,"\n")}2&e&&(i["\u0275\u0275property"]("formGroup",t.group),i["\u0275\u0275advance"](2),i["\u0275\u0275classProp"]("is-invalid",t.showErrorMessages),i["\u0275\u0275property"]("displayMonths",t.model.getAdditional("displayMonths",t.config.displayMonths))("id",t.id)("firstDayOfWeek",t.model.getAdditional("firstDayOfWeek",t.config.firstDayOfWeek))("formControlName",t.model.id)("maxDate",t.model.max)("minDate",t.model.min)("name",t.model.name)("navigation",t.model.getAdditional("navigation",t.config.navigation))("ngClass",t.getClass("element","control"))("outsideDays",t.model.getAdditional("outsideDays",t.config.outsideDays))("placeholder",t.model.placeholder)("placement",t.model.getAdditional("placement","bottom-left"))("showWeekdays",t.model.getAdditional("showWeekdays",t.config.showWeekdays))("showWeekNumbers",t.model.getAdditional("showWeekNumbers",t.config.showWeekNumbers))("startDate",t.model.focusedDate),i["\u0275\u0275attribute"]("aria-labelledby","label_"+t.model.id),i["\u0275\u0275advance"](5),i["\u0275\u0275classProp"]("disabled",t.model.disabled),i["\u0275\u0275property"]("disabled",t.model.disabled),i["\u0275\u0275attribute"]("aria-labelledby","label_"+t.model.id),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",t.model.toggleIcon),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",t.model.toggleLabel))},directives:[l.NgControlStatusGroup,l.FormGroupDirective,r.p,l.DefaultValueAccessor,l.NgControlStatus,l.FormControlName,c.m,c.p],encapsulation:2}),e}()},xjoE:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var i=n("fXoL"),r=n("n7Wa"),o=n("e+Av"),l=n("3Pt+"),c=n("ofXK"),u=function(e,t){return[e,t]},p=function(){var e=function(e){a(n,e);var t=s(n);function n(e,r){var o;return d(this,n),(o=t.call(this,e,r)).bindId=!0,o.selected=new i.EventEmitter,o.remove=new i.EventEmitter,o.blur=new i.EventEmitter,o.change=new i.EventEmitter,o.focus=new i.EventEmitter,o}return n}(r.c);return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](o.E),i["\u0275\u0275directiveInject"](o.H))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-custom-switch"]],inputs:{bindId:"bindId",group:"group",model:"model"},outputs:{selected:"selected",remove:"remove",blur:"blur",change:"change",focus:"focus"},features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:10,vars:20,consts:[[1,"form-check","custom-control","custom-switch",3,"formGroup"],["type","checkbox",1,"form-check-input","custom-control-input",3,"checked","id","formControlName","indeterminate","name","ngClass","required","tabindex","value","blur","change","focus"],[1,"form-check-label","custom-control-label",3,"for"],[3,"innerHTML","ngClass"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275text"](1,"\n  "),i["\u0275\u0275elementStart"](2,"input",1),i["\u0275\u0275listener"]("blur",(function(e){return t.onBlur(e)}))("change",(function(e){return t.onChange(e)}))("focus",(function(e){return t.onFocus(e)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](3,"\n  "),i["\u0275\u0275elementStart"](4,"label",2),i["\u0275\u0275text"](5,"\n    "),i["\u0275\u0275element"](6,"span",3),i["\u0275\u0275text"](7,"\n  "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](8,"\n"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](9,"\n")),2&e&&(i["\u0275\u0275classProp"]("disabled",t.model.disabled),i["\u0275\u0275property"]("formGroup",t.group),i["\u0275\u0275advance"](2),i["\u0275\u0275classProp"]("is-invalid",t.showErrorMessages),i["\u0275\u0275property"]("checked",t.model.checked)("id",t.id)("formControlName",t.model.id)("indeterminate",t.model.indeterminate)("name",t.model.name)("ngClass",t.getClass("element","control"))("required",t.model.required)("tabindex",t.model.tabIndex)("value",t.model.value),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("for",t.bindId&&t.model.id),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("innerHTML",t.model.label,i["\u0275\u0275sanitizeHtml"])("ngClass",i["\u0275\u0275pureFunction2"](17,u,t.getClass("element","label"),t.getClass("grid","label"))))},directives:[l.NgControlStatusGroup,l.FormGroupDirective,l.CheckboxControlValueAccessor,l.CheckboxRequiredValidator,l.NgControlStatus,l.FormControlName,c.m],styles:[""]}),e}()},yXJd:function(e,t,n){"use strict";n.d(t,"b",(function(){return E})),n.d(t,"a",(function(){return w}));var i=n("fXoL"),r=n("2Vo4"),o=n("pLZG"),l=n("IzEk"),c=n("naZE"),u=n("1QIV"),p=n("J3qs"),f=n("4SI6"),h=n("XcME"),v=n("EGek"),g=n("l7P3"),b=n("J/vq"),y=n("ofXK"),x=n("Frqi"),C=n("Ytjd"),I=n("sYmb");function O(e,t){1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275text"](1,"\n            "),i["\u0275\u0275element"](2,"ds-loading",5),i["\u0275\u0275text"](3,"\n        "),i["\u0275\u0275elementContainerEnd"]()),2&e&&(i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("showMessage",!1))}function S(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275text"](1,"\n            "),i["\u0275\u0275element"](2,"ds-metadata-representation-loader",6),i["\u0275\u0275pipe"](3,"async"),i["\u0275\u0275text"](4,"\n        "),i["\u0275\u0275elementContainerEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("mdRepresentation",i["\u0275\u0275pipeBind1"](3,1,n.metadataRepresentation$))}}var E=function(e){a(n,e);var t=s(n);function n(e,i,r,o,a,l,s){var c;return d(this,n),(c=t.call(this,l,s)).relationship=e,c.useLeftItem=i,c.relationshipService=r,c.store=o,c.submissionID=a,c.relationship=e,c.useLeftItem=i,c}return m(n,[{key:"getId",value:function(){return this.relationship.id}},{key:"getPlace",value:function(){return this.useLeftItem?this.relationship.rightPlace:this.relationship.leftPlace}}]),n}(function(){function e(t,n){d(this,e),this.oldIndex=t,this.newIndex=n}return m(e,[{key:"update",value:function(){this.oldIndex=this.newIndex}},{key:"hasMoved",get:function(){return this.oldIndex!==this.newIndex}}]),e}()),w=function(){var e=function(){function e(t,n,o){d(this,e),this.selectableListService=t,this.store=n,this.submissionService=o,this.metadataRepresentation$=new r.a(void 0),this.remove=new i.EventEmitter,this.subs=[]}return m(e,[{key:"ngOnInit",value:function(){this.ngOnChanges()}},{key:"ngOnChanges",value:function(){var e=this;Object(p.b)(this.reoRel)&&this.subs.push((this.reoRel.useLeftItem?this.reoRel.relationship.leftItem:this.reoRel.relationship.rightItem).pipe(Object(u.c)(),Object(u.o)(),Object(o.a)((function(e){return Object(p.b)(e)&&Object(p.e)(e.uuid)}))).subscribe((function(t){e.relatedItem=t;var n=e.submissionItem.firstMetadata(e.relationshipOptions.metadataField,{value:e.relatedItem.uuid});if(Object(p.b)(n)){var i=e.submissionItem.firstMetadata(e.metadataFields,{authority:n.authority}),r=Object.assign(new c.a(i),e.relatedItem);e.metadataRepresentation$.next(r)}})))}},{key:"removeSelection",value:function(){var e=this;this.submissionService.dispatchSave(this.submissionId),this.submissionService.getSubmissionObject(this.submissionId).pipe(Object(o.a)((function(e){return!e.savePending&&!e.isLoading})),Object(l.a)(1)).subscribe((function(){e.selectableListService.deselectSingle(e.listId,Object.assign(new f.a,{indexableObject:e.relatedItem})),e.store.dispatch(new h.c(e.submissionItem,e.relatedItem,e.relationshipOptions.relationshipType,e.submissionId)),e.remove.emit()}))}},{key:"ngOnDestroy",value:function(){this.subs.filter((function(e){return Object(p.b)(e)})).forEach((function(e){return e.unsubscribe()}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](v.a),i["\u0275\u0275directiveInject"](g.i),i["\u0275\u0275directiveInject"](b.a))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-existing-metadata-list-element"]],inputs:{listId:"listId",submissionItem:"submissionItem",reoRel:"reoRel",metadataFields:"metadataFields",relationshipOptions:"relationshipOptions",submissionId:"submissionId"},outputs:{remove:"remove"},features:[i["\u0275\u0275NgOnChangesFeature"]],decls:18,vars:9,consts:[[1,"d-flex"],[1,"mr-auto","text-contents"],[4,"ngIf"],["type","button",1,"btn","btn-secondary",3,"title","click"],["aria-hidden","true",1,"fas","fa-trash"],[3,"showMessage"],[3,"mdRepresentation"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275text"](1,"\n    "),i["\u0275\u0275elementStart"](2,"span",1),i["\u0275\u0275text"](3,"\n        "),i["\u0275\u0275template"](4,O,4,1,"ng-container",2),i["\u0275\u0275pipe"](5,"async"),i["\u0275\u0275text"](6,"\n        "),i["\u0275\u0275template"](7,S,5,3,"ng-container",2),i["\u0275\u0275pipe"](8,"async"),i["\u0275\u0275text"](9,"\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](10,"\n    "),i["\u0275\u0275elementStart"](11,"button",3),i["\u0275\u0275listener"]("click",(function(){return t.removeSelection()})),i["\u0275\u0275pipe"](12,"translate"),i["\u0275\u0275text"](13,"\n        "),i["\u0275\u0275element"](14,"i",4),i["\u0275\u0275text"](15,"\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](16,"\n"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](17,"\n")),2&e&&(i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("ngIf",!i["\u0275\u0275pipeBind1"](5,3,t.metadataRepresentation$)),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",i["\u0275\u0275pipeBind1"](8,5,t.metadataRepresentation$)),i["\u0275\u0275advance"](4),i["\u0275\u0275propertyInterpolate"]("title",i["\u0275\u0275pipeBind1"](12,7,"form.remove")))},directives:[y.p,x.a,C.a],pipes:[y.b,I.d],styles:["span.text-contents[_ngcontent-%COMP%]{padding:var(--bs-btn-padding-y) 0}"]}),e}()},zGzN:function(e,t,n){"use strict";n.d(t,"a",(function(){return M}));var i=n("fXoL"),r=n("/eM4"),o=n("R7cy"),a=n("84tU"),l=n("ynxc"),s=n("7DXY"),c=n("1QIV"),u=n("eIep"),p=n("IzEk"),f=n("4SI6"),h=n("6c/T"),v=n("1kSV"),g=n("OAtg"),b=n("EGek"),y=n("iqTE"),x=n("lI3o"),C=n("sYmb"),I=n("ofXK"),O=n("JYDz");function S(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275elementStart"](1,"a",17),i["\u0275\u0275text"](2),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275propertyInterpolate"]("href",n.uri.value,i["\u0275\u0275sanitizeUrl"]),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](n.uri.value)}}var E=function(e){return{repeatable:!1,listId:e}};function w(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"ds-search-results",18),i["\u0275\u0275listener"]("deselectObject",(function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().deselectEntity()}))("selectObject",(function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().selectEntity(e)})),i["\u0275\u0275pipe"](1,"async"),i["\u0275\u0275text"](2,"\n    "),i["\u0275\u0275elementEnd"]()}if(2&e){var r=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("searchResults",i["\u0275\u0275pipeBind1"](1,9,r.localEntitiesRD$))("sortConfig",null==r.lookupRelationService.searchConfig?null:r.lookupRelationService.searchConfig.sort)("searchConfig",r.lookupRelationService.searchConfig)("selectable",!0)("disableHeader",!0)("hidePaginationDetail",!0)("selectionConfig",i["\u0275\u0275pureFunction1"](11,E,r.entityListId))("linkType",r.linkTypes.ExternalLink)("context",r.context)}}function k(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",19),i["\u0275\u0275text"](1,"\n    "),i["\u0275\u0275elementStart"](2,"h5",8),i["\u0275\u0275text"](3),i["\u0275\u0275pipe"](4,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](5,"\n\n    "),i["\u0275\u0275elementStart"](6,"div",10),i["\u0275\u0275text"](7,"\n      "),i["\u0275\u0275elementStart"](8,"input",20),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().selectNewAuthority()})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](9,"\n      "),i["\u0275\u0275elementStart"](10,"label",21),i["\u0275\u0275text"](11),i["\u0275\u0275pipe"](12,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](13,"\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](14,"\n  "),i["\u0275\u0275elementEnd"]()}if(2&e){var r=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](4,3,r.labelPrefix+"authority")),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("checked",r.selectedImportType===r.importType.NewAuthority),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](12,5,r.labelPrefix+"authority.new"))}}var j=function(e){return e.None="None",e.LocalEntity="LocalEntity",e.LocalAuthority="LocalAuthority",e.NewEntity="NewEntity",e.NewAuthority="NewAuthority",e}({}),M=function(){var e=function(){function e(t,n,r,o,s,c,u){d(this,e),this.modal=t,this.lookupRelationService=n,this.modalService=r,this.selectService=o,this.itemService=s,this.notificationsService=c,this.translateService=u,this.labelPrefix="submission.sections.describe.relationship-lookup.external-source.import-modal.",this.linkTypes=a.a,this.context=l.a.EntitySearchModalWithNameVariants,this.entityListId="external-source-import-entity",this.authorityListId="external-source-import-authority",this.importType=j,this.selectedImportType=j.None,this.importedObject=new i.EventEmitter,this.authorityEnabled=!1}return m(e,[{key:"ngOnInit",value:function(){this.uri=r.a.first(this.externalSourceEntry.metadata,"dc.identifier.uri");var e=Object.assign(new s.a,{id:"external-entry-import",pageSize:5});this.searchOptions=Object.assign(new o.a({query:this.externalSourceEntry.value,pagination:e})),this.localEntitiesRD$=this.lookupRelationService.getLocalResults(this.relationship,this.searchOptions)}},{key:"close",value:function(){this.modal.close()}},{key:"import",value:function(){switch(this.selectedImportType){case j.LocalEntity:this.importLocalEntity();break;case j.NewEntity:this.importNewEntity();break;case j.LocalAuthority:this.importLocalAuthority();break;case j.NewAuthority:this.importNewAuthority()}this.selectedImportType=j.None,this.deselectAllLists(),this.close()}},{key:"importLocalEntity",value:function(){void 0!==this.selectedEntity&&(this.notificationsService.success(this.translateService.get(this.labelPrefix+this.label+".added.local-entity")),this.importedObject.emit(this.selectedEntity))}},{key:"importNewEntity",value:function(){var e=this;this.modalRef=this.modalService.open(h.a,{size:"lg"}),this.modalRef.componentInstance.entityType=this.relatedEntityType.label,this.modalRef.componentInstance.selectedEvent.pipe(Object(u.a)((function(t){return e.itemService.importExternalSourceEntry(e.externalSourceEntry,t.collection.id).pipe(Object(c.i)(),Object(c.o)(),Object(p.a)(1))}))).subscribe((function(t){e.lookupRelationService.removeLocalResultsCache();var n=Object.assign(new f.a,{indexableObject:t});e.notificationsService.success(e.translateService.get(e.labelPrefix+e.label+".added.new-entity")),e.modalRef.close(),e.importedObject.emit(n)}))}},{key:"importLocalAuthority",value:function(){}},{key:"importNewAuthority",value:function(){}},{key:"deselectEntity",value:function(){this.selectedEntity=void 0,this.selectedImportType===j.LocalEntity&&(this.selectedImportType=j.None)}},{key:"selectEntity",value:function(e){this.selectedEntity=e,this.selectedImportType=j.LocalEntity}},{key:"selectNewEntity",value:function(){this.selectedImportType===j.NewEntity?this.selectedImportType=j.None:(this.selectedImportType=j.NewEntity,this.deselectAllLists())}},{key:"deselectAuthority",value:function(){this.selectedAuthority=void 0,this.selectedImportType===j.LocalAuthority&&(this.selectedImportType=j.None)}},{key:"selectAuthority",value:function(e){this.selectedAuthority=e,this.selectedImportType=j.LocalAuthority}},{key:"selectNewAuthority",value:function(){this.selectedImportType===j.NewAuthority?this.selectedImportType=j.None:(this.selectedImportType=j.NewAuthority,this.deselectAllLists())}},{key:"deselectAllLists",value:function(){this.selectService.deselectAll(this.entityListId),this.selectService.deselectAll(this.authorityListId)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](v.c),i["\u0275\u0275directiveInject"](g.a),i["\u0275\u0275directiveInject"](v.q),i["\u0275\u0275directiveInject"](b.a),i["\u0275\u0275directiveInject"](y.a),i["\u0275\u0275directiveInject"](x.a),i["\u0275\u0275directiveInject"](C.e))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-external-source-entry-import-modal"]],decls:71,vars:29,consts:[[1,"modal-header"],["id","modal-title",1,"modal-title"],["type","button","aria-label","Close button","aria-describedby","modal-title",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],["id","external-source-entry-information",1,"mb-3"],[4,"ngIf"],["id","external-source-entry-entities",1,"mb-3"],[1,"font-weight-bold"],[3,"searchResults","sortConfig","searchConfig","selectable","disableHeader","hidePaginationDetail","selectionConfig","linkType","context","deselectObject","selectObject",4,"ngIf"],[1,"ml-4"],["type","radio","name","new-entity","id","new-entity","value","new-entity",1,"form-check-input",3,"checked","click"],["for","new-entity",1,"form-check-label"],["id","external-source-entry-authority",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"disabled","click"],[3,"href"],[3,"searchResults","sortConfig","searchConfig","selectable","disableHeader","hidePaginationDetail","selectionConfig","linkType","context","deselectObject","selectObject"],["id","external-source-entry-authority"],["type","radio","name","new-authority","id","new-authority","value","new-authority",1,"form-check-input",3,"checked","click"],["for","new-authority",1,"form-check-label"]],template:function(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275text"](1,"\n  "),i["\u0275\u0275elementStart"](2,"h4",1),i["\u0275\u0275text"](3),i["\u0275\u0275pipe"](4,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](5,"\n  "),i["\u0275\u0275elementStart"](6,"button",2),i["\u0275\u0275listener"]("click",(function(){return t.modal.dismiss()})),i["\u0275\u0275text"](7,"\n    "),i["\u0275\u0275elementStart"](8,"span",3),i["\u0275\u0275text"](9,"\xd7"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](10,"\n  "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](11,"\n"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](12,"\n"),i["\u0275\u0275elementStart"](13,"div",4),i["\u0275\u0275text"](14,"\n  "),i["\u0275\u0275elementStart"](15,"h4"),i["\u0275\u0275text"](16),i["\u0275\u0275pipe"](17,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](18,"\n  "),i["\u0275\u0275elementStart"](19,"div",5),i["\u0275\u0275text"](20,"\n    "),i["\u0275\u0275elementStart"](21,"div"),i["\u0275\u0275elementStart"](22,"span"),i["\u0275\u0275text"](23),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](24,"\n    "),i["\u0275\u0275template"](25,S,3,2,"div",6),i["\u0275\u0275text"](26,"\n  "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](27,"\n\n  "),i["\u0275\u0275elementStart"](28,"h4"),i["\u0275\u0275text"](29),i["\u0275\u0275pipe"](30,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](31,"\n\n  "),i["\u0275\u0275elementStart"](32,"div",7),i["\u0275\u0275text"](33,"\n    "),i["\u0275\u0275elementStart"](34,"h5",8),i["\u0275\u0275text"](35),i["\u0275\u0275pipe"](36,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](37,"\n\n    "),i["\u0275\u0275template"](38,w,3,13,"ds-search-results",9),i["\u0275\u0275pipe"](39,"async"),i["\u0275\u0275text"](40,"\n    "),i["\u0275\u0275elementStart"](41,"div",10),i["\u0275\u0275text"](42,"\n      "),i["\u0275\u0275elementStart"](43,"input",11),i["\u0275\u0275listener"]("click",(function(){return t.selectNewEntity()})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](44,"\n      "),i["\u0275\u0275elementStart"](45,"label",12),i["\u0275\u0275text"](46),i["\u0275\u0275pipe"](47,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](48,"\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](49,"\n  "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](50,"\n  "),i["\u0275\u0275template"](51,k,15,7,"div",13),i["\u0275\u0275text"](52,"\n"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](53,"\n"),i["\u0275\u0275elementStart"](54,"div",14),i["\u0275\u0275text"](55,"\n  "),i["\u0275\u0275elementStart"](56,"div"),i["\u0275\u0275text"](57,"\n    "),i["\u0275\u0275elementStart"](58,"button",15),i["\u0275\u0275listener"]("click",(function(){return t.close()})),i["\u0275\u0275text"](59),i["\u0275\u0275pipe"](60,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](61,"\n  "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](62,"\n  "),i["\u0275\u0275elementStart"](63,"div"),i["\u0275\u0275text"](64,"\n    "),i["\u0275\u0275elementStart"](65,"button",16),i["\u0275\u0275listener"]("click",(function(){return t.import()})),i["\u0275\u0275text"](66),i["\u0275\u0275pipe"](67,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](68,"\n  "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](69,"\n"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](70,"\n")),2&e){var n;i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](4,13,t.labelPrefix+t.label+".title")),i["\u0275\u0275advance"](13),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](17,15,t.labelPrefix+"head."+t.externalSourceEntry.externalSource)),i["\u0275\u0275advance"](7),i["\u0275\u0275textInterpolate"](t.externalSourceEntry.display),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",t.uri),i["\u0275\u0275advance"](4),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](30,17,t.labelPrefix+"select")),i["\u0275\u0275advance"](6),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](36,19,t.labelPrefix+"entities")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",(null==(n=i["\u0275\u0275pipeBind1"](39,21,t.localEntitiesRD$))||null==n.payload||null==n.payload.page?null:n.payload.page.length)>0),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("checked",t.selectedImportType===t.importType.NewEntity),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](47,23,t.labelPrefix+"entities.new")),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngIf",t.authorityEnabled),i["\u0275\u0275advance"](8),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](60,25,t.labelPrefix+"cancel")),i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("disabled",t.selectedImportType===t.importType.None),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](67,27,t.labelPrefix+"import"))}},directives:[I.p,O.a],pipes:[C.d,I.b],styles:[".modal-footer[_ngcontent-%COMP%]{-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}"]}),e}()},zVKZ:function(e,t,n){"use strict";n.d(t,"a",(function(){return B}));var i=n("fXoL"),r=n("dtp9"),o=n("joI/"),a=n("lJxs"),l=n("eIep"),s=n("JX91"),c=n("mEo1"),u=n("7DXY"),p=n("zGzN"),f=n("J3qs"),h=n("1QIV"),v=n("tyNb"),g=n("dHui"),b=n("1kSV"),y=n("EGek"),x=n("MFUF"),C=n("pKvA"),I=n("DdXh"),O=n("O/5o"),S=n("ofXK"),E=n("jLV+"),w=n("Frqi"),k=n("HZwm"),j=n("sYmb"),M=function(e,t){return{repeatable:e,listId:t}};function V(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"ds-viewable-collection",8),i["\u0275\u0275listener"]("importObject",(function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"](2).import(e)})),i["\u0275\u0275pipe"](1,"async"),i["\u0275\u0275text"](2,"\n        "),i["\u0275\u0275elementEnd"]()}if(2&e){var r=i["\u0275\u0275nextContext"]().ngVar,o=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("@fadeIn",void 0)("objects",r)("selectionConfig",i["\u0275\u0275pureFunction2"](10,M,o.repeatable,o.listId))("config",i["\u0275\u0275pipeBind1"](1,8,o.currentPagination$))("hideGear",!0)("context",o.context)("importable",!0)("importConfig",o.importConfig)}}function P(e,t){1&e&&(i["\u0275\u0275element"](0,"ds-loading",9),i["\u0275\u0275pipe"](1,"translate")),2&e&&i["\u0275\u0275propertyInterpolate"]("message",i["\u0275\u0275pipeBind1"](1,1,"loading.search-results"))}function F(e,t){1&e&&(i["\u0275\u0275element"](0,"ds-error",9),i["\u0275\u0275pipe"](1,"translate")),2&e&&i["\u0275\u0275propertyInterpolate"]("message",i["\u0275\u0275pipeBind1"](1,1,"error.search-results"))}function _(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",10),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"]("\n          ",i["\u0275\u0275pipeBind1"](2,1,"search.results.empty"),"\n        "))}function L(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275text"](1,"\n        "),i["\u0275\u0275template"](2,V,3,13,"ds-viewable-collection",5),i["\u0275\u0275text"](3,"\n        "),i["\u0275\u0275template"](4,P,2,3,"ds-loading",6),i["\u0275\u0275text"](5,"\n        "),i["\u0275\u0275template"](6,F,2,3,"ds-error",6),i["\u0275\u0275text"](7,"\n        "),i["\u0275\u0275template"](8,_,3,3,"div",7),i["\u0275\u0275text"](9,"\n      "),i["\u0275\u0275elementContainerEnd"]()),2&e){var n=t.ngVar;i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",(null==n?null:n.hasSucceeded)&&!(null!=n&&n.isLoading)&&(null==n||null==n.payload||null==n.payload.page?null:n.payload.page.length)>0),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!n||(null==n?null:n.isLoading)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",(null==n?null:n.hasFailed)&&(!(null!=n&&n.errorMessage)||400!=(null==n?null:n.statusCode))),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",0==(null==n||null==n.payload||null==n.payload.page?null:n.payload.page.length)||400==(null==n?null:n.statusCode))}}var B=function(){var e=function(){function e(t,n,r,o,a,l){d(this,e),this.router=t,this.searchConfigService=n,this.externalSourceService=r,this.modalService=o,this.selectableListService=a,this.paginationService=l,this.importedObject=new i.EventEmitter,this.initialPagination=Object.assign(new u.a,{id:"spc",pageSize:5})}return m(e,[{key:"ngOnInit",value:function(){var e=this;this.externalSource.entityTypes.pipe(Object(h.g)(),Object(a.a)((function(e){return e.hasSucceeded&&e.payload.totalElements>0?e.payload.page[0]:null}))).subscribe((function(t){e.relatedEntityType=t})),this.resetRoute(),this.entriesRD$=this.searchConfigService.paginatedSearchOptions.pipe(Object(l.a)((function(t){return e.externalSourceService.getExternalSourceEntries(e.externalSource.id,t).pipe(Object(s.a)(void 0))}))),this.currentPagination$=this.paginationService.getCurrentPagination(this.searchConfigService.paginationID,this.initialPagination),this.importConfig={buttonLabel:"submission.sections.describe.relationship-lookup.external-source.import-button-title."+this.label}}},{key:"import",value:function(e){var t=this;this.modalRef=this.modalService.open(p.a,{size:"lg",container:"ds-dynamic-lookup-relation-modal"});var n=this.modalRef.componentInstance;n.externalSourceEntry=e,n.item=this.item,n.collection=this.collection,n.relationship=this.relationship,n.label=this.label,n.relatedEntityType=this.relatedEntityType,this.importObjectSub=n.importedObject.subscribe((function(e){t.selectableListService.selectSingle(t.listId,e),t.importedObject.emit(e)}))}},{key:"ngOnDestroy",value:function(){Object(f.b)(this.importObjectSub)&&this.importObjectSub.unsubscribe()}},{key:"resetRoute",value:function(){this.paginationService.updateRoute(this.searchConfigService.paginationID,{page:1,pageSize:5})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](v.h),i["\u0275\u0275directiveInject"](o.a),i["\u0275\u0275directiveInject"](g.a),i["\u0275\u0275directiveInject"](b.q),i["\u0275\u0275directiveInject"](y.a),i["\u0275\u0275directiveInject"](x.a))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-dynamic-lookup-relation-external-source-tab"]],inputs:{label:"label",listId:"listId",item:"item",collection:"collection",relationship:"relationship",context:"context",repeatable:"repeatable",externalSource:"externalSource"},outputs:{importedObject:"importedObject"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:r.SEARCH_CONFIG_SERVICE,useClass:o.a}])],decls:30,vars:16,consts:[[1,"row"],[1,"col-4"],[1,"col-8"],[3,"query","inPlaceSearch","searchPlaceholder"],[4,"ngVar"],[3,"objects","selectionConfig","config","hideGear","context","importable","importConfig","importObject",4,"ngIf"],[3,"message",4,"ngIf"],["id","empty-external-entry-list",4,"ngIf"],[3,"objects","selectionConfig","config","hideGear","context","importable","importConfig","importObject"],[3,"message"],["id","empty-external-entry-list"]],template:function(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275text"](1,"\n  "),i["\u0275\u0275elementStart"](2,"div",1),i["\u0275\u0275text"](3,"\n    "),i["\u0275\u0275elementStart"](4,"h3"),i["\u0275\u0275text"](5),i["\u0275\u0275pipe"](6,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](7,"\n    "),i["\u0275\u0275element"](8,"ds-page-size-selector"),i["\u0275\u0275text"](9,"\n  "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](10,"\n  "),i["\u0275\u0275elementStart"](11,"div",2),i["\u0275\u0275text"](12,"\n    "),i["\u0275\u0275elementStart"](13,"ds-search-form",3),i["\u0275\u0275pipe"](14,"async"),i["\u0275\u0275pipe"](15,"translate"),i["\u0275\u0275text"](16,"\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](17,"\n    "),i["\u0275\u0275elementStart"](18,"div"),i["\u0275\u0275text"](19,"\n      "),i["\u0275\u0275elementStart"](20,"h3"),i["\u0275\u0275text"](21),i["\u0275\u0275pipe"](22,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](23,"\n      "),i["\u0275\u0275template"](24,L,10,4,"ng-container",4),i["\u0275\u0275pipe"](25,"async"),i["\u0275\u0275text"](26,"\n    "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](27,"\n  "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](28,"\n"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](29,"\n")),2&e){var n;i["\u0275\u0275advance"](5),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](6,6,"submission.sections.describe.relationship-lookup.selection-tab.settings")),i["\u0275\u0275advance"](8),i["\u0275\u0275property"]("query",null==(n=i["\u0275\u0275pipeBind1"](14,8,t.searchConfigService.paginatedSearchOptions))?null:n.query)("inPlaceSearch",!0)("searchPlaceholder",i["\u0275\u0275pipeBind1"](15,10,"submission.sections.describe.relationship-lookup.selection-tab.search-form.placeholder")),i["\u0275\u0275advance"](8),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](22,12,"submission.sections.describe.relationship-lookup.selection-tab.title."+t.externalSource.id)),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngVar",i["\u0275\u0275pipeBind1"](25,14,t.entriesRD$))}},directives:[C.a,I.a,O.a,S.p,E.a,w.a,k.a],pipes:[j.d,S.b],styles:[""],data:{animation:[c.a,c.c]}}),e}()}}])}();
//# sourceMappingURL=1-es5.c55485a0b815b19369c5.js.map