(window.webpackJsonp=window.webpackJsonp||[]).push([[11,14],{A0IO:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("fXoL"),r=n("J3qs"),a=n("q5u1"),s=n("tv3Y");let o=(()=>{class e{constructor(e){this.breadcrumbService=e}resolve(e,t){const n=e.data.breadcrumbKey;if(Object(r.a)(n))throw new Error('You provided an i18nBreadcrumbResolver for url "'+e.url+"\" but no breadcrumbKey in the route's data");const i=Object(a.b)(e);return{provider:this.breadcrumbService,key:n,url:i}}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275inject"](s.a))},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},Ssd4:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var i=n("fXoL"),r=n("B/au"),a=n("pLZG"),s=n("lJxs"),o=n("cBqT"),l=n("32Ea"),c=n("J3qs"),p=n("zBnI"),u=n("1QIV"),d=n("Kvit");let m=(()=>{class e{parse(e,t){const n=t.payload,i=Object.assign(new p.a,n);return new d.c(t.statusCode,void 0,i)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var g=n("X/78"),h=n("7vy/"),f=n("uLZQ");let b=(()=>{class e{constructor(e,t,n){this.requestService=e,this.rdbService=t,this.halService=n,this.linkPath="registrations",this.searchByTokenPath="/search/findByToken?token="}getRegistrationEndpoint(){return this.halService.getEndpoint(this.linkPath)}getTokenSearchEndpoint(e){return this.halService.getEndpoint(this.linkPath).pipe(Object(a.a)(e=>Object(c.e)(e)),Object(s.a)(t=>`${t}${this.searchByTokenPath}${e}`))}registerEmail(e){const t=new p.a;t.email=e;const n=this.requestService.generateRequestId();return this.getRegistrationEndpoint().pipe(Object(o.a)(e=>Object(c.b)(e)),Object(s.a)(e=>{const i=new r.l(n,e,t);this.requestService.send(i)})).subscribe(),this.rdbService.buildFromRequestUUID(n).pipe(Object(u.g)())}searchByToken(e){const t=this.requestService.generateRequestId(),n=this.getTokenSearchEndpoint(e).pipe(Object(o.a)(e=>Object(c.b)(e)));return n.subscribe(e=>{const n=new r.g(t,e);Object.assign(n,{getResponseParser:()=>m}),this.requestService.send(n,!0)}),this.rdbService.buildSingle(n).pipe(Object(l.a)(e=>e.isStale),Object(u.i)(),Object(s.a)(t=>Object.assign(new p.a,{email:t.payload.email,token:e,user:t.payload.user})))}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275inject"](g.a),i["\u0275\u0275inject"](h.a),i["\u0275\u0275inject"](f.a))},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},esCw:function(e,t,n){"use strict";n.r(t),n.d(t,"AccessControlModule",(function(){return Pt}));var i=n("ofXK"),r=n("fXoL"),a=n("tyNb"),s=n("PCNd"),o=n("2Vo4"),l=n("itXk"),c=n("eIep"),p=n("lJxs"),u=n("IzEk"),d=n("f+Ev"),m=n("J3qs"),g=n("7DXY");class h{}var f=n("FU+A"),b=n("1QIV"),x=n("Q8wr"),v=n("oBfO"),S=n("wLgS"),y=n("sYmb"),E=n("lI3o"),I=n("1mcE"),P=n("3Pt+"),O=n("1kSV"),j=n("MFUF"),B=n("X/78"),C=n("e+Av"),w=n("LRne"),G=n("Kj3r"),D=n("Anbb"),F=n("84Zn"),k=n("YIpg"),A=n("Q5/L"),$=n("Vurf"),L=n("Ssd4"),N=n("hqmO"),q=n("Frqi"),V=n("Exvd");function M(e,t){1&e&&r["\u0275\u0275element"](0,"div")}function R(e,t){if(1&e&&(r["\u0275\u0275text"](0,"\n  "),r["\u0275\u0275elementStart"](1,"h4"),r["\u0275\u0275text"](2),r["\u0275\u0275pipe"](3,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](4,"\n")),2&e){const e=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind1"](3,1,e.messagePrefix+".create"))}}function z(e,t){if(1&e&&(r["\u0275\u0275text"](0,"\n  "),r["\u0275\u0275elementStart"](1,"h4"),r["\u0275\u0275text"](2),r["\u0275\u0275pipe"](3,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](4,"\n")),2&e){const e=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind1"](3,1,e.messagePrefix+".edit"))}}const T=function(e){return{"d-none":e}};function _(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"button",17),r["\u0275\u0275listener"]("click",(function(){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275nextContext"]().impersonate()})),r["\u0275\u0275pipe"](1,"async"),r["\u0275\u0275text"](2,"\n      "),r["\u0275\u0275element"](3,"i",18),r["\u0275\u0275text"](4),r["\u0275\u0275pipe"](5,"translate"),r["\u0275\u0275elementEnd"]()}if(2&e){const e=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("ngClass",r["\u0275\u0275pureFunction1"](6,T,!r["\u0275\u0275pipeBind1"](1,2,e.canImpersonate$))),r["\u0275\u0275advance"](4),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](5,4,"admin.access-control.epeople.actions.impersonate"),"\n    ")}}function Q(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"button",19),r["\u0275\u0275listener"]("click",(function(){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275nextContext"]().stopImpersonating()})),r["\u0275\u0275text"](1,"\n      "),r["\u0275\u0275element"](2,"i",18),r["\u0275\u0275text"](3),r["\u0275\u0275pipe"](4,"translate"),r["\u0275\u0275elementEnd"]()}2&e&&(r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](4,1,"admin.access-control.epeople.actions.stop-impersonating"),"\n    "))}function W(e,t){1&e&&r["\u0275\u0275element"](0,"ds-loading",20),2&e&&r["\u0275\u0275property"]("showMessage",!1)}function H(e,t){1&e&&r["\u0275\u0275element"](0,"ds-loading",20),2&e&&r["\u0275\u0275property"]("showMessage",!1)}const U=function(e){return[e]};function J(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"tr"),r["\u0275\u0275text"](1,"\n          "),r["\u0275\u0275elementStart"](2,"td",28),r["\u0275\u0275text"](3),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](4,"\n          "),r["\u0275\u0275elementStart"](5,"td",28),r["\u0275\u0275elementStart"](6,"a",29),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](e);const n=t.$implicit;return r["\u0275\u0275nextContext"](3).groupsDataService.startEditingNewGroup(n)})),r["\u0275\u0275text"](7),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](8,"\n          "),r["\u0275\u0275elementStart"](9,"td",28),r["\u0275\u0275text"](10),r["\u0275\u0275pipe"](11,"async"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](12,"\n        "),r["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=r["\u0275\u0275nextContext"](3);let i=null;r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate"](e.id),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("routerLink",r["\u0275\u0275pureFunction1"](6,U,n.groupsDataService.getGroupEditPageRouterLink(e))),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate"](e.name),r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate"](null==(i=r["\u0275\u0275pipeBind1"](11,4,e.object))||null==i.payload?null:i.payload.name)}}function K(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"ds-pagination",23),r["\u0275\u0275listener"]("pageChange",(function(t){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275nextContext"](2).onPageChange(t)})),r["\u0275\u0275pipe"](1,"async"),r["\u0275\u0275pipe"](2,"async"),r["\u0275\u0275text"](3,"\n\n    "),r["\u0275\u0275elementStart"](4,"div",24),r["\u0275\u0275text"](5,"\n      "),r["\u0275\u0275elementStart"](6,"table",25),r["\u0275\u0275text"](7,"\n        "),r["\u0275\u0275elementStart"](8,"thead"),r["\u0275\u0275text"](9,"\n        "),r["\u0275\u0275elementStart"](10,"tr"),r["\u0275\u0275text"](11,"\n          "),r["\u0275\u0275elementStart"](12,"th",26),r["\u0275\u0275text"](13),r["\u0275\u0275pipe"](14,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](15,"\n          "),r["\u0275\u0275elementStart"](16,"th",26),r["\u0275\u0275text"](17),r["\u0275\u0275pipe"](18,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](19,"\n          "),r["\u0275\u0275elementStart"](20,"th",26),r["\u0275\u0275text"](21),r["\u0275\u0275pipe"](22,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](23,"\n        "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](24,"\n        "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](25,"\n        "),r["\u0275\u0275elementStart"](26,"tbody"),r["\u0275\u0275text"](27,"\n        "),r["\u0275\u0275template"](28,J,13,8,"tr",27),r["\u0275\u0275pipe"](29,"async"),r["\u0275\u0275text"](30,"\n        "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](31,"\n      "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](32,"\n    "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](33,"\n\n  "),r["\u0275\u0275elementEnd"]()}if(2&e){const e=r["\u0275\u0275nextContext"](2);let t=null,n=null,i=null;r["\u0275\u0275property"]("paginationOptions",e.config)("pageInfoState",null==(t=r["\u0275\u0275pipeBind1"](1,9,e.groups))?null:t.payload)("collectionSize",null==(n=r["\u0275\u0275pipeBind1"](2,11,e.groups))||null==n.payload?null:n.payload.totalElements)("hideGear",!0)("hidePagerWhenSinglePage",!0),r["\u0275\u0275advance"](13),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind1"](14,13,e.messagePrefix+".table.id")),r["\u0275\u0275advance"](4),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind1"](18,15,e.messagePrefix+".table.name")),r["\u0275\u0275advance"](4),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind1"](22,17,e.messagePrefix+".table.collectionOrCommunity")),r["\u0275\u0275advance"](7),r["\u0275\u0275property"]("ngForOf",null==(i=r["\u0275\u0275pipeBind1"](29,19,e.groups))||null==i.payload?null:i.payload.page)}}function Z(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"div",30),r["\u0275\u0275text"](1,"\n    "),r["\u0275\u0275elementStart"](2,"div"),r["\u0275\u0275text"](3),r["\u0275\u0275pipe"](4,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](5,"\n    "),r["\u0275\u0275elementStart"](6,"div"),r["\u0275\u0275text"](7,"\n      "),r["\u0275\u0275elementStart"](8,"button",31),r["\u0275\u0275text"](9),r["\u0275\u0275pipe"](10,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](11,"\n    "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](12,"\n  "),r["\u0275\u0275elementEnd"]()),2&e){const e=r["\u0275\u0275nextContext"](2);r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind1"](4,3,e.messagePrefix+".memberOfNoGroups")),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("routerLink",r["\u0275\u0275pureFunction1"](7,U,e.groupsDataService.getGroupRegistryRouterLink())),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind1"](10,5,e.messagePrefix+".goToGroups"))}}function X(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"div"),r["\u0275\u0275text"](1,"\n  "),r["\u0275\u0275elementStart"](2,"h5"),r["\u0275\u0275text"](3),r["\u0275\u0275pipe"](4,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](5,"\n\n  "),r["\u0275\u0275template"](6,H,1,1,"ds-loading",15),r["\u0275\u0275pipe"](7,"async"),r["\u0275\u0275text"](8,"\n\n  "),r["\u0275\u0275template"](9,K,34,21,"ds-pagination",21),r["\u0275\u0275pipe"](10,"async"),r["\u0275\u0275text"](11,"\n\n  "),r["\u0275\u0275template"](12,Z,13,9,"div",22),r["\u0275\u0275pipe"](13,"async"),r["\u0275\u0275text"](14,"\n"),r["\u0275\u0275elementEnd"]()),2&e){const e=r["\u0275\u0275nextContext"]();let t=null,n=null;r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind1"](4,4,e.messagePrefix+".groupsEPersonIsMemberOf")),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngIf",!r["\u0275\u0275pipeBind1"](7,6,e.groups)),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngIf",(null==(t=r["\u0275\u0275pipeBind1"](10,8,e.groups))||null==t.payload?null:t.payload.totalElements)>0),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngIf",0==(null==(n=r["\u0275\u0275pipeBind1"](13,10,e.groups))||null==n.payload?null:n.payload.totalElements))}}let Y=(()=>{class e{constructor(e,t,n,i,a,s,o,l,c,p,u,d){this.changeDetectorRef=e,this.epersonService=t,this.groupsDataService=n,this.formBuilderService=i,this.translateService=a,this.notificationsService=s,this.authService=o,this.authorizationService=l,this.modalService=c,this.paginationService=p,this.requestService=u,this.epersonRegistrationService=d,this.labelPrefix="admin.access-control.epeople.form.",this.formId="eperson-form",this.messagePrefix="admin.access-control.epeople.form",this.formLayout={firstName:{grid:{host:"row"}},lastName:{grid:{host:"row"}},email:{grid:{host:"row"}},canLogIn:{grid:{host:"col col-sm-6 d-inline-block"}},requireCertificate:{grid:{host:"col col-sm-6 d-inline-block"}}},this.submitForm=new r.EventEmitter,this.cancelForm=new r.EventEmitter,this.subs=[],this.config=Object.assign(new g.a,{id:"gem",pageSize:5,currentPage:1}),this.isImpersonated=!1,this.subs.push(this.epersonService.getActiveEPerson().subscribe(e=>{this.epersonInitial=e,Object(m.b)(e)&&(this.isImpersonated=this.authService.isImpersonatingUser(e.id))}))}ngOnInit(){this.initialisePage()}initialisePage(){Object(l.a)(this.translateService.get(`${this.messagePrefix}.firstName`),this.translateService.get(`${this.messagePrefix}.lastName`),this.translateService.get(`${this.messagePrefix}.email`),this.translateService.get(`${this.messagePrefix}.canLogIn`),this.translateService.get(`${this.messagePrefix}.requireCertificate`),this.translateService.get(`${this.messagePrefix}.emailHint`)).subscribe(([e,t,n,i,r,a])=>{this.firstName=new C.J({id:"firstName",label:e,name:"firstName",validators:{required:null},required:!0}),this.lastName=new C.J({id:"lastName",label:t,name:"lastName",validators:{required:null},required:!0}),this.email=new C.J({id:"email",label:n,name:"email",validators:{required:null,pattern:"^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$"},required:!0,errorMessages:{emailTaken:"error.validation.emailTaken",pattern:"error.validation.NotValidEmail"},hint:a}),this.canLogIn=new C.r({id:"canLogIn",label:i,name:"canLogIn",value:null==this.epersonInitial||this.epersonInitial.canLogIn}),this.requireCertificate=new C.r({id:"requireCertificate",label:r,name:"requireCertificate",value:null!=this.epersonInitial&&this.epersonInitial.requireCertificate}),this.formModel=[this.firstName,this.lastName,this.email,this.canLogIn,this.requireCertificate],this.formGroup=this.formBuilderService.createFormGroup(this.formModel),this.subs.push(this.epersonService.getActiveEPerson().subscribe(e=>{null!=e&&(this.groups=this.groupsDataService.findAllByHref(e._links.groups.href,{currentPage:1,elementsPerPage:this.config.pageSize})),this.formGroup.patchValue({firstName:null!=e?e.firstMetadataValue("eperson.firstname"):"",lastName:null!=e?e.firstMetadataValue("eperson.lastname"):"",email:null!=e?e.email:"",canLogIn:null==e||e.canLogIn,requireCertificate:null!=e&&e.requireCertificate}),null===e&&this.formGroup.controls.email&&(this.formGroup.controls.email.setAsyncValidators(class{static createValidator(e){return t=>e.getEPersonByEmail(t.value).pipe(Object(b.i)(),Object(p.a)(e=>e.payload?{emailTaken:!0}:null))}}.createValidator(this.epersonService)),this.emailValueChangeSubscribe=this.email.valueChanges.pipe(Object(G.a)(300)).subscribe(()=>{this.changeDetectorRef.detectChanges()}))}));const s=this.epersonService.getActiveEPerson();this.groups=s.pipe(Object(c.a)(e=>Object(l.a)([Object(w.a)(e),this.paginationService.getFindListOptions(this.config.id,{currentPage:1,elementsPerPage:this.config.pageSize})])),Object(c.a)(([e,t])=>null!=e?this.groupsDataService.findAllByHref(e._links.groups.href,t,!0,!0,Object(F.a)("object")):Object(w.a)(void 0))),this.canImpersonate$=s.pipe(Object(c.a)(e=>Object(m.b)(e)?this.authorizationService.isAuthorized(f.a.LoginOnBehalfOf,e.self):Object(w.a)(!1))),this.canDelete$=s.pipe(Object(c.a)(e=>this.authorizationService.isAuthorized(f.a.CanDelete,Object(m.b)(e)?e.self:void 0))),this.canReset$=Object(w.a)(!0)})}onCancel(){this.epersonService.cancelEditEPerson(),this.cancelForm.emit()}onSubmit(){this.epersonService.getActiveEPerson().pipe(Object(u.a)(1)).subscribe(e=>{const t={metadata:{"eperson.firstname":[{value:this.firstName.value}],"eperson.lastname":[{value:this.lastName.value}]},email:this.email.value,canLogIn:this.canLogIn.value,requireCertificate:this.requireCertificate.value};null==e?this.createNewEPerson(t):this.editEPerson(e,t)})}createNewEPerson(e){const t=Object.assign(new D.a,e);this.epersonService.create(t).pipe(Object(b.g)()).subscribe(e=>{e.hasSucceeded?(this.notificationsService.success(this.translateService.get(this.labelPrefix+"notification.created.success",{name:t.name})),this.submitForm.emit(t)):(this.notificationsService.error(this.translateService.get(this.labelPrefix+"notification.created.failure",{name:t.name})),this.cancelForm.emit())}),this.showNotificationIfEmailInUse(t,"created")}editEPerson(e,t){const n=Object.assign(new D.a,{id:e.id,metadata:{"eperson.firstname":[{value:this.firstName.value?this.firstName.value:e.firstMetadataValue("eperson.firstname")}],"eperson.lastname":[{value:this.lastName.value?this.lastName.value:e.firstMetadataValue("eperson.lastname")}]},email:Object(m.b)(t.email)?t.email:e.email,canLogIn:Object(m.b)(t.canLogIn)?t.canLogIn:e.canLogIn,requireCertificate:Object(m.b)(t.requireCertificate)?t.requireCertificate:e.requireCertificate,_links:e._links});this.epersonService.updateEPerson(n).pipe(Object(b.g)()).subscribe(e=>{e.hasSucceeded?(this.notificationsService.success(this.translateService.get(this.labelPrefix+"notification.edited.success",{name:n.name})),this.submitForm.emit(n)):(this.notificationsService.error(this.translateService.get(this.labelPrefix+"notification.edited.failure",{name:n.name})),this.cancelForm.emit())}),null!=t.email&&t.email!==e.email&&this.showNotificationIfEmailInUse(n,"edited")}onPageChange(e){this.updateGroups({currentPage:e,elementsPerPage:this.config.pageSize})}impersonate(){this.authService.impersonate(this.epersonInitial.id),this.isImpersonated=!0}delete(){this.epersonService.getActiveEPerson().pipe(Object(u.a)(1)).subscribe(e=>{const t=this.modalService.open(x.a);t.componentInstance.dso=e,t.componentInstance.headerLabel="confirmation-modal.delete-eperson.header",t.componentInstance.infoLabel="confirmation-modal.delete-eperson.info",t.componentInstance.cancelLabel="confirmation-modal.delete-eperson.cancel",t.componentInstance.confirmLabel="confirmation-modal.delete-eperson.confirm",t.componentInstance.brandColor="danger",t.componentInstance.confirmIcon="fas fa-trash",t.componentInstance.response.pipe(Object(u.a)(1)).subscribe(t=>{t&&Object(m.b)(e.id)&&this.epersonService.deleteEPerson(e).pipe(Object(b.g)()).subscribe(t=>{t.hasSucceeded?(this.notificationsService.success(this.translateService.get(this.labelPrefix+"notification.deleted.success",{name:e.name})),this.submitForm.emit()):this.notificationsService.error("Error occured when trying to delete EPerson with id: "+e.id+" with code: "+t.statusCode+" and message: "+t.errorMessage),this.cancelForm.emit()})})})}stopImpersonating(){this.authService.stopImpersonatingAndRefresh(),this.isImpersonated=!1}resetPassword(){Object(m.b)(this.epersonInitial.email)&&this.epersonRegistrationService.registerEmail(this.epersonInitial.email).pipe(Object(b.g)()).subscribe(e=>{e.hasSucceeded?this.notificationsService.success(this.translateService.get("admin.access-control.epeople.actions.reset"),this.translateService.get("forgot-email.form.success.content",{email:this.epersonInitial.email})):this.notificationsService.error(this.translateService.get("forgot-email.form.error.head"),this.translateService.get("forgot-email.form.error.content",{email:this.epersonInitial.email}))})}ngOnDestroy(){this.onCancel(),this.subs.filter(e=>Object(m.b)(e)).forEach(e=>e.unsubscribe()),this.paginationService.clearPagination(this.config.id),Object(m.b)(this.emailValueChangeSubscribe)&&this.emailValueChangeSubscribe.unsubscribe()}reset(){this.epersonService.getActiveEPerson().pipe(Object(u.a)(1)).subscribe(e=>{this.requestService.removeByHrefSubstring(e.self)}),this.initialisePage()}showNotificationIfEmailInUse(e,t){this.subs.push(this.epersonService.searchByScope("email",e.email,{currentPage:1,elementsPerPage:0}).pipe(Object(b.i)(),Object(b.o)()).subscribe(n=>{n.totalElements>0&&this.notificationsService.error(this.translateService.get(this.labelPrefix+"notification."+t+".failure.emailInUse",{name:e.name,email:e.email}))}))}updateGroups(e){this.subs.push(this.epersonService.getActiveEPerson().subscribe(t=>{this.groups=this.groupsDataService.findAllByHref(t._links.groups.href,e)}))}}return e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](r.ChangeDetectorRef),r["\u0275\u0275directiveInject"](S.a),r["\u0275\u0275directiveInject"](k.a),r["\u0275\u0275directiveInject"](A.a),r["\u0275\u0275directiveInject"](y.e),r["\u0275\u0275directiveInject"](E.a),r["\u0275\u0275directiveInject"]($.a),r["\u0275\u0275directiveInject"](I.a),r["\u0275\u0275directiveInject"](O.q),r["\u0275\u0275directiveInject"](j.a),r["\u0275\u0275directiveInject"](B.a),r["\u0275\u0275directiveInject"](L.a))},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-eperson-form"]],outputs:{submitForm:"submitForm",cancelForm:"cancelForm"},decls:49,vars:31,consts:[[4,"ngIf","ngIfThen","ngIfElse"],["createHeader",""],["editheader",""],[3,"formId","formModel","formGroup","formLayout","displayCancel","submitForm"],["before","",1,"btn-group"],[1,"btn","btn-outline-secondary",3,"click"],[1,"fas","fa-arrow-left"],["between","",1,"btn-group"],[1,"btn","btn-primary",3,"disabled","click"],[1,"fa","fa-key"],["between","",1,"btn-group","ml-1"],["class","btn btn-primary",3,"ngClass","click",4,"ngIf"],["class","btn btn-primary",3,"click",4,"ngIf"],["after","",1,"btn","btn-danger","delete-button",3,"disabled","click"],[1,"fas","fa-trash"],[3,"showMessage",4,"ngIf"],[4,"ngIf"],[1,"btn","btn-primary",3,"ngClass","click"],[1,"fa","fa-user-secret"],[1,"btn","btn-primary",3,"click"],[3,"showMessage"],[3,"paginationOptions","pageInfoState","collectionSize","hideGear","hidePagerWhenSinglePage","pageChange",4,"ngIf"],["class","alert alert-info w-100 mb-2","role","alert",4,"ngIf"],[3,"paginationOptions","pageInfoState","collectionSize","hideGear","hidePagerWhenSinglePage","pageChange"],[1,"table-responsive"],["id","groups",1,"table","table-striped","table-hover","table-bordered"],["scope","col",1,"align-middle"],[4,"ngFor","ngForOf"],[1,"align-middle"],[3,"routerLink","click"],["role","alert",1,"alert","alert-info","w-100","mb-2"],[1,"btn","btn-primary",3,"routerLink"]],template:function(e,t){if(1&e&&(r["\u0275\u0275template"](0,M,1,0,"div",0),r["\u0275\u0275pipe"](1,"async"),r["\u0275\u0275text"](2,"\n\n"),r["\u0275\u0275template"](3,R,5,3,"ng-template",null,1,r["\u0275\u0275templateRefExtractor"]),r["\u0275\u0275text"](5,"\n\n"),r["\u0275\u0275template"](6,z,5,3,"ng-template",null,2,r["\u0275\u0275templateRefExtractor"]),r["\u0275\u0275text"](8,"\n\n"),r["\u0275\u0275elementStart"](9,"ds-form",3),r["\u0275\u0275listener"]("submitForm",(function(){return t.onSubmit()})),r["\u0275\u0275text"](10,"\n  "),r["\u0275\u0275elementStart"](11,"div",4),r["\u0275\u0275text"](12,"\n    "),r["\u0275\u0275elementStart"](13,"button",5),r["\u0275\u0275listener"]("click",(function(){return t.onCancel()})),r["\u0275\u0275element"](14,"i",6),r["\u0275\u0275text"](15),r["\u0275\u0275pipe"](16,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](17,"\n  "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](18,"\n  "),r["\u0275\u0275elementStart"](19,"div",7),r["\u0275\u0275text"](20,"\n    "),r["\u0275\u0275elementStart"](21,"button",8),r["\u0275\u0275listener"]("click",(function(){return t.resetPassword()})),r["\u0275\u0275pipe"](22,"async"),r["\u0275\u0275text"](23,"\n      "),r["\u0275\u0275element"](24,"i",9),r["\u0275\u0275text"](25),r["\u0275\u0275pipe"](26,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](27,"\n  "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](28,"\n  "),r["\u0275\u0275elementStart"](29,"div",10),r["\u0275\u0275text"](30,"\n    "),r["\u0275\u0275template"](31,_,6,8,"button",11),r["\u0275\u0275text"](32,"\n    "),r["\u0275\u0275template"](33,Q,5,3,"button",12),r["\u0275\u0275text"](34,"\n  "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](35,"\n  "),r["\u0275\u0275elementStart"](36,"button",13),r["\u0275\u0275listener"]("click",(function(){return t.delete()})),r["\u0275\u0275pipe"](37,"async"),r["\u0275\u0275text"](38,"\n    "),r["\u0275\u0275element"](39,"i",14),r["\u0275\u0275text"](40),r["\u0275\u0275pipe"](41,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](42,"\n"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](43,"\n\n"),r["\u0275\u0275template"](44,W,1,1,"ds-loading",15),r["\u0275\u0275text"](45,"\n\n"),r["\u0275\u0275template"](46,X,15,12,"div",16),r["\u0275\u0275pipe"](47,"async"),r["\u0275\u0275text"](48,"\n")),2&e){const e=r["\u0275\u0275reference"](4),n=r["\u0275\u0275reference"](7);r["\u0275\u0275property"]("ngIf",r["\u0275\u0275pipeBind1"](1,17,t.epersonService.getActiveEPerson()))("ngIfThen",n)("ngIfElse",e),r["\u0275\u0275advance"](9),r["\u0275\u0275property"]("formId",t.formId)("formModel",t.formModel)("formGroup",t.formGroup)("formLayout",t.formLayout)("displayCancel",!1),r["\u0275\u0275advance"](6),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](16,19,t.messagePrefix+".return"),""),r["\u0275\u0275advance"](6),r["\u0275\u0275property"]("disabled",!r["\u0275\u0275pipeBind1"](22,21,t.canReset$)),r["\u0275\u0275advance"](4),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](26,23,"admin.access-control.epeople.actions.reset"),"\n    "),r["\u0275\u0275advance"](6),r["\u0275\u0275property"]("ngIf",!t.isImpersonated),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",t.isImpersonated),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("disabled",!r["\u0275\u0275pipeBind1"](37,25,t.canDelete$)),r["\u0275\u0275advance"](4),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](41,27,"admin.access-control.epeople.actions.delete"),"\n  "),r["\u0275\u0275advance"](4),r["\u0275\u0275property"]("ngIf",!t.formGroup),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",r["\u0275\u0275pipeBind1"](47,29,t.epersonService.getActiveEPerson()))}},directives:[i.p,N.a,P.NgControlStatusGroup,P.FormGroupDirective,i.m,q.a,V.a,i.o,a.k,a.i],pipes:[i.b,y.d],encapsulation:2}),e})();function ee(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div"),r["\u0275\u0275text"](1,"\n          "),r["\u0275\u0275elementStart"](2,"button",7),r["\u0275\u0275listener"]("click",(function(){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275nextContext"]().isEPersonFormShown=!0})),r["\u0275\u0275text"](3,"\n            "),r["\u0275\u0275element"](4,"i",8),r["\u0275\u0275text"](5,"\n            "),r["\u0275\u0275elementStart"](6,"span",9),r["\u0275\u0275text"](7),r["\u0275\u0275pipe"](8,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](9,"\n          "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](10,"\n        "),r["\u0275\u0275elementEnd"]()}if(2&e){const e=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](7),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind1"](8,1,e.labelPrefix+"button.add"))}}function te(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"ds-eperson-form",10),r["\u0275\u0275listener"]("submitForm",(function(){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275nextContext"]().reset()}))("cancelForm",(function(){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275nextContext"]().isEPersonFormShown=!1})),r["\u0275\u0275elementEnd"]()}}function ne(e,t){1&e&&r["\u0275\u0275element"](0,"ds-loading")}const ie=function(e){return{"table-primary":e}},re=function(e){return{name:e}};function ae(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"tr",30),r["\u0275\u0275pipe"](1,"async"),r["\u0275\u0275text"](2,"\n                "),r["\u0275\u0275elementStart"](3,"td"),r["\u0275\u0275text"](4),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](5,"\n                "),r["\u0275\u0275elementStart"](6,"td"),r["\u0275\u0275text"](7),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](8,"\n                "),r["\u0275\u0275elementStart"](9,"td"),r["\u0275\u0275text"](10),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](11,"\n                "),r["\u0275\u0275elementStart"](12,"td"),r["\u0275\u0275text"](13,"\n                  "),r["\u0275\u0275elementStart"](14,"div",31),r["\u0275\u0275text"](15,"\n                    "),r["\u0275\u0275elementStart"](16,"button",32),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](e);const n=t.$implicit;return r["\u0275\u0275nextContext"](3).toggleEditEPerson(n.eperson)})),r["\u0275\u0275pipe"](17,"translate"),r["\u0275\u0275text"](18,"\n                      "),r["\u0275\u0275element"](19,"i",33),r["\u0275\u0275text"](20,"\n                    "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](21,"\n                    "),r["\u0275\u0275elementStart"](22,"button",34),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](e);const n=t.$implicit;return r["\u0275\u0275nextContext"](3).deleteEPerson(n.eperson)})),r["\u0275\u0275pipe"](23,"translate"),r["\u0275\u0275text"](24,"\n                      "),r["\u0275\u0275element"](25,"i",35),r["\u0275\u0275text"](26,"\n                    "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](27,"\n                  "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](28,"\n                "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](29,"\n              "),r["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=r["\u0275\u0275nextContext"](3);r["\u0275\u0275property"]("ngClass",r["\u0275\u0275pureFunction1"](15,ie,r["\u0275\u0275pipeBind1"](1,7,n.isActive(e.eperson)))),r["\u0275\u0275advance"](4),r["\u0275\u0275textInterpolate"](e.eperson.id),r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate"](e.eperson.name),r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate"](e.eperson.email),r["\u0275\u0275advance"](6),r["\u0275\u0275propertyInterpolate"]("title",r["\u0275\u0275pipeBind2"](17,9,n.labelPrefix+"table.edit.buttons.edit",r["\u0275\u0275pureFunction1"](17,re,e.eperson.name))),r["\u0275\u0275advance"](6),r["\u0275\u0275propertyInterpolate"]("title",r["\u0275\u0275pipeBind2"](23,12,n.labelPrefix+"table.edit.buttons.remove",r["\u0275\u0275pureFunction1"](19,re,e.eperson.name))),r["\u0275\u0275property"]("disabled",!e.ableToDelete)}}function se(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"ds-pagination",25),r["\u0275\u0275pipe"](1,"async"),r["\u0275\u0275text"](2,"\n\n          "),r["\u0275\u0275elementStart"](3,"div",26),r["\u0275\u0275text"](4,"\n            "),r["\u0275\u0275elementStart"](5,"table",27),r["\u0275\u0275text"](6,"\n              "),r["\u0275\u0275elementStart"](7,"thead"),r["\u0275\u0275text"](8,"\n              "),r["\u0275\u0275elementStart"](9,"tr"),r["\u0275\u0275text"](10,"\n                "),r["\u0275\u0275elementStart"](11,"th",28),r["\u0275\u0275text"](12),r["\u0275\u0275pipe"](13,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](14,"\n                "),r["\u0275\u0275elementStart"](15,"th",28),r["\u0275\u0275text"](16),r["\u0275\u0275pipe"](17,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](18,"\n                "),r["\u0275\u0275elementStart"](19,"th",28),r["\u0275\u0275text"](20),r["\u0275\u0275pipe"](21,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](22,"\n                "),r["\u0275\u0275elementStart"](23,"th"),r["\u0275\u0275text"](24),r["\u0275\u0275pipe"](25,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](26,"\n              "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](27,"\n              "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](28,"\n              "),r["\u0275\u0275elementStart"](29,"tbody"),r["\u0275\u0275text"](30,"\n              "),r["\u0275\u0275template"](31,ae,30,21,"tr",29),r["\u0275\u0275pipe"](32,"async"),r["\u0275\u0275text"](33,"\n              "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](34,"\n            "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](35,"\n          "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](36,"\n\n        "),r["\u0275\u0275elementEnd"]()),2&e){const e=r["\u0275\u0275nextContext"](2);let t=null,n=null;r["\u0275\u0275property"]("paginationOptions",e.config)("pageInfoState",e.pageInfoState$)("collectionSize",null==(t=r["\u0275\u0275pipeBind1"](1,10,e.pageInfoState$))?null:t.totalElements)("hideGear",!0)("hidePagerWhenSinglePage",!0),r["\u0275\u0275advance"](12),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind1"](13,12,e.labelPrefix+"table.id")),r["\u0275\u0275advance"](4),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind1"](17,14,e.labelPrefix+"table.name")),r["\u0275\u0275advance"](4),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind1"](21,16,e.labelPrefix+"table.email")),r["\u0275\u0275advance"](4),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind1"](25,18,e.labelPrefix+"table.edit")),r["\u0275\u0275advance"](7),r["\u0275\u0275property"]("ngForOf",null==(n=r["\u0275\u0275pipeBind1"](32,20,e.ePeopleDto$))?null:n.page)}}function oe(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"div",36),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"]()),2&e){const e=r["\u0275\u0275nextContext"](2);r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"]("\n          ",r["\u0275\u0275pipeBind1"](2,1,e.labelPrefix+"no-items"),"\n        ")}}function le(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div"),r["\u0275\u0275text"](1,"\n        "),r["\u0275\u0275elementStart"](2,"h3",11),r["\u0275\u0275text"](3),r["\u0275\u0275pipe"](4,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](5,"\n        "),r["\u0275\u0275elementStart"](6,"form",12),r["\u0275\u0275listener"]("ngSubmit",(function(){r["\u0275\u0275restoreView"](e);const t=r["\u0275\u0275nextContext"]();return t.search(t.searchForm.value)})),r["\u0275\u0275text"](7,"\n          "),r["\u0275\u0275elementStart"](8,"div"),r["\u0275\u0275text"](9,"\n            "),r["\u0275\u0275elementStart"](10,"select",13),r["\u0275\u0275text"](11,"\n              "),r["\u0275\u0275elementStart"](12,"option",14),r["\u0275\u0275text"](13),r["\u0275\u0275pipe"](14,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](15,"\n              "),r["\u0275\u0275elementStart"](16,"option",15),r["\u0275\u0275text"](17),r["\u0275\u0275pipe"](18,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](19,"\n            "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](20,"\n          "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](21,"\n          "),r["\u0275\u0275elementStart"](22,"div",16),r["\u0275\u0275text"](23,"\n            "),r["\u0275\u0275elementStart"](24,"div",17),r["\u0275\u0275text"](25,"\n              "),r["\u0275\u0275element"](26,"input",18),r["\u0275\u0275pipe"](27,"translate"),r["\u0275\u0275pipe"](28,"translate"),r["\u0275\u0275text"](29,"\n              "),r["\u0275\u0275elementStart"](30,"span",19),r["\u0275\u0275text"](31,"\n                "),r["\u0275\u0275elementStart"](32,"button",20),r["\u0275\u0275text"](33,"\n                  "),r["\u0275\u0275element"](34,"i",21),r["\u0275\u0275text"](35),r["\u0275\u0275pipe"](36,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](37,"\n              "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](38,"\n            "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](39,"\n          "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](40,"\n          "),r["\u0275\u0275elementStart"](41,"div"),r["\u0275\u0275text"](42,"\n            "),r["\u0275\u0275elementStart"](43,"button",22),r["\u0275\u0275listener"]("click",(function(){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275nextContext"]().clearFormAndResetResult()})),r["\u0275\u0275text"](44),r["\u0275\u0275pipe"](45,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](46,"\n          "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](47,"\n        "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](48,"\n\n        "),r["\u0275\u0275template"](49,ne,1,0,"ds-loading",5),r["\u0275\u0275pipe"](50,"async"),r["\u0275\u0275text"](51,"\n        "),r["\u0275\u0275template"](52,se,37,22,"ds-pagination",23),r["\u0275\u0275pipe"](53,"async"),r["\u0275\u0275pipe"](54,"async"),r["\u0275\u0275text"](55,"\n\n        "),r["\u0275\u0275template"](56,oe,3,3,"div",24),r["\u0275\u0275pipe"](57,"async"),r["\u0275\u0275text"](58,"\n      "),r["\u0275\u0275elementEnd"]()}if(2&e){const e=r["\u0275\u0275nextContext"]();let t=null,n=null;r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate1"]("",r["\u0275\u0275pipeBind1"](4,11,e.labelPrefix+"search.head"),"\n\n        "),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("formGroup",e.searchForm),r["\u0275\u0275advance"](7),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind1"](14,13,e.labelPrefix+"search.scope.metadata")),r["\u0275\u0275advance"](4),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind1"](18,15,e.labelPrefix+"search.scope.email")),r["\u0275\u0275advance"](9),r["\u0275\u0275property"]("placeholder",r["\u0275\u0275pipeBind1"](28,19,e.labelPrefix+"search.placeholder")),r["\u0275\u0275attribute"]("aria-label",r["\u0275\u0275pipeBind1"](27,17,e.labelPrefix+"search.placeholder")),r["\u0275\u0275advance"](9),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](36,21,e.labelPrefix+"search.button"),"\n                "),r["\u0275\u0275advance"](9),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind1"](45,23,e.labelPrefix+"button.see-all")),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngIf",r["\u0275\u0275pipeBind1"](50,25,e.searching$)),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngIf",(null==(t=r["\u0275\u0275pipeBind1"](53,27,e.pageInfoState$))?null:t.totalElements)>0&&!r["\u0275\u0275pipeBind1"](54,29,e.searching$)),r["\u0275\u0275advance"](4),r["\u0275\u0275property"]("ngIf",0==(null==(n=r["\u0275\u0275pipeBind1"](57,31,e.pageInfoState$))?null:n.totalElements))}}let ce=(()=>{class e{constructor(e,t,n,i,r,a,s,l,c){this.epersonService=e,this.translateService=t,this.notificationsService=n,this.authorizationService=i,this.formBuilder=r,this.router=a,this.modalService=s,this.paginationService=l,this.requestService=c,this.labelPrefix="admin.access-control.epeople.",this.ePeople$=new o.a(Object(d.b)(new v.a,[])),this.ePeopleDto$=new o.a({}),this.pageInfoState$=new o.a(void 0),this.searching$=new o.a(!1),this.config=Object.assign(new g.a,{id:"elp",pageSize:5,currentPage:1}),this.subs=[],this.currentSearchQuery="",this.currentSearchScope="metadata",this.searchForm=this.formBuilder.group({scope:"metadata",query:""})}ngOnInit(){this.initialisePage()}initialisePage(){this.searching$.next(!0),this.isEPersonFormShown=!1,this.search({scope:this.currentSearchScope,query:this.currentSearchQuery}),this.subs.push(this.epersonService.getActiveEPerson().subscribe(e=>{null!=e&&e.id&&(this.isEPersonFormShown=!0)})),this.subs.push(this.ePeople$.pipe(Object(c.a)(e=>e.pageInfo.totalElements>0?Object(l.a)(...e.page.map(e=>this.authorizationService.isAuthorized(f.a.CanDelete,Object(m.b)(e)?e.self:void 0).pipe(Object(p.a)(t=>{const n=new h;return n.ableToDelete=t,n.eperson=e,n})))).pipe(Object(p.a)(t=>Object(d.b)(e.pageInfo,t))):[e])).subscribe(e=>{this.searching$.next(!1),this.ePeopleDto$.next(e),this.pageInfoState$.next(e.pageInfo)}))}search(e){this.searching$.next(!0),Object(m.b)(this.findListOptionsSub)&&this.findListOptionsSub.unsubscribe(),this.findListOptionsSub=this.paginationService.getCurrentPagination(this.config.id,this.config).pipe(Object(c.a)(t=>{const n=e.query,i=e.scope;return null!=n&&this.currentSearchQuery!==n&&(this.router.navigate([this.epersonService.getEPeoplePageRouterLink()],{queryParamsHandling:"merge"}),this.currentSearchQuery=n,this.paginationService.resetPage(this.config.id)),null!=i&&this.currentSearchScope!==i&&(this.router.navigate([this.epersonService.getEPeoplePageRouterLink()],{queryParamsHandling:"merge"}),this.currentSearchScope=i,this.paginationService.resetPage(this.config.id)),this.epersonService.searchByScope(this.currentSearchScope,this.currentSearchQuery,{currentPage:t.currentPage,elementsPerPage:t.pageSize})}),Object(b.c)()).subscribe(e=>{this.ePeople$.next(e.payload),this.pageInfoState$.next(e.payload.pageInfo)})}isActive(e){return this.getActiveEPerson().pipe(Object(p.a)(t=>e===t))}getActiveEPerson(){return this.epersonService.getActiveEPerson()}toggleEditEPerson(e){this.getActiveEPerson().pipe(Object(u.a)(1)).subscribe(t=>{e===t?(this.epersonService.cancelEditEPerson(),this.isEPersonFormShown=!1):(this.epersonService.editEPerson(e),this.isEPersonFormShown=!0)}),this.scrollToTop()}deleteEPerson(e){if(Object(m.b)(e.id)){const t=this.modalService.open(x.a);t.componentInstance.dso=e,t.componentInstance.headerLabel="confirmation-modal.delete-eperson.header",t.componentInstance.infoLabel="confirmation-modal.delete-eperson.info",t.componentInstance.cancelLabel="confirmation-modal.delete-eperson.cancel",t.componentInstance.confirmLabel="confirmation-modal.delete-eperson.confirm",t.componentInstance.brandColor="danger",t.componentInstance.confirmIcon="fas fa-trash",t.componentInstance.response.pipe(Object(u.a)(1)).subscribe(t=>{t&&Object(m.b)(e.id)&&this.epersonService.deleteEPerson(e).pipe(Object(b.g)()).subscribe(t=>{t.hasSucceeded?(this.notificationsService.success(this.translateService.get(this.labelPrefix+"notification.deleted.success",{name:e.name})),this.reset()):this.notificationsService.error("Error occured when trying to delete EPerson with id: "+e.id+" with code: "+t.statusCode+" and message: "+t.errorMessage)})})}}ngOnDestroy(){this.cleanupSubscribes(),this.paginationService.clearPagination(this.config.id)}cleanupSubscribes(){this.subs.filter(e=>Object(m.b)(e)).forEach(e=>e.unsubscribe())}scrollToTop(){!function e(){const t=document.documentElement.scrollTop||document.body.scrollTop;t>0&&(window.requestAnimationFrame(e),window.scrollTo(0,t-t/8))}()}clearFormAndResetResult(){this.searchForm.patchValue({query:""}),this.search({query:""})}reset(){this.epersonService.getBrowseEndpoint().pipe(Object(u.a)(1)).subscribe(e=>{this.requestService.setStaleByHrefSubstring(e).pipe(Object(u.a)(1)).subscribe(()=>{this.epersonService.cancelEditEPerson(),this.isEPersonFormShown=!1})})}}return e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](S.a),r["\u0275\u0275directiveInject"](y.e),r["\u0275\u0275directiveInject"](E.a),r["\u0275\u0275directiveInject"](I.a),r["\u0275\u0275directiveInject"](P.FormBuilder),r["\u0275\u0275directiveInject"](a.h),r["\u0275\u0275directiveInject"](O.q),r["\u0275\u0275directiveInject"](j.a),r["\u0275\u0275directiveInject"](B.a))},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-epeople-registry"]],decls:22,vars:6,consts:[[1,"container"],[1,"epeople-registry","row"],[1,"col-12"],[1,"d-flex","justify-content-between","border-bottom","mb-3"],["id","header",1,"pb-2"],[4,"ngIf"],[3,"submitForm","cancelForm",4,"ngIf"],[1,"mr-auto","btn","btn-success","addEPerson-button",3,"click"],[1,"fas","fa-plus"],[1,"d-none","d-sm-inline"],[3,"submitForm","cancelForm"],["id","search",1,"border-bottom","pb-2"],[1,"d-flex","justify-content-between",3,"formGroup","ngSubmit"],["name","scope","id","scope","formControlName","scope","aria-label","Search scope",1,"form-control"],["value","metadata"],["value","email"],[1,"flex-grow-1","mr-3","ml-3"],[1,"form-group","input-group"],["type","text","name","query","id","query","formControlName","query",1,"form-control",3,"placeholder"],[1,"input-group-append"],["type","submit",1,"search-button","btn","btn-primary"],[1,"fas","fa-search"],[1,"search-button","btn","btn-secondary",3,"click"],[3,"paginationOptions","pageInfoState","collectionSize","hideGear","hidePagerWhenSinglePage",4,"ngIf"],["class","alert alert-info w-100 mb-2","role","alert",4,"ngIf"],[3,"paginationOptions","pageInfoState","collectionSize","hideGear","hidePagerWhenSinglePage"],[1,"table-responsive"],["id","epeople",1,"table","table-striped","table-hover","table-bordered"],["scope","col"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[1,"btn-group","edit-field"],[1,"btn","btn-outline-primary","btn-sm","access-control-editEPersonButton",3,"title","click"],[1,"fas","fa-edit","fa-fw"],[1,"btn","btn-outline-danger","btn-sm","access-control-deleteEPersonButton",3,"disabled","title","click"],[1,"fas","fa-trash-alt","fa-fw"],["role","alert",1,"alert","alert-info","w-100","mb-2"]],template:function(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"div",0),r["\u0275\u0275text"](1,"\n  "),r["\u0275\u0275elementStart"](2,"div",1),r["\u0275\u0275text"](3,"\n    "),r["\u0275\u0275elementStart"](4,"div",2),r["\u0275\u0275text"](5,"\n      "),r["\u0275\u0275elementStart"](6,"div",3),r["\u0275\u0275text"](7,"\n        "),r["\u0275\u0275elementStart"](8,"h2",4),r["\u0275\u0275text"](9),r["\u0275\u0275pipe"](10,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](11,"\n\n        "),r["\u0275\u0275template"](12,ee,11,3,"div",5),r["\u0275\u0275text"](13,"\n      "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](14,"\n\n      "),r["\u0275\u0275template"](15,te,1,0,"ds-eperson-form",6),r["\u0275\u0275text"](16,"\n\n      "),r["\u0275\u0275template"](17,le,59,33,"div",5),r["\u0275\u0275text"](18,"\n    "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](19,"\n  "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](20,"\n"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](21,"\n")),2&e&&(r["\u0275\u0275advance"](9),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind1"](10,4,t.labelPrefix+"head")),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngIf",!t.isEPersonFormShown),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngIf",t.isEPersonFormShown),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",!t.isEPersonFormShown))},directives:[i.p,Y,P["\u0275angular_packages_forms_forms_ba"],P.NgControlStatusGroup,P.FormGroupDirective,P.SelectControlValueAccessor,P.NgControlStatus,P.FormControlName,P.NgSelectOption,P["\u0275angular_packages_forms_forms_z"],P.DefaultValueAccessor,q.a,V.a,i.o,i.m],pipes:[y.d,i.b],encapsulation:2}),e})();var pe=n("pLZG"),ue=n("JIr8"),de=n("Obj/"),me=n("krCT"),ge=n("ArZ3"),he=n("ye/0"),fe=n("YLTE"),be=n("ac5F"),xe=n("/O7Z"),ve=n("VYMa"),Se=n("5+tZ");const ye=function(e){return{name:e}};function Ee(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"button",25),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](e);const t=r["\u0275\u0275nextContext"]().$implicit;return r["\u0275\u0275nextContext"](2).deleteMemberFromGroup(t)})),r["\u0275\u0275pipe"](1,"translate"),r["\u0275\u0275text"](2,"\n                "),r["\u0275\u0275element"](3,"i",26),r["\u0275\u0275text"](4,"\n              "),r["\u0275\u0275elementEnd"]()}if(2&e){const e=r["\u0275\u0275nextContext"]().$implicit,t=r["\u0275\u0275nextContext"](2);r["\u0275\u0275propertyInterpolate"]("title",r["\u0275\u0275pipeBind2"](1,1,t.messagePrefix+".table.edit.buttons.remove",r["\u0275\u0275pureFunction1"](4,ye,e.eperson.name)))}}function Ie(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"button",27),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](e);const t=r["\u0275\u0275nextContext"]().$implicit;return r["\u0275\u0275nextContext"](2).addMemberToGroup(t)})),r["\u0275\u0275pipe"](1,"translate"),r["\u0275\u0275text"](2,"\n                "),r["\u0275\u0275element"](3,"i",28),r["\u0275\u0275text"](4,"\n              "),r["\u0275\u0275elementEnd"]()}if(2&e){const e=r["\u0275\u0275nextContext"]().$implicit,t=r["\u0275\u0275nextContext"](2);r["\u0275\u0275propertyInterpolate"]("title",r["\u0275\u0275pipeBind2"](1,1,t.messagePrefix+".table.edit.buttons.add",r["\u0275\u0275pureFunction1"](4,ye,e.eperson.name)))}}const Pe=function(e){return[e]};function Oe(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"tr"),r["\u0275\u0275text"](1,"\n          "),r["\u0275\u0275elementStart"](2,"td",19),r["\u0275\u0275text"](3),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](4,"\n          "),r["\u0275\u0275elementStart"](5,"td",19),r["\u0275\u0275elementStart"](6,"a",21),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](e);const n=t.$implicit;return r["\u0275\u0275nextContext"](2).ePersonDataService.startEditingNewEPerson(n.eperson)})),r["\u0275\u0275text"](7),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](8,"\n          "),r["\u0275\u0275elementStart"](9,"td",19),r["\u0275\u0275text"](10),r["\u0275\u0275pipe"](11,"translate"),r["\u0275\u0275element"](12,"br"),r["\u0275\u0275text"](13),r["\u0275\u0275pipe"](14,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](15,"\n          "),r["\u0275\u0275elementStart"](16,"td",19),r["\u0275\u0275text"](17,"\n            "),r["\u0275\u0275elementStart"](18,"div",22),r["\u0275\u0275text"](19,"\n              "),r["\u0275\u0275template"](20,Ee,5,6,"button",23),r["\u0275\u0275text"](21,"\n\n              "),r["\u0275\u0275template"](22,Ie,5,6,"button",24),r["\u0275\u0275text"](23,"\n            "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](24,"\n          "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](25,"\n        "),r["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=r["\u0275\u0275nextContext"](2);r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate"](e.eperson.id),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("routerLink",r["\u0275\u0275pureFunction1"](13,Pe,n.ePersonDataService.getEPeoplePageRouterLink())),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate"](e.eperson.name),r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate2"]("\n            ",r["\u0275\u0275pipeBind1"](11,9,n.messagePrefix+".table.email"),": ",e.eperson.email?e.eperson.email:"-",""),r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate2"]("\n            ",r["\u0275\u0275pipeBind1"](14,11,n.messagePrefix+".table.netid"),": ",e.eperson.netid?e.eperson.netid:"-","\n          "),r["\u0275\u0275advance"](7),r["\u0275\u0275property"]("ngIf",e.memberOfGroup),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",!e.memberOfGroup)}}function je(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"ds-pagination",15),r["\u0275\u0275pipe"](1,"async"),r["\u0275\u0275pipe"](2,"async"),r["\u0275\u0275text"](3,"\n\n    "),r["\u0275\u0275elementStart"](4,"div",16),r["\u0275\u0275text"](5,"\n      "),r["\u0275\u0275elementStart"](6,"table",17),r["\u0275\u0275text"](7,"\n        "),r["\u0275\u0275elementStart"](8,"thead"),r["\u0275\u0275text"](9,"\n        "),r["\u0275\u0275elementStart"](10,"tr"),r["\u0275\u0275text"](11,"\n          "),r["\u0275\u0275elementStart"](12,"th",18),r["\u0275\u0275text"](13),r["\u0275\u0275pipe"](14,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](15,"\n          "),r["\u0275\u0275elementStart"](16,"th",18),r["\u0275\u0275text"](17),r["\u0275\u0275pipe"](18,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](19,"\n          "),r["\u0275\u0275elementStart"](20,"th",18),r["\u0275\u0275text"](21),r["\u0275\u0275pipe"](22,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](23,"\n          "),r["\u0275\u0275elementStart"](24,"th",19),r["\u0275\u0275text"](25),r["\u0275\u0275pipe"](26,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](27,"\n        "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](28,"\n        "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](29,"\n        "),r["\u0275\u0275elementStart"](30,"tbody"),r["\u0275\u0275text"](31,"\n        "),r["\u0275\u0275template"](32,Oe,26,15,"tr",20),r["\u0275\u0275pipe"](33,"async"),r["\u0275\u0275text"](34,"\n        "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](35,"\n      "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](36,"\n    "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](37,"\n\n  "),r["\u0275\u0275elementEnd"]()),2&e){const e=r["\u0275\u0275nextContext"]();let t=null,n=null;r["\u0275\u0275property"]("paginationOptions",e.configSearch)("pageInfoState",r["\u0275\u0275pipeBind1"](1,10,e.ePeopleSearchDtos))("collectionSize",null==(t=r["\u0275\u0275pipeBind1"](2,12,e.ePeopleSearchDtos))?null:t.totalElements)("hideGear",!0)("hidePagerWhenSinglePage",!0),r["\u0275\u0275advance"](13),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind1"](14,14,e.messagePrefix+".table.id")),r["\u0275\u0275advance"](4),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind1"](18,16,e.messagePrefix+".table.name")),r["\u0275\u0275advance"](4),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind1"](22,18,e.messagePrefix+".table.identity")),r["\u0275\u0275advance"](4),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind1"](26,20,e.messagePrefix+".table.edit")),r["\u0275\u0275advance"](7),r["\u0275\u0275property"]("ngForOf",null==(n=r["\u0275\u0275pipeBind1"](33,22,e.ePeopleSearchDtos))?null:n.page)}}function Be(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"div",29),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"]()),2&e){const e=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"]("\n    ",r["\u0275\u0275pipeBind1"](2,1,e.messagePrefix+".no-items"),"\n  ")}}function Ce(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"tr"),r["\u0275\u0275text"](1,"\n          "),r["\u0275\u0275elementStart"](2,"td",19),r["\u0275\u0275text"](3),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](4,"\n          "),r["\u0275\u0275elementStart"](5,"td",19),r["\u0275\u0275elementStart"](6,"a",21),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](e);const n=t.$implicit;return r["\u0275\u0275nextContext"](2).ePersonDataService.startEditingNewEPerson(n.eperson)})),r["\u0275\u0275text"](7),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](8,"\n          "),r["\u0275\u0275elementStart"](9,"td",19),r["\u0275\u0275text"](10),r["\u0275\u0275pipe"](11,"translate"),r["\u0275\u0275element"](12,"br"),r["\u0275\u0275text"](13),r["\u0275\u0275pipe"](14,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](15,"\n          "),r["\u0275\u0275elementStart"](16,"td",19),r["\u0275\u0275text"](17,"\n            "),r["\u0275\u0275elementStart"](18,"div",22),r["\u0275\u0275text"](19,"\n              "),r["\u0275\u0275elementStart"](20,"button",25),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](e);const n=t.$implicit;return r["\u0275\u0275nextContext"](2).deleteMemberFromGroup(n)})),r["\u0275\u0275pipe"](21,"translate"),r["\u0275\u0275text"](22,"\n                "),r["\u0275\u0275element"](23,"i",26),r["\u0275\u0275text"](24,"\n              "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](25,"\n            "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](26,"\n          "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](27,"\n        "),r["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=r["\u0275\u0275nextContext"](2);r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate"](e.eperson.id),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("routerLink",r["\u0275\u0275pureFunction1"](15,Pe,n.ePersonDataService.getEPeoplePageRouterLink())),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate"](e.eperson.name),r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate2"]("\n            ",r["\u0275\u0275pipeBind1"](11,8,n.messagePrefix+".table.email"),": ",e.eperson.email?e.eperson.email:"-",""),r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate2"]("\n            ",r["\u0275\u0275pipeBind1"](14,10,n.messagePrefix+".table.netid"),": ",e.eperson.netid?e.eperson.netid:"-","\n          "),r["\u0275\u0275advance"](7),r["\u0275\u0275propertyInterpolate"]("title",r["\u0275\u0275pipeBind2"](21,12,n.messagePrefix+".table.edit.buttons.remove",r["\u0275\u0275pureFunction1"](17,ye,e.eperson.name)))}}function we(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"ds-pagination",15),r["\u0275\u0275pipe"](1,"async"),r["\u0275\u0275pipe"](2,"async"),r["\u0275\u0275text"](3,"\n\n    "),r["\u0275\u0275elementStart"](4,"div",16),r["\u0275\u0275text"](5,"\n      "),r["\u0275\u0275elementStart"](6,"table",30),r["\u0275\u0275text"](7,"\n        "),r["\u0275\u0275elementStart"](8,"thead"),r["\u0275\u0275text"](9,"\n        "),r["\u0275\u0275elementStart"](10,"tr"),r["\u0275\u0275text"](11,"\n          "),r["\u0275\u0275elementStart"](12,"th",18),r["\u0275\u0275text"](13),r["\u0275\u0275pipe"](14,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](15,"\n          "),r["\u0275\u0275elementStart"](16,"th",18),r["\u0275\u0275text"](17),r["\u0275\u0275pipe"](18,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](19,"\n          "),r["\u0275\u0275elementStart"](20,"th",18),r["\u0275\u0275text"](21),r["\u0275\u0275pipe"](22,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](23,"\n          "),r["\u0275\u0275elementStart"](24,"th",19),r["\u0275\u0275text"](25),r["\u0275\u0275pipe"](26,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](27,"\n        "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](28,"\n        "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](29,"\n        "),r["\u0275\u0275elementStart"](30,"tbody"),r["\u0275\u0275text"](31,"\n        "),r["\u0275\u0275template"](32,Ce,28,19,"tr",20),r["\u0275\u0275pipe"](33,"async"),r["\u0275\u0275text"](34,"\n        "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](35,"\n      "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](36,"\n    "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](37,"\n\n  "),r["\u0275\u0275elementEnd"]()),2&e){const e=r["\u0275\u0275nextContext"]();let t=null,n=null;r["\u0275\u0275property"]("paginationOptions",e.config)("pageInfoState",r["\u0275\u0275pipeBind1"](1,10,e.ePeopleMembersOfGroupDtos))("collectionSize",null==(t=r["\u0275\u0275pipeBind1"](2,12,e.ePeopleMembersOfGroupDtos))?null:t.totalElements)("hideGear",!0)("hidePagerWhenSinglePage",!0),r["\u0275\u0275advance"](13),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind1"](14,14,e.messagePrefix+".table.id")),r["\u0275\u0275advance"](4),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind1"](18,16,e.messagePrefix+".table.name")),r["\u0275\u0275advance"](4),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind1"](22,18,e.messagePrefix+".table.identity")),r["\u0275\u0275advance"](4),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind1"](26,20,e.messagePrefix+".table.edit")),r["\u0275\u0275advance"](7),r["\u0275\u0275property"]("ngForOf",null==(n=r["\u0275\u0275pipeBind1"](33,22,e.ePeopleMembersOfGroupDtos))?null:n.page)}}function Ge(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"div",29),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"]()),2&e){const e=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"]("\n    ",r["\u0275\u0275pipeBind1"](2,1,e.messagePrefix+".no-members-yet"),"\n  ")}}var De=function(e){return e[e.ActiveGroup=0]="ActiveGroup",e[e.MembersDTO=1]="MembersDTO",e[e.SearchResultsDTO=2]="SearchResultsDTO",e}({});let Fe=(()=>{class e{constructor(e,t,n,i,r,a,s){this.groupDataService=e,this.ePersonDataService=t,this.translateService=n,this.notificationsService=i,this.formBuilder=r,this.paginationService=a,this.router=s,this.ePeopleSearchDtos=new o.a(void 0),this.ePeopleMembersOfGroupDtos=new o.a(void 0),this.configSearch=Object.assign(new g.a,{id:"sml",pageSize:5,currentPage:1}),this.config=Object.assign(new g.a,{id:"ml",pageSize:5,currentPage:1}),this.subs=new Map,this.currentSearchQuery="",this.currentSearchScope="metadata"}ngOnInit(){this.searchForm=this.formBuilder.group({scope:"metadata",query:""}),this.subs.set(De.ActiveGroup,this.groupDataService.getActiveGroup().subscribe(e=>{null!=e&&(this.groupBeingEdited=e,this.retrieveMembers(this.config.currentPage))}))}retrieveMembers(e){this.unsubFrom(De.MembersDTO),this.subs.set(De.MembersDTO,this.paginationService.getCurrentPagination(this.config.id,this.config).pipe(Object(c.a)(e=>this.ePersonDataService.findAllByHref(this.groupBeingEdited._links.epersons.href,{currentPage:e.currentPage,elementsPerPage:e.pageSize})),Object(b.b)(),Object(p.a)(e=>{if(!e.hasFailed)return e;this.notificationsService.error(this.translateService.get(this.messagePrefix+".notification.failure",{cause:e.errorMessage}))}),Object(c.a)(e=>Object(l.a)(...e.payload.page.map(e=>Object(l.a)(this.isMemberOfGroup(e),t=>{const n=new h;return n.eperson=e,n.memberOfGroup=t,n}))).pipe(Object(p.a)(t=>Object(d.b)(e.payload.pageInfo,t))))).subscribe(e=>{this.ePeopleMembersOfGroupDtos.next(e)}))}isMemberOfGroup(e){return this.groupDataService.getActiveGroup().pipe(Object(u.a)(1),Object(Se.a)(t=>null!=t?this.ePersonDataService.findAllByHref(t._links.epersons.href,{currentPage:1,elementsPerPage:9999},!1).pipe(Object(b.i)(),Object(b.o)(),Object(p.a)(t=>t.page.filter(t=>t.id===e.id)),Object(p.a)(e=>e.length>0)):Object(w.a)(!1)))}unsubFrom(e){this.subs.has(e)&&(this.subs.get(e).unsubscribe(),this.subs.delete(e))}deleteMemberFromGroup(e){this.groupDataService.getActiveGroup().pipe(Object(u.a)(1)).subscribe(t=>{if(null!=t){const n=this.groupDataService.deleteMemberFromGroup(t,e.eperson);this.showNotifications("deleteMember",n,e.eperson.name,t),this.search({scope:this.currentSearchScope,query:this.currentSearchQuery})}else this.notificationsService.error(this.translateService.get(this.messagePrefix+".notification.failure.noActiveGroup"))})}addMemberToGroup(e){e.memberOfGroup=!0,this.groupDataService.getActiveGroup().pipe(Object(u.a)(1)).subscribe(t=>{if(null!=t){const n=this.groupDataService.addMemberToGroup(t,e.eperson);this.showNotifications("addMember",n,e.eperson.name,t)}else this.notificationsService.error(this.translateService.get(this.messagePrefix+".notification.failure.noActiveGroup"))})}search(e){this.unsubFrom(De.SearchResultsDTO),this.subs.set(De.SearchResultsDTO,this.paginationService.getCurrentPagination(this.configSearch.id,this.configSearch).pipe(Object(c.a)(t=>{const n=e.query,i=e.scope;return null!=n&&this.currentSearchQuery!==n&&this.groupBeingEdited&&(this.router.navigate([],{queryParamsHandling:"merge"}),this.currentSearchQuery=n,this.paginationService.resetPage(this.configSearch.id)),null!=i&&this.currentSearchScope!==i&&this.groupBeingEdited&&(this.router.navigate([],{queryParamsHandling:"merge"}),this.currentSearchScope=i,this.paginationService.resetPage(this.configSearch.id)),this.searchDone=!0,this.ePersonDataService.searchByScope(this.currentSearchScope,this.currentSearchQuery,{currentPage:t.currentPage,elementsPerPage:t.pageSize})}),Object(b.b)(),Object(p.a)(e=>{if(!e.hasFailed)return e;this.notificationsService.error(this.translateService.get(this.messagePrefix+".notification.failure",{cause:e.errorMessage}))}),Object(c.a)(e=>Object(l.a)(...e.payload.page.map(e=>Object(l.a)(this.isMemberOfGroup(e),t=>{const n=new h;return n.eperson=e,n.memberOfGroup=t,n}))).pipe(Object(p.a)(t=>Object(d.b)(e.payload.pageInfo,t))))).subscribe(e=>{this.ePeopleSearchDtos.next(e)}))}ngOnDestroy(){for(const e of this.subs.keys())this.unsubFrom(e);this.paginationService.clearPagination(this.config.id),this.paginationService.clearPagination(this.configSearch.id)}showNotifications(e,t,n,i){t.pipe(Object(b.g)()).subscribe(t=>{t.hasSucceeded?(this.notificationsService.success(this.translateService.get(this.messagePrefix+".notification.success."+e,{name:n})),this.ePersonDataService.clearLinkRequests(i._links.epersons.href)):this.notificationsService.error(this.translateService.get(this.messagePrefix+".notification.failure."+e,{name:n}))})}clearFormAndResetResult(){this.searchForm.patchValue({query:""}),this.search({query:""})}}return e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](k.a),r["\u0275\u0275directiveInject"](S.a),r["\u0275\u0275directiveInject"](y.e),r["\u0275\u0275directiveInject"](E.a),r["\u0275\u0275directiveInject"](P.FormBuilder),r["\u0275\u0275directiveInject"](j.a),r["\u0275\u0275directiveInject"](a.h))},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-members-list"]],inputs:{messagePrefix:"messagePrefix"},decls:69,vars:36,consts:[[1,"border-bottom","pb-2"],["id","search",1,"border-bottom","pb-2"],[1,"d-flex","justify-content-between",3,"formGroup","ngSubmit"],["name","scope","id","scope","formControlName","scope","aria-label","Search scope",1,"form-control"],["value","metadata"],["value","email"],[1,"flex-grow-1","mr-3","ml-3"],[1,"form-group","input-group"],["type","text","name","query","id","query","formControlName","query","aria-label","Search input",1,"form-control"],[1,"input-group-append"],["type","submit",1,"search-button","btn","btn-primary"],[1,"fas","fa-search"],[1,"btn","btn-secondary",3,"click"],[3,"paginationOptions","pageInfoState","collectionSize","hideGear","hidePagerWhenSinglePage",4,"ngIf"],["class","alert alert-info w-100 mb-2","role","alert",4,"ngIf"],[3,"paginationOptions","pageInfoState","collectionSize","hideGear","hidePagerWhenSinglePage"],[1,"table-responsive"],["id","epersonsSearch",1,"table","table-striped","table-hover","table-bordered"],["scope","col",1,"align-middle"],[1,"align-middle"],[4,"ngFor","ngForOf"],[3,"routerLink","click"],[1,"btn-group","edit-field"],["class","btn btn-outline-danger btn-sm",3,"title","click",4,"ngIf"],["class","btn btn-outline-primary btn-sm",3,"title","click",4,"ngIf"],[1,"btn","btn-outline-danger","btn-sm",3,"title","click"],[1,"fas","fa-trash-alt","fa-fw"],[1,"btn","btn-outline-primary","btn-sm",3,"title","click"],[1,"fas","fa-plus","fa-fw"],["role","alert",1,"alert","alert-info","w-100","mb-2"],["id","ePeopleMembersOfGroup",1,"table","table-striped","table-hover","table-bordered"]],template:function(e,t){if(1&e&&(r["\u0275\u0275elementContainerStart"](0),r["\u0275\u0275text"](1,"\n  "),r["\u0275\u0275elementStart"](2,"h3",0),r["\u0275\u0275text"](3),r["\u0275\u0275pipe"](4,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](5,"\n\n  "),r["\u0275\u0275elementStart"](6,"h4",1),r["\u0275\u0275text"](7),r["\u0275\u0275pipe"](8,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](9,"\n  "),r["\u0275\u0275elementStart"](10,"form",2),r["\u0275\u0275listener"]("ngSubmit",(function(){return t.search(t.searchForm.value)})),r["\u0275\u0275text"](11,"\n    "),r["\u0275\u0275elementStart"](12,"div"),r["\u0275\u0275text"](13,"\n      "),r["\u0275\u0275elementStart"](14,"select",3),r["\u0275\u0275text"](15,"\n        "),r["\u0275\u0275elementStart"](16,"option",4),r["\u0275\u0275text"](17),r["\u0275\u0275pipe"](18,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](19,"\n        "),r["\u0275\u0275elementStart"](20,"option",5),r["\u0275\u0275text"](21),r["\u0275\u0275pipe"](22,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](23,"\n      "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](24,"\n    "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](25,"\n    "),r["\u0275\u0275elementStart"](26,"div",6),r["\u0275\u0275text"](27,"\n      "),r["\u0275\u0275elementStart"](28,"div",7),r["\u0275\u0275text"](29,"\n        "),r["\u0275\u0275element"](30,"input",8),r["\u0275\u0275text"](31,"\n        "),r["\u0275\u0275elementStart"](32,"span",9),r["\u0275\u0275text"](33,"\n            "),r["\u0275\u0275elementStart"](34,"button",10),r["\u0275\u0275text"](35,"\n              "),r["\u0275\u0275element"](36,"i",11),r["\u0275\u0275text"](37),r["\u0275\u0275pipe"](38,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](39,"\n        "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](40,"\n      "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](41,"\n    "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](42,"\n    "),r["\u0275\u0275elementStart"](43,"div"),r["\u0275\u0275text"](44,"\n      "),r["\u0275\u0275elementStart"](45,"button",12),r["\u0275\u0275listener"]("click",(function(){return t.clearFormAndResetResult()})),r["\u0275\u0275text"](46),r["\u0275\u0275pipe"](47,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](48,"\n    "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](49,"\n  "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](50,"\n\n  "),r["\u0275\u0275template"](51,je,38,24,"ds-pagination",13),r["\u0275\u0275pipe"](52,"async"),r["\u0275\u0275text"](53,"\n\n  "),r["\u0275\u0275template"](54,Be,3,3,"div",14),r["\u0275\u0275pipe"](55,"async"),r["\u0275\u0275text"](56,"\n\n  "),r["\u0275\u0275elementStart"](57,"h4"),r["\u0275\u0275text"](58),r["\u0275\u0275pipe"](59,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](60,"\n\n  "),r["\u0275\u0275template"](61,we,38,24,"ds-pagination",13),r["\u0275\u0275pipe"](62,"async"),r["\u0275\u0275text"](63,"\n\n  "),r["\u0275\u0275template"](64,Ge,3,3,"div",14),r["\u0275\u0275pipe"](65,"async"),r["\u0275\u0275pipe"](66,"async"),r["\u0275\u0275text"](67,"\n\n"),r["\u0275\u0275elementContainerEnd"](),r["\u0275\u0275text"](68,"\n")),2&e){let e=null,n=null,i=null,a=null;r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind1"](4,12,t.messagePrefix+".head")),r["\u0275\u0275advance"](4),r["\u0275\u0275textInterpolate1"]("",r["\u0275\u0275pipeBind1"](8,14,t.messagePrefix+".search.head"),"\n\n  "),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("formGroup",t.searchForm),r["\u0275\u0275advance"](7),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind1"](18,16,t.messagePrefix+".search.scope.metadata")),r["\u0275\u0275advance"](4),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind1"](22,18,t.messagePrefix+".search.scope.email")),r["\u0275\u0275advance"](16),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](38,20,t.messagePrefix+".search.button"),""),r["\u0275\u0275advance"](9),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind1"](47,22,t.messagePrefix+".button.see-all")),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngIf",(null==(e=r["\u0275\u0275pipeBind1"](52,24,t.ePeopleSearchDtos))?null:e.totalElements)>0),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngIf",0==(null==(n=r["\u0275\u0275pipeBind1"](55,26,t.ePeopleSearchDtos))?null:n.totalElements)&&t.searchDone),r["\u0275\u0275advance"](4),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind1"](59,28,t.messagePrefix+".headMembers")),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngIf",(null==(i=r["\u0275\u0275pipeBind1"](62,30,t.ePeopleMembersOfGroupDtos))?null:i.totalElements)>0),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngIf",null==r["\u0275\u0275pipeBind1"](65,32,t.ePeopleMembersOfGroupDtos)||0==(null==(a=r["\u0275\u0275pipeBind1"](66,34,t.ePeopleMembersOfGroupDtos))?null:a.totalElements))}},directives:[P["\u0275angular_packages_forms_forms_ba"],P.NgControlStatusGroup,P.FormGroupDirective,P.SelectControlValueAccessor,P.NgControlStatus,P.FormControlName,P.NgSelectOption,P["\u0275angular_packages_forms_forms_z"],P.DefaultValueAccessor,i.p,V.a,i.o,a.k],pipes:[y.d,i.b],encapsulation:2}),e})();const ke=function(e){return{name:e}};function Ae(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"button",23),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](e);const t=r["\u0275\u0275nextContext"]().$implicit;return r["\u0275\u0275nextContext"](2).deleteSubgroupFromGroup(t)})),r["\u0275\u0275pipe"](1,"translate"),r["\u0275\u0275text"](2,"\n                "),r["\u0275\u0275element"](3,"i",24),r["\u0275\u0275text"](4,"\n              "),r["\u0275\u0275elementEnd"]()}if(2&e){const e=r["\u0275\u0275nextContext"]().$implicit,t=r["\u0275\u0275nextContext"](2);r["\u0275\u0275propertyInterpolate"]("title",r["\u0275\u0275pipeBind2"](1,1,t.messagePrefix+".table.edit.buttons.remove",r["\u0275\u0275pureFunction1"](4,ke,e.name)))}}function $e(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"p"),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"]()),2&e){const e=r["\u0275\u0275nextContext"](3);r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind1"](2,1,e.messagePrefix+".table.edit.currentGroup"))}}function Le(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"button",25),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](e);const t=r["\u0275\u0275nextContext"]().$implicit;return r["\u0275\u0275nextContext"](2).addSubgroupToGroup(t)})),r["\u0275\u0275pipe"](1,"translate"),r["\u0275\u0275text"](2,"\n                "),r["\u0275\u0275element"](3,"i",26),r["\u0275\u0275text"](4,"\n              "),r["\u0275\u0275elementEnd"]()}if(2&e){const e=r["\u0275\u0275nextContext"]().$implicit,t=r["\u0275\u0275nextContext"](2);r["\u0275\u0275propertyInterpolate"]("title",r["\u0275\u0275pipeBind2"](1,1,t.messagePrefix+".table.edit.buttons.add",r["\u0275\u0275pureFunction1"](4,ke,e.name)))}}const Ne=function(e){return[e]};function qe(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"tr"),r["\u0275\u0275text"](1,"\n          "),r["\u0275\u0275elementStart"](2,"td",16),r["\u0275\u0275text"](3),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](4,"\n          "),r["\u0275\u0275elementStart"](5,"td",16),r["\u0275\u0275elementStart"](6,"a",18),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](e);const n=t.$implicit;return r["\u0275\u0275nextContext"](2).groupDataService.startEditingNewGroup(n)})),r["\u0275\u0275text"](7),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](8,"\n          "),r["\u0275\u0275elementStart"](9,"td",16),r["\u0275\u0275text"](10),r["\u0275\u0275pipe"](11,"async"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](12,"\n          "),r["\u0275\u0275elementStart"](13,"td",16),r["\u0275\u0275text"](14,"\n            "),r["\u0275\u0275elementStart"](15,"div",19),r["\u0275\u0275text"](16,"\n              "),r["\u0275\u0275template"](17,Ae,5,6,"button",20),r["\u0275\u0275pipe"](18,"async"),r["\u0275\u0275pipe"](19,"async"),r["\u0275\u0275text"](20,"\n\n              "),r["\u0275\u0275template"](21,$e,3,3,"p",21),r["\u0275\u0275pipe"](22,"async"),r["\u0275\u0275text"](23,"\n\n              "),r["\u0275\u0275template"](24,Le,5,6,"button",22),r["\u0275\u0275pipe"](25,"async"),r["\u0275\u0275pipe"](26,"async"),r["\u0275\u0275text"](27,"\n            "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](28,"\n          "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](29,"\n        "),r["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=r["\u0275\u0275nextContext"](2);let i=null;r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate"](e.id),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("routerLink",r["\u0275\u0275pureFunction1"](19,Ne,n.groupDataService.getGroupEditPageRouterLink(e))),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate"](e.name),r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate"](null==(i=r["\u0275\u0275pipeBind1"](11,7,e.object))||null==i.payload?null:i.payload.name),r["\u0275\u0275advance"](7),r["\u0275\u0275property"]("ngIf",r["\u0275\u0275pipeBind1"](18,9,n.isSubgroupOfGroup(e))&&!r["\u0275\u0275pipeBind1"](19,11,n.isActiveGroup(e))),r["\u0275\u0275advance"](4),r["\u0275\u0275property"]("ngIf",r["\u0275\u0275pipeBind1"](22,13,n.isActiveGroup(e))),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngIf",!r["\u0275\u0275pipeBind1"](25,15,n.isSubgroupOfGroup(e))&&!r["\u0275\u0275pipeBind1"](26,17,n.isActiveGroup(e)))}}function Ve(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"ds-pagination",12),r["\u0275\u0275pipe"](1,"async"),r["\u0275\u0275pipe"](2,"async"),r["\u0275\u0275text"](3,"\n\n    "),r["\u0275\u0275elementStart"](4,"div",13),r["\u0275\u0275text"](5,"\n      "),r["\u0275\u0275elementStart"](6,"table",14),r["\u0275\u0275text"](7,"\n        "),r["\u0275\u0275elementStart"](8,"thead"),r["\u0275\u0275text"](9,"\n        "),r["\u0275\u0275elementStart"](10,"tr"),r["\u0275\u0275text"](11,"\n          "),r["\u0275\u0275elementStart"](12,"th",15),r["\u0275\u0275text"](13),r["\u0275\u0275pipe"](14,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](15,"\n          "),r["\u0275\u0275elementStart"](16,"th",15),r["\u0275\u0275text"](17),r["\u0275\u0275pipe"](18,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](19,"\n          "),r["\u0275\u0275elementStart"](20,"th",15),r["\u0275\u0275text"](21),r["\u0275\u0275pipe"](22,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](23,"\n          "),r["\u0275\u0275elementStart"](24,"th",16),r["\u0275\u0275text"](25),r["\u0275\u0275pipe"](26,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](27,"\n        "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](28,"\n        "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](29,"\n        "),r["\u0275\u0275elementStart"](30,"tbody"),r["\u0275\u0275text"](31,"\n        "),r["\u0275\u0275template"](32,qe,30,21,"tr",17),r["\u0275\u0275pipe"](33,"async"),r["\u0275\u0275text"](34,"\n        "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](35,"\n      "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](36,"\n    "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](37,"\n  "),r["\u0275\u0275elementEnd"]()),2&e){const e=r["\u0275\u0275nextContext"]();let t=null,n=null,i=null;r["\u0275\u0275property"]("paginationOptions",e.configSearch)("pageInfoState",null==(t=r["\u0275\u0275pipeBind1"](1,10,e.searchResults$))?null:t.payload)("collectionSize",null==(n=r["\u0275\u0275pipeBind1"](2,12,e.searchResults$))||null==n.payload?null:n.payload.totalElements)("hideGear",!0)("hidePagerWhenSinglePage",!0),r["\u0275\u0275advance"](13),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind1"](14,14,e.messagePrefix+".table.id")),r["\u0275\u0275advance"](4),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind1"](18,16,e.messagePrefix+".table.name")),r["\u0275\u0275advance"](4),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind1"](22,18,e.messagePrefix+".table.collectionOrCommunity")),r["\u0275\u0275advance"](4),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind1"](26,20,e.messagePrefix+".table.edit")),r["\u0275\u0275advance"](7),r["\u0275\u0275property"]("ngForOf",null==(i=r["\u0275\u0275pipeBind1"](33,22,e.searchResults$))||null==i.payload?null:i.payload.page)}}function Me(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"div",27),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"]()),2&e){const e=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"]("\n    ",r["\u0275\u0275pipeBind1"](2,1,e.messagePrefix+".no-items"),"\n  ")}}function Re(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"tr"),r["\u0275\u0275text"](1,"\n          "),r["\u0275\u0275elementStart"](2,"td",16),r["\u0275\u0275text"](3),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](4,"\n          "),r["\u0275\u0275elementStart"](5,"td",16),r["\u0275\u0275elementStart"](6,"a",18),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](e);const n=t.$implicit;return r["\u0275\u0275nextContext"](2).groupDataService.startEditingNewGroup(n)})),r["\u0275\u0275text"](7),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](8,"\n          "),r["\u0275\u0275elementStart"](9,"td",16),r["\u0275\u0275text"](10),r["\u0275\u0275pipe"](11,"async"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](12,"\n          "),r["\u0275\u0275elementStart"](13,"td",16),r["\u0275\u0275text"](14,"\n            "),r["\u0275\u0275elementStart"](15,"div",19),r["\u0275\u0275text"](16,"\n              "),r["\u0275\u0275elementStart"](17,"button",23),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](e);const n=t.$implicit;return r["\u0275\u0275nextContext"](2).deleteSubgroupFromGroup(n)})),r["\u0275\u0275pipe"](18,"translate"),r["\u0275\u0275text"](19,"\n                "),r["\u0275\u0275element"](20,"i",24),r["\u0275\u0275text"](21,"\n              "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](22,"\n            "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](23,"\n          "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](24,"\n        "),r["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=r["\u0275\u0275nextContext"](2);let i=null;r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate"](e.id),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("routerLink",r["\u0275\u0275pureFunction1"](10,Ne,n.groupDataService.getGroupEditPageRouterLink(e))),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate"](e.name),r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate"](null==(i=r["\u0275\u0275pipeBind1"](11,5,e.object))||null==i.payload?null:i.payload.name),r["\u0275\u0275advance"](7),r["\u0275\u0275propertyInterpolate"]("title",r["\u0275\u0275pipeBind2"](18,7,n.messagePrefix+".table.edit.buttons.remove",r["\u0275\u0275pureFunction1"](12,ke,e.name)))}}function ze(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"ds-pagination",12),r["\u0275\u0275pipe"](1,"async"),r["\u0275\u0275pipe"](2,"async"),r["\u0275\u0275text"](3,"\n\n    "),r["\u0275\u0275elementStart"](4,"div",13),r["\u0275\u0275text"](5,"\n      "),r["\u0275\u0275elementStart"](6,"table",28),r["\u0275\u0275text"](7,"\n        "),r["\u0275\u0275elementStart"](8,"thead"),r["\u0275\u0275text"](9,"\n        "),r["\u0275\u0275elementStart"](10,"tr"),r["\u0275\u0275text"](11,"\n          "),r["\u0275\u0275elementStart"](12,"th",15),r["\u0275\u0275text"](13),r["\u0275\u0275pipe"](14,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](15,"\n          "),r["\u0275\u0275elementStart"](16,"th",15),r["\u0275\u0275text"](17),r["\u0275\u0275pipe"](18,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](19,"\n          "),r["\u0275\u0275elementStart"](20,"th",15),r["\u0275\u0275text"](21),r["\u0275\u0275pipe"](22,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](23,"\n          "),r["\u0275\u0275elementStart"](24,"th"),r["\u0275\u0275text"](25),r["\u0275\u0275pipe"](26,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](27,"\n        "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](28,"\n        "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](29,"\n        "),r["\u0275\u0275elementStart"](30,"tbody"),r["\u0275\u0275text"](31,"\n        "),r["\u0275\u0275template"](32,Re,25,14,"tr",17),r["\u0275\u0275pipe"](33,"async"),r["\u0275\u0275text"](34,"\n        "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](35,"\n      "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](36,"\n    "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](37,"\n  "),r["\u0275\u0275elementEnd"]()),2&e){const e=r["\u0275\u0275nextContext"]();let t=null,n=null,i=null;r["\u0275\u0275property"]("paginationOptions",e.config)("pageInfoState",null==(t=r["\u0275\u0275pipeBind1"](1,10,e.subGroups$))?null:t.payload)("collectionSize",null==(n=r["\u0275\u0275pipeBind1"](2,12,e.subGroups$))||null==n.payload?null:n.payload.totalElements)("hideGear",!0)("hidePagerWhenSinglePage",!0),r["\u0275\u0275advance"](13),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind1"](14,14,e.messagePrefix+".table.id")),r["\u0275\u0275advance"](4),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind1"](18,16,e.messagePrefix+".table.name")),r["\u0275\u0275advance"](4),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind1"](22,18,e.messagePrefix+".table.collectionOrCommunity")),r["\u0275\u0275advance"](4),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind1"](26,20,e.messagePrefix+".table.edit")),r["\u0275\u0275advance"](7),r["\u0275\u0275property"]("ngForOf",null==(i=r["\u0275\u0275pipeBind1"](33,22,e.subGroups$))||null==i.payload?null:i.payload.page)}}function Te(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"div",27),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"]()),2&e){const e=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"]("\n    ",r["\u0275\u0275pipeBind1"](2,1,e.messagePrefix+".no-subgroups-yet"),"\n  ")}}var _e=function(e){return e[e.Members=0]="Members",e[e.ActiveGroup=1]="ActiveGroup",e[e.SearchResults=2]="SearchResults",e}({});let Qe=(()=>{class e{constructor(e,t,n,i,r,a){this.groupDataService=e,this.translateService=t,this.notificationsService=n,this.formBuilder=i,this.paginationService=r,this.router=a,this.searchResults$=new o.a(void 0),this.subGroups$=new o.a(void 0),this.subs=new Map,this.configSearch=Object.assign(new g.a,{id:"ssgl",pageSize:5,currentPage:1}),this.config=Object.assign(new g.a,{id:"sgl",pageSize:5,currentPage:1}),this.currentSearchQuery=""}ngOnInit(){this.searchForm=this.formBuilder.group({query:""}),this.subs.set(_e.ActiveGroup,this.groupDataService.getActiveGroup().subscribe(e=>{null!=e&&(this.groupBeingEdited=e,this.retrieveSubGroups())}))}retrieveSubGroups(){this.unsubFrom(_e.Members),this.subs.set(_e.Members,this.paginationService.getCurrentPagination(this.config.id,this.config).pipe(Object(c.a)(e=>this.groupDataService.findAllByHref(this.groupBeingEdited._links.subgroups.href,{currentPage:e.currentPage,elementsPerPage:e.pageSize},!0,!0,Object(F.a)("object")))).subscribe(e=>{this.subGroups$.next(e)}))}isSubgroupOfGroup(e){return this.groupDataService.getActiveGroup().pipe(Object(u.a)(1),Object(Se.a)(t=>null!=t?t.uuid===e.uuid?Object(w.a)(!1):this.groupDataService.findAllByHref(t._links.subgroups.href,{currentPage:1,elementsPerPage:9999}).pipe(Object(b.i)(),Object(b.o)(),Object(p.a)(t=>t.page.filter(t=>t.id===e.id)),Object(p.a)(e=>e.length>0)):Object(w.a)(!1)))}isActiveGroup(e){return this.groupDataService.getActiveGroup().pipe(Object(u.a)(1),Object(Se.a)(t=>null!=t&&t.uuid===e.uuid?Object(w.a)(!0):Object(w.a)(!1)))}deleteSubgroupFromGroup(e){this.groupDataService.getActiveGroup().pipe(Object(u.a)(1)).subscribe(t=>{if(null!=t){const n=this.groupDataService.deleteSubGroupFromGroup(t,e);this.showNotifications("deleteSubgroup",n,e.name,t)}else this.notificationsService.error(this.translateService.get(this.messagePrefix+".notification.failure.noActiveGroup"))})}addSubgroupToGroup(e){this.groupDataService.getActiveGroup().pipe(Object(u.a)(1)).subscribe(t=>{if(null!=t)if(t.uuid!==e.uuid){const n=this.groupDataService.addSubGroupToGroup(t,e);this.showNotifications("addSubgroup",n,e.name,t)}else this.notificationsService.error(this.translateService.get(this.messagePrefix+".notification.failure.subgroupToAddIsActiveGroup"));else this.notificationsService.error(this.translateService.get(this.messagePrefix+".notification.failure.noActiveGroup"))})}search(e){const t=e.query;null!=t&&this.currentSearchQuery!==t&&(this.router.navigateByUrl(this.groupDataService.getGroupEditPageRouterLink(this.groupBeingEdited)),this.currentSearchQuery=t,this.configSearch.currentPage=1),this.searchDone=!0,this.unsubFrom(_e.SearchResults),this.subs.set(_e.SearchResults,this.paginationService.getCurrentPagination(this.configSearch.id,this.configSearch).pipe(Object(c.a)(e=>this.groupDataService.searchGroups(this.currentSearchQuery,{currentPage:e.currentPage,elementsPerPage:e.pageSize},!0,!0,Object(F.a)("object")))).subscribe(e=>{this.searchResults$.next(e)}))}unsubFrom(e){this.subs.has(e)&&(this.subs.get(e).unsubscribe(),this.subs.delete(e))}ngOnDestroy(){for(const e of this.subs.keys())this.unsubFrom(e);this.paginationService.clearPagination(this.config.id),this.paginationService.clearPagination(this.configSearch.id)}showNotifications(e,t,n,i){t.pipe(Object(b.g)()).subscribe(t=>{t.hasSucceeded?(this.notificationsService.success(this.translateService.get(this.messagePrefix+".notification.success."+e,{name:n})),this.groupDataService.clearGroupLinkRequests(i._links.subgroups.href)):this.notificationsService.error(this.translateService.get(this.messagePrefix+".notification.failure."+e,{name:n}))})}clearFormAndResetResult(){this.searchForm.patchValue({query:""}),this.search({query:""})}}return e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](k.a),r["\u0275\u0275directiveInject"](y.e),r["\u0275\u0275directiveInject"](E.a),r["\u0275\u0275directiveInject"](P.FormBuilder),r["\u0275\u0275directiveInject"](j.a),r["\u0275\u0275directiveInject"](a.h))},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-subgroups-list"]],inputs:{messagePrefix:"messagePrefix"},decls:54,vars:28,consts:[[1,"border-bottom","pb-2"],["id","search",1,"border-bottom","pb-2"],[1,"d-flex","justify-content-between",3,"formGroup","ngSubmit"],[1,"flex-grow-1","mr-3"],[1,"form-group","input-group","mr-3"],["type","text","name","query","id","query","formControlName","query","aria-label","Search input",1,"form-control"],[1,"input-group-append"],["type","submit",1,"search-button","btn","btn-primary"],[1,"fas","fa-search"],[1,"btn","btn-secondary","float-right",3,"click"],[3,"paginationOptions","pageInfoState","collectionSize","hideGear","hidePagerWhenSinglePage",4,"ngIf"],["class","alert alert-info w-100 mb-2","role","alert",4,"ngIf"],[3,"paginationOptions","pageInfoState","collectionSize","hideGear","hidePagerWhenSinglePage"],[1,"table-responsive"],["id","groupsSearch",1,"table","table-striped","table-hover","table-bordered"],["scope","col",1,"align-middle"],[1,"align-middle"],[4,"ngFor","ngForOf"],[3,"routerLink","click"],[1,"btn-group","edit-field"],["class","btn btn-outline-danger btn-sm deleteButton",3,"title","click",4,"ngIf"],[4,"ngIf"],["class","btn btn-outline-primary btn-sm addButton",3,"title","click",4,"ngIf"],[1,"btn","btn-outline-danger","btn-sm","deleteButton",3,"title","click"],[1,"fas","fa-trash-alt","fa-fw"],[1,"btn","btn-outline-primary","btn-sm","addButton",3,"title","click"],[1,"fas","fa-plus","fa-fw"],["role","alert",1,"alert","alert-info","w-100","mb-2"],["id","subgroupsOfGroup",1,"table","table-striped","table-hover","table-bordered"]],template:function(e,t){if(1&e&&(r["\u0275\u0275elementContainerStart"](0),r["\u0275\u0275text"](1,"\n  "),r["\u0275\u0275elementStart"](2,"h3",0),r["\u0275\u0275text"](3),r["\u0275\u0275pipe"](4,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](5,"\n\n  "),r["\u0275\u0275elementStart"](6,"h4",1),r["\u0275\u0275text"](7),r["\u0275\u0275pipe"](8,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](9,"\n  "),r["\u0275\u0275elementStart"](10,"form",2),r["\u0275\u0275listener"]("ngSubmit",(function(){return t.search(t.searchForm.value)})),r["\u0275\u0275text"](11,"\n    "),r["\u0275\u0275elementStart"](12,"div",3),r["\u0275\u0275text"](13,"\n      "),r["\u0275\u0275elementStart"](14,"div",4),r["\u0275\u0275text"](15,"\n        "),r["\u0275\u0275element"](16,"input",5),r["\u0275\u0275text"](17,"\n        "),r["\u0275\u0275elementStart"](18,"span",6),r["\u0275\u0275text"](19,"\n            "),r["\u0275\u0275elementStart"](20,"button",7),r["\u0275\u0275text"](21,"\n              "),r["\u0275\u0275element"](22,"i",8),r["\u0275\u0275text"](23),r["\u0275\u0275pipe"](24,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](25,"\n        "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](26,"\n\n      "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](27,"\n    "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](28,"\n    "),r["\u0275\u0275elementStart"](29,"div"),r["\u0275\u0275text"](30,"\n      "),r["\u0275\u0275elementStart"](31,"button",9),r["\u0275\u0275listener"]("click",(function(){return t.clearFormAndResetResult()})),r["\u0275\u0275text"](32),r["\u0275\u0275pipe"](33,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](34,"\n    "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](35,"\n  "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](36,"\n\n  "),r["\u0275\u0275template"](37,Ve,38,24,"ds-pagination",10),r["\u0275\u0275pipe"](38,"async"),r["\u0275\u0275text"](39,"\n\n  "),r["\u0275\u0275template"](40,Me,3,3,"div",11),r["\u0275\u0275pipe"](41,"async"),r["\u0275\u0275text"](42,"\n\n  "),r["\u0275\u0275elementStart"](43,"h4"),r["\u0275\u0275text"](44),r["\u0275\u0275pipe"](45,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](46,"\n\n  "),r["\u0275\u0275template"](47,ze,38,24,"ds-pagination",10),r["\u0275\u0275pipe"](48,"async"),r["\u0275\u0275text"](49,"\n\n  "),r["\u0275\u0275template"](50,Te,3,3,"div",11),r["\u0275\u0275pipe"](51,"async"),r["\u0275\u0275text"](52,"\n\n"),r["\u0275\u0275elementContainerEnd"](),r["\u0275\u0275text"](53,"\n")),2&e){let e=null,n=null,i=null,a=null;r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind1"](4,10,t.messagePrefix+".head")),r["\u0275\u0275advance"](4),r["\u0275\u0275textInterpolate1"]("",r["\u0275\u0275pipeBind1"](8,12,t.messagePrefix+".search.head"),"\n\n  "),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("formGroup",t.searchForm),r["\u0275\u0275advance"](13),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](24,14,t.messagePrefix+".search.button"),"\n            "),r["\u0275\u0275advance"](9),r["\u0275\u0275textInterpolate1"]("\n        ",r["\u0275\u0275pipeBind1"](33,16,t.messagePrefix+".button.see-all"),"\n      "),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngIf",(null==(e=r["\u0275\u0275pipeBind1"](38,18,t.searchResults$))||null==e.payload?null:e.payload.totalElements)>0),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngIf",0==(null==(n=r["\u0275\u0275pipeBind1"](41,20,t.searchResults$))||null==n.payload?null:n.payload.totalElements)&&t.searchDone),r["\u0275\u0275advance"](4),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind1"](45,22,t.messagePrefix+".headSubgroups")),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngIf",(null==(i=r["\u0275\u0275pipeBind1"](48,24,t.subGroups$))||null==i.payload?null:i.payload.totalElements)>0),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngIf",0==(null==(a=r["\u0275\u0275pipeBind1"](51,26,t.subGroups$))||null==a.payload?null:a.payload.totalElements))}},directives:[P["\u0275angular_packages_forms_forms_ba"],P.NgControlStatusGroup,P.FormGroupDirective,P.DefaultValueAccessor,P.NgControlStatus,P.FormControlName,i.p,V.a,i.o,a.k],pipes:[y.d,i.b],encapsulation:2}),e})();function We(e,t){1&e&&r["\u0275\u0275element"](0,"div")}function He(e,t){if(1&e&&(r["\u0275\u0275text"](0,"\n        "),r["\u0275\u0275elementStart"](1,"h2",14),r["\u0275\u0275text"](2),r["\u0275\u0275pipe"](3,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](4,"\n      ")),2&e){const e=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind1"](3,1,e.messagePrefix+".head.create"))}}function Ue(e,t){if(1&e&&(r["\u0275\u0275text"](0,"\n        "),r["\u0275\u0275elementStart"](1,"h2",14),r["\u0275\u0275text"](2),r["\u0275\u0275pipe"](3,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](4,"\n      ")),2&e){const e=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind1"](3,1,e.messagePrefix+".head.edit"))}}function Je(e,t){if(1&e&&r["\u0275\u0275element"](0,"ds-alert",15),2&e){const e=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("type",e.AlertTypeEnum.Warning)("content",e.messagePrefix+".alert.permanent")}}const Ke=function(e,t,n){return{name:e,comcol:t,comcolEditRolesRoute:n}};function Ze(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"ds-alert",15),r["\u0275\u0275pipe"](1,"translate"),r["\u0275\u0275pipe"](2,"async"),r["\u0275\u0275pipe"](3,"async"),r["\u0275\u0275pipe"](4,"async"),r["\u0275\u0275text"](5,"\n      "),r["\u0275\u0275elementEnd"]()),2&e){const e=r["\u0275\u0275nextContext"]();let t=null;r["\u0275\u0275property"]("type",e.AlertTypeEnum.Warning)("content",r["\u0275\u0275pipeBind2"](1,2,e.messagePrefix+".alert.workflowGroup",r["\u0275\u0275pureFunction3"](11,Ke,null==(t=r["\u0275\u0275pipeBind1"](2,5,e.getLinkedDSO(e.groupBeingEdited)))||null==t.payload?null:t.payload.name,null==(t=r["\u0275\u0275pipeBind1"](3,7,e.getLinkedDSO(e.groupBeingEdited)))||null==t.payload?null:t.payload.type,r["\u0275\u0275pipeBind1"](4,9,e.getLinkedEditRolesRoute(e.groupBeingEdited)))))}}function Xe(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",16),r["\u0275\u0275text"](1,"\n          "),r["\u0275\u0275elementStart"](2,"button",17),r["\u0275\u0275listener"]("click",(function(){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275nextContext"]().delete()})),r["\u0275\u0275pipe"](3,"async"),r["\u0275\u0275text"](4,"\n            "),r["\u0275\u0275element"](5,"i",18),r["\u0275\u0275text"](6),r["\u0275\u0275pipe"](7,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](8,"\n        "),r["\u0275\u0275elementEnd"]()}if(2&e){const e=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("disabled",!r["\u0275\u0275pipeBind1"](3,2,e.canEdit$)||e.groupBeingEdited.permanent),r["\u0275\u0275advance"](4),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](7,4,e.messagePrefix+".actions.delete"),"\n          ")}}function Ye(e,t){if(1&e&&r["\u0275\u0275element"](0,"ds-members-list",19),2&e){const e=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("messagePrefix",e.messagePrefix+".members-list")}}function et(e,t){if(1&e&&r["\u0275\u0275element"](0,"ds-subgroups-list",19),2&e){const e=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("messagePrefix",e.messagePrefix+".subgroups-list")}}let tt=(()=>{class e{constructor(e,t,n,i,a,s,o,l,c,p,u,d){this.groupDataService=e,this.ePersonDataService=t,this.dSpaceObjectDataService=n,this.formBuilderService=i,this.translateService=a,this.notificationsService=s,this.route=o,this.router=l,this.authorizationService=c,this.modalService=p,this.requestService=u,this.changeDetectorRef=d,this.messagePrefix="admin.access-control.groups.form",this.formId="group-form",this.formLayout={groupName:{grid:{host:"row"}},groupDescription:{grid:{host:"row"}}},this.submitForm=new r.EventEmitter,this.cancelForm=new r.EventEmitter,this.subs=[],this.AlertTypeEnum=be.a}ngOnInit(){this.initialisePage()}initialisePage(){this.subs.push(this.route.params.subscribe(e=>{"newGroup"!==e.groupId&&this.setActiveGroup(e.groupId)})),this.canEdit$=this.groupDataService.getActiveGroup().pipe(Object(m.c)(),Object(c.a)(e=>Object(l.a)(this.authorizationService.isAuthorized(f.a.CanDelete,Object(m.e)(e)?e.self:void 0),this.hasLinkedDSO(e),(e,t)=>e&&!t))),Object(l.a)(this.translateService.get(`${this.messagePrefix}.groupName`),this.translateService.get(`${this.messagePrefix}.groupCommunity`),this.translateService.get(`${this.messagePrefix}.groupDescription`)).subscribe(([e,t,n])=>{this.groupName=new C.J({id:"groupName",label:e,name:"groupName",validators:{required:null},required:!0}),this.groupCommunity=new C.J({id:"groupCommunity",label:t,name:"groupCommunity",required:!1,readOnly:!0}),this.groupDescription=new C.P({id:"groupDescription",label:n,name:"groupDescription",required:!1}),this.formModel=[this.groupName,this.groupDescription],this.formGroup=this.formBuilderService.createFormGroup(this.formModel),this.formGroup.controls.groupName&&(this.formGroup.controls.groupName.setAsyncValidators(class{static createValidator(e){return t=>e.searchGroups(t.value,{currentPage:1,elementsPerPage:100}).pipe(Object(b.l)(),Object(p.a)(e=>e.filter(e=>e.name===t.value)),Object(p.a)(e=>e.length>0?{groupExists:!0}:null))}}.createValidator(this.groupDataService)),this.groupNameValueChangeSubscribe=this.groupName.valueChanges.pipe(Object(G.a)(300)).subscribe(()=>{this.changeDetectorRef.detectChanges()})),this.subs.push(Object(l.a)(this.groupDataService.getActiveGroup(),this.canEdit$,this.groupDataService.getActiveGroup().pipe(Object(pe.a)(e=>Object(m.b)(e)),Object(c.a)(e=>this.getLinkedDSO(e).pipe(Object(b.j)())))).subscribe(([e,t,n])=>{var i;null!=e&&(this.formGroup.controls.groupName.clearAsyncValidators(),this.groupBeingEdited=e,(null==n?void 0:n.name)?(this.formBuilderService.insertFormGroupControl(1,this.formGroup,this.formModel,this.groupCommunity),this.formGroup.patchValue({groupName:e.name,groupCommunity:null!==(i=null==n?void 0:n.name)&&void 0!==i?i:"",groupDescription:e.firstMetadataValue("dc.description")})):(this.formModel=[this.groupName,this.groupDescription],this.formGroup.patchValue({groupName:e.name,groupDescription:e.firstMetadataValue("dc.description")})),setTimeout(()=>{t&&!e.permanent||this.formGroup.disable()},200))}))})}onCancel(){this.groupDataService.cancelEditGroup(),this.cancelForm.emit(),this.router.navigate([this.groupDataService.getGroupRegistryRouterLink()])}onSubmit(){this.groupDataService.getActiveGroup().pipe(Object(u.a)(1)).subscribe(e=>{null===e?this.createNewGroup({name:this.groupName.value,metadata:{"dc.description":[{value:this.groupDescription.value}]}}):this.editGroup(e)})}createNewGroup(e){const t=Object.assign(new ge.a,e);this.groupDataService.create(t).pipe(Object(b.g)()).subscribe(e=>{e.hasSucceeded?(this.notificationsService.success(this.translateService.get(this.messagePrefix+".notification.created.success",{name:t.name})),this.submitForm.emit(t),Object(m.e)(e.payload)&&(this.setActiveGroupWithLink(e.payload._links.self.href),this.groupDataService.clearGroupsRequests(),this.router.navigateByUrl(this.groupDataService.getGroupEditPageRouterLinkWithID(e.payload.uuid)))):(this.notificationsService.error(this.translateService.get(this.messagePrefix+".notification.created.failure",{name:t.name})),this.showNotificationIfNameInUse(t,"created"),this.cancelForm.emit())})}showNotificationIfNameInUse(e,t){this.subs.push(this.groupDataService.searchGroups(e.name,{currentPage:1,elementsPerPage:0}).pipe(Object(b.i)(),Object(b.o)()).subscribe(n=>{n.totalElements>0&&this.notificationsService.error(this.translateService.get(this.messagePrefix+".notification."+t+".failure.groupNameInUse",{name:e.name}))}))}editGroup(e){let t=[];Object(m.b)(this.groupDescription.value)&&(t=[...t,{op:"replace",path:"/metadata/dc.description/0/value",value:this.groupDescription.value}]),Object(m.b)(this.groupName.value)&&(t=[...t,{op:"replace",path:"/name",value:this.groupName.value}]),this.groupDataService.patch(e,t).pipe(Object(b.g)()).subscribe(t=>{t.hasSucceeded?(this.notificationsService.success(this.translateService.get(this.messagePrefix+".notification.edited.success",{name:t.payload.name})),this.submitForm.emit(t.payload)):(this.notificationsService.error(this.translateService.get(this.messagePrefix+".notification.edited.failure",{name:e.name})),this.cancelForm.emit())})}setActiveGroup(e){this.groupDataService.cancelEditGroup(),this.groupDataService.findById(e).pipe(Object(b.i)(),Object(b.o)()).subscribe(e=>{this.groupDataService.editGroup(e)})}setActiveGroupWithLink(e){this.groupDataService.getActiveGroup().pipe(Object(u.a)(1)).subscribe(t=>{null===t&&(this.groupDataService.cancelEditGroup(),this.groupDataService.findByHref(e,!1,!1,Object(F.a)("subgroups"),Object(F.a)("epersons"),Object(F.a)("object")).pipe(Object(b.i)(),Object(b.o)()).subscribe(e=>{this.groupDataService.editGroup(e)}))})}delete(){this.groupDataService.getActiveGroup().pipe(Object(u.a)(1)).subscribe(e=>{const t=this.modalService.open(x.a);t.componentInstance.dso=e,t.componentInstance.headerLabel=this.messagePrefix+".delete-group.modal.header",t.componentInstance.infoLabel=this.messagePrefix+".delete-group.modal.info",t.componentInstance.cancelLabel=this.messagePrefix+".delete-group.modal.cancel",t.componentInstance.confirmLabel=this.messagePrefix+".delete-group.modal.confirm",t.componentInstance.brandColor="danger",t.componentInstance.confirmIcon="fas fa-trash",t.componentInstance.response.pipe(Object(u.a)(1)).subscribe(t=>{t&&Object(m.b)(e.id)&&this.groupDataService.delete(e.id).pipe(Object(b.g)()).subscribe(t=>{t.hasSucceeded?(this.notificationsService.success(this.translateService.get(this.messagePrefix+".notification.deleted.success",{name:e.name})),this.reset()):this.notificationsService.error(this.translateService.get(this.messagePrefix+".notification.deleted.failure.title",{name:e.name}),this.translateService.get(this.messagePrefix+".notification.deleted.failure.content",{cause:t.errorMessage}))})})})}reset(){this.groupDataService.getBrowseEndpoint().pipe(Object(u.a)(1)).subscribe(e=>{this.requestService.removeByHrefSubstring(e)}),this.onCancel()}ngOnDestroy(){this.groupDataService.cancelEditGroup(),this.subs.filter(e=>Object(m.b)(e)).forEach(e=>e.unsubscribe()),Object(m.b)(this.groupNameValueChangeSubscribe)&&this.groupNameValueChangeSubscribe.unsubscribe()}hasLinkedDSO(e){if(Object(m.b)(e)&&Object(m.b)(e._links.object.href))return this.getLinkedDSO(e).pipe(Object(p.a)(e=>Object(m.b)(e)&&Object(m.b)(e.payload)),Object(ue.a)(()=>Object(w.a)(!1)))}getLinkedDSO(e){if(Object(m.b)(e)&&Object(m.b)(e._links.object.href))return void 0===e.object?this.dSpaceObjectDataService.findByHref(e._links.object.href):e.object}getLinkedEditRolesRoute(e){if(Object(m.b)(e)&&Object(m.b)(e._links.object.href))return this.getLinkedDSO(e).pipe(Object(p.a)(e=>{if(Object(m.b)(e)&&Object(m.b)(e.payload))switch(e.payload.type){case fe.a.type.value:return Object(me.f)(e.payload.id);case he.a.type.value:return Object(de.g)(e.payload.id)}}))}}return e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](k.a),r["\u0275\u0275directiveInject"](S.a),r["\u0275\u0275directiveInject"](xe.a),r["\u0275\u0275directiveInject"](A.a),r["\u0275\u0275directiveInject"](y.e),r["\u0275\u0275directiveInject"](E.a),r["\u0275\u0275directiveInject"](a.a),r["\u0275\u0275directiveInject"](a.h),r["\u0275\u0275directiveInject"](I.a),r["\u0275\u0275directiveInject"](O.q),r["\u0275\u0275directiveInject"](B.a),r["\u0275\u0275directiveInject"](r.ChangeDetectorRef))},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-group-form"]],hostBindings:function(e,t){1&e&&r["\u0275\u0275listener"]("beforeunload",(function(){return t.ngOnDestroy()}),!1,r["\u0275\u0275resolveWindow"])},outputs:{submitForm:"submitForm",cancelForm:"cancelForm"},decls:44,vars:22,consts:[[1,"container"],[1,"group-form","row"],[1,"col-12"],[4,"ngIf","ngIfThen","ngIfElse"],["createHeader",""],["editheader",""],[3,"type","content",4,"ngIf"],[3,"formId","formModel","formGroup","formLayout","displayCancel","submitForm"],["before","",1,"btn-group"],[1,"btn","btn-outline-secondary",3,"click"],[1,"fas","fa-arrow-left"],["after","","class","btn-group",4,"ngIf"],[1,"mb-5"],[3,"messagePrefix",4,"ngIf"],[1,"border-bottom","pb-2"],[3,"type","content"],["after","",1,"btn-group"],[1,"btn","btn-danger","delete-button",3,"disabled","click"],[1,"fa","fa-trash"],[3,"messagePrefix"]],template:function(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"div",0),r["\u0275\u0275text"](1,"\n  "),r["\u0275\u0275elementStart"](2,"div",1),r["\u0275\u0275text"](3,"\n    "),r["\u0275\u0275elementStart"](4,"div",2),r["\u0275\u0275text"](5,"\n\n      "),r["\u0275\u0275template"](6,We,1,0,"div",3),r["\u0275\u0275pipe"](7,"async"),r["\u0275\u0275text"](8,"\n\n      "),r["\u0275\u0275template"](9,He,5,3,"ng-template",null,4,r["\u0275\u0275templateRefExtractor"]),r["\u0275\u0275text"](11,"\n\n      "),r["\u0275\u0275template"](12,Ue,5,3,"ng-template",null,5,r["\u0275\u0275templateRefExtractor"]),r["\u0275\u0275text"](14,"\n\n      "),r["\u0275\u0275template"](15,Je,1,2,"ds-alert",6),r["\u0275\u0275text"](16,"\n      "),r["\u0275\u0275template"](17,Ze,6,15,"ds-alert",6),r["\u0275\u0275pipe"](18,"async"),r["\u0275\u0275pipe"](19,"async"),r["\u0275\u0275text"](20,"\n\n      "),r["\u0275\u0275elementStart"](21,"ds-form",7),r["\u0275\u0275listener"]("submitForm",(function(){return t.onSubmit()})),r["\u0275\u0275text"](22,"\n        "),r["\u0275\u0275elementStart"](23,"div",8),r["\u0275\u0275text"](24,"\n          "),r["\u0275\u0275elementStart"](25,"button",9),r["\u0275\u0275listener"]("click",(function(){return t.onCancel()})),r["\u0275\u0275element"](26,"i",10),r["\u0275\u0275text"](27),r["\u0275\u0275pipe"](28,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](29,"\n        "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](30,"\n        "),r["\u0275\u0275template"](31,Xe,9,6,"div",11),r["\u0275\u0275text"](32,"\n      "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](33,"\n\n      "),r["\u0275\u0275elementStart"](34,"div",12),r["\u0275\u0275text"](35,"\n        "),r["\u0275\u0275template"](36,Ye,1,1,"ds-members-list",13),r["\u0275\u0275text"](37,"\n      "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](38,"\n      "),r["\u0275\u0275template"](39,et,1,1,"ds-subgroups-list",13),r["\u0275\u0275text"](40,"\n\n\n\n    "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](41,"\n  "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](42,"\n"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](43,"\n")),2&e){const e=r["\u0275\u0275reference"](10),n=r["\u0275\u0275reference"](13);r["\u0275\u0275advance"](6),r["\u0275\u0275property"]("ngIf",r["\u0275\u0275pipeBind1"](7,14,t.groupDataService.getActiveGroup()))("ngIfThen",n)("ngIfElse",e),r["\u0275\u0275advance"](9),r["\u0275\u0275property"]("ngIf",null==t.groupBeingEdited?null:t.groupBeingEdited.permanent),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",!r["\u0275\u0275pipeBind1"](18,16,t.canEdit$)&&r["\u0275\u0275pipeBind1"](19,18,t.groupDataService.getActiveGroup())),r["\u0275\u0275advance"](4),r["\u0275\u0275property"]("formId",t.formId)("formModel",t.formModel)("formGroup",t.formGroup)("formLayout",t.formLayout)("displayCancel",!1),r["\u0275\u0275advance"](6),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](28,20,t.messagePrefix+".return"),""),r["\u0275\u0275advance"](4),r["\u0275\u0275property"]("ngIf",null!=t.groupBeingEdited),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngIf",null!=t.groupBeingEdited),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngIf",null!=t.groupBeingEdited)}},directives:[i.p,N.a,P.NgControlStatusGroup,P.FormGroupDirective,ve.a,Fe,Qe],pipes:[i.b,y.d],encapsulation:2}),e})();var nt=n("vkgz");class it{}var rt=n("ppE2");function at(e,t){1&e&&r["\u0275\u0275element"](0,"ds-loading")}const st=function(e){return{name:e}};function ot(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"button",30),r["\u0275\u0275pipe"](1,"translate"),r["\u0275\u0275text"](2,"\n                      "),r["\u0275\u0275element"](3,"i",31),r["\u0275\u0275text"](4,"\n                    "),r["\u0275\u0275elementEnd"]()),2&e){const e=r["\u0275\u0275nextContext"]().$implicit,t=r["\u0275\u0275nextContext"](2);r["\u0275\u0275propertyInterpolate"]("title",r["\u0275\u0275pipeBind2"](1,2,t.messagePrefix+"table.edit.buttons.edit",r["\u0275\u0275pureFunction1"](5,st,e.group.name))),r["\u0275\u0275property"]("routerLink",t.groupService.getGroupEditPageRouterLink(e.group))}}function lt(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"button",32),r["\u0275\u0275pipe"](1,"translate"),r["\u0275\u0275text"](2,"\n                      "),r["\u0275\u0275element"](3,"i",31),r["\u0275\u0275text"](4,"\n                    "),r["\u0275\u0275elementEnd"]()),2&e&&r["\u0275\u0275property"]("disabled",!0)("ngbTooltip",r["\u0275\u0275pipeBind1"](1,2,"admin.access-control.epeople.table.edit.buttons.edit-disabled"))}function ct(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"button",33),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](e);const t=r["\u0275\u0275nextContext"]().$implicit;return r["\u0275\u0275nextContext"](2).deleteGroup(t)})),r["\u0275\u0275pipe"](1,"translate"),r["\u0275\u0275text"](2,"\n                    "),r["\u0275\u0275element"](3,"i",34),r["\u0275\u0275text"](4,"\n                  "),r["\u0275\u0275elementEnd"]()}if(2&e){const e=r["\u0275\u0275nextContext"]().$implicit,t=r["\u0275\u0275nextContext"](2);r["\u0275\u0275propertyInterpolate"]("title",r["\u0275\u0275pipeBind2"](1,1,t.messagePrefix+"table.edit.buttons.remove",r["\u0275\u0275pureFunction1"](4,st,e.group.name)))}}function pt(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"tr"),r["\u0275\u0275text"](1,"\n              "),r["\u0275\u0275elementStart"](2,"td"),r["\u0275\u0275text"](3),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](4,"\n              "),r["\u0275\u0275elementStart"](5,"td"),r["\u0275\u0275text"](6),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](7,"\n              "),r["\u0275\u0275elementStart"](8,"td"),r["\u0275\u0275text"](9),r["\u0275\u0275pipe"](10,"async"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](11,"\n              "),r["\u0275\u0275elementStart"](12,"td"),r["\u0275\u0275text"](13),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](14,"\n              "),r["\u0275\u0275elementStart"](15,"td"),r["\u0275\u0275text"](16,"\n                "),r["\u0275\u0275elementStart"](17,"div",25),r["\u0275\u0275text"](18,"\n                  "),r["\u0275\u0275elementContainerStart"](19,26),r["\u0275\u0275text"](20,"\n                    "),r["\u0275\u0275template"](21,ot,5,7,"button",27),r["\u0275\u0275text"](22,"\n                    "),r["\u0275\u0275template"](23,lt,5,4,"button",28),r["\u0275\u0275text"](24,"\n                  "),r["\u0275\u0275elementContainerEnd"](),r["\u0275\u0275text"](25,"\n                  "),r["\u0275\u0275template"](26,ct,5,6,"button",29),r["\u0275\u0275text"](27,"\n                "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](28,"\n              "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](29,"\n            "),r["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;let n=null;r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate"](e.group.id),r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate"](e.group.name),r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate"](null==(n=r["\u0275\u0275pipeBind1"](10,8,e.group.object))||null==n.payload?null:n.payload.name),r["\u0275\u0275advance"](4),r["\u0275\u0275textInterpolate"]((null==e.epersons?null:e.epersons.totalElements)+(null==e.subgroups?null:e.subgroups.totalElements)),r["\u0275\u0275advance"](6),r["\u0275\u0275property"]("ngSwitch",e.ableToEdit),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngSwitchCase",!0),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngSwitchCase",!1),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngIf",!(null!=e.group&&e.group.permanent)&&e.ableToDelete)}}function ut(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"ds-pagination",20),r["\u0275\u0275pipe"](1,"async"),r["\u0275\u0275text"](2,"\n\n        "),r["\u0275\u0275elementStart"](3,"div",21),r["\u0275\u0275text"](4,"\n          "),r["\u0275\u0275elementStart"](5,"table",22),r["\u0275\u0275text"](6,"\n            "),r["\u0275\u0275elementStart"](7,"thead"),r["\u0275\u0275text"](8,"\n            "),r["\u0275\u0275elementStart"](9,"tr"),r["\u0275\u0275text"](10,"\n              "),r["\u0275\u0275elementStart"](11,"th",23),r["\u0275\u0275text"](12),r["\u0275\u0275pipe"](13,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](14,"\n              "),r["\u0275\u0275elementStart"](15,"th",23),r["\u0275\u0275text"](16),r["\u0275\u0275pipe"](17,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](18,"\n              "),r["\u0275\u0275elementStart"](19,"th",23),r["\u0275\u0275text"](20),r["\u0275\u0275pipe"](21,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](22,"\n              "),r["\u0275\u0275elementStart"](23,"th",23),r["\u0275\u0275text"](24),r["\u0275\u0275pipe"](25,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](26,"\n              "),r["\u0275\u0275elementStart"](27,"th"),r["\u0275\u0275text"](28),r["\u0275\u0275pipe"](29,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](30,"\n            "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](31,"\n            "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](32,"\n            "),r["\u0275\u0275elementStart"](33,"tbody"),r["\u0275\u0275text"](34,"\n            "),r["\u0275\u0275template"](35,pt,30,10,"tr",24),r["\u0275\u0275pipe"](36,"async"),r["\u0275\u0275text"](37,"\n            "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](38,"\n          "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](39,"\n        "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](40,"\n      "),r["\u0275\u0275elementEnd"]()),2&e){const e=r["\u0275\u0275nextContext"]();let t=null,n=null;r["\u0275\u0275property"]("paginationOptions",e.config)("pageInfoState",e.pageInfoState$)("collectionSize",null==(t=r["\u0275\u0275pipeBind1"](1,11,e.pageInfoState$))?null:t.totalElements)("hideGear",!0)("hidePagerWhenSinglePage",!0),r["\u0275\u0275advance"](12),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind1"](13,13,e.messagePrefix+"table.id")),r["\u0275\u0275advance"](4),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind1"](17,15,e.messagePrefix+"table.name")),r["\u0275\u0275advance"](4),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind1"](21,17,e.messagePrefix+"table.collectionOrCommunity")),r["\u0275\u0275advance"](4),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind1"](25,19,e.messagePrefix+"table.members")),r["\u0275\u0275advance"](4),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind1"](29,21,e.messagePrefix+"table.edit")),r["\u0275\u0275advance"](7),r["\u0275\u0275property"]("ngForOf",null==(n=r["\u0275\u0275pipeBind1"](36,23,e.groupsDto$))?null:n.page)}}function dt(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"div",35),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"]()),2&e){const e=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"]("\n        ",r["\u0275\u0275pipeBind1"](2,1,e.messagePrefix+"no-items"),"\n      ")}}const mt=function(){return["newGroup"]};let gt=(()=>{class e{constructor(e,t,n,i,r,a,s,l,c,p,u){this.groupService=e,this.ePersonDataService=t,this.dSpaceObjectDataService=n,this.translateService=i,this.notificationsService=r,this.formBuilder=a,this.routeService=s,this.router=l,this.authorizationService=c,this.paginationService=p,this.requestService=u,this.messagePrefix="admin.access-control.groups.",this.config=Object.assign(new g.a,{id:"gl",pageSize:5,currentPage:1}),this.groupsDto$=new o.a({}),this.deletedGroupsIds=[],this.pageInfoState$=new o.a(void 0),this.loading$=new o.a(!1),this.subs=[],this.currentSearchQuery="",this.searchForm=this.formBuilder.group({query:this.currentSearchQuery})}ngOnInit(){this.search({query:this.currentSearchQuery})}search(e){Object(m.b)(this.searchSub)&&(this.searchSub.unsubscribe(),this.subs=this.subs.filter(e=>e!==this.searchSub)),this.searchSub=this.paginationService.getCurrentPagination(this.config.id,this.config).pipe(Object(nt.a)(()=>this.loading$.next(!0)),Object(c.a)(t=>{const n=e.query;return null!=n&&this.currentSearchQuery!==n&&(this.currentSearchQuery=n,this.paginationService.updateRouteWithUrl(this.config.id,[],{page:1})),this.groupService.searchGroups(this.currentSearchQuery.trim(),{currentPage:t.currentPage,elementsPerPage:t.pageSize},!0,!0,Object(F.a)("object"))}),Object(b.c)(),Object(b.o)(),Object(c.a)(e=>0===e.page.length?Object(w.a)(Object(d.b)(e.pageInfo,[])):this.authorizationService.isAuthorized(f.a.AdministratorOf).pipe(Object(c.a)(t=>Object(l.a)(e.page.map(e=>{if(Object(m.b)(e)&&!this.deletedGroupsIds.includes(e.id))return Object(l.a)([this.authorizationService.isAuthorized(f.a.CanDelete,e.self),this.canManageGroup$(t,e),this.hasLinkedDSO(e),this.getSubgroups(e),this.getMembers(e)]).pipe(Object(p.a)(([t,n,i,r,a])=>{const s=new it;return s.ableToDelete=t&&!i,s.ableToEdit=n,s.group=e,s.subgroups=r.payload,s.epersons=a.payload,s}))})).pipe(Object(p.a)(t=>Object(d.b)(e.pageInfo,t))))))).subscribe(e=>{this.groupsDto$.next(e),this.pageInfoState$.next(e.pageInfo),this.loading$.next(!1)}),this.subs.push(this.searchSub)}canManageGroup$(e,t){return e?Object(w.a)(!0):this.authorizationService.isAuthorized(f.a.CanManageGroup,t.self)}deleteGroup(e){Object(m.b)(e.group.id)&&this.groupService.delete(e.group.id).pipe(Object(b.g)()).subscribe(t=>{t.hasSucceeded?(this.deletedGroupsIds=[...this.deletedGroupsIds,e.group.id],this.notificationsService.success(this.translateService.get(this.messagePrefix+"notification.deleted.success",{name:e.group.name})),this.reset()):this.notificationsService.error(this.translateService.get(this.messagePrefix+"notification.deleted.failure.title",{name:e.group.name}),this.translateService.get(this.messagePrefix+"notification.deleted.failure.content",{cause:t.errorMessage}))})}reset(){this.groupService.getBrowseEndpoint().pipe(Object(u.a)(1)).subscribe(e=>{this.requestService.setStaleByHrefSubstring(e)})}getMembers(e){return this.ePersonDataService.findAllByHref(e._links.epersons.href).pipe(Object(b.i)())}getSubgroups(e){return this.groupService.findAllByHref(e._links.subgroups.href).pipe(Object(b.i)())}hasLinkedDSO(e){return this.dSpaceObjectDataService.findByHref(e._links.object.href).pipe(Object(b.i)(),Object(p.a)(e=>Object(m.b)(e)&&Object(m.b)(e.payload)),Object(ue.a)(()=>Object(w.a)(!1)))}clearFormAndResetResult(){this.searchForm.patchValue({query:""}),this.search({query:""})}ngOnDestroy(){this.cleanupSubscribes(),this.paginationService.clearPagination(this.config.id)}cleanupSubscribes(){Object(m.b)(this.paginationSub)&&this.paginationSub.unsubscribe(),this.subs.filter(e=>Object(m.b)(e)).forEach(e=>e.unsubscribe()),this.paginationService.clearPagination(this.config.id)}}return e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](k.a),r["\u0275\u0275directiveInject"](S.a),r["\u0275\u0275directiveInject"](xe.a),r["\u0275\u0275directiveInject"](y.e),r["\u0275\u0275directiveInject"](E.a),r["\u0275\u0275directiveInject"](P.FormBuilder),r["\u0275\u0275directiveInject"](rt.a),r["\u0275\u0275directiveInject"](a.h),r["\u0275\u0275directiveInject"](I.a),r["\u0275\u0275directiveInject"](j.a),r["\u0275\u0275directiveInject"](B.a))},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-groups-registry"]],decls:71,vars:35,consts:[[1,"container"],[1,"groups-registry","row"],[1,"col-12"],[1,"d-flex","justify-content-between","border-bottom","mb-3"],["id","header",1,"pb-2"],[1,"mr-auto","btn","btn-success",3,"routerLink"],[1,"fas","fa-plus"],[1,"d-none","d-sm-inline"],["id","search",1,"border-bottom","pb-2"],[1,"d-flex","justify-content-between",3,"formGroup","ngSubmit"],[1,"flex-grow-1","mr-3"],[1,"form-group","input-group"],["type","text","name","query","id","query","formControlName","query",1,"form-control",3,"placeholder"],[1,"input-group-append"],["type","submit",1,"search-button","btn","btn-primary"],[1,"fas","fa-search"],[1,"btn","btn-secondary",3,"click"],[4,"ngIf"],[3,"paginationOptions","pageInfoState","collectionSize","hideGear","hidePagerWhenSinglePage",4,"ngIf"],["class","alert alert-info w-100 mb-2","role","alert",4,"ngIf"],[3,"paginationOptions","pageInfoState","collectionSize","hideGear","hidePagerWhenSinglePage"],[1,"table-responsive"],["id","groups",1,"table","table-striped","table-hover","table-bordered"],["scope","col"],[4,"ngFor","ngForOf"],[1,"btn-group","edit-field"],[3,"ngSwitch"],["class","btn btn-outline-primary btn-sm btn-edit",3,"routerLink","title",4,"ngSwitchCase"],["class","btn btn-outline-primary btn-sm btn-edit","placement","left",3,"disabled","ngbTooltip",4,"ngSwitchCase"],["class","btn btn-outline-danger btn-sm",3,"title","click",4,"ngIf"],[1,"btn","btn-outline-primary","btn-sm","btn-edit",3,"routerLink","title"],[1,"fas","fa-edit","fa-fw"],["placement","left",1,"btn","btn-outline-primary","btn-sm","btn-edit",3,"disabled","ngbTooltip"],[1,"btn","btn-outline-danger","btn-sm",3,"title","click"],[1,"fas","fa-trash-alt","fa-fw"],["role","alert",1,"alert","alert-info","w-100","mb-2"]],template:function(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"div",0),r["\u0275\u0275text"](1,"\n  "),r["\u0275\u0275elementStart"](2,"div",1),r["\u0275\u0275text"](3,"\n    "),r["\u0275\u0275elementStart"](4,"div",2),r["\u0275\u0275text"](5,"\n      "),r["\u0275\u0275elementStart"](6,"div",3),r["\u0275\u0275text"](7,"\n        "),r["\u0275\u0275elementStart"](8,"h2",4),r["\u0275\u0275text"](9),r["\u0275\u0275pipe"](10,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](11,"\n        "),r["\u0275\u0275elementStart"](12,"div"),r["\u0275\u0275text"](13,"\n          "),r["\u0275\u0275elementStart"](14,"button",5),r["\u0275\u0275text"](15,"\n            "),r["\u0275\u0275element"](16,"i",6),r["\u0275\u0275text"](17,"\n            "),r["\u0275\u0275elementStart"](18,"span",7),r["\u0275\u0275text"](19),r["\u0275\u0275pipe"](20,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](21,"\n          "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](22,"\n        "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](23,"\n      "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](24,"\n\n      "),r["\u0275\u0275elementStart"](25,"h3",8),r["\u0275\u0275text"](26),r["\u0275\u0275pipe"](27,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](28,"\n      "),r["\u0275\u0275elementStart"](29,"form",9),r["\u0275\u0275listener"]("ngSubmit",(function(){return t.search(t.searchForm.value)})),r["\u0275\u0275text"](30,"\n        "),r["\u0275\u0275elementStart"](31,"div",10),r["\u0275\u0275text"](32,"\n          "),r["\u0275\u0275elementStart"](33,"div",11),r["\u0275\u0275text"](34,"\n            "),r["\u0275\u0275element"](35,"input",12),r["\u0275\u0275pipe"](36,"translate"),r["\u0275\u0275pipe"](37,"translate"),r["\u0275\u0275text"](38,"\n            "),r["\u0275\u0275elementStart"](39,"span",13),r["\u0275\u0275text"](40,"\n              "),r["\u0275\u0275elementStart"](41,"button",14),r["\u0275\u0275text"](42,"\n                "),r["\u0275\u0275element"](43,"i",15),r["\u0275\u0275text"](44),r["\u0275\u0275pipe"](45,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](46,"\n            "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](47,"\n          "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](48,"\n        "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](49,"\n        "),r["\u0275\u0275elementStart"](50,"div"),r["\u0275\u0275text"](51,"\n          "),r["\u0275\u0275elementStart"](52,"button",16),r["\u0275\u0275listener"]("click",(function(){return t.clearFormAndResetResult()})),r["\u0275\u0275text"](53),r["\u0275\u0275pipe"](54,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](55,"\n        "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](56,"\n      "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](57,"\n\n      "),r["\u0275\u0275template"](58,at,1,0,"ds-loading",17),r["\u0275\u0275pipe"](59,"async"),r["\u0275\u0275text"](60,"\n      "),r["\u0275\u0275template"](61,ut,41,25,"ds-pagination",18),r["\u0275\u0275pipe"](62,"async"),r["\u0275\u0275pipe"](63,"async"),r["\u0275\u0275text"](64,"\n\n      "),r["\u0275\u0275template"](65,dt,3,3,"div",19),r["\u0275\u0275pipe"](66,"async"),r["\u0275\u0275text"](67,"\n\n    "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](68,"\n  "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](69,"\n"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](70,"\n")),2&e){let e=null,n=null;r["\u0275\u0275advance"](9),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind1"](10,12,t.messagePrefix+"head")),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("routerLink",r["\u0275\u0275pureFunction0"](34,mt)),r["\u0275\u0275advance"](5),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind1"](20,14,t.messagePrefix+"button.add")),r["\u0275\u0275advance"](7),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind1"](27,16,t.messagePrefix+"search.head")),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("formGroup",t.searchForm),r["\u0275\u0275advance"](6),r["\u0275\u0275property"]("placeholder",r["\u0275\u0275pipeBind1"](37,20,t.messagePrefix+"search.placeholder")),r["\u0275\u0275attribute"]("aria-label",r["\u0275\u0275pipeBind1"](36,18,t.messagePrefix+"search.placeholder")),r["\u0275\u0275advance"](9),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](45,22,t.messagePrefix+"search.button"),"\n              "),r["\u0275\u0275advance"](9),r["\u0275\u0275textInterpolate1"]("\n            ",r["\u0275\u0275pipeBind1"](54,24,t.messagePrefix+"button.see-all"),"\n          "),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngIf",r["\u0275\u0275pipeBind1"](59,26,t.loading$)),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngIf",(null==(e=r["\u0275\u0275pipeBind1"](62,28,t.pageInfoState$))?null:e.totalElements)>0&&!r["\u0275\u0275pipeBind1"](63,30,t.loading$)),r["\u0275\u0275advance"](4),r["\u0275\u0275property"]("ngIf",0==(null==(n=r["\u0275\u0275pipeBind1"](66,32,t.pageInfoState$))?null:n.totalElements))}},directives:[a.i,P["\u0275angular_packages_forms_forms_ba"],P.NgControlStatusGroup,P.FormGroupDirective,P.DefaultValueAccessor,P.NgControlStatus,P.FormControlName,i.p,q.a,V.a,i.o,i.r,i.s,O.O],pipes:[y.d,i.b],encapsulation:2}),e})();var ht=n("mOAm"),ft=n("A0IO"),bt=n("a8lL"),xt=n("uLZQ");let vt=(()=>{class e extends bt.a{constructor(e,t,n,i){super(t,n,i),this.halEndpointService=e,this.authorizationService=t,this.router=n,this.authService=i,this.groupsEndpoint="groups"}getFeatureIDs(e,t){return Object(w.a)([f.a.CanManageGroup])}getObjectUrl(e,t){return this.halEndpointService.getEndpoint(this.groupsEndpoint).pipe(Object(p.a)(t=>{var n;return`${t}/${null===(n=null==e?void 0:e.params)||void 0===n?void 0:n.groupId}`}))}}return e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275inject"](xt.a),r["\u0275\u0275inject"](I.a),r["\u0275\u0275inject"](a.h),r["\u0275\u0275inject"]($.a))},e.\u0275prov=r["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var St=n("hcYp"),yt=n("Vm9x");let Et=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=r["\u0275\u0275defineInjector"]({imports:[[a.l.forChild([{path:"epeople",component:ce,resolve:{breadcrumb:ft.a},data:{title:"admin.access-control.epeople.title",breadcrumbKey:"admin.access-control.epeople"},canActivate:[yt.a]},{path:ht.a,component:gt,resolve:{breadcrumb:ft.a},data:{title:"admin.access-control.groups.title",breadcrumbKey:"admin.access-control.groups"},canActivate:[St.a]},{path:`${ht.a}/newGroup`,component:tt,resolve:{breadcrumb:ft.a},data:{title:"admin.access-control.groups.title.addGroup",breadcrumbKey:"admin.access-control.groups.addGroup"},canActivate:[St.a]},{path:`${ht.a}/:groupId`,component:tt,resolve:{breadcrumb:ft.a},data:{title:"admin.access-control.groups.title.singleGroup",breadcrumbKey:"admin.access-control.groups.singleGroup"},canActivate:[vt]}])]]}),e})();var It=n("kcqd");let Pt=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=r["\u0275\u0275defineInjector"]({imports:[[i.c,s.a,a.l,Et,It.a]]}),e})()},kcqd:function(e,t,n){"use strict";n.d(t,"a",(function(){return x}));var i=n("fXoL"),r=n("ofXK"),a=n("hqmO"),s=n("e+Av"),o=n("NvTF");function l(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"ds-dynamic-form-control-container",1),i["\u0275\u0275listener"]("dfBlur",(function(t){i["\u0275\u0275restoreView"](e);const n=i["\u0275\u0275nextContext"]();return n.onCustomEvent(t,n.blur)}))("dfChange",(function(t){i["\u0275\u0275restoreView"](e);const n=i["\u0275\u0275nextContext"]();return n.onCustomEvent(t,n.change)}))("dfFocus",(function(t){i["\u0275\u0275restoreView"](e);const n=i["\u0275\u0275nextContext"]();return n.onCustomEvent(t,n.focus)}))("ngbEvent",(function(t){i["\u0275\u0275restoreView"](e);const n=i["\u0275\u0275nextContext"]();return n.onCustomEvent(t,n.ngbEvent)})),i["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("formId",n.formId)("group",n.formGroup)("hasErrorMessaging",e.hasErrorMessages)("hidden",e.hidden)("layout",n.formLayout)("model",e)("templates",n.templates)("asBootstrapFormGroup",!0)}}let c=(()=>{class e extends s.x{constructor(e,t){super(e,t),this.blur=new i.EventEmitter,this.change=new i.EventEmitter,this.focus=new i.EventEmitter,this.ngbEvent=new i.EventEmitter}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](i.ChangeDetectorRef),i["\u0275\u0275directiveInject"](s.y))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["ds-dynamic-form"]],contentQueries:function(e,t,n){if(1&e&&i["\u0275\u0275contentQuery"](n,s.O,0),2&e){let e;i["\u0275\u0275queryRefresh"](e=i["\u0275\u0275loadQuery"]())&&(t.templates=e)}},viewQuery:function(e,t){if(1&e&&i["\u0275\u0275viewQuery"](o.a,1),2&e){let e;i["\u0275\u0275queryRefresh"](e=i["\u0275\u0275loadQuery"]())&&(t.components=e)}},inputs:{formId:"formId",formGroup:"formGroup",formModel:"formModel",formLayout:"formLayout"},outputs:{blur:"dfBlur",change:"dfChange",focus:"dfFocus",ngbEvent:"ngbEvent"},features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:2,vars:2,consts:[[3,"formId","group","hasErrorMessaging","hidden","layout","model","templates","asBootstrapFormGroup","dfBlur","dfChange","dfFocus","ngbEvent",4,"ngFor","ngForOf","ngForTrackBy"],[3,"formId","group","hasErrorMessaging","hidden","layout","model","templates","asBootstrapFormGroup","dfBlur","dfChange","dfFocus","ngbEvent"]],template:function(e,t){1&e&&(i["\u0275\u0275template"](0,l,1,8,"ds-dynamic-form-control-container",0),i["\u0275\u0275text"](1,"\n")),2&e&&i["\u0275\u0275property"]("ngForOf",t.formModel)("ngForTrackBy",t.trackByFn)},directives:[r.o,o.a],encapsulation:2}),e})();n("ZO65"),n("0pnk"),n("sw+l"),n("1Pbu"),n("bPV6"),n("Gu/b"),n("A/iK"),n("KKO+"),n("Ysrn");var p=n("tqJZ"),u=n("ZTun"),d=(n("uyTL"),n("Ui2r"),n("8HnP"),n("zVKZ"),n("PCNd")),m=n("sYmb"),g=n("kMeL"),h=(n("yXJd"),n("/Vzl"),n("zGzN"),n("xjoE"),n("n7Wa")),f=n("3Pt+"),b=n("5+WD");let x=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({providers:[{provide:s.c,useValue:o.b}],imports:[[r.c,s.I,h.a,g.a,d.a,m.c]]}),e})();i["\u0275\u0275setComponentScope"](p.a,[f.NgControlStatusGroup,f.FormGroupDirective,f.FormGroupName,r.m,r.o,o.a],[]),i["\u0275\u0275setComponentScope"](u.a,[f.NgControlStatusGroup,f.FormGroupDirective,f.FormArrayName,r.m,b.c,r.o,b.a,b.b,f.FormGroupName,r.t,o.a],[]),i["\u0275\u0275setComponentScope"](a.a,[f["\u0275angular_packages_forms_forms_ba"],f.NgControlStatusGroup,f.FormGroupDirective,c,s.O,r.p],[m.d,r.b])},mOAm:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return s}));var i=n("zZO8"),r=n("TVZh");const a="groups";function s(e){return new i.a(Object(r.m)(),a,e).toString()}},tv3Y:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("zr/d"),r=n("LRne"),a=n("fXoL");let s=(()=>{class e{getBreadcrumbs(e,t){return Object(r.a)([new i.a(e+".breadcrumbs",t)])}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=a["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},"zr/d":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));class i{constructor(e,t){this.text=e,this.url=t}}}}]);
//# sourceMappingURL=11-es2015.3426c8e8adf5876328bd.js.map